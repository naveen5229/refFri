(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"4zcd":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a=n("H+bZ"),o=n("OlR4"),i=n("8Y7J"),r=n("tKwJ"),l=n("csNM"),s=n("SVse"),d=n("wD9S");function c(t,e){if(1&t&&i["\u0275\u0275element"](0,"smart-table",11),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("data",t.table.averageWithOdo)("settings",t.table.settings)}}let h=(()=>{class t{constructor(t,e){this.api=t,this.common=e,this.startDate=null,this.endDate=null,this.averageWithOdo=[],this.table={averageWithOdo:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.odoObj={}}ngOnInit(){}getFuelFillingsAverageWithOdo(){if(null!=this.startDate||null!=this.endDate)if(null!=this.startDate)if(null!=this.endDate)if(this.endDate<this.startDate)this.common.showError("StartDate Should be less then EndDate");else{let t={startTime:this.startDate,endTime:this.endDate};this.common.loading++,this.api.post("Fuel/getFuelFillingsAverageWithOdo",t).subscribe(t=>{if(this.common.loading--,this.averageWithOdo=[],this.table={averageWithOdo:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.odoObj={},!t.data)return;this.averageWithOdo=t.data;let e=this.averageWithOdo[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.averageWithOdo.headings[n]=t}this.table.averageWithOdo.columns=this.getTableColumns(),console.log("Api Response:",t)},t=>{this.common.loading--,console.error("Api Error:",t)})}else this.common.showError("please Enter endDate");else this.common.showError("Please enter startDate");else this.common.showError("Please enter startDate and endDate")}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.averageWithOdo),this.averageWithOdo.map(e=>{this.odoObj={};for(let t=0;t<this.headings.length;t++)this.odoObj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};t.push(this.odoObj)}),t}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](o.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-mileage-with-odo"]],decls:24,vars:6,consts:[[1,"row"],[1,"col-sm-3"],[1,"Fuel","Mileage","with","ODO"],[1,"row","mb-3"],[1,"col-1","pr-0"],[1,"col-2"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-1"],[3,"dateTimeValue","isTime","isStart","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],["id","averageWithOdo",3,"data","settings",4,"ngIf"],["id","averageWithOdo",3,"data","settings"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"h5"),i["\u0275\u0275text"](5,"Fuel Mileage With ODO"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"nb-card-body"),i["\u0275\u0275elementStart"](7,"div",2),i["\u0275\u0275elementStart"](8,"div",3),i["\u0275\u0275elementStart"](9,"div",4),i["\u0275\u0275elementStart"](10,"label"),i["\u0275\u0275text"](11,"Start Date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",5),i["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),i["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",7),i["\u0275\u0275elementStart"](15,"label"),i["\u0275\u0275text"](16,"End Date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",5),i["\u0275\u0275elementStart"](18,"uj-date-time-picker",8),i["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",5),i["\u0275\u0275elementStart"](20,"button",9),i["\u0275\u0275listener"]("click",(function(){return e.getFuelFillingsAverageWithOdo()})),i["\u0275\u0275text"](21,"Submit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div"),i["\u0275\u0275template"](23,c,1,2,"smart-table",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](13),i["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.averageWithOdo&&e.averageWithOdo.length))},directives:[r.s,r.v,r.r,l.a,s.u,d.a],styles:[""]}),t})()},"6ugN":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("H+bZ"),o=n("OlR4"),i=n("NTD5"),r=n("Deaf"),l=n("8Y7J"),s=n("SVse"),d=n("G0yt"),c=n("tKwJ"),h=n("s7LF"),m=n("0zba"),g=n("wD9S");function p(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",12),l["\u0275\u0275element"](1,"smart-table",13),l["\u0275\u0275elementEnd"]()),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function b(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"h4",15),l["\u0275\u0275text"](2,"No Record Found"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}let u=(()=>{class t{constructor(t,e,n,a,o){this.datePipe=t,this.api=e,this.common=n,this.user=a,this.modalService=o,this.data=[],this.brands=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleBrandTypes()}ngOnInit(){}vehicleBrandTypes(){this.common.loading++,this.api.get("Vehicles/getVehicleBrandsMaster").subscribe(t=>{this.common.loading--,this.brands=t.data,console.log("Brand Type",this.brands)},t=>{this.common.loading--,console.log(t)})}addModalService(){this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.refresh(t)})}refresh(t){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getModelService(t.response)}deleteVehicleModel(t){confirm("Are You Sure you want to delete the Entry??")&&(this.common.loading++,this.api.post("VehicleMaintenance/deleteModelService",{id:t}).subscribe(t=>{this.common.loading--,console.log("response:",t),t.success&&(this.common.showToast("Sucessfully Deleted",1e4),console.log("Brand",this.brandId),this.refresh({response:this.brandId}))},t=>{this.common.loading--,console.log(t)}))}getModelService(t){t&&(this.common.loading++,this.api.get("VehicleMaintenance/viewModalService?brandId="+t).subscribe(t=>{if(this.common.loading--,this.data=t.data,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!this.data||!this.data.length)return;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)}))}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.action={icons:[{class:" fa fa-trash remove",action:this.deleteVehicleModel.bind(this,e._id)}],action:null},t.push(this.valobj)}),t}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](s.f),l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["view-modal-service"]],decls:17,vars:4,consts:[[2,"margin","0px","padding-top","0px","border","0px","height","100%"],[2,"padding-bottom","0px"],[1,"container"],[1,"row"],[1,"w-100"],[1,"col-md-1"],[1,"col-md-2"],["display","name","placeholder","Enter Brand",3,"data","preSelected","onSelected"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-body",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"form",4),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"div",5),l["\u0275\u0275elementStart"](7,"label"),l["\u0275\u0275text"](8,"Select Brand"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",6),l["\u0275\u0275elementStart"](10,"auto-suggestion",7),l["\u0275\u0275listener"]("onSelected",(function(t){return e.getModelService(t.id),e.brandId=t.id})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](11,"div",8),l["\u0275\u0275elementStart"](12,"div",6),l["\u0275\u0275elementStart"](13,"button",9),l["\u0275\u0275listener"]("click",(function(){return e.addModalService()})),l["\u0275\u0275text"](14," Add Vehicle Modal Service "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](15,p,2,2,"div",10),l["\u0275\u0275template"](16,b,3,0,"div",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("data",e.brands)("preSelected",null),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",e.data&&e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[c.s,c.r,h.H,h.s,h.t,m.a,s.u,g.a],styles:[".no-record[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 182px)}"]}),t})()},"9zuT":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("8Y7J"),l=n("G0yt"),s=n("tKwJ"),d=n("SVse"),c=n("s7LF"),h=n("csNM"),m=n("wD9S");function g(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"span"),r["\u0275\u0275elementStart"](2,"span",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().printPDF("vehicleDistance")})),r["\u0275\u0275element"](3,"i",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().printCsv("vehicleDistance")})),r["\u0275\u0275element"](5,"i",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function p(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",17),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let b=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.data={foid:"",startDate:null,endDate:null},this.result=[],this.table=null,this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}getFoList(t){console.log("user",t),this.data.foid=t.id}getDistance(){if(this.data.startDate>this.data.endDate)this.common.showError("StartDate Should be less then Enddate");else{console.log("Start Date: ",this.common.dateFormatter(this.data.startDate,"YYYYMMDD",!0,"-")),console.log("End Date: ",this.common.dateFormatter(this.data.endDate,"YYYYMMDD",!0,"-")),console.log("Data:",this.data);let t={fromTime:this.common.dateFormatter(this.data.startDate,"YYYYMMDD",!0,"-"),tTime:this.common.dateFormatter(this.data.endDate,"YYYYMMDD",!0,"-")};this.common.loading++,this.api.post("vehicles/foVehicleDistance",t).subscribe(t=>{this.common.loading--,console.log("Res:",t.data),this.result=t.data,this.table=this.setTable()},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError()})}}setTable(){return{data:{headings:{regno:{title:"Regno Number",placeholder:"Regno No"},dist:{title:"Distance ",placeholder:"Distance"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let t=[];return this.result.map(e=>{t.push({regno:{value:e.regno},dist:{value:e.distance}})}),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Vehicle Distance",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Vehicle Distance",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-distance"]],decls:19,vars:5,consts:[[2,"margin","0px","padding-top","0px","border","0px"],[1,"row"],[1,"col-sm-10"],[1,"col-sm-2"],[4,"ngIf"],[2,"padding-bottom","0px","min-height","450px"],[1,"w-100","mb-3"],[1,"col-4","pr-0"],[3,"dateTimeValue","onChanged"],[3,"isStart","dateTimeValue","onChanged"],[1,"col-2","offset-md-08"],["type","button",1,"btn","btn-primary","mt-0",3,"click"],["id","vehicleDistance",3,"data","settings",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","vehicleDistance",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Distance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275template"](7,g,6,0,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"nb-card-body",5),r["\u0275\u0275elementStart"](9,"form",6),r["\u0275\u0275elementStart"](10,"div",1),r["\u0275\u0275elementStart"](11,"div",7),r["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),r["\u0275\u0275listener"]("onChanged",(function(t){return e.data.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"uj-date-time-picker",9),r["\u0275\u0275listener"]("onChanged",(function(t){return e.data.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",10),r["\u0275\u0275elementStart"](16,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getDistance()})),r["\u0275\u0275text"](17,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](18,p,1,2,"smart-table",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.result.length),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.data.startDate),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isStart",!1)("dateTimeValue",e.data.endDate),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.result&&e.result.length))},directives:[s.s,s.v,d.u,s.r,c.H,c.s,c.t,h.a,m.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},GCkA:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("vTDv"),o=n("8Y7J");let i=(()=>{class t{}return t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.a]]}),t})()},IarD:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("H+bZ"),o=n("OlR4"),i=n("NTD5"),r=n("RKfx"),l=n("8Y7J"),s=n("SVse"),d=n("G0yt"),c=n("tKwJ"),h=n("s7LF"),m=n("0zba"),g=n("wD9S");function p(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",17),l["\u0275\u0275element"](1,"smart-table",18),l["\u0275\u0275elementEnd"]()),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function b(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",19),l["\u0275\u0275elementStart"](1,"h4",20),l["\u0275\u0275text"](2,"No Record Found"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}let u=(()=>{class t{constructor(t,e,n,a,o){this.datePipe=t,this.api=e,this.common=n,this.user=a,this.modalService=o,this.data=[],this.modelId=null,this.models=[],this.brands=[],this.mapping=0,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleBrandTypes()}ngOnInit(){}vehicleBrandTypes(){this.common.loading++,this.api.get("Vehicles/getVehicleBrandsMaster").subscribe(t=>{this.common.loading--,this.brands=t.data,console.log("Brand Type",this.brands)},t=>{this.common.loading--,console.log(t)})}vehicleModelTypes(){this.brandId&&(this.common.loading++,this.api.get("Vehicles/getVehicleModelsMaster?brandId="+this.brandId).subscribe(t=>{this.common.loading--,this.models=t.data,console.log("models Type",this.models)},t=>{this.common.loading--,console.log(t)}))}addModalService(){this.modelId?(this.common.params={modelId:this.modelId},this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&(this.modelId=t.modelId,this.mapping=-1,this.refresh())})):this.common.showError("Select Model")}refresh(){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getSubModelService()}deleteVehicleModel(t,e){confirm("Are You Sure you want to delete the Entry??")&&(this.common.loading++,this.api.post("VehicleMaintenance/deleteSubModelService",{id:t}).subscribe(t=>{this.common.loading--,console.log("response:",t),t.success&&(this.common.showToast("Sucessfully Deleted",1e4),console.log("Brand",this.brandId),this.modelId=e,this.mapping=-1,this.refresh())},t=>{this.common.loading--,console.log(t)}))}resetData(t){this.modelId=null,document.getElementsByName("suggestion")[1].value=""}getSubModelService(){this.brandId||this.modelId?(this.common.loading++,this.api.get("VehicleMaintenance/viewSubModalService?brandId="+(this.brandId||-1)+"&modelId="+(this.modelId||-1)+"&mapping="+this.mapping).subscribe(t=>{if(this.common.loading--,this.data=t.data,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!this.data||!this.data.length)return;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})):this.common.showError("Model/Brand not selected")}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.action={icons:[{value:"",class:e._id>0?" fa fa-trash remove":null,action:this.deleteVehicleModel.bind(this,e._id,e._modelid)}],action:null},t.push(this.valobj)}),t}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](s.f),l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["view-sub-modal-service"]],decls:35,vars:7,consts:[[2,"margin","0px","padding-top","0px","border","0px","height","100%"],[2,"padding-bottom","0px"],[1,"container"],[1,"row"],[1,"w-100"],[1,"col-md-1","pt-2"],[1,"col-md-2"],["display","name","placeholder","Enter Brand",3,"data","preSelected","onSelected"],["display","name","placeholder","Enter Model",3,"data","preSelected","onSelected","change"],["name","mapping",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"col-md-1"],[1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-body",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"form",4),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"div",5),l["\u0275\u0275elementStart"](7,"label"),l["\u0275\u0275text"](8,"Brand"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",6),l["\u0275\u0275elementStart"](10,"auto-suggestion",7),l["\u0275\u0275listener"]("onSelected",(function(t){return e.brandId=t.id,e.vehicleModelTypes()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",5),l["\u0275\u0275elementStart"](12,"label"),l["\u0275\u0275text"](13,"Model"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",6),l["\u0275\u0275elementStart"](15,"auto-suggestion",8),l["\u0275\u0275listener"]("onSelected",(function(t){return e.modelId=t.id}))("change",(function(t){return e.resetData(t)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",5),l["\u0275\u0275elementStart"](17,"label"),l["\u0275\u0275text"](18,"Mapping"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",6),l["\u0275\u0275elementStart"](20,"select",9),l["\u0275\u0275listener"]("ngModelChange",(function(t){return e.mapping=t})),l["\u0275\u0275elementStart"](21,"option",10),l["\u0275\u0275text"](22,"Any"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"option",11),l["\u0275\u0275text"](24,"Yes"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"option",12),l["\u0275\u0275text"](26,"No"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",13),l["\u0275\u0275elementStart"](28,"button",14),l["\u0275\u0275listener"]("click",(function(){return e.getSubModelService()})),l["\u0275\u0275text"](29," View "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",13),l["\u0275\u0275elementStart"](31,"button",14),l["\u0275\u0275listener"]("click",(function(){return e.addModalService()})),l["\u0275\u0275text"](32," Add/Update "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](33,p,2,2,"div",15),l["\u0275\u0275template"](34,b,3,0,"div",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("data",e.brands)("preSelected",null),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("data",e.models)("preSelected",null),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",e.mapping),l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("ngIf",e.data&&e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[c.s,c.r,h.H,h.s,h.t,m.a,h.D,h.r,h.u,h.w,h.G,s.u,g.a],styles:[".no-record[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 184px)}"]}),t})()},JYbL:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n("Xy1B"),o=n("H+bZ"),i=n("OlR4"),r=n("qfBg"),l=n("8Y7J"),s=n("G0yt"),d=n("tKwJ"),c=n("SVse"),h=n("wD9S");function m(t,e){if(1&t){const t=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",9),l["\u0275\u0275elementStart"](1,"button",15),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](t),l["\u0275\u0275nextContext"]().closeModal()})),l["\u0275\u0275elementStart"](2,"span",16),l["\u0275\u0275text"](3,"\xd7"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function g(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",17),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let p=(()=>{class t{constructor(t,e,n,a,o){let i;this.api=t,this.common=e,this.modalService=n,this.activeModal=a,this.user=o,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.foid=0,this.isAdmin=0,this.id=null,this.openType=this.common.openType,this.common.openType="page",i=new Date,this.endDate=this.common.dateFormatter(i).split(" ")[0],this.startDate=this.common.dateFormatter(i).split(" ")[0],this.common.params&&(this.foid=this.common.params.foid?this.common.params.foid:0,this.isAdmin=this.common.params.foid?1:0),this.getSummary(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getSummary()}getDate(t){this.common.params={ref_page:"trip status feedback"},this.modalService.open(a.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.common.dateFormatter(e.date).split(" ")[0]):(this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}getSummary(){this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};const t="startDate="+this.startDate+"&endDate="+this.endDate+" 23:59:59&foid="+this.foid+"&isAdmin="+this.isAdmin;console.log("params: ",t),this.common.loading++,this.api.get("FoDetails/getFoUserActivitySummary?"+t).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.activitySummary=t.data,console.log("activitySummary",this.activitySummary);let e=this.activitySummary[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.activitySummary.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.activitySummary[e][this.headings[t]],class:"black",action:""};t.push(this.valobj)}return t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}closeModal(){this.activeModal.close()}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"User Activity Statistics",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:User Activity Statistics",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](s.r),l["\u0275\u0275directiveInject"](s.b),l["\u0275\u0275directiveInject"](r.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["user-activity-status"]],decls:27,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-4"],[1,"col-2","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],["class","col-sm-3",4,"ngIf"],["id","acivitySummary",3,"data","settings",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["id","acivitySummary",3,"data","settings"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"User Activity Statistics"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275elementStart"](8,"span",4),l["\u0275\u0275listener"]("click",(function(){return e.printPDF("acivitySummary")})),l["\u0275\u0275element"](9,"i",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"span",6),l["\u0275\u0275listener"]("click",(function(){return e.printCsv("acivitySummary")})),l["\u0275\u0275element"](11,"i",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",8),l["\u0275\u0275elementStart"](13,"div",1),l["\u0275\u0275elementStart"](14,"div",9),l["\u0275\u0275elementStart"](15,"input",10),l["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),l["\u0275\u0275pipe"](16,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",9),l["\u0275\u0275elementStart"](18,"input",11),l["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),l["\u0275\u0275pipe"](19,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"div",9),l["\u0275\u0275elementStart"](21,"button",12),l["\u0275\u0275listener"]("click",(function(){return e.getSummary()})),l["\u0275\u0275text"](22,"submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](23,m,4,0,"div",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"nb-card-body"),l["\u0275\u0275elementStart"](25,"div"),l["\u0275\u0275template"](26,g,1,2,"smart-table",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](15),l["\u0275\u0275property"]("value",l["\u0275\u0275pipeBind2"](16,4,e.startDate,"dd MMM yyyy")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("value",l["\u0275\u0275pipeBind2"](19,7,e.endDate,"dd MMM yyyy")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf","modal"==e.openType),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.activitySummary&&e.activitySummary.length))},directives:[d.s,d.v,c.u,d.r,h.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 80px)}.btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px;width:100%}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.close[_ngcontent-%COMP%]{font-size:32px;color:#000}"]}),t})()},Opnw:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n("OlR4"),o=n("H+bZ"),i=n("Owt1"),r=n("8Y7J"),l=n("G0yt"),s=n("tKwJ"),d=n("csNM"),c=n("SVse"),h=n("wD9S");function m(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",7),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let g=(()=>{class t{constructor(t,e,n,a,o){this.activeModal=t,this.common=e,this.commonService=n,this.api=a,this.modalService=o,this.startDate=new Date,this.endDate=new Date,this.data=[],this.table=null,this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}getFoWebView(){if(this.startDate>this.endDate)return this.common.showError("Select valid Date");let t="startDate="+this.common.dateFormatter(this.startDate)+"&endDate="+this.common.dateFormatter(this.endDate);this.common.loading++,this.api.get("FoAdmin/getFoAdminWebActivity?"+t).subscribe(t=>{this.common.loading--,this.data=t.data,null==this.data&&(this.data=[],this.table=null),this.table=this.setTable()},t=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{Name:{title:"Name",placeholder:"Name"},Channel:{title:"Channel",placeholder:"Channel"},"Login Count":{title:"Login Count",placeholder:"Login Count"},"Total Dur(Min)":{title:"Total Dur(Min)",placeholder:"Total Dur(Min)"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let t=[];return this.data.map(e=>{let n={Name:{value:e.Name,action:this.activitySummary.bind(this,e)},Channel:{value:e.Channel},"Login Count":{value:null==e["Login Count"]?"-":e["Login Count"]},"Total Dur(Min)":{value:null==e["Total Dur(Min)"]?"-":e["Total Dur(Min)"]}};t.push(n)}),t}activitySummary(t){this.common.params={summary:t,sd:this.startDate,ed:this.endDate},this.modalService.open(i.a,{size:"lg",container:"nb-layout"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](l.b),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["web-activity-summary"]],decls:21,vars:6,consts:[[1,"row"],[1,"col-2"],[1,"col-3"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isStart","isTime","onChanged"],[1,"btn","btn-primary",3,"click"],["id","doubleToll",3,"data","settings",4,"ngIf"],["id","doubleToll",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h2"),r["\u0275\u0275text"](3,"Web Activity Summary"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"label"),r["\u0275\u0275text"](8,"Start Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",2),r["\u0275\u0275elementStart"](10,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",1),r["\u0275\u0275elementStart"](12,"label"),r["\u0275\u0275text"](13,"End Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",2),r["\u0275\u0275elementStart"](15,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",1),r["\u0275\u0275elementStart"](17,"button",5),r["\u0275\u0275listener"]("click",(function(){return e.getFoWebView()})),r["\u0275\u0275text"](18,"GET VIEW"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,m,1,2,"smart-table",6),r["\u0275\u0275element"](20,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isStart",!1)("isTime",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,d.a,c.u,h.a],styles:[""]}),t})()},VKYg:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("cFbe"),l=n("R5DY"),s=n("ia/1"),d=n("fwbA"),c=n("x2st"),h=n("08B9"),m=n("ws3O"),g=n("ee+m"),p=n("Cqln"),b=n("8Y7J"),u=n("G0yt"),f=n("tKwJ"),v=n("SVse"),x=n("wD9S");function C(t,e){if(1&t){const t=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"button",10),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](t),b["\u0275\u0275nextContext"]().addViaRoutes()})),b["\u0275\u0275text"](1,"Add Routes"),b["\u0275\u0275elementEnd"]()}}function M(t,e){if(1&t&&b["\u0275\u0275element"](0,"smart-table",11),2&t){const t=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let _=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.foData=null,this.routeId=null,this.viaRoutes=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewTable(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.viewTable()}selectFoUser(t){this.foData=t.id}strictRoutes(){this.modalService.open(m.a,{size:"lg",container:"nb-layout"})}addViaRoutes(){this.modalService.open(r.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.viewTable()})}addPriSecRoute(){this.modalService.open(g.a,{size:"lg",container:"nb-layout",backdrop:"static"})}viewTable(){this.viaRoutes=[],this.common.loading++,this.api.get("ViaRoutes/view").subscribe(t=>{if(this.common.loading--,this.viaRoutes=t.data||[],!this.viaRoutes.length)return;let e=this.viaRoutes[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action"),hideSearch:!0};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()},t=>{console.error(t),this.common.showError()})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];return this.viaRoutes.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""},"via_points"==this.headings[t]&&(this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openViaRoutePoints.bind(this,e)}),"expenses"==this.headings[t]&&(this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openrouteExpenses.bind(this,e)}),"traffic_kpis"==this.headings[t]&&(this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openrouteKpi.bind(this,e)}),"advances"==this.headings[t]&&(this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openrouteAdvance.bind(this,e)}),"time_table"==this.headings[t]&&(this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.addRouteTimeTable.bind(this,e)}),this.valobj.action={class:"",icons:this.actionIcons(e)};t.push(this.valobj)}),t}actionIcons(t){let e=[];return this.user.permission.edit&&e.push({class:"fas fa-edit mr-3",action:this.editRoute.bind(this,t)}),this.user.permission.delete&&e.push({class:"fa fa-window-close",action:this.remove.bind(this,t)}),e}remove(t){let e={id:t._id,foid:t._foid};t._id&&(this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("ViaRoutes/delete",e).subscribe(t=>{this.common.loading--,this.common.showToast(t.msg),this.viewTable()},t=>{this.common.loading--,console.log("Error: ",t)}))}))}openViaRoutePoints(t){this.common.params={route:t},this.modalService.open(l.a,{size:"lg",container:"nb-layout",windowClass:"mycustomModalClass"}).result.then(t=>{console.log("data",t),this.viewTable()})}openrouteExpenses(t){this.common.params={doc:t},this.modalService.open(d.a,{size:"lg",container:"nb-layout"}).result.then(t=>{this.viewTable()})}openrouteAdvance(t){this.common.params={doc:t},this.modalService.open(c.a,{size:"lg",container:"nb-layout"}).result.then(t=>{this.viewTable()})}openrouteKpi(t){this.common.params={doc:t},this.modalService.open(h.a,{size:"lg",container:"nb-layout"}).result.then(t=>{this.viewTable()})}addRouteTimeTable(t){this.common.params={routeData:{routeId:t._id,routeName:t.name}},this.modalService.open(p.a,{size:"lg",container:"nb-layout",backdrop:"static"})}editRoute(t){let e={id:t._id,routeName:t.name,routeType:t._route_type,kms:t.kms};console.log(".....",t),this.common.params={editRoute:e},this.modalService.open(r.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.viewTable()})}}return t.\u0275fac=function(e){return new(e||t)(b["\u0275\u0275directiveInject"](a.a),b["\u0275\u0275directiveInject"](o.a),b["\u0275\u0275directiveInject"](i.a),b["\u0275\u0275directiveInject"](u.r))},t.\u0275cmp=b["\u0275\u0275defineComponent"]({type:t,selectors:[["via-routes"]],decls:16,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-4"],[1,"col-2"],["type","submit","name","strict",1,"btn","btn-primary","m-0",3,"click"],[1,"col-3"],["type","submit","name","Vehicle",1,"btn","btn-primary","m-0",3,"click"],["type","button","class","btn btn-primary m-0","name","add","id","add",3,"click",4,"ngIf"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["type","button","name","add","id","add",1,"btn","btn-primary","m-0",3,"click"],[3,"data","settings"]],template:function(t,e){1&t&&(b["\u0275\u0275elementStart"](0,"nb-card",0),b["\u0275\u0275elementStart"](1,"nb-card-header"),b["\u0275\u0275elementStart"](2,"div",1),b["\u0275\u0275elementStart"](3,"div",2),b["\u0275\u0275elementStart"](4,"h5"),b["\u0275\u0275text"](5,"Routes "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"div",3),b["\u0275\u0275elementStart"](7,"button",4),b["\u0275\u0275listener"]("click",(function(){return e.strictRoutes()})),b["\u0275\u0275text"](8,"Strict Mapping"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](9,"div",5),b["\u0275\u0275elementStart"](10,"button",6),b["\u0275\u0275listener"]("click",(function(){return e.addPriSecRoute()})),b["\u0275\u0275text"](11,"Vehicle Routes Mapping"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](12,"div",5),b["\u0275\u0275template"](13,C,2,0,"button",7),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](14,"nb-card-body",8),b["\u0275\u0275template"](15,M,1,2,"smart-table",9),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&t&&(b["\u0275\u0275advance"](13),b["\u0275\u0275property"]("ngIf",e.user.permission.add),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",e.viaRoutes&&e.viaRoutes.length))},directives:[f.s,f.v,v.u,f.r,x.a],styles:['[_nghost-%COMP%]     .fa-window-close{color:red;font-size:18px}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:green;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 36px;font-weight:400;font-size:11px;left:-26px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit Route";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},ahTD:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("Xy1B"),l=n("21Dh"),s=n("VJ3l"),d=n("SVse"),c=n("8Y7J"),h=n("G0yt"),m=n("tKwJ"),g=n("s7LF"),p=n("wD9S");function b(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"option",15),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;c["\u0275\u0275property"]("value",t.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function u(t,e){if(1&t&&c["\u0275\u0275element"](0,"smart-table",16),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function f(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"div",17),c["\u0275\u0275text"](1," No Data available ! "),c["\u0275\u0275elementEnd"]())}let v=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.user=n,this.modalService=a,this.datePipe=o,this.fuelAvgDetails=[],this.showTable=!1,this.Status=[{id:1,name:"ALL"},{id:2,name:"Issues"},{id:3,name:"NonIssues"}],this.today=new Date,this.dates={start:this.common.dateFormatter(new Date(this.today.setDate(this.today.getDate()-28))).split(" ")[0],end:this.common.dateFormatter(new Date).split(" ")[0]},this.id="1",this.table=null,this.getfuelAverageDetails(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getfuelAverageDetails()}selectType(){this.getfuelAverageDetails()}getfuelAverageDetails(){console.log("Status:",this.id),this.fuelAvgDetails=[],console.log("api hit"),this.common.loading++,this.api.post("FuelDetails/getVehicleFuelFillingAvg",{startTime:this.dates.start,endTime:this.dates.end,foId:null}).subscribe(t=>{this.common.loading--,console.log(t),this.fuelAvgDetails=t.data||[],null!=this.fuelAvgDetails?this.table=this.setTable():(this.table=null,this.common.showToast("No Record Found!!"))},t=>{this.common.loading--,console.log(t)})}setTable(){return{data:{headings:{vehicleNumber:{title:"Vehicle Number",placeholder:"Vehicle No"},startDate:{title:"Start Date",placeholder:"Start Date",type:"date"},endDate:{title:"End Date",placeholder:"End Date",type:"date"},liters:{title:"Liters",placeholder:"Liters"},amount:{title:"Amounts",placeholder:"Amounts"},average:{title:"Average",placeholder:"Average"},totalDistance:{title:"Total Distance",placeholder:"Total Distance"},loadingDistance:{title:"Loading Distance",placeholder:"Loading Distance"},unloadingDistance:{title:"Unloading Distance",placeholder:"Unloading Distance"},location:{title:"Location Trail",placeholder:"Location Trail"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let t=[];return"1"==this.id&&this.fuelAvgDetails.map(e=>{let n={vehicleNumber:{value:e.reg_number},startDate:{value:this.datePipe.transform(e.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=e.enddate?this.datePipe.transform(e.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:e.liters,class:e.liters?"blue":"black",action:this.getDetails.bind(this,e)},amount:{value:e.amounts},average:{value:e.avg},totalDistance:{value:e.total_distance,class:e.total_distance?"blue":"black",action:this.openRouteMapper.bind(this,e)},loadingDistance:{value:e.loading_distance},unloadingDistance:{value:e.unloading_distance},location:{value:e.location_trail},style:{background:e.is_probable_issue?"lightcoral":""}};t.push(n)}),"2"==this.id&&(this.fuelAvgDetails=this.fuelAvgDetails.filter(t=>1==t.is_probable_issue),console.log("test",this.fuelAvgDetails),this.fuelAvgDetails.map(e=>{let n={vehicleNumber:{value:e.reg_number},startDate:{value:this.datePipe.transform(e.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=e.enddate?this.datePipe.transform(e.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:e.liters,class:e.liters?"blue":"black",action:this.getDetails.bind(this,e)},amount:{value:e.amounts},average:{value:e.avg},totalDistance:{value:e.total_distance,class:e.total_distance?"blue":"black",action:this.openRouteMapper.bind(this,e)},loadingDistance:{value:e.loading_distance},unloadingDistance:{value:e.unloading_distance},location:{value:e.location_trail},style:{background:e.is_probable_issue?"lightcoral":""}};t.push(n)})),"3"==this.id&&(this.fuelAvgDetails=this.fuelAvgDetails.filter(t=>null==t.is_probable_issue),console.log("test",this.fuelAvgDetails),this.fuelAvgDetails.map(e=>{let n={vehicleNumber:{value:e.reg_number},startDate:{value:this.datePipe.transform(e.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=e.enddate?this.datePipe.transform(e.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:e.liters,class:e.liters?"blue":"black",action:this.getDetails.bind(this,e)},amount:{value:e.amounts},average:{value:e.avg},totalDistance:{value:e.total_distance,class:e.total_distance?"blue":"black",action:this.openRouteMapper.bind(this,e)},loadingDistance:{value:e.loading_distance},unloadingDistance:{value:e.unloading_distance},location:{value:e.location_trail}};t.push(n)})),t}getDate(t){this.common.params={ref_page:"fuel-avg"},this.modalService.open(r.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&(this.dates[t]=this.common.dateFormatter(e.date).split(" ")[0],console.log("Date:",this.dates[t]))})}getDetails(t){this.common.params=t,console.log("Param",this.common.params),this.modalService.open(l.a,{size:"lg",container:"nb-layout"}).result.then(t=>{t.update&&this.getfuelAverageDetails()})}openRouteMapper(t){let e;this.common.handleModalHeightWidth("class","modal-lg","200","1500"),e=null!=t.enddate?t.enddate:this.common.dateFormatter(new Date),console.log("date",e),this.common.params={vehicleId:t.vehicle_id,vehicleRegNo:t.reg_number,fromTime:t.startdate,toTime:e},console.log("open Route Mapper modal",this.common.params),this.modalService.open(s.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Fuel Mileage",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Fuel Mileage",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](h.r),c["\u0275\u0275directiveInject"](d.f))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-average-analysis"]],features:[c["\u0275\u0275ProvidersFeature"]([d.f])],decls:27,vars:12,consts:[[1,"row"],[1,"col-sm-3"],[1,"col-sm-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-2"],["type","text","autocomplete","off","placeholder","Select Start Date","name","start-date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","Select End Date","name","end-date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["name","Status",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["id","submit","name","submit",1,"btn","btn-primary","w-100",2,"margin","0px","cursor","pointer",3,"click"],["id","fuelMileage",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"value"],["id","fuelMileage",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Fuel Mileage"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",2),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275elementStart"](8,"span",3),c["\u0275\u0275listener"]("click",(function(){return e.printPDF("fuelMileage")})),c["\u0275\u0275element"](9,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"span",5),c["\u0275\u0275listener"]("click",(function(){return e.printCsv("fuelMileage")})),c["\u0275\u0275element"](11,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",7),c["\u0275\u0275elementStart"](13,"input",8),c["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),c["\u0275\u0275pipe"](14,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",7),c["\u0275\u0275elementStart"](16,"input",9),c["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),c["\u0275\u0275pipe"](17,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",7),c["\u0275\u0275elementStart"](19,"select",10),c["\u0275\u0275listener"]("ngModelChange",(function(t){return e.id=t}))("change",(function(){return e.selectType()})),c["\u0275\u0275template"](20,b,2,2,"option",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",7),c["\u0275\u0275elementStart"](22,"button",12),c["\u0275\u0275listener"]("click",(function(){return e.getfuelAverageDetails()})),c["\u0275\u0275text"](23,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"nb-card-body"),c["\u0275\u0275template"](25,u,1,2,"smart-table",13),c["\u0275\u0275template"](26,f,2,0,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("value",c["\u0275\u0275pipeBind2"](14,6,e.dates.start,"dd MMM yyyy")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("value",c["\u0275\u0275pipeBind2"](17,9,e.dates.end,"dd MMM yyyy")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.Status),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",e.fuelAvgDetails&&e.fuelAvgDetails.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e.fuelAvgDetails))},directives:[m.s,m.v,g.D,g.r,g.u,d.t,m.r,d.u,g.w,g.G,p.a],pipes:[d.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 8px;font-weight:400;width:110px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 8px!important;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 210px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto;word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700;cursor:pointer}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .indianred{background-color:#f08080;color:#fff}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 192px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},axIL:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("j/M5"),l=n("qcv8"),s=n("jjvj"),d=n("NUr5"),c=n("8Y7J"),h=n("G0yt"),m=n("tKwJ"),g=n("SVse"),p=n("wD9S");function b(t,e){if(1&t&&c["\u0275\u0275element"](0,"smart-table",5),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let u=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.title="",this.showTable=!1,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getVehiclesDetail()}ngOnInit(){}refresh(){console.log("Refresh"),this.getVehiclesDetail()}getVehiclesDetail(){this.common.loading++,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.api.get("Vehicles/vehiclesDetailView").subscribe(t=>{if(this.common.loading--,this.data=t.data,console.log("data:"),console.log(this.data),null==this.data)return void(this.data=[]);let e=this.data[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},t=>{this.common.loading--,console.log(t)})}getTableColumns(){let t=[];for(var e=0;e<this.data.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Action"==this.headings[t]?{value:"",isHTML:!1,action:null,icons:this.actionIcons(this.data[e])}:{value:this.data[e][this.headings[t]],class:"black",action:""};t.push(this.valobj)}return t}actionIcons(t){return[{class:"fa fa-pencil-square-o  edit-btn",action:this.OpenVehicleNextServiceModal.bind(this,t)},{class:"icon fas fa-tachometer-alt",action:this.openOdoMeter.bind(this,t)},{class:"icon fa fa-edit",action:this.OpenVehicleupdateModal.bind(this,t)}]}openOdoMeter(t){console.log("data",t),this.common.params={vehicleId:t._vid,regno:t.Vehicle},console.log("Param",this.common.params),this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}OpenVehicleNextServiceModal(t){this.common.params={vehicleId:t._vid,vehicleNo:t.Vehicle},console.log("vehicle",t),this.modalService.open(r.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.data>0&&this.getVehiclesDetail(),console.log("response----",t.data)})}openNextBulkUpdateModal(){this.modalService.open(l.a,{size:"lg",container:"nb-layout"}).result.then(t=>{})}OpenVehicleupdateModal(t){this.common.params={vehicle:{id:t._vid}},console.log("vehicle",t),this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.data&&this.getVehiclesDetail(),console.log("response----",t.data)})}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](h.r))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicles"]],decls:12,vars:1,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"btn","btn-primary","m-0","bulk","pt-2","pb-2","rounded-sm",3,"click"],["id","vehicle",3,"data","settings",4,"ngIf"],["id","vehicle",3,"data","settings"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Vehicles"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",2),c["\u0275\u0275elementStart"](7,"button",3),c["\u0275\u0275listener"]("click",(function(){return e.openNextBulkUpdateModal()})),c["\u0275\u0275text"](8,"Bulk Update Service Master"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"nb-card-body"),c["\u0275\u0275template"](10,b,1,2,"smart-table",4),c["\u0275\u0275element"](11,"br"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[m.s,m.v,m.r,g.u,p.a],styles:['.bulk[_ngcontent-%COMP%]{float:right;height:36px;font-size:12px;font-weight:900}[_nghost-%COMP%]     .tableFixHead table tr td i{margin-right:5px}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o{color:red}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span:before{content:"Change Service Time/Kms";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span:before{content:"Add/View Odo";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt:hover span{display:block}']}),t})()},baNc:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n("H+bZ"),o=n("OlR4"),i=n("msMB"),r=n("m9e2"),l=n("RxAH"),s=n("8Y7J"),d=n("G0yt"),c=n("tKwJ"),h=n("SVse"),m=n("wD9S");function g(t,e){if(1&t&&s["\u0275\u0275element"](0,"smart-table",4),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let p=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.challanRequest=[],this.getChallanPaymentRequest(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getChallanPaymentRequest()}getChallanPaymentRequest(){this.common.loading++,this.api.get("Challans/getChallanPaymentRequest").subscribe(t=>{console.log("Res:",t),this.common.loading--,this.clearAllTableData(),t.data?(this.challanRequest=t.data,this.setTable()):this.common.showError("Data Not Found")},t=>{this.common.loading--,this.common.showError(t)})}setTable(){this.table.data={headings:this.generateHeadings(this.challanRequest[0]),columns:this.getColumns(this.challanRequest,this.challanRequest[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]="Action"==n?{value:"",action:null,icons:[{class:1==t._req_status?"fas fa-edit mr-2":null,action:this.payChallanPayment.bind(this,t)},{class:t._ch_doc_id?"far fa-file-alt mr-2":"far fa-file-alt text-color",action:this.paymentDocImage.bind(this,t._ch_doc_id)},{class:2==t._req_status?"fa fa-upload mr-2":null,action:this.confirmation.bind(this,t)}]}:{value:t[n],class:"black",action:""};n.push(a)}),n}paymentDocImage(t){let e="";if(t){let n="docId="+t;this.common.loading++,this.api.get("Documents/getRepositoryImages?"+n).subscribe(t=>{this.common.loading--,console.log(t.data),t.data&&(e=t.data[0].url,this.common.params={pdfUrl:e,title:"Challan"},console.log("params",this.common.params),this.modalService.open(r.a,{size:"lg",container:"nb-layout"}))},t=>{this.common.loading--,console.log(t)})}}payChallanPayment(t){this.common.params={regNo:t.Regno,vehicleId:t._vehid,chDate:t["Challan Date"],chNo:t.ChallanNo,amount:t.Amount,rowId:t._id,mainBalance:0},this.modalService.open(i.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("false",t.response),t.response&&this.getChallanPaymentRequest()})}clearAllTableData(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}confirmation(t){this.modalService.open(l.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{e.response&&(console.log("data",e),this.uploadImg(t,e.file,e.fileType))})}uploadImg(t,e,n){if(console.log("file",n),"image/jpeg"!=n&&"image/jpg"!=n&&"image/png"!=n&&"application/pdf"!=n&&"application/msword"!=n&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=n&&"application/vnd.ms-excel"!=n&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=n)return this.common.showError("valid Format Are : jpeg,png,jpg,doc,docx,csv,xlsx,pdf"),!1;this.common.showToast("SuccessFull File Selected");let a={challanId:t._id,vehId:t._vehid,status:3,doc1:e};this.common.loading++,this.api.post("Challans/completeChallanPayment",a).subscribe(t=>{this.common.loading--,console.log(t.data),!0===t.success?(this.common.showToast(t.msg),this.getChallanPaymentRequest()):this.common.showError(t.msg)},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["challan-payment-request"]],decls:7,vars:1,consts:[[2,"border","0px","height","100%"],[1,"challan-payment"],[1,"challan_payment"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["id","PaymentRequest",3,"data","settings"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header",1),s["\u0275\u0275elementStart"](2,"h5"),s["\u0275\u0275text"](3,"Challan Payment Request"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body"),s["\u0275\u0275elementStart"](5,"div",2),s["\u0275\u0275template"](6,g,1,2,"smart-table",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",e.challanRequest&&e.challanRequest.length))},directives:[c.s,c.v,c.r,h.u,m.a],styles:['.fa-edit[_ngcontent-%COMP%]{color:#00f}[_nghost-%COMP%]     td i.fa-file-alt{background-color:#04a9f5;color:#fff;border-radius:3px;position:relative;padding:11px 5px 5px;height:29px}[_nghost-%COMP%]     td i.fa-file-alt:hover span{display:block}[_nghost-%COMP%]     td i.fa-file-alt span{position:absolute;display:none;padding:11px 30px;left:-22px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-file-alt span:before{content:"Challan";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-file-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-file-alt:hover span{display:block}[_nghost-%COMP%]    .fa-file-alt.text-color{cursor:not-allowed;opacity:.5}[_nghost-%COMP%]     .fa-edit{color:#17a05d;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 25px;font-weight:400;font-size:11px;left:-7px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#17a05d;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #17a05d;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]     .fa-upload{color:#7491c5;font-size:18px}[_nghost-%COMP%]     .fa-upload span{position:absolute;display:none;padding:10px 25px;font-weight:400;font-size:11px;left:-7px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-upload span:before{content:"Upload Receipt";display:block;position:absolute;top:0;left:0;background-color:#7491c5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-upload span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #7491c5;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-upload:hover span{display:block}']}),t})()},d2mR:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n("hit9"),n("ahTD");var a=n("vTDv"),o=n("GCkA"),i=n("FUS3"),r=n("i+lE"),l=(n("vjOA"),n("bG9B"),n("Zw/Q"),n("pfN2"),n("kSDO"),n("se9s"),n("9zuT"),n("JYbL"),n("6ugN"),n("IarD"),n("axIL"),n("VKYg"),n("svlw"),n("z+eI")),s=(n("eHBT"),n("4zcd"),n("Opnw"),n("mdFJ"),n("baNc"),n("g/MX"),n("suYr"),n("syhs"),n("8Y7J"));let d=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[],imports:[[a.a,o.a,i.a,r.c,r.e,l.ChartModule]]}),t})()},eHBT:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var a=n("OlR4"),o=n("H+bZ"),i=n("tUv6"),r=n("6Jfz"),l=n("Ydk2"),s=n("8Y7J"),d=n("G0yt"),c=n("tKwJ"),h=n("csNM"),m=n("s7LF"),g=n("SVse"),p=n("wD9S");function b(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",11),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("value",t.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function u(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",11),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("value",t.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function f(t,e){if(1&t&&s["\u0275\u0275element"](0,"smart-table",12),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let v=(()=>{class t{constructor(t,e,n,a,o){this.activeModal=t,this.common=e,this.commonService=n,this.api=a,this.modalService=o,this.data=[],this.branch=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-60)),this.range=[{name:"50KM",id:"50"},{name:"100KM",id:"100"},{name:"200KM",id:"200"},{name:"300KM",id:"300"}],this.RangeId=null,this.BranchID=null,this.branchId=null,this.radius=null,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getBranchList(),new Date,console.log("branchId",this.BranchID),console.log("rangeId:",this.RangeId),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getBranchList()}getBranch(){this.branchId=this.BranchID}getRange(){}nearByPods(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};let t={startDate:this.startDate,endDate:this.common.dateFormatter1(this.endDate),branchId:this.BranchID,radius:this.RangeId};console.log("params",t),this.common.loading++,this.api.post("LorryReceiptsOperation/getNearByPods",t).subscribe(t=>{this.common.loading--,this.data=t.data,null==this.data&&(this.data=[],this.table=null);let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Action"==this.headings[t]?{value:"",action:null,icons:[{class:"fa fa-user",action:this.change.bind(this,e)},{class:"fa fa-map-marker",action:this.view.bind(this,e)},{class:"fa fa-picture-o",action:this.LRimage.bind(this,e._img_url2)},{class:"fa fa-image",action:this.getPodImage.bind(this,e._doc_id)}]}:{value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{}).subscribe(t=>{this.common.loading--,this.branch=t.data},t=>{this.common.loading--,this.common.showError()})}change(t){this.common.params={details:t},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.nearByPods()})}view(t){let e={lng:t._long,lat:t._lat};console.log("location:",e),this.common.params={location:e,title:"Location"},this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"})}LRimage(t){this.common.params={images:[{name:"Lr",image:t}],title:"Lr Image"},this.modalService.open(i.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"lrModal"})}getPodImage(t){console.log("val===",t);let e={refid:"",reftype:"",doctype:"",docid:t};console.log("receipts",e),this.common.params={refdata:e,title:"docImage"},this.modalService.open(i.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["nearby-pods"]],decls:33,vars:10,consts:[[1,"row","mb-3"],[1,"col-5"],[1,"row","align-items-center"],[1,"col-2"],[1,"col-4"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isTime","isStart","onChanged"],[1,"form-control",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","add",3,"click"],[3,"data","settings",4,"ngIf"],[3,"value"],[3,"data","settings"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"div",2),s["\u0275\u0275elementStart"](5,"div",3),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7,"Start Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"uj-date-time-picker",5),s["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",3),s["\u0275\u0275elementStart"](11,"label"),s["\u0275\u0275text"](12,"End Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",4),s["\u0275\u0275elementStart"](14,"uj-date-time-picker",6),s["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",1),s["\u0275\u0275elementStart"](16,"div",2),s["\u0275\u0275elementStart"](17,"div",3),s["\u0275\u0275elementStart"](18,"label"),s["\u0275\u0275text"](19,"Branch"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",4),s["\u0275\u0275elementStart"](21,"select",7),s["\u0275\u0275listener"]("change",(function(){return e.getBranch()}))("ngModelChange",(function(t){return e.BranchID=t})),s["\u0275\u0275template"](22,b,2,2,"option",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"div",3),s["\u0275\u0275elementStart"](24,"label"),s["\u0275\u0275text"](25,"Range"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",4),s["\u0275\u0275elementStart"](27,"select",7),s["\u0275\u0275listener"]("change",(function(){return e.getRange()}))("ngModelChange",(function(t){return e.RangeId=t})),s["\u0275\u0275template"](28,u,2,2,"option",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",3),s["\u0275\u0275elementStart"](30,"button",9),s["\u0275\u0275listener"]("click",(function(){return e.nearByPods()})),s["\u0275\u0275text"](31,"submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](32,f,1,2,"smart-table",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",e.BranchID),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.branch),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.RangeId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.range),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[c.s,c.r,h.a,m.D,m.r,m.u,g.t,g.u,m.w,m.G,p.a],styles:['button.add[_ngcontent-%COMP%]{border-radius:3px;text-transform:capitalize;padding:7px 15px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user{color:#20d320}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span{position:absolute;display:none;padding:10px 43px;font-weight:400;font-size:11px;left:-38px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:before{content:"Change State";display:block;position:absolute;top:0;left:0;background-color:#20d320;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #20d320;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker{color:red}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span:before{content:"Loacation";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o{color:#0b5fff}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span:before{content:"Lr Image";display:block;position:absolute;top:0;left:0;background-color:#0b5fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0b5fff;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image{color:#0b5fff}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-18px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span:before{content:"POD";display:block;position:absolute;top:0;left:0;background-color:#0b5fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0b5fff;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image:hover span{display:block}']}),t})()},"g/MX":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n("H+bZ"),o=n("OlR4"),i=n("x7AG"),r=n("8Y7J"),l=n("G0yt"),s=n("tKwJ"),d=n("s7LF"),c=n("SVse"),h=n("wD9S");function m(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let g=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.challanRequest=[],this.gpsRequestType=1,this.getMvGpsDetails(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getMvGpsDetails()}requestTypeChange(){this.clearAllTableData(),this.getMvGpsDetails()}getMvGpsDetails(){this.common.loading++,this.api.get("GpsData/getMvGpsDetails?reqType="+this.gpsRequestType).subscribe(t=>{console.log("Res:",t),this.common.loading--,this.clearAllTableData(),t.data?(this.challanRequest=t.data,this.setTable()):this.common.showError("Data Not Found")},t=>{this.common.loading--,this.common.showError(t)})}setTable(){this.table.data={headings:this.generateHeadings(this.challanRequest[0]),columns:this.getColumns(this.challanRequest,this.challanRequest[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]="Action"==n?{value:"",action:null,icons:[{class:1==t._status?"":"far fa-edit",action:1==t._status?"":this.addGpsWebUrl.bind(this,t)}]}:{value:t[n],class:"black",action:""};n.push(a)}),n}addGpsWebUrl(t){console.log("data",t),this.common.params={gpsData:{rowId:t._id,url:t.Url,supplierName:t["Supplier Name"],supplierId:t._supplierid}},this.modalService.open(i.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getMvGpsDetails()})}clearAllTableData(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["mv-gps-api-req"]],decls:17,vars:2,consts:[[2,"border","0px","height","100%"],[1,"gps-request"],[1,"row"],[1,"col-10"],[1,"col-2"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],[1,"mv-gps-api-req"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["id","PaymentRequest",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"MV GPS API Request"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.gpsRequestType=t}))("change",(function(){return e.requestTypeChange()})),r["\u0275\u0275elementStart"](8,"option",6),r["\u0275\u0275text"](9,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",7),r["\u0275\u0275text"](11,"Non-Approved"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",8),r["\u0275\u0275text"](13,"Approved"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"nb-card-body"),r["\u0275\u0275elementStart"](15,"div",9),r["\u0275\u0275template"](16,m,1,2,"smart-table",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",e.gpsRequestType),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",e.challanRequest&&e.challanRequest.length))},directives:[s.s,s.v,d.D,d.r,d.u,d.w,d.G,s.r,c.u,h.a],styles:[""]}),t})()},hit9:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("yd97"),l=n("F+35"),s=n("Xy1B"),d=n("cSsx"),c=n("nFJE"),h=n("uxEC"),m=n("1+iI"),g=n("8Y7J"),p=n("SVse"),b=n("G0yt"),u=n("tKwJ"),f=n("wD9S");function v(t,e){if(1&t){const t=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",23),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](t),g["\u0275\u0275nextContext"]().addFuel()})),g["\u0275\u0275text"](1,"Add Fuel"),g["\u0275\u0275elementEnd"]()}}function x(t,e){if(1&t){const t=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",24),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](t),g["\u0275\u0275nextContext"]().addCsv()})),g["\u0275\u0275text"](1,"Import CSV"),g["\u0275\u0275elementEnd"]()}}function C(t,e){if(1&t&&g["\u0275\u0275element"](0,"smart-table",25),2&t){const t=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function M(t,e){1&t&&(g["\u0275\u0275elementStart"](0,"div",26),g["\u0275\u0275text"](1," No Data available On That Time Period! "),g["\u0275\u0275elementEnd"]())}let _=(()=>{class t{constructor(t,e,n,a,o,i){let r;this.api=t,this.datePipe=e,this.common=n,this.user=a,this.modalService=o,this.csvService=i,this.fillingData=[],this.headings=[],this.table={data:{headings:{pump:{title:"Pump",placeholder:"Pump"},date:{title:"Date",placeholder:"Date"},regno:{title:"Regno",placeholder:"Regno"},litres:{title:"Litres",placeholder:"Litres"},rate:{title:"Rate",placeholder:"Rate"},amount:{title:"Amount",placeholder:"Amount"},addtime:{title:"Addtime",placeholder:"Addtime"},username:{title:"Username",placeholder:"Username"},refName:{title:"RefName",placeholder:"RefName"}},columns:[]},settings:{hideHeader:!0}},this.sizeIndex=0,this.dates={start:this.common.dateFormatter(new Date),end:this.common.dateFormatter(new Date)},r=new Date,this.dates.end=this.common.dateFormatter(r).split(" ")[0],this.dates.start=this.common.dateFormatter(new Date(r.getFullYear(),r.getMonth(),1)).split(" ")[0],this.getFillingData(),this.common.refresh=this.refresh.bind(this),console.log("Page Type:",a._pages)}ngOnInit(){}refresh(){console.log("Refresh"),this.getFillingData()}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getFillingData(){const t={startTime:this.dates.start,endTime:this.dates.end+" 23:59:59"};this.common.loading++;let e=this.user._details.id;"admin"==this.user._loggedInBy&&(e=this.user._customer.id),this.fillingData=[],this.api.post("FuelDetails/getFuelFillingEntries",t).subscribe(t=>{this.common.loading--,this.fillingData=t.data||[],console.info("filling Data",this.fillingData),console.log(this.table.data.headings),this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}openData(t){this.common.params={rowfilling:t,title:"Edit Fuel Filling"},this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFillingData()})}addFuel(){this.common.params={rowfilling:{fdate:null,litres:null,is_full:null,regno:null,rate:null,amount:null,pp:null,fuel_station_id:null,vehicle_id:null,id:null,ref_type:null,ref_id:null},title:"Add Fuel Filling",sizeIndex:this.sizeIndex},this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFillingData()})}addCsv(){this.modalService.open(l.a,{container:"nb-layout",backdrop:"static"}).result.then(t=>{})}getTableColumns(){let t=[];return this.fillingData.map(e=>{let n={pump:{value:e.pp,class:"blue",action:this.user.permission.edit&&this.openData.bind(this,e)},date:{value:this.datePipe.transform(e.date,"dd MMM yyyy"),class:"blue",action:this.openFuelEntry.bind(this,e)},regno:{value:e.regno},litres:{value:e.litres},rate:{value:e.rate},amount:{value:e.amount},addtime:{value:this.datePipe.transform(e.addtime,"dd MMM yyyy")},username:{value:e.username},refName:{value:e.refnum},rowActions:{}};t.push(n)}),t}getDate(t){this.common.params={ref_page:"fuel-avg"},this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&(this.dates[t]=this.common.dateFormatter(e.date).split(" ")[0],console.log("Date:",this.dates[t]),this.dates.start&&this.dates.end&&this.getFillingData())})}openFuelEntry(t){this.common.params={vid:t.vehicle_id,datetime:this.common.dateFormatter(t.date).split(" ")[0]},this.modalService.open(d.a,{size:"lg",container:"nb-layout"})}getFuelStation(){this.modalService.open(c.a,{size:"lg",container:"nb-layout"}),this.common.handleModalSize("class","modal-lg","1200")}getFuelMapping(){this.common.loading++,this.api.get("Fuel/mappingFillingStationEntries?").subscribe(t=>{this.common.loading--,console.log("Mapping:",t.data)},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError()})}getisFuel(){this.common.loading++,this.api.get("Fuel/mappingIsFullFilling?").subscribe(t=>{this.common.loading--,console.log("Mapping:",t.data)},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError()})}getemptyFueldetails(){this.modalService.open(h.a,{size:"sm",container:"nb-layout",backdrop:"static"})}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Fuel Filling",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n=[{customer:"Customer : "+e.data.name},{report:"Report : Fuel Filling"},{period:"Report Date :"+this.dates.start+" to "+this.dates.end},{date:"Generated On :"+this.common.dateFormatter(new Date)}];this.csvService.byMultiIds([t],"Dashboard",n)},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(g["\u0275\u0275directiveInject"](a.a),g["\u0275\u0275directiveInject"](p.f),g["\u0275\u0275directiveInject"](o.a),g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](b.r),g["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=g["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-fillings"]],decls:35,vars:12,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-6"],[1,"col-md-6","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[2,"padding-top","0px"],[1,"col-12"],[1,"fuel_filling_button"],["id","add-fuel","name","add-fuel","class","btn btn-primary",3,"click",4,"ngIf"],["id","import-csv","name","import-csv","class","btn btn-primary",3,"click",4,"ngIf"],["id","fuel-station","name","fuel-station",1,"btn","btn-primary",3,"click"],["id","fuel-mapping","name","fuel-mapping",1,"btn","btn-primary",3,"click"],["id","fuel-isFuel","name","fuel-isFuel",1,"btn","btn-primary",3,"click"],["id","empty-fuel-details","name","empty-fuel-details",1,"btn","btn-primary",3,"click"],[1,"row","mb-2"],[1,"col-sm-2"],["type","text","autocomplete","off","placeholder","Select Start Date","name","start-date",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","Select End Date","name","end-date",1,"form-control",2,"cursor","pointer",3,"value","click"],["id","tblfillings",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","add-fuel","name","add-fuel",1,"btn","btn-primary",3,"click"],["id","import-csv","name","import-csv",1,"btn","btn-primary",3,"click"],["id","tblfillings",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h4"),g["\u0275\u0275text"](5,"Fuel Fillings"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"span"),g["\u0275\u0275elementStart"](8,"span",4),g["\u0275\u0275listener"]("click",(function(){return e.printPDF("tblfillings")})),g["\u0275\u0275element"](9,"i",5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"span",6),g["\u0275\u0275listener"]("click",(function(){return e.printCsv("tblfillings")})),g["\u0275\u0275element"](11,"i",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"nb-card-body",8),g["\u0275\u0275elementStart"](13,"div",1),g["\u0275\u0275elementStart"](14,"div",9),g["\u0275\u0275elementStart"](15,"div",10),g["\u0275\u0275template"](16,v,2,0,"button",11),g["\u0275\u0275template"](17,x,2,0,"button",12),g["\u0275\u0275elementStart"](18,"button",13),g["\u0275\u0275listener"]("click",(function(){return e.getFuelStation()})),g["\u0275\u0275text"](19,"Fuel Station"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"button",14),g["\u0275\u0275listener"]("click",(function(){return e.getFuelMapping()})),g["\u0275\u0275text"](21,"Fuel Station Entries Mapping"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"button",15),g["\u0275\u0275listener"]("click",(function(){return e.getisFuel()})),g["\u0275\u0275text"](23,"is FullMapping"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"button",16),g["\u0275\u0275listener"]("click",(function(){return e.getemptyFueldetails()})),g["\u0275\u0275text"](25,"Tank Empty Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"div",17),g["\u0275\u0275elementStart"](27,"div",18),g["\u0275\u0275elementStart"](28,"input",19),g["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),g["\u0275\u0275pipe"](29,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",18),g["\u0275\u0275elementStart"](31,"input",20),g["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),g["\u0275\u0275pipe"](32,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](33,C,1,2,"smart-table",21),g["\u0275\u0275template"](34,M,2,0,"div",22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&t&&(g["\u0275\u0275advance"](16),g["\u0275\u0275property"]("ngIf",e.user.permission.add),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf","admin"==e.user._loggedInBy),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](29,6,e.dates.start,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](32,9,e.dates.end,"dd MMM yyyy")),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.fillingData&&e.fillingData.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==e.fillingData.length))},directives:[u.s,u.v,u.r,p.u,f.a],pipes:[p.f],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 272px)!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.fuel_filling_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;text-transform:capitalize;font-size:14px;margin-left:0;margin-top:0;margin-bottom:10px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},kSDO:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var a=n("OlR4"),o=n("H+bZ"),i=n("Ig2y"),r=n("qfBg"),l=n("7xJQ"),s=n("8Y7J"),d=n("G0yt"),c=n("SVse"),h=n("tKwJ"),m=n("csNM"),g=n("z+eI"),p=n("s7LF"),b=n("wD9S");function u(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("value",t),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](t)}}function f(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",11),s["\u0275\u0275elementStart"](1,"select",20),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().selectedModal=e}))("change",(function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().mapChartDataAccordingModal()})),s["\u0275\u0275template"](2,u,2,2,"option",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",t.selectedModal),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.modals)}}function v(t,e){if(1&t&&s["\u0275\u0275element"](0,"smart-table",23),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function x(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",24),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let C=(()=>{class t{constructor(t,e,n,a,o,i,r){this.common=t,this.api=e,this.modalService=n,this.activeModal=a,this.dateService=o,this.user=i,this.datePipe=r,this.startTime=null,this.endTime=null,this.consolFuelAvg=[],this.showTable=!1,this.headings=[],this.probableIssue=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.selectedModal=null,this.modals=[],this.chartObject={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:""},this.chartdata=[],this.modalsData=[];let l=new Date;this.endTime=new Date(l),new Date(l.getFullYear(),l.getMonth(),0).getDate(),this.startTime=new Date(l.getFullYear(),l.getMonth(),1),this.getConsolidateFuelAvg(),this.getChartData(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getConsolidateFuelAvg()}getConsolidateFuelAvg(){if(this.startTime>this.endTime)return void this.common.showToast("start date should be less than end date");this.consolFuelAvg=[],this.headings=[];let t={start_time:this.common.dateFormatter(this.startTime),end_time:this.common.dateFormatter(this.endTime)};this.common.loading++,this.api.post("FuelDetails/getFuelAvgWrtFo",t).subscribe(t=>{this.common.loading--,console.log("res",t.data),this.consolFuelAvg=t.data||[],0!=this.consolFuelAvg.length&&null!=t.data||(this.consolFuelAvg=[],this.common.showToast("Record Not Found !!"),this.resetDisplayTable());let e=this.consolFuelAvg[0];for(var n in console.log("first_Rec",e),this.table.data.headings={},e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}resetDisplayTable(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(let e=0;e<this.consolFuelAvg.length;e++){let n=this.consolFuelAvg[e]._is_probable_issue,a={};for(let t=0;t<this.headings.length;t++)a[this.headings[t]]={value:this.consolFuelAvg[e][this.headings[t]],class:n?"lightcoral":"black",action:this.vehicleFuelHistory.bind(this,this.consolFuelAvg[e])};t.push(a)}return t}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n=e.data.name,a="Start Date:"+this.datePipe.transform(this.startTime,"dd-MM-yyyy h:mm:ss a")+"  End Date:"+this.datePipe.transform(this.endTime,"dd-MM-yyyy h:mm:ss a");this.common.getPDFFromTableId(t,n,"Trip Profit And Loss",["Action"],a)},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n="FoName:"+e.data.name,a="Start Date:"+this.datePipe.transform(this.startTime,"dd-MM-yyyy h:mm:ss a")+"  End Date:"+this.datePipe.transform(this.endTime,"dd-MM-yyyy h:mm:ss a");this.common.getCSVFromTableId(t,n,"Report:Trip Profit And Loss",null,a)},t=>{this.common.loading--,console.log(t)})}vehicleFuelHistory(t){console.log("row",t);let e={view:{api:"Fuel/getFuelAvgLogsWrtVeh",param:{vehicleId:t._vehicle_id,startTime:t.start_time,endTime:t.end_time}},delete:{},title:"Fuel Average Logs History"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:e},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getChartData(t){if(this.startTime>this.endTime)return void this.common.showToast("start date should be less than end date");this.chartdata=[];let e="startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Fuel/getVehicleAvgAge?"+e).subscribe(t=>{this.common.loading--,console.log("getChartData",t.data),t.data&&(this.modals=t.data&&t.data.keys?t.data.keys:[],this.modalsData=t.data&&t.data.graphData?t.data.graphData:[],this.modals.sort(),this.modals.reverse(),this.selectedModal=this.selectedModal?this.selectedModal:this.modals[0],this.mapChartDataAccordingModal())},t=>{this.common.loading--,this.common.showError()})}mapChartDataAccordingModal(){if(console.log("mapChartDataAccordingModal",this.modals.length),this.modals.length>0){let t=this.modalsData[this.selectedModal].ages;console.log("labelsData",t),this.showChart(t,this.modalsData[this.selectedModal].min_avgs,this.modalsData[this.selectedModal].max_avgs,this.modalsData[this.selectedModal].act_avgs)}}showChart(t,e,n,a){this.chartObject.type="line",this.chartObject.data={labels:t,datasets:[{label:"min",lineTension:0,borderColor:"red",borderWidth:0,data:e,fill:!1},{label:"avg",lineTension:0,borderColor:"blue",borderWidth:0,data:a,fill:!1},{label:"max",lineTension:0,borderColor:"green",borderWidth:0,data:n,fill:!1,line:!1}]},this.chartObject.options={tooltips:{mode:"index",intersect:!1,displayColors:!1},title:{display:!0,text:"Fuel Mileage",fontSize:14,fontColor:"blue"},responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Fuel Mileage"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Vehicle Age (Years)"}}]}}}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](c.f))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["consolidate-fuel-average"]],decls:29,vars:11,consts:[[1,"row"],[1,"col-10"],[1,"col-2"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-3"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isStart","isTime","onChanged"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-2"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"row",2,"margin-top","15px"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],[2,"margin-top","15px"],["id","consolidateFuel",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","consolidateFuel",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Consolidate Fuel Average"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"span"),s["\u0275\u0275elementStart"](8,"span",3),s["\u0275\u0275listener"]("click",(function(){return e.printPDF("consolidateFuel")})),s["\u0275\u0275element"](9,"i",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"span",5),s["\u0275\u0275listener"]("click",(function(){return e.printCsv("consolidateFuel")})),s["\u0275\u0275element"](11,"i",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"nb-card-body"),s["\u0275\u0275elementStart"](13,"div",0),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"uj-date-time-picker",8),s["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",7),s["\u0275\u0275elementStart"](17,"uj-date-time-picker",9),s["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](18,f,3,2,"div",10),s["\u0275\u0275elementStart"](19,"div",11),s["\u0275\u0275elementStart"](20,"button",12),s["\u0275\u0275listener"]("click",(function(){return e.getConsolidateFuelAvg(),e.getChartData()})),s["\u0275\u0275text"](21,"submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](22,"div",13),s["\u0275\u0275elementStart"](23,"div",14),s["\u0275\u0275elementStart"](24,"div",15),s["\u0275\u0275element"](25,"chart",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",17),s["\u0275\u0275template"](27,v,1,2,"smart-table",18),s["\u0275\u0275template"](28,x,2,0,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](15),s["\u0275\u0275property"]("dateTimeValue",e.startTime)("isTime",!0),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("dateTimeValue",e.endTime)("isStart",!1)("isTime",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modals.length>0),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("type",e.chartObject.type)("data",e.chartObject.data)("options",e.chartObject.options),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.consolFuelAvg.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==e.consolFuelAvg.length))},directives:[h.s,h.v,h.r,m.a,c.u,g.ChartComponent,p.D,p.r,p.u,c.t,p.w,p.G,b.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .lightcoral{color:#721c24!important;background:#f08080!important}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})()},mdFJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("H+bZ"),o=n("OlR4"),i=n("qfBg"),r=n("U79Z"),l=n("ia/1"),s=n("8Y7J"),d=n("G0yt"),c=n("tKwJ"),h=n("SVse"),m=n("wD9S");function g(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275text"](1," No Data Available On That Time Period ! "),s["\u0275\u0275elementEnd"]())}function p(t,e){if(1&t&&s["\u0275\u0275element"](0,"smart-table",8),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let b=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.fuelData=[],this.fuelAvg=[],this.vehicleId=null,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.getFuelAvg()}ngOnInit(){}refresh(){this.getFuelAvg()}addFuelAvg(){this.common.params={row:null,load:null,unload:null,vehicle:null},this.modalService.open(r.a,{container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getFuelAvg()})}getFuelAvg(){this.fuelAvg=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.loading++,this.api.get("Fuel/getModelWiseFuelAvgWrtFo").subscribe(t=>{this.common.loading--,this.fuelAvg=[],this.fuelAvg=t.data||[],console.log("result",t),console.log("idd",this.fuelAvg[0]._id);let e=this.fuelAvg[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()})}getTableColumns(){let t=[];return console.log("Data=",this.fuelAvg),this.fuelAvg.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),"Action"==this.headings[t]?this.valobj.Action={value:"",action:null,icons:[{class:"far fa-edit",action:this.updateFuel.bind(this,e._id,e.LoadMileage,e.UnloadMileage,e._vm_id,e.VehicleModel,e.Brand)},{class:"fas fa-trash-alt",action:this.deleteFuel.bind(this,e._id)}]}:this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}updateFuel(t,e,n,a,o,i){this.common.params={row:t,load:e,unLoad:n,vehicle:a,name:o,brand:i},this.modalService.open(r.a,{container:"nb-layout"}).result.then(t=>{this.getFuelAvg()})}deleteFuel(t){console.log("id",t);const e={rowId:t};console.log("id2",e),t&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are you Sure You Want  To Delete This Record?<b>"},this.modalService.open(l.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,console.log("par",e),this.api.post("Fuel/deleteModelWiseFuelAvgWrtFo",e).subscribe(t=>{console.log("Api Response:",t),this.common.showToast(t.msg),this.getFuelAvg(),this.common.loading--},t=>console.error(" Api Error:",t)))}))}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["fo-fuel-average"]],decls:13,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",2,"border-radius","3px",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5," FO Model Fuel Mileage"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return e.addFuelAvg()})),s["\u0275\u0275text"](8,"Add Model Fuel Mileage"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"nb-card-body"),s["\u0275\u0275template"](10,g,2,0,"div",5),s["\u0275\u0275elementStart"](11,"div"),s["\u0275\u0275template"](12,p,1,2,"smart-table",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngIf",0==e.fuelAvg.length),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.fuelAvg.length>0))},directives:[c.s,c.v,c.r,h.u,m.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .fa-edit{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .fa-trash-alt{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),t})()},se9s:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("OlR4"),o=n("H+bZ"),i=n("Ig2y"),r=n("Xy1B"),l=n("8Y7J"),s=n("G0yt"),d=n("tKwJ"),c=n("SVse"),h=n("wD9S");function m(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275text"](1," Select StartDate & EndDate And Click Submit ! "),l["\u0275\u0275elementEnd"]())}function g(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275text"](1," No Data Available ! "),l["\u0275\u0275elementEnd"]())}function p(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",11),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let b=(()=>{class t{constructor(t,e,n,a){this.common=t,this.api=e,this.modalService=n,this.dateService=a,this.startDate=null,this.endDate=null,this.driverPerformance=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.click=!1;let o=new Date,i=new Date;this.endDate=o,this.endDate=this.common.dateFormatter(o),i=new Date(o.setDate(o.getDate()-7)),this.startDate=this.common.dateFormatter(i),console.log("Start Date:",this.startDate),console.log("end Date:",this.endDate)}ngOnInit(){}getDate(t){this.common.params={ref_page:"driver-performance"},this.modalService.open(r.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.dateService.dateFormatter(e.date,"",!1).split(" ")[0]):(this.endDate=this.dateService.dateFormatter(e.date,"",!1).split(" ")[0],console.log("endDate",this.endDate)))})}getDriverPerformance(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.driverPerformance=[],this.headings=[],this.valobj={};const t=this.common.dateFormatter1(this.startDate).split(" ")[0],e=this.common.dateFormatter1(this.endDate.split(" ")[0]);this.click=!0;const n="startDate="+t+"&endDate="+e;this.common.loading++,this.api.get("Drivers/driverPerformance?"+n).subscribe(t=>{if(this.common.loading--,console.log("res: ",t.data),null==t.data)return this.driverPerformance=[],void(this.table=null);this.driverPerformance=t.data,console.log("tripstagesData",this.driverPerformance);let e=this.driverPerformance[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.driverPerformance.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.driverPerformance[e][this.headings[t]]};t.push(this.valobj)}return t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](s.r),l["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["driver-performance"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","w-100","m-0",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Driver Performance (Lite)"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275elementStart"](7,"div",1),l["\u0275\u0275elementStart"](8,"div",4),l["\u0275\u0275elementStart"](9,"input",5),l["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),l["\u0275\u0275pipe"](10,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",4),l["\u0275\u0275elementStart"](12,"input",6),l["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),l["\u0275\u0275pipe"](13,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",4),l["\u0275\u0275elementStart"](15,"button",7),l["\u0275\u0275listener"]("click",(function(){return e.getDriverPerformance()})),l["\u0275\u0275text"](16,"submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"nb-card-body"),l["\u0275\u0275template"](18,m,2,0,"div",8),l["\u0275\u0275template"](19,g,2,0,"div",8),l["\u0275\u0275elementStart"](20,"div"),l["\u0275\u0275template"](21,p,1,2,"smart-table",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("value",l["\u0275\u0275pipeBind2"](10,5,e.startDate,"dd MMM yyyy")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("value",l["\u0275\u0275pipeBind2"](13,8,e.endDate,"dd MMM yyyy")),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",!e.click),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.driverPerformance.length&&e.click),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.driverPerformance.length))},directives:[d.s,d.v,d.r,c.u,h.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 170px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},suYr:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("H+bZ"),o=n("OlR4"),i=n("r+Tg"),r=n("3a3o"),l=n("UiTq"),s=n("0BXs"),d=n("qfBg"),c=n("8Y7J"),h=n("G0yt"),m=n("tKwJ"),g=n("SVse");function p(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275elementStart"](18,"button",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](t);const n=e.$implicit;return c["\u0275\u0275nextContext"]().enterTicket(n)})),c["\u0275\u0275text"](19," Take Action "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.fo_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.regno),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.vehicle_id),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.prim_status),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.sec_status),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.suggest),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.alert_time),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.hold_by)}}function b(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"div",22),c["\u0275\u0275text"](1," No Data available ! "),c["\u0275\u0275elementEnd"]())}let u=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.user=a,this.viewType="all",this.dis="old",this.VehicleStatusAlerts=[],this.status={1:"Accept",0:"Pending","-1":"Advance Review"},this.getVehicleStatusAlerts(this.viewType),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getVehicleStatusAlerts(this.viewType)}getVehicleStatusAlerts(t){this.viewType=t;let e="viewType="+this.viewType;console.log("params ",e),this.api.get("HaltOperations/getVehicleStatusAlerts?"+e).subscribe(t=>{console.log("Res: ",t.data),this.VehicleStatusAlerts=t.data},t=>{console.error(t),this.common.showError()})}getPendingStatusDetails(){this.common.loading++,this.api.get("HaltOperations/getPendingAlertDetails?").subscribe(t=>{this.common.loading--,console.log(t);let e=[];t.data.map((t,n)=>{e.push([n,t.alertname,t.cnt,t.actct,t.wuct,this.common.changeDateformat(t.time)])}),console.log(e),this.common.params={title:"Pending Alert Details:",headings:["#","Activity Name","Count","Since Updated (In Minutes)","Working User (In Last 10 Minutes)","Clear Tickets (In Last 10 Minutes)"],data:e},this.modalService.open(i.a,{size:"lg",container:"nb-layout"})},t=>{this.common.loading--,console.log(t)})}openChangeStatusModal(t){console.log("VehicleStatusData",t),this.common.params=t,this.common.ref_page="vsc",this.modalService.open(r.a,{size:"lg",container:"nb-layout"}).result.then(e=>{this.exitTicket(t)})}openChangeStatusCustomerModal(t){console.log("VehicleStatusData",t),this.common.params=t,this.common.ref_page="vsc",this.modalService.open(s.a,{size:"lg",container:"nb-layout"}).result.then(e=>{this.exitTicket(t)})}enterTicket(t){let e,n={tblRefId:1,tblRowId:t.vehicle_id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",n).subscribe(n=>{if(this.common.loading--,e=n,console.log(e),!e.success)return!1;"admin"==this.user._loggedInBy?this.openChangeStatusModal(t):this.openChangeStatusCustomerModal(t)},t=>{this.common.loading--,console.log(t)})}exitTicket(t){let e;var n={tblRefId:1,tblRowId:t.vehicle_id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",n).subscribe(t=>(this.common.loading--,e=t,console.log(e),!!e.sucess||(this.getVehicleStatusAlerts(this.viewType),!1)),t=>{this.common.loading--,console.log(t)})}openAnalyticsModal(){this.common.params={title:"Analytics"},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](h.r),c["\u0275\u0275directiveInject"](d.a))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-status-change"]],decls:51,vars:8,consts:[[1,"row"],[1,"col-10"],[1,"col-2"],[1,"anlytics_btn",3,"click"],["height","50px","width","50px","src","assets/images/analytics.png"],[2,"padding","10px 15px"],[1,"vehicle_status_tabs","clearfix","mb-3"],[1,"tabset"],[3,"ngClass"],["type","button","id","viewall","value","View All",3,"click"],["type","button","id","viewnew","value","View New",3,"click"],["type","button","id","viewold","value","View old",3,"click"],["type","button","id","refresh","value","Refresh",3,"click"],["type","button","id","advancereview","value","Advance Review",3,"click"],["type","button","id","statusPending","value","Pending Alerts",3,"click"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],[3,"click"],[1,"no-data"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Vehicle Status Changes"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",2),c["\u0275\u0275elementStart"](7,"span",3),c["\u0275\u0275listener"]("click",(function(){return e.openAnalyticsModal()})),c["\u0275\u0275element"](8,"img",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"nb-card-body",5),c["\u0275\u0275elementStart"](10,"div",6),c["\u0275\u0275elementStart"](11,"ul",7),c["\u0275\u0275elementStart"](12,"li",8),c["\u0275\u0275elementStart"](13,"input",9),c["\u0275\u0275listener"]("click",(function(){return e.getVehicleStatusAlerts("all"),e.dis="all"})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"li",8),c["\u0275\u0275elementStart"](15,"input",10),c["\u0275\u0275listener"]("click",(function(){return e.getVehicleStatusAlerts("view new"),e.dis="new"})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"li",8),c["\u0275\u0275elementStart"](17,"input",11),c["\u0275\u0275listener"]("click",(function(){return e.getVehicleStatusAlerts("view old"),e.dis="old"})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"li",8),c["\u0275\u0275elementStart"](19,"input",12),c["\u0275\u0275listener"]("click",(function(){return e.getVehicleStatusAlerts("pending"),e.dis="refresh"})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"li",8),c["\u0275\u0275elementStart"](21,"input",13),c["\u0275\u0275listener"]("click",(function(){return e.getVehicleStatusAlerts("advance review"),e.dis="adrw"})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"input",14),c["\u0275\u0275listener"]("click",(function(){return e.getPendingStatusDetails()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",15),c["\u0275\u0275elementStart"](24,"table",16),c["\u0275\u0275elementStart"](25,"thead",17),c["\u0275\u0275elementStart"](26,"tr"),c["\u0275\u0275elementStart"](27,"th"),c["\u0275\u0275text"](28,"Fo Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"th"),c["\u0275\u0275text"](30,"Vehicle RegNo"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"th"),c["\u0275\u0275text"](32,"Vehicle Id"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"th"),c["\u0275\u0275text"](34,"Primary Status"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"th"),c["\u0275\u0275text"](36,"Secondry Status"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"th"),c["\u0275\u0275text"](38,"Suggestion"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"th"),c["\u0275\u0275text"](40,"Alert Time"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"Hold User"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"th"),c["\u0275\u0275text"](44,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"tbody"),c["\u0275\u0275template"](46,p,20,8,"tr",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](47,b,2,0,"div",19),c["\u0275\u0275elementStart"](48,"div",20),c["\u0275\u0275elementStart"](49,"b"),c["\u0275\u0275text"](50),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](12),c["\u0275\u0275property"]("ngClass","all"==e.dis?"tab active":"tab"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass","new"==e.dis?"tab active":"tab"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass","old"==e.dis?"tab active":"tab"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass","refresh"==e.dis?"tab active":"tab"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngClass","adrw"==e.dis?"tab active":"tab"),c["\u0275\u0275advance"](26),c["\u0275\u0275property"]("ngForOf",e.VehicleStatusAlerts),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.VehicleStatusAlerts.length),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",e.VehicleStatusAlerts.length,""))},directives:[m.s,m.v,m.r,g.r,g.t,g.u],styles:['.remove[_ngcontent-%COMP%]{font-size:20px;color:red}.tableFixHead[_ngcontent-%COMP%]{overflow-y:auto;height:calc(100vh - 225px)}.tableFixHead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background:#37474f}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.anlytics_btn[_ngcontent-%COMP%]{display:block;text-align:right;position:relative}.anlytics_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;height:auto;position:absolute;right:10px;top:-9px}.tabset[_ngcontent-%COMP%]{padding:0;margin:0!important;list-style:none;float:left;width:85%}.tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:-1px;text-align:center;position:relative;display:inline-block}.tabset[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:transparent}.tabset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#26a69a;color:#fff!important;font-weight:400!important;border-radius:5px 5px 0 0;margin-right:8px;border:2px solid #26a69a;padding:5px 20px!important;position:relative;font-size:14px}.tabset[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a!important}.tabset[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:after{content:""!important;position:absolute;background:#fff;width:88%;height:6px;bottom:-2px;left:2px;border-radius:0}#statusPending[_ngcontent-%COMP%]{float:right;background-color:#04a9f5;border:0;color:#fff;font-weight:700;padding:8px 18px;border-radius:5px;font-size:16px;outline:none}#statusPending[_ngcontent-%COMP%]:hover{background-color:#0898db}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#06d79c;border:1px solid #06d79c;-webkit-box-shadow:0 2px 2px 0 rgba(40,190,189,.14),0 3px 1px -2px rgba(40,190,189,.2),0 1px 5px 0 rgba(40,190,189,.12);box-shadow:0 2px 2px 0 rgba(40,190,189,.14),0 3px 1px -2px rgba(40,190,189,.2),0 1px 5px 0 rgba(40,190,189,.12);color:#fff;border-radius:5px;padding:5px 10px;outline:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#06d79c;-webkit-box-shadow:0 14px 26px -12px rgba(40,190,189,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(40,190,189,.2);box-shadow:0 14px 26px -12px rgba(40,190,189,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(40,190,189,.2);border:1px solid #06d79c}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})()},svlw:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("OlR4"),o=n("H+bZ"),i=n("tUv6"),r=n("kw6w"),l=n("8Y7J"),s=n("G0yt"),d=n("tKwJ"),c=n("SVse"),h=n("z+eI"),m=n("wD9S");function g(t,e){if(1&t&&l["\u0275\u0275element"](0,"chart",10),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.data)("options",t.chart.options)}}function p(t,e){if(1&t){const t=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",5),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](t);const n=e.$implicit;return l["\u0275\u0275nextContext"]().filterPODs(n)})),l["\u0275\u0275elementStart"](1,"td",6),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n+1),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](t["State Name"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](t.count)}}function b(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",11),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let u=(()=>{class t{constructor(t,e,n){this.common=t,this.api=e,this.modalService=n,this.chart={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:"",startAngle:"",backgroundColor:[],legend:{}},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.allPendingPODs=[],this.pendingPODs=[],this.states=[],this.chartData={labels:[],data:[]},this.getPendingPods(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getPendingPods()}getPendingPods(){this.common.loading++,this.api.get("LorryReceiptsOperation/getPendingPods").subscribe(t=>{this.common.loading--,console.info("Res:",t),this.allPendingPODs=t.data.result,this.pendingPODs=t.data.result,this.states=t.data.summary,this.handleChart(),this.generateTable()},t=>{this.common.loading--,this.common.showError()})}handleChart(){this.chart.type="pie",this.chart.data={labels:this.states.map(t=>t["State Name"]),datasets:[{label:"Zones",data:this.states.map(t=>t.count),backgroundColor:["#0074D9","#FF4136","#2ECC40","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111"]}]},this.chart.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!1}},console.log("This:",this.chart)}generateTable(){this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}getHeadings(){let t={};for(var e in this.allPendingPODs[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)},"LR Date"===e&&(t[e].type="date"));return t.Action={title:"Action",hideSearch:!0},t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return this.pendingPODs.map(e=>{console.log("pendingpod",e);let n={};for(let t in this.getHeadings())n[t]="Action"==t?{value:"",action:null,icons:[{class:"fa fa-user",action:this.changeState.bind(this,e)},{class:"fa fa-tasks",action:this.getPodImage.bind(this,e._doc_id)},{class:"fa fa-picture-o",action:this.viewLRImages.bind(this,e._img_url2)}]}:{value:e[t],class:"black",action:""};t.push(n)}),console.log("Columns:",t),t}changeState(t){console.log("pendingPOD",t),this.common.params={details:t},this.modalService.open(r.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getPendingPods()})}getPodImage(t){console.log("val===",t);let e={refid:"",reftype:"",doctype:"",docid:t};console.log("receipts",e),this.common.params={refdata:e,title:"docImage"},this.modalService.open(i.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}viewLRImages(t){this.common.params={images:[{name:"Lr",image:t}],title:"Lr Image"},this.modalService.open(i.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"lrModal"})}filterPODs(t){this.pendingPODs="all"===t?this.allPendingPODs:this.allPendingPODs.filter(e=>e._state_id==t._state_id),this.generateTable()}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](s.r))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["pod-dashboard"]],decls:24,vars:4,consts:[[1,"row"],[1,"col-3"],["style","margin-right:5px;min-height: 200px;",3,"type","data","options",4,"ngIf"],[1,"chart-table","table","table-bordered","table-hover","table-scroll"],[1,"thead"],[3,"click"],["scope","row"],[3,"click",4,"ngFor","ngForOf"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],[3,"data","settings"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-body"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275template"](4,g,1,3,"chart",2),l["\u0275\u0275elementStart"](5,"table",3),l["\u0275\u0275elementStart"](6,"thead",4),l["\u0275\u0275elementStart"](7,"tr"),l["\u0275\u0275elementStart"](8,"th"),l["\u0275\u0275text"](9,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"th"),l["\u0275\u0275text"](11,"StateName"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"th"),l["\u0275\u0275text"](13,"StateCount"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"tbody"),l["\u0275\u0275elementStart"](15,"tr",5),l["\u0275\u0275listener"]("click",(function(){return e.filterPODs("all")})),l["\u0275\u0275element"](16,"td",6),l["\u0275\u0275elementStart"](17,"td"),l["\u0275\u0275text"](18,"All"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"td"),l["\u0275\u0275text"](20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](21,p,7,3,"tr",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"div",8),l["\u0275\u0275template"](23,b,1,2,"smart-table",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",e.chart.type),l["\u0275\u0275advance"](16),l["\u0275\u0275textInterpolate"](e.allPendingPODs.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",e.states),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.pendingPODs.length))},directives:[d.s,d.r,c.u,c.t,h.ChartComponent,m.a],styles:['[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div div+div{margin-left:10px}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span{position:absolute;display:none;padding:10px 40px;font-size:12px;font-weight:400;left:-33px;top:-24px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span:before{content:"Pod Images";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user{color:#5cd050}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span{position:absolute;display:none;padding:10px 40px;font-size:11px;font-weight:400;left:-33px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span:before{content:"State Change";display:block;position:absolute;top:0;left:0;background-color:#5cd050;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o{color:#6c0fff}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span{position:absolute;display:none;padding:10px 33px;font-size:11px;font-weight:400;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span:before{content:"LR Image";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.chart-table[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4500;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#0074d9;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4136;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#2ecc40;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#39cccc;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#01ff70;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#85144b;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#f012be;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#3d9970;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#111;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{color:#00f}']}),t})()},syhs:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var a=n("8Y7J"),o=n("tKwJ"),i=n("SVse");function r(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-challan")}function l(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-trip")}function s(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-traffic")}function d(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-calls")}function c(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-alerts")}function h(t,e){1&t&&a["\u0275\u0275element"](0,"tmg-documents")}let m=(()=>{class t{constructor(){this.seletionsArray=["Tmg-Challan","Tmg-Trip","Tmg-Traffic","Tmg-Calls","Tmg-Alerts","Tmg-Documents"],this.selectedDashboard="Tmg-Challan"}ngOnInit(){}getIndex(){for(let t=0;t<=this.seletionsArray.length;t++)if(this.seletionsArray[t]==this.selectedDashboard)return t}forwardMove(){let t=this.getIndex();this.selectedDashboard=t==this.seletionsArray.length-1?this.seletionsArray[0]:this.seletionsArray[t+1]}backwardMove(){let t=this.getIndex();this.selectedDashboard=0==t?this.seletionsArray[this.seletionsArray.length-1]:this.seletionsArray[t-1]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg"]],decls:39,vars:18,consts:[[2,"border","0px"],[1,"row","toptab"],[1,"col-1",2,"-webkit-writing-mode","vertical-lr"],[1,"dirbtn"],[1,"fa","fa-backward",3,"click"],[1,"col-1-5","hiddenby"],[3,"click"],[1,"col-1",2,"-webkit-writing-mode","vertical-rl"],[1,"fa","fa-forward",3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card",0),a["\u0275\u0275elementStart"](1,"nb-card-body"),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275elementStart"](5,"i",4),a["\u0275\u0275listener"]("click",(function(){return e.backwardMove()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Challan"})),a["\u0275\u0275elementStart"](8,"b"),a["\u0275\u0275text"](9,"Challan DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",5),a["\u0275\u0275elementStart"](11,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Trip"})),a["\u0275\u0275elementStart"](12,"b"),a["\u0275\u0275text"](13,"Trip DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275elementStart"](15,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Traffic"})),a["\u0275\u0275elementStart"](16,"b"),a["\u0275\u0275text"](17,"Traffic DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",5),a["\u0275\u0275elementStart"](19,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Calls"})),a["\u0275\u0275elementStart"](20,"b"),a["\u0275\u0275text"](21,"Calls DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",5),a["\u0275\u0275elementStart"](23,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Alerts"})),a["\u0275\u0275elementStart"](24,"b"),a["\u0275\u0275text"](25,"ALerts DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",5),a["\u0275\u0275elementStart"](27,"p",6),a["\u0275\u0275listener"]("click",(function(){return e.selectedDashboard="Tmg-Documents"})),a["\u0275\u0275elementStart"](28,"b"),a["\u0275\u0275text"](29,"Document DashBoard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"div",7),a["\u0275\u0275elementStart"](31,"span",3),a["\u0275\u0275elementStart"](32,"i",8),a["\u0275\u0275listener"]("click",(function(){return e.forwardMove()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](33,r,1,0,"tmg-challan",9),a["\u0275\u0275template"](34,l,1,0,"tmg-trip",9),a["\u0275\u0275template"](35,s,1,0,"tmg-traffic",9),a["\u0275\u0275template"](36,d,1,0,"tmg-calls",9),a["\u0275\u0275template"](37,c,1,0,"tmg-alerts",9),a["\u0275\u0275template"](38,h,1,0,"tmg-documents",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](7),a["\u0275\u0275classMap"]("Tmg-Challan"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](4),a["\u0275\u0275classMap"]("Tmg-Trip"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](4),a["\u0275\u0275classMap"]("Tmg-Traffic"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](4),a["\u0275\u0275classMap"]("Tmg-Calls"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](4),a["\u0275\u0275classMap"]("Tmg-Alerts"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](4),a["\u0275\u0275classMap"]("Tmg-Documents"==e.selectedDashboard?"active":"default"),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf","Tmg-Challan"==e.selectedDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Tmg-Trip"==e.selectedDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Tmg-Traffic"==e.selectedDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Tmg-Calls"==e.selectedDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Tmg-Alerts"==e.selectedDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","Tmg-Documents"==e.selectedDashboard))},directives:[o.s,o.r,i.u],styles:[".default[_ngcontent-%COMP%]{color:#000;border-radius:.17rem;font-size:.85rem;text-align:center;padding:5px;background-color:#c9c2de;cursor:pointer;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);margin-bottom:0}.default[_ngcontent-%COMP%]:hover{border-radius:.17rem;font-size:.85rem;text-align:center;padding:5px;background-color:#4215ca;color:#fff;cursor:pointer;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);margin-bottom:0}.active[_ngcontent-%COMP%]{margin-bottom:0;font-size:.85rem;text-align:center;padding:5px;background-color:#4215ca;border-bottom:1px solid #fff}.active[_ngcontent-%COMP%], .dirbtn[_ngcontent-%COMP%]{border-radius:.17rem;color:#fff;cursor:pointer;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2)}.dirbtn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#3f6ad8}.dirbtn[_ngcontent-%COMP%]:hover{background-color:#0233af}.toptab[_ngcontent-%COMP%]{margin-top:-18px;z-index:5;background-color:#fff}.hiddenby[_ngcontent-%COMP%]{opacity:0;-webkit-transition:.5s;transition:.5s;margin-right:5px}.toptab[_ngcontent-%COMP%]:hover   .hiddenby[_ngcontent-%COMP%]{opacity:1;-webkit-transition:1s;transition:1s}"]}),t})()},vjOA:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a=n("H+bZ"),o=n("OlR4"),i=n("8Y7J"),r=n("SVse"),l=n("G0yt"),s=n("tKwJ"),d=n("wD9S");function c(t,e){if(1&t&&i["\u0275\u0275element"](0,"smart-table",4),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("data",t.table.remainingFuel)("settings",t.table.settings)}}let h=(()=>{class t{constructor(t,e,n,a){this.common=t,this.datePipe=e,this.api=n,this.modalService=a,this.remainingFuel=[],this.table=null,this.getRemainingFuel(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getRemainingFuel()}getRemainingFuel(){this.common.api.post("Fuel/getRemaningFuels",{}).subscribe(t=>{t.data.length?this.remainingFuel=t.data:this.common.showToast("No Record Found !!"),console.log("res",t.data),this.table=this.setTable()},t=>{this.common.showError()})}setTable(){return{remainingFuel:{headings:{RegNO:{title:"RegNO",placeholder:"RegNO"},startdate:{title:"startdate",placeholder:"Start Date"},TotalDistance:{title:"TotalDistance",placeholder:"Total Distance"},LoadingDistance:{title:"LoadingDistance",placeholder:"Loading Distance"},UnloadingDistance:{title:"UnloadingDistance",placeholder:"Unloading Distance"},RemainingFuel:{title:"RemainingFuel",placeholder:"Remaining Fuel"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}getTableColumns(){let t=[];return this.remainingFuel.map(e=>{let n={RegNO:{value:e.reg_number},startdate:{value:this.datePipe.transform(e.startdate,"dd MMM HH:mm a")},TotalDistance:{value:e.total_distance},LoadingDistance:{value:e.loading_distance},UnloadingDistance:{value:e.unloading_distance},RemainingFuel:{value:e.rem_fuel}};t.push(n)}),t}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](r.f),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](l.r))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["remaining-fuel"]],decls:7,vars:1,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-6"],["id","tblremainingFuel",3,"data","settings",4,"ngIf"],["id","tblremainingFuel",3,"data","settings"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"nb-card",0),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275elementStart"](4,"h5"),i["\u0275\u0275text"](5," Remaining Fuel "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,c,1,2,"smart-table",3),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",e.remainingFuel&&e.remainingFuel.length))},directives:[s.s,s.v,r.u,d.a],styles:["[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),t})()}}]);