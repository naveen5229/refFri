!function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{CHJM:function(t,o,i){"use strict";i.r(o),i.d(o,"IntelligenceModule",(function(){return B}));var s,a,r=[{title:"Dashboard",icon:"nb-home",link:"/pages/dashboard",home:!0},{title:"Calculator",icon:"nb-home",link:"/intelligence/profit-calculator"}],l=i("8Y7J"),u=i("IAMq"),c=i("tKwJ"),d=i("iInd"),g=((s=function t(){n(this,t),this.menu=r}).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=l["\u0275\u0275defineComponent"]({type:s,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"ngx-sample-layout"),l["\u0275\u0275element"](1,"nb-menu",0),l["\u0275\u0275element"](2,"router-outlet"),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("items",e.menu))},directives:[u.a,c.W,d.h],encapsulation:2}),s),m=i("vTDv"),h=((a=function t(){n(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:a}),a.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||a)},imports:[[m.a]]}),a),p=i("H+bZ"),f=i("OlR4"),v=i("EnSQ"),y=i("HXSw"),k=i("G0yt"),x=i("SVse"),b=i("s7LF");function S(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",26),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().index;return l["\u0275\u0275nextContext"]().deleteRoute("cost",t)})),l["\u0275\u0275elementEnd"]()}}function R(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",17),l["\u0275\u0275template"](1,S,1,0,"div",18),l["\u0275\u0275elementStart"](2,"div",19),l["\u0275\u0275elementStart"](3,"div",20),l["\u0275\u0275elementStart"](4,"input",21),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.origin.name=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"i",22),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=l["\u0275\u0275nextContext"]();return o.showLocation(t,o.cal="costPick")})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",23),l["\u0275\u0275elementStart"](7,"span",24),l["\u0275\u0275text"](8,"TO"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",20),l["\u0275\u0275elementStart"](10,"input",25),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.destination.name=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"i",22),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=l["\u0275\u0275nextContext"]();return o.showLocation(t,o.cal="costDrop")})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=e.index,s=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",0!=i||s.editCost.route),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("name","cost_origin_"+i)("id","cost_origin_"+i)("ngModel",o.origin.name),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("name","cost_destination_"+i)("id","cost_destination_"+i)("ngModel",o.destination.name)}}function C(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275text"](2,"Complete Loop"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",27),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().selected.loop.cost=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",o.selected.loop.cost)}}function w(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",26),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().index;return l["\u0275\u0275nextContext"]().deleteRoute("profit",t)})),l["\u0275\u0275elementEnd"]()}}function E(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",47),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"]().$implicit.brokerage=t})),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("ngClass",i.brokerage==o?"active":""),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](o)}}function I(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",47),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"]().$implicit.loading=t})),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("ngClass",i.loading==o?"active":""),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](o)}}function L(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",47),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"]().$implicit.unloading=t})),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("ngClass",i.unloading==o?"active":""),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](o)}}function P(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",28),l["\u0275\u0275template"](1,w,1,0,"div",18),l["\u0275\u0275elementStart"](2,"div",29),l["\u0275\u0275elementStart"](3,"div",20),l["\u0275\u0275elementStart"](4,"input",30),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.origin.name=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"i",22),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=l["\u0275\u0275nextContext"]();return o.showLocation(t,o.cal="profitPickup")})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",23),l["\u0275\u0275elementStart"](7,"span",24),l["\u0275\u0275text"](8,"TO"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",20),l["\u0275\u0275elementStart"](10,"input",31),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.destination.name=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"i",22),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=l["\u0275\u0275nextContext"]();return o.showLocation(t,o.cal="profitDrop")})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"p",32),l["\u0275\u0275text"](13,"Loading Details"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",29),l["\u0275\u0275elementStart"](15,"div",33),l["\u0275\u0275elementStart"](16,"input",34),l["\u0275\u0275listener"]("input",(function(t){l["\u0275\u0275restoreView"](n);var o=e.index;return l["\u0275\u0275nextContext"]().getBrokerage(t.target.value,o)}))("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.rate=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",35),l["\u0275\u0275elementStart"](18,"button",36),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=e.index,i=l["\u0275\u0275nextContext"]();return t.rate=i.addRate(t.rate,1e3,"profit_rate_"+o)})),l["\u0275\u0275text"](19,"+1000"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"button",37),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=e.index,i=l["\u0275\u0275nextContext"]();return t.rate=i.addRate(t.rate,500,"profit_rate_"+o)})),l["\u0275\u0275text"](21,"+500"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"button",38),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=e.index,i=l["\u0275\u0275nextContext"]();return t.rate=i.addRate(t.rate,100,"profit_rate_"+o)})),l["\u0275\u0275text"](23,"+100"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"button",39),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,o=e.index,i=l["\u0275\u0275nextContext"]();return t.rate=i.addRate(t.rate,10,"profit_rate_"+o)})),l["\u0275\u0275text"](25,"+10"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"div",29),l["\u0275\u0275elementStart"](27,"div",33),l["\u0275\u0275elementStart"](28,"input",40),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.tonnage=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](29,"div",35),l["\u0275\u0275elementStart"](30,"button",41),l["\u0275\u0275text"](31,"26"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"button",41),l["\u0275\u0275text"](33,"27"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"button",41),l["\u0275\u0275text"](35,"28"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](36,"button",41),l["\u0275\u0275text"](37,"29"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"div",29),l["\u0275\u0275elementStart"](39,"div",33),l["\u0275\u0275elementStart"](40,"input",42),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.brokerage=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](41,"div",35),l["\u0275\u0275template"](42,E,2,2,"button",43),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](43,"div",29),l["\u0275\u0275elementStart"](44,"div",33),l["\u0275\u0275elementStart"](45,"input",44),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.loading=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](46,"div",35),l["\u0275\u0275template"](47,I,2,2,"button",45),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](48,"div",29),l["\u0275\u0275elementStart"](49,"div",33),l["\u0275\u0275elementStart"](50,"input",46),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),e.$implicit.unloading=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](51,"div",35),l["\u0275\u0275template"](52,L,2,2,"button",43),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,i=e.index,s=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",0!=i||s.edit.route),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("name","profit_origin_"+i)("id","profit_origin_"+i)("ngModel",o.origin.name),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("name","profit_destination_"+i)("id","profit_destination_"+i)("ngModel",o.destination.name),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("name","profit_rate_"+i)("id","profit_rate_"+i)("ngModel",o.rate),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",1e3==o.tonnage?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",500==o.tonnage?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",100==o.tonnage?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass",10==o.tonnage?"active":""),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("name","profit_tonnage_"+i)("id","profit_tonnage_"+i)("ngModel",o.tonnage),l["\u0275\u0275advance"](12),l["\u0275\u0275property"]("name","profit_brokerage_"+i)("id","profit_brokerage_"+i)("ngModel",o.brokerage),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",o.brokrageRates),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("name","profit_loading_"+i)("id","profit_loading_"+i)("ngModel",o.loading),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",o.loadingRates),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("name","profit_unloading_"+i)("id","profit_unloading_"+i)("ngModel",o.unloading),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",o.unloadingRates)}}function _(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275text"](2,"Complete Loop"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",27),l["\u0275\u0275listener"]("ngModelChange",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().selected.loop.profit=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",o.selected.loop.profit)}}var M,T,O,V,D,A=((M=function(){function t(e,o,i,s,a,r){n(this,t),this.zone=e,this.api=o,this.common=i,this.data=s,this.router=a,this.modalService=r,this.selected={calculator:"profit",tonnage:0,brokerage:0,loading:0,unloading:0,loop:{profit:!1,cost:!1}},this.routes={cost:[{origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1}],profit:[{origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1,rate:null,tonnage:null,brokerage:null,loading:null,unloading:null,loadingRates:[20,30,40,50],unloadingRates:[20,30,40,50],brokrageRates:[1300,1200,1e3,800]}]},this.edit={route:null,index:-1},this.editCost={route:null,index:-1},this.loadingRates=[20,30,40,50],this.unloadingRates=[20,30,40,50],this.getLoadingUnloading("tonnage","","","","")}return e(t,[{key:"ngAfterViewInit",value:function(){setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_0",0,"origin"),3e3),setTimeout(this.autoSuggestion.bind(this,"cost","cost_destination_0",0,"destination"),3e3),setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_0",0,"origin"),3e3),setTimeout(this.autoSuggestion.bind(this,"profit","profit_destination_0",0,"destination"),3e3)}},{key:"autoSuggestion",value:function(t,e,n,o){var i=document.getElementById(e),s=new google.maps.places.Autocomplete(i,{types:["(cities)"],componentRestrictions:{country:"in"}});google.maps.event.addListener(s,"place_changed",this.getLocation.bind(this,s,t,n,o))}},{key:"getLocation",value:function(t,e,n,o){var i=this,s=t.getPlace();this.zone.run((function(){i.routes[e][n][o].lat=s.geometry.location.lat(),i.routes[e][n][o].lng=s.geometry.location.lng(),i.routes[e][n][o].name=s.formatted_address,i.routes[e][n].origin.lat&&i.routes[e][n].destination.lat&&"cost"==e&&(i.routes[e][n].status=!0),"profit"===e&&i.getLoadingUnloading("origin"===o?"loading":"unloading",s.formatted_address,s.geometry.location.lat(),s.geometry.location.lng(),n)}))}},{key:"addCostRoute",value:function(){console.log("afterAddClick"),this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,this.editCost.index=-1,this.editCost.route=null):this.routes.cost[this.routes.cost.length-1]&&(this.routes.cost[this.routes.cost.length-1].status=!0),this.routes.cost.push({origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1});var t="cost_destination_"+(this.routes.cost.length-1);setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_"+(this.routes.cost.length-1),this.routes.cost.length-1,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"cost",t,this.routes.cost.length-1,"destination"),500)}},{key:"addProfitRoute",value:function(){this.routes.profit.push({origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1,rate:null,tonnage:null,brokerage:null,loading:null,unloading:null,loadingRates:[20,30,40,50],unloadingRates:[20,30,40,50],brokrageRates:[1300,1200,1e3,800]});var t="profit_destination_"+(this.routes.profit.length-1);setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_"+(this.routes.profit.length-1),this.routes.profit.length-1,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"profit",t,this.routes.profit.length-1,"destination"),500)}},{key:"deleteRoute",value:function(t,e){return this.removeDummyRoutes(t),"profit"==t&&this.edit.route?(this.routes.profit[this.edit.index].status=!0,void this.clearData()):"cost"==t&&this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,void(this.editCost={index:-1,route:null})):(this.routes[t].length&&this.routes[t][e]&&(this.routes[t][e].origin.marker&&(this.routes[t][e].origin.marker.setMap(null),this.routes[t][e].destination.marker.setMap(null)),this.routes[t].splice(e,1)),void(this.routes[t].length||"cost"!==t?this.routes[t].length||"profit"!==t||this.addProfitRoute():this.addCostRoute()))}},{key:"removeDummyRoutes",value:function(t){this.routes[t]=this.routes[t].filter((function(t){return!(!t.origin.lat||!t.destination.lat)}))}},{key:"mapViewer",value:function(t){this.common.searchId=null,"profit"==t&&this.edit.route?(this.routes.profit[this.edit.index].status=!0,this.clearData()):"profit"!=t||this.checkRouteStatus("profit",this.routes.profit.length-1)?"profit"==t?this.removeDummyRoutes("profit"):"cost"==t&&this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,this.editCost={index:-1,route:null}):"cost"!=t||this.checkRouteStatus("cost",this.routes.cost.length-1)?"cost"==t&&this.removeDummyRoutes("cost"):this.routes.cost[this.routes.cost.length-1].status=!0:this.routes.profit[this.routes.profit.length-1].status=!0,this.data.routes[t]=this.routes[t]}},{key:"calculateBrokerage",value:function(t,e){this.routes.profit[t].brokerage=this.routes.profit[t].rate*this.routes.profit[t].tonnage/100*e}},{key:"brokerageOptions",value:function(t){return t.rate>=2e3?[1500,1300,1200,1e3]:t.rate<1e3&&t.rate>1?[1e3,800,500,300]:[1300,1200,1e3,800]}},{key:"checkRouteStatus",value:function(t,e){var n=this.routes[t][e];return!("profit"==t&&n.origin.lat&&n.destination.lat&&n.rate&&n.tonnage&&n.brokerage&&n.loading&&n.unloading||"cost"==t&&n.origin.lat&&n.destination.lat)}},{key:"editRoute",value:function(t,e){this.removeDummyRoutes("profit"),console.log("Route:",t),this.edit.route&&(this.routes.profit[this.edit.index].status=!0),this.edit={route:Object.assign({},t),index:e},console.log("Index:",e),this.routes.profit[e].status=!1,setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_"+e,0,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"profit","profit_destination_"+e,0,"destination"),500)}},{key:"editCostRoute",value:function(t,e){this.removeDummyRoutes("cost"),this.edit.route&&(this.routes.cost[this.edit.index].status=!0),this.editCost={route:Object.assign({},t),index:e},this.routes.cost[e].status=!1,setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_"+e,0,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"cost","cost_destination_"+e,0,"destination"),500)}},{key:"resetData",value:function(t){this.edit.route?(this.routes.profit[this.edit.index]=Object.assign({},this.edit.route),this.edit={route:null,index:-1}):(console.log("Index",t),this.deleteRoute("profit",t))}},{key:"clearData",value:function(){this.edit={route:null,index:-1}}},{key:"getLoadingUnloading",value:function(t,e,n,o,i){var s=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r={type:t,place:e,lat:n,lng:o,rate:a};console.log(r),this.api.post("inputSuggestion",r).subscribe((function(e){if(console.log(e),!s.common.handleApiResponce(e))return s.common.showToast(e.msg),void localStorage.clear();"tonnage"!=t?(console.log(i),console.log(s.routes.profit[i]),s.routes.profit[i][t+"Rates"]=e.data.values):s.tonnageRates=e.data.values}),(function(t){}))}},{key:"checkAddProfitRoute",value:function(){this.edit.route?(this.routes.profit[this.edit.index].status=!0,this.clearData()):this.routes.profit[this.routes.profit.length-1].status=!0,this.addProfitRoute()}},{key:"logout",value:function(){var t=this;this.common.loading++,this.api.post("login",{type:"logout"}).subscribe((function(e){console.log(e),t.common.loading--,t.common.showToast(e.msg),localStorage.clear()}),(function(e){console.log(e),t.common.loading--}))}},{key:"isShowLoopOption",value:function(t){return this.routes[t].length<2?(this.selected.loop[t]=!1,!1):this.routes[t][0].origin.name!=this.routes[t][this.routes[t].length-1].destination.name||(this.selected.loop[t]=!1,!1)}},{key:"showLocation",value:function(t,e){console.log("text==",this.common.params),this.common.params={location:location,title:"Vehicle Pickup Point"},this.modalService.open(y.a,{size:"lg",container:"nb-layout"}).result.then((function(n){console.log("Location name: ",n.location.name),"costPick"==e&&(t.origin.name=n.location.name),"costDrop"==e&&(t.destination.name=n.location.name),"profitPickup"==e&&(t.origin.name=n.location.name,console.log("profitPick inthis")),"profitDrop"==e&&(t.destination.name=n.location.name,console.log("profitDrop inthis"))}))}},{key:"getBrokerage",value:function(t,e){t.length>=3&&this.getLoadingUnloading("brokrage","","","",e,t)}},{key:"addRate",value:function(t,e,n){return setTimeout(this.removeEffetc.bind(this,n),500),console.log(t),console.log(e),null==t?e:("string"==typeof t||console.log(typeof(parseInt(t)+parseInt(e))),parseInt(t)+parseInt(e))}},{key:"removeEffetc",value:function(t){}},{key:"goToPage",value:function(t){this.router.navigate(["/intelligence/path-viewer"])}}]),t}()).\u0275fac=function(t){return new(t||M)(l["\u0275\u0275directiveInject"](l.NgZone),l["\u0275\u0275directiveInject"](p.a),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](v.a),l["\u0275\u0275directiveInject"](d.c),l["\u0275\u0275directiveInject"](k.r))},M.\u0275cmp=l["\u0275\u0275defineComponent"]({type:M,selectors:[["profit-calculator"]],decls:37,vars:6,consts:[[2,"border","none"],[2,"font-size","20px"],["tabTitle","Cost Calculator",3,"ngClass","click"],[1,"row-cal",2,"margin","20px 0"],["id","cost-calculator",1,"col-md-12","routes"],["class","input-position",4,"ngFor","ngForOf"],[1,"route-options",2,"margin","20px 0"],["block","",1,"btn","btn-success",2,"margin-right","15px","font-size","12px","padding","7px",3,"click"],["name","add-circle"],[4,"ngIf"],["tabTitle","Profit Calculator",3,"ngClass","click"],["id","profit-calculator",1,"routes"],["class","input-position","style","position:relative",4,"ngFor","ngForOf"],[1,"cal-btn"],[1,"btn","btn-success",2,"margin-right","15px","font-size","12px","padding","7px",3,"click"],[1,"row-btn"],["mini","",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"click"],[1,"input-position"],["name","close","class","delete-route","style","top:0px; background: #607D8B; color: #fff; border-radius: 50% 0% 50% 50%;",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-5",2,"padding-left","4px","margin-top","15px"],["type","text","placeholder","Enter pickup point",1,"location-input","form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-map-marker",2,"bottom","32px","right","10px","font-size","20px","float","right","position","relative",3,"click"],["col-1","",2,"padding","30px 10px 0 0px"],[1,"route-to"],["type","text","placeholder","Enter drop point",1,"location-input","form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["name","close",1,"delete-route",2,"top","0px","background","#607D8B","color","#fff","border-radius","50% 0% 50% 50%",3,"click"],["checked","false","name","loop",3,"ngModel","ngModelChange"],[1,"input-position",2,"position","relative"],[1,"row",2,"margin","20px 0"],["type","text","placeholder","Enter pickup point",1,"form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["type","text","placeholder","Enter drop point",1,"form-control",3,"name","id","ngModel","ngModelChange"],[1,"section",2,"margin-top","15px"],[1,"col-md-4",2,"padding-left","4px","margin-top","15px"],["type","number","placeholder","Rate/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","input","ngModelChange"],[1,"col-md-8",2,"padding-top","16px"],["id","bnt-1000",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-500",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-100",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-10",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["type","number","placeholder","Tonnage",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],[1,"btn","btn-success","btn-xs",2,"margin-right","15px"],["type","number","placeholder","Brokerage",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],["style","margin-right:15px;","class","btn btn-success btn-xs",3,"ngClass","click",4,"ngFor","ngForOf"],["type","number","placeholder","Loading/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],["class","btn btn-success btn-xs","style","margin-right:15px;",3,"ngClass","click",4,"ngFor","ngForOf"],["type","number","placeholder","Unloading/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],[1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"h2",1),l["\u0275\u0275text"](3,"Calculator"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"nb-card-body"),l["\u0275\u0275elementStart"](5,"nb-tabset"),l["\u0275\u0275elementStart"](6,"nb-tab",2),l["\u0275\u0275listener"]("click",(function(){return e.selected.calculator="cost"})),l["\u0275\u0275elementStart"](7,"div",3),l["\u0275\u0275elementStart"](8,"div",4),l["\u0275\u0275template"](9,R,12,7,"div",5),l["\u0275\u0275elementStart"](10,"div",6),l["\u0275\u0275elementStart"](11,"button",7),l["\u0275\u0275listener"]("click",(function(){return e.addCostRoute()})),l["\u0275\u0275element"](12,"div",8),l["\u0275\u0275text"](13," \xa0Add Route "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"button",7),l["\u0275\u0275listener"]("click",(function(){return e.mapViewer("cost")})),l["\u0275\u0275text"](15," Calculate Cost "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](16,C,4,1,"div",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"nb-tab",10),l["\u0275\u0275listener"]("click",(function(){return e.selected.calculator="profit"})),l["\u0275\u0275elementStart"](18,"div"),l["\u0275\u0275elementStart"](19,"div",11),l["\u0275\u0275template"](20,P,53,29,"div",12),l["\u0275\u0275elementStart"](21,"div",13),l["\u0275\u0275elementStart"](22,"button",7),l["\u0275\u0275listener"]("click",(function(){return e.checkAddProfitRoute()})),l["\u0275\u0275element"](23,"div",8),l["\u0275\u0275text"](24," \xa0Add Route "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"button",14),l["\u0275\u0275listener"]("click",(function(){return e.goToPage("page")})),l["\u0275\u0275text"](26," Calculate Profit "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](27,_,4,1,"div",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"div",15),l["\u0275\u0275elementStart"](29,"button",16),l["\u0275\u0275listener"]("click",(function(){return e.logout()})),l["\u0275\u0275text"](30," Logout "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"button",16),l["\u0275\u0275listener"]("click",(function(){return e.goToPage("BoosterPage")})),l["\u0275\u0275text"](32," Booster Page "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"button",16),l["\u0275\u0275listener"]("click",(function(){return e.goToPage("VehiclesPage")})),l["\u0275\u0275text"](34," Vehicle Page "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"button",16),l["\u0275\u0275listener"]("click",(function(){return e.goToPage("BoostedPage")})),l["\u0275\u0275text"](36," Boosted Page "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngClass","cost"==e.selected.calculator?"active":"in-active"),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",e.routes.cost),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngIf",e.isShowLoopOption("cost")),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass","profit"==e.selected.calculator?"active":"in-active"),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",e.routes.profit),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngIf",e.isShowLoopOption("profit")))},directives:[c.s,c.v,c.r,c.Hb,c.Gb,x.r,x.t,x.u,b.d,b.r,b.u,b.x],styles:[""]}),M),$=["map"],j=[{path:"",component:g,children:[{path:"dashboard",component:(O=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}(),O.\u0275fac=function(t){return new(t||O)},O.\u0275cmp=l["\u0275\u0275defineComponent"]({type:O,selectors:[["dashboard"]],decls:6,vars:0,consts:[[1,"row"],[1,"ion-arrow-return-left"],[1,"icon","ion-md-exit"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"nb-card"),l["\u0275\u0275elementStart"](2,"nb-card-body"),l["\u0275\u0275element"](3,"i",1),l["\u0275\u0275element"](4,"i",2),l["\u0275\u0275text"](5," Hello from ngx-admin sandbox project."),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())},directives:[c.s,c.r],styles:[""]}),O)},{path:"profit-calculator",component:A},{path:"path-viewer",component:(T=function(){function t(e,o,i,s){n(this,t),this.zone=e,this.api=o,this.common=i,this.data=s,this.routes=[],this.costRoutes=[],this.costRoutesCopy=[],this.routeLines=[],this.linkLines=[],this.showLines=[],this.routeType="",this.loadedRoutes=[],this.total={profit:0,cost:0,revenue:0},this.viewType="map",this.connect=!1,this.selected={suggestion:[]},this.geocoder=null,this.showInfo=-1,this.hideInfo=-1,this.runningPolyline1=null,this.runningPolyline2=null,this.runningPolyline3=null,this.isRunPolyline=!1,this.bounds=null,this.common.params.routes&&(localStorage.setItem("ROUTES",JSON.stringify(this.common.params.routes)),localStorage.setItem("ROUTE_TYPE",this.common.params.routeType),this.connect=this.common.params.connect),this.routeType=localStorage.getItem("ROUTE_TYPE"),this.routes=JSON.parse(localStorage.getItem("ROUTES")),"cost"==this.routeType?this.getCostRoutesFromAPI():"profit"==this.routeType&&this.getProfitRoutesFromAPI()}return e(t,[{key:"ngAfterViewInit",value:function(){console.log("ionViewDidLoad PathViewerPage"),this.loadMap()}},{key:"loadMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:26.9124336,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:75.78727090000007,n={center:new google.maps.LatLng(t,e),zoom:5,disableDefaultUI:!0,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.mapElement.nativeElement,n),this.geocoder=new google.maps.Geocoder}},{key:"getCostRoutesFromAPI",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.removeDummyRoutes();var n=[];this.routes.map((function(t){n.push({origin:{name:t.origin.name,lat:t.origin.lat,lng:t.origin.lng},destination:{name:t.destination.name,lat:t.destination.lat,lng:t.destination.lng}})})),console.log(n),console.log(n);var o={routes:n,searchId:this.common.searchId||-1,connect:this.connect};console.log(o),this.api.postJava("info",o).subscribe((function(n){return console.log("Res:",n),t.common.handleApiResponce(n)?(localStorage.setItem("COSTROUTES",JSON.stringify(n)),n.success?(e||(t.common.searchId=n.data.searchId),localStorage.setItem("COSTROUTES",JSON.stringify(n.data.routes)),void t.handleCostRoutes(n.data.routes)):void t.common.showToast(n.msg)):(t.common.showToast(n.msg),void localStorage.clear())}),(function(t){console.error("Error",t)}))}},{key:"getProfitRoutesFromAPI",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.removeDummyRoutes();var n=[];this.routes.map((function(t){n.push({origin:{name:t.origin.name,lat:t.origin.lat,lng:t.origin.lng},destination:{name:t.destination.name,lat:t.destination.lat,lng:t.destination.lng},rate:t.rate,tonnage:t.tonnage,brokerage:t.brokerage,loading:t.loading,unloading:t.unloading})})),console.log(n);var o={routes:n,searchId:this.common.searchId||-1,connect:this.connect};console.log(o),this.api.post("infoprofit",o).subscribe((function(n){return console.log("Res:",n),t.common.handleApiResponce(n)?n.success?(e||(t.common.searchId=n.data.searchId,localStorage.setItem("SEARCH_ID",n.data.searchId)),localStorage.setItem("COSTROUTES",JSON.stringify(n.data.routes)),console.log("Test: ",JSON.parse(localStorage.getItem("COSTROUTES"))),t.handleCostRoutes(n.data.routes),void t.initializeSelectedSuggestion()):void t.common.showToast(n.msg):(t.common.showToast(n.msg),void localStorage.clear())}),(function(t){console.error("Error",t)}))}},{key:"removeDummyRoutes",value:function(){this.routes=this.routes.filter((function(t){return!(!t.origin.lat||!t.destination.lat)}))}},{key:"handleCostRoutes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search";this.data.costRoutes=t,this.costRoutes=t,"search"==n&&(this.costRoutesCopy=Object.assign({},this.costRoutes),this.loadedRoutes=[],t.map((function(t,n){t.isLoaded&&e.loadedRoutes.push({index:n,route:t})}))),this.calulateTotalCost(),"profit"==this.routeType&&(console.log("Calculate Profit"),this.calculateProfit());var o=0,i=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=0;this.costRoutes.map((function(t,n){t.latLng.length&&t.isLoaded&&(e.routes[o].origin.lat=t.latLng[0].lat,e.routes[o].origin.lng=t.latLng[0].lng,console.log(e.routes[o].origin.lat,e.routes[o].origin.lng,o),e.routes[o].destination.lat=t.latLng[t.latLng.length-1].lat,e.routes[o].destination.lng=t.latLng[t.latLng.length-1].lng,e.setMarker(o,"origin",s[a++%s.length]),e.setMarker(o,"destination",s[a++%s.length]),e.drawRoute2(n,"routeLines",t.isLoaded,o),console.log("Routes: ",e.routes,t,t.latLng[0].lat,t.latLng[0].lng),o++)})),this.costRoutes.map((function(t,n){t.latLng.length&&(t.isLoaded||(e.drawRoute2(n,"linkLines",t.isLoaded,i),i++))})),this.getRoutes2(),this.initializeRunPolyline()}},{key:"calulateTotalCost",value:function(){this.costRoutes.map((function(t){t.cost.totalCost.value=t.cost.fuel.value+t.cost.border.value+t.cost.toll.value+t.cost.loading.value+t.cost.unloading.value,t.cost.brokerage&&(t.cost.totalCost.value+=t.cost.brokerage.value),console.log("Total Cost:",t.cost.totalCost)}))}},{key:"setMarker",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",o=new google.maps.LatLng(this.routes[t][e].lat,this.routes[t][e].lng);this.routes[t][e].marker?this.routes[t][e].marker.setPosition(o):(this.routes[t][e].marker=new google.maps.Marker({position:{lat:this.routes[t][e].lat,lng:this.routes[t][e].lng},map:this.map,draggable:!0,animation:google.maps.Animation.DROP,title:this.routes[t][e].name,label:n}),google.maps.event.addListener(this.routes[t][e].marker,"dragend",this.markerPositionChangd.bind(this,t,e)),this.createInfoWindow(t,e),this.routes[t][e].marker.addListener("click",this.showInfoWindow.bind(this,t,e))),localStorage.getItem("MARKER_MOVED")||this.bounceMarker()}},{key:"createInfoWindow",value:function(t,e){var n=new google.maps.InfoWindow({content:'\n      <h4 style="margin:0px; font-size: 14px;">'.concat(this.routes[t][e].name,"</h4>\n      ")});this.routes[t][e].infowindow=n}},{key:"showInfoWindow",value:function(t,e){console.log(e,t),this.routes[t][e].infowindow.open(this.map,this.routes[t][e].marker)}},{key:"drawRoute2",value:function(t,e,n,o){if(console.log("polylines",this[e]),this[e][o])for(var i=0;i<this[e][o].length;i++)this[e][o][i].setMap(null);this[e][o]=[];var s=n?"black":"red",a=null;a=n?new google.maps.Polyline({map:this.map,strokeColor:s,strokeOpacity:1,strokeWeight:2.5,geodesic:!0}):new google.maps.Polyline({map:this.map,strokeColor:s,strokeOpacity:1,strokeWeight:1.5,geodesic:!0}),this[e][o].push(a),console.log("CostIndex:",t),console.log("Cost:",this.costRoutes[t]),"string"==typeof this.costRoutes[t].latLng&&(this.costRoutes[t].latLng=JSON.parse(this.costRoutes[t].latLng)),console.log("Cost:",this.costRoutes[t]),this.costRoutes[t].latLng.map((function(t,e){a.getPath().push(new google.maps.LatLng(t.lat,t.lng))})),a.setMap(this.map),console.log(this[e]),this.map.setCenter({lat:this.costRoutes[t].latLng[0].lat,lng:this.costRoutes[t].latLng[0].lng})}},{key:"getRoutes2",value:function(){this.removeDummyRoutes();for(var t=0;t<this.routes.length;t++)this.routes[t].origin.lat&&this.routes[t].destination.lat&&(this.setMarker(t,"origin"),this.setMarker(t,"destination"))}},{key:"markerPositionChangd",value:function(t,e){localStorage.setItem("MARKER_MOVED","YES"),this.routes[t][e].lat=this.routes[t][e].marker.getPosition().lat(),this.routes[t][e].lng=this.routes[t][e].marker.getPosition().lng(),this.geocoder.geocode({location:{lat:this.routes[t][e].lat,lng:this.routes[t][e].lng}},this.getAddress.bind(this,t,e))}},{key:"bounceMarker",value:function(){localStorage.getItem("MARKER_MOVED")||(null!==this.routes[0].origin.marker.getAnimation()?this.routes[0].origin.marker.setAnimation(null):this.routes[0].origin.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(this.bounceMarker.bind(this),500))}},{key:"viewDetails",value:function(){this.isRunPolyline=!1}},{key:"goBack",value:function(){this.isRunPolyline=!1}},{key:"routeShower",value:function(){}},{key:"clearShowLines",value:function(){}},{key:"calculateProfit",value:function(){var t=this;this.total={profit:0,cost:0,revenue:0},this.costRoutes.map((function(e){t.total.profit+=e.cost.profit.value,t.total.cost+=e.cost.totalCost.value,t.total.revenue+=e.cost.revenue.value})),console.log("Total:",this.total)}},{key:"handleZoom",value:function(t){var e=this.map.getZoom();this.map.setZoom(t?e+1:e-1)}},{key:"getAddress",value:function(t,e,n,o){console.log(n),console.log(o),n[0]&&(console.log(n[0].formatted_address),this.routes[t][e].name=n[0].formatted_address),this.isRunPolyline=!1,"cost"==this.routeType?this.getCostRoutesFromAPI(!0):"profit"==this.routeType&&this.getProfitRoutesFromAPI(!0)}},{key:"viewSuggestion",value:function(){console.log("Tets")}},{key:"initializeSelectedSuggestion",value:function(){this.selected.suggestion=[];for(var t=0;t<this.loadedRoutes.length;t++)this.selected.suggestion[t]=-1}},{key:"selectSuggestion",value:function(t,e,n,o,i){console.log("Route: ",o),console.log("Suggestion: ",i),this.selected.suggestion[e]="route"==t?-1:n;var s={routeId:o.id,index:"route"==t?-1:i.index,suggestionId:"route"==t?o.route.id:i.id,preId:0!=e?this.loadedRoutes[e-1].route.id:-1,nextId:e!=this.loadedRoutes.length-1?this.loadedRoutes[e+1].route.id:this.connect?this.loadedRoutes[0].route.id:-1,data:{rate:-1,tonnage:-1,brokrage:-1,loading:-1,unloading:-1}};console.log("Suggetion Data: ",s,e),this.getSuggestData(s,e,o.route.id)}},{key:"getSuggestData",value:function(t,e,n){var o=this;this.isRunPolyline=!1,this.api.post("segmentSuggestion",t).subscribe((function(t){if(console.log("RES: ",t),!o.common.handleApiResponce(t))return o.common.showToast(t.msg),void localStorage.clear();o.handleSuggestionUpdate(t.data.routes,e,n)}),(function(t){console.log(t)}))}},{key:"handleSuggestionUpdate",value:function(t,e,n){var o=this.loadedRoutes[e].index;this.costRoutes[o]=t[1],"string"==typeof this.costRoutes[o].latLng&&(this.costRoutes[o].latLng=JSON.parse(this.costRoutes[o].latLng)),t[0]&&(this.costRoutes[o-1]=t[0],"string"==typeof this.costRoutes[o-1].latLng&&(this.costRoutes[o-1].latLng=JSON.parse(this.costRoutes[o-1].latLng))),t[2]&&(this.costRoutes[o+1]=t[2],"string"==typeof this.costRoutes[o+1].latLng&&(this.costRoutes[o+1].latLng=JSON.parse(this.costRoutes[o+1].latLng))),console.log(this.costRoutes),this.handleCostRoutes(this.costRoutes,"suggestion")}},{key:"showSuggestion",value:function(){document.getElementById("suggestion").className="suggestion suggestion-show animated slideInUp"}},{key:"hideSuggestion",value:function(){document.getElementById("suggestion").className="suggestion suggestion-show animated slideOutDown",setTimeout((function(){document.getElementById("suggestion").className="suggestion animated slideOutDown"}),500)}},{key:"editLoadDetails",value:function(t,e,n,o,i){var s=this;null.onDidDismiss((function(a){if(console.log(a),a.status){s.hideInfo=s.showInfo,s.showInfo=-1,s.selected.suggestion[e]="route"==t?-1:n;var r={index:"route"==t?-1:i.index,suggestionId:"route"==t?o.route.id:i.id,preId:0!=e?s.loadedRoutes[e-1].route.id:-1,nextId:e!=s.loadedRoutes.length-1?s.loadedRoutes[e+1].route.id:s.connect?s.loadedRoutes[0].route.id:-1,data:{rate:a.load.rate!=i.rate?a.load.rate:-1,tonnage:a.load.tonnage!=i.tonnage?a.load.tonnage:-1,brokrage:a.load.brokrage!=i.brokrage?a.load.brokrage:-1,loading:a.load.loading!=i.loading?a.load.loading:-1,unloading:a.load.unloading!=i.unloading?a.load.unloading!=i.unloading:-1}};s.loadedRoutes[e].route.suggestions[n].rate=a.load.rate,s.loadedRoutes[e].route.suggestions[n].tonnage=a.load.tonnage,s.loadedRoutes[e].route.suggestions[n].brokrage=a.load.brokrage,s.loadedRoutes[e].route.suggestions[n].loading=a.load.loading,s.loadedRoutes[e].route.suggestions[n].unloading=a.load.unloading,console.log("Suggetion Data: ",r,e),s.getSuggestData(r,e,o.route.id)}})),null.present()}},{key:"showHideInfo",value:function(t){this.hideInfo=this.showInfo,this.showInfo=this.showInfo!=t?t:-1,console.log("Id:",t),console.log("hideInfo:",this.hideInfo),console.log("showInfo:",this.showInfo)}},{key:"initializeRunPolyline",value:function(){var t=[];this.costRoutes.map((function(e){e.latLng.map((function(e){return t.push(e)}))})),this.setBounds(),this.isRunPolyline=!0,this.setRunPolyline(t,"1")}},{key:"setRunPolyline",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";this["runningPolyline"+e]&&this["runningPolyline"+e].setMap(null),this["runningPolyline"+e]=new google.maps.Polyline({map:this.map,strokeColor:"#f2f2f2",strokeOpacity:1,strokeWeight:2.5,geodesic:!0}),this.runPolyline(t,0,e)}},{key:"runPolyline",value:function(t,e,n){for(var o=0;o<=10;o++){if(e+o<t.length-1){var i=new google.maps.LatLng(t[e+o].lat,t[e+o].lng);this["runningPolyline"+n].getPath().push(i)}this["runningPolyline"+n].getPath().length>100&&this["runningPolyline"+n].getPath().removeAt(o)}e+10<t.length-1&&this.isRunPolyline?setTimeout(this.runPolyline.bind(this,t,e+10,n),1):(this["runningPolyline"+n].setMap(this.map),this.isRunPolyline&&setTimeout(this.setRunPolyline.bind(this,t,n),1))}},{key:"setBounds",value:function(){var t=this;this.bounds=new google.maps.LatLngBounds,this.costRoutes.map((function(e){t.bounds.extend(new google.maps.LatLng(e.latLng[0].lat,e.latLng[0].lng)),t.map.fitBounds(t.bounds),t.bounds.extend(new google.maps.LatLng(e.latLng[e.latLng.length-1].lat,e.latLng[e.latLng.length-1].lng)),t.map.fitBounds(t.bounds)}))}}]),t}(),T.\u0275fac=function(t){return new(t||T)(l["\u0275\u0275directiveInject"](l.NgZone),l["\u0275\u0275directiveInject"](p.a),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](v.a))},T.\u0275cmp=l["\u0275\u0275defineComponent"]({type:T,selectors:[["path-viewer"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275viewQuery"]($,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.mapElement=n.first)},decls:2,vars:0,template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1," path-viewer works!\n"),l["\u0275\u0275elementEnd"]())},encapsulation:2}),T)}]}],z=((D=function t(){n(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||D)},imports:[[d.g.forChild(j)],d.g]}),D),B=((V=function t(){n(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:V}),V.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||V)},imports:[[z,m.a,h]]}),V)}}])}();