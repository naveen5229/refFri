!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,t,n,o,a,i,r){try{var l=e[i](r),c=l.value}catch(d){return void n(d)}l.done?t(c):Promise.resolve(c).then(o,a)}function o(e){return function(){var t=this,o=arguments;return new Promise((function(a,i){var r=e.apply(t,o);function l(e){n(r,a,i,l,c,"next",e)}function c(e){n(r,a,i,l,c,"throw",e)}l(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"7tAi":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("8Y7J"),i=n("OlR4"),l=n("SVse");function c(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275elementStart"](1,"button",10),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"](2).selectMonth(e)})),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",i.selectedMonth.id==a.id&&i.theYear===i.selectedYear?"month-btn-active":"")("disabled",i.currentYear===i.theYear&&i.currentMonth<a.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](a.name)}}function d(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275elementStart"](2,"div",5),o["\u0275\u0275elementStart"](3,"i",6),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]();return e.theYear=e.theYear-1})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",5),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"i",7),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]();return e.currentYear!==e.theYear&&(e.theYear=e.theYear+1)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",8),o["\u0275\u0275template"](9,c,3,3,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var a=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",a.theYear," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",a.months)}}var s=function(){var e=function(){function e(t){var n=this;a(this,e),this.common=t,this.select=new o.EventEmitter,this.months=[{name:"JAN",id:"01"},{name:"FEB",id:"02"},{name:"March",id:"03"},{name:"APRIL",id:"04"},{name:"MAY",id:"05"},{name:"JUN",id:"06"},{name:"JULY",id:"07"},{name:"AUG",id:"08"},{name:"SEPT",id:"09"},{name:"OCT",id:"10"},{name:"NOV",id:"11"},{name:"DEC",id:"12"}],this.theYear=(new Date).getFullYear(),this.currentYear=(new Date).getFullYear(),this.currentMonth=((new Date).getMonth()<9?"0":"")+((new Date).getMonth()+1),this.selectedYear=(new Date).getFullYear(),this.selectedMonth={name:"",id:""},this.isVisible=!1,this.months.forEach((function(e){e.id==n.currentMonth&&(n.selectedMonth=e)})),setTimeout(this.selectMonth.bind(this,this.selectedMonth),500)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"selectMonth",value:function(e){this.selectedMonth=e,this.selectedYear=this.theYear;var t,n=(new Date).getMonth(),o="".concat(this.selectedYear,"-").concat(e.id,"-01");t=this.common.dateFormatter(n+1==e.id?new Date:new Date(this.selectedYear,e.id,0),"",!1),this.isVisible=!1,this.select.emit({start:o,end:t})}},{key:"resetData",value:function(){this.selectedMonth={name:"",id:""}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["month-picker"]],outputs:{select:"select"},decls:4,vars:2,consts:[[1,"month-picker"],["type","text","name","month","readonly","",1,"form-control",3,"value","click"],["class","month-list",4,"ngIf"],[1,"month-list"],[1,"row","text-center","year-container"],[1,"col-4"],[1,"fa","fa-angle-double-left",3,"click"],[1,"fa","fa-angle-double-right",3,"click"],[1,"row","p-0","m-0"],["class","col-4",4,"ngFor","ngForOf"],[1,"btn","month-btn",3,"ngClass","disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"input",1),o["\u0275\u0275listener"]("click",(function(){return t.isVisible=!t.isVisible})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,d,10,2,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",t.selectedMonth.name+" - "+t.selectedYear),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isVisible))},directives:[l.u,l.t,l.r],styles:[".month-list[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;-webkit-box-shadow:2px 10px 10px #ccc;box-shadow:2px 10px 10px #ccc;border:1px solid #ccc;position:absolute;z-index:9999;width:300px}.month-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border-radius:3px;border:0;margin-bottom:10px}.month-btn[_ngcontent-%COMP%]{background:#fff;color:#000;font-family:Exo;padding:0;line-height:30px}.month-btn[_ngcontent-%COMP%]:hover{background:#f2f2f2;color:#000}.month-btn-active[_ngcontent-%COMP%]{background:teal;color:#fff}.year-container[_ngcontent-%COMP%]{margin-bottom:5px;font-size:18px}"]}),e}()},mQSa:function(t,n,i){"use strict";i.r(n),i.d(n,"AccountsModule",(function(){return Ys}));var l,c,d=i("iInd"),s=i("BHau"),m=i("H+bZ"),u=i("flj8"),p=i("qfBg"),g=i("Ugrs"),h=i("8Y7J"),v=i("G0yt"),f=i("IAMq"),b=i("tKwJ"),x=((c=function(){function e(t,n,o,i,r,l){a(this,e),this.api=t,this.router=n,this.user=o,this.accountService=i,this.modalService=r,this.activeModal=l,this.menu=JSON.parse(s.a),this.accountService.branches.length||this.getBranches(),this.accountService.financialYears.length||this.getFinancial()}return r(e,[{key:"getBranches",value:function(){var e=this;this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){console.log("Branches :",t.data),e.accountService.branches=t.data,1==e.accountService.branches.length?(console.log("_________________________TRUE"),e.accountService.selected.branchId=e.accountService.branches[0].id,e.accountService.selected.branch=e.accountService.branches[0],e.getFinancial()):(console.log("_________________________ELSE"),e.accountService.selected.branchId=0,e.accountService.selected.branch.id=0)}),(function(e){console.log("Error: ",e)}))}},{key:"getFinancial",value:function(){var e=this;this.api.post("Suggestion/GetFinancialYear",{search:123}).subscribe((function(t){console.log("financial :",t.data),e.accountService.financialYears=t.data,e.accountService.selected.financialYear=e.accountService.financialYears[e.accountService.financialYears.length-1],console.log("selected financial year",e.accountService.selected.financialYear)}),(function(t){e.getFinancial(),console.log("Error: ",t)}))}},{key:"onKeyDown",value:function(e){var t=["f4","f5","f6","f7","f8","f9","f1","f10","f11","f12"],n=e.key.toLowerCase(),o=t.indexOf(n);if(e.ctrlKey){var a="";1==n?a="/accounts/daybooks/0":2==n?a="/accounts/ledgerview":3==n?a="/accounts/profitloss":4==n?a="/accounts/balancesheet":5==n?a="/accounts/trading":6==n?a="/accounts/trialbalance":0==n?a="/accounts/ledgermapping":"f2"==n&&this.modalService.open(g.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})),""!=a&&(this.router.navigate([a]),e.preventDefault())}else if(-1!=o){var i=t[o];console.log("Pressed Key:",i),this.router.navigate([{f4:"/accounts/vouchers/-8/Contra Voucher",f5:"/accounts/vouchers/-1/Bank Payment Voucher",f6:"/accounts/vouchers/-3/Cash Payment Voucher",f7:"/accounts/vouchers/-2/Bank Receipt Voucher",f8:"/accounts/vouchers/-4/Cash Receipt Voucher",f9:"/accounts/vouchers/-7/Journal Voucher",f1:"/accounts/ledgers/0",f10:"/accounts/trip-voucher-expense",f11:"/accounts/trip-voucher-expense/1",f12:"/accounts/fuelfillings"}[i]]),e.preventDefault()}}}]),e}()).\u0275fac=function(e){return new(e||c)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](d.c),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](v.b))},c.\u0275cmp=h["\u0275\u0275defineComponent"]({type:c,selectors:[["ngx-pages"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.onKeyDown(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:3,vars:1,consts:[["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"ngx-sample-layout"),h["\u0275\u0275element"](1,"nb-menu",0),h["\u0275\u0275element"](2,"router-outlet"),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("items",t.menu))},directives:[f.a,b.W,d.h],styles:[".pagination[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;display:block;padding:5px 7px;color:#007bff;background-color:#fff;border:1px solid #dee2e6;float:left;cursor:pointer}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button.active-page[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{z-index:1;color:#fff;background-color:#007bff;border-color:#007bff;-webkit-box-shadow:0 0 0 .2rem rgba(0,123,255,.25);box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{-webkit-box-shadow:0 0 0 .2rem rgba(0,123,255,.25);box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.tablePagination[_ngcontent-%COMP%]{color:#000}"]}),c),y=((l=function(){function e(){a(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275cmp=h["\u0275\u0275defineComponent"]({type:l,selectors:[["dashboard"]],decls:6,vars:0,consts:[[1,"row"],[1,"ion-arrow-return-left"],[1,"icon","ion-md-exit"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275elementStart"](1,"nb-card"),h["\u0275\u0275elementStart"](2,"nb-card-body"),h["\u0275\u0275element"](3,"i",1),h["\u0275\u0275element"](4,"i",2),h["\u0275\u0275text"](5," Hello from ngx-admin sandbox project."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]())},directives:[b.s,b.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff}"]}),l),C=i("OlR4"),_=i("NTD5"),S=i("Xy1B"),k=i("G/p5"),M=i("SjoD"),E=i("Wvez"),w=i("fIRD"),P=i("2heQ"),O=i("zeuJ"),I=i("Pcpv"),D=i("SVse"),V=i("11Hx"),F=i("s7LF"),T=["testInput"];function B(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"PI No."),h["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1," Debit Note No."),h["\u0275\u0275elementEnd"]())}function L(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Wastage No."),h["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"PI Date"),h["\u0275\u0275elementEnd"]())}function j(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Debit Date"),h["\u0275\u0275elementEnd"]())}function z(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"wastage Date"),h["\u0275\u0275elementEnd"]())}function N(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Po Date"),h["\u0275\u0275elementEnd"]())}function G(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Ref Date"),h["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",19),h["\u0275\u0275elementStart"](1,"div",20),h["\u0275\u0275template"](2,N,2,0,"label",21),h["\u0275\u0275template"](3,G,2,0,"label",21),h["\u0275\u0275elementStart"](4,"input",28),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.podate=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](2);return e.lastActiveId="po-date",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("purchase")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("debit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.podate)}}function H(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"i"),h["\u0275\u0275text"](2,"Cur Bal: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.ledgerbalance)}}function $(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",3),h["\u0275\u0275elementStart"](1,"div",19),h["\u0275\u0275elementStart"](2,"div",20),h["\u0275\u0275elementStart"](3,"label",25),h["\u0275\u0275text"](4,"Purchase Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"input",29),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.purchaseledger.name=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](2);return e.lastActiveId="ledger-"+e.i,e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",19),h["\u0275\u0275elementStart"](7,"div",20),h["\u0275\u0275elementStart"](8,"label",25),h["\u0275\u0275text"](9,"Supplier Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"input",30),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](11,H,4,1,"span",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",19),h["\u0275\u0275elementStart"](13,"div",20),h["\u0275\u0275elementStart"](14,"label",25),h["\u0275\u0275text"](15,"Supplier Ref.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"input",31),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.vendorbidref=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",19),h["\u0275\u0275elementStart"](18,"div",20),h["\u0275\u0275elementStart"](19,"label",25),h["\u0275\u0275text"](20,"Shipment Location"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"input",32),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.shipmentlocation=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.purchaseledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.ledger.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.ledgerbalance),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.vendorbidref),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.shipmentlocation)}}function q(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",3),h["\u0275\u0275elementStart"](1,"div",19),h["\u0275\u0275elementStart"](2,"div",20),h["\u0275\u0275elementStart"](3,"label",25),h["\u0275\u0275text"](4,"Payment Terms"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"input",33),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.paymentterms=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",19),h["\u0275\u0275elementStart"](7,"div",20),h["\u0275\u0275elementStart"](8,"label",25),h["\u0275\u0275text"](9,"Bilty Number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"input",34),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.biltynumber=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",19),h["\u0275\u0275elementStart"](12,"div",20),h["\u0275\u0275elementStart"](13,"label",25),h["\u0275\u0275text"](14,"Bilty Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"input",35),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.biltydate=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](2);return e.lastActiveId="account-biltydate",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",19),h["\u0275\u0275elementStart"](17,"div",20),h["\u0275\u0275elementStart"](18,"label",25),h["\u0275\u0275text"](19,"Dilivery Terms"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"input",36),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.deliveryterms=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.paymentterms),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.biltynumber),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.biltydate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.deliveryterms)}}function K(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",3),h["\u0275\u0275elementStart"](1,"div",19),h["\u0275\u0275elementStart"](2,"div",20),h["\u0275\u0275elementStart"](3,"label",25),h["\u0275\u0275text"](4,"Vender Billing Address"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"textarea",37),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.billingaddress=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",19),h["\u0275\u0275elementStart"](7,"div",20),h["\u0275\u0275elementStart"](8,"label",25),h["\u0275\u0275text"](9,"Remarks"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"textarea",38),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).order.orderremarks=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.billingaddress),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.orderremarks)}}function U(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div",3),h["\u0275\u0275elementStart"](2,"div",19),h["\u0275\u0275elementStart"](3,"div",20),h["\u0275\u0275template"](4,B,2,0,"label",21),h["\u0275\u0275template"](5,A,2,0,"label",21),h["\u0275\u0275template"](6,L,2,0,"label",21),h["\u0275\u0275elementStart"](7,"input",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.custcode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",19),h["\u0275\u0275elementStart"](9,"div",20),h["\u0275\u0275template"](10,R,2,0,"label",21),h["\u0275\u0275template"](11,j,2,0,"label",21),h["\u0275\u0275template"](12,z,2,0,"label",21),h["\u0275\u0275elementStart"](13,"input",23),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.date=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.lastActiveId="account-date",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](14,Y,5,3,"div",24),h["\u0275\u0275elementStart"](15,"div",19),h["\u0275\u0275elementStart"](16,"div",20),h["\u0275\u0275elementStart"](17,"label",25),h["\u0275\u0275text"](18,"Ref.No."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"input",26),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.qutationrefrence=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](20,$,22,5,"div",27),h["\u0275\u0275template"](21,q,21,4,"div",27),h["\u0275\u0275template"](22,K,11,2,"div",27),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("purchase")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("debit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("wastage")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.custcode),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("purchase")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("debit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("wastage")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.date),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("purchase")||o.order.ordertype.name.toLowerCase().includes("debit")),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.qutationrefrence),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id)}}function W(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Invoice No."),h["\u0275\u0275elementEnd"]())}function Q(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Credit Note No."),h["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Credit Date"),h["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",25),h["\u0275\u0275text"](1,"Invoice Date"),h["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"i"),h["\u0275\u0275text"](2,"Cur Bal: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.ledgerbalance)}}function ee(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div",3),h["\u0275\u0275elementStart"](2,"div",19),h["\u0275\u0275elementStart"](3,"div",20),h["\u0275\u0275template"](4,W,2,0,"label",21),h["\u0275\u0275template"](5,Q,2,0,"label",21),h["\u0275\u0275elementStart"](6,"input",39),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.custcode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",19),h["\u0275\u0275elementStart"](8,"div",20),h["\u0275\u0275template"](9,J,2,0,"label",21),h["\u0275\u0275template"](10,X,2,0,"label",21),h["\u0275\u0275elementStart"](11,"input",40),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.date=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.lastActiveId="account-date",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",19),h["\u0275\u0275elementStart"](13,"div",20),h["\u0275\u0275elementStart"](14,"label",25),h["\u0275\u0275text"](15,"Order No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"input",41),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.vendorbidref=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",19),h["\u0275\u0275elementStart"](18,"div",20),h["\u0275\u0275elementStart"](19,"label",25),h["\u0275\u0275text"](20,"Order Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"input",28),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.podate=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.lastActiveId="po-date",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",3),h["\u0275\u0275elementStart"](23,"div",19),h["\u0275\u0275elementStart"](24,"div",20),h["\u0275\u0275elementStart"](25,"label",25),h["\u0275\u0275text"](26,"Sales Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"input",42),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.purchaseledger.name=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.lastActiveId="ledger-"+e.i,e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",19),h["\u0275\u0275elementStart"](29,"div",20),h["\u0275\u0275elementStart"](30,"label",25),h["\u0275\u0275text"](31,"Party Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"input",43),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](33,Z,4,1,"span",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",19),h["\u0275\u0275elementStart"](35,"div",20),h["\u0275\u0275elementStart"](36,"label",25),h["\u0275\u0275text"](37,"Payment Terms"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"input",44),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.paymentterms=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"div",3),h["\u0275\u0275elementStart"](40,"div",19),h["\u0275\u0275elementStart"](41,"div",20),h["\u0275\u0275elementStart"](42,"label",25),h["\u0275\u0275text"](43,"Eway Bill Number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"input",45),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.biltynumber=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"div",19),h["\u0275\u0275elementStart"](46,"div",20),h["\u0275\u0275elementStart"](47,"label",25),h["\u0275\u0275text"](48,"Eway Bill Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"input",35),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.biltydate=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.lastActiveId="account-biltydate",e.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"div",19),h["\u0275\u0275elementStart"](51,"div",20),h["\u0275\u0275elementStart"](52,"label",25),h["\u0275\u0275text"](53,"Delivery Terms"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"input",46),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.deliveryterms=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](55,"div",3),h["\u0275\u0275elementStart"](56,"div",19),h["\u0275\u0275elementStart"](57,"div",20),h["\u0275\u0275elementStart"](58,"label",25),h["\u0275\u0275text"](59,"Party Billing Address"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](60,"textarea",47),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.billingaddress=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](61,"div",19),h["\u0275\u0275elementStart"](62,"div",20),h["\u0275\u0275elementStart"](63,"label",25),h["\u0275\u0275text"](64,"Shipment Location"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](65,"textarea",48),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.shipmentlocation=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](66,"div",19),h["\u0275\u0275elementStart"](67,"div",20),h["\u0275\u0275elementStart"](68,"label",25),h["\u0275\u0275text"](69,"Remarks"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](70,"textarea",49),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.orderremarks=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("sales")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("credit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.custcode),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("credit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!o.order.ordertype.name.toLowerCase().includes("credit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.date),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.vendorbidref),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.podate),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",o.order.purchaseledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.ledger.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.ledgerbalance),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.paymentterms),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",o.order.biltynumber),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.biltydate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.deliveryterms),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",o.order.billingaddress),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.shipmentlocation),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.order.orderremarks)}}function te(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Rate"),h["\u0275\u0275elementEnd"]())}function ne(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Amount"),h["\u0275\u0275elementEnd"]())}function oe(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Line Amount"),h["\u0275\u0275elementEnd"]())}function ae(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"remarks"),h["\u0275\u0275elementEnd"]())}function ie(e,t){1&e&&h["\u0275\u0275element"](0,"th")}function re(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1,"("),h["\u0275\u0275elementStart"](2,"i"),h["\u0275\u0275text"](3,"Available Qty is "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"]("",n.totalitem,")")}}function le(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",53),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.rate=e}))("input",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return e.lineamount=e.amount=(e.qty*e.rate).toFixed(2)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("id","amtrate-"+a)("ngModel",i.rate)}}function ce(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",54),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.amount=e}))("input",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return e.lineamount=e.amount})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("id","amount-"+a)("ngModel",i.amount)}}function de(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",55),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.lineamount=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.lineamount)}}function se(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",56),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.remarks=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("id","remarks-"+a)("ngModel",i.remarks)}}function me(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"button",57),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().TaxDetails(e)})),h["\u0275\u0275text"](2,"Tax"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().index;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("id","taxDetail-"+o)}}function ue(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"button",58),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).addAmountDetails()})),h["\u0275\u0275element"](2,"i",59),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function pe(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"button",60),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().order.amountDetails.splice(e,1)})),h["\u0275\u0275element"](2,"i",61),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function ge(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275elementStart"](2,"input",50),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.warehouse.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275elementStart"](4,"input",51),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.stockitem.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](5,re,5,1,"span",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275elementStart"](7,"input",52),h["\u0275\u0275listener"]("input",(function(){var e=t.$implicit;return e.lineamount=e.amount=(e.qty*e.rate).toFixed(2)}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.qty=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,le,2,2,"td",4),h["\u0275\u0275template"](9,ce,2,2,"td",4),h["\u0275\u0275template"](10,de,2,1,"td",4),h["\u0275\u0275template"](11,se,2,2,"td",4),h["\u0275\u0275template"](12,me,3,1,"td",4),h["\u0275\u0275template"](13,ue,3,0,"td",4),h["\u0275\u0275template"](14,pe,3,0,"td",4),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("id","warehouse-"+a)("name","warehouse-"+a)("ngModel",o.warehouse.name),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("id","stockitem-"+a)("ngModel",o.stockitem.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",i.order.ordertype.name.toLowerCase().includes("sales")&&i.order.amountDetails[a].warehouse.id),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("id","qty-"+a)("ngModel",o.qty),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==a&&-108!=i.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!==a)}}function he(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",62),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275elementStart"](6,"label",63),h["\u0275\u0275text"](7,"Total Qty:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"input",64),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().totalqty=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275elementStart"](12,"label",25),h["\u0275\u0275text"](13,"Total Amt:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"input",64),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().totalamount=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"td"),h["\u0275\u0275elementStart"](16,"label",25),h["\u0275\u0275text"](17,"Total Tax Amt:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",65),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().totalTaxamount=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"td"),h["\u0275\u0275elementStart"](20,"label",25),h["\u0275\u0275text"](21,"Total Line Amt:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"input",64),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.totalamount=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"td"),h["\u0275\u0275text"](24,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"td"),h["\u0275\u0275text"](26,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngModel",o.totalqty)("value",o.calculateTotalQty()),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",o.totalamount)("value",o.calculateTotal()),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",o.totalTaxamount),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",o.order.totalamount)("value",o.calculateTotalLineAmount())}}function ve(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"input",66),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().order.ismanual=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](2," Is Mannual Approval "),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.order.ismanual)}}function fe(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",67),h["\u0275\u0275elementStart"](1,"div",68),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"p"),h["\u0275\u0275text"](4,"Are you want to save ?"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"button",69),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().dismiss(!0)})),h["\u0275\u0275text"](6,"Yes"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8,"\xa0\xa0\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"button",69),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](10,"No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function be(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",67),h["\u0275\u0275elementStart"](1,"div",70),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",71),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.order[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.order[o.f2Date])}}var xe,ye=((xe=function(){function e(t,n,o,i,r,l,c,d){var s=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.router=r,this.printService=l,this.modalService=c,this.accountService=d,this.lastwarehouseActiveId="",this.showConfirm=!1,this.stockitmeflag=!0,this.suggestionname="",this.branchdata=[],this.orderTypeData=[],this.supplier=[],this.ledgers={all:[],suggestions:[]},this.showSuggestions=!1,this.activeLedgerIndex=-1,this.totalitem=null,this.invoiceDetail=[],this.taxDetailData=[],this.mannual=!1,this.freezedate="",this.allowBackspace=!0,this.ledgerbalance="",this.totalqty=0,this.totalamount=0,this.totalTaxamount=0,this.rateflag=[],this.ledgersuggestiondata=[],this.order={podate:this.common.dateFormatternew(new Date).split(" ")[0],date:this.accountService.voucherDate?this.accountService.voucherDate:this.common.dateFormatternew(new Date).split(" ")[0],biltynumber:"",biltydate:this.common.dateFormatternew(new Date).split(" ")[0],totalamount:null,grnremarks:"",billingaddress:"",custcode:"",vendorbidref:"",qutationrefrence:"",deliveryterms:"",paymentterms:"",orderremarks:"",shipmentlocation:"",orderid:0,delete:0,ledgeraddressid:null,print:!1,branchid:0,ordertype:{name:"",id:0},ledger:{name:"",id:0},purchaseledger:{name:"",id:""},ismanual:this.mannual,amountDetails:[{id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:"0"},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!0}]},this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.suggestions={purchaseLedgers:[],supplierLedgers:[],stockItems:[],purchasestockItems:[],salesstockItems:[],discountLedgers:[],warehouses:[],invoiceTypes:[],list:[],invoiceList:[]},this.suggestionIndex=-1,this.activeId="ordertype",this.lastActiveId="",this.autoSuggestion={data:[],targetId:"",display:""},this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(s.order.ordertype.id=e.id,s.order.ordertype.name=e.name),s.router.routeReuseStrategy.shouldReuseRoute=function(){return!1};var t=e.name;"Debit Note"==t&&(s.getInvoiceList(-2),s.suggestionname="purchase"),"Credit Note"==t&&(s.getInvoiceList(-4),s.suggestionname="sales"),"Purchase Assets Invoice"==t&&(s.suggestionname="inventary"),"Purchase Invoice"==t&&(s.suggestionname="purchase"),"Sales Invoice"==t&&(s.suggestionname="sales"),s.getStockItems(s.suggestionname)})),this.common.refresh=function(){s.getInvoiceTypes(),s.getPurchaseLedgers(),s.getSupplierLedgers(),s.getStockItems(s.suggestionname),s.getWarehouses(),s.mannual=s.accountService.selected.branch.is_inv_manualapprove,s.order.ismanual=s.mannual},this.common.refresh(),this.setFoucus("custcode"),this.common.currentPage=this.order.ordertype.name,this.getFreeze()}return r(e,[{key:"ngOnInit",value:function(){}},{key:"setInvoice",value:function(){return{podate:this.common.dateFormatternew(new Date).split(" ")[0],date:this.common.dateFormatternew(new Date).split(" ")[0],biltynumber:"",biltydate:this.common.dateFormatternew(new Date).split(" ")[0],totalamount:null,grnremarks:"",billingaddress:"",custcode:"",vendorbidref:"",qutationrefrence:"",deliveryterms:"",paymentterms:"",orderremarks:"",shipmentlocation:"",orderid:0,delete:0,branchid:0,ledgeraddressid:null,ismanual:this.mannual,print:!1,ordertype:{name:this.order.ordertype.name,id:this.order.ordertype.id},ledger:{name:"",id:0},purchaseledger:{name:"",id:""},amountDetails:[{id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:""},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!0}]}}},{key:"addAmountDetails",value:function(){this.order.amountDetails.push({id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:""},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!1});var e=parseInt(this.lastwarehouseActiveId.split("-")[1]);console.log("tax detail inex",this.lastwarehouseActiveId,e),this.setFoucus("warehouse-"+(e+1))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getInvoiceTypes",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetOrderTypeList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.suggestions.invoiceTypes=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getStockItems",value:function(e){var t=this;this.common.loading++,this.api.get("Suggestion/GetStockItem?search=123&invoicetype="+e).subscribe((function(e){t.common.loading--,console.log("----------------------kkk:",e.data),t.suggestions.stockItems=e.data,t.setAutoSuggestion()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getWarehouses",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/GetWareHouse?search=123").subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.suggestions.warehouses=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"callconfirm",value:function(){this.showConfirm=!0}},{key:"dismiss",value:function(e){var t=this;if(this.showConfirm=!1,event.preventDefault(),e){if(console.log("Order new:",this.accountService.selected.financialYear),0==this.accountService.selected.branch.id)return void this.common.showError("Please select Branch");if(null==this.accountService.selected.financialYear)this.common.showError("This Select financial year ");else if(1==this.accountService.selected.financialYear.isfrozen)return void this.common.showError("This financial year is freezed. Please select currect financial year");if(0==this.order.amountDetails[0].amount)return void this.common.showError("Please fill correct amount");var n=this.common.dateFormatter(this.common.convertDate(this.order.date),"y",!1);if(n<this.accountService.selected.financialYear.startdate||n>this.accountService.selected.financialYear.enddate)return void this.common.showError("Please Select Correct Financial Year");if(this.freezedate){var o=this.CompareDate(this.freezedate);console.log("heddlo",o),0==o?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout((function(){t.setFoucus("date")}),150)):this.addOrder(this.order)}else this.common.showError("Please Select Correct Financial Year")}}},{key:"modelCondition",value:function(){this.showConfirm=!1,event.preventDefault()}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.order[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.order[e])}))}},{key:"TaxDetails",value:function(e){var t=this;0==this.order.amountDetails[e].amount?(console.log("test hello again",this.order.amountDetails[e].amount,e),this.common.showError("Please fill correct amount"),this.setFoucus("rate"+e)):(this.common.params={taxDetail:this.order.amountDetails[e].taxDetails,amount:this.order.amountDetails[e].amount,sizeIndex:1},this.modalService.open(k.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"accountModalClass"}).result.then((function(n){n.response&&(console.log("????????",n.taxDetails),t.order.amountDetails[e].taxDetails=n.taxDetails,t.order.amountDetails[e].lineamount=null,console.log("###",t.order.amountDetails[e].amount),t.order.amountDetails[e].lineamount=(parseFloat(t.order.amountDetails[e].amount)+parseFloat(n.taxDetails[0].totalamount)).toFixed(2),t.totalTaxamount+=n.taxDetails[0].totalamount,console.log("###---",t.order.amountDetails[e].lineamount,"-----||",n.taxDetails[0].totalamount,t.lastwarehouseActiveId),t.setFoucus("plustransparent"))})))}},{key:"onSelected",value:function(e,t,n){this.order[t].name=e[n],this.order[t].id=e.id,console.log("order User: ",this.order)}},{key:"onSelectedaddress",value:function(e,t,n){this.order[t].name=e[n],this.order[t].id=e.id,console.log("order User: ",this.order)}},{key:"addOrder",value:function(e){var t=this;console.log("new order",e);var n={billingaddress:e.billingaddress,orderremarks:e.orderremarks,biltynumber:e.biltynumber,podate:e.podate,biltydatestamp:e.biltydate,custcode:e.custcode,orderdata:e.date,deliveryterms:e.deliveryterms,paymentterms:e.paymentterms,vendorquotationref:e.qutationrefrence,review:e.review,shipmentlocation:e.shipmentlocation,vendorbidref:e.vendorbidref,ledger:e.ledger.id,ordertype:e.ordertype.id,purchaseledgerid:e.purchaseledger.id,grnremarks:e.grnremarks,amountDetails:e.amountDetails,ledgeraddressid:e.ledgeraddressid,x_id:0,ismannual:e.ismanual,branchid:e.branchid};console.log("params11: ",n),this.common.loading++,this.api.post("Company/InsertPurchaseOrder",n).subscribe((function(n){t.common.loading--,console.log("res: ",n),e.print&&t.printFunction(),t.order=t.setInvoice(),t.setFoucus("ordertype"),t.common.showToast("Invoice Are Saved")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"calculateTotal",value:function(){var e=null;return this.order.amountDetails.map((function(t){e+=parseFloat(t.amount)})),e}},{key:"calculateTotalLineAmount",value:function(){var e=null;return this.order.amountDetails.map((function(t){e+=parseFloat(t.lineamount)})),e}},{key:"calculateTotalQty",value:function(){var e=null;return this.order.amountDetails.map((function(t){e+=parseFloat(t.qty)})),e}},{key:"getStockAvailability",value:function(e,t){var n=this,o={stockid:e,wherehouseid:t};this.common.loading++,this.api.post("Suggestion/GetStockItemAvailableQty",o).subscribe((function(e){return n.common.loading--,console.log("Res:",e.data[0].get_stockitemavailableqty),n.totalitem=e.data[0].get_stockitemavailableqty,n.totalitem}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"keyHandler",value:function(e){var t=this,n=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("-------------:",e,document.activeElement.id,this.activeId),this.setAutoSuggestion(),this.order.ordertype.name.toLowerCase().includes("purchase")&&this.activeId.includes("stockitem")&&(this.suggestions.stockItems=this.suggestions.stockItems),this.order.ordertype.name.toLowerCase().includes("sales")&&this.activeId.includes("stockitem")&&(this.suggestions.stockItems=this.suggestions.stockItems),console.log("Active event11",e,this.order.ordertype.name,this.activeId,this.suggestions.purchasestockItems),"f3"==n&&this.callconfirm(),!e.ctrlKey&&"f2"==n&&!this.showDateModal)return this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date="date",void(this.activedateid=this.lastActiveId);if("enter"==n&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),console.log("(orderactivedateid",this.order[this.lastActiveId],this.activeId),this.order.date=this.common.handleVoucherDateOnEnter(this.order.date),void this.setFoucus(this.lastActiveId);if("enter"==n||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if(e.altKey&&"c"===n&&(this.activeId.includes("purchaseledger")||this.activeId.includes("discountledger")||this.activeId.includes("ledger")))this.openledger();else if(e.altKey&&"c"===n&&this.activeId.includes("stockitem"))this.openStockItemModal();else if(e.altKey&&"c"===n&&this.activeId.includes("warehouse"))this.openwareHouseModal();else if(e.altKey&&"u"===n&&this.activeId.includes("ledger"))0!=this.order.ledger.id&&this.openinvoicemodel(this.order.ledger.id,0);else{if("home"===n&&this.activeId.includes("ledger")&&(console.log("hello",this.activeId),"ledger"==this.activeId?(console.log("ledger value ------------",this.order.ledger.id),0!=this.order.ledger.id?this.openinvoicemodel(this.order.ledger.id):this.common.showError("Please Select Correct Ledger")):"purchaseledger"!=this.activeId&&"ledgersup"!=this.activeId||(console.log("purchase ledger value ------------",this.order.purchaseledger.id),""!=this.order.purchaseledger.id&&this.openinvoicemodel(this.order.purchaseledger.id))),e.ctrlKey&&"`"===n)return console.log("ctrl esacape"),void this.mouse();if(this.activeId.includes("qty-")||this.activeId.includes("amtrate-")){var o=parseInt(this.activeId.split("-")[1]);setTimeout((function(){0!=t.order.amountDetails[o].qty&&null!=t.order.amountDetails[o].qty||0!=t.order.amountDetails[o].rate&&null!=t.order.amountDetails[o].rate?t.rateflag[o]=0:(t.rateflag[o]=1,t.activeId.includes("amtrate-")&&t.setFoucus("amount-"+o)),console.log("rate flag ::",o,"index",t.rateflag[o],t.rateflag)}),50)}if(this.activeId.includes("qty-")&&this.order.ordertype.name.toLowerCase().includes("sales")){var a=parseInt(this.activeId.split("-")[1]);setTimeout((function(){console.log("available item",t.order.amountDetails[a].qty,"second response",t.totalitem,"stockitemm",t.stockitmeflag),t.stockitmeflag&&parseInt(t.totalitem)<parseInt(t.order.amountDetails[a].qty)&&(alert("Quantity is lower then available quantity"),t.order.amountDetails[a].qty=0)}),300)}if((this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit"))&&this.activeId.includes("amtrate-")){var i=parseInt(this.activeId.split("-")[1]),r=this.order.amountDetails[i].amount;console.log("amount with condition",r),this.stockitmeflag&&""==this.order.biltynumber&&r>=5e4&&this.common.showError("Please Enter vailde Eway Bill Number")}if("enter"==n){if(this.allowBackspace=!0,this.activeId.includes("branch"))this.setFoucus("ordertype");else if(this.activeId.includes("ordertype"))console.log("order type",this.order.ordertype.name),this.order.ordertype.name.toLowerCase().includes("purchase")&&(this.suggestions.stockItems=this.suggestions.purchasestockItems),this.order.ordertype.name.toLowerCase().includes("sales")&&(this.suggestions.stockItems=this.suggestions.salesstockItems),this.setFoucus("custcode");else if(this.activeId.includes("custcode"))this.handleVoucherDateOnEnter(),this.setFoucus("date");else if(this.activeId.includes("biltydate"))this.handleOrderDateOnEnter("biltydate"),this.setFoucus("deliveryterms");else if(this.activeId.includes("podate"))this.handleOrderDateOnEnter("podate"),this.setFoucus(-104==this.order.ordertype.id?"salesledger":"qutationrefrence");else if(this.activeId.includes("date")){if(this.freezedate){var l=this.CompareDate(this.freezedate);console.log("heddlo",l),0==l?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout((function(){t.setFoucus("date")}),150)):this.setFoucus(-104==this.order.ordertype.id?"vendorbidref":"podate")}}else if(this.activeId.includes("purchaseledger")||this.activeId.includes("salesledger"))this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),-108==this.order.ordertype.id?this.setFoucus("warehouse-0"):(setTimeout((function(){console.log("sales ledger11111",t.order.purchaseledger.id),t.order.purchaseledger.id||t.order.purchaseledger.name||(t.common.showError("Please Select Purchase Legder"),t.order.purchaseledger.name="",t.setFoucus(-104==t.order.ordertype.id?"salesledger":"purchaseledger"))}),100),this.setFoucus("ledger"));else if(this.activeId.includes("discountledger")){console.log("0000000000000000000000000000000"),this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);var c=parseInt(this.activeId.split("-")[1]);this.setFoucus("discountate-"+c)}else if(this.activeId.includes("ledger"))this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),setTimeout((function(){t.order.ledger.id||t.order.ledger.name||(t.order.ledger.name="",t.common.showError("Please Select Supplier Legder"),t.setFoucus("ledger"))}),100),this.setFoucus(-104==this.order.ordertype.id?"paymentterms":"vendorbidref");else if(this.activeId.includes("vendorbidref"))this.setFoucus(-104==this.order.ordertype.id?"podate":"shipmentlocation");else if(this.activeId.includes("qutationrefrence")){if(-104==this.order.ordertype.id)this.setFoucus("salesledger");else if(this.freezedate){var d=this.CompareDate(this.freezedate);console.log("heddlo",d),0==d?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout((function(){t.setFoucus("purchaseledger")}),150)):this.setFoucus("purchaseledger")}}else if(this.activeId.includes("shipmentlocation"))this.setFoucus(-104==this.order.ordertype.id?"orderremarks":"paymentterms");else if(this.activeId.includes("paymentterms"))this.setFoucus("biltynumber");else if(this.activeId.includes("biltynumber"))this.handleVoucherBiltyDateOnEnter(),this.setFoucus("biltydate");else if(this.activeId.includes("deliveryterms"))console.log(this.order.ordertype.name),this.setFoucus("billingaddress");else if(this.activeId.includes("billingaddress")&&(this.order.ordertype.name.toLowerCase().includes("purchase")||this.order.ordertype.name.toLowerCase().includes("debit"))||this.activeId.includes("grnremarks"))this.setFoucus("orderremarks");else if(this.activeId.includes("billingaddress")&&(this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit")))this.setFoucus(-104==this.order.ordertype.id?"shipmentlocation":"grnremarks");else if(this.activeId.includes("orderremarks"))this.setFoucus("warehouse-0");else if(this.activeId.includes("stockitem")){this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);var s=parseInt(this.activeId.split("-")[1]);this.order.ordertype.name.toLowerCase().includes("sales")&&!this.stockitmeflag?setTimeout((function(){t.order.amountDetails[s].stockitem.id||t.order.amountDetails[s].stockitem.name?t.setFoucus("rate-"+s):(t.common.showError("Please Select Warehouse"),t.order.purchaseledger.name="",t.setFoucus("stockitem-"+s))}),100):setTimeout((function(){t.order.amountDetails[s].stockitem.id||t.order.amountDetails[s].stockitem.name?t.setFoucus("qty-"+s):(t.common.showError("Please Select Warehouse"),t.order.purchaseledger.name="",t.setFoucus("stockitem-"+s))}),100)}else if(this.activeId.includes("qty")){var m=parseInt(this.activeId.split("-")[1]);this.setFoucus(-108==this.order.ordertype.id?"plustransparent":"amtrate-"+m)}else if(this.activeId.includes("amtrate")){var u=parseInt(this.activeId.split("-")[1]);document.getElementById("amount-"+u),this.setFoucus("amount-"+u)}else if(this.activeId.includes("discountate")){var p=parseInt(this.activeId.split("-")[1]);this.setFoucus("warehouse-"+p)}else if(this.activeId.includes("warehouse")){console.log("hello",this.activeId),this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);var g=parseInt(this.activeId.split("-")[1]);setTimeout((function(){console.log("suggetion data",t.order.amountDetails[g].warehouse.id),t.order.amountDetails[g].warehouse.id||t.order.amountDetails[g].warehouse.name?t.setFoucus("stockitem-"+g):(t.common.showError("Please Select Warehouse"),t.order.purchaseledger.name="",t.setFoucus("warehouse-"+g))}),100)}else if(this.activeId.includes("remarks")){console.log("lastwarehouseActiveId",this.lastwarehouseActiveId,this.activeId);var h=parseInt(this.activeId.split("-")[1]);setTimeout((function(){t.lastwarehouseActiveId="taxDetail-"+h}),50),this.setFoucus("taxDetail-"+h)}else if(this.activeId.includes("invocelist"))this.setFoucus("custcode");else if(this.activeId.includes("amount-")){var v=parseInt(this.activeId.split("-")[1]);0==this.order.amountDetails[v].amount?(console.log("test hello",this.order.amountDetails[v].amount,v),this.common.showError("Please fill correct amount"),this.setFoucus("amount-"+v)):this.setFoucus("remarks-"+v)}}else if("backspace"==n&&this.allowBackspace){if(e.preventDefault(),console.log("active 1",this.activeId),"date"==this.activeId&&this.setFoucus("custcode"),"podate"==this.activeId&&this.setFoucus("date"),"salesledger"==this.activeId&&this.setFoucus("qutationrefrence"),"purchaseledger"==this.activeId&&this.setFoucus("qutationrefrence"),"ledger"==this.activeId&&(this.order.ordertype.name.toLowerCase().includes("sales")?this.setFoucus("salesledger"):this.setFoucus("purchaseledger")),"vendorbidref"==this.activeId&&this.setFoucus("ledger"),"qutationrefrence"==this.activeId&&(this.order.ordertype.name.toLowerCase().includes("sales")?this.setFoucus("date"):this.setFoucus("podate")),"shipmentlocation"==this.activeId&&this.setFoucus("vendorbidref"),"paymentterms"==this.activeId&&this.setFoucus("shipmentlocation"),"biltynumber"==this.activeId&&this.setFoucus("paymentterms"),"biltydate"==this.activeId&&this.setFoucus("biltynumber"),"deliveryterms"==this.activeId&&this.setFoucus("biltydate"),"billingaddress"==this.activeId&&this.setFoucus("deliveryterms"),"grnremarks"==this.activeId&&this.setFoucus("billingaddress"),this.activeId.includes("orderremarks")&&(this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit"))&&this.setFoucus("grnremarks"),this.activeId.includes("orderremarks")&&(this.order.ordertype.name.toLowerCase().includes("purchase")||this.order.ordertype.name.toLowerCase().includes("debit"))&&this.setFoucus("billingaddress"),this.activeId.includes("remarks")){var f=this.activeId.split("-")[1];this.setFoucus("amount-"+f)}if(this.activeId.includes("amount-")){var b=this.activeId.split("-")[1];this.setFoucus("amtrate-"+b)}if(this.activeId.includes("amtrate")){var x=this.activeId.split("-")[1];this.setFoucus(-104==this.order.ordertype.id?"stockitem-"+x:"qty-"+x)}if(this.activeId.includes("qty")){var y=this.activeId.split("-")[1];this.setFoucus("stockitem-"+y)}if(this.activeId.includes("stockitem")){var C=this.activeId.split("-")[1];this.setFoucus("warehouse-"+C)}if(this.activeId.includes("warehouse")){var _=this.activeId.split("-")[1];0==parseInt(_)?this.setFoucus("orderremarks"):this.setFoucus("remarks-"+(parseInt(_)-1))}}else if(n.includes("arrow"))this.allowBackspace=!1,(n.includes("arrowup")||n.includes("arrowdown"))&&(this.handleArrowUpDown(n),e.preventDefault());else if("date"!=this.activeId&&"podate"!=this.activeId&&"biltydate"!=this.activeId||"backspace"===n)"backspace"!=n&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(n))return void e.preventDefault()}}},{key:"handleOrderDateOnEnter",value:function(e){var t=[],n="-",o="date"==e?"podate":"biltydate";if(this.order[o].includes("-"))t=this.order[o].split("-");else{if(!this.order[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.order[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1],r=(i=1==i.length?"0"+i:i>=13?12:i)>"03"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1],l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,this.order[o]=a+n+i+n+l}},{key:"setFoucus",value:function(e){var t=this;console.log("Id: ",e),setTimeout((function(){var n=document.getElementById(e);console.log("Element: ",n),n.focus(),t.setAutoSuggestion()}),100)}},{key:"handleVoucherBiltyDateOnEnter",value:function(){var e=[],t="-";if(this.order.date.includes("-"))e=this.order.date.split("-");else{if(!this.order.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.order.date.split("/"),t="/"}var n=e[0];n=1==n.length?"0"+n:n;var o=e[1];o=1==o.length?"0"+o:o;var a=e[2];a=1==a.length?"200"+a:2==a.length?"20"+a:a,this.order.biltydate=n+t+o+t+a}},{key:"handleVoucherDateOnEnter",value:function(){var e=[],t="-";if(this.order.date.includes("-"))e=this.order.date.split("-");else{if(!this.order.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.order.date.split("/"),t="/"}var n=e[0];n=1==n.length?"0"+n:n;var o=e[1];o=1==o.length?"0"+o:o;var a=e[2];a=1==a.length?"200"+a:2==a.length?"20"+a:a,this.order.date=n+t+o+t+a}},{key:"getPurchaseLedgers",value:function(){var e=this;console.log("purchase=====",this.order.ordertype.id);var t={search:123,invoicetype:-104==this.order.ordertype.id||-106==this.order.ordertype.id?"sales":"purchase"};this.common.loading++,this.api.post("Suggestion/GetAllLedgerForInvoice",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.suggestions.purchaseLedgers=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getSupplierLedgers",value:function(){var e=this;console.log("other============",this.order.ordertype.id),this.common.loading++,this.api.post("Suggestion/GetAllLedgerForInvoice",{search:123,invoicetype:"other"}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.suggestions.supplierLedgers=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getInvoiceList",value:function(e){var t=this,n={orderid:e};this.common.loading++,this.api.post("Suggestion/GetInvoiceList",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.suggestions.invoiceList=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getInvoiceDetail",value:function(e){var t=this,n={invoiceId:e};this.common.loading++,this.api.post("Company/getInvoiceDetail",n).subscribe((function(e){console.log("Res:",e.data),t.invoiceDetail=e.data.invoice,t.taxDetailData=e.data.taxdetail,console.log("Invoice detail",t.invoiceDetail[0].y_biltynumber),console.log("Tax Detail",t.taxDetailData),t.order.biltynumber=t.invoiceDetail[0].y_biltynumber,t.order.biltydate=t.common.dateFormatternew(t.invoiceDetail[0].y_biltydatestamp.split(" ")[0]),t.order.grnremarks=t.invoiceDetail[0].y_grn_remarks,t.order.billingaddress=t.invoiceDetail[0].y_vendorbillingaddress,t.order.custcode=t.invoiceDetail[0].y_cust_code,t.order.vendorbidref=t.invoiceDetail[0].y_vendorbidref,t.order.qutationrefrence=t.invoiceDetail[0].y_vendorquotationref,t.order.paymentterms=t.invoiceDetail[0].y_paymentterms,t.order.deliveryterms=t.invoiceDetail[0].y_deliveryterms,t.order.orderremarks=t.invoiceDetail[0].y_order_remarks,t.order.purchaseledger.name=t.invoiceDetail[0].purchaseledger_name,t.order.purchaseledger.id=t.invoiceDetail[0].y_purchaseledgerid,t.order.ledger.id=t.invoiceDetail[0].y_vendorledgerid,t.order.ledger.name=t.invoiceDetail[0].vendorledger_name,t.order.shipmentlocation=t.invoiceDetail[0].y_shipmentlocation,t.order.grnremarks=t.invoiceDetail[0].y_grn_remarks,t.order.delete=0,t.invoiceDetail.map((function(e,n){t.order.amountDetails[n]||t.addAmountDetails(),t.order.amountDetails[n].stockitem.id=e.y_dtl_stockitemid,t.order.amountDetails[n].stockitem.name=e.stockitem_name,t.order.amountDetails[n].stockunit.id=e.y_dtl_stockunitid,t.order.amountDetails[n].stockunit.name=e.stockunit_name,t.order.amountDetails[n].warehouse.id=e.y_dtl_warehouse_id,t.order.amountDetails[n].warehouse.name=e.warehouse_name,t.order.amountDetails[n].qty=e.y_dtl_qty,t.order.amountDetails[n].rate=e.y_dtl_rate,t.order.amountDetails[n].lineamount=e.y_dtl_lineamount,t.order.amountDetails[n].remarks=e.y_invoice_remarks,t.order.amountDetails[n].amount=e.y_dtl_amount,t.order.totalamount+=parseFloat(e.y_dtl_lineamount)})),t.taxDetailData.map((function(e,n){t.order.amountDetails.map((function(t){t.id==e.y_invoicedetails_id&&t.taxDetails.push({taxledger:{name:e.y_ledger_name,id:e.y_ledger_id},taxrate:e.y_rate,taxamount:e.y_amount,totalamount:null})}))})),t.order.amountDetails.map((function(e){var t=0;e.taxDetails.map((function(e){t+=parseInt(e.taxamount)})),e.taxDetails.map((function(e){e.totalamount=t}))})),t.common.loading--}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"selectLedger",value:function(e){console.log("LEDGER: ",e),this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id,this.setFoucus("ledger")}},{key:"handleArrowUpDown",value:function(e){var t=this.generateIDs();console.log("Key:",e,t,t.indexOf(this.activeId)),-1!=t.indexOf(this.activeId)&&("arrowdown"==e?this.suggestionIndex!=this.suggestions.list.length-1?this.suggestionIndex++:this.suggestionIndex=0:0!=this.suggestionIndex?this.suggestionIndex--:this.suggestionIndex=this.suggestions.list.length-1)}},{key:"generateIDs",value:function(){var e=["ordertype","purchaseledger","ledger"];return this.order.amountDetails.map((function(t,n){e.push("stockitem-"+n),e.push("discountledger-"+n),e.push("warehouse-"+n)})),e}},{key:"getSuggestions",value:function(){var e=document.getElementById(this.activeId),t=e&&e.value?e.value.toLowerCase():"",n=[];return"ordertype"==this.activeId?e.value&&(n=this.suggestions.invoiceTypes.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):"purchaseledger"==this.activeId?e.value&&(n=this.suggestions.purchaseLedgers.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):"ledger"==this.activeId?e.value&&(n=this.suggestions.supplierLedgers.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):this.activeId.includes("stockitem")?e.value&&(n=this.suggestions.stockItems.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):this.activeId.includes("discountledger")?e.value&&(n=this.suggestions.purchaseLedgers.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):this.activeId.includes("warehouse")?e.value&&(n=this.suggestions.warehouses.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1):this.activeId.includes("invocelist")&&e.value&&(n=this.suggestions.warehouses.filter((function(e){return e.name.replace(/\./g,"").toLowerCase().includes(t)}))).splice(10,n.length-1),this.suggestions.list=n,this.suggestions.list}},{key:"selectSuggestion",value:function(e,t){if(console.log("Suggestion: ",e),"ordertype"==this.activeId){this.order.ordertype.name=e.name,this.order.ordertype.id=e.id;var n=e.name;"Debit Note"==n&&(this.getInvoiceList(-2),n="Purchase Invoice"),"Credit Note"==n&&(this.getInvoiceList(-4),n="Sales Invoice"),this.getStockItems(n)}else if("ledger"==this.activeId)this.order.ledger.name=e.name,this.order.ledger.id=e.id;else if("purchaseledger"==this.activeId)this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id;else if(this.activeId.includes("stockitem")){var o=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[o].stockitem.name=e.name,this.order.amountDetails[o].stockitem.id=e.id,this.order.amountDetails[o].stockunit.name=e.stockname,this.order.amountDetails[o].stockunit.id=e.stockunit_id}else if(this.activeId.includes("discountledger")){var a=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[a].discountledger.name=e.name,this.order.amountDetails[a].discountledger.id=e.id}else if(this.activeId.includes("warehouse")){var i=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[i].warehouse.name=e.name,this.order.amountDetails[i].warehouse.id=e.id}else this.activeId.includes("invocelist")&&this.getInvoiceDetail(e.id)}},{key:"openledger",value:function(e){var t=this;console.log("ledger123",e),e&&(this.common.params=e),this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){e.response&&t.addLedger(e.ledger)}))}},{key:"addLedger",value:function(e){var t=this;console.log("ledgerdata",e);var n={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertLedger",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getPurchaseLedgers(),t.getSupplierLedgers(),t.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"openStockItemModal",value:function(e){var t=this;console.log("stockitem",e),e&&(this.common.params=e),this.modalService.open(E.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(n){if(n.response){if(e)return;t.addStockItem(n.stockItem)}}))}},{key:"addStockItem",value:function(e){var t=this;console.log(e);var n={foid:123,name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: ",n),this.common.loading++,this.api.post("Stock/InsertStockItem",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getStockItems(t.order.ordertype.name),t.common.showToast("Stock item Saved")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"setAutoSuggestion",value:function(){console.log("-----------------------:",this.suggestions.stockItems,"ww:",this.suggestions.warehouses);var e=document.activeElement.id;if("ordertype"==e)this.autoSuggestion.data=this.suggestions.invoiceTypes;else if("purchaseledger"==e||"salesledger"==e)this.autoSuggestion.data=this.suggestions.purchaseLedgers;else if("ledger"==e)this.autoSuggestion.data=this.suggestions.supplierLedgers;else if(e.includes("stockitem"))this.autoSuggestion.data=this.suggestions.stockItems;else if(e.includes("discountledger"))this.autoSuggestion.data=this.suggestions.purchaseLedgers;else if(e.includes("warehouse")){if(this.autoSuggestion.data=this.suggestions.warehouses,1==this.suggestions.warehouses.length){console.log("where house suggestion",this.suggestions.warehouses[0].id,this.suggestions.warehouses);var t=parseInt(e.split("-")[1]);this.order.amountDetails[t].warehouse.id=this.suggestions.warehouses[0].id,this.order.amountDetails[t].warehouse.name=this.suggestions.warehouses[0].name}}else{if(!e.includes("invocelist"))return this.autoSuggestion.data=[],this.autoSuggestion.display="",void(this.autoSuggestion.targetId="");this.autoSuggestion.data=this.suggestions.invoiceList}this.autoSuggestion.display=e.includes("invocelist")?"cust_code":"name",this.autoSuggestion.targetId=e,console.log("Auto Suggestion: ",this.autoSuggestion)}},{key:"onSelect",value:function(e,t){if(console.log("Suggestion: ",e),"ordertype"==t){this.order.ordertype.name=e.name,this.order.ordertype.id=e.id;var n=e.name;"Debit Note"==n&&(this.getInvoiceList(-2),n="Purchase Invoice"),"Credit Note"==n&&(this.getInvoiceList(-4),n="Sales Invoice"),this.getStockItems(n)}else if("ledger"==t)e?(this.order.ledger.name=e.name,this.order.ledger.id=e.id,e.address_count>1?this.getAddressByLedgerId(e.id):this.order.billingaddress=e.address,this.getLedgerView()):(this.order.ledger.name="",this.order.ledger.id=0);else if("purchaseledger"==t||"salesledger"==t)e?(console.log(">>>>>>>>>",e),this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id,console.log(">>>>>>>>><<<<<<<<<",this.order.purchaseledger.id)):(this.order.purchaseledger.name="",this.order.purchaseledger.id="");else if(t.includes("stockitem")){var o=parseInt(t.split("-")[1]);e?(this.order.amountDetails[o].stockitem.name=e.name,this.order.amountDetails[o].stockitem.id=e.id,this.order.amountDetails[o].stockunit.name=e.stockname,this.order.amountDetails[o].stockunit.id=e.stockunit_id,this.order.ordertype.name.toLowerCase().includes("sales")&&(this.getStockAvailability(e.id,this.order.amountDetails[o].warehouse.id),console.log("suggestion indexing",e),e.is_service&&(this.order.amountDetails[o].qty=1,this.stockitmeflag=!1))):(this.order.amountDetails[o].stockitem.name="",this.order.amountDetails[o].stockitem.id="")}else if(t.includes("discountledger")){var a=parseInt(t.split("-")[1]);this.order.amountDetails[a].discountledger.name=e.name,this.order.amountDetails[a].discountledger.id=e.id}else if(t.includes("warehouse")){var i=parseInt(t.split("-")[1]);e?(this.order.amountDetails[i].warehouse.name=e.name,this.order.amountDetails[i].warehouse.id=e.id):(this.order.amountDetails[i].warehouse.name="",this.order.amountDetails[i].warehouse.id="")}else t.includes("invocelist")&&this.getInvoiceDetail(e.id)}},{key:"findStockitem",value:function(){return this.totalitem}},{key:"openwareHouseModal",value:function(){var e=this;this.common.params=null,this.modalService.open(w.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&e.addWareHouse(t.wareHouse)}))}},{key:"addWareHouse",value:function(e){var t=this;console.log("wareHouse",e);var n={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",n),this.common.loading++,this.api.post("Company/InsertWarehouse",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_warehouse;t.common.showToast(""==n?"Add Successfull  ":n),t.getWarehouses()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getAddressByLedgerId",value:function(e){var t=this;this.api.post("Accounts/GetAddressByLedgerId",{ledgerid:e}).subscribe((function(e){console.log("Res ledger<<<<<<<<<<<<:",e.data),e.data.length>1?t.showAddpopup(e.data):(t.order.billingaddress=e.data[0].address,t.order.ledgeraddressid=e.data[0].id)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getLedgerView",value:function(){var e=this,t={startdate:this.common.dateFormatternew(new Date).split(" ")[0],enddate:this.common.dateFormatternew(new Date).split(" ")[0],ledger:this.order.ledger.id,vouchertype:0};this.common.loading++,this.api.post("Accounts/getLedgerView",t).subscribe((function(t){e.common.loading--,e.ledgerbalance="0"!=t.data[t.data.length-1].y_cramunt?"0.00"!=t.data[t.data.length-1].y_cramunt?parseFloat(t.data[t.data.length-1].y_cramunt).toFixed(2)+" Cr":"0":"0"==t.data[t.data.length-1].y_dramunt?"0":"0.00"!=t.data[t.data.length-1].y_dramunt?parseFloat(t.data[t.data.length-1].y_dramunt).toFixed(2)+" Dr":"0"}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"showAddpopup",value:function(e){var t=this;console.log("data salutaion :: ??",e),this.common.params={addressdata:e},this.modalService.open(P.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){if(e.response)return console.log("data order responce",e),t.order.billingaddress=e.adddata,void(t.order.ledgeraddressid=e.addressid)}))}},{key:"printFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data,"this.order",e.order),e.print(e.order,t.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"print",value:function(e,t){var n=(t[0].phonenumber?" Phone Number -  "+t[0].phonenumber:"")+(t[0].panno?", PAN No -  "+t[0].panno:"")+(t[0].gstno?", GST NO -  "+t[0].gstno:""),o=[],a=0,i=null,r=0,l=0;e.amountDetails.map((function(t,n){var c="",d=0;a+=t.qty,i+=t.amount,l+=t.lineamount,t.taxDetails.map((function(e,t){c+=e.taxledger.name+" : "+e.taxamount+",",d+=e.taxamount}));var s=c.substring(0,c.length-1);r+=d,o.push([{txt:0==n?t.warehouse.name:e.amountDetails[n-1].warehouse.id==t.warehouse.id?"":t.warehouse.name||""},{txt:t.stockitem.name+"("+t.stockunit.name+")</br>"+s||""},{txt:t.qty||""},{txt:t.rate||""},{txt:t.amount||0},{txt:d||0},{txt:t.lineamount||null},{txt:t.remarks||""}]),console.log("invoiceDetail.taxDetails",t.taxDetails)})),o.push([{txt:""},{txt:"Total"},{txt:a||""},{txt:"-"},{txt:i||null},{txt:r||0},{txt:l||0},{txt:""}]);var c={};(e.ordertype.name.toLowerCase().includes("purchase")||e.ordertype.name.toLowerCase().includes("debit note"))&&(c={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Purchase Ledger : ",value:e.purchaseledger.name},{name:"Supplier Ledger : ",value:e.ledger.name},{name:"Supplier Ref. No : ",value:e.vendorbidref},{name:"P.O.No. : ",value:e.qutationrefrence},{name:"Shipment Location : ",value:e.shipmentlocation},{name:"Payment Terms : ",value:e.paymentterms},{name:"Bilty Number : ",value:e.biltynumber},{name:"Bilty Date : ",value:e.biltydate},{name:"Dilivery Terms : ",value:e.deliveryterms},{name:"Billing Address : ",value:e.billingaddress},{name:"Invoice Remarks : ",value:e.orderremarks}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"},{txt:"Rate"},{txt:"Amount"},{txt:"Tax Amount"},{txt:"Total Amount"},{txt:"Remarks"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),e.ordertype.name.toLowerCase().includes("wastage")&&(c={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Purchase Ledger : ",value:e.purchaseledger.name}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),(e.ordertype.name.toLowerCase().includes("sales")||e.ordertype.name.toLowerCase().includes("credit note"))&&(c={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Sales Ledger : ",value:e.purchaseledger.name},{name:"Party Name : ",value:e.ledger.name},{name:"Order No : ",value:e.vendorbidref},{name:"Other Reference : ",value:e.qutationrefrence},{name:"Shipment Location : ",value:e.shipmentlocation},{name:"Payment Terms : ",value:e.paymentterms},{name:"Eway Bill Number : ",value:e.biltynumber},{name:"Eway Bill Date : ",value:e.biltydate},{name:"Dilivery Terms : ",value:e.deliveryterms},{name:"Billing Address : ",value:e.billingaddress},{name:"Consignee Address : ",value:e.grnremarks},{name:"Invoice Remarks : ",value:e.orderremarks}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"},{txt:"Rate"},{txt:"Amount"},{txt:"Tax Amount"},{txt:"Total Amount"},{txt:"Remarks"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),console.log("JSON",c),localStorage.setItem("InvoiceJSO",JSON.stringify(c)),this.printService.printInvoice(c,1),this.order=this.setInvoice()}},{key:"getFreeze",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/getFreeze",{departmentId:0}).subscribe((function(t){e.common.loading--,console.log("freeze Res11:",t.data),e.freezedate=t.data[0].getfreezedate}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"CompareDate",value:function(e){var t=e.split("-");console.log("first date ",t);var n=this.order.date.split("-");console.log("second arr ",n[2]);var o=t[0],a=t[1],i=t[2],r=parseInt(n[2]),l=parseInt(n[1]),c=parseInt(n[0]);return console.log("First Date:",o,a,i),console.log("Second Date:",r,l,c),new Date(o,a,i)>new Date(r,l,c)?0:1}},{key:"mouse",value:function(){this.common.params={vouchertype:this.order.ordertype.id},this.modalService.open(I.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))}},{key:"openinvoicemodel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(console.log("ledger123",e),e){var o={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",o).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),e.data,t.common.params={ledgerdata:e.data,deleted:n,sizeledger:0},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&0==n&&t.addLedger(e.ledger)}))}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}}]),e}()).\u0275fac=function(e){return new(e||xe)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](d.c),h["\u0275\u0275directiveInject"](O.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a))},xe.\u0275cmp=h["\u0275\u0275defineComponent"]({type:xe,selectors:[["orders"]],viewQuery:function(e,t){var n;1&e&&h["\u0275\u0275viewQuery"](T,!0,h.ElementRef),2&e&&h["\u0275\u0275queryRefresh"](n=h["\u0275\u0275loadQuery"]())&&(t.input=n.first)},hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:39,vars:16,consts:[[2,"border","0px"],[1,"row","mt-4"],[1,"col-9","pl-0","pr-0"],[1,"row"],[4,"ngIf"],["id","ledger-container",1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],[3,"data","targetId","display","select"],[1,"invoice_tabel","table","table-bordered",2,"margin-bottom","0!important"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],["class","diffrow","style","background: #d3dbe5 !important;",4,"ngIf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],["type","checkbox","name","print","id","print",3,"ngModel","ngModelChange"],[1,"col-1","text-right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["class","date-modal",4,"ngIf"],[1,"col","pl-0"],[1,"form-group"],["class","ref-label",4,"ngIf"],["autocomplete","off","autocomplete","off","type","text","id","custcode","name","account-custcode","placeholder","Please Enter Invoice Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","autocomplete","off","id","date","name","account-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["class","col pl-0",4,"ngIf"],[1,"ref-label"],["autocomplete","off","type","text","name","account-qutationrefrence","id","qutationrefrence","placeholder","Ref.No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],["type","text","autocomplete","off","autocomplete","off","id","podate","name","po-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","purchaseledger","name","purchaseledger","placeholder","Please Select Purchase Ledger",1,"form-control","ref-input",3,"ngModel","ngModelChange","click","input"],["autocomplete","off","type","text","id","ledger","name","ledger","placeholder","Please Select Supplier Ledger","require","",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-vendorbidref","id","vendorbidref","placeholder","Supplier Reference No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-shipmentlocation","id","shipmentlocation","placeholder","Shipment Location",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-paymentterms","id","paymentterms","placeholder","Payment Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-biltynumber","id","biltynumber","placeholder","Bilty Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","biltydate","name","account-biltydate","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["autocomplete","off","type","text","name","account-deliveryterms","id","deliveryterms","placeholder","Delivery Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["name","account-billingaddress","id","billingaddress","placeholder","Vender Billing Address",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["name","account-orderremarks","id","orderremarks","placeholder","Invoice Remarks",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","name","account-custcode","id","custcode","placeholder","Please Enter Invoice No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","date","name","account-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","vendorbidref","name","account-vendorbidref","placeholder","Order No",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","salesledger","name","purchaseledger","placeholder","Please Select Purchase Ledger",1,"form-control","ref-input",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","ledger","name","ledger","placeholder","Please Enter Party Name","require","",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","paymentterms","name","account-paymentterms","placeholder","Payment Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","biltynumber","name","account-biltynumber","placeholder","Eway Bill Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","deliveryterms","name","account-deliveryterms","placeholder","Delivery Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","name","account-billingaddress","id","billingaddress","placeholder","Party Billing Address",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","id","shipmentlocation","name","account-shipmentlocation","placeholder","Shipment Location",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","name","account-orderremarks","id","orderremarks","placeholder","Invoice Remarks",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","placeholder","Please Select Warehouse",1,"form-control","ref-input",3,"id","name","ngModel","ngModelChange"],["type","text","autocomplete","off","name","'stockitem-' + i","placeholder","Please Select Stock Item","required","",1,"form-control","ref-input",3,"id","ngModel","ngModelChange"],["type","number","autocomplete","off","name","account-qty","placeholder","Please Enter Quantity",1,"ref-input",3,"id","ngModel","input","ngModelChange"],["type","number","autocomplete","off","name","account-rate","placeholder","Please Enter Rate",1,"form-control","ref-input",3,"id","ngModel","ngModelChange","input"],["type","number","autocomplete","off","name","account-amount",1,"form-control","ref-input",3,"id","ngModel","ngModelChange","input"],["type","number","autocomplete","off","name","account-lineamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","name","account-remarks","placeholder","Please Enter Remarks",1,"form-control","ref-input",3,"id","ngModel","ngModelChange"],[1,"btn","btn-taxdet",3,"id","click"],["id","plustransparent",1,"plustransparent","btn","btn-plus",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"diffrow",2,"background","#d3dbe5 !important"],[1,"ref-label",2,"padding","0!important"],["type","text","autocomplete","off","name","account-totalamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","value","ngModelChange"],["type","text","autocomplete","off","name","account-totalamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","ngModelChange"],["type","checkbox","name","mannual","id","mannual",3,"ngModel","ngModelChange"],[1,"date-modal"],[1,"date-modal-body","data_model_save"],[3,"click"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control","ref-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275element"](4,"div",3),h["\u0275\u0275template"](5,U,23,13,"div",4),h["\u0275\u0275template"](6,ee,71,18,"div",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",5),h["\u0275\u0275elementStart"](8,"div",6),h["\u0275\u0275elementStart"](9,"auto-suggetion-in-side",7),h["\u0275\u0275listener"]("select",(function(e){return t.onSelect(e,t.autoSuggestion.targetId)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](10,"div",3),h["\u0275\u0275elementStart"](11,"table",8),h["\u0275\u0275elementStart"](12,"thead",9),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Warehouse"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Qty"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](19,te,2,0,"th",4),h["\u0275\u0275template"](20,ne,2,0,"th",4),h["\u0275\u0275template"](21,oe,2,0,"th",4),h["\u0275\u0275template"](22,ae,2,0,"th",4),h["\u0275\u0275template"](23,ie,1,0,"th",4),h["\u0275\u0275element"](24,"th"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"tbody"),h["\u0275\u0275template"](26,ge,15,15,"tr",10),h["\u0275\u0275template"](27,he,27,7,"tr",11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",12),h["\u0275\u0275elementStart"](29,"div",13),h["\u0275\u0275elementStart"](30,"div",14),h["\u0275\u0275elementStart"](31,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.print=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](32," Print After Save "),h["\u0275\u0275template"](33,ve,3,1,"span",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",16),h["\u0275\u0275elementStart"](35,"button",17),h["\u0275\u0275listener"]("click",(function(){return t.callconfirm()})),h["\u0275\u0275text"](36,"Submit "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](37,fe,11,0,"div",18),h["\u0275\u0275template"](38,be,4,1,"div",18)),2&e&&(h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",t.order.ordertype.name.toLowerCase().includes("purchase")||t.order.ordertype.name.toLowerCase().includes("debit note")||t.order.ordertype.name.toLowerCase().includes("wastage")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.order.ordertype.name.toLowerCase().includes("sales")||t.order.ordertype.name.toLowerCase().includes("credit note")),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("data",t.autoSuggestion.data)("targetId",t.autoSuggestion.targetId)("display",t.autoSuggestion.display),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngForOf",t.order.amountDetails),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.order.print),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.mannual),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",t.showConfirm),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,D.u,V.a,D.t,F.a,F.r,F.u,F.d,F.m,F.C,F.x],styles:["nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}.ledger-container[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:5px;padding:8px;min-height:100px;max-height:390px;overflow:auto}.btn-taxdet[_ngcontent-%COMP%]{color:#26a69a!important}.data_model_save[_ngcontent-%COMP%]{padding:20px;text-align:center;width:auto;max-width:250px}.data_model_save[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:10px 20px;color:#fff;border-radius:3px}.ledger-option[_ngcontent-%COMP%]{border:1px solid #f2f2f2;padding:2px 8px;border-radius:5px;font-size:12px;font-weight:600;margin-bottom:3px}.active-ledger[_ngcontent-%COMP%]{background:#e8f0f3;font-weight:700}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;table-layout:fixed;background-color:#263238;color:#fff;width:100%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px!important;font-weight:400;width:15%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:5%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;table-layout:fixed;overflow:auto;max-height:calc(100vh - 435px)}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:15%;padding:5px 10px!important;font-size:12px}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:14px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-taxdet[_ngcontent-%COMP%]{background-color:#000;color:#fff!important;font-size:12px;padding:3px 7px!important;border-radius:3px!important;cursor:pointer}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}#cancel[_ngcontent-%COMP%]{background-color:#d61414!important}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}input[_ngcontent-%COMP%]:-moz-read-only{background-color:#ccc}input[_ngcontent-%COMP%]:read-only{background-color:#ccc}.diffrow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}"]}),xe),Ce=i("F8Eh"),_e=i("ia/1");function Se(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"h5"),h["\u0275\u0275text"](2,"Stock Types"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"button",10),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275elementStart"](4,"span",11),h["\u0275\u0275text"](5,"\xd7"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function ke(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().index;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n)}}function Me(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.name)}}function Ee(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.code)}}function we(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"date"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,n.entry_dt,"dd-MMM-yy"))}}function Pe(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td",15),h["\u0275\u0275elementStart"](1,"a",16),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](2,"i",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Oe=function(e){return{highlight:e}};function Ie(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",12),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockTypeModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockTypeModal(e)})),h["\u0275\u0275template"](1,ke,2,1,"td",13),h["\u0275\u0275template"](2,Me,2,1,"td",13),h["\u0275\u0275template"](3,Ee,2,1,"td",13),h["\u0275\u0275template"](4,we,3,4,"td",13),h["\u0275\u0275template"](5,Pe,3,0,"td",14),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Oe,i.selectedRow==a)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.id)}}function De(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",18),h["\u0275\u0275elementStart"](1,"div",19),h["\u0275\u0275elementStart"](2,"div",20),h["\u0275\u0275elementStart"](3,"button",21),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Ve,Fe=((Ve=function(){function e(t,n,o,i,r){a(this,e),this.activeModal=t,this.api=n,this.common=o,this.user=i,this.modalService=r,this.stockTypes=[],this.selectedRow=-1,this.activeId="",this.pageName="",this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockTypes(),this.common.currentPage="Stock Types",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getStockTypes()}},{key:"getStockTypes",value:function(){var e=this;this.common.loading++,this.api.post("Stock/GetStocktype",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t),e.stockTypes=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openStockTypeModal",value:function(e){var t=this;e?(console.log("data:",e),this.common.params=e,this.modalService.open(Ce.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){if(n.response){var o={name:n.stockType.name,code:n.stockType.code,id:e.id,isservice:n.stockType.isservice};console.log("params1",o),t.common.loading++,t.api.post("Stock/UpdateStockType",o).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_stocktype;t.common.showToast(""==n?" Stock Type Update":n),t.getStockTypes()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}))):(this.common.params=null,this.modalService.open(Ce.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addStockType(e.stockType)})))}},{key:"openEditStockTypeModal",value:function(e){console.log(e)}},{key:"addStockType",value:function(e){var t=this,n={name:e.name,code:e.code,isservice:e.isservice};this.common.loading++,this.api.post("Stock/InsertStockType",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_stocktype;t.common.showToast(""==n?" Stock Type Add":n),t.getStockTypes()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.stockTypes.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockTypes.length-1&&this.selectedRow++)}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"stocktype"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getStockTypes(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}}]),e}()).\u0275fac=function(e){return new(e||Ve)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},Ve.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Ve,selectors:[["stock-types"]],decls:22,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered","stocktype_tabel"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],["class","del",4,"ngIf"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275template"](2,Se,6,0,"div",1),h["\u0275\u0275elementStart"](3,"button",2),h["\u0275\u0275listener"]("click",(function(){return t.openStockTypeModal()})),h["\u0275\u0275element"](4,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"table",5),h["\u0275\u0275elementStart"](7,"thead",6),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"tbody"),h["\u0275\u0275template"](20,Ie,6,8,"tr",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](21,De,5,0,"div",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.stockTypes),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName))},directives:[b.s,b.r,D.u,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:30%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:25%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:30%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:30%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:25%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),Ve),Te=i("1MnW");function Be(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"h5"),h["\u0275\u0275text"](2,"Stock Sub Types"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"button",10),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275elementStart"](4,"span",11),h["\u0275\u0275text"](5,"\xd7"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Ae=function(e){return{highlight:e}};function Le(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",12),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockSubTypeModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockSubTypeModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td",13),h["\u0275\u0275elementStart"](13,"a",14),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](14,"i",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](9,Ae,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stocktypename),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,6,o.entry_dt,"dd-MMM-yy"))}}function Re(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"div",18),h["\u0275\u0275elementStart"](3,"button",19),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var je,ze=((je=function(){function e(t,n,o,i){a(this,e),this.activeModal=t,this.api=n,this.modalService=o,this.common=i,this.stockSubTypes=[],this.selectedName="",this.selectedRow=-1,this.activeId="",this.pageName="",this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockSubTypes(),this.common.currentPage="Stock Sub Types",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getStockSubTypes()}},{key:"getStockSubTypes",value:function(){var e=this;this.common.loading++,this.api.post("Stock/getStockSubTypes",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t),e.stockSubTypes=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openStockSubTypeModal",value:function(e){var t=this;e&&(this.common.params=e),this.modalService.open(Te.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){if(n.response){if(e)return void t.updateStockSubType(e.id,n.stockSubType);t.addStockSubType(n.stockSubType)}}))}},{key:"addStockSubType",value:function(e){var t=this,n={name:e.name,code:e.code,stockid:e.stockType.id};this.common.loading++,this.api.post("Stock/InsertStocksubType",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_stocksubtype;t.common.showToast(""==n?" Stock SubType Add":n),t.getStockSubTypes()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateStockSubType",value:function(e,t){var n=this;console.log("test"),console.log(t);var o={name:t.name,code:t.code,stockid:t.stockType.id,id:e};this.common.loading++,this.api.post("Stock/updateStocksubType",o).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_stocksubtype;n.common.showToast(""==t?" Stock SubType Update":t),n.getStockSubTypes()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.stockSubTypes.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockSubTypes.length-1&&this.selectedRow++)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"stocksubtype"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getStockSubTypes(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}}]),e}()).\u0275fac=function(e){return new(e||je)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](C.a))},je.\u0275cmp=h["\u0275\u0275defineComponent"]({type:je,selectors:[["stock-subtypes"]],decls:24,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered","stocksubtype_tabel"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275template"](2,Be,6,0,"div",1),h["\u0275\u0275elementStart"](3,"button",2),h["\u0275\u0275listener"]("click",(function(){return t.openStockSubTypeModal()})),h["\u0275\u0275element"](4,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"table",5),h["\u0275\u0275elementStart"](7,"thead",6),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"S.no"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"th"),h["\u0275\u0275text"](20,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"tbody"),h["\u0275\u0275template"](22,Le,15,11,"tr",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](23,Re,5,0,"div",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](20),h["\u0275\u0275property"]("ngForOf",t.stockSubTypes),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName))},directives:[b.s,b.r,D.u,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:25%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}svg[_ngcontent-%COMP%]{font-size:14px;text-align:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),je);function Ne(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"h5"),h["\u0275\u0275text"](2,"Stock Items"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"button",10),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275elementStart"](4,"span",11),h["\u0275\u0275text"](5,"\xd7"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Ge=function(e){return{highlight:e}};function Ye(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",12),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockItemModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openStockItemModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275pipe"](15,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"td",13),h["\u0275\u0275elementStart"](17,"a",14),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](18,"i",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,Ge,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stocktype_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stoctsubtypename),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.alias_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.is_service?"Yes":"No"),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](15,8,o.entry_dt,"dd-MMM-yy"))}}function He(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"div",18),h["\u0275\u0275elementStart"](3,"button",19),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var $e,qe=(($e=function(){function e(t,n,o,i,r){a(this,e),this.activeModal=t,this.api=n,this.common=o,this.user=i,this.modalService=r,this.StockItems=[],this.selectedRow=-1,this.activeId="",this.pageName="",this.sizeIndex=0,this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockItems(),this.common.currentPage="Stock Item",this.common.refresh=this.refresh.bind(this),this.common.params&&this.common.params.pageName&&this.common.handleModalSize("class","modal-lg","1150","px",this.sizeIndex)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getStockItems()}},{key:"getStockItems",value:function(){var e=this;this.common.loading++,this.api.post("Stock/GetStockItem",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res new:",t.data),e.StockItems=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openStockItemModal",value:function(e){var t=this;console.log("stockitem close time",e),e?(this.pageName&&(e.sizeIndex=1),this.common.params=e,this.modalService.open(E.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){if(n.response){console.log("after modal close :",n.stockItem);var o={foid:123,name:n.stockItem.name,code:n.stockItem.code,stocksubtypeid:n.stockItem.stockSubType.id,sales:n.stockItem.sales,purchase:n.stockItem.purchase,minlimit:n.stockItem.minlimit,maxlimit:n.stockItem.maxlimit,isactive:n.stockItem.isactive,inventary:n.stockItem.inventary,stockunit:n.stockItem.unit.id,stockItemid:e.id,gst:n.stockItem.gst,details:n.stockItem.details,hsnno:n.stockItem.hsnno,isnon:n.stockItem.isnon,cess:n.stockItem.cess,igst:n.stockItem.igst,taxability:n.stockItem.taxability,calculationtype:n.stockItem.calculationtype,openinngbal:n.stockItem.openingbal,openingqty:n.stockItem.openingqty};console.log("paramsans: ",o),t.common.loading++,t.api.post("Stock/UpdateStockItem",o).subscribe((function(e){t.common.loading--,console.log("res: update ",e.data[0].save_stockitem);var n=e.data[0].save_stockitem;t.common.showToast(n.success?"Stock item Update Succefully":n),t.getStockItems()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}))):(this.pageName&&(this.sizeIndex=1),this.common.params={sizeIndex:this.sizeIndex},this.modalService.open(E.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addStockItem(e.stockItem)})))}},{key:"addStockItem",value:function(e){var t=this;console.log(e);var n={foid:123,name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: stocks ",n),this.common.loading++,this.api.post("Stock/InsertStockItem",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.success?"Stock item Added Successfully":e.data[0].save_stockitem),t.getStockItems()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.StockItems.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.StockItems.length-1&&this.selectedRow++)}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"stockitem"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getStockItems(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}}]),e}()).\u0275fac=function(e){return new(e||$e)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},$e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:$e,selectors:[["stockitems"]],decls:28,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main","table-responsive"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275template"](2,Ne,6,0,"div",1),h["\u0275\u0275elementStart"](3,"button",2),h["\u0275\u0275listener"]("click",(function(){return t.openStockItemModal()})),h["\u0275\u0275element"](4,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"table",5),h["\u0275\u0275elementStart"](7,"thead",6),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Alias Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"th"),h["\u0275\u0275text"](20,"Is Sevice"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"th"),h["\u0275\u0275text"](22,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"th"),h["\u0275\u0275text"](24,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"tbody"),h["\u0275\u0275template"](26,Ye,19,13,"tr",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](27,He,5,0,"div",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](24),h["\u0275\u0275property"]("ngForOf",t.StockItems),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName))},directives:[b.s,b.r,D.u,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),$e),Ke=i("Mz6N");function Ue(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"h5"),h["\u0275\u0275text"](2,"Account Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"button",10),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275elementStart"](4,"span",11),h["\u0275\u0275text"](5,"\xd7"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var We=function(e){return{highlight:e}};function Qe(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",12),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openAccountModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openAccountModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td",13),h["\u0275\u0275elementStart"](11,"a",14),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](12,"i",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,We,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.parent_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,5,o.entry_dt,"dd-MMM-yy"))}}function Je(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"div",18),h["\u0275\u0275elementStart"](3,"button",19),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Xe,Ze=((Xe=function(){function e(t,n,o,i,r){a(this,e),this.activeModal=t,this.api=n,this.common=o,this.user=i,this.modalService=r,this.title="",this.Accounts=[],this.pageName="",this.staticCondition=0,this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.staticCondition=1),this.GetAccount(),this.common.currentPage="Account",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.GetAccount()}},{key:"GetAccount",value:function(){var e=this,t={foid:123,staticCondition:this.staticCondition};this.common.loading++,this.api.post("Accounts/GetAccount",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.Accounts=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openAccountModal",value:function(e){var t=this;e?(console.log("Accounts",e),this.common.params=e,this.modalService.open(Ke.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){n.response&&t.updateAccount(n.Accounts,e.id)}))):(this.common.params=null,this.modalService.open(Ke.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addAccount(e.Accounts)})))}},{key:"addAccount",value:function(e){var t=this;console.log("accountdata",e);var n={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertAccount",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_secondarygroup;t.common.showToast(""==n?"Add Successfull":n),t.GetAccount()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateAccount",value:function(e,t){var n=this;console.log("updated data",e);var o={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:t};console.log("params11: ",o),this.common.loading++,this.api.post("Accounts/InsertAccount",o).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_secondarygroup;n.common.showToast(""==t?"Updated Successfull":t),n.GetAccount()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"secondary_group"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.GetAccount(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}}]),e}()).\u0275fac=function(e){return new(e||Xe)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},Xe.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Xe,selectors:[["account"]],decls:22,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275template"](2,Ue,6,0,"div",1),h["\u0275\u0275elementStart"](3,"button",2),h["\u0275\u0275listener"]("click",(function(){return t.openAccountModal()})),h["\u0275\u0275element"](4,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"table",5),h["\u0275\u0275elementStart"](7,"thead",6),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Parent Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"tbody"),h["\u0275\u0275template"](20,Qe,13,10,"tr",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](21,Je,5,0,"div",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.Accounts),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName))},directives:[b.s,b.r,D.u,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),Xe),et=i("oAJy");function tt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275elementStart"](1,"h5"),h["\u0275\u0275text"](2,"Ledgers"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"button",11),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275elementStart"](4,"span",12),h["\u0275\u0275text"](5,"\xd7"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function nt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",13),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().openModal()})),h["\u0275\u0275element"](1,"i",14),h["\u0275\u0275elementEnd"]()}}function ot(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275elementStart"](1,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.search=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().jrxSearch(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.search)("placeholder",o.name)}}function at(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.is_constcenterallow)}}function it(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",18),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.is_constcenterallow=e}))("change",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"]().updateLedgerCostCenter(e,t.id)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("value",o.is_constcenterallow)("ngModel",o.is_constcenterallow)}}var rt=function(e){return{highlight:e}};function lt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",16),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"]();return 2!=o.deletedId?o.openModal(e):""}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](9,at,2,1,"td",17),h["\u0275\u0275template"](10,it,2,2,"td",17),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275pipe"](13,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,rt,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1+(i.pages.active-1)*i.accountService.perPage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.groupname),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.alias_name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",2!=i.deletedId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",2==i.deletedId),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](13,8,o.entry_dt,"dd-MMM-yy"))}}function ct(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",19),h["\u0275\u0275elementStart"](1,"div",20),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275elementStart"](3,"button",22),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function dt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",29),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).jrxPagination(e)})),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",o==a.pages.active?"active-page":""),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](o)}}function st(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",23),h["\u0275\u0275elementStart"](1,"div",24),h["\u0275\u0275elementStart"](2,"button",25),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active-1)})),h["\u0275\u0275text"](3,"Pre"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,dt,2,2,"button",26),h["\u0275\u0275elementStart"](5,"button",25),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active+1)})),h["\u0275\u0275text"](6,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",27),h["\u0275\u0275elementStart"](8,"input",28),h["\u0275\u0275listener"]("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pages.limit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("disabled",1==o.pages.active),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.common.generateArray(o.pages.count)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("disabled",o.pages.active==o.pages.count),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.pages.limit)}}var mt,ut=((mt=function(){function e(t,n,o,i,r,l,c,d){var s=this;a(this,e),this.activeModal=t,this.api=n,this.common=o,this.route=i,this.user=r,this.router=l,this.modalService=c,this.accountService=d,this.Ledgers=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Under Group",key:"groupname",search:""},{name:"Name",key:"name",search:""},{name:"Alias Name",key:"alias_name",search:""},{name:"Cost Center Allow",key:"is_constcenterallow",search:""},{name:"Date",key:"entry_dt",search:""}],this.searchedData=[],this.selectedRow=-1,this.common.refresh=this.refresh.bind(this),et.getItem("ledgers_data").then((function(e){e&&(s.Ledgers=e,s.filterData())})),this.route.params.subscribe((function(e){e.id&&(s.deletedId=parseInt(e.id),s.GetLedger()),s.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}})),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(),this.sizeledger=1),this.common.currentPage=2==this.deletedId?"Cost Category Ledger":"Ledger",this.common.handleModalSize("class","modal-lg","1250","px",0)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.GetLedger()}},{key:"GetLedger",value:function(){var e=this,t={foid:123,deleted:this.deletedId};this.common.loading++,this.api.post("Accounts/GetLedgerdata",t).subscribe((function(t){e.common.loading--,e.Ledgers=t.data,e.filterData(),e.Ledgers.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"filterData",value:function(){this.pages.count=Math.floor(this.Ledgers.length/this.pages.limit),this.Ledgers.length%this.pages.limit&&this.pages.count++,console.log("length calculate ---",this.Ledgers.length,this.pages.count),et.setItem("ledgers_data",this.Ledgers),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}},{key:"jrxPagination",value:function(e,t){this.pages.active=e;var n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.Ledgers.slice(n,o),console.log("pagination",this.accountService.perPage,this.pages.active)}},{key:"jrxPageLimitReset",value:function(){var e=this;this.jrxPageTimer=setTimeout((function(){if("string"==typeof e.pages.limit&&(e.pages.limit=parseInt(e.pages.limit)||0),!e.pages.limit||e.pages.limit<100)return e.pages.limit=e.accountService.perPage,void e.common.showError("Minimum per page limit 100");e.pages.count=Math.floor(e.Ledgers.length/e.pages.limit),e.Ledgers.length%e.pages.limit&&e.pages.count++,e.accountService.perPage=e.pages.limit,localStorage.setItem("per_page",e.accountService.perPage.toString()),e.jrxPagination(e.pages.active<e.pages.count?e.pages.active:e.pages.count)}),500)}},{key:"jrxSearch",value:function(e){var t=this;clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout((function(){if(t.searchedData=[],e.search){for(var n=0;n<t.Ledgers.length;n++)t.Ledgers[n][e.key]&&("y_date"===e.key&&t.common.changeDateformat(t.Ledgers[n][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||t.Ledgers[n][e.key].toLowerCase().includes(e.search.toLowerCase()))&&t.searchedData.push(t.Ledgers[n]);t.pages.count=Math.floor(t.searchedData.length/t.pages.limit),t.Ledgers.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count,t.searchedData)}else t.searchedData=[],t.pages.count=Math.floor(t.Ledgers.length/t.pages.limit),t.Ledgers.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count)}),500)}},{key:"updateLedgerCostCenter",value:function(e,t){var n=this,o={ledgerid:t,ladgervalue:e.target.checked};this.common.loading++,this.api.post("Accounts/SaveLedgerCostCenter",o).subscribe((function(e){n.common.loading--,n.common.showToast(e.data[0].y_errormsg)}),(function(e){n.common.loading--,n.common.showError()}))}},{key:"openModal",value:function(e){var t=this;if(e){var n={id:e.id,foid:e.foid};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe((function(e){t.common.loading--,e.data,t.common.params={ledgerdata:e.data,deleted:t.deletedId,sizeledger:t.sizeledger},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(e.ledger?t.addLedger(e.ledger):t.GetLedger())}))}),(function(e){t.common.loading--,t.common.showError()}))}else this.common.params=null,this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addLedger(e.ledger)}))}},{key:"addLedger",value:function(e){var t=this,n={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};this.common.loading++,this.api.post("Accounts/InsertLedger",n).subscribe((function(e){t.common.loading--,t.GetLedger(),t.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"RowSelected",value:function(e){this.selectedName=e}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}}]),e}()).\u0275fac=function(e){return new(e||mt)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](d.c),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a))},mt.\u0275cmp=h["\u0275\u0275defineComponent"]({type:mt,selectors:[["ledgers"]],decls:15,vars:6,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],["class","btn mb-4 add-button",3,"click",4,"ngIf"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],["type","checkbox",3,"value","ngModel","ngModelChange","change"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275template"](2,tt,6,0,"div",1),h["\u0275\u0275template"](3,nt,2,0,"button",2),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"table",4),h["\u0275\u0275elementStart"](6,"thead",5),h["\u0275\u0275elementStart"](7,"tr"),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](10,ot,2,2,"th",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"tbody"),h["\u0275\u0275template"](12,lt,14,13,"tr",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](13,ct,5,0,"div",8),h["\u0275\u0275template"](14,st,9,4,"div",9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.deletedId),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",t.filters),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",t.data),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pages.count>=1))},directives:[b.s,b.r,D.u,D.t,F.d,F.r,F.u,D.r,F.a],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:2px 4px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;color:#fff;font-size:10px}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:170px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:440px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:170px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:55px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:440px;word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.customPage[_ngcontent-%COMP%]{font-size:10px!important;padding:1px 5px!important;width:60px;border:1px solid}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),mt),pt=i("DYn/");function gt(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("",n.province_name," ( ",n.gst_state_code," )")}}function ht(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function vt(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1,"Yes"),h["\u0275\u0275elementEnd"]())}function ft(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1,"No"),h["\u0275\u0275elementEnd"]())}var bt=function(e){return{highlight:e}};function xt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",7),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](7,gt,2,2,"td",8),h["\u0275\u0275template"](8,ht,1,0,"td",8),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](11,vt,2,0,"td",8),h["\u0275\u0275template"](12,ft,2,0,"td",8),h["\u0275\u0275elementStart"](13,"td",9),h["\u0275\u0275elementStart"](14,"a",10),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](15,"i",11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](9,bt,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.email),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.province_name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!o.province_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.mobilenumber),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.is_inv_manualapprove),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!o.is_inv_manualapprove)}}var yt,Ct=((yt=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.Branches=[],this.GetBranchData(),this.common.currentPage="Company Branches",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.GetBranchData()}},{key:"GetBranchData",value:function(){var e=this;this.common.loading++,this.api.post("Company/GetCompanyBranch",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.Branches=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openModal",value:function(e){var t=this;e?(console.log("Branch ",e),this.common.params=e,this.modalService.open(pt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){n.response&&e&&t.updatebranch(n.Branch,e.id)}))):(this.common.params=null,this.modalService.open(pt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){e.response&&t.addbranch(e.Branch)})))}},{key:"addbranch",value:function(e){var t=this;console.log("branch:",e);var n={foid:123,name:e.name,code:e.code,addressline:e.addressline,email:e.email,exciseno:e.exciseno,faxnumber:e.faxnumber,gstno:e.gstno,importexportno:e.importexportno,isactive:e.isactive,mobilenumber:e.mobilenumber,panno:e.panno,phonenumber:e.phonenumber,remarks:e.remarks,tanno:e.tanno,tinno:e.tinno,tollfreenumber:e.tollfreenumber,taxexemptionno:e.taxexemptionno,x_lr_terms:e.lrTerm,x_lr_footer:e.lrFooter,x_is_constcenterallow:e.constcenter,x_id:0,siteid:e.site.id,latitude:e.latitude,longitude:e.longitude,precode:e.precode,lrcodewidth:e.lrcodewidth,lrcodelastid:e.lrcodelastid,mannual:"'"+e.mannual+"'",cityid:e.city.id};console.log("finalbranch :",n),this.common.loading++,this.api.post("Company/InsertCompanyBranch",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_companybranch;""==n?(t.common.showToast(" Add Successfully"),t.GetBranchData(),t.getBranches()):t.common.showToast(n)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getBranches",value:function(){var e=this;this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){console.log("Branches :",t.data),e.accountService.branches=t.data}),(function(e){console.log("Error: ",e)}))}},{key:"updatebranch",value:function(e,t){var n=this;console.log("branch:",e);var o={foid:123,name:e.name,code:e.code,addressline:e.addressline,email:e.email,exciseno:e.exciseno,faxnumber:e.faxnumber,gstno:e.gstno,importexportno:e.importexportno,isactive:e.isactive,mobilenumber:e.mobilenumber,panno:e.panno,phonenumber:e.phonenumber,remarks:e.remarks,tanno:e.tanno,tinno:e.tinno,tollfreenumber:e.tollfreenumber,taxexemptionno:e.taxexemptionno,x_lr_terms:e.lrTerm,x_lr_footer:e.lrFooter,x_is_constcenterallow:e.constcenter,x_id:t,siteid:e.site.id,latitude:e.latitude,longitude:e.longitude,precode:e.precode,lrcodewidth:e.lrcodewidth,lrcodelastid:e.lrcodelastid,mannual:"'"+e.mannual+"'",cityid:e.city.id};console.log("finalbranch :",o),this.common.loading++,this.api.post("Company/InsertCompanyBranch",o).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_companybranch;""==t?(n.common.showToast(" Update Successfully"),n.getBranches()):n.common.showToast(t),n.GetBranchData()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"companybranch"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.GetBranchData(),t.common.showToast(" This Value Has been Deleted!"),t.getBranches()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}}]),e}()).\u0275fac=function(e){return new(e||yt)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},yt.\u0275cmp=h["\u0275\u0275defineComponent"]({type:yt,selectors:[["company-branches"]],decls:24,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"button",1),h["\u0275\u0275listener"]("click",(function(){return t.openModal()})),h["\u0275\u0275element"](3,"i",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"table",4),h["\u0275\u0275elementStart"](6,"thead",5),h["\u0275\u0275elementStart"](7,"tr"),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"th"),h["\u0275\u0275text"](13,"Email"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"th"),h["\u0275\u0275text"](15,"State"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"th"),h["\u0275\u0275text"](17,"Mobile No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"th"),h["\u0275\u0275text"](19,"Approve Mannual"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"th"),h["\u0275\u0275text"](21,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"tbody"),h["\u0275\u0275template"](23,xt,16,11,"tr",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](23),h["\u0275\u0275property"]("ngForOf",t.Branches))},directives:[b.s,b.r,D.t,D.r,D.u],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px;overflow:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:22px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:152px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:233px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:129px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:27px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:148px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:241px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child(){width:130px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%}"]}),yt),_t=i("MCLT"),St=i("kb3O"),kt=i("iJpb"),Mt=i("3qNt");function Et(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"span"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"]("",n.ledger.name,": \xa0 \xa0"),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.amount)}}function wt(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"i"),h["\u0275\u0275text"](2,"Cur Bal: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().index,o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",o.ledgerbalance[n],"")}}function Pt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",25),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275elementStart"](2,"select",26),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.transactionType=e}))("change",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().calculateTotal()}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().lastActiveId="transaction-type-"+e})),h["\u0275\u0275elementStart"](3,"option",27),h["\u0275\u0275text"](4,"Debit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"option",28),h["\u0275\u0275text"](6,"Credit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275elementStart"](8,"input",29),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.ledger.name=e}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.lastActiveId="ledger-"+e,o.allowBackspace=!1}))("input",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div"),h["\u0275\u0275template"](10,Et,5,2,"div",30),h["\u0275\u0275template"](11,wt,4,1,"span",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275elementStart"](13,"input",31),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().lastActiveId="amount-"+e}))("input",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.calculateTotal(e),o.allowBackspace=!1}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.amount=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275elementStart"](15,"button",32),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().deleterow(e)})),h["\u0275\u0275element"](16,"i",33),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("id","transaction-type-"+a)("name","transaction-type-"+a)("ngModel",o.transactionType),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("id","ledger-"+a)("name","ledger-"+a)("ngModel",o.ledger.name),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.details),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",i.ledgerbalance[a]),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("id","amount-"+a)("name","amount-"+a)("ngModel",o.amount)}}function Ot(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"input",34),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().voucher.ismanual=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](2," Is Mannual Approval"),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.voucher.ismanual)}}function It(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().selectLedger(e)})),h["\u0275\u0275elementStart"](1,"span"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",i.activeLedgerIndex==a?"active-ledger":""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_ledger_name)}}function Dt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",36),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",37),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",38),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().voucher.date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.voucher.date)}}function Vt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",36),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",39),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"p"),h["\u0275\u0275text"](4,"Are you want to save ?"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"button",40),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().dismiss(!0)})),h["\u0275\u0275text"](6,"Yes"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8,"\xa0\xa0\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"button",40),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](10,"No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Ft(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",41),h["\u0275\u0275elementStart"](1,"div",39),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"p"),h["\u0275\u0275text"](4,"Are you sure want to cost center entry?"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"button",40),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().vouchercostcenter()})),h["\u0275\u0275text"](6,"Yes"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8,"\xa0\xa0\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"button",40),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](10,"No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var Tt,Bt=((Tt=function(){function e(t,n,o,i,r,l,c,d){var s=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.router=r,this.modalService=l,this.accountService=c,this.pdfService=d,this.Vouchers=[],this.voucherId="",this.voucherName="",this.voucher=null,this.ledgers={credit:[],debit:[],suggestions:[]},this.currentbalance=0,this.balances={},this.showConfirm=!1,this.showConfirmCostCenter=!1,this.showSuggestions=!1,this.lastActiveId="",this.allowBackspace=!0,this.showDateModal=!1,this.freezedate="",this.date=this.common.dateFormatternew(new Date),this.activeLedgerIndex=-1,this.modal=null,this.mannual=!1,this.ledgerbalance=[],this.common.refresh=this.refresh.bind(this),this.voucher=this.setVoucher(),this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(s.voucherId=e.id,s.voucherName=e.name,s.getVouchers()),s.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}})),this.getLedgers("debit"),this.getLedgers("credit"),this.voucher=this.setVoucher(),this.common.currentPage=this.voucherName,this.mannual=this.accountService.selected.branch.is_inv_manualapprove,setTimeout((function(){console.log("financial year",s.accountService.selected.branch.is_constcenterallow)}),4e3),this.voucher.ismanual=this.accountService.selected.branch.is_inv_manualapprove,this.getFreeze()}var t,n;return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getLedgers("debit"),this.getLedgers("credit"),this.mannual=this.accountService.selected.branch.is_inv_manualapprove,this.voucher.ismanual=this.mannual}},{key:"setVoucher",value:function(){return{name:"",print:!1,date:this.accountService.voucherDate||this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),foid:"",user:{name:"",id:""},vouchertypeid:"",amountDetails:[{transactionType:"-4"==this.voucherId||"-2"==this.voucherId?"credit":"debit",ledger:{name:"",id:""},amount:0,details:[]}],code:"",remarks:"",total:{debit:0,credit:0},ismanual:this.mannual}}},{key:"getVouchers",value:function(){var e=this,t={voucherId:this.voucherId};this.common.loading++,this.api.post("Voucher/GetVouchersData",t).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.Vouchers=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getFreeze",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/getFreeze",{departmentId:0}).subscribe((function(t){e.common.loading--,console.log("freeze Res11:",t.data),e.freezedate=t.data[0].getfreezedate}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openVoucherModal",value:function(e){}},{key:"modelCondition",value:function(){this.showConfirm=!1,this.showConfirmCostCenter=!1,event.preventDefault()}},{key:"dismiss",value:(n=o(regeneratorRuntime.mark((function e(t){var n,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("DD: ",this.common.dateFormatter(this.common.convertDate(this.voucher.date),"y",!1)),console.log("DD: ",this.accountService.selected.financialYear.startdate),console.log("DD: ",this.accountService.selected.financialYear.enddate),this.showConfirm=!1,this.showConfirmCostCenter=!1,!t){e.next=20;break}if(console.log("Voucher:",this.voucher),!t||this.voucher.total.debit===this.voucher.total.credit){e.next=5;break}this.common.showError("Credit And Debit Amount Should be Same"),e.next=18;break;case 5:if(!t||0!=this.voucher.total.debit){e.next=7;break}return e.abrupt("return",(this.common.showError("Please Enter Amount"),this.showConfirm=!1,void event.preventDefault()));case 7:if(1==this.accountService.selected.financialYear.isfrozen){e.next=17;break}if(!((n=this.common.dateFormatter(this.common.convertDate(this.voucher.date),"y",!1))<this.accountService.selected.financialYear.startdate||n>this.accountService.selected.financialYear.enddate)){e.next=11;break}return e.abrupt("return",void this.common.showError("Please Select Correct Financial Year"));case 11:if(console.log("acc service",this.accountService.selected.branch,0!=this.accountService.selected.branch.id),0==this.accountService.selected.branch.id){e.next=14;break}return this.freezedate&&(o=this.CompareDate(this.freezedate),console.log("heddlo",o),0==o?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout((function(){a.setFoucus("voucher-date")}),150)):(console.log("hello testx"),this.addVoucher())),e.abrupt("return",(this.showConfirm=!1,void event.preventDefault()));case 14:alert("Please Select Branch"),e.next=18;break;case 17:this.common.showError("This financial year is freezed. Please select currect financial year");case 18:e.next=21;break;case 20:this.showConfirm=!1;case 21:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"addVoucher",value:function(){var e=this;console.log("voucher 1 :",this.voucher);var t={foid:this.voucher.user.id,customercode:this.voucher.code,remarks:this.voucher.remarks,date:this.voucher.date,amountDetails:this.voucher.amountDetails,vouchertypeid:this.voucherId,y_code:"",ismannual:this.voucher.ismanual,xid:0};console.log("params 1 : ",t),this.common.loading++,this.api.post("Voucher/InsertVoucher",t).subscribe((function(t){e.common.loading--,console.log("return vouher id: ",t.data),t.success&&(e.accountService.voucherDate=e.voucher.date,t.data[0].save_voucher_v1?(e.voucher.print&&e.printVoucher(e.voucher,t.data.companydata),e.voucher=e.setVoucher(),e.getVouchers(),e.common.showToast("Your Code :"+t.data.code),e.setFoucus("ref-code")):e.common.showError("Failed: "+t.msg+(t.data.code?", Code: "+t.data.code:"")))}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"printVoucher",value:function(e,t){console.log("print company data",t),console.log("print data voucher",e);var n=[];e.amountDetails.map((function(e){n.push("debit"==e.transactionType?[e.ledger.name,e.amount,""]:[e.ledger.name,"",e.amount])}));var o={company:t[0].foname,address:t[0].addressline,city:(t[0].phonenumber?" Phone Number -  "+t[0].phonenumber:"")+(t[0].panno?", PAN No -  "+t[0].panno:"")+(t[0].gstno?", GST NO -  "+t[0].gstno:""),reportName:this.voucherName,details:[{name:"Voucher Number",value:e.code},{name:"Branch",value:t[0].branchname},{name:"Voucher Date",value:e.date}],headers:[{name:"Particulars",textAlign:"left"},{name:"Debit Amount",textAlign:"right"},{name:"Credit Amount",textAlign:"right"}],table:n,total:[e.total.credit,e.total.debit],inWords:this.pdfService.convertNumberToWords(e.total.debit),narration:e.remarks};console.log("print pdf data",o);var a=this.pdfService.createPdfHtml(o).innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto");i.document.open(),i.document.write('\n        <html>\n        <head>\n        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />\n          <style>\n          .voucher-pdf {\n            width: 210mm;\n            padding: 10mm;\n            padding-left: 10mm;\n            padding-right: 10mm;\n        }\n        \n      .voucher-company {\n            font-size: 16px;\n            font-weight: 500;\n            letter-spacing: .5px;\n            margin-bottom: 4px;\n            text-align: center;\n            font-weight: bold;\n            margin-top: 20px;\n        }\n        \n        .voucher-pdf table {\n            width: 100%;\n            margin-top: 6px;\n        }\n        \n        .table,\n        .table-bordered>tbody>tr>td,\n        .table-bordered>tbody>tr>th,\n        .table-bordered>tfoot>tr>td,\n        .table-bordered>tfoot>tr>th,\n        .table-bordered>thead>tr>td,\n        .table-bordered>thead>tr>th {\n            border-color: #444;\n        }\n        \n        .voucher-name {\n            text-align: center;\n            font-size: 20px;\n            font-weight: bold;\n            padding: 10px;\n        }\n        \n        .voucher-details {\n            font-size: 16px;\n            margin-bottom: 5px;\n        }\n        \n        .voucher-details strong {\n            margin-right: 8px;\n        }\n        \n        ..voucher-footer {\n            margin-top: 40px;\n            font-size: 15px;\n            text-align: center;\n        }\n        \n        .voucher-signature div {\n            border-top: 2px solid #000;\n        }\n          </style>\n        </head>\n        <body onload="window.print();window.close()">\n          <div class="container">'.concat(a,"<div>\n        </body>\n        </html>\n        ")),i.document.close()}},{key:"onSelected",value:function(e,t,n){this.voucher[t].name=e[n],this.voucher[t].id=e.id,console.log("Accounts User: ",this.voucher)}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.voucher.date=t.common.dateFormatternew(e.date).split(" ")[0]}))}},{key:"addAmountDetails",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.voucher.amountDetails.push({transactionType:e,ledger:{name:"",id:"",is_constcenterallow:!1},amount:t,details:[]})}},{key:"keyHandler",value:(t=o(regeneratorRuntime.mark((function e(t){var n,o,a,i,r,l,c,d,s,m,u,p,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.modal){e.next=2;break}return e.abrupt("return");case 2:if("f3"!=(n=t.key.toLowerCase())){e.next=5;break}return e.abrupt("return",(this.dismiss(!0),void t.preventDefault()));case 5:if(o=document.activeElement.id,a=this.lastActiveId.split("-")[1],!t.altKey||"c"!==n||o!="ledger-"+a){e.next=11;break}this.openledger(),e.next=68;break;case 11:if(!this.showConfirm){e.next=13;break}return e.abrupt("return",("y"!=n&&"enter"!=n||(this.showConfirm=!1,t.preventDefault(),0==this.voucher.total.debit?this.common.showError("Please Enter Amount"):0==this.accountService.selected.branch.id?alert("Please Select Branch"):this.dismiss(!0)),void("n"==n&&this.modelCondition())));case 13:if(!this.showConfirmCostCenter){e.next=24;break}if(console.log(".........................."),"y"!=n&&"enter"!=n){e.next=21;break}if(this.showConfirmCostCenter=!1,t.preventDefault(),0==this.voucher.total.debit){e.next=18;break}return i=this.lastActiveId.split("-")[1],e.abrupt("return",(console.log("last hello ",this.showConfirmCostCenter,this.lastActiveId,i),void this.handleCostCenterModal(this.voucher.amountDetails[i].amount,i)));case 18:this.showConfirmCostCenter=!1,this.common.showError("Please Enter Amount"),e.next=22;break;case 21:"n"==n&&this.modelCondition();case 22:e.next=68;break;case 24:if(console.log("..........................",n,o),"home"===n&&o.includes("ledger")&&(r=this.lastActiveId.split("-")[1],""!=this.voucher.amountDetails[r].ledger.id?(console.log("ledger value ------------",this.voucher.amountDetails[r].ledger.id),this.openinvoicemodel(this.voucher.amountDetails[r].ledger.id)):this.common.showError("Please Select Correct Ledger")),t.altKey&&"u"===n&&o.includes("ledger")&&(l=this.lastActiveId.split("-")[1],""!=this.voucher.amountDetails[l].ledger.id?(console.log("ledger value ------------",this.voucher.amountDetails[l].ledger.id),this.openinvoicemodel(this.voucher.amountDetails[l].ledger.id,0)):this.common.showError("Please Select Correct Ledger")),!t.ctrlKey||"`"!==n){e.next=30;break}this.mouse(),e.next=36;break;case 30:if(t.ctrlKey||"f2"!=n||this.showDateModal){e.next=32;break}return e.abrupt("return",(this.lastActiveId=o,this.setFoucus("voucher-date-f2",!1),void(this.showDateModal=!0)));case 32:if("enter"!=n||!this.showDateModal){e.next=34;break}return e.abrupt("return",(this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.voucher.date=this.common.handleVoucherDateOnEnter(this.voucher.date),void this.setFoucus(this.lastActiveId)));case 34:if("enter"==n||!this.showDateModal){e.next=36;break}return e.abrupt("return");case 36:if("enter"!=n){e.next=41;break}document.activeElement.id.includes("amount-")?(c=o.split("-")[1],console.log("test rest successfull",this.voucher.amountDetails[c].ledger.is_constcenterallow),1==this.voucher.amountDetails[c].ledger.is_constcenterallow&&(this.showConfirmCostCenter=!0,d=o.split("-")[1],console.log("Inde:",d),console.log("Amount:",this.voucher.amountDetails[d].amount)),this.handleAmountEnter(document.activeElement.id.split("-")[1])):"narration"==document.activeElement.id?this.accountService.selected.branch?this.showConfirm=!0:alert("Please Select Branch"):o.includes("ledger-")?(s=o.split("-")[1],this.activeLedgerIndex>this.ledgers.suggestions.length-1&&(this.activeLedgerIndex=0),this.selectLedger(this.ledgers.suggestions[-1!==this.activeLedgerIndex?this.activeLedgerIndex:0],s),console.log("test rest successfull",this.voucher.amountDetails[s].is_constcenterallow),this.setFoucus("amount-"+s),this.activeLedgerIndex=-1,this.getLedgerView(s)):"voucher-date"==o?this.freezedate&&(1==this.CompareDate(this.freezedate)?(this.handleVoucherDateOnEnter(),this.setFoucus("transaction-type-0")):(this.common.showError("Please Enter Date After "+this.freezedate),setTimeout((function(){g.setFoucus("voucher-date")}),150))):(console.log("json hello0"),m=this.getElementsIDs().indexOf(document.activeElement.id),this.setFoucus(this.getElementsIDs()[m+1]),"voucher-date"==this.getElementsIDs()[m+1]&&this.moveCursor(document.getElementById("voucher-date"))),this.allowBackspace=!0,e.next=68;break;case 41:if(("c"==n||"d"==n)&&document.activeElement.id.includes("transaction-type-")){e.next=66;break}if("backspace"!=n){e.next=50;break}if("ref-code"!=o&&this.allowBackspace){e.next=45;break}return e.abrupt("return");case 45:t.preventDefault(),u=this.getElementsIDs().indexOf(document.activeElement.id),this.setFoucus(this.getElementsIDs()[u-1]),e.next=64;break;case 50:if("escape"!=n){e.next=54;break}this.allowBackspace=!0,e.next=64;break;case 54:if(!n.includes("arrow")){e.next=58;break}this.allowBackspace=!1,(n.includes("arrowup")||n.includes("arrowdown"))&&o.includes("ledger-")&&(this.handleArrowUpDown(n,o),t.preventDefault()),e.next=64;break;case 58:if(!o.includes("ledger-")){e.next=62;break}o.split("-"),e.next=64;break;case 62:if("voucher-date"!=o||"backspace"===n||/[0-9]|[-]/g.test(n)){e.next=64;break}return e.abrupt("return",void t.preventDefault());case 64:e.next=68;break;case 66:p=document.activeElement.id.split("-")[2],this.voucher.amountDetails[p].transactionType="c"==n?"credit":"debit",this.calculateTotal();case 68:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"mouse",value:function(){var e=this;this.common.params={vouchertype:this.voucherId},console.log("mouse listner",event),this.modal=this.modalService.open(I.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then((function(t){e.modal=null,t.response&&e.addLedger(t.ledger)}))}},{key:"vouchercostcenter",value:function(){console.log("____",document.activeElement.id),console.log("___-___",this.lastActiveId);var e=this.lastActiveId.split("-")[1];this.handleCostCenterModal(this.voucher.amountDetails[e].amount,e),this.showConfirmCostCenter=!1,event.preventDefault()}},{key:"CompareDate",value:function(e){var t=e.split("-");console.log("first date ",e);var n=this.voucher.date.split("-"),o=t[0],a=t[1],i=t[2],r=n[2],l=n[1],c=n[0];return console.log("First Date:",o,a,i),console.log("Second Date:",r,l,c),new Date(o,a,i)>new Date(r,l,c)?0:1}},{key:"handleAmountEnter",value:function(e){if(e=parseInt(e),this.voucher.total.debit!=this.voucher.total.credit||e!=this.voucher.amountDetails.length-1){if(this.voucher.total.debit==this.voucher.total.credit&&e!=this.voucher.amountDetails.length-1)return this.calculateTotal(),void(this.voucher.amountDetails[e].ledger.is_constcenterallow||this.setFoucus("transaction-type-"+(e+1)));for(var t={debit:0,credit:0},n=0;n<=e;n++)"debit"==this.voucher.amountDetails[n].transactionType?t.debit+=this.voucher.amountDetails[n].amount:t.credit+=this.voucher.amountDetails[n].amount;if(console.log("Total:",t.debit,t.credit),t.debit==t.credit)return console.log("Index",e+1),this.voucher.amountDetails.splice(e+1,this.voucher.amountDetails.length-e-1),this.setFoucus("narration"),void this.calculateTotal();e==this.voucher.amountDetails.length-1&&this.voucher.total.debit>this.voucher.total.credit?this.addAmountDetails("credit",this.voucher.total.debit-this.voucher.total.credit):e==this.voucher.amountDetails.length-1&&this.voucher.total.debit<this.voucher.total.credit&&this.addAmountDetails("debit",this.voucher.total.credit-this.voucher.total.debit),this.calculateTotal(),this.voucher.total.debit!=this.voucher.total.credit&&(console.log("amount","amount-"+(this.voucher.amountDetails.length-1)),this.setFoucus("amount-"+(this.voucher.amountDetails.length-1)))}else this.setFoucus("narration")}},{key:"setFoucus",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];setTimeout((function(){var o=document.getElementById(e);o.focus(),t.moveCursor(o,0,o.value.length),n&&(t.lastActiveId=e),console.log("last active id 66: ",t.lastActiveId)}),100)}},{key:"deleterow",value:function(e){this.voucher.amountDetails.splice(e,1),this.handleAmountEnter(this.voucher.amountDetails.length-2)}},{key:"getElementsIDs",value:function(){var e=["ref-code","voucher-date"];return this.voucher.amountDetails.map((function(t,n){e.push("transaction-type-"+n),e.push("ledger-"+n),e.push("amount-"+n)})),e.push("narration"),e}},{key:"moveCursor",value:function(e){e.select&&e.select()}},{key:"getLedgers",value:function(e,t){var n=this;this.showSuggestions=!0;var o="Suggestion/GetLedger?transactionType="+e+"&voucherId="+this.voucherId+"&search="+t;console.log("URL: ",o),this.api.get(o).subscribe((function(t){console.log(t),n.ledgers[e]=t.data}),(function(e){console.error(e),n.common.showError()})),this.setFoucus("ref-code")}},{key:"getCurrentBalance",value:function(e){var t=this;this.showSuggestions=!0;var n="Suggestion/getCurrentBalance?branchid=0&fromdate="+this.date+"&ledgerid="+e;console.log("URL: ",n),this.api.get(n).subscribe((function(n){console.log("current balance",n.data[0].get_currentbalance),t.balances[e]={main:n.data[0].get_currentbalance,current:n.data[0].get_currentbalance},t.currentbalance=n.data[0].get_currentbalance-t.voucher.total.credit,console.log("check current balance",t.currentbalance)}),(function(e){console.error(e),t.common.showError()})),this.setFoucus("ref-code")}},{key:"selectLedger",value:function(e,t){console.log("Last Active ID44:",this.lastActiveId,e),!t&&this.lastActiveId.includes("ledger")&&(t=this.lastActiveId.split("-")[1]),this.voucher.amountDetails[t].ledger.name=e.y_ledger_name,this.voucher.amountDetails[t].ledger.id=e.y_ledger_id,this.voucher.amountDetails[t].ledger.is_constcenterallow=e.is_constcenterallow,this.getLedgerView(t)}},{key:"handleVoucherDateOnEnter",value:function(){var e=[],t="-";if(this.voucher.date.includes("-"))e=this.voucher.date.split("-");else{if(!this.voucher.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.voucher.date.split("/"),t="/"}var n=e[1];n=(n=1==n.length?"0"+n:n)>12?12:n;var o=e[2];o=1==o.length?"200"+o:2==o.length?"20"+o:o;var a=e[0];a=(a=1==a.length?"0"+a:a)>31?31:a,a=28==(a=("04"==n||"06"==n||"09"==n||"11"==n)&&a>30?30:a)&&"02"==n?28:a,o%4==0&&"02"==n?a=a>28&&"02"==n&&o%4==0&&(o%100!=0||o%400==0)?29:a:o%4!=0&&"02"==n&&(a=28),console.log("Date: ",o+t+n+t+a),this.voucher.date=a+t+n+t+o}},{key:"handleArrowUpDown",value:function(e,t){parseInt(t.split("-")[1]),"arrowdown"==e?this.activeLedgerIndex!=this.ledgers.suggestions.length-1&&this.activeLedgerIndex++:0!=this.activeLedgerIndex&&this.activeLedgerIndex--}},{key:"getActiveLedgerType",value:function(e){if(!this.lastActiveId||!this.lastActiveId.includes("ledger-"))return[];var t=parseInt(this.lastActiveId.split("-")[1]),n=document.getElementById("transaction-type-"+t)?document.getElementById("transaction-type-"+t).value:"";if(n){var o=e[n];if(document.getElementById(this.lastActiveId)&&document.getElementById(this.lastActiveId).value){var a=document.getElementById(this.lastActiveId).value.toLowerCase();o=e[n].filter((function(e){return e.y_ledger_name.toLowerCase().includes(a)}))}return this.ledgers.suggestions=o,o}return[]}},{key:"findBalance",value:function(e){console.log("IndexL::::",e);var t=[],n=this.voucher.amountDetails[e].ledger.id;this.voucher.amountDetails.map((function(e,o){"credit"==e.transactionType&&e.ledger.id==n&&t.push({index:o,amountDetail:e})})),document;for(var o=0,a=0;a<t.length&&t[a].index!=e;a++)o+=t[a].amountDetail.amount;return this.balances[n]?this.balances[n].main-o:0}},{key:"calculateTotal",value:function(e){var t=this;if(this.voucher.total.debit=0,this.voucher.total.credit=0,this.voucher.amountDetails.map((function(e){console.log(e,e.transactionType,e.amount),"debit"==e.transactionType?t.voucher.total.debit=parseFloat((t.voucher.total.debit+e.amount).toFixed(2)):t.voucher.total.credit=parseFloat((t.voucher.total.credit+e.amount).toFixed(2))})),!Object(_t.isUndefined)(e)){var n=this.voucher.amountDetails[e].ledger.id;console.log("total credit amount",this.voucher.total.credit),console.log("find balance amount",this.findBalance(e)),this.findBalance(e)&&this.findBalance(e)<this.voucher.total.credit&&(console.log("check condition"),this.voucher.amountDetails[e].amount=0,alert("Please enter valid amount")),console.log("LedgerID:",n,this.balances[n]),this.balances[n]&&(this.balances[n].current=this.balances[n].main-this.voucher.total.credit)}}},{key:"openledger",value:function(e){var t=this;console.log("ledger123",e),e&&(this.common.params=e),this.modal=this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then((function(e){t.modal=null,e.response&&t.addLedger(e.ledger)}))}},{key:"addLedger",value:function(e){var t=this;console.log("ledgerdata",e);var n={name:e.name,alias_name:e.aliasname,code:e.code,oid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertLedger",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getLedgers("debit"),t.getLedgers("credit"),t.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"handleCostCenterModal",value:function(e,t){var n=this;console.log("Indes:",t),t=parseInt(t),this.common.params={amount:e,details:this.voucher.amountDetails[t]},this.modal=this.modalService.open(St.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then((function(e){n.modal=null,console.log("Modal res:",e),e.response&&(n.voucher.amountDetails[t].details=e.amountDetails),console.log(document.getElementById("transaction-type-"+(t+1)),t,"transaction-type-"+(t+1)),setTimeout((function(){console.log("eeee",document.getElementById("transaction-type-"+(t+1))),console.log("0000000000000000000L:",n.showConfirmCostCenter),n.showConfirmCostCenter=!1}),200),n.showConfirmCostCenter=!1,n.setFoucus("transaction-type-"+(t+1)),console.log("Testiong",n.voucher.amountDetails[t])}))}},{key:"openinvoicemodel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(console.log("ledger123",e),e){var o={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",o).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),e.data,t.common.params={ledgerdata:e.data,deleted:n,sizeledger:0},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&0==n&&t.addLedger(e.ledger)}))}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}},{key:"getLedgerView",value:function(e){var t=this,n={startdate:this.common.dateFormatternew(new Date).split(" ")[0],enddate:this.common.dateFormatternew(new Date).split(" ")[0],ledger:this.voucher.amountDetails[e].ledger.id,vouchertype:0};this.common.loading++,this.api.post("Accounts/getLedgerView",n).subscribe((function(n){t.common.loading--,t.ledgerbalance[e]="0"!=n.data[n.data.length-1].y_cramunt?"0.00"!=n.data[n.data.length-1].y_cramunt?parseFloat(n.data[n.data.length-1].y_cramunt).toFixed(2)+" Cr":"0":"0"==n.data[n.data.length-1].y_dramunt?"0":"0.00"!=n.data[n.data.length-1].y_dramunt?parseFloat(n.data[n.data.length-1].y_dramunt).toFixed(2)+" Dr":"0",console.log("Res getLedgerView:",n.data,n.data[n.data.length-1],t.ledgerbalance)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Tt)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](d.c),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](kt.a))},Tt.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Tt,selectors:[["vouchers"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:58,vars:12,consts:[[2,"padding-top","18px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col-6","pl-0"],[1,"form-group"],[1,"ref-label"],["type","text","id","ref-code","name","account-name","autofocus","","autocomplete","doNotAutoComplete",1,"form-control","ref-input",3,"ngModel","click","ngModelChange"],["type","text","autocomplete","off","id","voucher-date","name","account-date","maxlength","10","autocomplete","off",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],[1,"col-12","pl-0"],[1,"table","table-bordered"],[2,"background","#263238","color","#fff"],["style","background: #e4e4e4;",4,"ngFor","ngForOf"],[1,"col-8","pl-0"],["id","narration","name","narration",1,"form-control","ref-input",3,"ngModel","click","ngModelChange","input"],[1,"col-2","pl-0"],["type","text","name","account-name","readonly","",1,"form-control","ref-input",2,"background","#e4e4e4",3,"ngModel","ngModelChange"],[1,"col","text-right"],["type","checkbox","name","print","id","print",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[1,"col-3","pl-0","pr-0"],["id","ledger-container",1,"ledger-container"],["class","ledger-option",3,"ngClass","click",4,"lazyFor","lazyForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["class","date-modal",4,"ngIf"],[2,"background","#e4e4e4"],[1,"form-control","ref-input",2,"padding","4px 8px","height","auto",3,"id","name","ngModel","ngModelChange","change","click"],["value","debit"],["value","credit"],["type","text","autocomplete","off",1,"form-control","ref-input",3,"id","name","ngModel","ngModelChange","click","input"],[4,"ngFor","ngForOf"],["type","number","autocomplete","off",1,"form-control","ref-input",3,"id","name","ngModel","click","input","ngModelChange"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["type","checkbox","name","mannual","id","mannual",3,"ngModel","ngModelChange"],[1,"ledger-option",3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"date-modal-body","data_model_save"],[3,"click"],[1,"date-modal"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",1),h["\u0275\u0275elementStart"](5,"div",3),h["\u0275\u0275elementStart"](6,"div",4),h["\u0275\u0275elementStart"](7,"label",5),h["\u0275\u0275text"](8,"Ref"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",6),h["\u0275\u0275listener"]("click",(function(){return t.lastActiveId="ref-code"}))("ngModelChange",(function(e){return t.voucher.code=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",3),h["\u0275\u0275elementStart"](11,"div",4),h["\u0275\u0275elementStart"](12,"label",5),h["\u0275\u0275text"](13,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.date=e}))("click",(function(){return t.lastActiveId="voucher-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",1),h["\u0275\u0275elementStart"](16,"div",8),h["\u0275\u0275elementStart"](17,"table",9),h["\u0275\u0275elementStart"](18,"tr",10),h["\u0275\u0275elementStart"](19,"th"),h["\u0275\u0275text"](20,"Transaction "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"th"),h["\u0275\u0275text"](22,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"th"),h["\u0275\u0275text"](24,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"th"),h["\u0275\u0275text"](26,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](27,Pt,17,11,"tr",11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",1),h["\u0275\u0275elementStart"](29,"div",12),h["\u0275\u0275elementStart"](30,"div",4),h["\u0275\u0275elementStart"](31,"label",5),h["\u0275\u0275text"](32,"Narration"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"textarea",13),h["\u0275\u0275listener"]("click",(function(){return t.lastActiveId="narration"}))("ngModelChange",(function(e){return t.voucher.remarks=e}))("input",(function(){return t.allowBackspace=!1})),h["\u0275\u0275text"](34,"              "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",14),h["\u0275\u0275elementStart"](36,"div",4),h["\u0275\u0275elementStart"](37,"label",5),h["\u0275\u0275text"](38,"Total Debit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.total.debit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"div",14),h["\u0275\u0275elementStart"](41,"div",4),h["\u0275\u0275elementStart"](42,"label",5),h["\u0275\u0275text"](43,"Total Credit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.total.credit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"div",1),h["\u0275\u0275elementStart"](46,"div",16),h["\u0275\u0275elementStart"](47,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.print=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](48," Print "),h["\u0275\u0275template"](49,Ot,3,1,"span",18),h["\u0275\u0275elementStart"](50,"button",19),h["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),h["\u0275\u0275text"](51,"Submit "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](52,"div",20),h["\u0275\u0275elementStart"](53,"div",21),h["\u0275\u0275template"](54,It,3,2,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](55,Dt,4,1,"div",23),h["\u0275\u0275template"](56,Vt,11,0,"div",23),h["\u0275\u0275template"](57,Ft,11,0,"div",24)),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.voucher.code),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.voucher.date),h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngForOf",t.voucher.amountDetails),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.voucher.remarks),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.voucher.total.debit),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.voucher.total.credit),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.voucher.print),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.mannual),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("lazyForOf",t.getActiveLedgerType(t.ledgers)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showConfirm),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showConfirmCostCenter))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.t,F.a,D.u,Mt.a,F.D,F.w,F.G,F.x,D.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff}.ledger-container[_ngcontent-%COMP%]{border-radius:0;padding:8px;background-color:#e4e4e4;margin-top:20px;max-height:230px;min-height:230px;overflow:auto}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.data_model_save[_ngcontent-%COMP%]{padding:20px;text-align:center;width:auto;max-width:250px}.data_model_save[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:10px 20px;color:#fff;border-radius:3px}.ledger-option[_ngcontent-%COMP%]{border:1px solid #263238;padding:2px 8px;border-radius:3px;font-size:12px;font-weight:400;background-color:#263238;margin-bottom:3px;color:#fff}.active-ledger[_ngcontent-%COMP%]{background:#26a69a;font-weight:400;border-color:#26a69a}button[_ngcontent-%COMP%]{background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;padding:10px 20px!important;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.date-modal-body[_ngcontent-%COMP%]   .ng-pristine[_ngcontent-%COMP%]{border:0!important;padding:8px;height:auto;width:auto;border-radius:0;line-height:normal}.form-control[_ngcontent-%COMP%]:focus{border-color:#263238!important}button.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important;padding:8px 10px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:7.5%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:14.5%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:2%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 292px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:7.5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:14.5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:2%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),Tt),At=i("ajfk"),Lt=i("Byim"),Rt=i("0k+j"),jt=i("tUv6"),zt=i("xzxl"),Nt=i("iaUN"),Gt=i("0QjR"),Yt=i("0trq"),Ht=i("pl/H"),$t=i("uk+R"),qt=i("k6ZE"),Kt=i("5Y/i"),Ut=i("EVny");function Wt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",28),h["\u0275\u0275elementStart"](1,"a",29),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Qt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",28),h["\u0275\u0275elementStart"](1,"a",30),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Jt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",31),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"vouchertype","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.vouchertypedata)}}function Xt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",32),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerData)}}function Zt(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275elementStart"](1,"input",33),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.search=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().jrxSearch(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.search)("placeholder",o.name)}}function en(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Branch"),h["\u0275\u0275elementEnd"]())}function tn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"i",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"]().imageOpen(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function nn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.y_company_branch,"")}}var on=function(e,t){return{highlight:e,highlightcolor:t}};function an(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",34),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().jrxDblClick(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openVoucherEdit(e.y_voucherid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275template"](8,tn,2,0,"span",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275pipe"](15,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"td"),h["\u0275\u0275text"](17),h["\u0275\u0275pipe"](18,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](19,nn,2,1,"td",25),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction2"](19,on,i.selectedRow==a,i.data.length-1==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1+(i.pages.active-1)*i.accountService.perPage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,10,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"]("",o.y_particulars," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.y_docscount>0),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_type),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](null!=o.y_date?o.y_code+"/"+o.y_cust_code:""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](15,13,o.y_dramunt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](18,16,o.y_cramunt,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==i.accountService.selected.branch.id)}}function rn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",42),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).jrxPagination(e)})),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",o==a.pages.active?"active-page":""),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](o)}}function ln(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",36),h["\u0275\u0275elementStart"](1,"div",37),h["\u0275\u0275elementStart"](2,"button",38),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active-1)})),h["\u0275\u0275text"](3,"Pre"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,rn,2,2,"button",39),h["\u0275\u0275elementStart"](5,"button",38),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active+1)})),h["\u0275\u0275text"](6,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",40),h["\u0275\u0275elementStart"](8,"input",41),h["\u0275\u0275listener"]("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pages.limit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("disabled",1==o.pages.active),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.common.generateArray(o.pages.count)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("disabled",o.pages.active==o.pages.count),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.pages.limit)}}var cn,dn=((cn=function(){function e(t,n,o,i,r,l,c){var d=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.modalService=r,this.accountService=l,this.router=c,this.selectedName="",this.activedateid="",this.fuelFilings=[],this.flag=0,this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.lastActiveId="",this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="vouchertype",this.selectedRow=-1,this.allowBackspace=!0,this.deletedId=0,this.f2Date="startdate",this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_particulars",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.pages.limit=this.accountService.perPage,this.common.refresh=this.refresh.bind(this),this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,et.getItem("day_book_vouchers").then((function(e){e&&(d.vouchertypedata=e),d.getVoucherTypeList(!e)})),et.getItem("day_book_ledgers").then((function(e){e&&(d.ledgerData=e),d.getAllLedger(!e)})),et.getItem("daybook_data").then((function(e){e&&(d.DayData=e,d.filterData())})),this.setFoucus("vouchertype"),this.route.params.subscribe((function(e){e.id&&(d.deletedId=parseInt(e.id)),d.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}})),this.common.currentPage=0==this.deletedId?"Day Book":"Voucher & Invoice Deleted"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVoucherTypeList(),this.getBranchList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.getDayBook()}},{key:"ngAfterViewInit",value:function(){}},{key:"getVoucherTypeList",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe((function(n){t&&e.common.loading--,console.log("Res======:",n.data),e.vouchertypedata=n.data,e.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"}),et.setItem("day_book_vouchers",e.vouchertypedata)}),(function(n){t&&e.common.loading--,console.log("Error: ",n),e.common.showError()}))}},{key:"openStoreQuestionEdit",value:function(e){this.common.params={storeRequestId:-2==e.y_vouchertype_id?-3:e.y_vouchertype_id,stockQuestionId:e.y_voucherid,stockQuestionBranchid:e.y_fobranchid,pendingid:-2==e.y_vouchertype_id?0:1},this.modalService.open(Gt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){console.log("responce data return",e)}))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openinvoicemodel",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;console.log("DayBOOKS",e),this.common.params={invoiceid:t,delete:this.deletedId,newid:a,ordertype:n},this.modalService.open(Lt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data: invoice ",e),e.delete&&(console.log("open succesfull"),o.getDayBook())}))}},{key:"openServiceSalesInvoicemodel",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.common.params={invoiceid:t,delete:this.deletedId,newid:a,ordertype:n,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){e&&e.msg&&o.getDayBook()}))}},{key:"getAllLedger",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(n){t&&e.common.loading--,console.log("Res:",n.data),e.ledgerData=n.data,et.setItem("day_book_ledgers",e.ledgerData)}),(function(n){t&&e.common.loading--,console.log("Error: ",n),e.common.showError()}))}},{key:"getDayBook",value:function(){var e=this;this.searchedData=[],this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate;var t={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,delete:this.deletedId,forapproved:1==this.deletedId?-1:1,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetDayBook",t).subscribe((function(t){e.common.loading--,console.log("Res: length :",t.data,t.data.length),e.DayData=t.data,e.filterData(),e.DayData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Day Book From :"+e.DayBook.startdate+" To :"+e.DayBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.DayBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.DayBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}},{key:"filterData",value:function(){var e=[];this.DayData.map((function(t){-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)})),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,et.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}},{key:"getBookDetail",value:function(e){console.log("vouher id",e),this.common.params=e,this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"home"===t&&this.activeId.includes("ledgerdaybook")&&(this.lastActiveId.split("-"),0!=this.DayBook.ledger.id?(console.log("ledger value ------------",this.DayBook.ledger.id),this.openinvoicedetailmodel(this.DayBook.ledger.id)):this.common.showError("Please Select Correct Ledger")),e.ctrlKey&&"d"===t&&!this.activeId&&this.DayData.length&&-1!=this.selectedRow)return console.log("ctrl + d pressed"),this.DayData[this.selectedRow].y_type.toLowerCase().includes("voucher")?!this.DayData[this.selectedRow].y_type.toLowerCase().includes("trip")&&this.openVoucherEdit(this.DayData[this.selectedRow].y_voucherid,6,this.DayData[this.selectedRow].y_vouchertype_id):this.DayData[this.selectedRow].y_type.toLowerCase().includes("invoice")&&this.openinvoicemodel(this.DayData[this.selectedRow].y_voucherid,this.DayData[this.selectedRow].y_vouchertype_id,1),void e.preventDefault();if("enter"==t)this.allowBackspace=!0,this.activeId.includes("branch")?this.setFoucus("vouchertype"):this.activeId.includes("vouchertype")?this.setFoucus("ledgerdaybook"):"ledgerdaybook"==this.activeId?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.checkDate(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}},{key:"openinvoicedetailmodel",value:function(e){var t=this;if(console.log("ledger123",e),e){var n={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),e.data,t.common.params={ledgerdata:e.data,deleted:2,sizeledger:0},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}},{key:"checkDate",value:function(e){}},{key:"openVoucherEdit",value:function(e,t,n){var o=this;e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e),e.delete&&o.getDayBook()})))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"test",value:function(e){console.log("--------: ",e)}},{key:"imageOpen",value:function(e){var t=this;console.log("dataItem:",e);var n={voucherid:e.y_voucherid};this.common.loading++,this.api.post("Accounts/getvoucherdocs",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.common.params={images:e.data,title:"Image"},t.modalService.open(jt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log(e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=this,a=t.y_vehicle_id,i=this.TripEditData,r=this.pendingDataEditTme,l=this.VoucherEditTime,c=this.deletedId;-151==n.y_vouchertype_id?(this.common.params={vehId:a,tripDetails:e,tripVoucher:t,tripEditData:i,tripPendingDataSelected:r,VoucherData:l,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:c},console.log("tripPendingDataSelected",r,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.delete&&o.getDayBook()}))):(this.common.params={vehId:a,tripDetails:e,tripVoucher:t,tripEditData:i,tripPendingDataSelected:r,VoucherData:l,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:c},console.log("tripPendingDataSelected",r,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.delete&&o.getDayBook()})))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.DayBook.startdate,currentFilling:t.DayBook.enddate,fuelstationid:e.y_fuel_station_id,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e),e.success&&t.getDayBook()}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.DayBook.startdate,currentFilling:o.DayBook.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"editTransfer",value:function(e){e?(this.common.params={refData:{transferId:e,readOnly:!0}},this.modalService.open(Ht.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another entry")}},{key:"openfreight",value:function(e){e?(this.common.params={invoice:{id:e}},this.modalService.open(qt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another Entry")}},{key:"openRevenue",value:function(e){e?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e,refType:"FRINV"}},this.modalService.open($t.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another Entry")}},{key:"addvance",value:function(){var e=this;this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data: ",t),t.response&&(e.DayBook.isamount=t.ledger.isamount,e.DayBook.remarks=t.ledger.remarks,e.DayBook.vouchercustcode=t.ledger.vouchercustcode,e.DayBook.vouchercode=t.ledger.vouchercode,e.DayBook.frmamount=t.ledger.frmamount,e.DayBook.toamount=t.ledger.toamount,e.flag=0!=t.ledger.toamount||0!=t.ledger.frmamount||""!=t.ledger.vouchercode||""!=t.ledger.vouchercustcode||""!=t.ledger.remarks||0!=t.ledger.isamount?1:0)}))}},{key:"jrxPagination",value:function(e,t){this.pages.active=e;var n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}},{key:"jrxPageLimitReset",value:function(){var e=this;this.jrxPageTimer=setTimeout((function(){if("string"==typeof e.pages.limit&&(e.pages.limit=parseInt(e.pages.limit)||0),!e.pages.limit||e.pages.limit<100)return e.pages.limit=e.accountService.perPage,void e.common.showError("Minimum per page limit 100");e.pages.count=Math.floor(e.DayData.length/e.pages.limit),e.DayData.length%e.pages.limit&&e.pages.count++,e.accountService.perPage=e.pages.limit,localStorage.setItem("per_page",e.accountService.perPage.toString()),e.jrxPagination(e.pages.active<e.pages.count?e.pages.active:e.pages.count)}),500)}},{key:"jrxSearch",value:function(e){var t=this;clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout((function(){if(t.searchedData=[],e.search){for(var n=0;n<t.DayData.length;n++)t.DayData[n][e.key]&&("y_date"===e.key&&t.common.changeDateformat(t.DayData[n][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||t.DayData[n][e.key].toLowerCase().includes(e.search.toLowerCase()))&&t.searchedData.push(t.DayData[n]);t.pages.count=Math.floor(t.searchedData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count,t.searchedData)}else t.searchedData=[],t.pages.count=Math.floor(t.DayData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count)}),500)}},{key:"jrxDblClick",value:function(e){e.y_type.toLowerCase().includes("voucher")?e.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(e):e.y_type.toLowerCase().includes("fuel")?this.openFuelEdit(e):e.y_type.toLowerCase().includes("lr")?this.editTransfer(e.y_transferid):this.openVoucherEdit(e.y_voucherid,0,e.y_vouchertype_id):e.y_type.toLowerCase().includes("freight")?e.y_type.toLowerCase().includes("expense")?this.openfreight(e.y_transferid):this.openRevenue(e.y_transferid):e.y_type.toLowerCase().includes("stock")?this.openStoreQuestionEdit(e):e.y_type.toLowerCase().includes("wastage")?this.openinvoicemodel(e,e.y_voucherid,e.y_vouchertype_id):this.openServiceSalesInvoicemodel(e,e.y_voucherid,e.y_vouchertype_id),this.common.currentPage=0==this.deletedId?"Day Book":"Voucher & Invoice Deleted"}}]),e}()).\u0275fac=function(e){return new(e||cn)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](d.c))},cn.\u0275cmp=h["\u0275\u0275defineComponent"]({type:cn,selectors:[["daybooks"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:52,vars:12,consts:[[2,"padding-top","0px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledgerdaybook","display","name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"far","fa-image",3,"click"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",1),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"label",9),h["\u0275\u0275text"](12,"Voucher"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.vouchertype.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",8),h["\u0275\u0275elementStart"](16,"label",9),h["\u0275\u0275text"](17,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",1),h["\u0275\u0275elementStart"](20,"div",12),h["\u0275\u0275elementStart"](21,"div",8),h["\u0275\u0275elementStart"](22,"label",9),h["\u0275\u0275text"](23,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",12),h["\u0275\u0275elementStart"](26,"div",8),h["\u0275\u0275elementStart"](27,"label",9),h["\u0275\u0275text"](28,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",15),h["\u0275\u0275template"](31,Wt,3,0,"div",16),h["\u0275\u0275template"](32,Qt,3,0,"div",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",15),h["\u0275\u0275elementStart"](34,"div",8),h["\u0275\u0275elementStart"](35,"button",17),h["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),h["\u0275\u0275text"](36,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",18),h["\u0275\u0275elementStart"](38,"div",19),h["\u0275\u0275template"](39,Jt,2,1,"div",20),h["\u0275\u0275template"](40,Xt,2,1,"div",20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"div",21),h["\u0275\u0275elementStart"](42,"table",22),h["\u0275\u0275elementStart"](43,"thead",23),h["\u0275\u0275elementStart"](44,"tr"),h["\u0275\u0275elementStart"](45,"th"),h["\u0275\u0275text"](46,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](47,Zt,2,2,"th",24),h["\u0275\u0275template"](48,en,2,0,"th",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"tbody"),h["\u0275\u0275template"](50,an,20,22,"tr",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](51,ln,9,4,"div",27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.DayBook.vouchertype.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==t.flag),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",1==t.flag),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",t.filters),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",t.data),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pages.count>=1))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.u,D.t,V.a,D.r],pipes:[D.f,D.g],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:4px 6px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none;font-size:8px;color:#fff;border:none;margin-left:1px}.customPage[_ngcontent-%COMP%]{font-size:10px!important;padding:1px 5px!important;width:60px;border:1px solid}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]{min-width:1110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-weight:400;width:11%;border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:4%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:8%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:14%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:22%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px!important;font-size:12px;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 296px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:4%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:8%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:14%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:22%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.far.fa-image[_ngcontent-%COMP%]{display:block;text-align:right;font-size:18px;margin-top:-20px;color:#00ff39;cursor:pointer}.highlightcolor[_ngcontent-%COMP%]{background-color:grey}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),cn),sn=i("LvDl");function mn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",24),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"voucherType","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.vouchertypedata)}}function un(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",25),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerList)}}function pn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Branch"),h["\u0275\u0275elementEnd"]())}function gn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.y_dramunt)}}function hn(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function vn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.y_cramunt)}}function fn(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function bn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.y_company_branch,"")}}var xn=function(e,t){return{highlight:e,radclass:t}};function yn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",26),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"]();return e.y_type.toLowerCase().includes("freight")?e.y_type.toLowerCase().includes("expence")?o.openfreight(e.y_refid):o.openRevenue(e.y_refid):e.y_type.toLowerCase().includes("lr")?o.editTransfer(e.y_refid):""!=e.y_type.length?o.getBookDetail(e.y_voucherid,e.y_code,e.y_type,e):""}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](14,gn,2,1,"td",21),h["\u0275\u0275template"](15,hn,1,0,"td",21),h["\u0275\u0275template"](16,vn,2,1,"td",21),h["\u0275\u0275template"](17,fn,1,0,"td",21),h["\u0275\u0275template"](18,bn,2,1,"td",21),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction2"](15,xn,i.selectedRow==a,null==o.y_type)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,12,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_type),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_ledger),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.y_dramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_dramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.y_cramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_cramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==i.accountService.selected.branch.id)}}function Cn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",28),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",29),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.ledger[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.ledger[o.f2Date])}}var _n,Sn=((_n=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.vouchertypedata=[],this.branchdata=[],this.ledgerViewData=[],this.VoucherEditTime=[],this.fuelFilings=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.ledger={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"",id:""},voucherType:{name:"All",id:0}},this.ledgerData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.ledger.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.ledger.endDate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),this.common.currentPage="Ledger View",this.common.handleModalSize("class","modal-lg","1250","px",0)}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),0!=this.ledger.ledger.id&&this.getLedgerView()}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Ledger View From :"+e.ledger.startDate+" To :"+e.ledger.endDate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getVoucherTypeList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.vouchertypedata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerList=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerView",value:function(){var e=this;if(this.ledger.startDate=this.accountService.fromdate,this.ledger.endDate=this.accountService.todate,console.log("Ledger:",this.ledger),0==this.ledger.ledger.id)this.common.showError("Please Select Ledger"),this.setFoucus("ledger");else{var t={startdate:this.ledger.startDate,enddate:this.ledger.endDate,ledger:this.ledger.ledger.id,branch:this.ledger.branch.id,vouchertype:this.ledger.voucherType.id};this.common.loading++,this.api.post("Accounts/getLedgerView",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data,e.generalizeData(),e.ledgerData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.ledger[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.ledger[e])}))}},{key:"onSelected",value:function(e,t,n){this.ledger[t].name=e[n],this.ledger[t].id=e.id}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.ledgerData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if(e.ctrlKey&&"d"===t&&this.ledgerData.length&&-1!=this.selectedRow)return this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("voucher")?!this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("trip")&&this.openVoucherEdit(this.ledgerData[this.selectedRow].y_voucherid,6,this.ledgerData[this.selectedRow].y_vouchertype_id):(this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("invoice")||this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("debit")||this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("credit"))&&this.openinvoicemodeledit(this.ledgerData[this.selectedRow].y_voucherid,this.ledgerData[this.selectedRow].y_vouchertype_id,1),void e.preventDefault();if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.ledger.startDate=this.common.handleDateOnEnterNew(this.ledger.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.ledger.endDate=this.common.handleDateOnEnterNew(this.ledger.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.ledgerData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.ledgerData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.ledgerData[this.selectedRow].y_ledger_id,"","","")}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.ledger[o].includes("-"))t=this.ledger[o].split("-");else{if(!this.ledger[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.ledger[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.ledger[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getBookDetail",value:function(e,t,n,o){console.log("vouher id",e,"ytype",n),n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):o.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e)}))),this.common.currentPage="Ledger View"}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.ledger.startDate,currentFilling:t.ledger.endDate,fuelstationid:e.y_refid,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e)}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.ledger.startDate,currentFilling:o.ledger.endDate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"generalizeData",value:function(){var e=this,t=[];this.ledgerData.map((function(n,o){var a=[];a.datemonth=e.common.changeMonthformat(n.y_date,"MMMM"),a.y_date=n.y_date,a.y_code=n.y_code,a.y_cust_code=n.y_cust_code,a.y_type=n.y_type,a.y_ledger=n.y_ledger,a.y_dramunt=n.y_dramunt,a.y_cramunt=n.y_cramunt,t.push(a)})),this.ledgerViewData=[];var n=sn.groupBy(t,"datemonth");Object.keys(n).map((function(t,o){e.ledgerViewData[o]={name:t,amount:{debit:0,credit:0},vouchers:n[t]},n[t].map((function(t){e.ledgerViewData[o].amount.debit+=parseFloat(t.y_dramunt),e.ledgerViewData[o].amount.credit+=parseFloat(t.y_cramunt)}))})),console.log("------",this.ledgerViewData)}},{key:"openfreight",value:function(e){e?(this.common.params={invoice:{id:e}},this.modalService.open(qt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another Entry")}},{key:"openRevenue",value:function(e){e?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e,refType:"FRINV"}},this.modalService.open($t.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another Entry")}},{key:"editTransfer",value:function(e){e?(this.common.params={refData:{transferId:e,readOnly:!0}},this.modalService.open(Ht.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))):this.common.showError("Please Select another entry")}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log(e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})))}},{key:"openVoucherEdit",value:function(e,t,n){var o=this;console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:0,addvoucherid:t,voucherTypeId:n},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e),e.delete&&o.getLedgerView()})))}},{key:"openinvoicemodeledit",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.common.params={invoiceid:e,delete:0,newid:o,ordertype:t,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e),e.msg&&n.getLedgerView()}))}}]),e}()).\u0275fac=function(e){return new(e||_n)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},_n.\u0275cmp=h["\u0275\u0275defineComponent"]({type:_n,selectors:[["ledgerview"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:61,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","voucherType","name","voucherType",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","voucherType","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Voucher Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.voucherType.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",8),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"label",10),h["\u0275\u0275text"](17,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",2),h["\u0275\u0275elementStart"](20,"div",8),h["\u0275\u0275elementStart"](21,"div",9),h["\u0275\u0275elementStart"](22,"label",10),h["\u0275\u0275text"](23,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",8),h["\u0275\u0275elementStart"](26,"div",9),h["\u0275\u0275elementStart"](27,"label",10),h["\u0275\u0275text"](28,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",8),h["\u0275\u0275elementStart"](31,"div",9),h["\u0275\u0275elementStart"](32,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),h["\u0275\u0275text"](33,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",16),h["\u0275\u0275elementStart"](35,"div",17),h["\u0275\u0275template"](36,mn,2,1,"div",18),h["\u0275\u0275template"](37,un,2,1,"div",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"table",19),h["\u0275\u0275elementStart"](39,"thead",20),h["\u0275\u0275elementStart"](40,"tr"),h["\u0275\u0275elementStart"](41,"th"),h["\u0275\u0275text"](42,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](43,"th"),h["\u0275\u0275text"](44,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"th"),h["\u0275\u0275text"](46,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](47,"th"),h["\u0275\u0275text"](48,"Ref No."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"th"),h["\u0275\u0275text"](50,"Voucher Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](51,"th"),h["\u0275\u0275text"](52,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"th"),h["\u0275\u0275text"](54,"Amount(DR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](55,"th"),h["\u0275\u0275text"](56,"Amount(CR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](57,pn,2,0,"th",21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](58,"tbody"),h["\u0275\u0275template"](59,yn,19,18,"tr",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](60,Cn,4,1,"div",23)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.ledger.voucherType.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.ledger.ledger.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("voucherType")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),h["\u0275\u0275advance"](20),h["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",t.ledgerData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.u,D.t,V.a,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:135px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:135px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}"]}),_n);function kn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",19),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"group","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.secondaryData)}}function Mn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",20),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerList)}}var En=function(e){return{highlight:e}};function wn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",21),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openLedgerModal(e.y_ledgerid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](4,En,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_group_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_ledger_name)}}var Pn,On=((Pn=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.secondaryData=[],this.selectedName="",this.ledgerMapping={ledger:{name:"All",id:0},group:{name:"All",id:0}},this.ledgerMappingData=[],this.ledgerList=[],this.activeId="secondaryname",this.selectedRow=-1,this.allowBackspace=!0,this.common.refresh=this.refresh.bind(this),this.getSecondaryData(),this.getLedgerList(),this.setFoucus("secondaryname"),this.common.currentPage="Ledger Mapping"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getSecondaryData(),this.getLedgerList(),this.setFoucus("secondaryname")}},{key:"getSecondaryData",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetSecondaryAccount",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.secondaryData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerView",value:function(){var e=this,t={ledger:this.ledgerMapping.ledger.id,group:this.ledgerMapping.group.id};this.common.loading++,this.api.post("Accounts/getLedgerMapping",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerMappingData=t.data,e.setFoucus("secondaryname"),e.ledgerMappingData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerList=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"onSelected",value:function(e,t,n){this.ledgerMapping[t].name=e[n],this.ledgerMapping[t].id=e.id}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t?(this.allowBackspace=!0,this.activeId.includes("secondaryname")?this.setFoucus("ledger"):this.activeId.includes("ledger")&&this.setFoucus("submit")):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"ledger"==this.activeId&&this.setFoucus("secondaryname")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.ledgerMappingData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.ledgerMappingData.length-1&&this.selectedRow++)}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"openLedgerModal",value:function(e){var t=this;if(e){if(console.log("ledger123",e),e){var n={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),e.data,t.common.params={ledgerdata:e.data,deleted:0,sizeledger:0},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&e.ledger&&t.addLedger(e.ledger)}))}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}else this.common.showError("Please Select Correct Ledger")}},{key:"addLedger",value:function(e){var t=this;console.log("ledgerdata",e);var n={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertLedger",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Pn)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},Pn.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Pn,selectors:[["ledgermapping"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:36,vars:5,consts:[[2,"border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col-3","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","secondaryname","name","secondaryname",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered","m-0"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["targetId","secondaryname","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"span",2),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](3,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"div",7),h["\u0275\u0275elementStart"](8,"div",8),h["\u0275\u0275elementStart"](9,"label",9),h["\u0275\u0275text"](10,"Secondary Goup"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerMapping.group.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",7),h["\u0275\u0275elementStart"](13,"div",8),h["\u0275\u0275elementStart"](14,"label",9),h["\u0275\u0275text"](15,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerMapping.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",7),h["\u0275\u0275elementStart"](18,"div",8),h["\u0275\u0275elementStart"](19,"button",12),h["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),h["\u0275\u0275text"](20,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",13),h["\u0275\u0275elementStart"](22,"div",14),h["\u0275\u0275template"](23,kn,2,1,"div",15),h["\u0275\u0275template"](24,Mn,2,1,"div",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"table",16),h["\u0275\u0275elementStart"](26,"thead",17),h["\u0275\u0275elementStart"](27,"tr"),h["\u0275\u0275elementStart"](28,"th"),h["\u0275\u0275text"](29,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"th"),h["\u0275\u0275text"](31,"Group Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"th"),h["\u0275\u0275text"](33,"Ledger Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"tbody"),h["\u0275\u0275template"](35,wn,7,6,"tr",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngModel",t.ledgerMapping.group.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.ledgerMapping.ledger.name),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("secondaryname")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngForOf",t.ledgerMappingData))},directives:[b.s,b.r,F.d,F.r,F.u,D.u,D.t,V.a,D.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:500px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:500px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),Pn);function In(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",10),h["\u0275\u0275text"](1,"Vender"),h["\u0275\u0275elementEnd"]())}function Dn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label",10),h["\u0275\u0275text"](1,"Sales"),h["\u0275\u0275elementEnd"]())}function Vn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",29),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"voucherType","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.vouchertypedata)}}function Fn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",30),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerList)}}var Tn=function(e){return{highlight:e}};function Bn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",31),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,Tn,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_code+"/"+o.y_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_vendor),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_billamount),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_totalbillamount),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_taxamount),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_netamount)}}function An(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",32),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",33),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",34),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.invoiceRegister[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.invoiceRegister[o.f2Date])}}var Ln,Rn=((Ln=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.selectedName="",this.vouchertypedata=[],this.branchdata=[],this.invoiceRegister={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),custCode:"",code:"",ledger:{name:"All",id:0},branch:{name:"",id:""},voucherType:{name:"Purchase Invoice",id:-102}},this.invoiceRegisterData=[],this.ledgerList=[],this.activeId="voucherType",this.allowBackspace=!0,this.selectedRow=-1,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.totalbillamount=0,this.totaldisamount=0,this.totaltaxamount=0,this.totalnetamount=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.invoiceRegister.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.invoiceRegister.endDate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),this.common.currentPage="Invoice Register"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType")}},{key:"getVoucherTypeList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetOrderTypeList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.vouchertypedata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerList=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getInvoiceRegister",value:function(){var e=this;this.invoiceRegister.startDate=this.accountService.fromdate,this.invoiceRegister.endDate=this.accountService.todate,console.log("Invoice Reister:",this.invoiceRegister);var t={startdate:this.invoiceRegister.startDate,enddate:this.invoiceRegister.endDate,ledger:this.invoiceRegister.ledger.id,branch:this.invoiceRegister.branch.id,code:this.invoiceRegister.code,custCode:this.invoiceRegister.custCode,orderType:this.invoiceRegister.voucherType.id};this.common.loading++,this.api.post("Accounts/getInvoiceRegister",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.invoiceRegisterData=t.data,e.invoiceRegisterData.map((function(t){e.totalbillamount+=parseFloat(t.y_billamount),e.totaldisamount+=parseFloat(t.y_totalbillamount),e.totaltaxamount+=parseFloat(t.y_taxamount),e.totalnetamount+=parseFloat(t.y_netamount)}))}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.invoiceRegister[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.invoiceRegister[e])}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Invoice From :"+e.invoiceRegister.startDate+" To :"+e.invoiceRegister.endDate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"onSelected",value:function(e,t,n){this.invoiceRegister[t].name=e[n],this.invoiceRegister[t].id=e.id}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("code"):this.activeId.includes("startDate")?(this.invoiceRegister.startDate=this.common.handleDateOnEnterNew(this.invoiceRegister.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")?(this.invoiceRegister.endDate=this.common.handleDateOnEnterNew(this.invoiceRegister.endDate),this.setFoucus("submit")):this.activeId.includes("custcode")?this.setFoucus("startDate"):this.activeId.includes("code")&&this.setFoucus("custcode");else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("custcode"),"custcode"==this.activeId&&this.setFoucus("code"),"code"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.invoiceRegisterData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.invoiceRegisterData.length-1&&this.selectedRow++)}}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.invoiceRegister[o].includes("-"))t=this.invoiceRegister[o].split("-");else{if(!this.invoiceRegister[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.invoiceRegister[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.invoiceRegister[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}}]),e}()).\u0275fac=function(e){return new(e||Ln)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},Ln.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Ln,selectors:[["invoiceregister"]],decls:87,vars:28,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","voucherType","name","voucherType",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["class","tjr-label",4,"ngIf"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","autocomplete","off","type","text","placeholder","Code","id","code","name","account-code",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","autocomplete","off","type","text","placeholder","Cust Code","id","custcode","name","account-custCode",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","text","autocomplete","off","maxlength","10","placeholder","Select Date","name","account-startDate","id","startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","placeholder","Select Date","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],[2,"background-color","gray"],[2,"color","white"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","voucherType","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control","tjr-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.voucherType.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",8),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275template"](16,In,2,0,"label",12),h["\u0275\u0275template"](17,Dn,2,0,"label",12),h["\u0275\u0275elementStart"](18,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",8),h["\u0275\u0275elementStart"](20,"div",9),h["\u0275\u0275elementStart"](21,"label",10),h["\u0275\u0275text"](22,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.code=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",8),h["\u0275\u0275elementStart"](25,"div",9),h["\u0275\u0275elementStart"](26,"label",10),h["\u0275\u0275text"](27,"Cust Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.custCode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",2),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275elementStart"](31,"div",9),h["\u0275\u0275elementStart"](32,"label",10),h["\u0275\u0275text"](33,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",16),h["\u0275\u0275elementStart"](36,"div",9),h["\u0275\u0275elementStart"](37,"label",10),h["\u0275\u0275text"](38,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"input",18),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"div",16),h["\u0275\u0275elementStart"](41,"div",9),h["\u0275\u0275elementStart"](42,"button",19),h["\u0275\u0275listener"]("click",(function(){return t.getInvoiceRegister()})),h["\u0275\u0275text"](43,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",20),h["\u0275\u0275elementStart"](45,"div",21),h["\u0275\u0275template"](46,Vn,2,1,"div",22),h["\u0275\u0275template"](47,Fn,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](48,"table",23),h["\u0275\u0275elementStart"](49,"thead",24),h["\u0275\u0275elementStart"](50,"tr"),h["\u0275\u0275elementStart"](51,"th"),h["\u0275\u0275text"](52,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"th"),h["\u0275\u0275text"](54,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](55,"th"),h["\u0275\u0275text"](56,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](57,"th"),h["\u0275\u0275text"](58,"Bill Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](59,"th"),h["\u0275\u0275text"](60,"Total Bill Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](61,"th"),h["\u0275\u0275text"](62,"Tax Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](63,"th"),h["\u0275\u0275text"](64,"Net Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](65,"tbody"),h["\u0275\u0275template"](66,Bn,15,10,"tr",25),h["\u0275\u0275elementStart"](67,"tr",26),h["\u0275\u0275elementStart"](68,"td"),h["\u0275\u0275text"](69,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](70,"td"),h["\u0275\u0275text"](71,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](72,"td"),h["\u0275\u0275text"](73,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](74,"td",27),h["\u0275\u0275text"](75),h["\u0275\u0275pipe"](76,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](77,"td",27),h["\u0275\u0275text"](78),h["\u0275\u0275pipe"](79,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](80,"td",27),h["\u0275\u0275text"](81),h["\u0275\u0275pipe"](82,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](83,"td",27),h["\u0275\u0275text"](84),h["\u0275\u0275pipe"](85,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](86,An,4,1,"div",28)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.invoiceRegister.voucherType.name),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.invoiceRegister.voucherType.name.toLowerCase().includes("purchase")||t.invoiceRegister.voucherType.name.toLowerCase().includes("debit")||t.invoiceRegister.voucherType.name.toLowerCase().includes("wastage")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.invoiceRegister.voucherType.name.toLowerCase().includes("sales")||t.invoiceRegister.voucherType.name.toLowerCase().includes("credit")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",t.invoiceRegister.ledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.invoiceRegister.code),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.invoiceRegister.custCode),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("voucherType")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngForOf",t.invoiceRegisterData),h["\u0275\u0275advance"](9),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](76,16,t.totalbillamount,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](79,19,t.totaldisamount,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](82,22,t.totaltaxamount,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](85,25,t.totalnetamount,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,D.u,F.m,D.t,V.a,D.r],pipes:[D.g],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%;min-width:51px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%;min-width:51px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:24px;-ms-flex-line-pack:center;align-content:center}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.highlightcolor[_ngcontent-%COMP%]{background-color:grey}"]}),Ln),jn=i("0zba");function zn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1,"Yes"),h["\u0275\u0275elementEnd"]())}function Nn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1,"No"),h["\u0275\u0275elementEnd"]())}var Gn=function(e){return{highlight:e}};function Yn(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",31),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getVoucherSummary(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"td"),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](17,zn,2,0,"td",32),h["\u0275\u0275template"](18,Nn,2,0,"td",32),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,Gn,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_date),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_vehicle_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_ref_no),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_start_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_end_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_amount),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.y_for_approved),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!o.y_for_approved)}}var Hn,$n=((Hn=function(){function e(t,n,o,i,r,l){var c=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.accountService=r,this.modalService=l,this.enddate=this.common.dateFormatternew(new Date).split(" ")[0],this.startdate=this.common.dateFormatternew(new Date).split(" ")[0],this.trips=[],this.checkedTrips=[],this.fuelFilings=[],this.tripHeads=[],this.tripVouchers=[],this.showtripvoucher=[],this.selectedVehicle={id:0,regno:""},this.vehicles=[],this.flag=!1,this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.routId=0,this.tripExpDriver=[],this.vchdt=1,this.selectedRow=-1,this.tripExpenseVoucherTrips=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.enddate,this.common.refresh=this.refresh.bind(this),this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(c.routId=e.id)})),this.common.currentPage=0==this.routId?"Trip Voucher Expense":"Trip Voucher Expense (Short)"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTripExpences()}},{key:"getVehicle",value:function(e){this.selectedVehicle=e,this.flag=!0,console.log("test fase",this.selectedVehicle)}},{key:"getPendingTripsEditTime",value:function(e){var t=this;return new Promise((function(n,o){if(0==t.selectedVehicle.id)t.common.showToast("please enter registration number !!"),o();else{var a={vehId:t.selectedVehicle.id,vchrid:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe((function(e){console.log(e),t.common.loading--,t.pendingDataEditTme=e.data,t.trips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getPendingTrips",value:function(){var e=this;if(this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate,0==this.selectedVehicle.id)this.common.showToast("please enter registration number !!");else if(0==this.accountService.selected.branch.id)this.common.showError("please Select Branch !!");else{this.getTripExpences(),console.log("this.selectedVehicle.id",this.selectedVehicle.regno);var t={vehId:this.selectedVehicle.id};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",t).subscribe((function(t){console.log(t),e.common.loading--,e.showTripSummary(t.data),e.trips=t.data}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}}},{key:"showTripSummary",value:function(e){var t=this;this.common.params={vehId:this.selectedVehicle.id,tripDetails:e,vehname:this.selectedVehicle.regno,firstDate:this.startdate,endDate:this.enddate},1==this.routId?this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data123: ",e.status),e.status&&(console.log("response Data123: ",e.status),t.selectedVehicle.id=0,t.getTripExpences())})):this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data321: ",e.status),e.status&&(console.log("response Data1234: ",e.status),t.selectedVehicle.id=0,t.getTripExpences())}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;console.log("Active event",e),"enter"==t&&(n.includes("suggestion")?this.setFoucus("vchtype"):n.includes("vchtype")?this.setFoucus("startdate"):n.includes("startdate")?this.setFoucus("enddate"):n.includes("enddate")&&this.setFoucus("btnSubmit")),"backspace"!=t&&"delete"!=t||"suggestion"!=n||(this.selectedVehicle.id=0),(t.includes("arrowup")||t.includes("arrowdown"))&&!n&&this.showtripvoucher.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.showtripvoucher.length-1&&this.selectedRow++)}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"checkedAllSelected",value:function(){this.checkedTrips=[];for(var e=this.findFirstSelectInfo("index");e<=this.findLastSelectInfo("index");e++)this.trips[e].isChecked=!0,this.checkedTrips.push(this.trips[e])}},{key:"getFuelFillings",value:function(){var e=this;console.log(this.findFirstSelectInfo(),this.findLastSelectInfo());var t={vehId:this.selectedVehicle.id,lastFilling:this.findFirstSelectInfo(),currentFilling:this.findLastSelectInfo()};this.common.loading++,this.api.post("FuelDetails/getFillingsBwTime",t).subscribe((function(t){console.log(t),e.common.loading--,e.fuelFilings=t.data||[]}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"findFirstSelectInfo",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"startDate",t={startDate:"",index:-1},n=0;n<this.trips.length;n++)if(this.trips[n].isChecked){t.startDate=this.trips[n].start_time,t.index=n;break}return t[e]}},{key:"findLastSelectInfo",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"endDate",t={endDate:"",index:-1},n=this.trips.length-1;n>=0;n--)if(this.trips[n].isChecked){t.endDate=this.trips[n].end_time,t.index=n;break}return t[e]}},{key:"getHeads",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/getLedgerHeadList",{}).subscribe((function(t){console.log(t),e.common.loading--,e.tripHeads=t.data,e.tripHeads.map((function(t){var n=[];e.trips.map((function(e){e.isChecked&&n.push({id:e.id,amount:0,start_time:e.start_time,end_time:e.end_time,start_name:e.start_name,end_name:e.end_name})})),t.trips=n,t.total=0;var o=[];e.fuelFilings.map((function(e){e.isChecked&&o.push({id:e.id})})),t.fuelFilings=o}))}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"addVoucher",value:function(){var e=this;console.log("Trips: ",this.tripHeads);var t={vehId:this.selectedVehicle.id,voucher_details:this.tripHeads};this.common.loading++,this.api.post("TripExpenseVoucher/InsertTripExpenseVoucher",t).subscribe((function(t){console.log("Res: ",t),e.common.loading--}),(function(t){console.log(t),e.common.loading--}))}},{key:"calculateTripHeadTotal",value:function(e){var t=this;console.log("Index: ",e),this.tripHeads[e].total=0,this.tripHeads[e].trips.map((function(n){t.tripHeads[e].total+=n.amount})),console.log("Total: ",this.tripHeads[e].total)}},{key:"getTripSummary",value:function(){var e=this,t={vehId:this.selectedVehicle.id?this.selectedVehicle.id:0};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVouchers",t).subscribe((function(t){console.log("trip expence 11",t),e.common.loading--,e.tripVouchers=t.data}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"getPendingOnEditTrips",value:function(){var e=this;return new Promise((function(t,n){if(0==e.selectedVehicle.id)e.common.showToast("please enter registration number !!"),n();else{var o={vehId:e.selectedVehicle.id};e.common.loading++,e.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe((function(n){console.log(n),e.common.loading--,e.TripEditData=n.data,e.trips=n.data,t()}),(function(t){console.log(t),e.common.loading--,e.common.showError(),n()}))}}))}},{key:"getTripExpences",value:function(){var e=this;return new Promise((function(t,n){var o={vehId:e.selectedVehicle.id?e.selectedVehicle.id:0,startdate:e.startdate,enddate:e.enddate,isdate:e.vchdt};e.common.loading++,e.api.post("VehicleTrips/getTripExpenceFilterVoucher",o).subscribe((function(n){console.log("trip expence 22",n),e.common.loading--,e.tripVouchers=n.data,t()}),(function(t){console.log(t),e.common.loading--,e.common.showError(),n()}))}))}},{key:"getSearchTripExpences",value:function(){var e=this;this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate;var t={vehId:this.selectedVehicle.id?this.selectedVehicle.id:0,startdate:this.startdate,enddate:this.enddate,isdate:this.vchdt,routid:this.routId};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceFilterVoucher",t).subscribe((function(t){console.log("trip expence 33",t),e.common.loading--,e.showtripvoucher=e.tripVouchers=t.data,e.selectedRow=0}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"getVoucherSummary",value:function(e){var t=this;if(0!=this.accountService.selected.branch.id){var n=[];this.selectedVehicle.id=e.y_vehicle_id,n.push(this.getTripExpences()),n.push(this.getPendingOnEditTrips()),n.push(this.getPendingTripsEditTime(e.y_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then((function(n){t.showVoucherSummary(t.tripExpenseVoucherTrips,e)})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}else this.common.showError("Please Select Branch")}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"showVoucherSummary",value:function(e,t){var n=this,o=this.selectedVehicle.id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;console.log("type id",t.y_vouchertype_id),-151==t.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data active element: ",e),e.status&&(n.selectedVehicle.id=0,n.getSearchTripExpences()),n.selectedVehicle.id=0}))):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data active element 2: ",e),e.status&&(n.selectedVehicle.id=0,n.getSearchTripExpences()),n.selectedVehicle.id=0})))}},{key:"deleteVoucherEntry",value:function(e){var t=this,n={voucherId:e.id};console.log("params",n),this.common.loading++,this.api.post("TripExpenseVoucher/deleteTripExpenseVouchers",n).subscribe((function(e){t.common.loading--,console.log("res",e.data),e.success&&(t.common.showToast("Success!!"),t.getTripSummary())}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Trip Voucher Expence :"+e.startdate+" To :"+e.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Hn)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},Hn.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Hn,selectors:[["trip-voucher-expense"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:68,vars:5,consts:[[2,"padding-top","26px",3,"keydown"],[1,"row","pdf-exel-icon"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row",2,"margin","0"],[1,"col-3","pl-0","pr-0"],[1,"left-box"],[1,"row"],[1,"col-sm-8","pl-0"],[1,"tjr-label"],[1,"vehicle_no_input"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Enter Reg No",3,"preSelected","onSelected"],[1,"col-sm-4","pl-0"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"fa","fa-plus"],[1,"col-9","pl-0","pr-0"],[1,"col-sm-3","pr-0"],[1,"form-group","m-0"],["id","vchtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["value","1"],["value","0"],["type","text","autocomplete","off","placeholder","Select Date","name","date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-sm-2"],["id","btnSubmit",1,"btn","btn-primary","mt-3",3,"click"],[1,"mt-3"],["id","table",1,"table","table-bordered","m-0"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"],[4,"ngIf"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"span",2),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](4,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](6,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",6),h["\u0275\u0275elementStart"](8,"div",7),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"div",10),h["\u0275\u0275elementStart"](12,"label",11),h["\u0275\u0275text"](13,"Vehicle No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",12),h["\u0275\u0275elementStart"](15,"auto-suggestion",13),h["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",14),h["\u0275\u0275elementStart"](17,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getPendingTrips()})),h["\u0275\u0275element"](18,"i",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",17),h["\u0275\u0275elementStart"](20,"div",8),h["\u0275\u0275elementStart"](21,"div",9),h["\u0275\u0275elementStart"](22,"div",18),h["\u0275\u0275elementStart"](23,"div",19),h["\u0275\u0275elementStart"](24,"label",11),h["\u0275\u0275text"](25,"Filter Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"select",20),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vchdt=e})),h["\u0275\u0275elementStart"](27,"option",21),h["\u0275\u0275text"](28,"Voucher Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"option",22),h["\u0275\u0275text"](30,"Entry Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",18),h["\u0275\u0275elementStart"](32,"div",19),h["\u0275\u0275elementStart"](33,"label",11),h["\u0275\u0275text"](34,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"input",23),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",18),h["\u0275\u0275elementStart"](37,"div",19),h["\u0275\u0275elementStart"](38,"label",11),h["\u0275\u0275text"](39,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"input",24),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"div",25),h["\u0275\u0275elementStart"](42,"button",26),h["\u0275\u0275listener"]("click",(function(){return t.getSearchTripExpences()})),h["\u0275\u0275text"](43,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",27),h["\u0275\u0275elementStart"](45,"table",28),h["\u0275\u0275elementStart"](46,"thead",29),h["\u0275\u0275elementStart"](47,"tr"),h["\u0275\u0275elementStart"](48,"th"),h["\u0275\u0275text"](49,"SN"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"th"),h["\u0275\u0275text"](51,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](52,"th"),h["\u0275\u0275text"](53,"Vehicle Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"th"),h["\u0275\u0275text"](55,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](56,"th"),h["\u0275\u0275text"](57,"Ref No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](58,"th"),h["\u0275\u0275text"](59,"Trip Start"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](60,"th"),h["\u0275\u0275text"](61,"Trip End"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](62,"th"),h["\u0275\u0275text"](63,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](64,"th"),h["\u0275\u0275text"](65," Is Approved"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](66,"tbody"),h["\u0275\u0275template"](67,Yn,19,13,"tr",30),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](15),h["\u0275\u0275property"]("preSelected",null),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngModel",t.vchdt),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](27),h["\u0275\u0275property"]("ngForOf",t.showtripvoucher))},directives:[b.s,b.r,jn.a,F.D,F.r,F.u,F.w,F.G,F.d,F.m,D.t,D.r,D.u],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 230px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}[_nghost-%COMP%]     .vehicle_no_input auto-suggestion .tagsinput{border:0}[_nghost-%COMP%]     .vehicle_no_input auto-suggestion .tagsinput input{width:100%}.left-box[_ngcontent-%COMP%]{border-radius:3px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.pdf-exel-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),Hn),qn=i("1+iI"),Kn=i("OZ+k");function Un(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](3).$implicit,o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("",o.labels," ",n.name,"")}}function Wn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](3).$implicit,o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("",o.labels," ",n.ledgerName,"")}}function Qn(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275template"](1,Un,2,2,"span",0),h["\u0275\u0275template"](2,Wn,2,2,"span",0),h["\u0275\u0275text"](3,"\xa0"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.ledgerName)}}function Jn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Xn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Zn(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function eo(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function to(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.debit,"1.2-2")," ")}}function no(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.credit,"1.2-2")," ")}}function oo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"](2);return t.activeIndex=t.activeIndex!==e?e:-1})),h["\u0275\u0275template"](1,Qn,4,2,"div",6),h["\u0275\u0275template"](2,Jn,2,0,"div",6),h["\u0275\u0275template"](3,Xn,2,0,"div",6),h["\u0275\u0275template"](4,Zn,2,0,"div",6),h["\u0275\u0275template"](5,eo,2,0,"div",6),h["\u0275\u0275template"](6,to,3,4,"div",7),h["\u0275\u0275template"](7,no,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function ao(e,t){if(1&e&&h["\u0275\u0275element"](0,"out-standing-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("color",i.color+1)("data",o.data)("action",i.action)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}var io=function(e){return{highlight:e}};function ro(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit,t=h["\u0275\u0275nextContext"](2);return e.y_voucher_type_name.toLowerCase().includes("voucher")?e.y_voucher_type_name.toLowerCase().includes("trip")?t.action(e,"",e.y_voucher_type_name,e):t.action(e.y_voucherid,e.y_code,e.y_voucher_type_name,e):t.action(e.y_voucherid,"",e.y_voucher_type_name,e)}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](2).selectedRow=e})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",8),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",8),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",8),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",8),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",8),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](16,io,r.selectedRow==a)),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](i.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.y_voucher_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,7,i.y_voucher_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](i.y_voucher_type_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,10,i.y_dramunt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,13,i.y_cramunt,"1.2-2"))}}function lo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,oo,8,9,"div",2),h["\u0275\u0275template"](2,ao,1,6,"out-standing-tree",3),h["\u0275\u0275template"](3,ro,18,18,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function co(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,lo,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function so(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",37),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerList)}}function mo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",38),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"groupid","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.secondarygroup)}}function uo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",39),h["\u0275\u0275elementStart"](1,"div",40),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](2,"div",33),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",33),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",33),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",33),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",33),h["\u0275\u0275text"](11,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",41),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",41),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](18,"out-standing-tree",42),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](10),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,7,o.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,10,o.credit,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("data",o.data)("action",i.openinvoicemodel.bind(i))("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)}}function po(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",43),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",44),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",45),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.outStanding[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.outStanding[o.f2Date])}}var go,ho,vo=".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px!important;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:16px!important}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}nb-card-body[_ngcontent-%COMP%]{padding:0}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:12.5%;max-width:12.5%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:13px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.8%}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:14px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-sub-stocktype[_ngcontent-%COMP%]{color:#fff;font-size:14px}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-stockitem[_ngcontent-%COMP%]{color:#fff;font-size:14px;border-bottom:1px solid #fff;padding-left:23px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.5%}.x-branch[_ngcontent-%COMP%]{background:#8daab8;color:#fff;font-size:14px}.x-branch[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-warehouse[_ngcontent-%COMP%]{background:#c8c8c8;color:#000;font-size:14px}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-left:1px solid #630707}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-left:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.x-sub-stocktype[_ngcontent-%COMP%], .x-warehouse[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{margin-left:-9px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:child(7){margin-right:24px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right;margin-left:-7px;margin-right:22px}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 280px);overflow:auto;width:100%}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}",fo=((ho=function(){function e(t,n,o,i){a(this,e),this.common=t,this.modalService=n,this.user=o,this.accountService=i,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a8a5ad"],this.deletedId=0}return r(e,[{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if((t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++),e.ctrlKey&&"d"===t&&this.data.length&&-1!=this.selectedRow)return this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("voucher")?!this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("trip")&&this.openVoucherEdit(this.data[this.selectedRow].y_voucherid,6,this.data[this.selectedRow].y_vouchertype_id):this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("invoice")&&this.openinvoicemodeledit(this.data[this.selectedRow].y_voucherid,this.data[this.selectedRow].y_vouchertype_id,1),void e.preventDefault()}},{key:"openVoucherEdit",value:function(e,t,n){var o=this;console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e),e.delete&&o.getaction()})))}},{key:"openinvoicemodeledit",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.common.params={invoiceid:e,delete:0,newid:o,ordertype:t,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e),e.msg&&n.getaction()})),this.common.currentPage="OutStanding Report"}}]),e}()).\u0275fac=function(e){return new(e||ho)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](u.a))},ho.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ho,selectors:[["out-standing-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","row x-sub-stocktype",3,"background","click",4,"ngIf"],[3,"color","data","action","isExpandAll","active","labels",4,"ngIf"],["style","cursor:pointer","class","row x-warehouse",3,"ngClass","dblclick","click",4,"ngIf"],[1,"row","x-sub-stocktype",2,"cursor","pointer",3,"click"],["class","col x-col",4,"ngIf"],["class","col x-col","style","text-align:right;",4,"ngIf"],[1,"col","x-col"],[1,"col","x-col",2,"text-align","right"],[3,"color","data","action","isExpandAll","active","labels"],[1,"row","x-warehouse",2,"cursor","pointer",3,"ngClass","dblclick","click"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,co,2,1,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},directives:[D.u,D.t,ho,D.r],pipes:[D.g,D.f],styles:[vo]}),ho),bo=((go=function(){function t(e,n,o,i,r,l,c){a(this,t),this.api=e,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.modalService=c,this.vouchertypedata=[],this.fuelFilings=[],this.branchdata=[],this.activedateid="",this.selectedName="",this.secondarygroup=[],this.outStanding={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"",id:""},trantype:0,groupid:{name:"All",id:0}},this.ledgerData=[],this.voucherEntries=[],this.ledgerList=[],this.activeId="ledger",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.headingName="",this.selectedRow=-1,this.viewType="sub",this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.outStanding.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.outStanding.endDate,this.common.refresh=this.refresh.bind(this),this.getLedgerList(),this.setFoucus("ledger"),this.getSecondaryGoup(),this.common.currentPage="Outstanding Report",this.headingName=this.user._customer.name+"( "+this.accountService.selected.branch.name+" ) From :"+this.outStanding.startDate+" To "+this.outStanding.endDate}return r(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getLedgerList(),this.setFoucus("ledger")}},{key:"getSecondaryGoup",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.secondarygroup=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerList=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgerView",value:function(){var e=this;this.outStanding.startDate=this.accountService.fromdate,this.outStanding.endDate=this.accountService.todate,console.log("Ledger:",this.outStanding);var t={startdate:this.outStanding.startDate,enddate:this.outStanding.endDate,ledger:this.outStanding.ledger.id,branch:this.outStanding.branch.id,trantype:this.outStanding.trantype,groupid:this.outStanding.groupid.id};this.common.loading++,this.api.post("Accounts/GetOutStandingList",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data,e.generalizeData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.outStanding[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.outStanding[e])}))}},{key:"openVoucherDetail",value:function(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"openinvoicemodel",value:function(e,t,n,o){n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):n.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e)})))}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.outStanding.startDate,currentFilling:t.outStanding.endDate,fuelstationid:e.y_refid,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e)}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.outStanding.startDate,currentFilling:o.outStanding.endDate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("balance-sheet",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Out Standing From :"+e.outStanding.startDate+" To :"+e.outStanding.endDate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"onSelected",value:function(e,t,n){this.outStanding[t].name=e[n],this.outStanding[t].id=e.id}},{key:"filterData",value:function(e){return e}},{key:"generalizeData",value:function(){var e=this;this.voucherEntries=[];for(var t=function(t){var n=e.ledgerData[t],o=n.y_path.split("--\x3e");n.labels=o.splice(1,o.length);var a=e.voucherEntries.findIndex((function(e){return e.name===o[0]}));-1===a?e.voucherEntries.push({name:o[0],data:[n],debit:n.y_ledger_name?parseFloat(n.y_dramunt):0,credit:n.y_ledger_name?parseFloat(n.y_cramunt):0}):(e.voucherEntries[a].debit+=n.y_ledger_name?parseFloat(n.y_dramunt):0,e.voucherEntries[a].credit+=n.y_ledger_name?parseFloat(n.y_cramunt):0,n.y_ledger_name&&e.voucherEntries[a].data.push(n))},n=0;n<this.ledgerData.length;n++)t(n);this.voucherEntries.map((function(t){return t.data=e.findChilds(t.data)})),console.log("voucherEntries",this.voucherEntries)}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length&&function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],debit:t.y_ledger_name?parseFloat(t.y_dramunt):0,credit:t.y_ledger_name?parseFloat(t.y_cramunt):0}):(n[i].debit+=t.y_ledger_name?parseFloat(t.y_dramunt):0,n[i].credit+=t.y_ledger_name?parseFloat(t.y_cramunt):0,t.y_ledger_name&&n[i].data.push(t))}();if(n.length)return n.map((function(e){return{name:e.name,data:t.findChilds(e.data),debit:e.debit,credit:e.credit}}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in console.log("Groups:",i),i)if(i[r].length>1){var l={name:r,ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dramunt)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cramunt)}),0)};a.push(l)}else{var c={name:r,ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dramunt)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cramunt)}),0)};a.push(c)}return a}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.outStanding.startDate=this.common.handleDateOnEnterNew(this.outStanding.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")?this.setFoucus("groupid"):this.activeId.includes("groupid")?(this.outStanding.endDate=this.common.handleDateOnEnterNew(this.outStanding.endDate),this.setFoucus("trantype")):this.activeId.includes("trantype")&&(this.outStanding.endDate=this.common.handleDateOnEnterNew(this.outStanding.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"groupid"==this.activeId&&this.setFoucus("endDate"),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.outStanding[o].includes("-"))t=this.outStanding[o].split("-");else{if(!this.outStanding[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.outStanding[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.outStanding[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"handleGroupView",value:function(e){-1===this.activeGroup.indexOf(e)?this.activeGroup.push(e):this.activeGroup.splice(this.activeGroup.indexOf(e),1)}},{key:"showAllGroups",value:function(){this.activeGroup=this.voucherEntries.map((function(e,t){return t}))}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log("Error:",e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Kn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"generateCsvData",value:function(){var e=[];e.push(Object.assign({liability:" Liability",liabilityAmount:"Amount"})),this.voucherEntries.forEach((function(t){e.push({liability:"(MG)"+t.name,liabilityAmount:t.amount}),t.subGroups.forEach((function(t){e.push({liability:"(SG)"+t.name,liabilityAmount:t.total}),t.balanceSheets.forEach((function(t){e.push({liability:"(L)"+t.y_ledger_name,liabilityAmount:t.y_amount})}))}))}));for(var t=[],n=0;n<e.length;n++)e[n]&&n<e.length-1&&t.push(Object.assign({},e[n],{asset:"",assetAmount:""}));t.push(Object.assign({},e[e.length-1])),t.push(Object.assign({},{"":"MG = Main Group ,SG = Sub Group, L = Ledger"})),this.csvService.jsonToExcel(t),console.log("Merged:",t)}},{key:"csvFunction",value:function(){var t=this,n=[];n.push(Object.assign({particular:"Particular",ledgerName:"Ledger Name",voucherCode:"Voucher Code",voucherCustCode:"Voucher Cust Code",voucherDate:"Voucher Date",voucherType:"Voucher Type",drAmount:"Dr Amount",crAmount:"Cr Amount"})),this.voucherEntries.forEach((function(o){n.push({particular:o.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:o.debit,crAmount:o.credit}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),this.csvService.jsonToExcel(n)}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:i.debit,crAmount:i.credit}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:"",ledgerName:i.y_ledger_name?i.y_ledger_name:"",voucherCode:i.y_code?i.y_code:"",voucherCustCode:i.y_voucher_cust_code?i.y_voucher_cust_code:"",voucherDate:i.y_voucher_date?i.y_voucher_date:"",voucherType:i.y_voucher_type_name?i.y_voucher_type_name:"",drAmount:i.y_dramunt,crAmount:i.y_cramunt})}return o}},{key:"printX",value:function(){console.log(this.isExpand)}}]),t}()).\u0275fac=function(e){return new(e||go)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},go.\u0275cmp=h["\u0275\u0275defineComponent"]({type:go,selectors:[["outstanding"]],decls:82,vars:16,consts:[[2,"padding-top","0px","border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["autocomplete","off","type","text","id","groupid","name","groupid",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"debit_box"],[1,"debit"],["autocomplete","off","type","radio","name","trantype","id","trantype",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"credit"],["autocomplete","off","type","radio","name","trantype","id","trantype1",1,"form-control",3,"ngModel","value","ngModelChange"],["autocomplete","off","type","radio","name","trantype","id","trantype2",1,"form-control",3,"ngModel","value","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","5px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"width","100%","margin","0"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","ledger","display","name",3,"data","select"],["targetId","groupid","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],["labels","",3,"data","action","isExpandAll","active"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"span",2),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),h["\u0275\u0275element"](3,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275elementStart"](8,"input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"span",8),h["\u0275\u0275elementStart"](11,"input",9),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](12," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",10),h["\u0275\u0275elementStart"](14,"div",11),h["\u0275\u0275elementStart"](15,"div",10),h["\u0275\u0275elementStart"](16,"div",12),h["\u0275\u0275elementStart"](17,"div",13),h["\u0275\u0275elementStart"](18,"label",14),h["\u0275\u0275text"](19,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",12),h["\u0275\u0275elementStart"](22,"div",13),h["\u0275\u0275elementStart"](23,"label",14),h["\u0275\u0275text"](24,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"input",16),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",12),h["\u0275\u0275elementStart"](27,"div",13),h["\u0275\u0275elementStart"](28,"label",14),h["\u0275\u0275text"](29,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",10),h["\u0275\u0275elementStart"](32,"div",18),h["\u0275\u0275elementStart"](33,"div",13),h["\u0275\u0275elementStart"](34,"label",14),h["\u0275\u0275text"](35,"Goup Id"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"input",19),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.groupid.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",18),h["\u0275\u0275elementStart"](38,"div",13),h["\u0275\u0275elementStart"](39,"label",14),h["\u0275\u0275text"](40,"Outstanding Balance"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"div",20),h["\u0275\u0275elementStart"](42,"div",21),h["\u0275\u0275elementStart"](43,"span"),h["\u0275\u0275text"](44,"Debit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"input",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",23),h["\u0275\u0275elementStart"](47,"span"),h["\u0275\u0275text"](48,"Credit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"input",24),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"div",23),h["\u0275\u0275elementStart"](51,"span"),h["\u0275\u0275text"](52,"All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"input",25),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"div",18),h["\u0275\u0275elementStart"](55,"div",13),h["\u0275\u0275elementStart"](56,"button",26),h["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),h["\u0275\u0275text"](57,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](58,"div",27),h["\u0275\u0275elementStart"](59,"div",28),h["\u0275\u0275template"](60,so,2,1,"div",29),h["\u0275\u0275template"](61,mo,2,1,"div",29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](62,"div",30),h["\u0275\u0275elementStart"](63,"div",31),h["\u0275\u0275elementStart"](64,"div",32),h["\u0275\u0275elementStart"](65,"div",33),h["\u0275\u0275text"](66,"Particular"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](67,"div",33),h["\u0275\u0275text"](68,"Voucher Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](69,"div",33),h["\u0275\u0275text"](70,"Voucher Cust Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](71,"div",33),h["\u0275\u0275text"](72,"Voucher Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](73,"div",33),h["\u0275\u0275text"](74,"Voucher Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](75,"div",33),h["\u0275\u0275text"](76,"Dr Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](77,"div",33),h["\u0275\u0275text"](78,"Cr Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](79,"div",34),h["\u0275\u0275template"](80,uo,19,13,"div",35),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](81,po,4,1,"div",36)),2&e&&(h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.outStanding.ledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.outStanding.groupid.name),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",0),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",1),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",-1),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("groupid")),h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngForOf",t.voucherEntries),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.u,D.t,V.a,fo],pipes:[D.g],styles:[vo]}),go),xo=i("0CUS"),yo=i("FoUt"),Co=i("eu2l");function _o(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275elementStart"](1,"h4",22),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"i",23),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().activeModal.dismiss()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.currentPage)}}function So(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",41),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).onSelected(e,"stockType","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.StockTypeData)}}function ko(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",42),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).onSelected(e,"stockSubType","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.StockSubTypeData)}}function Mo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",43),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).onSelected(e,"stockItem","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.StockIemData)}}function Eo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",44),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).onSelected(e,"wherehouse","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.StockWhereHouseData)}}function wo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",24),h["\u0275\u0275elementStart"](1,"div",25),h["\u0275\u0275elementStart"](2,"div",24),h["\u0275\u0275elementStart"](3,"div",26),h["\u0275\u0275elementStart"](4,"div",27),h["\u0275\u0275elementStart"](5,"label",28),h["\u0275\u0275text"](6,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"input",29),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().outStanding.stockType.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",26),h["\u0275\u0275elementStart"](9,"div",27),h["\u0275\u0275elementStart"](10,"label",28),h["\u0275\u0275text"](11,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"input",30),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().outStanding.stockSubType.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",26),h["\u0275\u0275elementStart"](14,"div",27),h["\u0275\u0275elementStart"](15,"label",28),h["\u0275\u0275text"](16,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"input",31),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().outStanding.stockItem.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",26),h["\u0275\u0275elementStart"](19,"div",27),h["\u0275\u0275elementStart"](20,"label",28),h["\u0275\u0275text"](21,"Ware House"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"input",32),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().outStanding.wherehouse.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",24),h["\u0275\u0275elementStart"](24,"div",33),h["\u0275\u0275elementStart"](25,"div",27),h["\u0275\u0275elementStart"](26,"label",28),h["\u0275\u0275text"](27,"Start Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"input",34),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",33),h["\u0275\u0275elementStart"](30,"div",27),h["\u0275\u0275elementStart"](31,"label",28),h["\u0275\u0275text"](32,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"input",35),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",36),h["\u0275\u0275elementStart"](35,"div",27),h["\u0275\u0275elementStart"](36,"button",37),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().getStockSummary()})),h["\u0275\u0275text"](37,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"div",38),h["\u0275\u0275elementStart"](39,"div",39),h["\u0275\u0275template"](40,So,2,1,"div",40),h["\u0275\u0275template"](41,ko,2,1,"div",40),h["\u0275\u0275template"](42,Mo,2,1,"div",40),h["\u0275\u0275template"](43,Eo,2,1,"div",40),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",o.outStanding.stockType.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.outStanding.stockSubType.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.outStanding.stockItem.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.outStanding.wherehouse.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",o.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.accountService.todate),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",o.activeId.includes("stocktype")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.activeId.includes("stocksubtype")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.activeId.includes("stockItem")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.activeId.includes("wherehouse"))}}function Po(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",54),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"](2).index,o=h["\u0275\u0275nextContext"]().index,a=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().handleExpandation(e,a,"liabilities","branch",o,t,0)}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](2).$implicit;return h["\u0275\u0275nextContext"](3).openmodal(e.data[0].data[0],"stock")})),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",16),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",16),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",16),h["\u0275\u0275text"](8,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",16),h["\u0275\u0275text"](10,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",16),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",16),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",16),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",16),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",16),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",16),h["\u0275\u0275text"](22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",16),h["\u0275\u0275text"](24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",16),h["\u0275\u0275text"](26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",16),h["\u0275\u0275text"](28),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",16),h["\u0275\u0275text"](30),h["\u0275\u0275pipe"](31,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275text"](33),h["\u0275\u0275pipe"](34,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](o.totalqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalpurchase),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalsales),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalissue),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalwastage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totaldebit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalcredit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalnet),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](31,12,o.totalopeamt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](34,15,o.totalcloamt,"1.2-2"))}}function Oo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",55),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"](2),o=t.index,a=t.index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().handleExpandation(e,r,"liabilities","warehouse",i,o,a)}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](2).$implicit;return h["\u0275\u0275nextContext"](3).openmodal(e.data[0].data[0],"stock")})),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",16),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",16),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",16),h["\u0275\u0275text"](8,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",16),h["\u0275\u0275text"](10,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",16),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",16),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",16),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",16),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",16),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",16),h["\u0275\u0275text"](22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",16),h["\u0275\u0275text"](24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",16),h["\u0275\u0275text"](26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",16),h["\u0275\u0275text"](28),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",16),h["\u0275\u0275text"](30),h["\u0275\u0275pipe"](31,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275text"](33),h["\u0275\u0275pipe"](34,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](o.totalqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalpurchase),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalsales),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalissue),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalwastage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totaldebit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalcredit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalnet),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](31,12,o.totalopeamt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](34,15,o.totalcloamt,"1.2-2"))}}function Io(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Po,35,18,"div",52),h["\u0275\u0275template"](2,Oo,35,18,"div",53),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](4);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==n.branchid),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=n.branchid)}}var Do=function(e){return{highlight:e}};function Vo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",56),h["\u0275\u0275listener"]("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).openmodal(e.data[0].data[0],"stock")}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"]().index,o=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().selectedRow=o+t+e+0+0})),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",16),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",16),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",16),h["\u0275\u0275text"](8,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",16),h["\u0275\u0275text"](10,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",16),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",16),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",16),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",16),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",16),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",16),h["\u0275\u0275text"](22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",16),h["\u0275\u0275text"](24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",16),h["\u0275\u0275text"](26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",16),h["\u0275\u0275text"](28),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",16),h["\u0275\u0275text"](30),h["\u0275\u0275pipe"](31,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275text"](33),h["\u0275\u0275pipe"](34,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"]().index,l=h["\u0275\u0275nextContext"]().index,c=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](19,Do,c.selectedRow==l+r+a+0+0)),h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](i.name),h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](i.totalqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalpurchase),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalsales),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalissue),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalwastage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totaldebit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalcredit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.totalnet),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](31,13,i.totalopeamt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](34,16,i.totalcloamt,"1.2-2"))}}function Fo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",48),h["\u0275\u0275elementStart"](1,"div",58),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]().index,a=h["\u0275\u0275nextContext"](2).index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().selectedRow=r+i+a+o+e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](6).openmodal(e,"warehouse")})),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",16),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",16),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",16),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",16),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",16),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",16),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",16),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",16),h["\u0275\u0275text"](23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",16),h["\u0275\u0275text"](25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",16),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275text"](31),h["\u0275\u0275pipe"](32,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34),h["\u0275\u0275pipe"](35,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"](2).index,l=h["\u0275\u0275nextContext"]().index,c=h["\u0275\u0275nextContext"]().index,d=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==d.active.liabilities.warehouse.indexOf("warehouse"+c+l+r+i)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](20,Do,d.selectedRow==c+l+r+i+a)),h["\u0275\u0275advance"](10),h["\u0275\u0275textInterpolate"](o.y_warehouse_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_opn_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_st_rec_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_pi_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_si_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_st_issue_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_wst_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_dn_qty,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cn_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_net_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](32,14,o.y_opn_amt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](35,17,o.y_clos_amt,"1.2-2"))}}function To(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",48),h["\u0275\u0275elementStart"](1,"div",57),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index,a=h["\u0275\u0275nextContext"](2).index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().handleExpandation(e,r,"liabilities","warehouse",i,a,o)}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](5).openmodal(e.data[0],"branch")})),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",16),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",16),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",16),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",16),h["\u0275\u0275text"](11,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",16),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",16),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",16),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",16),h["\u0275\u0275text"](23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",16),h["\u0275\u0275text"](25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",16),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275text"](31),h["\u0275\u0275pipe"](32,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34),h["\u0275\u0275pipe"](35,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](36,Fo,36,22,"div",47),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](2).index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]().index,l=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==l.active.liabilities.branch.indexOf("branch"+r+i+a+0)),h["\u0275\u0275advance"](9),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](o.totalopngqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.purchasetotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.salestotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.issuetotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.wastagetotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.debittotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.credittotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.nettotal),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](32,14,o.opnamttotal,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](35,17,o.cloamttotal,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.data)}}function Bo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,To,37,20,"div",47),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function Ao(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",48),h["\u0275\u0275elementStart"](1,"div",58),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](3),t=e.index,o=e.index,a=h["\u0275\u0275nextContext"]().index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]();return r.selectedRow=i+a+t+o+r.m}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](6).openmodal(e,"warehouse")})),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",16),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",16),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",16),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",16),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",16),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",16),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",16),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",16),h["\u0275\u0275text"](23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",16),h["\u0275\u0275text"](25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",16),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275text"](31),h["\u0275\u0275pipe"](32,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34),h["\u0275\u0275pipe"](35,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](3),i=a.index,r=a.index,l=h["\u0275\u0275nextContext"]().index,c=h["\u0275\u0275nextContext"]().index,d=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==d.active.liabilities.warehouse.indexOf("warehouse"+c+l+i+r)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](20,Do,d.selectedRow==c+l+i+r+d.m)),h["\u0275\u0275advance"](10),h["\u0275\u0275textInterpolate"](o.y_warehouse_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_opn_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_st_rec_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_pi_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_si_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_st_issue_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_wst_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_dn_qty,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cn_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_net_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](32,14,o.y_opn_amt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](35,17,o.y_clos_amt,"1.2-2"))}}function Lo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Ao,36,22,"div",47),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function Ro(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Lo,2,1,"div",59),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function jo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",48),h["\u0275\u0275template"](1,Io,3,2,"div",50),h["\u0275\u0275template"](2,Vo,35,21,"div",51),h["\u0275\u0275template"](3,Bo,2,1,"div",50),h["\u0275\u0275template"](4,Ro,2,1,"div",50),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().index,o=h["\u0275\u0275nextContext"]().index,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==a.active.liabilities.subGroup.indexOf("subGroup"+o+n+0)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==a.warehouseid),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=a.warehouseid),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==a.warehouseid&&0==a.branchid),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==a.warehouseid&&0!=a.branchid)}}function zo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",48),h["\u0275\u0275elementStart"](1,"div",49),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index,a=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().handleExpandation(e,a,"liabilities","subGroup",o,0,0)})),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",16),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",16),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",16),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",16),h["\u0275\u0275text"](11,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",16),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",16),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",16),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",16),h["\u0275\u0275text"](23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",16),h["\u0275\u0275text"](25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",16),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275text"](31),h["\u0275\u0275pipe"](32,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34),h["\u0275\u0275pipe"](35,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](36,jo,5,5,"div",47),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"]().index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==i.active.liabilities.mainGroup.indexOf("mainGroup"+a+0)),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](8),h["\u0275\u0275textInterpolate"](o.totalqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalpurchase),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalsales),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalissue),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalwastage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totaldebit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalcredit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalnet),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](32,14,o.totalopeamt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](35,17,o.totalcloamt,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.data)}}function No(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",45),h["\u0275\u0275elementStart"](1,"div",46),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().handleExpandation(e,o,"liabilities","mainGroup",0,0,0)})),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",16),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",16),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",16),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",16),h["\u0275\u0275text"](11,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",16),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",16),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",16),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",16),h["\u0275\u0275text"](23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",16),h["\u0275\u0275text"](25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",16),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",16),h["\u0275\u0275text"](31),h["\u0275\u0275pipe"](32,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34),h["\u0275\u0275pipe"](35,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](36,zo,37,20,"div",47),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](10),h["\u0275\u0275textInterpolate"](o.totalqty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalstokrecive),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalpurchase),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalsales),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalissue),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalwastage),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totaldebit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalcredit),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.totalnet),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](32,13,o.totalopeamt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](35,16,o.totalcloamt,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.data)}}function Go(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",60),h["\u0275\u0275elementStart"](1,"div",61),h["\u0275\u0275element"](2,"div",62),h["\u0275\u0275elementStart"](3,"div",63),h["\u0275\u0275elementStart"](4,"button",64),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().activeModal.dismiss()})),h["\u0275\u0275text"](5,"Cancel "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Yo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",65),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",66),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",67),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.outStanding[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.outStanding[o.f2Date])}}var Ho,$o=((Ho=function(){function e(t,n,o,i,r,l,c,d){a(this,e),this.api=t,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.activeModal=c,this.modalService=d,this.vouchertypedata=[],this.branchdata=[],this.summaryreport=[],this.activedateid="",this.selectedName="",this.outStanding={Date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),stockType:{name:"All",id:0},stockSubType:{name:"All",id:0},stockItem:{name:"All",id:0},wherehouse:{name:"All",id:0}},this.branchid=0,this.warehouseid=0,this.active={liabilities:{mainGroup:[],subGroup:[],branch:[],warehouse:[],item:[]}},this.StockTypeData=[],this.StockSubTypeData=[],this.StockIemData=[],this.StockWhereHouseData=[],this.ledgerData=[],this.voucherEntries=[],this.ledgerList=[],this.activeId="ledger",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.headingName="",this.selectedRow=-1,this.viewType="main",this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.isModal=!1,this.sizeIndex=0,this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.outStanding.Date,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.outStanding.endDate,this.common.refresh=this.refresh.bind(this),this.getStockTypeList(),this.getWhereHouseList(),this.setFoucus("stocktype"),this.common.currentPage="Store Register",this.branchid=this.accountService.selected.branch.id,this.common.params&&this.common.params.startdate&&(this.accountService.fromdate=this.common.params.startdate,this.accountService.todate=this.common.params.enddate,this.getStockSummary(),this.common.params.isModal&&(this.isModal=!0),this.common.params.sizeIndex&&(this.sizeIndex=this.common.params.sizeIndex),this.common.params=null,this.common.handleModalSize("class","modal-lg","1200","px",this.sizeIndex))}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getStockTypeList(),this.getWhereHouseList(),this.setFoucus("ledger"),this.branchid=this.accountService.selected.branch.id,console.log("branchid",this.branchid)}},{key:"getStockTypeList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetTypeOfStock",{search:123,all:1}).subscribe((function(t){e.common.loading--,e.StockTypeData=t.data,console.log("Res stock type:",e.StockTypeData)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getWhereHouseList",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/GetWareHouse?search=123&all=1").subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.StockWhereHouseData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getStockSubtype",value:function(e){var t=this,n={stocktype:e};this.common.loading++,this.api.post("Suggestion/GetSearchStockType",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.StockSubTypeData=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getStockItem",value:function(e){var t=this,n={stocksubtype:e};this.common.loading++,this.api.post("Suggestion/GetStockItemData",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.StockIemData=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getStockSummary",value:function(){var e=this;this.outStanding.Date=this.accountService.fromdate,this.outStanding.endDate=this.accountService.todate,console.log("Ledger:",this.outStanding);var t={data:this.outStanding};this.common.loading++,this.api.post("Company/GetStockSummary",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data,e.generalizeData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.outStanding[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.outStanding[e])}))}},{key:"openVoucherDetail",value:function(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"openinvoicemodel",value:function(e){this.common.params={invoiceid:e,delete:0,indexlg:0},this.modalService.open(yo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&console.log("open succesfull")}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("balance-sheet",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"onSelected",value:function(e,t,n){this.outStanding[t].name=e[n],this.outStanding[t].id=e.id,"stockType"==t&&this.getStockSubtype(e.id),"stockSubType"==t&&this.getStockItem(e.id),"wherehouse"==t&&(this.warehouseid=e.id)}},{key:"filterData",value:function(e){return e}},{key:"generalizeData",value:function(){var e=this;this.summaryreport=this.generateGroup(this.ledgerData,"y_stockitem_type_name").map((function(t){return t.data=e.generateGroup(t.data,"y_stockitem_subtype_name").map((function(t){return t.data=e.generateGroup(t.data,"y_stockitem_name").map((function(t){return t.data=e.generateGroup(t.data,"y_fobranch_name"),t})),t})),t})),console.log("summaryreport:",this.summaryreport),this.showAllGroups()}},{key:"generateGroup",value:function(e,t){var n=sn.groupBy(e,t);return Object.keys(n).map((function(e){return{name:e,data:n[e]}}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("stocktype")?this.setFoucus("stocksubtype"):this.activeId.includes("stocksubtype")?this.setFoucus("stockItem"):this.activeId.includes("stockItem")?this.setFoucus("wherehouse"):this.activeId.includes("wherehouse")?this.setFoucus("Date"):this.activeId.includes("endDate")?this.setFoucus("submit"):this.activeId.includes("Date")&&this.setFoucus("endDate");else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"Date"==this.activeId&&this.setFoucus("wherehouse"),"endDate"==this.activeId&&this.setFoucus("Date"),"wherehouse"==this.activeId&&this.setFoucus("stockItem"),"stockItem"==this.activeId&&this.setFoucus("stocksubtype"),"stocksubtype"==this.activeId&&this.setFoucus("stocktype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.summaryreport.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.summaryreport.length-1&&this.selectedRow++)}}},{key:"handleExpandation",value:function(e,t,n,o,a,i,r){var l=this;console.log(e,t,n,o,a,i,r),e.stopPropagation(),this.isSingleClick&&clearTimeout(this.isSingleClick),this.isSingleClick=setTimeout((function(){l.isSingleClick&&(-1===l.active[n][o].indexOf(o+t+a+i+r)?l.active[n][o].push(o+t+a+i+r):l.active[n][o].splice(l.active[n][o].indexOf(o+t+a+i+r),1))}),250)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.outStanding[o].includes("-"))t=this.outStanding[o].split("-");else{if(!this.outStanding[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.outStanding[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.outStanding[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"handleGroupView",value:function(e){-1===this.activeGroup.indexOf(e)?this.activeGroup.push(e):this.activeGroup.splice(this.activeGroup.indexOf(e),1)}},{key:"showAllGroups",value:function(){this.activeGroup=this.summaryreport.map((function(e){var t=0,n=0,o=0,a=0,i=0,r=0,l=0,c=0,d=0,s=0,m=0;e.data.map((function(e){var u=0,p=0,g=0,h=0,v=0,f=0,b=0,x=0,y=0,C=0,_=0;e.data.map((function(e){var t=0,n=0,o=0,a=0,i=0,r=0,l=0,c=0,d=0,s=0,m=0;e.data.map((function(e){var u=0,p=0,g=0,h=0,v=0,f=0,b=0,x=0,y=0,C=0,_=0;e.data.map((function(e){u+=e.y_opn_qty?parseFloat(e.y_opn_qty):0,p+=e.y_st_rec_qty?parseFloat(e.y_st_rec_qty):0,g+=e.y_pi_qty?parseFloat(e.y_pi_qty):0,h+=e.y_si_qty?parseFloat(e.y_si_qty):0,v+=e.y_st_issue_qty?parseFloat(e.y_st_issue_qty):0,f+=e.y_wst_qty?parseFloat(e.y_wst_qty):0,b+=e.y_dn_qty?parseFloat(e.y_dn_qty):0,x+=e.y_cn_qty?parseFloat(e.y_cn_qty):0,y+=e.y_net_qty?parseFloat(e.y_net_qty):0,C+=e.y_opn_amt?parseFloat(e.y_opn_amt):0,_+=e.y_clos_amt?parseFloat(e.y_clos_amt):0})),console.log("totalopngqty",u),t+=e.totalopngqty=u,n+=e.totalstokrecive=p,o+=e.purchasetotal=g,a+=e.salestotal=h,i+=e.issuetotal=v,r+=e.wastagetotal=f,l+=e.debittotal=b,c+=e.credittotal=x,d+=e.nettotal=y,s+=e.opnamttotal=C,m+=e.cloamttotal=_})),u+=e.totalqty=t,p+=e.totalstokrecive=n,g+=e.totalpurchase=o,h+=e.totalsales=a,v+=e.totalissue=i,f+=e.totalwastage=r,b+=e.totaldebit=l,x+=e.totalcredit=c,y+=e.totalnet=d,C+=e.totalopeamt=s,_+=e.totalcloamt=m})),t+=e.totalqty=u,n+=e.totalstokrecive=p,o+=e.totalpurchase=g,a+=e.totalsales=h,i+=e.totalissue=v,r+=e.totalwastage=f,l+=e.totaldebit=b,c+=e.totalcredit=x,d+=e.totalnet=y,s+=e.totalopeamt=C,m+=e.totalcloamt=_})),e.totalqty=t,e.totalstokrecive=n,e.totalpurchase=o,e.totalsales=a,e.totalissue=i,e.totalwastage=r,e.totaldebit=l,e.totalcredit=c,e.totalnet=d,e.totalopeamt=s,e.totalcloamt=m})),console.log("totalopngqty",this.summaryreport)}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log("Error:",e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Kn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"changeViewType",value:function(e){var t=this;this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],setTimeout((function(){console.log("viewtype",t.viewType,e),"main"==t.viewType?t.summaryreport.forEach((function(e,n){return t.active.liabilities.mainGroup.push("mainGroup"+n+0)})):"stock"==t.viewType?t.summaryreport.forEach((function(e,n){console.log("liability",e),e.data.forEach((function(e,o){t.active.liabilities.mainGroup.push("mainGroup"+n+0),e.data.forEach((function(e,a){t.active.liabilities.subGroup.push("subGroup"+n+o+0)}))}))})):"all"==t.viewType&&t.summaryreport.forEach((function(e,n){console.log("liability",e),e.data.forEach((function(e,o){t.active.liabilities.mainGroup.push("mainGroup"+n+0),e.data.forEach((function(e,a){t.active.liabilities.subGroup.push("subGroup"+n+o+0),e.data.forEach((function(e,i){t.active.liabilities.branch.push("branch"+n+o+a+0),e.data.forEach((function(e,r){t.active.liabilities.warehouse.push("warehouse"+n+o+a+i)}))}))}))}))}))}),20)}},{key:"openmodal",value:function(e,t){var n=this;console.log("data.y_net_qty",e.y_net_qty,e.y_opn_qty),this.isSingleClick&&clearTimeout(this.isSingleClick),setTimeout((function(){console.log("datail data",t,e),e.y_net_qty!=e.y_opn_qty&&(t.includes("stock")?n.common.params={startDate:n.outStanding.Date,endDate:n.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id,warehouse:e.y_warehouse_id}:t.includes("branch")?n.common.params={startDate:n.outStanding.Date,endDate:n.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id}:(n.common.params={startDate:n.outStanding.Date,endDate:n.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id,warehouse:e.y_warehouse_id},console.log("param model",n.common.params)),n.modalService.open(Co.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})))}),20)}},{key:"generateCsvData",value:function(){var e=[];e.push(Object.assign({Stocktype:" Stock Type",stocksubtype:"Stock Sub Type",stockitem:"Stock Item",branch:"Branch",warehouse:"Ware House",openingqty:"Opening Qty",stockrecived:"Stock Recived",purchase:"Purchase",sales:"Sales",issue:"Issue/Transefer",wastage:"Wastage",debitnote:"Debit Note",creditnote:"Credit Note",net:"Net Available"})),this.summaryreport.forEach((function(t){e.push({Stocktype:"(ST)"+t.name,stocksubtype:"",stockitem:"",branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach((function(t){e.push({Stocktype:"",stocksubtype:"(SS)"+t.name,stockitem:"",branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach((function(t){e.push({Stocktype:"",stocksubtype:"",stockitem:"(SI)"+t.name,branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach((function(t){e.push({Stocktype:"",stocksubtype:"",stockitem:"",branch:"(BR)"+t.name,warehouse:"",openingqty:t.totalopngqty,stockrecived:t.totalstokrecive,purchase:t.purchasetotal,sales:t.salestotal,issue:t.issuetotal,wastage:t.wastagetotal,debitnote:t.debittotal,creditnote:t.credittotal,net:t.nettotal}),t.data.forEach((function(t){e.push({Stocktype:"",stocksubtype:"",stockitem:"",branch:"",warehouse:"(WH)"+t.y_warehouse_name,openingqty:t.y_opn_qty?t.y_opn_qty:0,stockrecived:t.y_st_rec_qty?t.y_st_rec_qty:0,purchase:t.y_pi_qty?t.y_pi_qty:0,sales:t.y_si_qty?t.y_si_qty:0,issue:t.y_st_issue_qty?t.y_st_issue_qty:0,wastage:t.y_wst_qty?t.y_wst_qty:0,debitnote:t.y_dn_qty?t.y_dn_qty:0,creditnote:t.y_cn_qty?t.y_cn_qty:0,net:t.y_net_qty?t.y_net_qty:0})}))}))}))}))}));for(var t=[],n=0;n<e.length;n++)e[n]&&n<e.length-1&&t.push(Object.assign({},e[n],{asset:"",assetAmount:""}));t.push(Object.assign({},e[e.length-1])),t.push(Object.assign({},{"":"ST = Stock Type ,SS =Stock Sub Type, SI = Stock Item, BR = Branch, WH = Ware House"})),this.csvService.jsonToExcel(t),console.log("Merged:",t)}}]),e}()).\u0275fac=function(e){return new(e||Ho)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](v.r))},Ho.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Ho,selectors:[["stoclsummary"]],decls:57,vars:8,consts:[[2,"border","0px"],[3,"keydown"],["class","row","style","height:40px;background-color:black;margin:0!important",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","click","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","stock",3,"ngModel","click","ngModelChange"],["type","radio","name","view-type","value","all",3,"ngModel","click","ngModelChange"],["class","row",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"margin","0px 0px 0px 0px","width","100%"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row",2,"height","40px","background-color","black","margin","0!important"],[2,"color","white","padding","6px"],[1,"fa","fa-times","close",3,"click"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","stocktype","name","stocktype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stocksubtype","name","stocksubtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stockItem","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","wherehouse","name","wherehouse",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","text","id","Date","autocomplete","off","maxlength","10","name","account-Date",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pt-3","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","5px","padding","7px !important",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["targetId","stocktype","display","name",3,"data","select"],["targetId","stocksubtype","display","name",3,"data","select"],["targetId","stockItem","display","name",3,"data","select"],["targetId","wherehouse","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",3,"click"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"row","x-sub-stocktype",3,"click"],[4,"ngIf"],["class","row x-stockitem",3,"ngClass","dblclick","click",4,"ngIf"],["class","row x-stockitem",3,"click","dblclick",4,"ngIf"],["class","row 2 x-stockitem",3,"click","dblclick",4,"ngIf"],[1,"row","x-stockitem",3,"click","dblclick"],[1,"row","2","x-stockitem",3,"click","dblclick"],[1,"row","x-stockitem",3,"ngClass","dblclick","click"],[1,"row","x-branch",3,"click","dblclick"],[1,"row","x-warehouse",3,"ngClass","click","dblclick"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],[1,"col-1","text-right"],["type","button","outline","","id","cancel",1,"btn","btn-primary","tjr-button",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275template"](2,_o,4,1,"div",2),h["\u0275\u0275elementStart"](3,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),h["\u0275\u0275element"](4,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.generateCsvData()})),h["\u0275\u0275element"](6,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",7),h["\u0275\u0275elementStart"](8,"span"),h["\u0275\u0275elementStart"](9,"input",8),h["\u0275\u0275listener"]("click",(function(){return t.changeViewType("main")}))("ngModelChange",(function(e){return t.viewType=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](10," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"span",9),h["\u0275\u0275elementStart"](12,"input",10),h["\u0275\u0275listener"]("click",(function(){return t.changeViewType("stock")}))("ngModelChange",(function(e){return t.viewType=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](13," Expand Stock Item "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"span"),h["\u0275\u0275elementStart"](15,"input",11),h["\u0275\u0275listener"]("click",(function(){return t.changeViewType("all")}))("ngModelChange",(function(e){return t.viewType=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](16," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](17,wo,44,10,"div",12),h["\u0275\u0275elementStart"](18,"div",13),h["\u0275\u0275elementStart"](19,"div",14),h["\u0275\u0275elementStart"](20,"div",15),h["\u0275\u0275elementStart"](21,"div",16),h["\u0275\u0275text"](22,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",16),h["\u0275\u0275text"](24,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",16),h["\u0275\u0275text"](26,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",16),h["\u0275\u0275text"](28,"Branch"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",16),h["\u0275\u0275text"](30,"Ware House"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",16),h["\u0275\u0275text"](32,"Opening Qty"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275text"](34,"Stock Received"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",16),h["\u0275\u0275text"](36,"Purchase"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",16),h["\u0275\u0275text"](38,"Sales"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"div",16),h["\u0275\u0275text"](40,"Issue/Transfer"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"div",16),h["\u0275\u0275text"](42,"Wastage"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](43,"div",16),h["\u0275\u0275text"](44," Debit Note"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"div",16),h["\u0275\u0275text"](46,"Credit Note"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](47,"div",16),h["\u0275\u0275text"](48,"Net Available"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"div",16),h["\u0275\u0275text"](50,"Opening Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](51,"div",16),h["\u0275\u0275text"](52,"Closing Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"div",17),h["\u0275\u0275template"](54,No,37,19,"div",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](55,Go,6,0,"div",19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](56,Yo,4,1,"div",20)),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.isModal),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",t.viewType),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.viewType),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.viewType),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",!t.isModal),h["\u0275\u0275advance"](37),h["\u0275\u0275property"]("ngForOf",t.summaryreport),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.isModal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,D.u,F.z,F.d,F.r,F.u,D.t,F.m,V.a,D.r],pipes:[D.g],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:6.25%;max-width:6.25%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:10px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:10px;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-sub-stocktype[_ngcontent-%COMP%]{background-color:#5d6e75;font-size:10px;color:#fff;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-stockitem[_ngcontent-%COMP%]{background:#7998a7}.x-data[_ngcontent-%COMP%]   .x-branch[_ngcontent-%COMP%], .x-data[_ngcontent-%COMP%]   .x-stockitem[_ngcontent-%COMP%]{color:#fff;font-size:10px;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-branch[_ngcontent-%COMP%]{background:#8daab8}.x-data[_ngcontent-%COMP%]   .x-warehouse[_ngcontent-%COMP%]{background:#dadfe6;color:#000;font-size:10px;cursor:pointer}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 298px);overflow:auto;width:100%}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:1px 0 -1rem auto;outline:none}"]}),Ho),qo=i("7KAL");function Ko(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function Uo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function Wo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,Ko,2,2,"div",6),h["\u0275\u0275template"](2,Uo,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function Qo(e,t){if(1&e&&h["\u0275\u0275element"](0,"trading-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}var Jo=function(e){return{highlight:e}};function Xo(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",9),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Jo,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,i.amount,"1.2-2"))}}function Zo(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Wo,3,4,"div",2),h["\u0275\u0275template"](2,Qo,1,6,"trading-tree",3),h["\u0275\u0275template"](3,Xo,6,8,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function ea(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Zo,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function ta(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function na(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function oa(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,ta,2,2,"div",6),h["\u0275\u0275template"](2,na,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function aa(e,t){if(1&e&&h["\u0275\u0275element"](0,"trading-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}function ia(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",9),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Jo,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,i.amount,"1.2-2"))}}function ra(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,oa,3,4,"div",2),h["\u0275\u0275template"](2,aa,1,6,"trading-tree",3),h["\u0275\u0275template"](3,ia,6,8,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function la(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",12),h["\u0275\u0275template"](2,ra,4,3,"div",13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("cdkVirtualForOf",n.data)}}function ca(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,ea,2,1,"div",0),h["\u0275\u0275template"](2,la,3,1,"div",0),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length<=50),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length>50)}}var da=function(e){return{display:e}};function sa(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275elementStart"](1,"div",20),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",21),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](),o=n.index,a=n.$implicit,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](6,da,o==i.assets.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,a.amount,"1.2-2"))}}function ma(e,t){if(1&e&&h["\u0275\u0275element"](0,"trading-tree",32),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("action",i.openLedgerViewModel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTreeasset==a||"sub"==i.isExpand)}}function ua(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",28),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==e?e:-1})),h["\u0275\u0275template"](1,sa,6,8,"div",29),h["\u0275\u0275template"](2,ma,1,4,"trading-tree",30),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.index,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o)}}function pa(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",28),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](1,"div",33),h["\u0275\u0275elementStart"](2,"div",20),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",21),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](7,"trading-tree",32),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](10,da,a==i.liabilities.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,7,o.amount,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("action",i.openLedgerViewModel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)}}function ga(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",34),h["\u0275\u0275elementStart"](1,"div",35),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",36),h["\u0275\u0275elementStart"](4,"p",37),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.liabilities[n.liabilities.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.liabilities[n.liabilities.length-1].amount,"1.2-2"),"")}}function ha(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",34),h["\u0275\u0275elementStart"](1,"div",35),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",36),h["\u0275\u0275elementStart"](4,"p",37),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.assets[n.assets.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.assets[n.assets.length-1].amount,"1.2-2"),"")}}function va(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",38),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",39),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",40),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.balanceData[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.balanceData[o.f2Date])}}var fa,ba,xa="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:0}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;color:#fff;font-weight:700;padding:10px}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;color:#fff}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#bfcfd9!important}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:auto;width:100%}",ya=((ba=function(){function e(t,n,o,i){a(this,e),this.common=t,this.modalService=n,this.user=o,this.accountService=i,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10]}return r(e,[{key:"lastClickHandler",value:function(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}},{key:"ngAfterViewInit",value:function(){console.log("--------,",this.active)}},{key:"ngOnChanges",value:function(e){}},{key:"clickHandler",value:function(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}},{key:"doubleClickHandler",value:function(e,t){e.stopPropagation(),this.action(t)}},{key:"keyHandler",value:function(e){e.stopPropagation();var t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}}]),e}()).\u0275fac=function(e){return new(e||ba)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a))},ba.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ba,selectors:[["trading-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[h["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,ca,3,2,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},directives:[D.u,D.t,ba,D.r,qo.e,qo.a,qo.d],pipes:[D.g],styles:[xa],changeDetection:0}),ba),Ca=((fa=function(){function t(e,n,o,i,r,l,c,d){a(this,t),this.api=e,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.cdr=c,this.modalService=d,this.sizeIndex=0,this.selectedName="",this.balanceData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.balanceSheetData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.balanceData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.balanceData.enddate,this.setFoucus("startdate"),this.common.currentPage="Trading Account"}return r(t,[{key:"ngOnInit",value:function(){}},{key:"getBalanceSheet",value:function(){var e=this;this.balanceData.startdate=this.accountService.fromdate,this.balanceData.enddate=this.accountService.todate;var t={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate};this.common.loading++,this.api.post("Company/GetTradingData",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.balanceSheetData=t.data,e.generalizeData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"changeViewType",value:function(){var e=this;this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((function(t,n){return e.active.liabilities.mainGroup.push("mainGroup"+n+0)})),this.assets.forEach((function(t,n){return e.active.asset.mainGroup.push("mainGroup"+n+0)}))):"all"==this.viewType&&(this.liabilities.forEach((function(t,n){e.active.liabilities.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.liabilities.subGroup.push("subGroup"+n+o)}))})),this.assets.forEach((function(t,n){e.active.asset.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.asset.subGroup.push("subGroup"+n+o)}))})))}},{key:"generalizeData",value:function(){var e=this,t=sn.groupBy(this.balanceSheetData,"y_is_income"),n=t[0],o=t[1];this.assets=[],this.liabilities=[];for(var a=function(t){var o=n[t],a=[];o.y_path&&(a=o.y_path.split("--\x3e")),o.labels=a.splice(1,a.length);var i=e.assets.findIndex((function(e){return e.name===a[0]}));-1===i?e.assets.push({name:a[0]||o.y_groupname,data:[o],amount:parseFloat(o.y_amount)}):(e.assets[i].amount+=parseFloat(o.y_amount),e.assets[i].data.push(o))},i=0;i<n.length;i++)a(i);this.assets.map((function(t){return 0!=t.amount?t.data=e.findChilds(t.data):""})),console.log("assets",this.assets);for(var r=function(t){var n=o[t],a=[];n.y_path&&(a=n.y_path.split("--\x3e")),n.labels=a.splice(1,a.length);var i=e.liabilities.findIndex((function(e){return e.name===a[0]}));-1===i?e.liabilities.push({name:a[0]||n.y_groupname,data:[n],amount:parseFloat(n.y_amount)}):(e.liabilities[i].amount+=parseFloat(n.y_amount),e.liabilities[i].data.push(n))},l=0;l<o.length;l++)r(l);this.liabilities.map((function(t){return 0!=t.amount?t.data=e.findChilds(t.data):""})),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length&&function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],amount:t.y_ledger_name?parseFloat(t.y_amount):0}):(n[i].amount+=t.y_ledger_name?parseFloat(t.y_amount):0,t.y_ledger_name&&n[i].data.push(t))}();if(n.length)return n.map((function(e){return{name:e.name,data:t.findChilds(e.data),amount:e.amount}}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in i)if(i[r].length>1&&r){var l={ledgerName:r,ledgerdata:i[r],amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(l)}else if(r){var c={ledgerName:r,ledgerdata:i[r],amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(c)}return a}},{key:"formattData",value:function(){var e=sn.groupBy(this.balanceSheetData,"y_is_income"),t=sn.groupBy(e[0],"y_groupname"),n=sn.groupBy(e[1],"y_groupname");for(var o in sn.groupBy(e[0],"y_subgroupname"),sn.groupBy(e[1],"y_subgroupname"),console.log("A:",e),console.log("B:",t),console.log("C:",n),this.liabilities=[],t){var a=0;t[o].map((function(e){e.y_amount&&(a+=parseFloat(e.y_amount))})),this.liabilities.push({name:o,amount:a,balanceSheets:t[o].filter((function(e){return e.y_ledger_name}))})}for(var i in this.assets=[],n){var r=0;n[i].map((function(e){e.y_amount&&(r+=parseFloat(e.y_amount))})),this.assets.push({name:i,amount:r,balanceSheets:n[i].filter((function(e){return e.y_ledger_name}))})}console.log("first Section:",this.liabilities),console.log("last Section:",this.assets),this.liabilities.map((function(e){var t=sn.groupBy(e.balanceSheets,"y_subgroupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach((function(n){var o=0;t[n].forEach((function(e){o+=parseFloat(e.y_amount)})),e.subGroups.push({name:n,balanceSheets:t[n],total:o})})),delete e.balanceSheets})),this.assets.map((function(e){var t=sn.groupBy(e.balanceSheets,"y_subgroupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach((function(n){var o=0;t[n].forEach((function(e){o+=parseFloat(e.y_amount)})),e.subGroups.push({name:n,balanceSheets:t[n],total:o}),console.log(t[n],o)})),delete e.balanceSheets})),this.changeViewType()}},{key:"handleExpandation",value:function(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}},{key:"filterData",value:function(e,t){return e.filter((function(e){return e.y_is_assets===t}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.balanceData.startdate=this.common.handleDateOnEnterNew(this.balanceData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.balanceData.enddate=this.common.handleDateOnEnterNew(this.balanceData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"singleFormatCsvData",value:function(){var e=[];e.push(Object.assign({liability:"Particulars",liabilityAmount:"Amount"})),this.assets.forEach((function(t){e.push({liability:t.name,liabilityAmount:t.amount})}));var t=[];t.push(Object.assign({asset:"Particulars",assetAmount:"Amount"})),this.liabilities.forEach((function(e){t.push({asset:e.name,assetAmount:e.amount})}));for(var n=[],o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),console.log("Merged:",n),this.csvService.jsonToExcel(n)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.balanceData[o].includes("-"))t=this.balanceData[o].split("-");else{if(!this.balanceData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.balanceData[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.balanceData[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"openLedgerViewModel",value:function(e){console.log("ledger id 00000",e.ledgerdata[0]),e.ledgerdata[0].y_path.includes("Opening Stock")||e.ledgerdata[0].y_path.includes("Closing Stock")?(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerdata[0].y_ledgerid,sizeIndex:0,isModal:1},this.modalService.open($o,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))):(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerdata[0].y_ledgerid,vouchertype:null==e.ledgerdata[0].y_type_id?0:e.ledgerdata[0].y_type_id,ledgername:e.ledgerdata[0].y_ledger_name},this.modalService.open(xo.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))),this.common.currentPage="Trading Account"}},{key:"csvFunction",value:function(){var t=this;if("main"==this.isExpand)this.singleFormatCsvData();else{var n=[],o=[],a=[];n.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),o.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),this.assets.forEach((function(o){n.push({particular:o.name,openingamount:0==o.amount?"":o.amount}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),this.liabilities.forEach((function(n){o.push({particular:n.name,openingamount:0==n.amount?"":n.amount}),o.push.apply(o,e(t.generateCSVData(n.data,"  ")))}));for(var i=0;i<n.length;i++)a.push({libilities:n[i].particular,Amount:n[i].openingamount});for(var r=0;r<o.length;r++)r<a.length?(a[r].asstes=o[r].particular,a[r]["asstes amount"]=o[r].openingamount):a.push({libilities:"","libilities Amount":"",asstes:o[r].particular,"asstes amount":o[r].openingamount});this.csvService.jsonToExcel(a)}}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,openingamount:i.amount}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:n+i.ledgerName,openingamount:i.amount})}return o}}]),t}()).\u0275fac=function(e){return new(e||fa)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](v.r))},fa.\u0275cmp=h["\u0275\u0275defineComponent"]({type:fa,selectors:[["trading"]],decls:52,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle",4,"ngIf"],["labels","",3,"action","data","isExpandAll","active",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle"],["labels","",3,"action","data","isExpandAll","active"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275elementStart"](4,"input",3),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](5," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",4),h["\u0275\u0275elementStart"](7,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](8," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),h["\u0275\u0275element"](10,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"span",8),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](12,"i",9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",10),h["\u0275\u0275elementStart"](14,"div",11),h["\u0275\u0275elementStart"](15,"div",12),h["\u0275\u0275elementStart"](16,"label",13),h["\u0275\u0275text"](17,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",11),h["\u0275\u0275elementStart"](20,"div",12),h["\u0275\u0275elementStart"](21,"label",13),h["\u0275\u0275text"](22,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",11),h["\u0275\u0275elementStart"](25,"div",12),h["\u0275\u0275elementStart"](26,"button",16),h["\u0275\u0275listener"]("click",(function(){return t.getBalanceSheet()})),h["\u0275\u0275text"](27,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div"),h["\u0275\u0275elementStart"](29,"div",17),h["\u0275\u0275elementStart"](30,"div",18),h["\u0275\u0275elementStart"](31,"div",19),h["\u0275\u0275elementStart"](32,"div",20),h["\u0275\u0275text"](33,"Particulars"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",21),h["\u0275\u0275text"](35,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",22),h["\u0275\u0275template"](37,ua,3,2,"div",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"div",18),h["\u0275\u0275elementStart"](39,"div",19),h["\u0275\u0275elementStart"](40,"div",20),h["\u0275\u0275text"](41,"Particulars"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",21),h["\u0275\u0275text"](43,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",22),h["\u0275\u0275template"](45,pa,8,12,"div",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",10),h["\u0275\u0275elementStart"](47,"div",24),h["\u0275\u0275template"](48,ga,7,5,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"div",26),h["\u0275\u0275template"](50,ha,7,5,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](51,va,4,1,"div",27)),2&e&&(h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](14),h["\u0275\u0275property"]("ngForOf",t.assets),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngForOf",t.liabilities),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.liabilities.length),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.assets.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.t,D.u,D.x,ya],pipes:[D.g],styles:[xa],changeDetection:0}),fa);function _a(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function Sa(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function ka(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,_a,2,2,"div",6),h["\u0275\u0275template"](2,Sa,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function Ma(e,t){if(1&e&&h["\u0275\u0275element"](0,"balance-sheet-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}var Ea=function(e){return{highlight:e}};function wa(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",9),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Ea,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,i.amount,"1.2-2"))}}function Pa(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,ka,3,4,"div",2),h["\u0275\u0275template"](2,Ma,1,6,"balance-sheet-tree",3),h["\u0275\u0275template"](3,wa,6,8,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function Oa(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Pa,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function Ia(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function Da(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function Va(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,Ia,2,2,"div",6),h["\u0275\u0275template"](2,Da,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function Fa(e,t){if(1&e&&h["\u0275\u0275element"](0,"balance-sheet-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}function Ta(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",9),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Ea,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,i.amount,"1.2-2"))}}function Ba(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Va,3,4,"div",2),h["\u0275\u0275template"](2,Fa,1,6,"balance-sheet-tree",3),h["\u0275\u0275template"](3,Ta,6,8,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function Aa(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div"),h["\u0275\u0275elementStart"](2,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).search=e}))("click",(function(e){return h["\u0275\u0275restoreView"](n),e.stopPropagation()}))("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).searchValues()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",13),h["\u0275\u0275template"](4,Ba,4,3,"div",14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngModel",o.search),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("cdkVirtualForOf",o.searchedData)}}function La(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Oa,2,1,"div",0),h["\u0275\u0275template"](2,Aa,5,2,"div",0),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length<=50),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length>50)}}function Ra(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",26),h["\u0275\u0275elementStart"](1,"h4",27),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"i",28),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().activeModal.dismiss()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.currentPage)}}function ja(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",20),h["\u0275\u0275elementStart"](1,"div",29),h["\u0275\u0275elementStart"](2,"div",30),h["\u0275\u0275elementStart"](3,"label",31),h["\u0275\u0275text"](4,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"input",32),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",29),h["\u0275\u0275elementStart"](7,"div",30),h["\u0275\u0275elementStart"](8,"label",31),h["\u0275\u0275text"](9,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"input",33),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",29),h["\u0275\u0275elementStart"](12,"div",30),h["\u0275\u0275elementStart"](13,"button",34),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().getBalanceSheet()})),h["\u0275\u0275text"](14," Submit "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",o.accountService.todate)}}var za=function(e){return{display:e}};function Na(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",38),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",17),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](),o=n.index,a=n.$implicit,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](6,za,o==i.assets.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,a.amount,"1.2-2"))}}function Ga(e,t){if(1&e&&h["\u0275\u0275element"](0,"trading-tree",39),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("action",i.openLedgerViewModel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTreeasset==a||"sub"==i.isExpand)}}function Ya(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==e?e:-1})),h["\u0275\u0275template"](1,Na,6,8,"div",36),h["\u0275\u0275template"](2,Ga,1,4,"trading-tree",37),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.index,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o)}}function Ha(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](1,"div",40),h["\u0275\u0275elementStart"](2,"div",16),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",17),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](7,"profitloss-tree",39),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](10,za,a==i.liabilities.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,7,o.amount,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("action",i.openLedgerViewModel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)}}function $a(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",41),h["\u0275\u0275elementStart"](1,"div",42),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",43),h["\u0275\u0275elementStart"](4,"p",44),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.liabilities[n.liabilities.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.liabilities[n.liabilities.length-1].amount,"1.2-2"),"")}}function qa(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",41),h["\u0275\u0275elementStart"](1,"div",42),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",43),h["\u0275\u0275elementStart"](4,"p",44),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.assets[n.assets.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.assets[n.assets.length-1].amount,"1.2-2"),"")}}function Ka(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",45),h["\u0275\u0275elementStart"](1,"div",46),h["\u0275\u0275element"](2,"div",47),h["\u0275\u0275elementStart"](3,"div",48),h["\u0275\u0275elementStart"](4,"button",49),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().activeModal.dismiss()})),h["\u0275\u0275text"](5,"Cancel "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Ua(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",50),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",51),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",52),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.plData[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.plData[o.f2Date])}}var Wa,Qa,Ja="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;font-weight:700;color:#fff;padding:10px}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.selected[_ngcontent-%COMP%]{background-color:#576c77}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;color:#fff}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#b7c7d2!important}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:1px 0 -1rem auto;outline:none}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.jrx-dtbody[_ngcontent-%COMP%]{max-height:calc(100vh - 247px);overflow:auto;width:100%}",Xa=((Qa=function(){function e(t,n,o,i,r){a(this,e),this.common=t,this.modalService=n,this.user=o,this.cdr=i,this.accountService=r,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10],this.search="",this.searchedData=[]}return r(e,[{key:"ngOnChanges",value:function(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}},{key:"lastClickHandler",value:function(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}},{key:"ngAfterViewInit",value:function(){console.log("--------,",this.active)}},{key:"clickHandler",value:function(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}},{key:"doubleClickHandler",value:function(e,t){e.stopPropagation(),this.action(t)}},{key:"keyHandler",value:function(e){e.stopPropagation();var t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}},{key:"searchValues",value:function(){var e=this;this.searchedData=this.data.filter((function(t){return t.name?t.name.toLowerCase().includes(e.search.toLowerCase()):!!t.ledgerName&&t.ledgerName.toLowerCase().includes(e.search.toLowerCase())})),this.cdr.detectChanges()}}]),e}()).\u0275fac=function(e){return new(e||Qa)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](u.a))},Qa.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Qa,selectors:[["profitloss-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[h["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,La,3,2,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},styles:[Ja],changeDetection:0}),Qa),Za=((Wa=function(){function t(e,n,o,i,r,l,c,d,s){a(this,t),this.api=e,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.cdr=c,this.activeModal=d,this.modalService=s,this.isModal=!1,this.selectedName="",this.plData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.profitLossData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.topHeadExp=0,this.topHeadIncome=0,this.indirectExp=0,this.directIncome=0,this.grossLoss=0,this.grossProfit=0,this.netProfit=0,this.netLoss=0,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.sizeIndex=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.plData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.plData.enddate,this.getBranchList(),this.setFoucus("startdate"),this.common.currentPage="Profit & Loss A/C",this.setFoucus("startdate"),this.common.params&&this.common.params.startdate&&(this.accountService.fromdate=this.common.params.startdate,this.accountService.todate=this.common.params.enddate,this.getBalanceSheet(),this.common.params.isModal&&(this.isModal=!0),this.common.params=null,this.common.handleModalSize("class","modal-lg","1200","px",this.sizeIndex))}return r(t,[{key:"ngOnInit",value:function(){}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getBalanceSheet",value:function(){var e=this;this.plData.startdate=this.accountService.fromdate,this.plData.enddate=this.accountService.todate,console.log("Balance Sheet:",this.plData);var t={startdate:this.plData.startdate,enddate:this.plData.enddate};this.common.loading++,this.api.post("Company/GetProfitLossData",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.profitLossData=t.data,e.generalizeData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"generalizeData",value:function(){var e=this,t=sn.groupBy(this.profitLossData,"y_is_income"),n=t[0],o=t[1];this.assets=[],this.liabilities=[];for(var a=function(t){var o=n[t],a=[];o.y_path&&(a=o.y_path.split("--\x3e")),o.labels=a.splice(1,a.length);var i=e.assets.findIndex((function(e){return e.name===a[0]}));-1===i?e.assets.push({name:a[0]||o.y_groupname,data:[o],amount:parseFloat(o.y_amount)}):(e.assets[i].amount+=parseFloat(o.y_amount),e.assets[i].data.push(o))},i=0;i<n.length;i++)a(i);this.assets.map((function(t){return 0!=t.amount?t.data=e.findChilds(t.data):""})),console.log("assets",this.assets);for(var r=function(t){var n=o[t],a=[];n.y_path&&(a=n.y_path.split("--\x3e")),n.labels=a.splice(1,a.length);var i=e.liabilities.findIndex((function(e){return e.name===a[0]}));-1===i?e.liabilities.push({name:a[0]||n.y_groupname,data:[n],amount:parseFloat(n.y_amount)}):(e.liabilities[i].amount+=parseFloat(n.y_amount),e.liabilities[i].data.push(n))},l=0;l<o.length;l++)r(l);this.liabilities.map((function(t){return 0!=t.amount?t.data=e.findChilds(t.data):""})),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length&&function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],amount:t.y_ledger_name?parseFloat(t.y_amount):0}):(n[i].amount+=t.y_ledger_name?parseFloat(t.y_amount):0,t.y_ledger_name&&n[i].data.push(t))}();if(n.length)return n.map((function(e){return{name:e.name,data:t.findChilds(e.data),amount:e.amount}}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in i)if(i[r].length>1&&r){var l={ledgerName:r,ledgerdata:i[r],amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(l)}else if(r){var c={ledgerName:r,ledgerdata:i[r],amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(c)}return a}},{key:"formattData",value:function(){var e=this,t=sn.groupBy(this.profitLossData,"y_is_income"),n=sn.groupBy(t[0],"y_groupname"),o=sn.groupBy(t[1],"y_groupname");for(var a in sn.groupBy(t[0],"y_subgroupname"),sn.groupBy(t[1],"y_subgroupname"),this.topHeadExp=0,this.topHeadIncome=0,this.grossLoss=0,this.grossProfit=0,this.netProfit=0,this.netLoss=0,console.log("A:",t),console.log("B:",n),console.log("C:",o),this.liabilities=[],n){var i=0;n[a].map((function(e){e.y_amount&&(i+=parseFloat(e.y_amount))})),this.liabilities.push({name:a,amount:i,profitLossData:n[a].filter((function(e){return e.y_ledger_name}))})}for(var r in this.assets=[],o){var l=0;o[r].map((function(e){e.y_amount&&(l+=parseFloat(e.y_amount))})),this.assets.push({name:r,amount:l,profitLossData:o[r].filter((function(e){return e.y_ledger_name}))})}console.log("first Section:",this.liabilities),console.log("last Section:",this.assets),this.liabilities.map((function(t){var n=sn.groupBy(t.profitLossData,"y_subgroupname");t.subGroups=[],(t.name.toLowerCase().includes("opening")||t.name.toLowerCase().includes("purchases")||t.name.toLowerCase().includes("direct expenses"))&&!t.name.toLowerCase().includes("indirect")&&(e.topHeadExp+=t.amount),(t.name.toLowerCase().includes("sales")||t.name.toLowerCase().includes("income")||t.name.toLowerCase().includes("closing"))&&!t.name.toLowerCase().includes("indirect incomes")&&(e.topHeadIncome+=t.amount),t.name.toLowerCase().includes("indirect expenses")&&(e.indirectExp=t.amount,console.log("first indirect exp",t.amount)),t.name.toLowerCase().includes("indirect incomes")&&(e.directIncome=t.amount),Object.keys(n).length&&Object.keys(n).forEach((function(e){var o=0;n[e].forEach((function(e){o+=parseFloat(e.y_amount)})),t.subGroups.push({name:e,profitLossData:n[e],total:o})})),delete t.profitLossData})),console.log("first Section------:",this.liabilities),this.assets.map((function(t){var n=sn.groupBy(t.profitLossData,"y_subgroupname");t.subGroups=[],(t.name.toLowerCase().includes("opening")||t.name.toLowerCase().includes("purchases")||t.name.toLowerCase().includes("direct expenses"))&&!t.name.toLowerCase().includes("indirect")&&(e.topHeadExp+=t.amount),(t.name.toLowerCase().includes("sales")||t.name.toLowerCase().includes("income")||t.name.toLowerCase().includes("closing"))&&!t.name.toLowerCase().includes("indirect incomes")&&(e.topHeadIncome+=t.amount),t.name.toLowerCase().includes("indirect expenses")&&(e.indirectExp=t.amount,console.log("second indirect exp",t)),t.name.toLowerCase().includes("indirect incomes")&&(e.directIncome=t.amount),Object.keys(n).length&&Object.keys(n).forEach((function(e){var o=0;n[e].forEach((function(e){o+=parseFloat(e.y_amount)})),t.subGroups.push({name:e,profitLossData:n[e],total:o}),console.log(n[e],o)})),delete t.profitLossData})),this.topHeadIncome>=this.topHeadExp?this.grossProfit=this.topHeadIncome-this.topHeadExp:this.grossLoss=this.topHeadExp-this.topHeadIncome,this.grossProfit+this.directIncome>=this.grossLoss+this.indirectExp?this.netProfit=this.grossProfit+this.directIncome-(this.grossLoss+this.indirectExp):this.netLoss=this.grossLoss+this.indirectExp-(this.grossProfit+this.directIncome),this.changeViewType(),console.log("trip head exp",this.topHeadExp,"topHeadIncome",this.topHeadIncome,"indirectExp",this.indirectExp)}},{key:"filterData",value:function(e,t){return e.filterfilter((function(e){return e.y_is_assets===t}))}},{key:"handleExpandation",value:function(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.plData.startdate=this.common.handleDateOnEnterNew(this.plData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.plData.enddate=this.common.handleDateOnEnterNew(this.plData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.plData[o].includes("-"))t=this.plData[o].split("-");else{if(!this.plData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.plData[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.plData[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"openLedgerViewModel",value:function(e){console.log("ledger id 00000",e),e.ledgerdata[0].y_path.includes("Opening Stock")||e.ledgerdata[0].y_path.includes("Closing Stock")?(this.common.params={startdate:this.plData.startdate,enddate:this.plData.enddate,ledger:e.ledgerdata[0].y_ledgerid,sizeIndex:this.sizeIndex+1,isModal:1},this.modalService.open($o,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))):e.ledgerdata[0].y_path.includes("Net Profit")||(this.common.params={startdate:this.plData.startdate,enddate:this.plData.enddate,ledger:e.ledgerdata[0].y_ledgerid,vouchertype:null==e.ledgerdata[0].y_type_id?0:e.ledgerdata[0].y_type_id,ledgername:e.ledgerdata[0].y_ledger_name,sizeIndex:this.sizeIndex+1},this.modalService.open(xo.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))),this.common.currentPage="Profit & Loss A/C"}},{key:"singleFormatCsvData",value:function(){var e=[];e.push(Object.assign({liability:"Particulars",liabilityAmount:"Amount"})),this.assets.forEach((function(t){e.push({liability:t.name,liabilityAmount:t.amount})}));var t=[];t.push(Object.assign({asset:"Particulars",assetAmount:"Amount"})),this.liabilities.forEach((function(e){t.push({asset:e.name,assetAmount:e.amount})}));for(var n=[],o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),console.log("Merged:",n),this.csvService.jsonToExcel(n)}},{key:"changeViewType",value:function(){var e=this;this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((function(t,n){return e.active.liabilities.mainGroup.push("mainGroup"+n+0)})),this.assets.forEach((function(t,n){return e.active.asset.mainGroup.push("mainGroup"+n+0)}))):"all"==this.viewType&&(this.liabilities.forEach((function(t,n){e.active.liabilities.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.liabilities.subGroup.push("subGroup"+n+o)}))})),this.assets.forEach((function(t,n){e.active.asset.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.asset.subGroup.push("subGroup"+n+o)}))})))}},{key:"csvFunction",value:function(){var t=this;if("main"==this.isExpand)this.singleFormatCsvData();else{var n=[],o=[],a=[];n.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),o.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),this.assets.forEach((function(o){n.push({particular:o.name,openingamount:0==o.amount?"":o.amount}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),this.liabilities.forEach((function(n){o.push({particular:n.name,openingamount:0==n.amount?"":n.amount}),o.push.apply(o,e(t.generateCSVData(n.data,"  ")))}));for(var i=0;i<n.length;i++)a.push({libilities:n[i].particular,Amount:n[i].openingamount});for(var r=0;r<o.length;r++)r<a.length?(a[r].asstes=o[r].particular,a[r]["asstes amount"]=o[r].openingamount):a.push({libilities:"","libilities Amount":"",asstes:o[r].particular,"asstes amount":o[r].openingamount});this.csvService.jsonToExcel(a)}}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,openingamount:i.amount}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:n+i.ledgerName,openingamount:i.amount})}return o}}]),t}()).\u0275fac=function(e){return new(e||Wa)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](v.r))},Wa.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Wa,selectors:[["profitloss"]],decls:41,vars:10,consts:[[2,"border","0px"],[3,"keydown"],["class","row","style","height:40px;background-color:#263238;margin:0!important",4,"ngIf"],[1,""],[2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["class","row",4,"ngIf"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row",2,"height","40px","background-color","#263238","margin","0!important"],[2,"color","white","padding","6px"],[1,"fa","fa-times","close",3,"click"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","placeholder","Select Date","name","account-enddate","id","enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle",4,"ngIf"],["labels","",3,"action","data","isExpandAll","active",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle"],["labels","",3,"action","data","isExpandAll","active"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],[1,"col-1","text-right"],["type","button","outline","","id","cancel",1,"btn","btn-primary","tjr-button",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275template"](2,Ra,4,1,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"div",4),h["\u0275\u0275elementStart"](5,"span"),h["\u0275\u0275elementStart"](6,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](7," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"span",6),h["\u0275\u0275elementStart"](9,"input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](10," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"span",8),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),h["\u0275\u0275element"](12,"i",9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"span",10),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](14,"i",11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](15,ja,15,2,"div",12),h["\u0275\u0275elementStart"](16,"div"),h["\u0275\u0275elementStart"](17,"div",13),h["\u0275\u0275elementStart"](18,"div",14),h["\u0275\u0275elementStart"](19,"div",15),h["\u0275\u0275elementStart"](20,"div",16),h["\u0275\u0275text"](21,"Particulars"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",17),h["\u0275\u0275text"](23,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",18),h["\u0275\u0275template"](25,Ya,3,2,"div",19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",14),h["\u0275\u0275elementStart"](27,"div",15),h["\u0275\u0275elementStart"](28,"div",16),h["\u0275\u0275text"](29,"Particulars"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",17),h["\u0275\u0275text"](31,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",18),h["\u0275\u0275template"](33,Ha,8,12,"div",19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",20),h["\u0275\u0275elementStart"](35,"div",21),h["\u0275\u0275template"](36,$a,7,5,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",23),h["\u0275\u0275template"](38,qa,7,5,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](39,Ka,6,0,"div",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](40,Ua,4,1,"div",25)),2&e&&(h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.isModal),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngIf",!t.isModal),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngForOf",t.assets),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngForOf",t.liabilities),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.liabilities.length),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.assets.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.isModal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,D.u,F.z,F.d,F.r,F.u,D.t,F.m,D.x,ya,Xa],pipes:[D.g],styles:[Ja],changeDetection:0}),Wa);function ei(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275element"](1,"span",9),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("innerHTML",o.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ti(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function ni(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,ei,3,2,"div",6),h["\u0275\u0275template"](2,ti,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function oi(e,t){if(1&e&&h["\u0275\u0275element"](0,"balance-sheet-tree",11),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels+"\xa0\xa0\xa0\xa0")}}var ai=function(e){return{highlight:e}};function ii(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",12),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275element"](2,"span",9),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",10),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](7,ai,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",r.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,4,i.amount,"1.2-2"))}}function ri(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,ni,3,4,"div",2),h["\u0275\u0275template"](2,oi,1,6,"balance-sheet-tree",3),h["\u0275\u0275template"](3,ii,7,9,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function li(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,ri,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function ci(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275element"](1,"span",9),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("innerHTML",o.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function di(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",10),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.amount,"1.2-2")," ")}}function si(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275template"](1,ci,3,2,"div",6),h["\u0275\u0275template"](2,di,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function mi(e,t){if(1&e&&h["\u0275\u0275element"](0,"balance-sheet-tree",11),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels+"\xa0\xa0\xa0\xa0")}}function ui(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",12),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275element"](2,"span",9),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",10),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](7,ai,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",r.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](i.ledgerName),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,4,i.amount,"1.2-2"))}}function pi(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,si,3,4,"div",2),h["\u0275\u0275template"](2,mi,1,6,"balance-sheet-tree",3),h["\u0275\u0275template"](3,ui,7,9,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function gi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div"),h["\u0275\u0275elementStart"](2,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).search=e}))("click",(function(e){return h["\u0275\u0275restoreView"](n),e.stopPropagation()}))("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).searchValues()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",14),h["\u0275\u0275template"](4,pi,4,3,"div",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngModel",o.search),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("cdkVirtualForOf",o.searchedData)}}function hi(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,li,2,1,"div",0),h["\u0275\u0275template"](2,gi,5,2,"div",0),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length<=50),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length>50)}}var vi=function(e){return{display:e}};function fi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",32),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"]();return t.activeTree=t.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](1,"div",21),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",22),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](6,vi,a==r.assets.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,3,i.amount,"1.2-2"))}}function bi(e,t){if(1&e&&h["\u0275\u0275element"](0,"balance-sheet-tree",33),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("action",i.opendaybookmodel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTreeasset==a||"sub"==i.isExpand)("labels","\xa0")}}function xi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",29),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==e?e:-1})),h["\u0275\u0275template"](1,fi,6,8,"div",30),h["\u0275\u0275template"](2,bi,1,5,"balance-sheet-tree",31),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.index,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.assets.length-1>o)}}function yi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",29),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](1,"div",34),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",22),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](7,"balance-sheet-tree",33),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngStyle",h["\u0275\u0275pureFunction1"](11,vi,a==i.liabilities.length-1?"none":"")),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,8,o.amount,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("action",i.opendaybookmodel.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)("labels","\xa0")}}function Ci(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275elementStart"](1,"div",36),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",37),h["\u0275\u0275elementStart"](4,"p",38),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.liabilities[n.liabilities.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.liabilities[n.liabilities.length-1].amount,"1.2-2"),"")}}function _i(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",35),h["\u0275\u0275elementStart"](1,"div",36),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",37),h["\u0275\u0275elementStart"](4,"p",38),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.assets[n.assets.length-1].name),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](6,2,n.assets[n.assets.length-1].amount,"1.2-2"),"")}}function Si(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",39),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",40),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",41),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.balanceData[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.balanceData[o.f2Date])}}var ki,Mi,Ei="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #dab2b2;color:#fff}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{color:#000!important;background-color:#b7c7d2!important}.anotherlast[_ngcontent-%COMP%]{background-color:#c7c7d2!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:auto;width:100%}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #dcdada}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.lastrowcolor[_ngcontent-%COMP%]{color:#000}",wi=((Mi=function(){function e(t,n,o,i,r){a(this,e),this.common=t,this.modalService=n,this.user=o,this.cdr=i,this.accountService=r,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.search="",this.searchedData=[]}return r(e,[{key:"ngOnChanges",value:function(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}},{key:"lastClickHandler",value:function(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}},{key:"clickHandler",value:function(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}},{key:"doubleClickHandler",value:function(e,t){e.stopPropagation(),this.action(t)}},{key:"keyHandler",value:function(e){e.stopPropagation();var t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}},{key:"searchValues",value:function(){var e=this;this.searchedData=this.data.filter((function(t){return t.name?t.name.toLowerCase().includes(e.search.toLowerCase()):!!t.ledgerName&&t.ledgerName.toLowerCase().includes(e.search.toLowerCase())})),this.cdr.detectChanges()}}]),e}()).\u0275fac=function(e){return new(e||Mi)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](u.a))},Mi.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Mi,selectors:[["balance-sheet-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[h["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[3,"innerHTML"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","240px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,hi,3,2,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},directives:[D.u,D.t,Mi,D.r,F.d,F.r,F.u,qo.e,qo.a,qo.d],pipes:[D.g],styles:[Ei],changeDetection:0}),Mi),Pi=((ki=function(){function t(e,n,o,i,r,l,c,d){a(this,t),this.api=e,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.cdr=c,this.modalService=d,this.selectedName="",this.balanceData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.balanceSheetData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.assettottalamount=0,this.libilitytottalamount=0,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.balanceData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.balanceData.enddate,this.setFoucus("startdate"),this.common.currentPage="Balance Sheet"}return r(t,[{key:"ngOnInit",value:function(){}},{key:"getBalanceSheet",value:function(){var e=this;this.balanceData.startdate=this.accountService.fromdate,this.balanceData.enddate=this.accountService.todate;var t={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate};this.common.loading++,this.api.post("Company/GetBalanceData",t).subscribe((function(t){e.common.loading--,e.balanceSheetData=t.data,e.generalizeData()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"generalizeData",value:function(){var e=this;this.assettottalamount=0,this.libilitytottalamount=0;var t=sn.groupBy(this.balanceSheetData,"y_is_assets"),n=t[0],o=t[1];this.assets=[],this.liabilities=[];for(var a=function(t){var o=n[t],a=[];o.y_path&&(a=o.y_path.split("--\x3e")),o.labels=a.splice(1,a.length);var i=e.assets.findIndex((function(e){return e.name===a[0]}));-1===i?e.assets.push({name:a[0]||o.y_groupname,data:[o],amount:parseFloat(o.y_amount)}):(e.assets[i].amount+=parseFloat(o.y_amount),e.assets[i].data.push(o))},i=0;i<n.length;i++)a(i);console.log("assets",this.assets),this.assets.map((function(t){return t.data=e.findChilds(t.data)})),console.log("assets",this.assets);for(var r=function(t){var n=o[t],a=[];n.y_path&&(a=n.y_path.split("--\x3e")),n.labels=a.splice(1,a.length);var i=e.liabilities.findIndex((function(e){return e.name===a[0]}));-1===i?e.liabilities.push({name:a[0]||n.y_groupname,data:[n],amount:parseFloat(n.y_amount)}):(e.liabilities[i].amount+=parseFloat(n.y_amount),e.liabilities[i].data.push(n))},l=0;l<o.length;l++)r(l);this.liabilities.map((function(t){return t.data=e.findChilds(t.data)})),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length?function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],amount:t.y_ledger_name?parseFloat(t.y_amount):0}):(n[i].amount+=t.y_ledger_name?parseFloat(t.y_amount):0,t.y_ledger_name&&n[i].data.push(t))}():n.push({ledgerName:e[o].y_ledger_name,ledgerdata:e[o],data:[],amount:e[o].y_amount,ledgerid:e[o].y_ledgerid,colorflag:1});if(n.length)return n.map((function(e){return e.data.length?{name:e.name,data:t.findChilds(e.data),amount:e.amount}:e})).sort((function(e,t){return e.length>t.length?1:-1}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in i)if(i[r].length>1&&r){var l={ledgerName:r,ledgerdata:i[r],amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(l)}else if(r){var c={ledgerName:r,amount:i[r].reduce((function(e,t){return e+parseFloat(t.y_amount)}),0)};a.push(c)}return a}},{key:"formattData",value:function(){var e=sn.groupBy(this.balanceSheetData,"y_is_assets"),t=sn.groupBy(e[0],"y_groupname"),n=sn.groupBy(e[1],"y_groupname");for(var o in this.liabilities=[],t){var a=0;t[o].map((function(e){e.y_amount&&(a+=parseFloat(e.y_amount))})),this.liabilities.push({name:o,amount:a,balanceSheets:t[o].filter((function(e){return e.y_ledger_name}))})}for(var i in this.assets=[],n){var r=0;n[i].map((function(e){e.y_amount&&(r+=parseFloat(e.y_amount))})),this.assets.push({name:i,amount:r,balanceSheets:n[i].filter((function(e){return e.y_ledger_name}))})}this.liabilities.map((function(e){var t=sn.groupBy(e.balanceSheets,"y_sub_groupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach((function(n){var o=0;t[n].forEach((function(e){o+=parseFloat(e.y_amount)})),e.subGroups.push({name:n,balanceSheets:t[n],total:o})})),delete e.balanceSheets})),this.assets.map((function(e){var t=sn.groupBy(e.balanceSheets,"y_sub_groupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach((function(n){var o=0;t[n].forEach((function(e){o+=parseFloat(e.y_amount)})),e.subGroups.push({name:n,balanceSheets:t[n],total:o})})),delete e.balanceSheets})),this.changeViewType()}},{key:"filterData",value:function(e,t){return e.filter((function(e){return e.y_is_assets===t}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"enter"==t&&this.showDateModal)return this.showDateModal=!1,this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.balanceData.startdate=this.common.handleDateOnEnterNew(this.balanceData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.balanceData.enddate=this.common.handleDateOnEnterNew(this.balanceData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.balanceData[o].includes("-"))t=this.balanceData[o].split("-");else{if(!this.balanceData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.balanceData[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,this.balanceData[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){document.getElementById(e).focus()}),100)}},{key:"opendaybookmodel",value:function(e){console.log("ledger id 00000",e,e.ledgerdata.y_path),e.ledgerdata.y_path.includes("Profit & Loss")?(this.common.params={startdate:this.accountService.fromdate,enddate:this.accountService.todate,isModal:!0},this.modalService.open(Za,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerid,vouchertype:0,ledgername:e.ledgerName},this.modalService.open(xo.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))),this.common.currentPage="Balance Sheet"}},{key:"RowSelected",value:function(e){this.selectedName=e}},{key:"getProfitLoss",value:function(){this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate},this.modalService.open(Za,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"handleExpandation",value:function(e,t,n,o,a){e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}},{key:"changeViewType",value:function(){var e=this;this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((function(t,n){return e.active.liabilities.mainGroup.push("mainGroup"+n+0)})),this.assets.forEach((function(t,n){return e.active.asset.mainGroup.push("mainGroup"+n+0)}))):"all"==this.viewType&&(this.liabilities.forEach((function(t,n){e.active.liabilities.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.liabilities.subGroup.push("subGroup"+n+o)}))})),this.assets.forEach((function(t,n){e.active.asset.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.asset.subGroup.push("subGroup"+n+o)}))})))}},{key:"csvFunction",value:function(){var t=this;if("main"==this.isExpand)this.singleFormatCsvData();else{var n=[],o=[],a=[];n.push(Object.assign({particular:"Liability",openingamount:"Amount"})),o.push(Object.assign({particular:"Asset",openingamount:"Amount"})),this.assets.forEach((function(o){n.push({particular:o.name,openingamount:0==o.amount?"":o.amount}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),this.liabilities.forEach((function(n){o.push({particular:n.name,openingamount:0==n.amount?"":n.amount}),o.push.apply(o,e(t.generateCSVData(n.data,"  ")))}));for(var i=0;i<n.length;i++)a.push({libilities:n[i].particular,Amount:n[i].openingamount});for(var r=0;r<o.length;r++)r<a.length?(a[r].asstes=o[r].particular,a[r]["asstes amount"]=o[r].openingamount):a.push({libilities:"","libilities Amount":"",asstes:o[r].particular,"asstes amount":o[r].openingamount});this.csvService.jsonToExcel(a)}}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,openingamount:i.amount}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:n+i.ledgerName,openingamount:i.amount})}return o}},{key:"singleFormatCsvData",value:function(){var e=[];e.push(Object.assign({liability:" Liability",liabilityAmount:"Amount"})),this.assets.forEach((function(t){e.push({liability:t.name,liabilityAmount:t.amount})}));var t=[];t.push(Object.assign({asset:"Asset",assetAmount:"Amount"})),this.liabilities.forEach((function(e){t.push({asset:e.name,assetAmount:e.amount})}));for(var n=[],o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),this.csvService.jsonToExcel(n)}}]),t}()).\u0275fac=function(e){return new(e||ki)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](v.r))},ki.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ki,selectors:[["balancesheet"]],decls:52,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],["id","balance-sheet"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle","click",4,"ngIf"],[3,"action","data","isExpandAll","active","labels",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle","click"],[3,"action","data","isExpandAll","active","labels"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275elementStart"](4,"input",3),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](5," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",4),h["\u0275\u0275elementStart"](7,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](8," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),h["\u0275\u0275element"](10,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"span",8),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](12,"i",9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",10),h["\u0275\u0275elementStart"](14,"div",11),h["\u0275\u0275elementStart"](15,"div",12),h["\u0275\u0275elementStart"](16,"label",13),h["\u0275\u0275text"](17,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",11),h["\u0275\u0275elementStart"](20,"div",12),h["\u0275\u0275elementStart"](21,"label",13),h["\u0275\u0275text"](22,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",11),h["\u0275\u0275elementStart"](25,"div",12),h["\u0275\u0275elementStart"](26,"button",16),h["\u0275\u0275listener"]("click",(function(){return t.getBalanceSheet()})),h["\u0275\u0275text"](27,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",17),h["\u0275\u0275elementStart"](29,"div",18),h["\u0275\u0275elementStart"](30,"div",19),h["\u0275\u0275elementStart"](31,"div",20),h["\u0275\u0275elementStart"](32,"div",21),h["\u0275\u0275text"](33,"Liability"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",22),h["\u0275\u0275text"](35,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",23),h["\u0275\u0275template"](37,xi,3,2,"div",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"div",19),h["\u0275\u0275elementStart"](39,"div",20),h["\u0275\u0275elementStart"](40,"div",21),h["\u0275\u0275text"](41,"Asset"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",22),h["\u0275\u0275text"](43,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",23),h["\u0275\u0275template"](45,yi,8,13,"div",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",10),h["\u0275\u0275elementStart"](47,"div",25),h["\u0275\u0275template"](48,Ci,7,5,"div",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"div",27),h["\u0275\u0275template"](50,_i,7,5,"div",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](51,Si,4,1,"div",28)),2&e&&(h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](14),h["\u0275\u0275property"]("ngForOf",t.assets),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngForOf",t.liabilities),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.liabilities.length),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.assets.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.t,D.u,D.x,wi],pipes:[D.g],styles:[Ei],changeDetection:0}),ki),Oi=function(e){return{highlight:e}};function Ii(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",24),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,Oi,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_stockitemtype),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_stockitemsubtype),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_stockitem),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.available_qty)}}function Di(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",25),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",26),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",27),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.stockAvailable[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.stockAvailable[o.f2Date])}}var Vi,Fi=((Vi=function(){function e(t,n,o){a(this,e),this.api=t,this.common=n,this.user=o,this.stockAvailableData=[],this.stockAvailable={date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),stocktype:{name:"",id:0},stocksubtype:{name:" ",id:0},stockitem:{name:" ",id:0}},this.activeId="stocktype",this.autoSuggestion={data:[],targetId:"",display:""},this.selectedRow=-1,this.selectedName="",this.suggestions={stockTypeData:[],stockSubTypeData:[],stockItems:[],purchasestockItems:[],salesstockItems:[],discountLedgers:[],warehouses:[],invoiceTypes:[],list:[]},this.suggestionIndex=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.lastActiveId="",this.getStockType(),this.common.currentPage="Stock Available",this.setFoucus("stocktype")}return r(e,[{key:"ngOnInit",value:function(){}},{key:"getStockType",value:function(){var e=this;this.common.loading++,this.api.post("Stock/GetStocktype",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.suggestions.stockTypeData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getStockSubType",value:function(e){var t=this,n={stocktype:e};this.common.loading++,this.api.post("Suggestion/GetSearchStockType",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.suggestions.stockSubTypeData=e.data,t.autoSuggestion.data=t.suggestions.stockSubTypeData}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getStockItem",value:function(e){var t=this,n={stocksubtype:e};this.common.loading++,this.api.post("Suggestion/GetStockItemData",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.suggestions.stockItems=e.data,t.autoSuggestion.data=t.suggestions.stockItems}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),this.setAutoSuggestion(),"f2"==t&&!this.showDateModal&&this.activeId.includes("date"))return this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date=this.activeId,void(this.activedateid=this.lastActiveId);if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("stocktype")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("stocksubtype")):this.activeId.includes("stocksubtype")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("stockitem")):this.activeId.includes("stockitem")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("date")):this.activeId.includes("date")&&(this.stockAvailable.date=this.common.handleDateOnEnterNew(this.stockAvailable.date),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"date"==this.activeId&&this.setFoucus("stockitem"),"stockitem"==this.activeId&&this.setFoucus("stocksubtype"),"stocksubtype"==this.activeId&&this.setFoucus("stocktype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("date"==this.activeId&&"backspace"!==t){if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else"backspace"!=t&&(this.allowBackspace=!1);(t.includes("arrowup")||t.includes("arrowdown"))&&this.stockAvailableData.length&&(console.log("-Jai rana---"),"arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockAvailableData.length-1&&this.selectedRow++)}}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-";if(this.stockAvailable.date.includes("-"))t=this.stockAvailable.date.split("-");else{if(!this.stockAvailable.date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.stockAvailable.date.split("/"),n="/"}var o=t[0];o=1==o.length?"0"+o:o;var a=t[1];a=1==a.length?"0"+a:a;var i=t[2];i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+n+a+n+i),this.stockAvailable.date=o+n+a+n+i}},{key:"selectSuggestion",value:function(e,t){console.log("Suggestion on select: ",e),"stocktype"==this.activeId&&(this.stockAvailable.stocktype.name=e.name,this.stockAvailable.stocktype.id=e.id)}},{key:"setFoucus",value:function(e){var t=this;console.log("Id: ",e),setTimeout((function(){var n=document.getElementById(e);console.log("Element: ",n),n.focus(),t.setAutoSuggestion()}),100)}},{key:"onSelect",value:function(e,t){console.log("Suggestion: ",e),"stocktype"==t?(this.stockAvailable.stocktype.name=e.name,this.stockAvailable.stocktype.id=e.id,this.getStockSubType(this.stockAvailable.stocktype.id)):"stocksubtype"==t?(this.stockAvailable.stocksubtype.name=e.name,this.stockAvailable.stocksubtype.id=e.id,this.getStockItem(e.id)):"stockitem"==t&&(this.stockAvailable.stockitem.name=e.name,this.stockAvailable.stockitem.id=e.id)}},{key:"handleArrowUpDown",value:function(e){var t=this.generateIDs();console.log("Key:",e,t,t.indexOf(this.activeId)),-1!=t.indexOf(this.activeId)&&("arrowdown"==e?this.suggestionIndex!=this.suggestions.list.length-1?this.suggestionIndex++:this.suggestionIndex=0:0!=this.suggestionIndex?this.suggestionIndex--:this.suggestionIndex=this.suggestions.list.length-1)}},{key:"generateIDs",value:function(){return["stocktype","stocksubtype","stockitem"]}},{key:"setAutoSuggestion",value:function(){var e=document.activeElement.id;if("stocktype"==e)this.autoSuggestion.data=this.suggestions.stockTypeData;else if("stocksubtype"==e)this.autoSuggestion.data=this.suggestions.stockSubTypeData;else{if(!e.includes("stockitem"))return this.autoSuggestion.data=[],this.autoSuggestion.display="",void(this.autoSuggestion.targetId="");this.autoSuggestion.data=this.suggestions.stockItems}this.autoSuggestion.display="name",this.autoSuggestion.targetId=e,console.log("Auto Suggestion: ",this.autoSuggestion)}},{key:"dismiss",value:function(e){e&&this.getStockAvailable(this.stockAvailable)}},{key:"getStockAvailable",value:function(e){var t=this,n={stocktypeid:e.stocktype.id,stocksubtypeid:e.stocksubtype.id,stockitemid:e.stockitem.id,date:e.date};console.log("params11: ",n),this.common.loading++,this.api.post("Stock/getStockAvailable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.stockAvailableData=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}}]),e}()).\u0275fac=function(e){return new(e||Vi)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a))},Vi.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Vi,selectors:[["stockavailable"]],decls:53,vars:9,consts:[[2,"border","0px","padding-top","25px"],[2,"min-height","450px",3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","stocktype","name","stocktype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stocksubtype","name","stocksubtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stockitem","name","stockitem",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","date","placeholder","Select Date","name","date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],[3,"data","targetId","display","select"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stocktype.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",8),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"label",10),h["\u0275\u0275text"](17,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stocksubtype.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",8),h["\u0275\u0275elementStart"](20,"div",9),h["\u0275\u0275elementStart"](21,"label",10),h["\u0275\u0275text"](22,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stockitem.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",2),h["\u0275\u0275elementStart"](25,"div",14),h["\u0275\u0275elementStart"](26,"div",9),h["\u0275\u0275elementStart"](27,"label",10),h["\u0275\u0275text"](28,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",14),h["\u0275\u0275elementStart"](31,"div",9),h["\u0275\u0275elementStart"](32,"button",16),h["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),h["\u0275\u0275text"](33,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",17),h["\u0275\u0275elementStart"](35,"div",18),h["\u0275\u0275elementStart"](36,"auto-suggetion-in-side",19),h["\u0275\u0275listener"]("select",(function(e){return t.onSelect(e,t.autoSuggestion.targetId)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"table",20),h["\u0275\u0275elementStart"](38,"thead",21),h["\u0275\u0275elementStart"](39,"tr"),h["\u0275\u0275elementStart"](40,"th"),h["\u0275\u0275text"](41,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"th"),h["\u0275\u0275text"](43,"Stock Item Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"th"),h["\u0275\u0275text"](45,"Stock Item Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"th"),h["\u0275\u0275text"](47,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](48,"th"),h["\u0275\u0275text"](49,"Quantity"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"tbody"),h["\u0275\u0275template"](51,Ii,11,8,"tr",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](52,Di,4,1,"div",23)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.stockAvailable.stocktype.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.stockAvailable.stocksubtype.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.stockAvailable.stockitem.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.stockAvailable.date),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("data",t.autoSuggestion.data)("targetId",t.autoSuggestion.targetId)("display",t.autoSuggestion.display),h["\u0275\u0275advance"](15),h["\u0275\u0275property"]("ngForOf",t.stockAvailableData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,V.a,D.t,D.u,D.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:18%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:18%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 314px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),Vi),Ti=function(e){return{highlight:e}};function Bi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",7),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openwareHouseModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openwareHouseModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td",8),h["\u0275\u0275elementStart"](11,"a",9),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](12,"i",10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,Ti,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.parent_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,5,o.entry_dt,"dd-MMM-yy"))}}var Ai,Li=((Ai=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.wareHouseData=[],this.getWareHouseData(),this.common.currentPage="Ware House",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getWareHouseData()}},{key:"getWareHouseData",value:function(){var e=this;this.common.loading++,this.api.post("company/getWarehouse",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data.invoice[0]),e.wareHouseData=t.data.invoice,console.log("after api data:",e.wareHouseData)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openwareHouseModal",value:function(e){var t=this;e?(console.log("ware House",e),this.common.params=e,this.common.params.title="Ware house",this.modalService.open(w.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){n.response&&t.updateWareHouse(n.wareHouse,e.id)}))):(this.common.params=null,this.modalService.open(w.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addWareHouse(e.wareHouse)})))}},{key:"addWareHouse",value:function(e){var t=this;console.log("wareHouse",e);var n={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",n),this.common.loading++,this.api.post("Company/InsertWarehouse",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_warehouse;t.common.showToast(""==n?"Add Successfull  ":n),t.getWareHouseData()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateWareHouse",value:function(e,t){var n=this;console.log("updated data",e);var o={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:t};console.log("params11: ",o),this.common.loading++,this.api.post("Company/InsertWarehouse",o).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_warehouse;n.common.showToast(""==t?" Updated Sucess":t),n.getWareHouseData()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"warehouse"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getWareHouseData(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}}]),e}()).\u0275fac=function(e){return new(e||Ai)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](v.r))},Ai.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Ai,selectors:[["ware-house"]],decls:20,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"button",1),h["\u0275\u0275listener"]("click",(function(){return t.openwareHouseModal()})),h["\u0275\u0275element"](3,"i",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"table",4),h["\u0275\u0275elementStart"](6,"thead",5),h["\u0275\u0275elementStart"](7,"tr"),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"Parent Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"th"),h["\u0275\u0275text"](13,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"th"),h["\u0275\u0275text"](15,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"th"),h["\u0275\u0275text"](17,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"tbody"),h["\u0275\u0275template"](19,Bi,13,10,"tr",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngForOf",t.wareHouseData))},directives:[b.s,b.r,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:200px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:200px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:350px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important}"]}),Ai);function Ri(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"a",28),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function ji(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"a",29),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function zi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",30),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","y_ledger_name")})),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",o.ledgerData)}}function Ni(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275elementStart"](1,"input",31),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.search=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().jrxSearch(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.search)("placeholder",o.name)}}function Gi(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Branch"),h["\u0275\u0275elementEnd"]())}function Yi(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.y_company_branch,"")}}var Hi=function(e,t){return{highlight:e,radclass:t}};function $i(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",32),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid,e.y_type,e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"td"),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](18,Yi,2,1,"td",23),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction2"](13,Hi,i.selectedRow==a,null==o.y_type)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,10,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_ledger),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_type),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_dramunt),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==i.accountService.selected.branch.id)}}function qi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",39),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).jrxPagination(e)})),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",o==a.pages.active?"active-page":""),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](o)}}function Ki(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",33),h["\u0275\u0275elementStart"](1,"div",34),h["\u0275\u0275elementStart"](2,"button",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active-1)})),h["\u0275\u0275text"](3,"Pre"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,qi,2,2,"button",36),h["\u0275\u0275elementStart"](5,"button",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active+1)})),h["\u0275\u0275text"](6,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",37),h["\u0275\u0275elementStart"](8,"input",38),h["\u0275\u0275listener"]("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pages.limit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("disabled",1==o.pages.active),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.common.generateArray(o.pages.count)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("disabled",o.pages.active==o.pages.count),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.pages.limit)}}function Ui(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",40),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",41),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",42),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.DayBook[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.DayBook[o.f2Date])}}var Wi,Qi=((Wi=function(){function e(t,n,o,i,r){var l=this;a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.selectedName="",this.flag=0,this.fuelFilings=[],this.VoucherEditTime=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_ledger",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_code",search:""},{name:"Ref No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,this.common.refresh=this.refresh.bind(this),this.getAllLedger(),this.setFoucus("ledger"),this.common.currentPage="Cash Book",et.getItem("cash_book_ledgers").then((function(e){e&&(l.ledgerData=e),l.getAllLedger(!e)})),et.getItem("cashbook_data").then((function(e){e&&(l.DayData=e,l.filterData())}))}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"refresh",value:function(){this.getAllLedger(),this.setFoucus("ledger"),this.getDayBook()}},{key:"openinvoicemodel",value:function(e,t){this.common.params={invoiceid:e,ordertype:t},this.modalService.open(Lt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&console.log("open succesfull")}))}},{key:"getAllLedger",value:function(){var e=this,t="Suggestion/GetLedger?transactionType=credit&voucherId=-3&search=test";console.log("URL: ",t),this.api.get(t).subscribe((function(t){console.log(t),e.ledgerData=t.data,et.setItem("cash_book_ledgers",e.ledgerData)}),(function(t){console.error(t),e.common.showError()})),this.setFoucus("ref-code")}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Cash Book From :"+e.DayBook.startdate+" To :"+e.DayBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDayBook",value:function(){var e=this;this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate,console.log("Accounts:",this.DayBook);var t={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetCashBook",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.DayData=t.data,e.filterData(),e.DayData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.DayBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.DayBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}},{key:"filterData",value:function(){var e=[];this.DayData.map((function(t){-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)})),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,et.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,this.DayData[this.selectedRow].y_type,this.DayData[this.selectedRow])}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"addvance",value:function(){var e=this;this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data: ",t),t.response&&(e.DayBook.isamount=t.ledger.isamount,e.DayBook.remarks=t.ledger.remarks,e.DayBook.vouchercustcode=t.ledger.vouchercustcode,e.DayBook.vouchercode=t.ledger.vouchercode,e.DayBook.frmamount=t.ledger.frmamount,e.DayBook.toamount=t.ledger.toamount,e.flag=0!=t.ledger.toamount||0!=t.ledger.frmamount||""!=t.ledger.vouchercode||""!=t.ledger.vouchercustcode||""!=t.ledger.remarks||0!=t.ledger.isamount?1:0)}))}},{key:"test",value:function(e){console.log("--------: ",e)}},{key:"getBookDetail",value:function(e,t,n){console.log("vouher id",e,"ytype",t),t.toLowerCase().includes("purchase")||t.toLowerCase().includes("sales")||t.toLowerCase().includes("debit")||t.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:n.y_vouchertype_id,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):t.toLowerCase().includes("fuel")?this.openFuelEdit(n):n.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(n):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:n.y_vouchertype_id},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e)}))),this.common.currentPage="Cash Book"}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log(e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.DayBook.startdate,currentFilling:t.DayBook.enddate,fuelstationid:e.y_refid,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e)}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.DayBook.startdate,currentFilling:o.DayBook.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})))}},{key:"jrxPagination",value:function(e,t){this.pages.active=e;var n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}},{key:"jrxPageLimitReset",value:function(){var e=this;this.jrxPageTimer=setTimeout((function(){if("string"==typeof e.pages.limit&&(e.pages.limit=parseInt(e.pages.limit)||0),!e.pages.limit||e.pages.limit<100)return e.pages.limit=e.accountService.perPage,void e.common.showError("Minimum per page limit 100");e.pages.count=Math.floor(e.DayData.length/e.pages.limit),e.DayData.length%e.pages.limit&&e.pages.count++,e.accountService.perPage=e.pages.limit,localStorage.setItem("per_page",e.accountService.perPage.toString()),e.jrxPagination(e.pages.active<e.pages.count?e.pages.active:e.pages.count)}),500)}},{key:"jrxSearch",value:function(e){var t=this;clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout((function(){if(t.searchedData=[],e.search){for(var n=0;n<t.DayData.length;n++)t.DayData[n][e.key]&&("y_date"===e.key&&t.common.changeDateformat(t.DayData[n][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||t.DayData[n][e.key].toLowerCase().includes(e.search.toLowerCase()))&&t.searchedData.push(t.DayData[n]);t.pages.count=Math.floor(t.searchedData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count,t.searchedData)}else t.searchedData=[],t.pages.count=Math.floor(t.DayData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count)}),500)}}]),e}()).\u0275fac=function(e){return new(e||Wi)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},Wi.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Wi,selectors:[["cashbook"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:48,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","ledger","display","y_ledger_name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",1),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"label",9),h["\u0275\u0275text"](12,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",8),h["\u0275\u0275elementStart"](16,"label",9),h["\u0275\u0275text"](17,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",1),h["\u0275\u0275elementStart"](20,"div",7),h["\u0275\u0275elementStart"](21,"div",8),h["\u0275\u0275elementStart"](22,"label",9),h["\u0275\u0275text"](23,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",13),h["\u0275\u0275template"](26,Ri,3,0,"div",14),h["\u0275\u0275template"](27,ji,3,0,"div",14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",13),h["\u0275\u0275elementStart"](29,"div",8),h["\u0275\u0275elementStart"](30,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),h["\u0275\u0275text"](31,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275elementStart"](33,"div",8),h["\u0275\u0275elementStart"](34,"div",17),h["\u0275\u0275template"](35,zi,1,1,"auto-suggetion-in-side",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",19),h["\u0275\u0275elementStart"](37,"table",20),h["\u0275\u0275elementStart"](38,"thead",21),h["\u0275\u0275elementStart"](39,"tr"),h["\u0275\u0275elementStart"](40,"th"),h["\u0275\u0275text"](41,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](42,Ni,2,2,"th",22),h["\u0275\u0275template"](43,Gi,2,0,"th",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"tbody"),h["\u0275\u0275template"](45,$i,19,16,"tr",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](46,Ki,9,4,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](47,Ui,4,1,"div",26)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==t.flag),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",1==t.flag),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngIf",t.ledgerData.length),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",t.filters),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",t.DayData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pages.count>=1),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.u,D.t,V.a,D.r],pipes:[D.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),Wi);function Ji(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"a",28),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Xi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",27),h["\u0275\u0275elementStart"](1,"a",29),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Zi(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",30),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","y_ledger_name")})),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",o.ledgerData)}}function er(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275elementStart"](1,"input",31),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.search=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().jrxSearch(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngModel",o.search)("placeholder",o.name)}}function tr(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Branch"),h["\u0275\u0275elementEnd"]())}function nr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.y_company_branch,"")}}var or=function(e,t){return{highlight:e,radclass:t}};function ar(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",32),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid,e.y_type,e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"td"),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](18,nr,2,1,"td",23),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction2"](13,or,i.selectedRow==a,null==o.y_type)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,10,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_ledger),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_type),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_dramunt),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==i.accountService.selected.branch.id)}}function ir(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",39),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).jrxPagination(e)})),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",o==a.pages.active?"active-page":""),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](o)}}function rr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",33),h["\u0275\u0275elementStart"](1,"div",34),h["\u0275\u0275elementStart"](2,"button",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active-1)})),h["\u0275\u0275text"](3,"Pre"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,ir,2,2,"button",36),h["\u0275\u0275elementStart"](5,"button",35),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]();return e.jrxPagination(e.pages.active+1)})),h["\u0275\u0275text"](6,"Next"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",37),h["\u0275\u0275elementStart"](8,"input",38),h["\u0275\u0275listener"]("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pages.limit=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("disabled",1==o.pages.active),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",o.common.generateArray(o.pages.count)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("disabled",o.pages.active==o.pages.count),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.pages.limit)}}function lr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",40),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",41),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",42),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.bankBook[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.bankBook[o.f2Date])}}var cr,dr=((cr=function(){function e(t,n,o,i,r){var l=this;a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.selectedName="",this.flag=0,this.fuelFilings=[],this.VoucherEditTime=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_ledger",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.getBranchList(),this.getLedgers(),this.setFoucus("ledger"),this.common.currentPage="Bank Book",et.getItem("bank_book_ledgers").then((function(e){e&&(l.ledgerData=e),l.getLedgers(!e)})),et.getItem("bankbook_data").then((function(e){e&&(l.DayData=e,l.filterData())}))}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"refresh",value:function(){this.getBranchList(),this.getLedgers(),this.setFoucus("ledger"),this.getBankBook()}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Bank Book From :"+e.bankBook.startdate+" To :"+e.bankBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgers",value:function(){var e=this,t="Suggestion/GetLedger?transactionType=credit&voucherId=-1&search=test";console.log("URL: ",t),this.api.get(t).subscribe((function(t){console.log(t),e.ledgerData=t.data,console.log("ledger data new",e.ledgerData[0].y_ledger_id),et.setItem("bank_book_ledgers",e.ledgerData)}),(function(t){console.error(t),e.common.showError()})),this.setFoucus("ref-code")}},{key:"getBankBook",value:function(){var e=this;console.log("Accounts:",this.bankBook),this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate;var t={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,ledger:this.bankBook.ledger.id,branchId:this.bankBook.branch.id,isamount:this.bankBook.isamount,remarks:this.bankBook.remarks,vouchercustcode:this.bankBook.vouchercustcode,vouchercode:this.bankBook.vouchercode,frmamount:this.bankBook.frmamount,toamount:this.bankBook.toamount};this.common.loading++,this.api.post("Company/GetBankBook",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.DayData=t.data,e.filterData(),e.DayData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.bankBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.bankBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}},{key:"filterData",value:function(){var e=[];this.DayData.map((function(t){-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)})),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,et.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}},{key:"getBookDetail",value:function(e,t,n){console.log("vouher id",e,"ytype",t),t.toLowerCase().includes("purchase")||t.toLowerCase().includes("sales")||t.toLowerCase().includes("debit")||t.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:n.y_vouchertype_id,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):t.toLowerCase().includes("fuel")?this.openFuelEdit(n):n.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(n):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:n.y_vouchertype_id},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e)}))),this.common.currentPage="Bank Book"}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log(e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.bankBook.startdate,currentFilling:t.bankBook.enddate,fuelstationid:e.y_refid,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e)}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.bankBook.startdate,currentFilling:o.bankBook.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,this.DayData[this.selectedRow].y_type,this.DayData[this.selectedRow])}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"test",value:function(e){console.log("--------: ",e)}},{key:"addvance",value:function(){var e=this;this.common.params={isamount:this.bankBook.isamount,remarks:this.bankBook.remarks,vouchercustcode:this.bankBook.vouchercustcode,vouchercode:this.bankBook.vouchercode,frmamount:this.bankBook.frmamount,toamount:this.bankBook.toamount},this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data: ",t),t.response&&(e.bankBook.isamount=t.ledger.isamount,e.bankBook.remarks=t.ledger.remarks,e.bankBook.vouchercustcode=t.ledger.vouchercustcode,e.bankBook.vouchercode=t.ledger.vouchercode,e.bankBook.frmamount=t.ledger.frmamount,e.bankBook.toamount=t.ledger.toamount,e.flag=0!=t.ledger.toamount||0!=t.ledger.frmamount||""!=t.ledger.vouchercode||""!=t.ledger.vouchercustcode||""!=t.ledger.remarks||0!=t.ledger.isamount?1:0)}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})))}},{key:"jrxPagination",value:function(e,t){this.pages.active=e;var n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}},{key:"jrxPageLimitReset",value:function(){var e=this;this.jrxPageTimer=setTimeout((function(){if("string"==typeof e.pages.limit&&(e.pages.limit=parseInt(e.pages.limit)||0),!e.pages.limit||e.pages.limit<100)return e.pages.limit=e.accountService.perPage,void e.common.showError("Minimum per page limit 100");e.pages.count=Math.floor(e.DayData.length/e.pages.limit),e.DayData.length%e.pages.limit&&e.pages.count++,e.accountService.perPage=e.pages.limit,localStorage.setItem("per_page",e.accountService.perPage.toString()),e.jrxPagination(e.pages.active<e.pages.count?e.pages.active:e.pages.count)}),500)}},{key:"jrxSearch",value:function(e){var t=this;clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout((function(){if(t.searchedData=[],e.search){for(var n=0;n<t.DayData.length;n++)t.DayData[n][e.key]&&("y_date"===e.key&&t.common.changeDateformat(t.DayData[n][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||t.DayData[n][e.key].toLowerCase().includes(e.search.toLowerCase()))&&t.searchedData.push(t.DayData[n]);t.pages.count=Math.floor(t.searchedData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count,t.searchedData)}else t.searchedData=[],t.pages.count=Math.floor(t.DayData.length/t.pages.limit),t.DayData.length%t.pages.limit&&t.pages.count++,t.jrxPagination(t.pages.active<t.pages.count?t.pages.active:t.pages.count)}),500)}}]),e}()).\u0275fac=function(e){return new(e||cr)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},cr.\u0275cmp=h["\u0275\u0275defineComponent"]({type:cr,selectors:[["bankbooks"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:47,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","ledger","name","ledger","autocomplete","off",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","ledger","display","y_ledger_name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",1),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"label",9),h["\u0275\u0275text"](12,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",8),h["\u0275\u0275elementStart"](16,"label",9),h["\u0275\u0275text"](17,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",1),h["\u0275\u0275elementStart"](20,"div",7),h["\u0275\u0275elementStart"](21,"div",8),h["\u0275\u0275elementStart"](22,"label",9),h["\u0275\u0275text"](23,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",13),h["\u0275\u0275template"](26,Ji,3,0,"div",14),h["\u0275\u0275template"](27,Xi,3,0,"div",14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",13),h["\u0275\u0275elementStart"](29,"div",8),h["\u0275\u0275elementStart"](30,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getBankBook()})),h["\u0275\u0275text"](31,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275elementStart"](33,"div",8),h["\u0275\u0275elementStart"](34,"div",17),h["\u0275\u0275template"](35,Zi,1,1,"auto-suggetion-in-side",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",19),h["\u0275\u0275elementStart"](37,"table",20),h["\u0275\u0275elementStart"](38,"thead",21),h["\u0275\u0275elementStart"](39,"tr"),h["\u0275\u0275elementStart"](40,"th"),h["\u0275\u0275text"](41,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](42,er,2,2,"th",22),h["\u0275\u0275template"](43,tr,2,0,"th",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](44,ar,19,16,"tr",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](45,rr,9,4,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](46,lr,4,1,"div",26)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.bankBook.ledger.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==t.flag),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",1==t.flag),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngIf",t.ledgerData.length),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",t.filters),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.data),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pages.count>=1),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.u,D.t,V.a,D.r],pipes:[D.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:4%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:19%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:4%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-size:11px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:19%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 299px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),cr),sr=i("K/0S"),mr=function(e){return{highlight:e}};function ur(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",17),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](5,mr,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.statename),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.city_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.pincode)}}var pr,gr=((pr=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"name"},this.getstatedata={state:{name:"Rajasthan",id:29}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.getStates(),this.common.currentPage="city",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getpageData()}},{key:"getStates",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetState",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.autoSuggestion.data=t.data,e.statedata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getpageData",value:function(){var e=this,t={foid:123,stateid:this.getstatedata.state.id};this.common.loading++,this.api.post("Accounts/GetCity",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,console.log("after api data:",e.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openModal",value:function(e){var t=this;e?(console.log("city",e),this.common.params=e,this.modalService.open(sr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.getpageData()}))):(this.common.params=null,this.modalService.open(sr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.getpageData()})))}},{key:"addCity",value:function(e){var t=this;console.log("city",e);var n={cityname:e.city,stateid:e.state.id,pincode:e.pincode};console.log("params: ",n),this.common.loading++,this.api.post("Accounts/InsertCity",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.msg),t.getpageData()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateCity",value:function(e,t){var n=this;console.log("updated data",e);var o={cityname:e.city,stateid:e.state.id,pincode:e.pincode,id:t};console.log("params: ",o),this.common.loading++,this.api.post("Accounts/InsertCity",o).subscribe((function(e){n.common.loading--,console.log("res: ",e),e.msg&&n.common.showToast("Update SuccessFull"),n.getpageData()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"deleteCity",value:function(e){var t=this;console.log("city data",e);var n={id:e.id};console.log("params: ",n),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Accounts/DeleteCity",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getpageData(),t.common.showToast(" Delete Record")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()})))})))}},{key:"selectSuggestion",value:function(e,t){console.log("Suggestion on select: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}},{key:"onSelect",value:function(e,t){console.log("Suggestion: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}},{key:"onSelected",value:function(e,t,n){this.getstatedata.state.name=e[n],this.getstatedata.state.id=e.id,console.log("order User: ",this.getstatedata),this.setFoucus("submit")}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||pr)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](v.r))},pr.\u0275cmp=h["\u0275\u0275defineComponent"]({type:pr,selectors:[["city"]],decls:34,vars:3,consts:[[2,"margin","0px","border","0px"],[1,"row"],[1,"col-9"],[1,"col-6"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","state","name","state",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"auto-sugg"],["targetId","state","display","name",3,"data","select"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",1),h["\u0275\u0275elementStart"](5,"div",3),h["\u0275\u0275elementStart"](6,"div",4),h["\u0275\u0275elementStart"](7,"label",5),h["\u0275\u0275text"](8,"State"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.getstatedata.state.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",7),h["\u0275\u0275elementStart"](11,"div",4),h["\u0275\u0275elementStart"](12,"button",8),h["\u0275\u0275listener"]("click",(function(){return t.getpageData()})),h["\u0275\u0275text"](13,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"div",4),h["\u0275\u0275elementStart"](17,"auto-suggetion-in-side",10),h["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"state","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"button",11),h["\u0275\u0275listener"]("click",(function(){return t.openModal()})),h["\u0275\u0275element"](19,"i",12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",13),h["\u0275\u0275elementStart"](21,"table",14),h["\u0275\u0275elementStart"](22,"thead",15),h["\u0275\u0275elementStart"](23,"tr"),h["\u0275\u0275elementStart"](24,"th"),h["\u0275\u0275text"](25,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"th"),h["\u0275\u0275text"](27,"State Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"th"),h["\u0275\u0275text"](29,"City"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"th"),h["\u0275\u0275text"](31,"PinCode"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"tbody"),h["\u0275\u0275template"](33,ur,9,7,"tr",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.getstatedata.state.name),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("data",t.statedata),h["\u0275\u0275advance"](16),h["\u0275\u0275property"]("ngForOf",t.data))},directives:[b.s,b.r,F.d,F.r,F.u,V.a,D.t,D.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 283px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),pr);function hr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275elementStart"](1,"div",1),h["\u0275\u0275elementStart"](2,"div",7),h["\u0275\u0275elementStart"](3,"div",8),h["\u0275\u0275elementStart"](4,"input",9),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().changeRefresh(0)}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pending=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"span",10),h["\u0275\u0275text"](6,"Non-Pending"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"input",11),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().changeRefresh(1)}))("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().pending=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"span",10),h["\u0275\u0275text"](9,"Pending"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",12),h["\u0275\u0275elementStart"](11,"div",13),h["\u0275\u0275elementStart"](12,"button",14),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().getStoreQuestion()})),h["\u0275\u0275text"](13,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("value",0)("ngModel",o.pending),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("value",1)("ngModel",o.pending)}}function vr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",15),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().openStoreRequisitions()})),h["\u0275\u0275element"](1,"i",16),h["\u0275\u0275elementEnd"]()}}function fr(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"To Branch"),h["\u0275\u0275elementEnd"]())}function br(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Ware House"),h["\u0275\u0275elementEnd"]())}function xr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n[0].y_tobranch_name)}}function yr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n[0].y_warehouse_name)}}var Cr=function(e){return{highlight:e}};function _r(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",21),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"](2).selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).openStoreRequisitions(e[0].y_id,e[0].y_from_fobranch_id)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).openStoreRequisitions(e[0].y_id,e[0].y_from_fobranch_id)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](10,xr,2,1,"td",19),h["\u0275\u0275template"](11,yr,2,1,"td",19),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"td"),h["\u0275\u0275text"](17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"td"),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"td"),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](15,Cr,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_id),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,12,o[0].y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o[0].y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_fobranch_name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-1==i.storeRequestId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-101==i.storeRequestId),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_stocktype_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_stocksubtype_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_stockitem_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_amount)}}function Sr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"table",17),h["\u0275\u0275elementStart"](1,"thead",18),h["\u0275\u0275elementStart"](2,"tr"),h["\u0275\u0275elementStart"](3,"th"),h["\u0275\u0275text"](4,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"th"),h["\u0275\u0275text"](6,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"th"),h["\u0275\u0275text"](8,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"From Branch"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](11,fr,2,0,"th",19),h["\u0275\u0275template"](12,br,2,0,"th",19),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Stock Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Stock Sub Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"Stock Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"th"),h["\u0275\u0275text"](20,"Qty"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"th"),h["\u0275\u0275text"](22,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"tbody"),h["\u0275\u0275template"](24,_r,22,17,"tr",20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngIf",-1==n.storeRequestId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-101==n.storeRequestId),h["\u0275\u0275advance"](12),h["\u0275\u0275property"]("ngForOf",n.StockQuestions)}}function kr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n[0].y_to_fobranch_name)}}function Mr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n[0].y_from_fobranch_name)}}function Er(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",21),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"](2).selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).openStoreRequisitions(e[0].y_id,e[0].y_to_fobranch_id)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).openStoreRequisitions(e[0].y_id,e[0].y_to_fobranch_id)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](7,kr,2,1,"td",19),h["\u0275\u0275template"](8,Mr,2,1,"td",19),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](10,Cr,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o[0].y_cust_code),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-3!=i.storeRequestId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-3==i.storeRequestId),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,7,o[0].y_req_date,"dd-MMM-yy"))}}function wr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"table",17),h["\u0275\u0275elementStart"](1,"thead",18),h["\u0275\u0275elementStart"](2,"tr"),h["\u0275\u0275elementStart"](3,"th"),h["\u0275\u0275text"](4,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"th"),h["\u0275\u0275text"](6,"Request No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"th"),h["\u0275\u0275text"](8,"Issue No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"To Branch"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Request Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"tbody"),h["\u0275\u0275template"](14,Er,12,12,"tr",20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](14),h["\u0275\u0275property"]("ngForOf",n.StockQuestions)}}var Pr,Or=((Pr=function(){function e(t,n,o,i,r,l){var c=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.modalService=r,this.router=l,this.StockQuestions=[],this.storeRequestId=0,this.selectedName="",this.pending=1,this.common.refresh=this.refresh.bind(this),this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(c.storeRequestId=parseInt(e.id),c.common.currentPage=-2==c.storeRequestId?"Store Request":-3==c.storeRequestId?"Stock Issue":-101==c.storeRequestId?"Opening Stock":"Stock Transfer"),c.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}})),this.getStoreQuestion()}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getStoreQuestion()}},{key:"getStoreQuestion",value:function(){var e=this;console.log(" pending value",this.pending);var t={foid:123,storeRequestId:this.storeRequestId,pendingid:this.pending};this.common.loading++,this.api.post("Company/GetStoreReQuestion",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.formattData(t.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openStoreRequisitions",value:function(e,t){var n=this;this.common.params={storeRequestId:this.storeRequestId,stockQuestionId:e,stockQuestionBranchid:t,pendingid:this.pending},console.log("store rwequestion params",this.common.params),this.modalService.open(Gt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){console.log("responce data return",e),e.response&&n.getStoreQuestion()}))}},{key:"formattData",value:function(e){var t=sn.groupBy(e,"y_id");for(var n in console.log("groupData",t),this.StockQuestions=[],t)this.StockQuestions.push(t[n]);console.log("StockQuestions",this.StockQuestions)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"changeRefresh",value:function(e){this.pending!=e&&(this.StockQuestions=[],this.getStoreQuestion())}}]),e}()).\u0275fac=function(e){return new(e||Pr)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](d.c))},Pr.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Pr,selectors:[["storerequisitions"]],decls:8,vars:4,consts:[[2,"margin-top","20px !important","margin-bottom","0px !important","border","0px"],[1,"row"],["class","col-12 pl-0 pr-0",4,"ngIf"],["class","btn mb-4 add-button",3,"click",4,"ngIf"],[1,"main"],["class","table table-bordered ",4,"ngIf"],[1,"col-12","pl-0","pr-0"],[1,"col-3","pl-0"],[1,"form-group","type-radio-box"],["autocomplete","off","type","radio","id","pending","name","pending",1,"tjr-input",3,"value","ngModel","click","ngModelChange"],[1,"tjr-span"],["autocomplete","off","type","radio","id","nonpending","name","pending",1,"tjr-input",3,"value","ngModel","click","ngModelChange"],[1,"col-2","pl-0"],[1,"form-group"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275template"](3,hr,14,4,"div",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,vr,2,0,"button",3),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275template"](6,Sr,25,3,"table",5),h["\u0275\u0275template"](7,wr,15,1,"table",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",-3==t.storeRequestId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-3!=t.storeRequestId),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",-101==t.storeRequestId||-1==t.storeRequestId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",-2==t.storeRequestId||-3==t.storeRequestId))},directives:[b.s,b.r,D.u,F.z,F.d,F.r,F.u,D.t,D.r],pipes:[D.f],styles:[".selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.type-radio-box[_ngcontent-%COMP%]{margin:15px 0;padding:5px 0}.type-radio-box[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-top:0;margin-left:10px;vertical-align:middle;margin-right:5px}"]}),Pr),Ir=function(e){return{highlight:e}};function Dr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",19),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"td"),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"td"),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"td"),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"td"),h["\u0275\u0275text"](22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"td"),h["\u0275\u0275text"](24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](13,Ir,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stockitem_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.opening_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.pi_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.si_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.sr_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.pr_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.wastage_total_qt),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.storeRec_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.storeIssue_total_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stock_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.stock_amt)}}function Vr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",20),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",21),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.openingstock[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.openingstock[o.f2Date])}}var Fr,Tr=((Fr=function(){function e(t,n,o){a(this,e),this.api=t,this.common=n,this.user=o,this.openingStocks=[],this.stockdata=[],this.selectedRow=-1,this.selectedName="",this.openingstock={date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-")},this.activeId="date",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.lastActiveId="",this.common.currentPage="Opening Stock",this.setFoucus("date")}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();return this.activeId=document.activeElement.id,console.log("Active event",e),"f2"==t&&!this.showDateModal&&this.activeId.includes("date")?(this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date=this.activeId,void(this.activedateid=this.lastActiveId)):"enter"==t&&this.showDateModal?(this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId)):void("enter"==t?(this.allowBackspace=!0,this.activeId.includes("date")&&(this.openingstock.date=this.common.handleDateOnEnterNew(this.openingstock.date),this.setFoucus("submit"))):(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.openingStocks.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.openingStocks.length-1&&this.selectedRow++))}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-";if(this.openingstock.date.includes("-"))t=this.openingstock.date.split("-");else{if(!this.openingstock.date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.openingstock.date.split("/"),n="/"}var o=t[0];o=1==o.length?"0"+o:o;var a=t[1];a=1==a.length?"0"+a:a;var i=t[2];i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+n+a+n+i),this.openingstock.date=o+n+a+n+i}},{key:"setFoucus",value:function(e){console.log("Id: ",e),setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"dismiss",value:function(e){e&&this.getOpeningStock(this.openingstock)}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getOpeningStock",value:function(e){var t=this,n={date:e.date};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/OpeningStock",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.openingStocks=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}}]),e}()).\u0275fac=function(e){return new(e||Fr)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a))},Fr.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Fr,selectors:[["openingstock"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:49,vars:3,consts:[[2,"border","0px","padding-top","25px"],[2,"min-height","450px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","id","date","placeholder","Select Date","name","date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.openingstock.date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",12),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),h["\u0275\u0275text"](17,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",14),h["\u0275\u0275elementStart"](19,"table",15),h["\u0275\u0275elementStart"](20,"thead",16),h["\u0275\u0275elementStart"](21,"tr"),h["\u0275\u0275elementStart"](22,"th"),h["\u0275\u0275text"](23,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"th"),h["\u0275\u0275text"](25,"Item"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"th"),h["\u0275\u0275text"](27,"Opening Qty"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"th"),h["\u0275\u0275text"](29,"Purchase "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"th"),h["\u0275\u0275text"](31,"Sales"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"th"),h["\u0275\u0275text"](33,"Credit Note"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"th"),h["\u0275\u0275text"](35,"Debit Note"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"th"),h["\u0275\u0275text"](37,"Wastage"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"th"),h["\u0275\u0275text"](39,"Store Recived "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"th"),h["\u0275\u0275text"](41,"Store Issue"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"th"),h["\u0275\u0275text"](43,"Available Qty"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"th"),h["\u0275\u0275text"](45,"Stock Balance Amt"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"tbody"),h["\u0275\u0275template"](47,Dr,25,15,"tr",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](48,Vr,4,1,"div",18)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.openingstock.date),h["\u0275\u0275advance"](34),h["\u0275\u0275property"]("ngForOf",t.openingStocks),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,D.t,D.u,D.r],styles:[".selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right-color:#263238;font-weight:400;font-size:11px;width:9%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:5%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:9%;font-size:11px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%;min-width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:5%;min-width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),Fr),Br=i("qVss");function Ar(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](2,1,n.opnbal,"1.2-2")," ")}}function Lr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.opnbal),"1.2-2")," ")}}function Rr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4,"Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.clobal),"1.2-2"))}}function jr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4,"Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.clobal),"1.2-2"))}}function zr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",6),h["\u0275\u0275element"](2,"span",7),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,Ar,5,4,"div",8),h["\u0275\u0275template"](5,Lr,5,4,"div",8),h["\u0275\u0275elementStart"](6,"div",9),h["\u0275\u0275text"](7),h["\u0275\u0275pipe"](8,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",9),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,Rr,5,4,"div",8),h["\u0275\u0275template"](13,jr,5,4,"div",8),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",a.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",o.name,""),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.opnbal>=0),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(o.opnbal>=0)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](8,10,o.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,13,o.credit,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",o.opnbal>=0),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(o.opnbal>=0))}}function Nr(e,t){if(1&e&&h["\u0275\u0275element"](0,"trail-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels+"\xa0\xa0\xa0\xa0")}}var Gr=function(e){return{highlight:e}};function Yr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",6),h["\u0275\u0275element"](2,"span",7),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",6),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",9),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",9),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",6),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementStart"](18,"span"),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](21,Gr,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",r.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",i.ledgerName,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](6,9,r.setabsHandler(i.opnbal),"1.2-2")," "),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",i.opnbaltype,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,12,i.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,15,i.credit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,18,r.setabsHandler(i.clobal),"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",i.clobaltype,"")}}function Hr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,zr,14,16,"div",2),h["\u0275\u0275template"](2,Nr,1,6,"trail-tree",3),h["\u0275\u0275template"](3,Yr,20,23,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function $r(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Hr,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function qr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](2,1,n.opnbal,"1.2-2")," ")}}function Kr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.opnbal),"1.2-2")," ")}}function Ur(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4,"Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.clobal),"1.2-2"))}}function Wr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",6),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4,"Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,o.setabsHandler(n.clobal),"1.2-2"))}}function Qr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).clickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",6),h["\u0275\u0275element"](2,"span",7),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,qr,5,4,"div",8),h["\u0275\u0275template"](5,Kr,5,4,"div",8),h["\u0275\u0275elementStart"](6,"div",9),h["\u0275\u0275text"](7),h["\u0275\u0275pipe"](8,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",9),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,Ur,5,4,"div",8),h["\u0275\u0275template"](13,Wr,5,4,"div",8),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",a.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",o.name,""),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.opnbal>=0),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(o.opnbal>=0)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](8,10,o.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,13,o.credit,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",o.opnbal>=0),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(o.opnbal>=0))}}function Jr(e,t){if(1&e&&h["\u0275\u0275element"](0,"trail-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels+"\xa0\xa0\xa0\xa0")}}function Xr(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).doubleClickHandler(e,t)}))("click",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).lastClickHandler(e,t)})),h["\u0275\u0275elementStart"](1,"div",6),h["\u0275\u0275element"](2,"span",7),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",6),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",9),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",9),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",6),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementStart"](18,"span"),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](21,Gr,r.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("innerHTML",r.labels,h["\u0275\u0275sanitizeHtml"]),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",i.ledgerName,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](6,9,r.setabsHandler(i.opnbal),"1.2-2")," "),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",i.opnbaltype,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,12,i.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,15,i.credit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,18,r.setabsHandler(i.clobal),"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",i.clobaltype,"")}}function Zr(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Qr,14,16,"div",2),h["\u0275\u0275template"](2,Jr,1,6,"trail-tree",3),h["\u0275\u0275template"](3,Xr,20,23,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function el(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div"),h["\u0275\u0275elementStart"](2,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).search=e}))("click",(function(e){return h["\u0275\u0275restoreView"](n),e.stopPropagation()}))("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).searchValues()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",13),h["\u0275\u0275template"](4,Zr,4,3,"div",14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngModel",o.search),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("cdkVirtualForOf",o.searchedData)}}function tl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,$r,2,1,"div",0),h["\u0275\u0275template"](2,el,5,2,"div",0),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length<=50),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length>50)}}function nl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",24),h["\u0275\u0275elementStart"](1,"div",27),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",21),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"number"),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",28),h["\u0275\u0275text"](10),h["\u0275\u0275pipe"](11,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",28),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",21),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementStart"](18,"span"),h["\u0275\u0275text"](19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](20,"trail-tree",29),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](6,13,i.positiveLookingValue(o.opnbal),"1.2-2")," "),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.opnbaltype),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](11,16,o.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,19,o.credit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"]("",h["\u0275\u0275pipeBind2"](17,22,i.positiveLookingValue(o.clobal),"1.2-2")," "),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.clobaltype),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("action",i.getBookDetail.bind(i))("action",i.getBookDetail.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)("labels","\xa0")}}function ol(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,n.positiveLookingValue(n.openingbal),"1.2-2"))}}function al(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,n.positiveLookingValue(n.openingbal),"1.2-2"))}}function il(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Cr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,n.positiveLookingValue(n.closingbal),"1.2-2"))}}function rl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275text"](4," Dr"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](2,1,n.positiveLookingValue(n.closingbal),"1.2-2"))}}function ll(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",30),h["\u0275\u0275elementStart"](1,"div",21),h["\u0275\u0275text"](2,"Profit & Loss A/c"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](3,ol,5,4,"div",31),h["\u0275\u0275template"](4,al,5,4,"div",31),h["\u0275\u0275elementStart"](5,"div",21),h["\u0275\u0275text"](6,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",21),h["\u0275\u0275text"](8,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](9,il,5,4,"div",31),h["\u0275\u0275template"](10,rl,5,4,"div",31),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",!(n.openingbal>=0)),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.openingbal>=0),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",n.closingbal>=0),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(n.closingbal>=0))}}function cl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",30),h["\u0275\u0275elementStart"](1,"div",21),h["\u0275\u0275text"](2,"Grand Total"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",21),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",21),h["\u0275\u0275text"](6),h["\u0275\u0275pipe"](7,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",21),h["\u0275\u0275text"](9),h["\u0275\u0275pipe"](10,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",21),h["\u0275\u0275text"](12,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](7,2,n.debitbal,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](10,5,n.creditbal,"1.2-2"))}}function dl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",32),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",33),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",34),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.trial[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.trial[o.f2Date])}}var sl,ml,ul="button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]{border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:192px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:192px;border:1px solid #c7c7c7;border-bottom:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:400!important;width:120px;text-align:right;display:inline-block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:250px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;border:0}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.selected[_ngcontent-%COMP%]{background-color:#576c77}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;border:1px solid #c7c7c7}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 15px!important;border-right:1px solid #ddd}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 15px;border-right:1px solid #ddd}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;font-size:11px;color:#fff}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:14px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-col[_ngcontent-%COMP%]{color:#fff}.x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#bfcfd9!important;font-size:11px}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.heading[_ngcontent-%COMP%]{width:100%;z-index:2;border:1px solid #263238}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:1px solid #263238}.x-col[_ngcontent-%COMP%]{border-right:1px solid #f2f2f2;padding:6px 4px}.lastrowcolor[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{color:#000}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 218px);overflow:auto;width:100%}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 4px}.highlight[_ngcontent-cdj-c13][_ngcontent-%COMP%]{background-color:#e2ca1f!important}",pl=((ml=function(){function e(t,n,o,i,r){a(this,e),this.common=t,this.modalService=n,this.user=o,this.cdr=i,this.accountService=r,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10],this.search="",this.searchedData=[]}return r(e,[{key:"lastClickHandler",value:function(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnChanges",value:function(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}},{key:"clickHandler",value:function(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}},{key:"doubleClickHandler",value:function(e,t){e.stopPropagation(),this.action(t)}},{key:"setabsHandler",value:function(e){return Math.abs(e)}},{key:"searchValues",value:function(){var e=this;this.searchedData=this.data.filter((function(t){return t.name?t.name.toLowerCase().includes(e.search.toLowerCase()):!!t.ledgerName&&t.ledgerName.toLowerCase().includes(e.search.toLowerCase())})),this.cdr.detectChanges()}},{key:"keyHandler",value:function(e){e.stopPropagation();var t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}}]),e}()).\u0275fac=function(e){return new(e||ml)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](u.a))},ml.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ml,selectors:[["trail-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",actionabs:"actionabs",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[h["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],[1,"col","x-col"],[3,"innerHTML"],["class","col x-col",4,"ngIf"],[1,"col","x-col",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,tl,3,2,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},directives:[D.u,D.t,ml,D.r,F.d,F.r,F.u,qo.e,qo.a,qo.d],pipes:[D.g],styles:[ul],changeDetection:0}),ml),gl=((sl=function(){function t(e,n,o,i,r,l,c){a(this,t),this.api=e,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.accountService=l,this.modalService=c,this.selectedName="",this.voucherEntries=[],this.trial={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},voucherType:{name:"All",id:0}},this.TrialData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.trialBalanceData=[],this.active={trialBalanceData:{mainGroup:[],subGroup:[]}},this.viewType="main",this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.openingbal=0,this.closingbal=0,this.debitbal=0,this.creditbal=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.trial.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.trial.endDate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startDate"),this.common.currentPage="Trial Balance"}return r(t,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.setFoucus("startDate")}},{key:"getTrial",value:function(){var e=this;this.trial.startDate=this.accountService.fromdate,this.trial.endDate=this.accountService.todate,console.log("Ledger:",this.trial);var t={startdate:this.trial.startDate,enddate:this.trial.endDate};this.common.loading++,this.api.post("Accounts/getTrialBalance",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.TrialData=t.data,e.generalizeData(),e.TrialData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"generalizeData",value:function(){var e=this;this.openingbal=0,this.closingbal=0,this.voucherEntries=[];for(var t=function(t){var n=e.TrialData[t],o=n.y_path.split("--\x3e");n.labels=o.splice(1,o.length);var a=e.voucherEntries.findIndex((function(e){return e.name===o[0]}));-1===a?e.voucherEntries.push({name:o[0],data:[n]||!1,debit:parseFloat(n.y_dr_bal),credit:parseFloat(n.y_cr_bal),opnbal:parseFloat(n.y_openbal),clobal:parseFloat(n.y_closebal),opnbaltype:n.y_openbaltype,clobaltype:n.y_closebaltype}):(e.voucherEntries[a].debit+=parseFloat(n.y_dr_bal),e.voucherEntries[a].credit+=parseFloat(n.y_cr_bal),e.voucherEntries[a].opnbal+=parseFloat(n.y_openbal),e.voucherEntries[a].clobal+=parseFloat(n.y_closebal),e.voucherEntries[a].data.push(n)),e.openingbal+=parseFloat(n.y_openbal),e.closingbal+=parseFloat(n.y_closebal),e.debitbal+=parseFloat(n.y_dr_bal),e.creditbal+=parseFloat(n.y_cr_bal)},n=0;n<this.TrialData.length;n++)t(n);this.voucherEntries.map((function(t){return t.data=e.findChilds(t.data)})),console.log("voucherEntries",this.voucherEntries,this.closingbal,"ds",this.openingbal)}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length?function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],debit:t.y_ledger_name?parseFloat(t.y_dr_bal):0,credit:t.y_ledger_name?parseFloat(t.y_cr_bal):0,opnbal:t.y_ledger_name?parseFloat(t.y_openbal):0,clobal:t.y_ledger_name?parseFloat(t.y_closebal):0,opnbaltype:t.y_openbaltype,clobaltype:t.y_closebaltype}):(n[i].debit+=t.y_ledger_name?parseFloat(t.y_dr_bal):0,n[i].credit+=t.y_ledger_name?parseFloat(t.y_cr_bal):0,n[i].opnbal+=t.y_ledger_name?parseFloat(t.y_openbal):0,n[i].clobal+=t.y_ledger_name?parseFloat(t.y_closebal):0,n[i].opnbaltype=n[i].opnbal<0?"Cr":"Dr",n[i].clobaltype=n[i].clobal<0?"Cr":"Dr",t.y_ledger_name&&n[i].data.push(t))}():n.push({ledgerName:e[o].y_ledger_name,data:[],debit:e[o].y_dr_bal||0,credit:e[o].y_cr_bal||0,opnbal:e[o].y_openbal||0,clobal:e[o].y_closebal||0,ledgerid:e[o].y_ledgerid,opnbaltype:e[o].y_openbaltype,clobaltype:e[o].y_closebaltype});if(n.length)return n.map((function(e){return e.data.length?{name:e.name,data:t.findChilds(e.data),debit:e.debit,credit:e.credit,opnbal:e.opnbal,clobal:e.clobal,opnbaltype:e.y_openbaltype,clobaltype:e.y_closebaltype}:e})).sort((function(e,t){return e.length>t.length?1:-1}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in i)if(i[r].length>1){var l={ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dr_bal)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cr_bal)}),0),opnbal:i[r].reduce((function(e,t){return e+parseFloat(t.y_openbal)}),0),clobal:i[r].reduce((function(e,t){return e+parseFloat(t.y_closebal)}),0)};a.push(l)}else{var c={ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dr_bal)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cr_bal)}),0),opnbal:i[r].reduce((function(e,t){return e+parseFloat(t.y_openbal)}),0),clobal:i[r].reduce((function(e,t){return e+parseFloat(t.y_closebal)}),0)};a.push(c)}return a}},{key:"positiveLookingValue",value:function(e){return Math.abs(e)}},{key:"changeViewType",value:function(){var e=this;console.log("____________"),this.active.trialBalanceData.mainGroup=[],this.active.trialBalanceData.subGroup=[],"sub"==this.viewType?this.trialBalanceData.forEach((function(t,n){return e.active.trialBalanceData.mainGroup.push("mainGroup"+n+0)})):"all"==this.viewType&&this.trialBalanceData.forEach((function(t,n){e.active.trialBalanceData.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.trialBalanceData.subGroup.push("subGroup"+n+o)}))}))}},{key:"handleExpandation",value:function(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}},{key:"formattData",value:function(){var e=this,t=Object.keys(sn.groupBy(this.TrialData,"primary_groupname")).map((function(t){return{name:t,amount:0,dramount:0,cramount:0,openingamount:0,openingType:"",closingType:"",subGroups:Object.keys(sn.groupBy(sn.groupBy(e.TrialData,"primary_groupname")[t],"groupname")).map((function(n){return{name:n,amount:0,dramount:0,cramount:0,openingamount:0,openingType:"",closingType:"",trialBalances:sn.groupBy(sn.groupBy(e.TrialData,"primary_groupname")[t],"groupname")[n]}}))}}));for(var n in this.trialBalanceData=t,console.log("trialBalanceData @@@",this.trialBalanceData),t)t.map((function(e){var t=0,n=0,o=0,a=0,i="",r="";console.log("map value",e.subGroups),e.subGroups&&e.subGroups.length>0&&e.subGroups.map((function(e){var l=0,c=0,d=0,s=0;e.trialBalances.map((function(e){i=e.y_openbaltype,r=e.y_closebaltype,e.y_closebal&&(t+=parseFloat(e.y_closebal),l+=parseFloat(e.y_closebal)),e.y_dr_bal&&(n+=parseFloat(e.y_dr_bal),c+=parseFloat(e.y_dr_bal)),e.y_cr_bal&&(o+=parseFloat(e.y_cr_bal),d+=parseFloat(e.y_cr_bal)),e.y_openbal&&(a+=parseFloat(e.y_openbal),s+=parseFloat(e.y_openbal))})),e.amount=l,e.dramount=c,e.cramount=d,e.openingamount=s,e.openingType=i,e.closingType=r})),e.amount=t,e.dramount=n,e.cramount=o,e.openingamount=a,e.openingType=i,e.closingType=r}));console.log("trialBalanceData @@@",this.trialBalanceData),console.log("First Section:",this.trialBalanceData),console.log("Second Section:",this.trialBalanceData),this.changeViewType()}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0].foname,t.data[0].addressline+"\n"+(t.data[0].phonenumber?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0].gstno?", GST NO -  "+t.data[0].gstno:""),"","")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.trial[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.trial[e])}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.TrialData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.trial.startDate=this.common.handleDateOnEnterNew(this.trial.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.trial.endDate=this.common.handleDateOnEnterNew(this.trial.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t?this.allowBackspace=!1:(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.TrialData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.TrialData.length-1&&this.selectedRow++);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else this.getBookDetail(this.TrialData[this.selectedRow])}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.trial[o].includes("-"))t=this.trial[o].split("-");else{if(!this.trial[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.trial[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.trial[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getBookDetail",value:function(e){console.log("vouher id",e),e.ledgerName.includes("Profit & Loss A/c")?this.getProfitLoss():(this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate,ledger:e.ledgerid,vouchertype:0,ledgername:e.ledgerName},this.modalService.open(xo.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))),this.common.currentPage="Trial Balance"}},{key:"getProfitLoss",value:function(){this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate},console.log("start date and date",this.common.params),this.modalService.open(Br.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"csvFunction",value:function(){var t=this;if("main"==this.isExpand)this.singleFormatCsvData();else{var n=[];n.push(Object.assign({particular:"Ledger",openingamount:"Opening Balance",drAmount:"Dr Amount",crAmount:"Cr Amount",closingamount:"Closing Balance"})),this.voucherEntries.forEach((function(o){n.push({particular:o.name,openingamount:0==o.opnbal?"":t.positiveLookingValue(o.opnbal)+" "+o.opnbaltype,drAmount:0==o.debit?"":o.debit,crAmount:0==o.credit?"":o.credit,closingamount:0==o.clobal?"":t.positiveLookingValue(o.clobal)+" "+o.clobaltype}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),n.push({particular:"Profit & Loss A/c",openingamount:this.positiveLookingValue(this.openingbal),drAmount:"",crAmount:"",closingamount:this.positiveLookingValue(this.closingbal)}),n.push({particular:"Grand Total",openingamount:"",drAmount:this.debitbal,crAmount:this.creditbal,closingamount:""}),this.csvService.jsonToExcel(n)}}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,openingamount:0==this.positiveLookingValue(i.opnbal)?"":i.opnbal+(i.opnbal>=0?" Dr":" Cr"),drAmount:0==i.debit?"":i.debit,crAmount:0==i.credit?"":i.credit,closingamount:0==i.clobal?"":this.positiveLookingValue(i.clobal)+(i.clobal>=0?" Dr":" Cr")}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:n+i.ledgerName,openingamount:0==i.opnbal?"":this.positiveLookingValue(i.opnbal)+" "+i.opnbaltype,drAmount:0==i.debit?"":i.debit,crAmount:0==i.credit?"":i.credit,closingamount:0==i.clobal?"":this.positiveLookingValue(i.clobal)+" "+i.clobaltype})}return o}},{key:"singleFormatCsvData",value:function(){var e=this;console.log("set bal",this.openingbal);var t=[];t.push(Object.assign({Ledger:"Particulars",OpeningBalance:"Opening Balance",amountdr:"Amount(DR)",amountcr:"Amount(CR)",amount:"Closing Balance"})),this.voucherEntries.forEach((function(n){t.push({Ledger:n.name,OpeningBalance:e.positiveLookingValue(n.opnbal)+" "+n.opnbaltype,amountdr:n.debit,amountcr:n.credit,amount:e.positiveLookingValue(n.clobal)+" "+n.opnbaltype})})),t.push({Ledger:"Profit & Loss A/c",OpeningBalance:this.positiveLookingValue(this.openingbal)+" "+(this.openingbal>=0?"Cr":"Dr"),amountdr:"",amountcr:"",amount:this.positiveLookingValue(this.closingbal)+" "+(this.closingbal>=0?"Cr":"Dr")}),t.push({Ledger:"Grand Total",OpeningBalance:"",amountdr:this.positiveLookingValue(this.debitbal),amountcr:this.positiveLookingValue(this.creditbal),amount:""}),this.csvService.jsonToExcel(t),console.log("Merged:",t)}}]),t}()).\u0275fac=function(e){return new(e||sl)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},sl.\u0275cmp=h["\u0275\u0275defineComponent"]({type:sl,selectors:[["trialbalance"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:49,vars:8,consts:[[2,"border","0px"],[3,"keydown"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-9","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","24px",3,"click"],["id","table"],[1,"row","heading","m-0","p-0"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],[1,"x-data"],["class","row x-stocktype","style","cursor:pointer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],[3,"action","data","isExpandAll","active","labels"],[1,"row","x-stocktype",2,"cursor","pointer"],["class","col x-col",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"span"),h["\u0275\u0275elementStart"](4,"input",3),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](5," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",4),h["\u0275\u0275elementStart"](7,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](8," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"div",6),h["\u0275\u0275elementStart"](10,"div",7),h["\u0275\u0275elementStart"](11,"span",8),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),h["\u0275\u0275element"](12,"i",9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"span",10),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](14,"i",11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",6),h["\u0275\u0275elementStart"](16,"div",12),h["\u0275\u0275elementStart"](17,"div",13),h["\u0275\u0275elementStart"](18,"label",14),h["\u0275\u0275text"](19,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",12),h["\u0275\u0275elementStart"](22,"div",13),h["\u0275\u0275elementStart"](23,"label",14),h["\u0275\u0275text"](24,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"input",16),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",17),h["\u0275\u0275elementStart"](27,"div",13),h["\u0275\u0275elementStart"](28,"button",18),h["\u0275\u0275listener"]("click",(function(){return t.getTrial()})),h["\u0275\u0275text"](29,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",19),h["\u0275\u0275elementStart"](31,"div",20),h["\u0275\u0275elementStart"](32,"div",21),h["\u0275\u0275text"](33,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",21),h["\u0275\u0275text"](35,"Opening Balance"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",21),h["\u0275\u0275text"](37,"Amount(DR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"div",21),h["\u0275\u0275text"](39,"Amount(CR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"div",21),h["\u0275\u0275text"](41,"Closing Balance"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",22),h["\u0275\u0275template"](43,nl,21,25,"div",23),h["\u0275\u0275elementStart"](44,"div",24),h["\u0275\u0275template"](45,ll,11,4,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",24),h["\u0275\u0275template"](47,cl,13,8,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](48,dl,4,1,"div",26)),2&e&&(h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.voucherEntries),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0!=t.openingbal),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0!=t.debitbal||0!=t.creditbal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.t,D.u,pl],pipes:[D.g],styles:[ul]}),sl),hl=i("yQqz"),vl=function(e){return{highlight:e}};function fl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",7),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openAccountModal(e)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openAccountModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td",8),h["\u0275\u0275elementStart"](11,"a",9),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().delete(e.id)})),h["\u0275\u0275element"](12,"i",10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,vl,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.parente_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,5,o.entry_dt,"dd-MMM-yy"))}}var bl,xl=((bl=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.title="",this.Accounts=[],this.GetAccount(),this.common.currentPage="Cost Category",this.common.refresh=this.refresh.bind(this)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.GetAccount()}},{key:"GetAccount",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/GetCostCenter",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.Accounts=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openAccountModal",value:function(e){var t=this;e?(console.log("Accounts",e),this.common.params=e,this.modalService.open(hl.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){n.response&&t.updateCostCenter(n.costCenter,e.id)}))):(this.common.params=null,this.modalService.open(hl.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addCostCenter(e.costCenter)})))}},{key:"addCostCenter",value:function(e){var t=this;console.log("costCenter",e);var n={parentName:e.parentName,parentid:e.parentId,foid:123,x_id:e.xid,name:e.name};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertCostCenter",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_costcenter;t.common.showToast(""==n?"Save Successfully":n),t.GetAccount()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateCostCenter",value:function(e,t){var n=this;console.log("costCenter",e);var o={parentName:e.parentName,parentid:e.parentId,foid:123,x_id:t,name:e.name};console.log("params123: ",o),this.common.loading++,this.api.post("Accounts/InsertCostCenter",o).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_costcenter;n.common.showToast(""==t?"Save Successfully":t),n.GetAccount()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"delete",value:function(e){var t=this,n={id:e,tblidname:"id",tblname:"costcenter"};e&&(console.log("city",e),this.common.params={title:"Delete Cost Center ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Stock/deletetable",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.GetAccount(),t.common.showToast(" This Value Has been Deleted!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("This Value has been used another entry!")})))})))}}]),e}()).\u0275fac=function(e){return new(e||bl)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},bl.\u0275cmp=h["\u0275\u0275defineComponent"]({type:bl,selectors:[["costcenter"]],decls:20,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"button",1),h["\u0275\u0275listener"]("click",(function(){return t.openAccountModal()})),h["\u0275\u0275element"](3,"i",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"table",4),h["\u0275\u0275elementStart"](6,"thead",5),h["\u0275\u0275elementStart"](7,"tr"),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"parent Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"th"),h["\u0275\u0275text"](13,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"th"),h["\u0275\u0275text"](15,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"th"),h["\u0275\u0275text"](17,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"tbody"),h["\u0275\u0275template"](19,fl,13,10,"tr",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngForOf",t.Accounts))},directives:[b.s,b.r,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}"]}),bl),yl=i("OoJn"),Cl=i("S6hn");function _l(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td",25),h["\u0275\u0275text"](1),h["\u0275\u0275elementStart"](2,"span"),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",n.y_opn_amt," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",n.y_opn_amt,"")}}function Sl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.totaldr)}}function kl(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function Ml(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.totalcr)}}function El(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function wl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td",25),h["\u0275\u0275text"](1),h["\u0275\u0275elementStart"](2,"span"),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("",n.totalclosing," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.y_close_amt)}}function Pl(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function Ol(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function Il(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.y_dr_amt)}}function Dl(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function Vl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.y_cr_amt)}}function Fl(e,t){1&e&&h["\u0275\u0275element"](0,"td")}function Tl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"span",27),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate2"]("",n.y_close_amt," ",n.y_closebaltype,"")}}function Bl(e,t){1&e&&h["\u0275\u0275element"](0,"td")}var Al=function(e){return{highlight:e}};function Ll(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",26),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"]().selectedRow=""+o+e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"](2).getBookDetail(e.y_costcenter_id)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](3,Ol,1,0,"td",23),h["\u0275\u0275template"](4,Il,2,1,"td",23),h["\u0275\u0275template"](5,Dl,1,0,"td",23),h["\u0275\u0275template"](6,Vl,2,1,"td",23),h["\u0275\u0275template"](7,Fl,1,0,"td",23),h["\u0275\u0275template"](8,Tl,3,2,"td",23),h["\u0275\u0275template"](9,Bl,1,0,"td",23),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](9,Al,r.selectedRow==""+i+a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_costcentername),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_openbal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.y_dr_bal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_dr_bal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.y_cr_bal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_cr_bal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=o.y_closebal),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==o.y_closebal)}}function Rl(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"tbody"),h["\u0275\u0275elementStart"](1,"tr",21),h["\u0275\u0275elementStart"](2,"td"),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](4,_l,4,2,"td",22),h["\u0275\u0275template"](5,Sl,2,1,"td",23),h["\u0275\u0275template"](6,kl,1,0,"td",23),h["\u0275\u0275template"](7,Ml,2,1,"td",23),h["\u0275\u0275template"](8,El,1,0,"td",23),h["\u0275\u0275template"](9,wl,4,2,"td",22),h["\u0275\u0275template"](10,Pl,1,0,"td",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](11,Ll,10,11,"tr",24),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=n.totalopening),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=n.totaldr),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==n.totaldr),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=n.totalcr),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==n.totalcr),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0!=n.totalclosing),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==n.totalclosing),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.traildatas)}}function jl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",28),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",29),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",30),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.trial[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.trial[o.f2Date])}}var zl,Nl=((zl=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.selectedName="",this.trial={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},voucherType:{name:"All",id:0}},this.costCenterData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.trialBalanceData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.trial.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.trial.endDate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startDate"),this.common.currentPage="Cost Category Report"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.setFoucus("startDate")}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Cost Category From :"+e.trial.startDate+" To :"+e.trial.endDate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getTrial",value:function(){var e=this;this.trial.startDate=this.accountService.fromdate,this.trial.endDate=this.accountService.todate,console.log("Ledger:",this.trial);var t={startdate:this.trial.startDate,enddate:this.trial.endDate};this.common.loading++,this.api.post("Accounts/getCostCenterSummary",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.costCenterData=t.data,e.formattData(),e.costCenterData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"formattData",value:function(){var e=this,t=sn.groupBy(this.costCenterData,"y_parent_costcentername");this.trialBalanceData=[];var n=function(n){var o=sn.groupBy(t[n],"y_parent_costcentername"),a=[],i=0,r=0,l=0,c=0,d="",s="";for(var m in o)o[m].map((function(e){e.y_openbal&&(i+=parseInt(e.y_openbal)),e.y_dr_amt&&(r+=parseInt(e.y_dr_amt)),e.y_cr_amt&&(l+=parseInt(e.y_cr_amt)),e.y_close_amt&&(c+=parseInt(e.y_close_amt)),d=e.y_closebaltype,s=e.y_openbaltype,a.push(e)}));e.trialBalanceData.push({name:n,totalopening:i,totaldr:r,totalcr:l,totalclosing:c,y_openbaltype:s,y_closebaltype:d,traildatas:a})};for(var o in t)n(o);console.log("First Section:",this.trialBalanceData),console.log("Second Section:",this.trialBalanceData)}},{key:"getDate",value:function(e){var t=this;this.modalService.open(yl.b,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.trial[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.trial[e])}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.costCenterData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.trial.startDate=this.common.handleDateOnEnterNew(this.trial.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.trial.endDate=this.common.handleDateOnEnterNew(this.trial.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t?this.allowBackspace=!1:(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.costCenterData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.costCenterData.length-1&&this.selectedRow++);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else this.getBookDetail(this.costCenterData[this.selectedRow].y_costcenter_id)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.trial[o].includes("-"))t=this.trial[o].split("-");else{if(!this.trial[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.trial[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.trial[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getBookDetail",value:function(e){console.log("cost Center id",e),this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate,costCenterId:e},this.modalService.open(Cl.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"getProfitLoss",value:function(){this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate},console.log("start date and date",this.common.params),this.modalService.open(Za,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}}]),e}()).\u0275fac=function(e){return new(e||zl)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},zl.\u0275cmp=h["\u0275\u0275defineComponent"]({type:zl,selectors:[["cost-center-report"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:38,vars:4,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[1,"mytbody"],[4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[2,"background","#184154","color","#fff"],["style","text-align:right;",4,"ngIf"],[4,"ngIf"],["style","background: #dadfe6;",3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[2,"text-align","right"],[2,"background","#dadfe6",3,"ngClass","click","dblclick"],[2,"width","100px","display","block","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",8),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"label",10),h["\u0275\u0275text"](17,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",13),h["\u0275\u0275elementStart"](20,"div",9),h["\u0275\u0275elementStart"](21,"button",14),h["\u0275\u0275listener"]("click",(function(){return t.getTrial()})),h["\u0275\u0275text"](22,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",15),h["\u0275\u0275elementStart"](24,"table",16),h["\u0275\u0275elementStart"](25,"thead",17),h["\u0275\u0275elementStart"](26,"tr"),h["\u0275\u0275elementStart"](27,"th"),h["\u0275\u0275text"](28,"Cost Category"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"th"),h["\u0275\u0275text"](30,"Amount(DR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"th"),h["\u0275\u0275text"](32,"Amount(CR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"th"),h["\u0275\u0275text"](34,"Closing Balance"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",18),h["\u0275\u0275template"](36,Rl,12,9,"tbody",19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](37,jl,4,1,"div",20)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.trialBalanceData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,D.t,D.u,D.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:260px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:260px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}th[_ngcontent-%COMP%]{position:-webkit-sticky!important;position:sticky!important;top:0;z-index:1!important}.mytbody[_ngcontent-%COMP%]{height:calc(100vh - 253px)!important;overflow:auto!important}"]}),zl);function Gl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",29),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","y_ledger_name")})),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",o.ledgerData)}}var Yl=function(e,t,n){return{highlight:e,greterline:t,lowerline:n}};function Hl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",30),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucher_id)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().getBookDetail(e.y_voucherid,e.y_code)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275pipe"](16,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"td"),h["\u0275\u0275text"](18),h["\u0275\u0275pipe"](19,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"td"),h["\u0275\u0275text"](21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction3"](19,Yl,i.selectedRow==a,o.y_days>1,o.y_days<0)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,10,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_ledgername),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_vouchertype),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_voucherno),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_amount),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](16,13,o.y_entry_time,"dd-MMM-yy h:mm")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](19,16,o.y_last_edit_time,"dd-MMM-yy h:mm")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_last_editby)}}function $l(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",32),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",33),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.bankBook[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.bankBook[o.f2Date])}}var ql,Kl=((ql=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.selectedName="",this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:0,issumrise:"true"},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.getLedgers(),this.setFoucus("ledger"),this.common.currentPage="Voucher Audit"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"refresh",value:function(){this.getBranchList(),this.getLedgers(),this.setFoucus("ledger")}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getLedgers",value:function(){var e=this,t="Suggestion/GetLedger?transactionType=credit&voucherId=-1&search=test";console.log("URL: ",t),this.api.get(t).subscribe((function(t){console.log(t),e.ledgerData=t.data,console.log("ledger data new",e.ledgerData[0].y_ledger_id)}),(function(t){console.error(t),e.common.showError()})),this.setFoucus("ref-code")}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Day Book From :"+e.bankBook.startdate+" To :"+e.bankBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getVoucherEdited",value:function(){var e=this;this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate,console.log("Accounts:",this.bankBook);var t={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,ledger:this.bankBook.ledger.id,vouchertype:this.bankBook.vouchertype};this.common.loading++,this.api.post("Voucher/getVoucherEdited",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.DayData=t.data,e.filterData(),e.DayData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.bankBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.bankBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}},{key:"filterData",value:function(){var e=[];this.DayData.map((function(t){-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)}))}},{key:"getBookDetail",value:function(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow)return"enter"==t&&this.showDateModal?(this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId)):void("enter"!=t&&this.showDateModal&&(this.activeId.includes("startdate")||this.activeId.includes("enddate"))||("enter"==t?(this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"))):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)));this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,"")}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"test",value:function(e){console.log("--------: ",e)}}]),e}()).\u0275fac=function(e){return new(e||ql)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},ql.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ql,selectors:[["voucheredited"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:69,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-4","pl-0"],[1,"form-group","mb-0"],[1,"form-group","debit_box","m-0","w-100"],[1,"tjr-label"],[1,"tjr_select","form-control","tjr-input",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"form-group"],[1,"tjr-label","ledger-label"],["type","text","id","ledger","name","ledger","autocomplete","off",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","ledger","display","y_ledger_name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",1),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"div",9),h["\u0275\u0275elementStart"](12,"label",10),h["\u0275\u0275text"](13,"Filter Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"select",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.vouchertype=e})),h["\u0275\u0275elementStart"](15,"option",12),h["\u0275\u0275text"](16,"voucher date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"option",13),h["\u0275\u0275text"](18,"voucher entry date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"option",14),h["\u0275\u0275text"](20,"lastupdated date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",7),h["\u0275\u0275elementStart"](22,"div",15),h["\u0275\u0275elementStart"](23,"label",16),h["\u0275\u0275text"](24,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",1),h["\u0275\u0275elementStart"](27,"div",18),h["\u0275\u0275elementStart"](28,"div",15),h["\u0275\u0275elementStart"](29,"label",10),h["\u0275\u0275text"](30,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"input",19),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",18),h["\u0275\u0275elementStart"](33,"div",15),h["\u0275\u0275elementStart"](34,"label",10),h["\u0275\u0275text"](35,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"input",20),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",18),h["\u0275\u0275elementStart"](38,"div",15),h["\u0275\u0275elementStart"](39,"button",21),h["\u0275\u0275listener"]("click",(function(){return t.getVoucherEdited()})),h["\u0275\u0275text"](40,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"div",22),h["\u0275\u0275elementStart"](42,"div",15),h["\u0275\u0275elementStart"](43,"div",23),h["\u0275\u0275template"](44,Gl,1,1,"auto-suggetion-in-side",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"table",25),h["\u0275\u0275elementStart"](46,"thead",26),h["\u0275\u0275elementStart"](47,"tr"),h["\u0275\u0275elementStart"](48,"th"),h["\u0275\u0275text"](49,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"th"),h["\u0275\u0275text"](51,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](52,"th"),h["\u0275\u0275text"](53,"Ledger Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"th"),h["\u0275\u0275text"](55,"Vch Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](56,"th"),h["\u0275\u0275text"](57,"Vch No."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](58,"th"),h["\u0275\u0275text"](59,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](60,"th"),h["\u0275\u0275text"](61," Entry Time"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](62,"th"),h["\u0275\u0275text"](63,"Last Edit Time"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](64,"th"),h["\u0275\u0275text"](65,"Edit By"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](66,"tbody"),h["\u0275\u0275template"](67,Hl,22,23,"tr",27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](68,$l,4,1,"div",28)),2&e&&(h["\u0275\u0275advance"](14),h["\u0275\u0275property"]("ngModel",t.bankBook.vouchertype),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("ngModel",t.bankBook.ledger.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngIf",t.ledgerData.length),h["\u0275\u0275advance"](23),h["\u0275\u0275property"]("ngForOf",t.DayData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.D,F.r,F.u,F.w,F.G,F.d,F.m,D.u,D.t,V.a,D.r],pipes:[D.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:130px;border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:190px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:190px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.debit_box[_ngcontent-%COMP%]{margin-left:17px}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.greterline[_ngcontent-%COMP%]{background-color:#fe5c5c!important;color:#fff!important}.lowerline[_ngcontent-%COMP%]{background-color:#e61a1a!important}.labtrj[_ngcontent-%COMP%]{margin-left:17px!important}.ledger-label[_ngcontent-%COMP%]{margin-top:10px}"]}),ql),Ul=i("yd97"),Wl=function(e){return{highlight:e}};function Ql(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",21),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openVoucherEdit(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,Wl,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_ref_no),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_vehicle_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_fuel_station),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_amount)}}var Jl,Xl=((Jl=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.accountService=o,this.modalService=i,this.trips=[],this.regno="",this.fuelstation="",this.checkedTrips=[],this.fuelFilings=[],this.tripHeads=[],this.tripVouchers=[],this.vehicles=[],this.VoucherEditTime=[],this.flag=!1,this.enddate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startdate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.enddate,this.common.currentPage="Fuel Voucher"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"getVehicle",value:function(e){this.selectedVehicle=e,this.flag=!0,this.getTripSummary()}},{key:"getFuelFilling",value:function(e){console.log("fuel fillin",e),this.selectedFuelFilling=e}},{key:"getFuelVoucher",value:function(){var e=this;this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate;var t={vehId:this.selectedVehicle?this.selectedVehicle.id:0,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling?this.selectedFuelFilling.id:0};this.common.loading++,this.api.post("FuelDetails/getFuelVoucher",t).subscribe((function(t){console.log(t),e.common.loading--,e.trips=t.data}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"getDataFuelFillings",value:function(){var e=this;if(this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate,this.accountService.selected.branch.id)if(console.log("params model",this.common.params),this.selectedVehicle&&0!=this.selectedVehicle.id)if(this.selectedFuelFilling&&0!=this.selectedFuelFilling.id){var t={vehId:this.selectedVehicle?this.selectedVehicle.id:0,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling?this.selectedFuelFilling.id:0};this.common.loading++,this.api.post("Fuel/getFeulfillings",t).subscribe((function(t){e.common.loading--,t.data.length?(e.fuelFilings=t.data,e.getFuelFillings(t.data)):e.common.showError("please Select Correct date")}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}else this.common.showError("Please Select Fuel Station");else this.common.showError("Please Select Vehicle");else this.common.showError("Please Select branch")}},{key:"checkedAllSelected",value:function(){this.checkedTrips=[];for(var e=this.findFirstSelectInfo("index");e<=this.findLastSelectInfo("index");e++)this.trips[e].isChecked=!0,this.checkedTrips.push(this.trips[e])}},{key:"getFuelFillings",value:function(e){var t=this;this.accountService.selected.branch.id?(console.log("Branch ID :",this.accountService.selected.branch.id),this.common.params={vehId:this.selectedVehicle.id,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling,fuelData:e},this.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e),e.success&&t.getFuelVoucher()}))):this.common.showError("Please Select Branch")}},{key:"findFirstSelectInfo",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"startDate",t={startDate:"",index:-1},n=0;n<this.trips.length;n++)if(this.trips[n].isChecked){t.startDate=this.trips[n].start_time,t.index=n;break}return t[e]}},{key:"addFuel",value:function(){this.common.params={rowfilling:{fdate:null,litres:null,is_full:null,regno:null,rate:null,amount:null,pp:null,fuel_station_id:null,vehicle_id:null,id:null,ref_type:null,ref_id:null},title:"Add Fuel Filling"},this.modalService.open(Ul.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"findLastSelectInfo",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"endDate",t={endDate:"",index:-1},n=this.trips.length-1;n>=0;n--)if(this.trips[n].isChecked){t.endDate=this.trips[n].end_time,t.index=n;break}return t[e]}},{key:"getHeads",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/getLedgerHeadList",{}).subscribe((function(t){console.log(t),e.common.loading--,e.tripHeads=t.data,e.tripHeads.map((function(t){var n=[];e.trips.map((function(e){e.isChecked&&n.push({id:e.id,amount:0,start_time:e.start_time,end_time:e.end_time,start_name:e.start_name,end_name:e.end_name})})),t.trips=n,t.total=0;var o=[];e.fuelFilings.map((function(e){e.isChecked&&o.push({id:e.id})})),t.fuelFilings=o}))}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"addVoucher",value:function(){var e=this;console.log("Trips: ",this.tripHeads);var t={vehId:this.selectedVehicle.id,voucher_details:this.tripHeads};this.common.loading++,this.api.post("TripExpenseVoucher/InsertTripExpenseVoucher",t).subscribe((function(t){console.log("Res: ",t),e.common.loading--}),(function(t){console.log(t),e.common.loading--}))}},{key:"calculateTripHeadTotal",value:function(e){var t=this;console.log("Index: ",e),this.tripHeads[e].total=0,this.tripHeads[e].trips.map((function(n){t.tripHeads[e].total+=n.amount})),console.log("Total: ",this.tripHeads[e].total)}},{key:"getTripSummary",value:function(){var e=this,t={vehId:this.selectedVehicle.id};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVouchers",t).subscribe((function(t){console.log(t),e.common.loading--,e.tripVouchers=t.data}),(function(t){console.log(t),e.common.loading--,e.common.showError()}))}},{key:"openVoucherEdit",value:function(e){var t=this,n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucher_id)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.startdate,currentFilling:t.enddate,fuelstationid:e.y_fuel_station_id,fuelData:t.fuelFilings,voucherId:e.y_voucher_id,voucherData:t.VoucherEditTime,vehname:t.trips[0].y_vehicle_name},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e),e.success&&t.getFuelVoucher()}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"deleteVoucherEntry",value:function(e){var t=this,n={voucherId:e.id};console.log("params",n),this.common.loading++,this.api.post("TripExpenseVoucher/deleteTripExpenseVouchers",n).subscribe((function(e){t.common.loading--,console.log("res",e.data),e.success&&(t.common.showToast("Success!!"),t.getTripSummary())}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;console.log("Active event 1111",e,n),"enter"==t&&(n.includes("suggestion")?this.setFoucus("vchtype"):n.includes("startdate")?this.setFoucus("enddate"):n.includes("enddate")&&this.setFoucus("btnSubmit"))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log("edit time voucher detail",e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.startdate,currentFilling:o.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Trip Voucher Expence :"+e.startdate+" To :"+e.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Jl)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},Jl.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Jl,selectors:[["fuelfillings"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:55,vars:7,consts:[[1,"row","pdf-exel-icon"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mt-4"],[1,"col-sm-2","pl-0"],[1,"tjr-label"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Enter Reg No",3,"id","preSelected","onSelected"],["url","Suggestion/GetFuelStation","display","name","placeholder","Enter Fuel Station",3,"id","preSelected","onSelected"],[1,"col","pl-0"],[1,"form-group"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","btnSubmit",1,"btn","btn-primary","w-100","mt-3",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"col","pl-0","pr-0"],[1,"mt-2"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card"),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",0),h["\u0275\u0275elementStart"](3,"span",1),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](4,"i",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](6,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",5),h["\u0275\u0275elementStart"](8,"div",6),h["\u0275\u0275elementStart"](9,"label",7),h["\u0275\u0275text"](10,"Vehicle No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"auto-suggestion",8),h["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",6),h["\u0275\u0275elementStart"](13,"label",7),h["\u0275\u0275text"](14,"Fuel Station"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"auto-suggestion",9),h["\u0275\u0275listener"]("onSelected",(function(e){return t.getFuelFilling(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"div",10),h["\u0275\u0275elementStart"](17,"div",11),h["\u0275\u0275elementStart"](18,"label",7),h["\u0275\u0275text"](19,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",10),h["\u0275\u0275elementStart"](22,"div",11),h["\u0275\u0275elementStart"](23,"label",7),h["\u0275\u0275text"](24,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",10),h["\u0275\u0275elementStart"](27,"button",14),h["\u0275\u0275listener"]("click",(function(){return t.getFuelVoucher()})),h["\u0275\u0275text"](28,"Filter"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"div",10),h["\u0275\u0275elementStart"](30,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getDataFuelFillings()})),h["\u0275\u0275text"](31,"Add Fuel Voucher"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"div",16),h["\u0275\u0275elementStart"](33,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.addFuel()})),h["\u0275\u0275text"](34,"Add Fuel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"div",17),h["\u0275\u0275elementStart"](36,"table",18),h["\u0275\u0275elementStart"](37,"thead",19),h["\u0275\u0275elementStart"](38,"tr"),h["\u0275\u0275elementStart"](39,"th"),h["\u0275\u0275text"](40,"SN"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"th"),h["\u0275\u0275text"](42,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](43,"th"),h["\u0275\u0275text"](44,"Ref No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"th"),h["\u0275\u0275text"](46,"Vehicle Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](47,"th"),h["\u0275\u0275text"](48,"Fuel Station"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"th"),h["\u0275\u0275text"](50,"Quantity"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](51,"th"),h["\u0275\u0275text"](52,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"tbody"),h["\u0275\u0275template"](54,Ql,15,10,"tr",20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("id",t.regno)("preSelected",null),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("id",t.fuelstation)("preSelected",null),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](29),h["\u0275\u0275property"]("ngForOf",t.trips))},directives:[b.s,b.r,jn.a,F.d,F.m,F.r,F.u,D.t,D.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}auto-suggestion   [_nghost-%COMP%]     .form-control{border:1px solid #263238!important;border-radius:0 2px 2px 2px!important;padding:3px 5px!important;height:auto!important;font-size:12px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.pdf-exel-icon[_ngcontent-%COMP%]{margin-left:8px}"]}),Jl);function Zl(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275elementStart"](4,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.selected=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().changeStatus(e.y_vehicle_name)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index;h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("name","list-"+a)("ngModel",o.selected),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_vehicle_name)}}var ec,tc=((ec=function(){function e(t,n,o){a(this,e),this.api=t,this.common=n,this.modalService=o,this.vehCostList=[],this.vehlist=[],this.getVehicleCostCenterList(),this.common.currentPage="Vehicle Cost Center List"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"getVehicleCostCenterList",value:function(){var e=this;this.vehlist=[],this.common.loading++,this.api.post("accounts/getVehCostCenterList",{}).subscribe((function(t){e.common.loading--,e.vehCostList=t.data,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"selectAll",value:function(){if(this.selectedAll)for(var e=0;e<this.vehCostList.length;e++)this.vehCostList[e].selected=this.selectedAll,this.vehlist.push(this.vehCostList[e].y_vehicle_name);else for(e=0;e<this.vehCostList.length;e++)this.vehCostList[e].selected=!1,this.vehlist=[];console.log("vehList",this.vehlist),console.log("select All",this.selectAll)}},{key:"changeStatus",value:function(e){console.log("index",e),this.vehlist.push(e),console.log("vehList",this.vehlist)}},{key:"saveCostCenterList",value:function(){var e=this,t="ARRAY[";this.vehlist.map((function(e){t+="'".concat(e,"',")})),t=t.slice(0,-1)+"]",console.log("String::",t);var n={cost_center_list:t};console.log("params",n),this.common.loading++,this.api.post("accounts/saveCostCenterList",n).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.common.showToast(t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||ec)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r))},ec.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ec,selectors:[["vehicle-cost-center-list"]],decls:17,vars:2,consts:[[2,"padding-top","26px"],[1,"table","table-bordered"],["type","checkbox","name","vlist",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"text-align","right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["type","checkbox",3,"name","ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"table",1),h["\u0275\u0275elementStart"](4,"thead"),h["\u0275\u0275elementStart"](5,"tr"),h["\u0275\u0275elementStart"](6,"th"),h["\u0275\u0275text"](7,"SN"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275elementStart"](9,"input",2),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedAll=e}))("ngModelChange",(function(){return t.selectAll()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"Vehicle Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"tbody"),h["\u0275\u0275template"](13,Zl,7,4,"tr",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",4),h["\u0275\u0275elementStart"](15,"button",5),h["\u0275\u0275listener"]("click",(function(){return t.saveCostCenterList()})),h["\u0275\u0275text"](16,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.selectedAll),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngForOf",t.vehCostList))},directives:[b.s,b.r,F.a,F.r,F.u,D.t],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 192px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),ec),nc=function(e){return{highlight:e}};function oc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",18),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"](2).selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,nc,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,8,o.fuel_fill_date,"dd MMM")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.vehicle_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.fuel_station),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.rate),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.amount)}}function ac(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"tbody"),h["\u0275\u0275template"](1,oc,16,13,"tr",17),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.voucherDetails)}}function ic(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=t.index;h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,7,n.fuel_fill_date,"dd MMM yyyy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.vehicle_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.fuel_station),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.qty),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.rate),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.amount)}}function rc(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"tbody"),h["\u0275\u0275elementStart"](1,"tr",19),h["\u0275\u0275elementStart"](2,"td"),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"td"),h["\u0275\u0275text"](5),h["\u0275\u0275pipe"](6,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](9,"td"),h["\u0275\u0275element"](10,"td"),h["\u0275\u0275element"](11,"td"),h["\u0275\u0275elementStart"](12,"td"),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](14,ic,16,10,"tr",15),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,o=t.index;h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](6,5,n.date,"dd MMM yyyy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.voucherName),h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](n.amount),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.details)}}function lc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",20),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",21),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().f2Date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.f2Date)}}var cc,dc=((cc=function(){function e(t,n,o,i,r){a(this,e),this.api=t,this.common=n,this.user=o,this.accountService=i,this.modalService=r,this.fuelVoucher={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew((new Date).setDate((new Date).getDate()-2),"ddMMYYYY",!1,"-"),type:1},this.activeId="",this.showTable=!1,this.voucherDetails=[],this.mappedDetails=[],this.mappedVoucher=[],this.selectedRow=-1,this.showDateModal=!1,this.f2Date="",this.activedateid="",this.allowBackspace=!0,this.lastActiveId="startdate",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.fuelVoucher.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.fuelVoucher.enddate,this.common.currentPage="Mapped Fuel Voucher",this.getFuelVoucher()}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"getFuelVoucher",value:function(){var e=this;this.fuelVoucher.startdate=this.accountService.fromdate,this.fuelVoucher.enddate=this.accountService.todate,this.voucherDetails=[],this.mappedDetails=[];var t=this.fuelVoucher.startdate;t=this.handleDateOnSubmit(t);var n=this.fuelVoucher.enddate;n=this.handleDateOnSubmit(n),console.log("start end",t,n),this.fuelVoucher.startdate=this.common.handleDateOnEnterNew(this.fuelVoucher.startdate),this.fuelVoucher.enddate=this.common.handleDateOnEnterNew(this.fuelVoucher.enddate),console.log("start and end",this.fuelVoucher.startdate,this.fuelVoucher.enddate);var o={startDate:t,endDate:n,type:""+(0!=this.fuelVoucher.type)};console.log("params",o),this.common.loading++,this.api.post("Accounts/getMappedFuelVoucher",o).subscribe((function(t){e.common.loading--,console.log("res",t.data),null==t.data?e.common.showToast("Record Empty !!"):(e.voucherDetails=t.data,e.showTable=!0,1==e.fuelVoucher.type&&e.getVoucherGroup(e.voucherDetails))}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"changeModal",value:function(e){console.log("hello",e),this.voucherDetails=[],this.mappedDetails=[]}},{key:"handleDateOnSubmit",value:function(e){var t=[],n=e;n.includes("-")?t=n.split("-"):n.includes("/")&&(t=n.split("/"));var o=t[0];o=1==o.length?"0"+o:o;var a=t[1];a=1==a.length?"0"+a:a;var i=t[2];return i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+"-"+a+"-"+i),n=i+"-"+a+"-"+o}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleOrderDateOnEnter(this.activeId),void this.setFoucus("enddate");if("enter"!=t&&this.showDateModal&&(this.activeId.includes("startdate")||this.activeId.includes("enddate")))return}else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();t.includes("arrow")&&(this.allowBackspace=!1,e.preventDefault(),(t.includes("arrowup")||t.includes("arrowdown"))&&this.voucherDetails.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.voucherDetails.length-1&&this.selectedRow++)),"enter"==t&&(this.activeId.includes("startdate")?this.setFoucus("enddate"):this.activeId.includes("enddate")&&this.setFoucus("submit"))}},{key:"getVoucherGroup",value:function(e){var t=this,n=sn.groupBy(e,"voucher_no");this.mappedDetails=[],Object.keys(n).map((function(e){t.mappedDetails.push({voucherName:e,date:n[e][0].voucher_date,amount:n[e][0].voucher_amount,details:n[e]})})),console.log("VoucheL:::::::::::::",n,this.mappedDetails)}},{key:"handleOrderDateOnEnter",value:function(e){var t=[],n="-";console.log("starting date 122 :",this.activedateid);var o="startdate"==this.activedateid?"startdate":"enddate";if(this.f2Date.includes("-"))t=this.f2Date.split("-");else{if(!this.f2Date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.f2Date.split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.fuelVoucher[o]=a+n+i+n+r,console.log("data parameter",o,this.fuelVoucher)}},{key:"setFoucus",value:function(e){console.log("Id: ",e),setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||cc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},cc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:cc,selectors:[["mapped-fuel-voucher"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:46,vars:9,consts:[[1,"row"],[1,"col-6","pl-0","pr-0"],[1,"col-sm-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],[1,"col-sm-3","pl-0"],["autocomplete","off","type","radio","name","mapping","id","mapping",2,"margin-top","20px",3,"ngModel","value","ngModelChange","change"],["autocomplete","off","type","radio","name","unmapping","id","unmapping",2,"margin-top","20px",3,"ngModel","value","ngModelChange","change"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer",3,"click"],[1,"table","table-bordered"],[1,"thead"],["id","heading-row"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"background","#184154","color","aliceblue"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card"),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",0),h["\u0275\u0275elementStart"](3,"div",1),h["\u0275\u0275elementStart"](4,"div",0),h["\u0275\u0275elementStart"](5,"div",2),h["\u0275\u0275elementStart"](6,"div",3),h["\u0275\u0275elementStart"](7,"label",4),h["\u0275\u0275text"](8,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e}))("click",(function(){return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",2),h["\u0275\u0275elementStart"](11,"div",3),h["\u0275\u0275elementStart"](12,"label",4),h["\u0275\u0275text"](13,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e}))("click",(function(){return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",1),h["\u0275\u0275elementStart"](16,"div",7),h["\u0275\u0275elementStart"](17,"input",8),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fuelVoucher.type=e}))("change",(function(){return t.changeModal(t.fuelVoucher.type)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](18,"\xa0UnMapping "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",7),h["\u0275\u0275elementStart"](20,"input",9),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fuelVoucher.type=e}))("change",(function(){return t.changeModal(t.fuelVoucher.type)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](21,"\xa0Mappping "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",7),h["\u0275\u0275elementStart"](23,"button",10),h["\u0275\u0275listener"]("click",(function(){return t.getFuelVoucher()})),h["\u0275\u0275text"](24,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div"),h["\u0275\u0275elementStart"](26,"table",11),h["\u0275\u0275elementStart"](27,"thead",12),h["\u0275\u0275elementStart"](28,"tr",13),h["\u0275\u0275elementStart"](29,"th"),h["\u0275\u0275text"](30,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"th"),h["\u0275\u0275text"](32,"Fuel Fill Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"th"),h["\u0275\u0275text"](34,"Vehicle Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"th"),h["\u0275\u0275text"](36,"Fuel Station"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"th"),h["\u0275\u0275text"](38,"Qty (Liter)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"th"),h["\u0275\u0275text"](40,"Rate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"th"),h["\u0275\u0275text"](42,"Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](43,ac,2,1,"tbody",14),h["\u0275\u0275template"](44,rc,15,8,"tbody",15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](45,lc,4,1,"div",16)),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.fuelVoucher.type)("value",0),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.fuelVoucher.type)("value",1),h["\u0275\u0275advance"](23),h["\u0275\u0275property"]("ngIf",0==t.fuelVoucher.type),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.mappedDetails),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,F.z,D.u,D.t,D.r],pipes:[D.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:180px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:180px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 245px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:8px!important;border-radius:3px!important;border:0;margin-top:12px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}"]}),cc),sc=function(e){return{highlight:e}};function mc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",15),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275elementStart"](4,"input",16),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.selected=e}))("ngModelChange",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().changeStatus(e.name)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](5,sc,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("name","list-"+a)("ngModel",o.selected),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name)}}var uc,pc=((uc=function(){function e(t,n,o){a(this,e),this.api=t,this.common=n,this.modalService=o,this.vehList=[],this.vehLedgerList=[],this.underGroupRes=[],this.showList=!1,this.repearLoop=!1,this.underGroupDetails={name:"",id:"",primarygroup_id:""},this.selectedRow=-1,this.common.refresh=this.refresh.bind(this),this.getVehList(),this.setAutoSuggestion(),this.common.currentPage="Vehicle Ledger"}var t;return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"getVehList",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/vehicleLedger",{}).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.vehList=t.data}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"selectAll",value:function(){if(this.selectedAll)for(var e=0;e<this.vehList.length;e++)this.vehList[e].selected=this.selectedAll,this.vehLedgerList.push(this.vehList[e].name);else for(e=0;e<this.vehList.length;e++)this.vehList[e].selected=!1,this.vehLedgerList=[];console.log("vehLedgerList",this.vehLedgerList),console.log("select All",this.selectAll)}},{key:"changeStatus",value:function(e){console.log("index",e),this.vehLedgerList.push(e),console.log("vehList",this.vehLedgerList)}},{key:"setAutoSuggestion",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/getAllUnderGroupData",{search:123,conditionid:1}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.underGroupRes=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"searchGroupInfo",value:function(){var e,t,n,o;for(this.showList=!0,e=document.getElementById("undergroup").value,console.log("input",e.toUpperCase()),t=document.getElementById("gorup_list"),console.log("gl",t),n=t.getElementsByTagName("li"),console.log("li",n),o=0;o<n.length;o++){var a=" "+n[o].textContent||!1;(a=a.toUpperCase()).includes(e.toUpperCase())?(n[o].style.display="block",console.log("matches")):(n[o].style.display="none",console.log(" not match"))}}},{key:"saveVehicleLedgerList",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=function(e){var n={name:a.vehLedgerList[e],alias_name:a.vehLedgerList[e],code:"",account_id:a.underGroupDetails.id,per_rate:0,primarygroupid:0,accDetails:"",branchname:"",branchcode:"",accnumber:"",creditdays:0,openingbalance:0,isdr:1,approved:1,deleteview:0,delete:0,x_id:0,bankname:"",costcenter:0,taxtype:"",taxsubtype:"",isnon:!0,hsnno:"",hsndetail:"",gst:!1,cess:"",igst:"",taxability:"",calculationtype:""};console.log("params",n);var o=new Promise((function(e,t){a.api.post("Accounts/InsertLedger",n).subscribe((function(t){return e(t.data)}),(function(e){return t(e)}))}));t.push(o)},o=0;o<this.vehLedgerList.length;o++)n(o);Promise.all(t).then((function(e){a.common.showToast("Ledger Has been saved!"),a.getVehList(),console.log("_______________Promise____________Output:",e)})).catch((function(e){console.log("__________________Promise____________Error:",e),a.common.showError()}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"refresh",value:function(){this.getVehList()}},{key:"onSelected",value:function(e,t,n){console.log("selectedData",e),this.underGroupDetails.name=e[n],this.underGroupDetails.id=e.id,this.underGroupDetails.primarygroup_id=e.primarygroup_id}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&t.includes("undergroup")||(t.includes("arrowup")||t.includes("arrowdown"))&&this.vehList.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.vehList.length-1&&this.selectedRow++)}}]),e}()).\u0275fac=function(e){return new(e||uc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r))},uc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:uc,selectors:[["vehicle-ledgers"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:28,vars:4,consts:[[2,"padding-top","26px"],[1,"row","mb-3"],[1,"col-sm-3"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","type","text","id","undergroup","name","undergroup","placeholder","Please Search Under Group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-sm-9"],[1,"under-group"],[1,"auto-sugg"],["targetId","undergroup","display","name",3,"data","select"],[1,"table","table-bordered"],["type","checkbox","name","vlist",3,"ngModel","ngModelChange"],[3,"ngClass","click",4,"ngFor","ngForOf"],[2,"text-align","right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"ngClass","click"],["type","checkbox",3,"name","ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"label",4),h["\u0275\u0275text"](6,"Under Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.underGroupDetails.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",6),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"div",3),h["\u0275\u0275elementStart"](12,"auto-suggetion-in-side",9),h["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"undergroup","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div"),h["\u0275\u0275elementStart"](14,"table",10),h["\u0275\u0275elementStart"](15,"thead"),h["\u0275\u0275elementStart"](16,"tr"),h["\u0275\u0275elementStart"](17,"th"),h["\u0275\u0275text"](18,"SN"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"th"),h["\u0275\u0275elementStart"](20,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedAll=e}))("ngModelChange",(function(){return t.selectAll()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"th"),h["\u0275\u0275text"](22,"Vehicle Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"tbody"),h["\u0275\u0275template"](24,mc,7,7,"tr",12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",13),h["\u0275\u0275elementStart"](26,"button",14),h["\u0275\u0275listener"]("click",(function(){return t.saveVehicleLedgerList()})),h["\u0275\u0275text"](27,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",t.underGroupDetails.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("data",t.underGroupRes),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngModel",t.selectedAll),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngForOf",t.vehList))},directives:[b.s,b.r,F.d,F.r,F.u,V.a,F.a,D.t,D.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 323px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.under-group[_ngcontent-%COMP%]{min-width:200px;float:right;background-color:#ccc}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:5px;margin:0;overflow:auto;height:112px;border:1px solid #ccc}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:1px solid #263238;padding:2px 8px;border-radius:3px;font-size:12px;font-weight:400;background-color:#263238;margin-bottom:3px;color:#fff}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .active-suggestion[_ngcontent-%COMP%]{background-color:teal;font-weight:400}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-top:1px solid #ccc}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}"]}),uc);function gc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",26),h["\u0275\u0275elementStart"](1,"a",27),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function hc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",26),h["\u0275\u0275elementStart"](1,"a",28),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2,"Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function vc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",29),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"vouchertype","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.vouchertypedata)}}function fc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",30),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerData)}}function bc(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1,"Branch"),h["\u0275\u0275elementEnd"]())}function xc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275elementStart"](1,"i",32),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"]().imageOpen(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function yc(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",n.y_company_branch,"")}}var Cc=function(e,t){return{highlight:e,highlightcolor:t}};function _c(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",31),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"]();return e.y_type.toLowerCase().includes("voucher")?e.y_type.toLowerCase().includes("trip")?o.openConsignmentVoucherEdit(e):e.y_type.toLowerCase().includes("fuel")?o.openFuelEdit(e):o.openVoucherEdit(e.y_voucherid,e.y_vouchertype_id):e.y_type.toLowerCase().includes("stock")?o.openStoreQuestionEdit(e):o.openServiceSalesInvoicemodel(e,e.y_voucherid,e.y_vouchertype_id)}))("enter",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openVoucherEdit(e.y_voucherid)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275pipe"](5,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"td"),h["\u0275\u0275text"](7),h["\u0275\u0275template"](8,xc,2,0,"span",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"td"),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](17,yc,2,1,"td",23),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction2"](13,Cc,i.selectedRow==a,i.DayData.length-1==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](5,10,o.y_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"]("",o.y_particulars," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.y_docscount>0),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_type),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](null!=o.y_date?o.y_code+"/"+o.y_cust_code:""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_dramunt),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_cramunt),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==i.accountService.selected.branch.id)}}function Sc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",33),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",34),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",35),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.DayBook[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.DayBook[o.f2Date])}}var kc,Mc=((kc=function(){function e(t,n,o,i,r,l,c){var d=this;a(this,e),this.api=t,this.common=n,this.route=o,this.user=i,this.modalService=r,this.accountService=l,this.router=c,this.selectedName="",this.activedateid="",this.fuelFilings=[],this.flag=0,this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.lastActiveId="",this.showDateModal=!1,this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="vouchertype",this.selectedRow=-1,this.allowBackspace=!0,this.deletedId=0,this.f2Date="startdate",this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.common.currentPage="Voucher Pending",this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(d.deletedId=parseInt(e.id)),d.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}))}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVoucherTypeList(),this.getBranchList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.getDayBook()}},{key:"ngAfterViewInit",value:function(){}},{key:"getVoucherTypeList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.vouchertypedata=t.data,e.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"})}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.branchdata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openinvoicemodel",value:function(e,t){var n=this;this.common.params={invoiceid:e,delete:this.deletedId,approveid:4,ordertype:t},this.modalService.open(Lt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&(console.log("open succesfull"),n.getDayBook())}))}},{key:"getAllLedger",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDayBook",value:function(){var e=this;console.log("Accounts:",this.DayBook),this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate;var t={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,delete:this.deletedId,forapproved:0,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetDayBook",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.DayData=t.data,e.filterData(),e.DayData.length&&(document.activeElement.blur(),e.selectedRow=0)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.DayBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.DayBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}},{key:"filterData",value:function(){var e=[];this.DayData.map((function(t){-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)}))}},{key:"getBookDetail",value:function(e){console.log("vouher id",e),this.common.params=e,this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("branch")?this.setFoucus("vouchertype"):this.activeId.includes("vouchertype")?this.setFoucus("ledger"):"ledger"==this.activeId?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.DayData.length&&(console.log("-Jai rana---"),"arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_voucherid)}},{key:"openVoucherEdit",value:function(e,t){var n=this;console.log("ledger123",e),e&&(this.common.params={voucherId:e,delete:2,voucherTypeId:t},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){e.delete&&n.getDayBook()})))}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Voucher Pending From :"+e.DayBook.startdate+" To :"+e.DayBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"test",value:function(e){console.log("--------: ",e)}},{key:"imageOpen",value:function(e){var t=this;console.log("dataItem:",e);var n={voucherid:e.y_voucherid};this.common.loading++,this.api.post("Accounts/getvoucherdocs",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.common.params={images:e.data,title:"Image"},t.modalService.open(jt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log("Error:",e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=this,a=t.y_vehicle_id,i=this.TripEditData,r=this.pendingDataEditTme,l=this.VoucherEditTime,c=this.deletedId;-151==n.y_vouchertype_id?(this.common.params={vehId:a,tripDetails:e,tripVoucher:t,tripEditData:i,tripPendingDataSelected:r,VoucherData:l,tripExpDriver:this.tripExpDriver,Approved:1,typeFlag:c},console.log("tripPendingDataSelected",r,"this.common.params",this.common.params),this.modalService.open(Nt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&o.getDayBook()}))):(this.common.params={vehId:a,tripDetails:e,tripVoucher:t,tripEditData:i,tripPendingDataSelected:r,VoucherData:l,tripExpDriver:this.tripExpDriver,Approved:1,typeFlag:c},console.log("tripPendingDataSelected",r,"this.common.params",this.common.params),this.modalService.open(zt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&o.getDayBook()})))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"openStoreQuestionEdit",value:function(e){this.common.params={storeRequestId:-2==e.y_vouchertype_id?-3:e.y_vouchertype_id,stockQuestionId:e.y_voucherid,stockQuestionBranchid:e.y_fobranchid,pendingid:-2==e.y_vouchertype_id?0:1,approveId:1},this.modalService.open(Gt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){console.log("responce data return",e)}))}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.DayBook.startdate,currentFilling:t.DayBook.enddate,fuelstationid:e.y_fuel_station_id,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e),e.success&&t.getDayBook()}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.DayBook.startdate,currentFilling:o.DayBook.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"addvance",value:function(){var e=this;this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data: ",t),t.response&&(e.DayBook.isamount=t.ledger.isamount,e.DayBook.remarks=t.ledger.remarks,e.DayBook.vouchercustcode=t.ledger.vouchercustcode,e.DayBook.vouchercode=t.ledger.vouchercode,e.DayBook.frmamount=t.ledger.frmamount,e.DayBook.toamount=t.ledger.toamount,e.flag=0!=t.ledger.toamount||0!=t.ledger.frmamount||""!=t.ledger.vouchercode||""!=t.ledger.vouchercustcode||""!=t.ledger.remarks||0!=t.ledger.isamount?1:0)}))}},{key:"openServiceSalesInvoicemodel",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.common.params={invoiceid:t,delete:this.deletedId,newid:a,ordertype:n,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e),e.msg&&(console.log("open succesfull"),o.getDayBook())}))}}]),e}()).\u0275fac=function(e){return new(e||kc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](d.c))},kc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:kc,selectors:[["daybookpending"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:62,vars:11,consts:[[2,"padding-top","0px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"far","fa-image",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",1),h["\u0275\u0275elementStart"](9,"div",7),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275elementStart"](11,"label",9),h["\u0275\u0275text"](12,"Voucher"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.vouchertype.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",8),h["\u0275\u0275elementStart"](16,"label",9),h["\u0275\u0275text"](17,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",1),h["\u0275\u0275elementStart"](20,"div",12),h["\u0275\u0275elementStart"](21,"div",8),h["\u0275\u0275elementStart"](22,"label",9),h["\u0275\u0275text"](23,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",12),h["\u0275\u0275elementStart"](26,"div",8),h["\u0275\u0275elementStart"](27,"label",9),h["\u0275\u0275text"](28,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",15),h["\u0275\u0275template"](31,gc,3,0,"div",16),h["\u0275\u0275template"](32,hc,3,0,"div",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",15),h["\u0275\u0275elementStart"](34,"div",8),h["\u0275\u0275elementStart"](35,"button",17),h["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),h["\u0275\u0275text"](36,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",18),h["\u0275\u0275elementStart"](38,"div",19),h["\u0275\u0275template"](39,vc,2,1,"div",20),h["\u0275\u0275template"](40,fc,2,1,"div",20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"table",21),h["\u0275\u0275elementStart"](42,"thead",22),h["\u0275\u0275elementStart"](43,"tr"),h["\u0275\u0275elementStart"](44,"th"),h["\u0275\u0275text"](45,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"th"),h["\u0275\u0275text"](47,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](48,"th"),h["\u0275\u0275text"](49,"Particular"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"th"),h["\u0275\u0275text"](51,"Vch Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](52,"th"),h["\u0275\u0275text"](53,"Vch No."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"th"),h["\u0275\u0275text"](55,"Amount(DR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](56,"th"),h["\u0275\u0275text"](57,"Amount(CR)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](58,bc,2,0,"th",23),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](59,"tbody"),h["\u0275\u0275template"](60,_c,18,16,"tr",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](61,Sc,4,1,"div",25)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.DayBook.vouchertype.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==t.flag),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",1==t.flag),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",t.DayData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.r,F.u,F.m,D.u,D.t,V.a,D.r],pipes:[D.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 280px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.far.fa-image[_ngcontent-%COMP%]{display:block;text-align:right;font-size:18px;margin-top:-20px;color:#00ff39;cursor:pointer}.highlightcolor[_ngcontent-%COMP%]{background-color:grey!important}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}"]}),kc),Ec=i("vZYa"),wc=i("FE1A"),Pc=function(e){return{highlight:e}};function Oc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",20),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openGSTEdit(e.y_details)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"td"),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"td"),h["\u0275\u0275text"](16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"td"),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"td"),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,Pc,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_sno,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_name,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_vount,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_taxval_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_inttax_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_centax_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_statax_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_cess_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_tax_amt,""),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",o.y_inv_amt,"")}}function Ic(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",22),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",23),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.bankBook[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.bankBook[o.f2Date])}}var Dc,Vc=((Dc=function(){function e(t,n,o,i,r,l){a(this,e),this.api=t,this.common=n,this.user=o,this.excelService=i,this.modalService=r,this.accountService=l,this.selectedName="",this.headings=[],this.totalLength=0,this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),reportype:"b2b",issumrise:"true"},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startdate"),this.common.currentPage="Gst Report"}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"refresh",value:function(){this.setFoucus("ledger")}},{key:"getTableColumnName",value:function(){this.headings=[];var e=this.DayData[0];for(var t in e)this.headings.push(t);console.log("headings",this.headings)}},{key:"pdfFunction",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getPDFFromTableIdnew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:"")+(t.data[0]?", GST NO -  "+t.data[0].gstno:""),"","","Gst From :"+e.bankBook.startdate+" To :"+e.bankBook.enddate)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getCsvData",value:function(){var e=this;console.log("Accounts:",this.bankBook);var t={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,reporttype:"all"};this.common.loading++,this.api.post("Voucher/getGstAllReport",t).subscribe((function(t){e.common.loading--,console.log("Res report:",t.data[0]),e.csvFunction(t.data),e.totalLength=e.DayData.length}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"csvFunction",value:function(e){var t=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(n){t.common.loading--,console.log("Res11:",n.data),t.excelService.getMultipleSheetsInExcel(["b2b","b2cl","b2cs","cdnr","cdnur","exp","at","atadj","exemp","hsn","docs"],n.data[0]?n.data[0].foname:"",(n.data[0]?n.data[0].addressline+"\n":"")+(n.data[0]?" Phone Number -  "+n.data[0].phonenumber:""),n.data[0]?", GST NO -  "+n.data[0].gstno:"",e)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"getCsvReport",value:function(){var e=this;this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe((function(t){e.common.loading--,console.log("Res11:",t.data),e.common.getCSVFromTableIdNew("table",t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),"","",t.data[0]?", GST NO -  "+t.data[0].gstno:"")}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getVoucherEdited",value:function(){var e=this;this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate,console.log("Accounts:",this.bankBook);var t={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,reporttype:this.bankBook.reportype};this.common.loading++,this.api.post("Voucher/getGstReport",t).subscribe((function(t){e.common.loading--,console.log("Res report:",t.data),e.DayData=t.data,e.totalLength=e.DayData.length}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"counter",value:function(e){return new Array(e)}},{key:"getDate",value:function(e){var t=this;this.modalService.open(S.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(n){t.bankBook[e]=t.common.dateFormatternew(n.date).split(" ")[0],console.log(t.bankBook[e])}))}},{key:"onSelected",value:function(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}},{key:"openGSTEdit",value:function(e){console.log("vouher id",JSON.parse(e)),this.common.params=JSON.parse(e),this.modalService.open(wc.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"test",value:function(e){console.log("--------: ",e)}}]),e}()).\u0275fac=function(e){return new(e||Dc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](Ec.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a))},Dc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Dc,selectors:[["gstreport"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:54,vars:4,consts:[[2,"border","0px"],[1,"row"],[1,"col-12","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mt-2","align-items-sm-end"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col","pl-0","pr-0"],[1,"table-box"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click","dblclick"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"span",3),h["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),h["\u0275\u0275element"](5,"i",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.getCsvReport()})),h["\u0275\u0275element"](7,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",7),h["\u0275\u0275elementStart"](9,"div",8),h["\u0275\u0275elementStart"](10,"div",9),h["\u0275\u0275elementStart"](11,"label",10),h["\u0275\u0275text"](12,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",8),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"label",10),h["\u0275\u0275text"](17,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",8),h["\u0275\u0275elementStart"](20,"div",9),h["\u0275\u0275elementStart"](21,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.getVoucherEdited()})),h["\u0275\u0275text"](22,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",14),h["\u0275\u0275elementStart"](24,"div",9),h["\u0275\u0275elementStart"](25,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.getCsvData()})),h["\u0275\u0275text"](26,"Export GST Reports"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",15),h["\u0275\u0275elementStart"](28,"table",16),h["\u0275\u0275elementStart"](29,"thead",17),h["\u0275\u0275elementStart"](30,"tr"),h["\u0275\u0275elementStart"](31,"th"),h["\u0275\u0275text"](32,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"th"),h["\u0275\u0275text"](34,"Particulars"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"th"),h["\u0275\u0275text"](36,"Vouncer Count"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"th"),h["\u0275\u0275text"](38,"Taxeble Value"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"th"),h["\u0275\u0275text"](40,"Integrated Tax Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"th"),h["\u0275\u0275text"](42,"Central Tax Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](43,"th"),h["\u0275\u0275text"](44,"State Tax Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"th"),h["\u0275\u0275text"](46,"Cess Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](47,"th"),h["\u0275\u0275text"](48,"Tax Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"th"),h["\u0275\u0275text"](50,"Invoice Amount"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](51,"tbody"),h["\u0275\u0275template"](52,Oc,21,13,"tr",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](53,Ic,4,1,"div",19)),2&e&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](34),h["\u0275\u0275property"]("ngForOf",t.DayData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,D.t,D.u,D.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}.table-box[_ngcontent-%COMP%]{overflow:auto;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:115px;font-weight:500}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:115px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:115px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.tjr_select[_ngcontent-%COMP%]{border:1px solid #263238!important;border-radius:0 2px 2px 2px!important;padding:3px 5px!important;height:auto!important;font-size:12px!important;display:block;width:100%}.debit_box[_ngcontent-%COMP%]{margin-left:17px}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.greterline[_ngcontent-%COMP%]{background-color:#fe5c5c!important;color:#fff!important}.lowerline[_ngcontent-%COMP%]{background-color:#e61a1a!important}.labtrj[_ngcontent-%COMP%]{margin-left:17px!important}.ledger-label[_ngcontent-%COMP%]{margin-top:10px}"]}),Dc),Fc=i("IheW");function Tc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",14),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().f2Date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.f2Date)}}var Bc,Ac=((Bc=function(){function e(t,n,o,i,r,l,c,d){var s=this;a(this,e),this.api=t,this.common=n,this.user=o,this.excelService=i,this.csvService=r,this.accountService=l,this.http=c,this.modalService=d,this.headingName="",this.branchname="",this.branchData=[],this.branchType={name:"",id:0},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.refresh=this.refresh.bind(this),this.common.currentPage="Tally Export",this.headingName=this.user._customer.name,this.branchname=this.accountService.selected.branch.name,setTimeout((function(){s.branchData=s.accountService.branches,console.log("branchesw",s.branchData),s.setFoucus("startDate")}),3e3)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.branchname=this.accountService.selected.branch.name,console.log("financial year 122 :",this.accountService.selected.financialYear.name.split("-")[1])}},{key:"onSelected",value:function(e,t,n){console.log("selected data",e),this.branchType.name=e[n],this.branchType.id=e.id,this.setFoucus("startDate")}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;if(console.log("Active event1111",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.f2Date,this.lastActiveId,n),this.handleVoucherDateOnEnter(n),void this.setFoucus(this.lastActiveId);"enter"!=t&&this.showDateModal&&(n.includes("startdate")||n.includes("enddate"))||"enter"==t&&(n.includes("branchType")?this.setFoucus("startDate"):n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")&&this.setFoucus("master"))}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o=this.f2Date;if(o.includes("-"))t=o.split("-");else{if(!o.includes("/"))return void this.common.showError("Invalid Date Format!");t=o.split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1],r=(i=1==i.length?"0"+i:i)<"04"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1];console.log("financial year",r,i);var l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,console.log("Date: ",a+n+i+n+l),"startDate"==this.activedateid?this.startDate=a+n+i+n+l:this.endDate=a+n+i+n+l}},{key:"getTallyData",value:function(e,t){var n=this;return this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate,new Promise((function(o,a){var i={tallyType:e,branchid:n.branchType.id,startDate:n.startDate,endDate:n.endDate};n.common.loading++,n.api.post("Voucher/getTallyData",i).subscribe((function(e){console.log(e),n.common.loading--,n.excelService.saveAsXMLFile("",t,e.data[0].tally_export)}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||Bc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](Ec.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](Fc.b),h["\u0275\u0275directiveInject"](v.r))},Bc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Bc,selectors:[["tallyexport"]],decls:25,vars:3,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-3"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","master",1,"btn","w-100",3,"click"],["id","voucher",1,"btn","w-100",3,"click"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"div",4),h["\u0275\u0275elementStart"](5,"div",5),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"label",7),h["\u0275\u0275text"](8,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",8),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",5),h["\u0275\u0275elementStart"](11,"div",6),h["\u0275\u0275elementStart"](12,"label",7),h["\u0275\u0275text"](13,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"input",9),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",4),h["\u0275\u0275elementStart"](16,"div",5),h["\u0275\u0275elementStart"](17,"div",6),h["\u0275\u0275elementStart"](18,"button",10),h["\u0275\u0275listener"]("click",(function(){return t.getTallyData("false","Master")})),h["\u0275\u0275text"](19,"Master"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",5),h["\u0275\u0275elementStart"](21,"div",6),h["\u0275\u0275elementStart"](22,"button",11),h["\u0275\u0275listener"]("click",(function(){return t.getTallyData("true","DayBook")})),h["\u0275\u0275text"](23,"Vouchers"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](24,Tc,4,1,"div",12)),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,D.u],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}span[_ngcontent-%COMP%]{display:block;border:1px solid #000;padding:8px;min-height:54px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.branchName[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:54px!important}"]}),Bc),Lc=i("wD9S");function Rc(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",17),h["\u0275\u0275text"](1," No Data Available On That Time Period ! "),h["\u0275\u0275elementEnd"]())}function jc(e,t){if(1&e&&h["\u0275\u0275element"](0,"smart-table",18),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var zc,Nc=((zc=function(){function e(t,n,o){a(this,e),this.api=t,this.common=n,this.accountService=o,this.tripExpense=[],this.selectedVehicle={id:0},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),this.request=0,this.allowBackspace=!0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.currentPage="Trip Expense Tally"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"getVehicle",value:function(e){console.log("test fase",e),this.selectedVehicle=e,console.log("test fase",this.selectedVehicle.id)}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;if(console.log("Active event",e),"enter"==t)this.allowBackspace=!0,n.includes("startdate")?(this.startDate=this.common.handleDateOnEnterNew(this.startDate),this.setFoucus("enddate")):n.includes("enddate")&&(this.endDate=this.common.handleDateOnEnterNew(this.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",n),"enddate"==n&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=n&&"enddate"!=n||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getTripExpenseTally",value:function(){var e=this;if(this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate,this.tripExpense=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.startDate>this.endDate)return this.common.showError("Start Date should not be Greater than End Date");var t=null!=this.startDate?this.common.dateFormatter(this.startDate):null,n=null!=this.endDate?this.common.dateFormatter(this.endDate):null;return null==t?this.common.showError("Start Date is Missing"):null==n?this.common.showError("End Date is Missing"):void this.api.post("Voucher/getTripTally",{vehid:this.selectedVehicle.id,startdate:t,enddate:n,diffrentonly:this.request}).subscribe((function(t){e.tripExpense=t.data||[],console.log("result",t);var n=e.tripExpense[0];for(var o in n)if("_"!=o.charAt(0)){e.headings.push(o);var a={title:e.formatTitle(o),placeholder:e.formatTitle(o)};e.table.data.headings[o]=a}e.table.data.columns=e.getTableColumns()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.tripExpense),this.tripExpense.map((function(n){e.valobj={};for(var o=0;o<e.headings.length;o++)e.valobj[e.headings[o]]={value:n[e.headings[o]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}()).\u0275fac=function(e){return new(e||zc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](u.a))},zc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:zc,selectors:[["trip-expense-tally"]],decls:34,vars:6,consts:[[2,"border","0px","margin-top","15px !important"],[1,"row"],[1,"col-2","pl-0"],[1,"form-group"],[1,"tjr-label"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Search by vehicle number and regno ",3,"preSelected","onSelected"],["id","diffrenttype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["value","False"],["value","True"],[1,"col-3","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0","mt-4"],["id","button",1,"btn","btn-primary",2,"border-radius","2px","padding","6px 17px",3,"click"],[1,"modal-footer"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"label",4),h["\u0275\u0275text"](6,"Vehicle"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"auto-suggestion",5),h["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",2),h["\u0275\u0275elementStart"](9,"div",3),h["\u0275\u0275elementStart"](10,"label",4),h["\u0275\u0275text"](11,"Different Only"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"select",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.request=e})),h["\u0275\u0275elementStart"](13,"option",7),h["\u0275\u0275text"](14,"No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"option",8),h["\u0275\u0275text"](16,"Yes"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"div",9),h["\u0275\u0275elementStart"](18,"div",3),h["\u0275\u0275elementStart"](19,"label",4),h["\u0275\u0275text"](20,"Start Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"input",10),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",9),h["\u0275\u0275elementStart"](23,"div",3),h["\u0275\u0275elementStart"](24,"label",4),h["\u0275\u0275text"](25,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"input",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"div",12),h["\u0275\u0275elementStart"](28,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.getTripExpenseTally()})),h["\u0275\u0275text"](29,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",14),h["\u0275\u0275template"](31,Rc,2,0,"div",15),h["\u0275\u0275elementStart"](32,"div"),h["\u0275\u0275template"](33,jc,1,2,"smart-table",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("preSelected",null),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.request),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",0==t.tripExpense.length),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.tripExpense.length>0))},directives:[b.s,b.r,jn.a,F.D,F.r,F.u,F.w,F.G,F.d,F.m,D.u,Lc.a],styles:["nb-card-body[_ngcontent-%COMP%]{padding:16px!important}"]}),zc),Gc=i("syiq"),Yc=function(e){return{highlight:e}},Hc=function(e){return{handHighLight:e}};function $c(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",32),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index,a=h["\u0275\u0275nextContext"]().index,i=h["\u0275\u0275nextContext"]();return e.stopPropagation(),i.selectedRow="a"+a+o})),h["\u0275\u0275elementStart"](1,"div",33),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",34),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"](2);return 0!=e.y_total_approved?o.opendaybookmodel(e.y_id,0):""})),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",34),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"](2);return 0!=e.y_total_pending?o.opendaybookmodel(e.y_id,1):""})),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==r.active.liabilities.mainGroup.indexOf("mainGroup"+i+0))("ngClass",h["\u0275\u0275pureFunction1"](7,Yc,r.selectedRow=="a"+i+a)),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](9,Hc,0!=o.y_total_approved)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",o.y_total_approved,""),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,Hc,0!=o.y_total_pending)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",o.y_total_pending,"")}}function qc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",29),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().handleExpandation(e,o,"liabilities","mainGroup",0)})),h["\u0275\u0275elementStart"](1,"div",30),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",22),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",22),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,$c,8,13,"div",31),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"]("Vouchers"==o.name?a.approved1:a.approved2),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"]("Vouchers"==o.name?a.pending1:a.pending2),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",o.balanceSheets)}}function Kc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",32),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index,a=h["\u0275\u0275nextContext"]().index,i=h["\u0275\u0275nextContext"]();return e.stopPropagation(),i.selectedRow="b"+a+o})),h["\u0275\u0275elementStart"](1,"div",33),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",22),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",34),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=h["\u0275\u0275nextContext"](2);return 0!=e.y_total_pending?o.openPageModel(e.y_name):""})),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]().index,r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("hidden",-1==r.active.asset.mainGroup.indexOf("mainGroup"+i+0))("ngClass",h["\u0275\u0275pureFunction1"](6,Yc,r.selectedRow=="b"+i+a)),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.y_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.y_total_approved),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](8,Hc,0!=o.y_total_pending)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",o.y_total_pending,"")}}function Uc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",29),h["\u0275\u0275listener"]("click",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().handleExpandation(e,o,"asset","mainGroup",0)})),h["\u0275\u0275elementStart"](1,"div",30),h["\u0275\u0275elementStart"](2,"div",21),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",35),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",36),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,Kc,8,10,"div",31),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a.assetApproved),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a.assetPending),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",o.balanceSheets)}}function Wc(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",37),h["\u0275\u0275elementStart"](1,"div",38),h["\u0275\u0275text"](2,"Total"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",39),h["\u0275\u0275elementStart"](4,"p",40),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",41),h["\u0275\u0275elementStart"](7,"p",40),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate1"](" ",n.liabilities[n.liabilities.length-1].pending,""),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",n.liabilities[n.liabilities.length-1].approve,"")}}function Qc(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",37),h["\u0275\u0275elementStart"](1,"div",38),h["\u0275\u0275text"](2,"Total"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",39),h["\u0275\u0275elementStart"](4,"p",40),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",41),h["\u0275\u0275elementStart"](7,"p",40),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate1"](" ",n.assets[n.assets.length-1].pending,""),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" ",n.assets[n.assets.length-1].approve,"")}}function Jc(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",42),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",43),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",44),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.staticsData[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.staticsData[o.f2Date])}}var Xc,Zc=((Xc=function(){function e(t,n,o,i,r,l,c){a(this,e),this.api=t,this.common=n,this.user=o,this.pdfService=i,this.csvService=r,this.modalService=l,this.accountService=c,this.selectedName="",this.staticsData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.staticsSheetData=[],this.activeId="",this.approved1=0,this.approved2=0,this.pending1=0,this.pending2=0,this.assetApproved=0,this.assetPending=0,this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="sub",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.staticsData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.staticsData.enddate,this.setFoucus("startdate"),this.common.currentPage="Accounts Statics",console.log("current month",(new Date).getFullYear()-1,(new Date).getMonth()+1>3)}return r(e,[{key:"ngOnInit",value:function(){}},{key:"getStaticsSheet",value:function(){var e=this;this.staticsData.startdate=this.accountService.fromdate,this.staticsData.enddate=this.accountService.todate;var t={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate};this.common.loading++,this.api.post("Voucher/getStaticsData",t).subscribe((function(t){e.common.loading--,console.log("Res statics data:",t.data),e.staticsSheetData=t.data,e.formattData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"formattData",value:function(){var e=sn.groupBy(this.staticsSheetData,"y_groupid"),t=sn.groupBy(e[0],"y_group_name"),n=sn.groupBy(e[1],"y_group_name");console.log("A:",e),console.log("B:",t),console.log("C:",n),this.liabilities=[];var o=0,a=0;for(var i in t)t[i].map((function(e){e.y_total_approved&&(o+=parseFloat(e.y_total_approved)),e.y_total_pending&&(a+=parseFloat(e.y_total_pending))})),this.liabilities.push({name:i,approve:o,pending:a,balanceSheets:t[i].filter((function(e){return e.y_name}))});this.assets=[];var r=0,l=0;for(var c in n)n[c].map((function(e){e.y_total_approved&&(r+=parseFloat(e.y_total_approved)),e.y_total_pending&&(l+=parseFloat(e.y_total_pending))})),this.assets.push({name:c,approve:r,pending:l,balanceSheets:n[c].filter((function(e){return e.y_name}))});console.log("liabilities",this.liabilities,"asset data ",this.assets);var d=this.liabilities[0].balanceSheets.reduce((function(e,t){return e+t.y_total_approved}),0);this.approved1=d;var s=this.liabilities[1].balanceSheets.reduce((function(e,t){return e+t.y_total_approved}),0);this.approved2=s;var m=this.liabilities[0].balanceSheets.reduce((function(e,t){return e+t.y_total_pending}),0);this.pending1=m;var u=this.liabilities[1].balanceSheets.reduce((function(e,t){return e+t.y_total_pending}),0);this.pending2=u;var p=this.assets[0].balanceSheets.reduce((function(e,t){return e+t.y_total_approved}),0);this.assetApproved=p;var g=this.assets[0].balanceSheets.reduce((function(e,t){return e+t.y_total_pending}),0);this.assetPending=g,this.changeViewType()}},{key:"filterData",value:function(e,t){return e.filter((function(e){return e.y_is_assets===t}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.staticsData.startdate=this.common.handleDateOnEnterNew(this.staticsData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.staticsData.enddate=this.common.handleDateOnEnterNew(this.staticsData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.staticsData[o].includes("-"))t=this.staticsData[o].split("-");else{if(!this.staticsData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.staticsData[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.staticsData[o]=a+n+i+n+r}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"opendaybookmodel",value:function(e,t){var n=this;this.common.params={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate,ledger:0,vouchertype:e,deleteId:t},this.modalService.open(Gc.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){n.common.currentPage="Accounts Statics"})),this.common.currentPage="Accounts Statics"}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"getProfitLoss",value:function(){this.common.params={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate},console.log("start date and date",this.common.params),this.modalService.open(Br.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"handleExpandation",value:function(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}},{key:"changeViewType",value:function(){var e=this;this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((function(t,n){return e.active.liabilities.mainGroup.push("mainGroup"+n+0)})),this.assets.forEach((function(t,n){return e.active.asset.mainGroup.push("mainGroup"+n+0)}))):"all"==this.viewType&&(this.liabilities.forEach((function(t,n){e.active.liabilities.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.liabilities.subGroup.push("subGroup"+n+o)}))})),this.assets.forEach((function(t,n){e.active.asset.mainGroup.push("mainGroup"+n+0),t.subGroups.forEach((function(t,o){return e.active.asset.subGroup.push("subGroup"+n+o)}))})))}},{key:"generateCsvData",value:function(){var e=[];e.push(Object.assign({liability:"Types",liabilityAmount:"Approved",pending:"Pending"})),this.liabilities.forEach((function(t){e.push({liability:t.name,liabilityAmount:"",pending:""}),t.balanceSheets.forEach((function(t){e.push({liability:t.y_name,liabilityAmount:t.y_total_approved,pending:t.y_total_pending})}))}));var t=[];t.push(Object.assign({asset:"Master Name",assetAmount:"System",assetPending:"User Defined"})),this.assets.forEach((function(e){t.push({asset:e.name,assetAmount:"",assetPending:""}),e.balanceSheets.forEach((function(e){t.push({asset:e.y_name,assetAmount:e.y_total_approved,assetPending:e.y_total_pending})}))}));for(var n=[],o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<=e.length-1&&o<=t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<=e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:"",assetPending:""})):t[o]&&o<=t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:"",pending:""},t[o]));n.push(Object.assign({},{liability:"Total",liabilityAmount:this.liabilities[this.liabilities.length-1].approve,pending:this.liabilities[this.liabilities.length-1].pending},{asset:"Total",assetAmount:this.assets[this.assets.length-1].approve,assetPending:this.assets[this.assets.length-1].pending})),this.csvService.jsonToExcel(n),console.log("Merged:",n)}},{key:"openPageModel",value:function(e){this.common.handleModalSize("class","modal-lg","1250","px",0),"Stock Items"==e?(this.common.params={pageName:"StockItem"},this.modalService.open(qe,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then((function(e){}))):"Stock Sub Type"==e?(this.common.params={pageName:"StockSubType"},this.modalService.open(ze,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then((function(e){}))):"Stock Type"==e?(this.common.params={pageName:"StockType"},this.modalService.open(Fe,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then((function(e){}))):"Account Groups"==e?(this.common.params={pageName:"StockType"},this.modalService.open(Ze,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then((function(e){}))):"Ledger"==e&&(this.common.params={pageName:"Ledger"},this.modalService.open(ut,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then((function(e){}))),this.common.currentPage="Accounts Statics"}}]),e}()).\u0275fac=function(e){return new(e||Xc)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](u.a))},Xc.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Xc,selectors:[["statics"]],decls:56,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"expand-div"],["type","radio","name","view","value","main",3,"ngModel","ngModelChange","change"],["type","radio","name","view","value","sub",3,"ngModel","ngModelChange","change"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col","pl-0","pr-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],["id","balance-sheet"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-6"],[1,"col-3","text-right"],[1,"middlebody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],[1,"th-mini","row","m-0","pl-0","pr-0"],["style","background: #dadfe6;",3,"hidden","ngClass","click",4,"ngFor","ngForOf"],[2,"background","#dadfe6",3,"hidden","ngClass","click"],[1,"tb-mini","row","m-0","pl-0","pr-0"],[1,"col-3","text-right",3,"ngClass","click"],[1,"col-3",2,"padding-left","100px"],[1,"col-3",2,"padding-left","105px"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right","padding-right","5px"],[2,"margin","0px","width","100px","text-align","right"],[1,"total_amount",2,"text-align","right","padding-right","42px"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"input",3),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.viewType=e}))("change",(function(){return t.changeViewType()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"label"),h["\u0275\u0275text"](5," Expand Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"input",4),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.viewType=e}))("change",(function(){return t.changeViewType()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"label"),h["\u0275\u0275text"](8," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"span",5),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),h["\u0275\u0275element"](10,"i",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"span",7),h["\u0275\u0275listener"]("click",(function(){return t.generateCsvData()})),h["\u0275\u0275element"](12,"i",8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",9),h["\u0275\u0275elementStart"](14,"div",10),h["\u0275\u0275elementStart"](15,"div",11),h["\u0275\u0275elementStart"](16,"label",12),h["\u0275\u0275text"](17,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",13),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",10),h["\u0275\u0275elementStart"](20,"div",11),h["\u0275\u0275elementStart"](21,"label",12),h["\u0275\u0275text"](22,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"input",14),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",15),h["\u0275\u0275elementStart"](25,"div",11),h["\u0275\u0275elementStart"](26,"button",16),h["\u0275\u0275listener"]("click",(function(){return t.getStaticsSheet()})),h["\u0275\u0275text"](27,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"div",17),h["\u0275\u0275elementStart"](29,"div",18),h["\u0275\u0275elementStart"](30,"div",19),h["\u0275\u0275elementStart"](31,"div",20),h["\u0275\u0275elementStart"](32,"div",21),h["\u0275\u0275text"](33,"Types"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"div",22),h["\u0275\u0275text"](35,"Approved"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div",22),h["\u0275\u0275text"](37,"Pending"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](38,"div",23),h["\u0275\u0275template"](39,qc,9,4,"div",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](40,"div",19),h["\u0275\u0275elementStart"](41,"div",20),h["\u0275\u0275elementStart"](42,"div",21),h["\u0275\u0275text"](43,"Master Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](44,"div",22),h["\u0275\u0275text"](45,"System"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"div",22),h["\u0275\u0275text"](47,"User Defined"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](48,"div",23),h["\u0275\u0275template"](49,Uc,9,4,"div",24),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](50,"div",9),h["\u0275\u0275elementStart"](51,"div",25),h["\u0275\u0275template"](52,Wc,9,2,"div",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"div",27),h["\u0275\u0275template"](54,Qc,9,2,"div",26),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](55,Jc,4,1,"div",28)),2&e&&(h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.viewType),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.viewType),h["\u0275\u0275advance"](12),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](16),h["\u0275\u0275property"]("ngForOf",t.liabilities),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngForOf",t.assets),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.liabilities.length),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.assets.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.t,D.u,D.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#fff}.middlebody[_ngcontent-%COMP%]{height:calc(100vh - 265px);overflow:auto}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7;padding:9px}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;padding:9px}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.handHighLight[_ngcontent-%COMP%]{cursor:pointer;color:#5600ff}"]}),Xc);function ed(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",17),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerData)}}function td(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",18),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"group","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.secondarygroup)}}function nd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](n.is_constcenterallow)}}function od(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275elementStart"](1,"input",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().$implicit.is_constcenterallow=e}))("change",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"]().updateLedgerCostCenter(e,t.id)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("value",o.is_constcenterallow)("ngModel",o.is_constcenterallow)}}var ad=function(e){return{highlight:e}};function id(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",19),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](9,nd,2,1,"td",20),h["\u0275\u0275template"](10,od,2,2,"td",20),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275text"](12),h["\u0275\u0275pipe"](13,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"td"),h["\u0275\u0275elementStart"](15,"button",21),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().approveDeleteFunction(0,"true",e.id)})),h["\u0275\u0275text"](16,"Approve"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,ad,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.groupname),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.alias_name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",2!=i.deletedId),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",2==i.deletedId),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](13,8,o.entry_dt,"dd-MMM-yy"))}}var rd,ld=((rd=function(){function e(t,n,o,i,r,l,c){var d=this;a(this,e),this.activeModal=t,this.api=n,this.common=o,this.route=i,this.user=r,this.router=l,this.modalService=c,this.Ledgers=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.ledgerData=[],this.secondarygroup=[],this.group={name:"All",id:0},this.ledger={name:"All",id:0},this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.selectedRow=-1,this.activeId="ledgerdaybook",this.common.refresh=this.refresh.bind(this),this.route.params.subscribe((function(e){console.log("Params1: ",e),e.id&&(d.deletedId=parseInt(e.id),d.GetLedger(4)),d.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}})),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(4),this.sizeledger=1),this.GetLedger(4),this.common.currentPage="Ledger Pending For Approval",this.getAllLedger(),this.getSecondaryGoup()}return r(e,[{key:"handleKeyboardEvent",value:function(e){this.keyHandler(e)}},{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("ledger approve test"),this.GetLedger(4)}},{key:"getAllLedger",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"GetLedger",value:function(e){var t=this,n={foid:123,deleted:e,groupid:this.group.id,ledgerid:this.ledger.id};console.log("approve ledger",n),this.common.loading++,this.api.post("Accounts/GetLedgerdata",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),t.Ledgers=e.data}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"onSelected",value:function(e,t,n){"group"==t?(this.group.name=e[n],this.group.id=e.id):(this.ledger.name=e[n],this.ledger.id=e.id)}},{key:"getSecondaryGoup",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.secondarygroup=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"updateLedgerCostCenter",value:function(e,t){var n=this,o={ledgerid:t,ladgervalue:e.target.checked};console.log("ledger data",e.target.checked,t),this.common.loading++,this.api.post("Accounts/SaveLedgerCostCenter",o).subscribe((function(e){n.common.loading--,console.log("Res:",e.data),n.common.showToast(e.data[0].y_errormsg)}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"openModal",value:function(e){var t=this;if(console.log("ledger123",e),e){var n={id:e.id,foid:0};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe((function(e){t.common.loading--,console.log("Res:",e.data),e.data,t.common.params={ledgerdata:e.data,deleted:t.deletedId,sizeledger:t.sizeledger},t.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addLedger(e.ledger)}))}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}else this.common.params=null,this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.addLedger(e.ledger)}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"==t?(this.allowBackspace=!0,this.activeId.includes("ledgerdaybook")?this.setFoucus("group"):this.activeId.includes("group")&&this.setFoucus("delreview")):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"group"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.Ledgers.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.Ledgers.length-1&&this.selectedRow++)}},{key:"addLedger",value:function(e){var t=this;console.log("ledgerdata",e);var n={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertLedger",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"modelCondition",value:function(){this.activeModal.close({}),event.preventDefault()}},{key:"approveDeleteFunction",value:function(e,t,n){var o=this;console.log("type",e,"typeans",t,"xid",n);var a={id:n,flagname:1==e?"deleted":"forapproved",flagvalue:t};this.common.loading++,this.api.post("Company/ledgerDeleteApprooved",a).subscribe((function(n){o.common.loading--,console.log("res: ",n),o.activeModal.close({response:!0}),1==e&&"true"==t?o.common.showToast(" This Value Has been Deleted!"):1==e&&"false"==t?o.common.showToast(" This Value Has been Restored!"):(o.common.showToast(" This Value Has been Approved!"),o.GetLedger(4))}),(function(e){o.common.loading--,console.log("Error: ",e),o.common.showError("This Value has been used another entry!")}))}}]),e}()).\u0275fac=function(e){return new(e||rd)(h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](d.c),h["\u0275\u0275directiveInject"](v.r))},rd.\u0275cmp=h["\u0275\u0275defineComponent"]({type:rd,selectors:[["ledgerapprove"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,h["\u0275\u0275resolveDocument"])},decls:45,vars:5,consts:[[2,"border","0px"],[1,"row",2,"margin-top","20px"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","group","name","group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["id","pending",1,"btn","mb-4",3,"click"],["id","delreview",1,"btn","mb-4",3,"click"],[1,"col-3","pl-0","pr-0"],["class","form-group",4,"ngIf"],[1,"table-box"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["targetId","ledgerdaybook","display","name",3,"data","select"],["targetId","group","display","name",3,"data","select"],[3,"ngClass","click","dblclick"],[4,"ngIf"],["outline","","id","approve",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["type","checkbox",3,"value","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"div",5),h["\u0275\u0275elementStart"](7,"label",6),h["\u0275\u0275text"](8,"Group "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.group.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",4),h["\u0275\u0275elementStart"](11,"div",5),h["\u0275\u0275elementStart"](12,"label",6),h["\u0275\u0275text"](13,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"input",8),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",3),h["\u0275\u0275elementStart"](16,"div",4),h["\u0275\u0275elementStart"](17,"button",9),h["\u0275\u0275listener"]("click",(function(){return t.GetLedger(4)})),h["\u0275\u0275text"](18,"Pending For Approval"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",4),h["\u0275\u0275elementStart"](20,"button",10),h["\u0275\u0275listener"]("click",(function(){return t.GetLedger(6)})),h["\u0275\u0275text"](21,"Deleted Review"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",11),h["\u0275\u0275template"](23,ed,2,1,"div",12),h["\u0275\u0275template"](24,td,2,1,"div",12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"div",13),h["\u0275\u0275elementStart"](26,"table",14),h["\u0275\u0275elementStart"](27,"thead",15),h["\u0275\u0275elementStart"](28,"tr"),h["\u0275\u0275elementStart"](29,"th"),h["\u0275\u0275text"](30,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"th"),h["\u0275\u0275text"](32,"Under Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"th"),h["\u0275\u0275text"](34,"Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"th"),h["\u0275\u0275text"](36,"Alias Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"th"),h["\u0275\u0275text"](38,"Cost Center Allow"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"th"),h["\u0275\u0275text"](40,"Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"th"),h["\u0275\u0275text"](42,"Approve"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](43,"tbody"),h["\u0275\u0275template"](44,id,17,13,"tr",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.group.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.ledger.name),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("group")),h["\u0275\u0275advance"](20),h["\u0275\u0275property"]("ngForOf",t.Ledgers))},directives:[b.s,b.r,F.d,F.r,F.u,D.u,D.t,V.a,D.r,F.a],pipes:[D.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.table-box[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 260px);overflow:hidden}.col-8[_ngcontent-%COMP%]{margin-left:32px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;word-break:keep-all;white-space:nowrap;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:13%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;margin:0;color:#f5f5f5;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 172px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:13%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),rd),cd=i("ZD20");function dd(e,t){if(1&e&&h["\u0275\u0275element"](0,"smart-table",20),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function sd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1," No Data available ! "),h["\u0275\u0275elementEnd"]())}var md,ud=((md=function(){function e(t,n,o,i,r,l,c){a(this,e),this.api=t,this.common=n,this.datePipe=o,this.user=i,this.activeModal=r,this.accountService=l,this.modalService=c,this.startTime=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.endTime=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.requestType="Transfer",this.status=2,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startTime,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endTime,this.getRequests(),this.common.refresh=this.refresh.bind(this),this.common.currentPage="Account Entry Approval"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getRequests()}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;console.log("Active event1111",e),"enter"==t&&(n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")?this.setFoucus("requestType"):n.includes("requestType")?this.setFoucus("status"):n.includes("status")&&this.setFoucus("submit"))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"getRequests",value:function(){var e=this;if(this.startTime=this.accountService.fromdate,this.endTime=this.accountService.todate,this.startTime&&this.endTime){var t={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime),status:this.status,requestType:this.requestType};console.log("params",t),++this.common.loading,this.api.post("Accounts/getApprovalList",t).subscribe((function(t){if(--e.common.loading,e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var o in n)if("_"!=o.charAt(0)){e.headings.push(o);var a={title:e.formatTitle(o),placeholder:e.formatTitle(o)};e.table.data.headings[o]=a}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}else this.common.showError("Dates cannot be blank.")}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var o=0;o<e.headings.length;o++)console.log("doc index value:",n[e.headings[o]]),e.valobj[e.headings[o]]={value:n[e.headings[o]],class:"black",action:""};e.valobj.Action={class:"",icons:e.actionIcon(n)},t.push(e.valobj)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"actionIcon",value:function(e){var t=[];return"Approved"==e.Status?t.push({class:"fa fa-eye icon i-gray",action:this.viewTransfer.bind(this,e)},{class:"fa fa-undo icon  i-red-cross",action:this.takeAction.bind(this,e,0)}):t.push({class:"fa fa-eye icon i-gray",action:this.viewTransfer.bind(this,e)},{class:"fa fa-check icon i-green",action:this.takeAction.bind(this,e,1)},{class:"fa fa-times icon  i-red-cross",action:this.takeAction.bind(this,e,-1)}),t}},{key:"openRemarkModal",value:function(e,t){var n=this;this.common.params={title:"Remarks "},this.modalService.open(cd.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(o){console.log("dta",o),o.response&&n.requestApproval({requestId:e._id,requestType:e.Type,status:t,remarks:o.remark})}))}},{key:"viewTransfer",value:function(e){"Transfer"==e.Type?(this.common.params={refData:{transferId:e._id,readOnly:!0}},this.modalService.open(Ht.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))):"Invoice"==e.Type?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e._id,refType:"FRINV"}},this.modalService.open($t.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))):"MVS"==e.Type&&(this.common.params={invoice:{id:e._id}},this.modalService.open(qt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)})))}},{key:"takeAction",value:function(e,t){var n=this;console.log("row:",e);var o={requestId:e._id,requestType:e.Type,status:t};e._id&&(0==t?(this.common.params={title:"Revert Request",description:"<b>&nbsp;Are Sure To Revert This Approval ?<b>"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&n.requestApproval(o)}))):this.openRemarkModal(e,t))}},{key:"requestApproval",value:function(e){var t=this;console.log("params",e),this.common.loading++,this.api.post("Accounts/approveAccountRequest",e).subscribe((function(e){t.common.loading--,e.data[0].y_id>0?(t.common.showToast("successfully updated"),t.getRequests()):t.common.showError(e.data[0].y_msg)}),(function(e){t.common.loading--,console.log("Error: ",e)}))}}]),e}()).\u0275fac=function(e){return new(e||md)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](D.f),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](v.b),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},md.\u0275cmp=h["\u0275\u0275defineComponent"]({type:md,selectors:[["account-entry-approval"]],decls:39,vars:6,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-4","mb-2"],[1,"col-md-2","pl-0"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","requestType",1,"form-control","tjr-input",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","Transfer"],["value","Invoice"],["value","MVS"],["id","status",1,"form-control","tjr-input",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","2"],[1,"col-md-2","pl-0","pt-4"],["type","submit","id","submit",1,"btn","btn-primary","m-0","tjr-button",3,"click"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"label",4),h["\u0275\u0275text"](5,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",3),h["\u0275\u0275elementStart"](8,"label",4),h["\u0275\u0275text"](9,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"div",3),h["\u0275\u0275elementStart"](12,"label",4),h["\u0275\u0275text"](13,"Requests"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"select",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.requestType=e})),h["\u0275\u0275elementStart"](15,"option",8),h["\u0275\u0275text"](16,"Transfer"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"option",9),h["\u0275\u0275text"](18,"Invoice"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"option",10),h["\u0275\u0275text"](20,"MVS"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",3),h["\u0275\u0275elementStart"](22,"label",4),h["\u0275\u0275text"](23,"Status"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"select",11),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),h["\u0275\u0275elementStart"](25,"option",12),h["\u0275\u0275text"](26,"Pending"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](27,"option",13),h["\u0275\u0275text"](28,"Accepted"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"option",14),h["\u0275\u0275text"](30,"Rejected"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"option",15),h["\u0275\u0275text"](32,"All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](33,"div",16),h["\u0275\u0275elementStart"](34,"button",17),h["\u0275\u0275listener"]("click",(function(){return t.getRequests()})),h["\u0275\u0275text"](35,"Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"div"),h["\u0275\u0275template"](37,dd,1,2,"smart-table",18),h["\u0275\u0275template"](38,sd,2,0,"div",19),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngModel",t.requestType),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("ngModel",t.status),h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngIf",t.data&&t.data.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[b.s,b.r,F.d,F.m,F.r,F.u,F.D,F.w,F.G,D.u,Lc.a],styles:["[_nghost-%COMP%]     .i-red-cross{color:red;margin-left:10px}[_nghost-%COMP%]     .i-gray{color:grey}[_nghost-%COMP%]     .i-green{margin-left:10px;color:green}[_nghost-%COMP%]     .icon{padding:5px;font-size:18px!important;border:1px solid grey;border-radius:50%}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),md),pd=i("abs5"),gd=function(e){return{highlight:e}};function hd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",7),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](4,gd,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.country_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.country_code)}}var vd,fd=((vd=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"name"},this.getstatedata={state:{name:"Rajasthan",id:29}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.common.currentPage="Country",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getpageData()}},{key:"getpageData",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/GetCountry",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,console.log("after api data:",e.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openModal",value:function(e){var t=this;e?(console.log("city",e),this.common.params=e,this.modalService.open(pd.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.getpageData()}))):(this.common.params=null,this.modalService.open(pd.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&t.getpageData()})))}},{key:"deleteCity",value:function(e){var t=this;console.log("city data",e);var n={id:e.id};console.log("params: ",n),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Accounts/DeleteCity",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getpageData(),t.common.showToast(" Delete Record")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()})))})))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||vd)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](v.r))},vd.\u0275cmp=h["\u0275\u0275defineComponent"]({type:vd,selectors:[["country"]],decls:16,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"button",1),h["\u0275\u0275listener"]("click",(function(){return t.openModal()})),h["\u0275\u0275element"](3,"i",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",3),h["\u0275\u0275elementStart"](5,"table",4),h["\u0275\u0275elementStart"](6,"thead",5),h["\u0275\u0275elementStart"](7,"tr"),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"City"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"th"),h["\u0275\u0275text"](13,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"tbody"),h["\u0275\u0275template"](15,hd,7,6,"tr",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](15),h["\u0275\u0275property"]("ngForOf",t.data))},directives:[b.s,b.r,D.t,D.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 163px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),vd),bd=i("XDGq"),xd=function(e){return{highlight:e}};function yd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",17),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e}))("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().openModal(e)})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275text"](10),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](6,xd,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.country_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.province_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.province_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.gst_state_code)}}var Cd,_d=((Cd=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"country_name"},this.getstatedata={state:{name:"India",id:1}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.getCountry(),this.common.currentPage="State",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getpageData()}},{key:"getCountry",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/GetCountry",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.autoSuggestion.data=t.data,e.statedata=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getpageData",value:function(){var e=this,t={counntryid:this.getstatedata.state.id};this.common.loading++,this.api.post("Accounts/getState",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,console.log("after api data:",e.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"openModal",value:function(e){e?(console.log("city",e),this.common.params=e,this.modalService.open(bd.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))):(this.common.params=null,this.modalService.open(bd.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){})))}},{key:"addCity",value:function(e){var t=this;console.log("city",e);var n={cityname:e.city,stateid:e.state.id,pincode:e.pincode};console.log("params: ",n),this.common.loading++,this.api.post("Accounts/InsertCity",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.msg),t.getpageData()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateCity",value:function(e,t){var n=this;console.log("updated data",e);var o={cityname:e.city,stateid:e.state.id,pincode:e.pincode,id:t};console.log("params: ",o),this.common.loading++,this.api.post("Accounts/InsertCity",o).subscribe((function(e){n.common.loading--,console.log("res: ",e),e.msg&&n.common.showToast("Update SuccessFull"),n.getpageData()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"deleteCity",value:function(e){var t=this;console.log("city data",e);var n={id:e.id};console.log("params: ",n),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Accounts/DeleteCity",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getpageData(),t.common.showToast(" Delete Record")}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()})))})))}},{key:"selectSuggestion",value:function(e,t){console.log("Suggestion on select: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}},{key:"onSelect",value:function(e,t){console.log("Suggestion: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}},{key:"onSelected",value:function(e,t,n){this.getstatedata.state.name=e[n],this.getstatedata.state.id=e.id,console.log("order User: ",this.getstatedata),this.setFoucus("submit")}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||Cd)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](v.r))},Cd.\u0275cmp=h["\u0275\u0275defineComponent"]({type:Cd,selectors:[["state"]],decls:36,vars:3,consts:[[2,"margin","0px","border","0px"],[1,"row"],[1,"col-9"],[1,"col-6"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","state","name","state",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"auto-sugg"],["targetId","state","display","country_name",3,"data","select"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"div",1),h["\u0275\u0275elementStart"](5,"div",3),h["\u0275\u0275elementStart"](6,"div",4),h["\u0275\u0275elementStart"](7,"label",5),h["\u0275\u0275text"](8,"Country"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.getstatedata.state.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",7),h["\u0275\u0275elementStart"](11,"div",4),h["\u0275\u0275elementStart"](12,"button",8),h["\u0275\u0275listener"]("click",(function(){return t.getpageData()})),h["\u0275\u0275text"](13,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",7),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275elementStart"](16,"div",4),h["\u0275\u0275elementStart"](17,"auto-suggetion-in-side",10),h["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"state","country_name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"button",11),h["\u0275\u0275listener"]("click",(function(){return t.openModal()})),h["\u0275\u0275element"](19,"i",12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"div",13),h["\u0275\u0275elementStart"](21,"table",14),h["\u0275\u0275elementStart"](22,"thead",15),h["\u0275\u0275elementStart"](23,"tr"),h["\u0275\u0275elementStart"](24,"th"),h["\u0275\u0275text"](25,"#"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"th"),h["\u0275\u0275text"](27,"Country Name"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"th"),h["\u0275\u0275text"](29,"State"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"th"),h["\u0275\u0275text"](31,"Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"th"),h["\u0275\u0275text"](33,"Gst Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](34,"tbody"),h["\u0275\u0275template"](35,yd,11,8,"tr",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.getstatedata.state.name),h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("data",t.statedata),h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.data))},directives:[b.s,b.r,F.d,F.r,F.u,V.a,D.t,D.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 283px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),Cd);function Sd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function kd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Md(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Ed(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function wd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Pd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.debit,"1.2-2")," ")}}function Od(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.credit,"1.2-2")," ")}}function Id(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"](3);return t.activeIndex=t.activeIndex!==e?e:-1})),h["\u0275\u0275template"](1,Sd,2,2,"div",6),h["\u0275\u0275template"](2,kd,2,0,"div",6),h["\u0275\u0275template"](3,Md,2,0,"div",6),h["\u0275\u0275template"](4,Ed,2,0,"div",6),h["\u0275\u0275template"](5,wd,2,0,"div",6),h["\u0275\u0275template"](6,Pd,3,4,"div",7),h["\u0275\u0275template"](7,Od,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function Dd(e,t){if(1&e&&h["\u0275\u0275element"](0,"ledger-register-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}var Vd=function(e){return{highlight:e}};function Fd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit,t=h["\u0275\u0275nextContext"](3);return e.y_voucher_type_name.toLowerCase().includes("voucher")?e.y_voucher_type_name.toLowerCase().includes("trip")?t.action(e,"",e.y_voucher_type_name,e):t.action(e.y_voucherid,e.y_code,e.y_voucher_type_name,e):t.action(e.y_voucherid,"",e.y_voucher_type_name,e)}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).selectedRow=e})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",8),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",8),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",8),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",9),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](16,Vd,r.selectedRow==a)),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](i.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.y_voucher_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,7,i.y_voucher_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](i.y_voucher_type_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,10,i.y_dramunt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,13,i.y_cramunt,"1.2-2"))}}function Td(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Id,8,9,"div",2),h["\u0275\u0275template"](2,Dd,1,6,"ledger-register-tree",3),h["\u0275\u0275template"](3,Fd,18,18,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function Bd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Td,4,3,"div",1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",n.data)}}function Ad(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit,o=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"]("\xa0\xa0",o.labels," ",n.name," ")}}function Ld(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Rd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function jd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function zd(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",8),h["\u0275\u0275text"](1,"\xa0"),h["\u0275\u0275elementEnd"]())}function Nd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.debit,"1.2-2")," ")}}function Gd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",9),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"number"),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind2"](2,1,n.credit,"1.2-2")," ")}}function Yd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",5),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index,t=h["\u0275\u0275nextContext"](3);return t.activeIndex=t.activeIndex!==e?e:-1})),h["\u0275\u0275template"](1,Ad,2,2,"div",6),h["\u0275\u0275template"](2,Ld,2,0,"div",6),h["\u0275\u0275template"](3,Rd,2,0,"div",6),h["\u0275\u0275template"](4,jd,2,0,"div",6),h["\u0275\u0275template"](5,zd,2,0,"div",6),h["\u0275\u0275template"](6,Nd,3,4,"div",7),h["\u0275\u0275template"](7,Gd,3,4,"div",7),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]().$implicit,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275styleProp"]("background",a.colors[a.color]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",o.name)}}function Hd(e,t){if(1&e&&h["\u0275\u0275element"](0,"ledger-register-tree",10),2&e){var n=h["\u0275\u0275nextContext"](),o=n.$implicit,a=n.index,i=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("color",i.color+1)("action",i.action)("data",o.data)("isExpandAll",i.isExpandAll)("active",!(i.activeIndex!==a&&!i.isExpandAll))("labels",i.labels)}}function $d(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",11),h["\u0275\u0275listener"]("dblclick",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().$implicit,t=h["\u0275\u0275nextContext"](3);return e.y_voucher_type_name.toLowerCase().includes("voucher")?e.y_voucher_type_name.toLowerCase().includes("trip")?t.action(e,"",e.y_voucher_type_name,e):t.action(e.y_voucherid,e.y_code,e.y_voucher_type_name,e):t.action(e.y_voucherid,"",e.y_voucher_type_name,e)}))("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"]().index;return h["\u0275\u0275nextContext"](3).selectedRow=e})),h["\u0275\u0275elementStart"](1,"div",8),h["\u0275\u0275text"](2,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"div",8),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",8),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",8),h["\u0275\u0275text"](8),h["\u0275\u0275pipe"](9,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",8),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",9),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",9),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](),a=o.index,i=o.$implicit,r=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](16,Vd,r.selectedRow==a)),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](i.y_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](i.y_voucher_cust_code),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](9,7,i.y_voucher_date,"dd-MMM-yy")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](i.y_voucher_type_name),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,10,i.y_dramunt,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,13,i.y_cramunt,"1.2-2"))}}function qd(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Yd,8,9,"div",2),h["\u0275\u0275template"](2,Hd,1,6,"ledger-register-tree",3),h["\u0275\u0275template"](3,$d,18,18,"div",4),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!n.name)}}function Kd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div"),h["\u0275\u0275elementStart"](2,"input",12),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).search=e}))("click",(function(e){return h["\u0275\u0275restoreView"](n),e.stopPropagation()}))("ngModelChange",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).searchValues()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](3,qd,4,3,"div",1),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngModel",o.search),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",o.searchedData)}}function Ud(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275template"](1,Bd,2,1,"div",0),h["\u0275\u0275template"](2,Kd,4,2,"div",0),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length<=50),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.data.length>50)}}function Wd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",34),h["\u0275\u0275elementStart"](1,"a",35),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2," Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Qd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",34),h["\u0275\u0275elementStart"](1,"a",36),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addvance()})),h["\u0275\u0275text"](2," Advanced Search"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Jd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",37),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"vouchertype","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.vouchertypedata)}}function Xd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",38),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"ledger","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.ledgerData)}}function Zd(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",13),h["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",39),h["\u0275\u0275listener"]("select",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().onSelected(e,"group","name")})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("data",o.secondarygroup)}}function es(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",40),h["\u0275\u0275elementStart"](1,"div",41),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index,o=h["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==e?e:-1})),h["\u0275\u0275elementStart"](2,"div",29),h["\u0275\u0275text"](3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",29),h["\u0275\u0275text"](5,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",29),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"div",29),h["\u0275\u0275text"](9,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"div",29),h["\u0275\u0275text"](11,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"div",42),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",42),h["\u0275\u0275text"](16),h["\u0275\u0275pipe"](17,"number"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](18,"ledger-register-tree",43),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](o.name),h["\u0275\u0275advance"](10),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](14,8,o.debit,"1.2-2")),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](17,11,o.credit,"1.2-2")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("action",i.openinvoicemodel.bind(i))("getaction",i.getDetail.bind(i))("data",o.data)("isExpandAll","sub"==i.isExpand)("active",i.activeTree==a||"sub"==i.isExpand)}}function ts(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",44),h["\u0275\u0275elementStart"](1,"div",11),h["\u0275\u0275elementStart"](2,"div",45),h["\u0275\u0275elementStart"](3,"button",46),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().modelCondition()})),h["\u0275\u0275text"](4,"Cancel"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function ns(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",47),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",48),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",49),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var t=h["\u0275\u0275nextContext"]();return t.ledgerRegister[t.f2Date]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.ledgerRegister[o.f2Date])}}var os,as,is=".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:16px!important}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001;margin-left:32px}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 172px)}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}nb-card-body[_ngcontent-%COMP%]{padding:0}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left;height:23px}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:12.5%;max-width:12.5%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:14px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.8%}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:12px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-sub-stocktype[_ngcontent-%COMP%]{background-color:#6f8a96;color:#fff;font-size:12px;margin-left:3px}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-stockitem[_ngcontent-%COMP%]{background:#6f8a96;color:#fff;font-size:14px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-branch[_ngcontent-%COMP%]{background:#8daab8;color:#fff;font-size:14px}.x-branch[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-warehouse[_ngcontent-%COMP%]{background:#c8c8c8;color:#000;font-size:12px;margin-left:3px}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{width:24.5%}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.x-sub-stocktype[_ngcontent-%COMP%], .x-warehouse[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 280px);overflow:auto;width:100%}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}",rs=((as=function(){function e(t,n,o,i,r){a(this,e),this.common=t,this.modalService=n,this.user=o,this.cdr=i,this.accountService=r,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.search="",this.searchedData=[]}return r(e,[{key:"ngOnChanges",value:function(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}},{key:"searchValues",value:function(){var e=this;this.searchedData=this.data.filter((function(t){return t.name?t.name.toLowerCase().includes(e.search.toLowerCase()):!!t.ledgerName&&t.ledgerName.toLowerCase().includes(e.search.toLowerCase())})),this.cdr.detectChanges()}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(console.log("ctrl + d pressed",this.data[this.selectedRow]),(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++),e.ctrlKey&&"d"===t&&this.data.length&&-1!=this.selectedRow)return this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("voucher")?!this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("trip")&&this.openVoucherEdit(this.data[this.selectedRow].y_voucherid,6,this.data[this.selectedRow].y_vouchertype_id):this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("invoice")&&this.openinvoicemodeledit(this.data[this.selectedRow].y_voucherid,this.data[this.selectedRow].y_vouchertype_id,1),void e.preventDefault()}},{key:"openVoucherEdit",value:function(e,t,n){var o=this;console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e),e.delete&&o.getaction()})))}},{key:"openinvoicemodeledit",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.common.params={invoiceid:e,delete:0,newid:o,ordertype:t,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e),e.msg&&n.getaction()}))}}]),e}()).\u0275fac=function(e){return new(e||as)(h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](v.r),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](u.a))},as.\u0275cmp=h["\u0275\u0275defineComponent"]({type:as,selectors:[["ledger-register-tree"]],hostBindings:function(e,t){1&e&&h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,h["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[h["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","row x-sub-stocktype",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","row x-warehouse",3,"ngClass","dblclick","click",4,"ngIf"],[1,"row","x-sub-stocktype",2,"cursor","pointer",3,"click"],["class","col x-col",4,"ngIf"],["class","col x-col","style","text-align:right;",4,"ngIf"],[1,"col","x-col"],[1,"col","x-col",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"row","x-warehouse",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,Ud,3,2,"div",0),2&e&&h["\u0275\u0275property"]("ngIf",t.active)},directives:[D.u,D.t,as,D.r,F.d,F.r,F.u],pipes:[D.g,D.f],styles:[is]}),as),ls=((os=function(){function t(e,n,o,i,r,l,c){a(this,t),this.api=e,this.common=n,this.user=o,this.csvService=i,this.pdfService=r,this.accountService=l,this.modalService=c,this.activeTree=-1,this.fuelFilings=[],this.Ledgerregister=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.voucherEntries=[],this.flag=0,this.ledgerRegister={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},group:{name:"All",id:0},vouchertype:{name:"All",id:0},isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.activeId="vouchertype",this.activedateid="",this.vouchertypedata=[],this.ledgerData=[],this.secondarygroup=[],this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startdate",this.lastActiveId="",this.selectedRow=-1,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.ledgerRegister.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.ledgerRegister.enddate,this.common.refresh=this.refresh.bind(this),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(),this.sizeledger=1),this.common.currentPage="Ledger Register",this.common.handleModalSize("class","modal-lg","1250","px",0),this.getVoucherTypeList(),this.getAllLedger(),this.getSecondaryGoup()}return r(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.GetLedger()}},{key:"getAllLedger",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.ledgerData=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getVoucherTypeList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res======:",t.data),e.vouchertypedata=t.data,e.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"}),console.log("res type list",e.vouchertypedata)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getSecondaryGoup",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.secondarygroup=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"GetLedger",value:function(){var e=this,t={foid:123,deleted:this.deletedId};console.log("deleted ledger and simple",t),this.common.loading++,this.api.post("Accounts/GetLedgerdata",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.Ledgerregister=t.data}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getDetail",value:function(){var e=this;this.ledgerRegister.startdate=this.accountService.fromdate,this.ledgerRegister.enddate=this.accountService.todate;var t={ledgerid:this.ledgerRegister.ledger.id,vouchertyid:this.ledgerRegister.vouchertype.id,groupid:this.ledgerRegister.group.id,startDate:this.ledgerRegister.startdate,endDate:this.ledgerRegister.enddate,isamount:this.ledgerRegister.isamount,remarks:this.ledgerRegister.remarks,vouchercustcode:this.ledgerRegister.vouchercustcode,vouchercode:this.ledgerRegister.vouchercode,frmamount:this.ledgerRegister.frmamount,toamount:this.ledgerRegister.toamount};this.common.loading++,this.api.post("Accounts/getLedgerRegister",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.Ledgerregister=t.data,e.generalizeData()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"generalizeData",value:function(){var e=this;this.voucherEntries=[];for(var t=function(t){var n=e.Ledgerregister[t],o=n.y_path.split("--\x3e");n.labels=o.splice(1,o.length);var a=e.voucherEntries.findIndex((function(e){return e.name===o[0]}));-1===a?e.voucherEntries.push({name:o[0],data:[n],debit:parseFloat(n.y_dramunt),credit:parseFloat(n.y_cramunt)}):(e.voucherEntries[a].debit+=parseFloat(n.y_dramunt),e.voucherEntries[a].credit+=parseFloat(n.y_cramunt),e.voucherEntries[a].data.push(n))},n=0;n<this.Ledgerregister.length;n++)t(n);this.voucherEntries.map((function(t){return t.data=e.findChilds(t.data)})),console.log("voucherEntries",this.voucherEntries)}},{key:"findChilds",value:function(e){for(var t=this,n=[],o=0;o<e.length;o++)e[o].labels.length&&function(){var t=e[o],a=t.labels;t.labels=a.splice(1,a.length);var i=n.findIndex((function(e){return e.name===a[0]}));-1===i?n.push({name:a[0],data:[t],debit:t.y_ledger_name?parseFloat(t.y_dramunt):0,credit:t.y_ledger_name?parseFloat(t.y_cramunt):0}):(n[i].debit+=t.y_ledger_name?parseFloat(t.y_dramunt):0,n[i].credit+=t.y_ledger_name?parseFloat(t.y_cramunt):0,t.y_ledger_name&&n[i].data.push(t))}();if(n.length)return n.map((function(e){return{name:e.name,data:t.findChilds(e.data),debit:e.debit,credit:e.credit}}));var a=[],i=sn.groupBy(e,"y_ledger_name");for(var r in i)if(i[r].length>1){var l={name:r,ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dramunt)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cramunt)}),0)};a.push(l)}else{var c={name:r,ledgerName:r,data:i[r].map((function(e){return e.y_ledger_name="",e})),debit:i[r].reduce((function(e,t){return e+parseFloat(t.y_dramunt)}),0),credit:i[r].reduce((function(e,t){return e+parseFloat(t.y_cramunt)}),0)};a.push(c)}return a}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("vouchertype")?this.setFoucus("group"):this.activeId.includes("ledgerdaybook")?this.setFoucus("startdate"):this.activeId.includes("group")?this.setFoucus("ledgerdaybook"):this.activeId.includes("frmamount")?this.setFoucus("toamount"):this.activeId.includes("toamount")?this.setFoucus("vouchercode"):this.activeId.includes("vouchercode")?this.setFoucus("vouchercustcode"):this.activeId.includes("vouchercustcode")?this.setFoucus("remarks"):this.activeId.includes("remarks")?this.setFoucus("trantype"):this.activeId.includes("trantype")?this.setFoucus("frmamount"):this.activeId.includes("startdate")?(this.ledgerRegister.startdate=this.common.handleDateOnEnterNew(this.ledgerRegister.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.ledgerRegister.enddate=this.common.handleDateOnEnterNew(this.ledgerRegister.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledgerdaybook"),"trantype"==this.activeId&&this.setFoucus("group"),"remarks"==this.activeId&&this.setFoucus("vouchercustcode"),"vouchercustcode"==this.activeId&&this.setFoucus("vouchercode"),"vouchercode"==this.activeId&&this.setFoucus("toamount"),"toamount"==this.activeId&&this.setFoucus("frmamount"),"frmamount"==this.activeId&&this.setFoucus("trantype"),"group"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.Ledgerregister.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.Ledgerregister.length-1&&this.selectedRow++)}}},{key:"RowSelected",value:function(e){console.log("data of u",e),this.selectedName=e}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.ledgerRegister[o].includes("-"))t=this.ledgerRegister[o].split("-");else{if(!this.ledgerRegister[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.ledgerRegister[o].split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1];i=1==i.length?"0"+i:i;var r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.ledgerRegister[o]=a+n+i+n+r}},{key:"onSelected",value:function(e,t,n){this.ledgerRegister[t].name=e[n],this.ledgerRegister[t].id=e.id}},{key:"openVoucherDetail",value:function(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(At.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){}))}},{key:"openinvoicemodel",value:function(e,t,n,o){n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(console.log("invoice edit"),this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then((function(e){console.log("Data: invoice ",e)}))):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):n.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Rt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){console.log("Data: ",e)}))),this.common.currentPage="Ledger Register"}},{key:"openFuelEdit",value:function(e){var t=this;console.log("vch data new ##",e);var n=[];console.log("testing issue solved"),n.push(this.getVocherEditTime(e.y_voucherid)),n.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(n).then((function(n){t.common.params={vehId:e.y_vehicle_id,lastFilling:t.ledgerRegister.startdate,currentFilling:t.ledgerRegister.enddate,fuelstationid:e.y_refid,fuelData:t.fuelFilings,voucherId:e.y_voucherid,voucherData:t.VoucherEditTime},t.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data return: ",e)}))})).catch((function(e){console.log(e),t.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getDataFuelFillingsEdit",value:function(e,t,n){var o=this;return new Promise((function(a,i){var r={vehId:e,lastFilling:o.ledgerRegister.startdate,currentFilling:o.ledgerRegister.enddate,fuelstationid:t,voucherId:n};o.common.loading++,o.api.post("Fuel/getFeulfillings",r).subscribe((function(e){o.common.loading--,e.data.length?(o.fuelFilings=e.data,a()):o.common.showError("please Select Correct date")}),(function(e){console.log(e),o.common.loading--,o.common.showError(),i()}))}))}},{key:"openConsignmentVoucherEdit",value:function(e){var t=this,n={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",n).subscribe((function(n){console.log("trip expence",n),t.common.loading--,t.getVoucherSummary(n.data[0],e)}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"getVoucherSummary",value:function(e,t){var n=this,o=[];o.push(this.getPendingOnEditTrips(e.y_vehicle_id)),o.push(this.getVocherEditTime(e.y_voucher_id)),o.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&o.push(this.getTripsExpDriver(e.y_id)),o.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(o).then((function(o){n.showVoucherSummary(n.tripExpenseVoucherTrips,e,t)})).catch((function(e){console.log("Error:",e),n.common.showError("There is some technical error occured. Please Try Again!")}))}},{key:"getTripExpenseVoucherTripsData",value:function(e){var t=this;return new Promise((function(n,o){var a={voucherId:e.y_voucher_id,voucherDetail:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpenseVoucherTrips=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getPendingOnEditTrips",value:function(e){var t=this;return new Promise((function(n,o){var a={vehId:e};t.common.loading++,t.api.post("VehicleTrips/getPendingVehicleTrips",a).subscribe((function(e){console.log(e),t.common.loading--,t.TripEditData=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o()}))}))}},{key:"getVocherEditTime",value:function(e){var t=this;return new Promise((function(n,o){var a={vchId:e};t.common.loading++,t.api.post("Voucher/getVoucherDetail",a).subscribe((function(e){console.log(e),t.common.loading--,t.VoucherEditTime=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"getPendingTripsEditTime",value:function(e,t){var n=this;return new Promise((function(o,a){var i={vehId:t,vchrid:e};n.common.loading++,n.api.post("VehicleTrips/getPendingVehicleTripsEdit",i).subscribe((function(e){console.log(e),n.common.loading--,n.pendingDataEditTme=e.data,o()}),(function(e){console.log(e),n.common.loading--,n.common.showError(),a()}))}))}},{key:"getTripsExpDriver",value:function(e){var t=this;return new Promise((function(n,o){var a={tripVchrId:e};t.common.loading++,t.api.post("TripExpenseVoucher/getTripsExpDriver",a).subscribe((function(e){console.log(e),t.common.loading--,t.tripExpDriver=e.data,n()}),(function(e){console.log(e),t.common.loading--,t.common.showError(),o(e)}))}))}},{key:"addvance",value:function(){var e=this;this.common.params={isamount:this.ledgerRegister.isamount,remarks:this.ledgerRegister.remarks,vouchercustcode:this.ledgerRegister.vouchercustcode,vouchercode:this.ledgerRegister.vouchercode,frmamount:this.ledgerRegister.frmamount,toamount:this.ledgerRegister.toamount},this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data: ",t),t.response&&(e.ledgerRegister.isamount=t.ledger.isamount,e.ledgerRegister.remarks=t.ledger.remarks,e.ledgerRegister.vouchercustcode=t.ledger.vouchercustcode,e.ledgerRegister.vouchercode=t.ledger.vouchercode,e.ledgerRegister.frmamount=t.ledger.frmamount,e.ledgerRegister.toamount=t.ledger.toamount,e.flag=0!=t.ledger.toamount||0!=t.ledger.frmamount||""!=t.ledger.vouchercode||""!=t.ledger.vouchercustcode||""!=t.ledger.remarks||0!=t.ledger.isamount?1:0)}))}},{key:"showVoucherSummary",value:function(e,t,n){var o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Kn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"csvFunction",value:function(){var t=this,n=[];n.push(Object.assign({particular:"Particular",ledgerName:"Ledger Name",voucherCode:"Voucher Code",voucherCustCode:"Voucher Cust Code",voucherDate:"Voucher Date",voucherType:"Voucher Type",drAmount:"Dr Amount",crAmount:"Cr Amount"})),this.voucherEntries.forEach((function(o){n.push({particular:o.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:o.debit,crAmount:o.credit}),n.push.apply(n,e(t.generateCSVData(o.data,"  ")))})),this.csvService.jsonToExcel(n)}},{key:"generateCSVData",value:function(t,n){for(var o=[],a=0;a<t.length;a++){var i=t[a];i.name?(o.push({particular:n+i.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:i.debit,crAmount:i.credit}),o.push.apply(o,e(this.generateCSVData(i.data,n+"  ")))):o.push({particular:"",ledgerName:i.y_ledger_name,voucherCode:i.y_code,voucherCustCode:i.y_voucher_cust_code,voucherDate:i.y_voucher_date,voucherType:i.y_voucher_type_name,drAmount:i.y_dramunt,crAmount:i.y_cramunt})}return o}}]),t}()).\u0275fac=function(e){return new(e||os)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](kt.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](v.r))},os.\u0275cmp=h["\u0275\u0275defineComponent"]({type:os,selectors:[["ledgerregidter"]],decls:75,vars:15,consts:[[2,"margin","0px","border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row",2,"margin-left","0px"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","group","name","group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"margin","0px 0px 0px 0px","width","100%"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledgerdaybook","display","name",3,"data","select"],["targetId","group","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],["labels","",3,"action","getaction","data","isExpandAll","active"],[1,"modal-footer"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"span",2),h["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),h["\u0275\u0275element"](3,"i",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),h["\u0275\u0275element"](5,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275elementStart"](8,"input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9," Expand Main Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"span"),h["\u0275\u0275elementStart"](11,"input",8),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](12," Expand All"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",9),h["\u0275\u0275elementStart"](14,"div",10),h["\u0275\u0275elementStart"](15,"div",11),h["\u0275\u0275elementStart"](16,"div",12),h["\u0275\u0275elementStart"](17,"div",13),h["\u0275\u0275elementStart"](18,"label",14),h["\u0275\u0275text"](19,"Voucher"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"input",15),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.vouchertype.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"div",12),h["\u0275\u0275elementStart"](22,"div",13),h["\u0275\u0275elementStart"](23,"label",14),h["\u0275\u0275text"](24,"Group "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"input",16),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.group.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",12),h["\u0275\u0275elementStart"](27,"div",13),h["\u0275\u0275elementStart"](28,"label",14),h["\u0275\u0275text"](29,"Ledger"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.ledger.name=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](31,"div",11),h["\u0275\u0275elementStart"](32,"div",12),h["\u0275\u0275elementStart"](33,"div",13),h["\u0275\u0275elementStart"](34,"label",14),h["\u0275\u0275text"](35,"Starting Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](36,"input",18),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](37,"div",12),h["\u0275\u0275elementStart"](38,"div",13),h["\u0275\u0275elementStart"](39,"label",14),h["\u0275\u0275text"](40,"End Date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](41,"input",19),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"div",20),h["\u0275\u0275template"](43,Wd,3,0,"div",21),h["\u0275\u0275template"](44,Qd,3,0,"div",21),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](45,"div",20),h["\u0275\u0275elementStart"](46,"div",13),h["\u0275\u0275elementStart"](47,"button",22),h["\u0275\u0275listener"]("click",(function(){return t.getDetail()})),h["\u0275\u0275text"](48,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"div",23),h["\u0275\u0275elementStart"](50,"div",24),h["\u0275\u0275template"](51,Jd,2,1,"div",25),h["\u0275\u0275template"](52,Xd,2,1,"div",25),h["\u0275\u0275template"](53,Zd,2,1,"div",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](54,"div",26),h["\u0275\u0275elementStart"](55,"div",27),h["\u0275\u0275elementStart"](56,"div",28),h["\u0275\u0275elementStart"](57,"div",29),h["\u0275\u0275text"](58,"Particular "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](59,"div",29),h["\u0275\u0275text"](60,"Voucher Code"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](61,"div",29),h["\u0275\u0275text"](62,"Ref No "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](63,"div",29),h["\u0275\u0275text"](64,"Voucher Date "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](65,"div",29),h["\u0275\u0275text"](66,"Voucher Type "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](67,"div",29),h["\u0275\u0275text"](68,"Dr Amount "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](69,"div",29),h["\u0275\u0275text"](70,"Cr Amount "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](71,"div",30),h["\u0275\u0275template"](72,es,19,14,"div",31),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](73,ts,5,0,"div",32),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](74,ns,4,1,"div",33)),2&e&&(h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",t.isExpand),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.ledgerRegister.vouchertype.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.ledgerRegister.group.name),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.ledgerRegister.ledger.name),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("ngModel",t.accountService.fromdate),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngModel",t.accountService.todate),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==t.flag),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",1==t.flag),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.activeId.includes("group")),h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngForOf",t.voucherEntries),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.pageName),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.z,F.d,F.r,F.u,F.m,D.u,D.t,V.a,rs],pipes:[D.g],styles:[is]}),os),cs=function(e){return{highlight:e}};function ds(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",4),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.index;return h["\u0275\u0275nextContext"]().selectedRow=e})),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"td"),h["\u0275\u0275elementStart"](8,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().orderno[o]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"td"),h["\u0275\u0275elementStart"](10,"input",5),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().trailordr[o]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"td"),h["\u0275\u0275elementStart"](12,"input",6),h["\u0275\u0275listener"]("ngModelChange",(function(e){h["\u0275\u0275restoreView"](n);var o=t.index;return h["\u0275\u0275nextContext"]().isset[o]=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"button",7),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,o=t.index,a=h["\u0275\u0275nextContext"]();return a.changevalue(e.id,a.orderno[o],a.isset[o],a.trailordr[o])})),h["\u0275\u0275text"](14,"Submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,a=t.index,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](10,cs,i.selectedRow==a)),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](a+1),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.parent_groupname),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](o.groupname),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("name",i.order+"-"+a)("ngModel",i.orderno[a]),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("name",i.trial+"-"+a)("ngModel",i.trailordr[a]),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("name",i.isasset+"-"+a)("ngModel",i.isset[a])}}var ss,ms=((ss=function(){function e(t,n,o,i){a(this,e),this.api=t,this.common=n,this.user=o,this.modalService=i,this.reportList=[],this.orderno=[],this.isset=[],this.trailordr=[],this.common.refresh=this.refresh.bind(this),this.getRportList(),this.common.currentPage="Report Configure"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getRportList()}},{key:"getRportList",value:function(){var e=this;this.common.loading++,this.api.post("Accounts/GetReportConfig",{search:123}).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.reportList=t.data,e.reportList.map((function(t,n){e.orderno[n]=t.balsht_ord,e.trailordr[n]=t.trialbal_ord,e.isset[n]=t.balsht_isasset}))}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"changevalue",value:function(e,t,n,o){var a=this;console.log("set data",e,t,n);var i={id:e,orno:t,isset:n,trial:o};this.common.loading++,this.api.post("Accounts/updateReportConfig",i).subscribe((function(e){a.common.loading--,console.log("Res:",e.data),a.common.showToast("Updated Successfully"),a.getRportList()}),(function(e){a.common.loading--,console.log("Error: ",e),a.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||ss)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](_.a),h["\u0275\u0275directiveInject"](v.r))},ss.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ss,selectors:[["reportconfig"]],decls:19,vars:1,consts:[[2,"border","0px"],["id","table",1,"table","table-bordered","ml-0","mr-0","mt-4"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],["type","number",1,"form-control","inn","ref-input",3,"name","ngModel","ngModelChange"],["type","checkbox",1,"form-control","inn",3,"name","ngModel","ngModelChange"],[1,"form-control","inn","cngval",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"table",1),h["\u0275\u0275elementStart"](3,"thead",2),h["\u0275\u0275elementStart"](4,"tr"),h["\u0275\u0275elementStart"](5,"th"),h["\u0275\u0275text"](6,"S.No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"th"),h["\u0275\u0275text"](8,"Parent Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"th"),h["\u0275\u0275text"](10,"Group"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th"),h["\u0275\u0275text"](12,"Balance Sheet Order"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th"),h["\u0275\u0275text"](14,"Tial Balance Order"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"th"),h["\u0275\u0275text"](16,"Is Asset For Balance Sheet"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](17,"tbody"),h["\u0275\u0275template"](18,ds,15,12,"tr",3),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](18),h["\u0275\u0275property"]("ngForOf",t.reportList))},directives:[b.s,b.r,D.t,D.r,F.x,F.d,F.r,F.u,F.a],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:#000!important;color:#fff!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow-x:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.inn[_ngcontent-%COMP%]{min-width:60px;max-width:70px}.cngval[_ngcontent-%COMP%]{margin-left:135px!important;margin-top:-15px!important}"]}),ss);function us(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",15),h["\u0275\u0275listener"]("keydown",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().keyHandler(e)})),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275elementStart"](2,"div"),h["\u0275\u0275elementStart"](3,"input",17),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().f2Date=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",o.f2Date)}}var ps,gs,hs,vs,fs=((ps=function(){function e(t,n,o,i,r,l,c,d){a(this,e),this.api=t,this.common=n,this.user=o,this.excelService=i,this.csvService=r,this.accountService=l,this.http=c,this.modalService=d,this.headingName="",this.branchname="",this.branchData=[],this.branchType={name:"",id:0},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.type="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.currentPage="Tally Import",this.headingName=this.user._customer.name,this.branchname=this.accountService.selected.branch.name}return r(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.branchname=this.accountService.selected.branch.name,console.log("financial year 122 :",this.accountService.selected.financialYear.name.split("-")[1])}},{key:"onSelected",value:function(e,t,n){console.log("selected data",e),this.branchType.name=e[n],this.branchType.id=e.id,this.setFoucus("startDate")}},{key:"handleFileSelection",value:function(e,t){var n=this;if(e.target.files[0].size/1048576>50)return this.common.showError("File Should less than 50 mb"),!1;this.common.loading++,this.common.getBase64(e.target.files[0]).then((function(t){var o=e.target.files[0];if(console.log("file with extension",o),"text/xml"!=o.type)return n.common.showError("valid Format Are : xml"),!1;n.common.showToast("SuccessFull File Selected"),n.document=t,n.common.loading--}),(function(e){n.common.loading--,console.error("Base Err: ",e)}))}},{key:"keyHandler",value:function(e){var t=e.key.toLowerCase(),n=document.activeElement.id;if(console.log("Active event1111",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.f2Date,this.lastActiveId,n),this.handleVoucherDateOnEnter(n),void this.setFoucus(this.lastActiveId);"enter"!=t&&this.showDateModal&&(n.includes("startdate")||n.includes("enddate"))||"enter"==t&&(n.includes("branchType")?this.setFoucus("startDate"):n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")&&this.setFoucus("master"))}},{key:"handleVoucherDateOnEnter",value:function(e){var t=[],n="-",o=this.f2Date;if(o.includes("-"))t=o.split("-");else{if(!o.includes("/"))return void this.common.showError("Invalid Date Format!");t=o.split("/"),n="/"}var a=t[0];a=1==a.length?"0"+a:a;var i=t[1],r=(i=1==i.length?"0"+i:i)<"04"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1];console.log("financial year",r,i);var l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,console.log("Date: ",a+n+i+n+l),"startDate"==this.activedateid?this.startDate=a+n+i+n+l:this.endDate=a+n+i+n+l}},{key:"getTallyData",value:function(e){var t=this;this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate;var n={tallyType:this.type,file:this.document};this.common.loading++,this.api.post("Voucher/importTallyData",n).subscribe((function(e){console.log("set invoice",e.success),e.success&&t.common.showToast(e.data),t.common.loading--}),(function(e){console.log(e),t.common.loading--,t.common.showError()}))}},{key:"setFoucus",value:function(e){setTimeout((function(){var t=document.getElementById(e);console.log("Element: ",t),t.focus()}),100)}}]),e}()).\u0275fac=function(e){return new(e||ps)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](C.a),h["\u0275\u0275directiveInject"](p.a),h["\u0275\u0275directiveInject"](Ec.a),h["\u0275\u0275directiveInject"](qn.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](Fc.b),h["\u0275\u0275directiveInject"](v.r))},ps.\u0275cmp=h["\u0275\u0275defineComponent"]({type:ps,selectors:[["tallyimport"]],decls:29,vars:2,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-3","pl-6"],[1,"col-9"],[1,"row"],[1,"col-4"],[1,"form-group"],[1,"tjr-label"],["name","type",3,"ngModel","ngModelChange"],["value","master"],["value","voucher"],["type","file","name","myfile1","id","filePicker1",3,"change"],[1,"lessthan"],["id","master",1,"btn","w-100",3,"click"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-body",1),h["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"div",4),h["\u0275\u0275elementStart"](5,"div",5),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"label",7),h["\u0275\u0275text"](8,"Select Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"select",8),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.type=e})),h["\u0275\u0275elementStart"](10,"option",9),h["\u0275\u0275text"](11,"Ledger And Groups Xml(Master)"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"option",10),h["\u0275\u0275text"](13,"Vouchers Xml"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",5),h["\u0275\u0275elementStart"](15,"div",6),h["\u0275\u0275elementStart"](16,"label",7),h["\u0275\u0275text"](17,"Xml File"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"input",11),h["\u0275\u0275listener"]("change",(function(e){return t.handleFileSelection(e,1)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"div",5),h["\u0275\u0275elementStart"](20,"div",6),h["\u0275\u0275elementStart"](21,"span",12),h["\u0275\u0275text"](22,"*File Should be less than 50 Mb "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"div",4),h["\u0275\u0275elementStart"](24,"div",5),h["\u0275\u0275elementStart"](25,"div",6),h["\u0275\u0275elementStart"](26,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.getTallyData("true")})),h["\u0275\u0275text"](27,"submit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](28,us,4,1,"div",14)),2&e&&(h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngModel",t.type),h["\u0275\u0275advance"](19),h["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[b.s,b.r,F.D,F.r,F.u,F.w,F.G,D.u,F.d,F.m],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}span[_ngcontent-%COMP%]{display:block;border:1px solid #000;padding:8px;min-height:54px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.branchName[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:54px!important}.lessthan[_ngcontent-%COMP%]{border:0;color:red;margin-left:-114px}"]}),ps),bs=[{path:"",component:x,children:[{path:"dashboard",component:y},{path:"orders",component:ye},{path:"orders/:id/:name",component:ye},{path:"stock-types",component:Fe},{path:"stock-subtypes",component:ze},{path:"stockitem",component:qe},{path:"account",component:Ze},{path:"ledgers",component:ut},{path:"ledgers/:id",component:ut},{path:"company-branches",component:Ct},{path:"vouchers",component:Bt},{path:"vouchers/:id/:name",component:Bt},{path:"daybooks",component:dn},{path:"daybooks/:id",component:dn},{path:"ledgerview",component:Sn},{path:"ledgermapping",component:On},{path:"trip-expense-tally",component:Nc},{path:"invoiceregister",component:Rn},{path:"trip-voucher-expense",component:$n},{path:"trip-voucher-expense/:id",component:$n},{path:"outstanding",component:bo},{path:"balancesheet",component:Pi},{path:"profitloss",component:Za},{path:"stockavailable",component:Fi},{path:"ware-house",component:Li},{path:"cashbook",component:Qi},{path:"bank-books",component:dr},{path:"city",component:gr},{path:"storerequisitions",component:Or},{path:"trading",component:Ca},{path:"openingstock",component:Tr},{path:"storerequisitions/:id",component:Or},{path:"trialbalance",component:gl},{path:"costcenter",component:xl},{path:"cost-center-report",component:Nl},{path:"voucheredited",component:Kl},{path:"fuelfillings",component:Xl},{path:"vehicle-cost-center-list",component:tc},{path:"mapped-fuel-voucher",component:dc},{path:"vehicle-ledgers",component:pc},{path:"daybookpending",component:Mc},{path:"gstreport",component:Vc},{path:"tallyexport",component:Ac},{path:"statics",component:Zc},{path:"ledgerapprove",component:ld},{path:"account-entry-approval",component:ud},{path:"stoclsummary",component:$o},{path:"country",component:fd},{path:"state",component:_d},{path:"ledgerregidter",component:ls},{path:"service/:id/:name",component:Ut.a},{path:"reportconfig",component:ms},{path:"tallyimport",component:fs}]}],xs=((gs=function e(){a(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:gs}),gs.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||gs)},imports:[[d.g.forChild(bs)],d.g]}),gs),ys=i("vTDv"),Cs=((hs=function e(){a(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:hs}),hs.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||hs)},imports:[[ys.a]]}),hs),_s=i("FUS3"),Ss=i("uPX2"),ks=i("x/J1"),Ms=i("FJ+T"),Es=i("biR6"),ws=i("KWzY"),Ps=i("SXPc"),Os=i("KCPn"),Is=i("KuNN"),Ds=i("mgFL"),Vs=i("7acK"),Fs=i("BiDX"),Ts=i("csNM"),Bs=i("7tAi"),As=i("ec4X"),Ls=i("9gLZ"),Rs=i("s8ed"),js=i("9MgD"),zs=i("9OK8"),Ns=i("s3aq"),Gs=i("ubjK"),Ys=((vs=function e(){a(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:vs}),vs.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||vs)},imports:[[xs,ys.a,Cs,_s.a,qo.g]]}),vs);h["\u0275\u0275setComponentScope"](Xa,[d.h,d.d,d.f,d.e,d.i,D.r,D.s,D.t,D.u,D.B,D.x,D.y,D.z,D.A,D.v,D.w,F.H,F.w,F.G,F.d,F.x,F.A,F.a,F.D,F.E,F.z,F.r,F.s,F.C,F.n,F.m,F.y,F.b,F.e,F.u,F.v,F.t,F.h,F.j,F.i,F.k,F.f,b.s,b.r,b.t,b.v,b.kb,b.D,b.u,b.q,b.L,b.K,b.O,b.P,b.Hb,b.Gb,b.lb,b.W,b.X,b.Pb,b.f,b.g,b.nb,b.ob,b.tb,b.ub,b.vb,b.x,b.db,b.z,v.a,v.G,v.J,v.H,v.I,v.K,v.c,v.d,v.f,v.O,v.N,v.e,v.Q,v.g,v.h,v.i,v.q,v.j,v.k,v.l,v.o,v.n,v.m,v.y,v.u,v.t,v.v,v.w,v.x,v.z,v.A,v.B,v.C,v.D,v.E,v.F,v.L,v.M,v.P,v.V,v.W,v.X,v.Y,v.Z,v.p,v.U,v.R,v.S,v.T,b.fb,b.m,b.o,b.Cb,b.Bb,b.Eb,b.Fb,b.k,b.R,b.S,b.U,b.H,b.I,b.a,b.c,b.d,b.b,b.i,b.yb,b.zb,b.hb,b.ib,b.qb,b.rb,b.cb,b.ab,b.bb,b.Nb,Ss.a,ks.a,Ms.a,Es.a,ws.a,Ps.a,Os.a,Is.a,Ds.a,f.a,Vs.a,Fs.a,jn.a,Lc.a,V.a,Ts.a,Bs.a,Mt.a,As.a,Ls.b,qo.b,qo.a,qo.d,qo.e,x,ye,Fe,ze,qe,Ze,ut,Ct,Bt,dn,Sn,On,Rn,$n,bo,Pi,Za,Fi,Li,Qi,dr,gr,Or,Ca,Tr,gl,xl,Nl,Kl,Xl,tc,dc,pc,Mc,Vc,Ac,Nc,Zc,ld,ud,$o,fd,_d,ls,rs,fo,Ut.a,ms,wi,ya,Xa,pl,fs],[D.b,D.I,D.q,D.l,D.F,D.g,D.D,D.G,D.d,D.f,D.j,D.k,D.m,Rs.a,js.a,zs.a,Ns.a,Gs.a])}}])}();