(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{dgmN:function(t,e,n){"use strict";n.r(e),n.d(e,"PagesModule",(function(){return id}));var a=n("H+bZ"),o=n("flj8"),i=n("qfBg"),r=n("8Y7J"),s=n("tKwJ"),l=n("iInd"),d=n("IAMq"),c=n("SVse");function h(t,e){if(1&t&&r["\u0275\u0275element"](0,"nb-menu",1),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("items",t.user._menu.pages)}}let m=(()=>{class t{constructor(t,e,n,a,o){this.menuService=t,this.api=e,this.accountService=n,this.user=a,this.router=o,this.accountService.branches.length||(this.getBranches(),this.getFinancial()),"admin"!=this.user._loggedInBy||this.user._customer.id||(alert("Select Fo Admin First"),this.router.navigate(["/admin"]))}ngAfterViewInit(){document.getElementsByTagName("nb-sidebar")[0].onclick=t=>{let e=t.srcElement;"menu-title"===e.className&&"SPAN"===e.tagName&&this.handleMenuClick(e.parentElement.text,e.parentElement.hash.replace(/#\//,""))}}handleMenuClick(t,e){if("Vehicle Tracking"===t){let t="http://fvts.in/#/auth/checkloginandredirect/?token="+localStorage.getItem("DOST_axesToken")+"&frompage="+window.location.href;window.location.href=t}}getBranches(){this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(t=>{console.log("Branches :",t.data),this.accountService.branches=t.data},t=>{console.log("Error: ",t)})}getFinancial(){this.api.post("Suggestion/GetFinancialYear",{search:123}).subscribe(t=>{console.log("financial :",t.data),this.accountService.financialYears=t.data,this.accountService.financialYears.map(t=>{t.name.split("-")[0]==(new Date).getFullYear()&&(this.accountService.selected.financialYear=t)})},t=>{console.log("Error: ",t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](s.Z),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.c))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[["autoCollapse","true",3,"items",4,"ngIf"],["autoCollapse","true",3,"items"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"ngx-sample-layout"),r["\u0275\u0275template"](1,h,1,1,"nb-menu",0),r["\u0275\u0275element"](2,"router-outlet"),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.user._menu.pages.length))},directives:[d.a,c.u,l.h,s.W],styles:['.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var p=n("vTDv");let g=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[p.a]]}),t})();var b=n("mNmA"),u=n("UTcu"),f=n("OlR4"),x=n("nGd9"),v=n("6Jfz"),C=n("tUv6"),y=n("G0yt"),_=n("wD9S");function S(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",1),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let M=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.kpis=[],this.allKpis=[],this.searchTxt="",this.filters=[],this.table={data:{headings:{vehicle:{title:"Vehicle",placeholder:"Vehicle"},status:{title:"Status",placeholder:"Status"},hrs:{title:"Hrs",placeholder:"Hrs"},trip:{title:"Trip",placeholder:"Trip"},kmp:{title:"Kmp",placeholder:"Kmp"},location:{title:"location",placeholder:"Location"}},columns:[]},settings:{hideHeader:!0}},this.getKPIS(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){console.log("ionViewDidLoad DriverKpisPage")}refresh(){console.log("Refresh"),this.getKPIS()}getKPIS(){this.common.loading++,this.api.get("VehicleKpis").subscribe(t=>{this.common.loading--,console.log(t),this.allKpis=t.data,this.kpis=t.data,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}showLocation(t){if(!t.x_tlat)return void this.common.showToast("Vehicle location not available!");const e={lat:t.x_tlat,lng:t.x_tlong,name:"",time:""};console.log("Location: ",e),this.common.params={location:e,title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})}findVehicle(){this.kpis=this.searchTxt?this.allKpis.filter(t=>t.x_showveh.toUpperCase().includes(this.searchTxt.toUpperCase())):this.allKpis}findFilters(){this.filters=["all"],this.allKpis.map(t=>{-1==this.filters.indexOf(t.showprim_status)&&this.filters.push(t.showprim_status)})}showDetails(t){this.common.params={kpi:t},this.modalService.open(x.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="kpisDetails"}getLR(t){this.common.loading++,this.api.post("FoDetails/getLorryDetails",{x_lr_id:t.x_lr_id}).subscribe(t=>{this.common.loading--,this.showLR(t.data[0]),console.log("data",t)},t=>{this.common.loading--,console.log(t)})}showLR(t){let e=[{name:"Lr",image:t.lr_image},{name:"Invoice",image:t.invoice_image},{name:"Other_Image",image:t.other_image}];console.log("image",e),this.common.params={images:e,title:"LR Details"},this.modalService.open(C.a,{size:"lg",container:"nb-layout"})}getTableColumns(){let t=[];return this.allKpis.map(e=>{t.push({vehicle:{value:e.x_showveh,action:this.showDetails.bind(this,e)},status:{value:e.showprim_status+(e.showsec_status?","+e.showsec_status:""),action:this.showDetails.bind(this,e)},hrs:{value:e.x_hrssince,class:e.x_hrssince>=24?"red":"",action:this.showDetails.bind(this,e)},trip:{value:this.getTripStatusHTML(e),action:this.showDetails.bind(this,e),isHTML:!0},kmp:{value:e.x_kmph,class:e.x_kmph<20?"pink":"",action:this.showDetails.bind(this,e)},location:{value:e.Address,action:this.showLocation.bind(this,e)},rowActions:{click:this.showDetails.bind(this,e)}})}),t}getTripStatusHTML(t){let e="<div>";return e+=0==t.trip_status_type?`\n      \x3c!-- Heading --\x3e\n        <i class="fa fa-arrow-circle-right complete"></i>\n        <span class="circle">${t.x_showtripstart}</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>${t.x_showtripend}</span>\n      `:1==t.trip_status_type?`\n      \x3c!-- Loading --\x3e\n        <span class="circle">${t.x_showtripstart}</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>${t.x_showtripend}</span>\n      `:2==t.trip_status_type?`\n      \x3c!-- Onward --\x3e\n        <span>${t.x_showtripstart}</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>${t.x_showtripend}</span>\n      `:3==t.trip_status_type?`\n        \x3c!-- Unloading --\x3e\n          <span>${t.x_showtripstart}</span>\n          <i class="icon ion-md-arrow-round-forward"></i>\n          <span class="circle">${t.x_showtripend}</span>\n        `:4==t.trip_status_type?`\n      \x3c!-- Complete --\x3e\n        <span>${t.x_showtripstart}</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>${t.x_showtripend}</span>\n        <i class="fa fa-check-circle complete"></i>\n      `:`\n      \x3c!-- Ambigous --\x3e\n        <span>${t.x_showtripstart}</span>\n        <span class="icon ion-md-route-arrow">-</span>\n        <span>${t.x_showtripend}</span>\n      `,e+"</div>"}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-kpis"]],decls:7,vars:1,consts:[[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h2"),r["\u0275\u0275text"](3,"Vehicle KPIs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275template"](5,S,1,2,"smart-table",0),r["\u0275\u0275element"](6,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.allKpis&&e.allKpis.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:[".headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]     .pink{background:pink}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var w=n("LEqX"),O=n("xZ18");function P(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td",11),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275elementStart"](10,"span",12),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).updateNotificationStatus(n.ticket_id,2,n.msg,n.fo_ticket_allocation_id)})),r["\u0275\u0275text"](11,"Accept"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"span",13),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).updateNotificationStatus(n.ticket_id,-2,n.msg,n.fo_ticket_allocation_id)})),r["\u0275\u0275text"](13,"Deny"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.msg),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.common.findRemainingTime(t.remaining_time))}}function E(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function k(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"table",7),r["\u0275\u0275elementStart"](2,"thead",8),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Remaining Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Action"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"tbody"),r["\u0275\u0275template"](15,P,14,4,"tr",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](16,E,2,0,"div",10),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",t.newTickets),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.status&&!t.newTickets.length&&t.showMsg)}}function T(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).showDetails(n)})),r["\u0275\u0275elementStart"](1,"td",11),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275elementStart"](10,"span"),r["\u0275\u0275elementStart"](11,"u",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).oprnInfoModel(n)})),r["\u0275\u0275text"](12,"info"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.msg),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.common.findRemainingTime(t.remaining_time))}}function D(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function I(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"table",7),r["\u0275\u0275elementStart"](2,"thead",8),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Remaining Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Action"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"tbody"),r["\u0275\u0275template"](15,T,13,4,"tr",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](16,D,2,0,"div",10),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",t.openTickets),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.status&&!t.openTickets.length&&t.showMsg)}}function F(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td",11),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td",19),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).showTrailList(n)})),r["\u0275\u0275text"](11,"show"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"td"),r["\u0275\u0275elementStart"](13,"span",19),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).claimTicket(n)})),r["\u0275\u0275text"](14,"Claim"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.msg),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](9,4,t.addtime,"dd MMM HH:mm"))}}function A(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function V(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"table",18),r["\u0275\u0275elementStart"](2,"thead",8),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Add Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Trails"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"th"),r["\u0275\u0275text"](15,"Claim"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"tbody"),r["\u0275\u0275template"](17,F,15,7,"tr",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](18,A,2,0,"div",10),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",t.tickets),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.status&&!t.tickets.length&&t.showMsg)}}let L=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.user=a,this.notifications=[],this.status=0,this.newTickets=[],this.openTickets=[],this.showMsg=!1,this.tickets=[],this.countDownFlag=!1,this.claimTicketGroups=[],this.claimDrivers=[],this.dis_all="new",this.status=localStorage.getItem("STATUS")?parseInt(localStorage.getItem("STATUS")):0,console.log("Status:",this.status),localStorage.removeItem("STATUS"),this.getNotifications(),this.getClaimTickets(),this.countDownFlag=!0,this.common.refresh=this.refresh.bind(this),setTimeout(this.countDown.bind(this),3e4)}ngOnInit(){}refresh(){this.getNotifications(),this.getClaimTickets()}getNotifications(){this.newTickets=[],++this.common.loading,this.api.get("FoTickets/getPendingTicketList?aduserid="+this.user._details.id,{}).subscribe(t=>{--this.common.loading,console.log(t),this.notifications=t.data||[],this.showMsg=!0,this.newTickets=[],this.openTickets=[],this.notifications.map(t=>{0==t.status?this.newTickets.push(t):2==t.status&&this.openTickets.push(t)}),this.setTab()},t=>{--this.common.loading,console.error(t)})}getClaimTickets(){++this.common.loading,this.api.get("FoTickets/getClaimTickets?aduserid="+this.user._details.id,{}).subscribe(t=>{--this.common.loading,console.log(t),t.success&&(this.tickets=t.data?t.data:[],this.setTab())},t=>{--this.common.loading,console.error(t)})}setTab(){this.dis_all=this.newTickets.length>0?"new":this.tickets.length>0?"claim":this.openTickets.length>0?"open":"new"}claimTicket(t){confirm("Are you sure to claim this ticket?")&&this.sendClaimRequest(t)}sendClaimRequest(t){let e={ticket_id:t.ticket_id,msg:t.msg,aduserid:this.user._details.id};console.log("Params",e),this.common.loading++,this.api.post("FoTickets/setClaimInfo",e).subscribe(t=>{--this.common.loading,console.log(t),this.getNotifications(),this.getClaimTickets()},t=>{--this.common.loading,console.error(t),this.common.showError()})}updateNotificationStatus(t,e,n,a){let o={ticket_id:t,fo_ticket_allocation_id:a,status:e,aduserid:this.user._details.id,remark:"",msg:n};++this.common.loading,console.log("Params:",o),this.api.post("FoTickets/updateTicketStatus",o).subscribe(t=>{console.log(t),this.common.showToast(t.msg),--this.common.loading,this.getNotifications()},t=>{console.log(t),this.common.showError(),--this.common.loading})}countDown(){if(!this.countDownFlag)return;let t=[];this.notifications.map((e,n)=>{e.remaining_time<60&&(e.cc="red"),e.remaining_time<0&&t.push(n)}),t.map(t=>{}),setTimeout(this.countDown.bind(this),3e4)}ticketCount(t){let e=0;return this.notifications.map(n=>{n.status===t&&e++}),e}showTrailList(t){++this.common.loading,this.api.get("FoTickets/getTrailLists?ticket_id="+t.ticket_id).subscribe(t=>{console.log(t),--this.common.loading;let e=t.data;if(e){let n="trail";console.log("DataTrail:",t.data),this.common.params={trailList:e,headers:["#","Employee Name","Spent Time","Status"],type:n},this.modalService.open(w.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="Trails"}else this.common.showError("No record found for this search criteria.")},t=>{--this.common.loading,console.log(t),this.common.showError()})}showDetails(t){console.log(t)}oprnInfoModel(t){console.log("ticket",t),this.common.params={ticket:{id:t.ticket_id,priType:t.pri_type}},this.modalService.open(O.a,{size:"lg",container:"nb-layout"}).result.then(t=>{console.log("data",t),t.response&&this.refresh()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tickets"]],decls:17,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[4,"ngIf"],[1,"table","table-hover","tblnew"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[1,"text-primary","accept",3,"click"],[1,"text-danger","deny",3,"click"],["role","alert",1,"no-data","alert","alert-danger"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[2,"color","blue","cursor","pointer",3,"click"],[1,"table","table-hover","tblclaim"],[2,"cursor","pointer","color","blue",3,"click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Tickets"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"ul",3),r["\u0275\u0275elementStart"](8,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="new"})),r["\u0275\u0275text"](9," New "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"li",5),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="open"})),r["\u0275\u0275text"](11," Open "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"li",5),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="claim"})),r["\u0275\u0275text"](13," Claim "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,k,17,2,"div",6),r["\u0275\u0275template"](15,I,17,2,"div",6),r["\u0275\u0275template"](16,V,19,2,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngClass","new"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","open"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","claim"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf","new"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","open"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","claim"==e.dis_all))},directives:[s.s,s.v,s.r,c.r,c.u,c.t],pipes:[c.f],styles:['.accept[_ngcontent-%COMP%], .deny[_ngcontent-%COMP%]{cursor:pointer}.deny[_ngcontent-%COMP%]{margin-left:8px}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:180px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 250px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:180px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:40%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:40%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:15%!important;padding-left:15px!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:15%!important;padding-left:20px!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:15%!important;padding-left:20px!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:50%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:50%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:15%!important;padding-left:20px!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:15%!important;padding-left:20px!important}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var z=n("LvDl");function j(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"th",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td",10),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).showTrailList(n)})),r["\u0275\u0275elementStart"](10,"span",11),r["\u0275\u0275text"](11,"show"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.msg),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.common.findRemainingTime(t.remaining_time))}}function R(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function H(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"table",4),r["\u0275\u0275elementStart"](2,"thead",5),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Remaining Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Trails"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"tbody",6),r["\u0275\u0275listener"]("scroll",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().test(e)})),r["\u0275\u0275template"](15,j,12,4,"tr",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](16,R,2,0,"div",8),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",t.allOpenTickets),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.status&&!t.allOpenTickets.length&&t.showMsg)}}function N(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"th",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td",10),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).showTrailList(n)})),r["\u0275\u0275elementStart"](10,"span",11),r["\u0275\u0275text"](11,"show"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.msg),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.addtime)}}function U(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function G(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"table",4),r["\u0275\u0275elementStart"](2,"thead",5),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Add Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Trails"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"tbody"),r["\u0275\u0275template"](15,N,12,4,"tr",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](16,U,2,0,"div",8),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",t.allClaimTickets),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.status&&!t.allClaimDrivers.length&&t.showMsg)}}let B=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.status=0,this.showMsg=!1,this.allClaimTickets=[],this.allClaimTicketGroups=[],this.allClaimDrivers=[],this.allOpenTickets=[],this.allOpenTicketGroups=[],this.allOpenDrivers=[],this.getAllOpenTickets(),this.getAllClaimTickets(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getAllOpenTickets(),this.getAllClaimTickets()}getAllClaimTickets(){++this.common.loading,this.api.get("FoTickets/getAllClaimTickets?aduserid="+this.user._details.id,{}).subscribe(t=>{--this.common.loading,console.log(t),this.allClaimTickets=t.data,this.allClaimTicketGroups=z.groupBy(t.data,"regno"),console.log("allClaimTicketGroups",this.allClaimTicketGroups),this.allClaimDrivers=Object.keys(this.allClaimTicketGroups),console.log("keys",this.allClaimDrivers)},t=>{--this.common.loading,console.error(t)})}getAllOpenTickets(){++this.common.loading,this.api.get("FoTickets/getAllOpenTickets?aduserid="+this.user._details.id,{}).subscribe(t=>{--this.common.loading,console.log(t),this.allOpenTickets=t.data,this.allOpenTicketGroups=z.groupBy(t.data,"regno"),console.log("allOpenTicketGroups",this.allOpenTicketGroups),this.allOpenDrivers=Object.keys(this.allOpenTicketGroups),console.log("keys",this.allOpenDrivers),this.showMsg=!0},t=>{--this.common.loading,console.error(t)})}showTrailList(t){++this.common.loading,this.api.get("FoTickets/getTrailLists?ticket_id="+t.ticket_id).subscribe(t=>{console.log(t),--this.common.loading;let e=[];t.data.map((t,n)=>{e.push([n,t.employeename,t.spent_time,t.status])}),this.common.params={title:"Trail List",headings:["#","Employee Name","Spent Time","Status"],data:e},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})},t=>{--this.common.loading,console.log(t),this.common.showError()})}forwardClaimTickets(t){console.log("Get Data");let e=[];this.allClaimTicketGroups[t].map(t=>{e.push({ticketId:t.ticket_id,msg:t.msg})})}test(t){console.log("Event",t)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tickets-all"]],decls:10,vars:2,consts:[[2,"border","0px"],["tabTitle","All open Tickets"],[4,"ngIf"],["tabTitle","Parked Tickets"],[1,"table","table-bordered","table-hover"],[1,"thead"],[3,"scroll"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[3,"click"],[1,"btn","btn-success"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"All Tickets"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"nb-tabset"),r["\u0275\u0275elementStart"](6,"nb-tab",1),r["\u0275\u0275template"](7,H,17,2,"div",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"nb-tab",3),r["\u0275\u0275template"](9,G,17,2,"div",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",0==e.status),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0==e.status))},directives:[s.s,s.v,s.r,s.Hb,s.Gb,c.u,c.t],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 5px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tabset{border-bottom:2px solid #26a69a!important;margin-bottom:15px!important}[_nghost-%COMP%]     .tabset li a{background-color:#26a69a;color:#fff!important;font-weight:400!important;border-radius:5px 5px 0 0;margin-right:8px;border:2px solid #26a69a;padding:5px 10px!important;position:relative;font-size:14px}[_nghost-%COMP%]     .tabset li a:before{content:none!important;display:none!important}[_nghost-%COMP%]     .tabset .active a{background-color:#fff;color:#26a69a!important}[_nghost-%COMP%]     .tabset .active a:after{content:""!important;position:absolute;background:#fff;width:100%;height:6px;bottom:-5px;left:0;border-radius:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:270px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 218px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:270px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 15px;height:auto;color:#fff;text-transform:capitalize;margin:0;border-radius:3px;border:0;-webkit-box-shadow:0 5px 10px 0 rgba(0,0,0,.2);box-shadow:0 5px 10px 0 rgba(0,0,0,.2);cursor:pointer;font-weight:400;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var $=n("i7b3"),W=n("kmV6"),K=n("1hw/"),q=n("pc3W"),J=n("JU80"),Y=n("oCQm"),Z=n("Dx+k"),Q=n("JOfS"),X=n("uk+R"),tt=n("s7LF"),et=n("csNM");function nt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",33),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().openGenerateLr(!1)})),r["\u0275\u0275text"](1,"LR Generate"),r["\u0275\u0275elementEnd"]()}}function at(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",34),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.receipts)("settings",t.table.settings)}}function ot(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",35),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let it=(()=>{class t{constructor(t,e,n,a,o,i,r){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.route=o,this.modalService=i,this.renderer=r,this.receipts=[],this.table=null,this.viewImages=null,this.activeImage="lr_image",this.viewType="allLR",this.lrType="2",this.lrCategory=-1,this.vehicleType=-1,this.searchValue=null,this.searchString=null,this.endDate=new Date,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.getLorryReceipts(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getLorryReceipts()}getLorryReceipts(){if(this.endDate<this.startDate)return this.common.showError("End Date Should be greater than Start Date"),0;let t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate),type:this.viewType,status:this.lrType,lrCategory:this.lrCategory,vehicleType:this.vehicleType,searchValue:this.searchValue,searchString:this.searchString};console.log("api params Data:",t),this.table=null,this.receipts=[],++this.common.loading,this.api.post("FoDetails/getLorryStatus",t).subscribe(t=>{--this.common.loading,console.log("Res000000:",t),t.data?(this.receipts=t.data,console.log("Receipt",this.receipts),this.table=this.setTable()):this.receipts=[]},t=>{--this.common.loading,console.log("Err:",t)})}getImage(t){console.log(t);let e=[{name:"LR",image:t.lr_image},{name:"Invoice",image:t.invoice_image},{name:"Other Image",image:t.other_image}];console.log("images:",e),this.common.params={images:e,title:"LR Details"},this.modalService.open(C.a,{size:"lg",container:"nb-layout"})}getPodImage(t){console.log("val===",t),this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:t.pod_docid},title:"docImage"},this.modalService.open(C.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}RefData(){this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:""},title:"docImage"},this.modalService.open(C.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}printLr(t){this.common.params={previewData:{title:"Lorry Receipt",previewId:null,refId:t.lr_id,refType:"LR_PRT",autoPrint:!0}},console.log("receipts",t),this.modalService.open(X.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(t=>{console.log("Date:",t)})}addReceipts(){this.modalService.open(Z.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{}).catch(t=>console.log("Error:",t))}addTransportAgent(){this.modalService.open(Q.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{}).catch(t=>console.log("Error:",t))}setTable(){return{receipts:{headings:{LRNo:{title:"LR No",placeholder:"LR No"},LRDate:{title:"LR Date",placeholder:"LR Date",type:"date"},VehiceNo:{title:"Vehicle No",placeholder:"Vehicle No"},Consigner:{title:"Consigner",placeholder:"Consigner"},Consignee:{title:"Consignee",placeholder:"Consignee"},TA:{title:"TA",placeholder:"TA"},Supplier:{title:"Supplier",placeholder:"Supplier"},Source:{title:"Source",placeholder:"Source"},Destination:{title:"Destination",placeholder:"Destination"},AddTime:{title:"AddTime",placeholder:"AddTime",type:"date"},Revenue:{title:"Revenue",placeholder:"Revenue"},Expense:{title:"Expense",placeholder:"Expense"},LRImage:{title:"LRImage",placeholder:"LRImage"},AddedBy:{title:"AddedBy",placeholder:"AddedBy"},details:{title:"POD",placeholder:"POD"},Action:{title:"Action",placeholder:"Action"},Invoice:{title:"Invoice",placeholder:"Invoice"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}getTableColumns(){let t=[];return this.receipts.map(e=>{let n={LRId:{value:e.lr_id},VehiceNo:{value:e.regno},LRNo:{value:e.lr_no},LRDate:{value:e.lr_date},Consigner:{value:e.lr_consigner_name},Consignee:{value:e.lr_consignee_name},TA:{value:e.lr_ta_name},Supplier:{value:e.lr_supplier_name},Source:{value:e.lr_source},Destination:{value:e.lr_destination},AddTime:{value:this.datePipe.transform(e.addtime,"dd MMM HH:mm ")},Revenue:e.revenue_amount>0?{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr icon i-green",action:this.lrRates.bind(this,e,0)},{class:"fa fa-check icon i-green ml-2",action:this.openRevenueModal.bind(this,e,0)}]}:{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr i-red-cross",action:this.lrRates.bind(this,e,0)},{class:"fa fa-times-circle i-red-cross ml-2",action:this.openRevenueModal.bind(this,e,0)}]},Expense:e.expense_amount>0?{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr icon i-green",action:this.lrRates.bind(this,e,1)},{class:"fa fa-check icon i-green ml-2",action:this.openExpenseModal.bind(this,e,1)}]}:{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr i-red-cross",action:this.lrRates.bind(this,e,1)},{class:"fa fa-times-circle i-red-cross ml-2",action:this.openExpenseModal.bind(this,e,1)}]},LRImage:e.lr_image?{value:"",class:"text-center",isHTML:!1,action:null,icons:[{class:"fa fa-eye icon",action:this.getImage.bind(this,e)}]}:{value:"",class:"text-center",isHTML:!1,action:null,icons:[{class:"fa fa-times-circle i-red-cross"}]},AddedBy:{value:e.name},details:{value:"",action:null,isHTML:!1,icons:[{class:e.pod_docid?"far fa-image i-green icon mr-1":"far fa-image i-red-cross mr-1",action:e.pod_docid?this.getPodImage.bind(this,e):null},{class:e.poddetails?"fa fa-list icon i-green mr-1":"fa fa-list i-red-cross mr-1",action:this.openPodDeatilsModal.bind(this,e)},{class:e.podreceived?"fa fa-check icon i-green":"fa fa-check   i-red-cross",action:null}]},Action:{value:"",isHTML:!0,action:null,icons:this.actionIcons(e)},Invoice:{value:"",isHTML:!0,action:null,icons:[{class:e._frinvid?"fa fa-print icon":e.revenue_amount>0?"fa fa-pencil-square-o icon edit ":"",action:e._frinvid>0?this.invoice.bind(this,e):e.revenue_amount>0?this.invoiceFromLr.bind(this,e):""}]}};t.push(n)}),t}actionIcons(t){let e=[{class:"fa fa-print icon",action:this.printLr.bind(this,t)},{class:"fa fa-handshake-o  icon",action:this.tripSettlement.bind(this,t)}];return this.user.permission.edit&&e.push({class:t.is_locked?"":"fa fa-pencil-square-o icon edit",action:this.openGenerateLr.bind(this,t)}),this.user.permission.delete&&e.push({class:t.is_locked?"":"fa fa-trash icon",action:this.deleteLr.bind(this,t)}),e}deleteLr(t){console.log("Lr dddd",t),confirm("Are You Sure you want to delete LR?")&&(this.common.loading++,this.api.post("LorryReceiptsOperation/deleteGeneratedLr",{lrId:t.lr_id,vehicleId:t.vid}).subscribe(t=>{this.common.loading--,console.log("response:",t),t.data[0].r_id>0&&(this.common.showToast("Sucessfully Deleted",1e4),this.getLorryReceipts())},t=>{this.common.loading--,console.log(t)}))}tripSettlement(t){console.log("======",t),this.common.params={refData:{refId:t.lr_id,refType:11}},this.modalService.open(K.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{})}openGenerateLr(t){this.common.params={lrData:{lrId:t.lr_id}},this.modalService.open($.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getLorryReceipts()})}lrRates(t,e){let n=!0;(1==e&&t.is_adv_expense>0||0==e&&t.is_adv_revenue>0)&&(n=!1),this.common.params={rate:{lrId:t.lr_id,rateType:e,generalModal:n}},this.modalService.open(W.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getLorryReceipts()})}openExpenseModal(t){let e={refernceType:11,refId:t.lr_id};console.log("openExpenseModal ",e),this.common.params={expenseData:e},this.modalService.open(q.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getLorryReceipts()})}openRevenueModal(t){let e={refernceType:11,refId:t.lr_id};console.log("openExpenseModal ",e),this.common.params={revenueData:e},this.modalService.open(J.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getLorryReceipts()})}openPodDeatilsModal(t){console.log("====lr=====",t);let e={podId:t._podid,lrId:t.lr_id};console.log("====podDetails=====",e),this.common.params={podDetails:e},this.modalService.open(Y.a,{size:"lg",container:"nb-layout",windowClass:"lrpoddetail"}).result.then(t=>{this.getLorryReceipts()})}invoiceFromLr(t){this.api.post("FrieghtRate/invoiceFromLr",{lrId:t.lr_id}).subscribe(t=>{if(console.log("result",t.data[0]),t.data&&t.data[0].r_id>0){let e={_frinvid:t.data[0].r_id};this.common.showToast(t.data[0].r_msg),this.invoice(e)}else t.data&&this.common.showError(t.data[0].r_msg)},t=>{console.log(t)})}invoice(t,e){this.common.params={previewData:{title:"Invoice",previewId:null,refId:t._frinvid,refType:"FRINV"}},console.log("invoice",t),this.modalService.open(X.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(t=>{console.log("Date:",t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](r.Renderer2))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["lorry-reccipts"]],decls:95,vars:14,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"col-sm-1"],[1,"fa","fa-file-pdf",3,"click"],[1,"col-sm-2","text-right"],["class","btn btn-primary",3,"click",4,"ngIf"],[2,"width","100%"],["name","viewType",1,"form-control",3,"ngModel","ngModelChange"],["value","allLR"],["value","myLr"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],["value","2"],["value","3"],["value","veh"],["value","lr"],["value","consigner"],["value","consignee"],["value","ta"],["value","source"],["value","dest"],["value","supplier"],["type","text","autocomplete","off","name","searchValue",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","m-0","p-0","w-100","text-capitalize",3,"click"],["id","lr-table"],["id","tblLorryReceipt",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"col-sm-4",2,"text-align","right"],[1,"btn","btn-primary",3,"click"],["id","tblLorryReceipt",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Lorry Receipts"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"i",4),r["\u0275\u0275listener"]("click",(function(){return e.common.getPDFFromTableId("tblLorryReceipt")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275template"](9,nt,2,0,"button",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"nb-card-body"),r["\u0275\u0275elementStart"](11,"table",7),r["\u0275\u0275elementStart"](12,"tr"),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"Gen._By"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"select",8),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.viewType=t})),r["\u0275\u0275elementStart"](17,"option",9),r["\u0275\u0275text"](18,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"option",10),r["\u0275\u0275text"](20,"Self"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"td"),r["\u0275\u0275elementStart"](22,"label"),r["\u0275\u0275text"](23,"Category"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"select",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lrCategory=t})),r["\u0275\u0275elementStart"](25,"option",12),r["\u0275\u0275text"](26,"FTL"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"option",13),r["\u0275\u0275text"](28,"LTL"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"option",14),r["\u0275\u0275text"](30,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"td"),r["\u0275\u0275elementStart"](32,"label"),r["\u0275\u0275text"](33,"From :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"uj-date-time-picker",15),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"td"),r["\u0275\u0275elementStart"](36,"label"),r["\u0275\u0275text"](37,"To :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"uj-date-time-picker",16),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"td"),r["\u0275\u0275elementStart"](40,"label"),r["\u0275\u0275text"](41,"LR Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"select",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lrType=t})),r["\u0275\u0275elementStart"](43,"option",12),r["\u0275\u0275text"](44,"Pending"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"option",13),r["\u0275\u0275text"](46,"Complete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"option",14),r["\u0275\u0275text"](48,"Rejected"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"option",17),r["\u0275\u0275text"](50,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"td"),r["\u0275\u0275elementStart"](52,"label"),r["\u0275\u0275text"](53,"Veh_Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"select",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.vehicleType=t})),r["\u0275\u0275elementStart"](55,"option",14),r["\u0275\u0275text"](56,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"option",13),r["\u0275\u0275text"](58,"Own"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"option",17),r["\u0275\u0275text"](60,"Group"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](61,"option",18),r["\u0275\u0275text"](62,"Market"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"td"),r["\u0275\u0275elementStart"](64,"label"),r["\u0275\u0275text"](65,"Search_String"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"select",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.searchString=t})),r["\u0275\u0275elementStart"](67,"option",19),r["\u0275\u0275text"](68,"Vehicle"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](69,"option",20),r["\u0275\u0275text"](70,"LR No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"option",21),r["\u0275\u0275text"](72,"Consigner"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](73,"option",22),r["\u0275\u0275text"](74,"Consignee"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](75,"option",23),r["\u0275\u0275text"](76,"TA"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](77,"option",24),r["\u0275\u0275text"](78,"Source"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](79,"option",25),r["\u0275\u0275text"](80,"Destination"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"option",26),r["\u0275\u0275text"](82,"Supplier"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](83,"td"),r["\u0275\u0275elementStart"](84,"label"),r["\u0275\u0275text"](85,"Search Value"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](86,"input",27),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.searchValue=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](87,"td"),r["\u0275\u0275elementStart"](88,"button",28),r["\u0275\u0275listener"]("click",(function(){return e.getLorryReceipts()})),r["\u0275\u0275text"](89,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](90,"div",29),r["\u0275\u0275template"](91,at,1,2,"smart-table",30),r["\u0275\u0275template"](92,ot,2,0,"div",31),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](93,"div",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](94,"router-outlet")),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",e.viewType),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",e.lrCategory),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.lrType),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",e.vehicleType),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",e.searchString),r["\u0275\u0275advance"](20),r["\u0275\u0275property"]("ngModel",e.searchValue),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.receipts&&e.receipts.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.receipts.length))},directives:[s.s,s.v,c.u,s.r,tt.D,tt.r,tt.u,tt.w,tt.G,et.a,tt.d,l.h,_.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px}.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000;background:#fff8dc}[_nghost-%COMP%]    .red{background:red;color:#fff;margin-left:5px}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#0bff0b;color:#000}[_nghost-%COMP%]    .default{background:transparent;border:transparent}[_nghost-%COMP%]    .icon{width:20px;text-align:center;background-color:#ccc;border-radius:3px;height:20px;line-height:22px;margin:3px}[_nghost-%COMP%]    .image{color:#0e0e3a;font-size:18px}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.modal-dialog[_ngcontent-%COMP%]{width:100%!important}.modal-lg[_ngcontent-%COMP%]{max-width:1200px!important}smart-table[_ngcontent-%COMP%]   .tableFixHead[_ngcontent-%COMP%]{height:74vh!important}.close[_ngcontent-%COMP%]{font-size:36px;padding:8px 16px}.model-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;border:1px solid #324148;border-radius:3px}.display-none[_ngcontent-%COMP%]{display:none}.display-block[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 202px);height:auto!important}[_nghost-%COMP%]     td .zoom{background:linear-gradient(-135deg,#1de9b6,#1dc4e9);display:inline-block;padding:3px 8px;border-radius:3px;color:#fff}[_nghost-%COMP%]     .i-red-cross{color:red;font-size:18px}[_nghost-%COMP%]     .i-green{color:green;font-size:18px}[_nghost-%COMP%]     .fa-image span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-image span:before{content:"Image";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-image span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-image:hover span{display:block}[_nghost-%COMP%]     .fa-check span{position:absolute;display:none;top:-28px;padding:10px 32px;font-weight:400;font-size:11px;left:-27px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-check span:before{content:"Receipt";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-check span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-check:hover span{display:block}[_nghost-%COMP%]     .fa-list span{position:absolute;display:none;padding:10px 30px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-list span:before{content:"Details";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-list:hover span{display:block}[_nghost-%COMP%]     .fa-check.i-red-cross span:before, [_nghost-%COMP%]     .fa-image.i-red-cross span:before, [_nghost-%COMP%]     .fa-list.i-red-cross span:before{background-color:red}[_nghost-%COMP%]     .fa-check.i-red-cross span:after, [_nghost-%COMP%]     .fa-image.i-red-cross span:after, [_nghost-%COMP%]     .fa-list.i-red-cross span:after{border-top:5px solid red}[_nghost-%COMP%]     .fa-check.i-green span:before, [_nghost-%COMP%]     .fa-image.i-green span:before, [_nghost-%COMP%]     .fa-list.i-green span:before{background-color:green}[_nghost-%COMP%]     .fa-check.i-green span:after, [_nghost-%COMP%]     .fa-image.i-green span:after, [_nghost-%COMP%]     .fa-list.i-green span:after{border-top:5px solid green}[_nghost-%COMP%]     .fa-print{background-color:green;color:#fff}[_nghost-%COMP%]     .fa-print span{position:absolute;display:none;padding:12px 30px;font-weight:400;font-size:11px;left:-18px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-print:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-square-o{background-color:#04a9f5;color:#fff}[_nghost-%COMP%]     .fa-pencil-square-o span{position:absolute;display:none;padding:12px 46px;font-weight:400;font-size:11px;left:-50px;top:-34px;line-height:15px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-square-o span:before{content:"Generate";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     .fa-trash{background-color:red;color:#fff}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:12px 33px;font-weight:400;font-size:11px;left:-24px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete LR";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-handshake-o{background-color:#1dddc6;color:#fff}[_nghost-%COMP%]     .fa-handshake-o span{position:absolute;display:none;padding:11px 32px;font-weight:400;font-size:10px;left:-23px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-handshake-o span:before{content:"TripSettlement";display:block;position:absolute;top:0;left:0;background-color:#1dddc6;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1dddc6;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-handshake-o:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function rt(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Name"),r["\u0275\u0275elementEnd"]())}function st(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.name)}}function lt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"th",12),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,st,2,1,"td",9),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275elementStart"](9,"span",13),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"]().getImage(n)})),r["\u0275\u0275text"](10,"view"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.statusName),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","allLR"==a.viewType),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](13,5,t.addtime,"dd MMM HH:mm a"))}}function dt(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let ct=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.expenses=[],this.viewImages=null,this.activeImage="exp_sheet1",this.viewType="allExp",this.common.refresh=this.refresh.bind(this)}ngOnInit(){this.getExpenditure()}refresh(){this.getExpenditure()}getExpenditure(){++this.common.loading,this.api.post("FoDetails/getExpenditureSheet",{type:this.viewType}).subscribe(t=>{--this.common.loading,console.log("Res:",t),this.expenses=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getImage(t){console.log(t);let e=[{name:"Sheet-1",image:t.exp_sheets[0]}];console.log("images:",e),this.common.params={images:e,title:"LR Details"},this.modalService.open(C.a,{size:"lg",container:"nb-layout"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["expenses"]],decls:31,vars:4,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-10"],[1,"col-sm-2"],["name","viewType",1,"form-control",3,"ngModel","change","ngModelChange"],["value","allExp"],["value","myExp"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[2,"text-decoration","underline","color","blue","cursor","pointer",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Expenses"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"select",4),r["\u0275\u0275listener"]("change",(function(){return e.getExpenditure()}))("ngModelChange",(function(t){return e.viewType=t})),r["\u0275\u0275elementStart"](8,"option",5),r["\u0275\u0275text"](9,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",6),r["\u0275\u0275text"](11,"My"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"nb-card-body"),r["\u0275\u0275elementStart"](13,"div"),r["\u0275\u0275elementStart"](14,"table",7),r["\u0275\u0275elementStart"](15,"thead",8),r["\u0275\u0275elementStart"](16,"tr"),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"th"),r["\u0275\u0275text"](22,"Status Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](23,rt,2,0,"th",9),r["\u0275\u0275elementStart"](24,"th"),r["\u0275\u0275text"](25,"view"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"th"),r["\u0275\u0275text"](27,"Add Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"tbody"),r["\u0275\u0275template"](29,lt,14,8,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](30,dt,2,0,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",e.viewType),r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngIf","allLR"==e.viewType),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngForOf",e.expenses),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.expenses.length))},directives:[s.s,s.v,tt.D,tt.r,tt.u,tt.w,tt.G,s.r,c.u,c.t],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 210px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:250px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var ht=n("I3j9"),mt=n("5pkc"),pt=n("skNO"),gt=n("VJ3l"),bt=n("Mfh5"),ut=n("urU0"),ft=n("1i8C"),xt=n("M5JG"),vt=n("3a3o"),Ct=n("wd/R"),yt=n("INKT"),_t=n("Ig2y"),St=n("ZyeE"),Mt=n("jjvj"),wt=n("iJpb"),Ot=n("d/uI"),Pt=n("fofb"),Et=n("0BXs"),kt=n("1+iI"),Tt=n("cUpR"),Dt=n("syhs"),It=n("yotz"),Ft=n("z+eI");function At(t,e){1&t&&r["\u0275\u0275element"](0,"tmg")}const Vt=function(t){return{"background-color":t}};function Lt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](4).choosePrimarySubStatus(n)})),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275element"](3,"div",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",30),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](3,Vt,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",t.name," (",t.length,") ")}}function zt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",20),r["\u0275\u0275element"](1,"div",21),r["\u0275\u0275elementStart"](2,"div",22),r["\u0275\u0275elementStart"](3,"div",23),r["\u0275\u0275elementStart"](4,"div",12),r["\u0275\u0275elementStart"](5,"div",13),r["\u0275\u0275elementStart"](6,"span"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",24),r["\u0275\u0275element"](9,"chart",25),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",14),r["\u0275\u0275elementStart"](11,"div",26),r["\u0275\u0275template"](12,Lt,6,5,"nb-card",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"div",21),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",t.isMapView),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](t.pdfData.primary.name),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("data",t.pdfData.primary.chartData)("options",t.pdfData.primary.chartOptions),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",t.pdfData.primary.list)}}function jt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](3).filterData(n.name)})),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275element"](3,"div",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",31),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"titlecase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](5,Vt,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",r["\u0275\u0275pipeBind1"](6,3,t.name)," (",n.pdfData.tripStart.kpiGroups[t.name].length,") ")}}function Rt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](3).filterData(n.name)})),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275element"](3,"div",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",31),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"titlecase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](5,Vt,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",r["\u0275\u0275pipeBind1"](6,3,t.name)," (",n.pdfData.tripEnd.kpiGroups[t.name].length,") ")}}function Ht(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",32),r["\u0275\u0275element"](3,"smart-table",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("id","print-table-"+n),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("data",t.data)("settings",t.settings)}}const Nt=function(t){return{width:t}},Ut=function(){return{bottom:!1,right:!0,top:!1,left:!1}};function Gt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"div",3),r["\u0275\u0275elementStart"](3,"h4"),r["\u0275\u0275text"](4,"Trip dashboard"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,zt,14,5,"div",4),r["\u0275\u0275elementStart"](6,"div",5),r["\u0275\u0275elementStart"](7,"div",6),r["\u0275\u0275element"](8,"i",7),r["\u0275\u0275element"](9,"i",8),r["\u0275\u0275element"](10,"hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",9),r["\u0275\u0275elementStart"](12,"div",10),r["\u0275\u0275elementStart"](13,"div",11),r["\u0275\u0275elementStart"](14,"div",12),r["\u0275\u0275elementStart"](15,"div",13),r["\u0275\u0275elementStart"](16,"span"),r["\u0275\u0275text"](17,"Top 5 Trip Start"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",14),r["\u0275\u0275elementStart"](19,"div",15),r["\u0275\u0275template"](20,jt,7,7,"nb-card",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"div",17),r["\u0275\u0275elementStart"](22,"div",18),r["\u0275\u0275elementStart"](23,"div",11),r["\u0275\u0275elementStart"](24,"div",12),r["\u0275\u0275elementStart"](25,"div",13),r["\u0275\u0275elementStart"](26,"span"),r["\u0275\u0275text"](27,"Top 5 Trip End"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",14),r["\u0275\u0275elementStart"](29,"div",15),r["\u0275\u0275template"](30,Rt,7,7,"nb-card",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div",19),r["\u0275\u0275listener"]("resizeEnd",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).onResizeEnd(e,"smartTable")})),r["\u0275\u0275template"](32,Ht,4,3,"nb-card",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.pdfData.primary.list.length),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("hidden",t.isMapView),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",t.pdfData.tripStart.list),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",t.isMapView),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",t.pdfData.tripEnd.list),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",r["\u0275\u0275pureFunction1"](9,Nt,t.isMapView?t.widths.smartTable:"100%"))("resizeEdges",r["\u0275\u0275pureFunction0"](11,Ut)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.pdfData.tables)}}function Bt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",39),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](6).selectSubStatus(n.kpis)})),r["\u0275\u0275element"](1,"span"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function $t(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",51),r["\u0275\u0275elementStart"](1,"ul"),r["\u0275\u0275template"](2,Bt,3,1,"li",52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](5);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.primarySubStatus)}}function Wt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](4).choosePrimarySubStatus(n)})),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275element"](3,"div",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",41),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"titlecase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",21),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,$t,3,1,"div",50),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](6,Vt,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,4,t.name)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",t.length," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.activePrimaryStatus==t.name)}}function Kt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,Wt,10,8,"nb-card",16),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.primaryStatus)}}function qt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",39),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](6).selectSubStatus(n.kpi)})),r["\u0275\u0275element"](1,"span"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",t.name," : ",t.kpi.length," ")}}function Jt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",51),r["\u0275\u0275elementStart"](1,"ul"),r["\u0275\u0275template"](2,qt,3,2,"li",52),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](5);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.subGroup.data)}}function Yt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](4).filterSubStatus(n.name)})),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275element"](3,"div",29),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",41),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"titlecase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",21),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,Jt,3,1,"div",50),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](6,Vt,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,4,t.name)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",n.kpiGroups[t.name].length," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.subGroup.name===t.name)}}function Zt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,Yt,10,8,"nb-card",16),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.kpiGroupsKeys)}}const Qt=function(t){return{transform:t}};function Xt(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",53),r["\u0275\u0275elementStart"](1,"div"),r["\u0275\u0275elementStart"](2,"div",19),r["\u0275\u0275listener"]("resizeEnd",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](3).onResizeEnd(e,"smartTable")})),r["\u0275\u0275elementStart"](3,"div",54),r["\u0275\u0275elementStart"](4,"smart-table",55),r["\u0275\u0275listener"]("action",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](3).jrxActionHandler(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",56),r["\u0275\u0275element"](6,"div",57),r["\u0275\u0275elementStart"](7,"div",58),r["\u0275\u0275element"](8,"img",59),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",60),r["\u0275\u0275elementStart"](10,"input",61),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](3).isCluster=e}))("change",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](3).createCluster()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"span",62),r["\u0275\u0275elementStart"](12,"b"),r["\u0275\u0275text"](13,"Cluster View?"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("ngClass",t.isMapView?"col-sm-12 p-0":"col-sm-9 p-0"),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",r["\u0275\u0275pureFunction1"](10,Nt,t.isMapView?t.widths.smartTable:"100%"))("resizeEdges",r["\u0275\u0275pureFunction0"](12,Ut)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.isMapView)("ngStyle",r["\u0275\u0275pureFunction1"](13,Nt,"calc(100% - "+t.widths.smartTable+")")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](15,Qt,t.rotate)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.isCluster)}}function te(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card",34),r["\u0275\u0275elementStart"](1,"nb-card-body",35),r["\u0275\u0275elementStart"](2,"div",36),r["\u0275\u0275elementStart"](3,"div",37),r["\u0275\u0275elementStart"](4,"div",12),r["\u0275\u0275elementStart"](5,"div",38),r["\u0275\u0275elementStart"](6,"span",39),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).changeOptions("reverse")})),r["\u0275\u0275element"](7,"i",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",41),r["\u0275\u0275elementStart"](9,"span"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",38),r["\u0275\u0275elementStart"](12,"span",39),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).changeOptions("forward")})),r["\u0275\u0275element"](13,"i",42),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div"),r["\u0275\u0275element"](15,"chart",25),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",43),r["\u0275\u0275elementStart"](17,"nb-card"),r["\u0275\u0275elementStart"](18,"nb-card-body",27),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).allData()})),r["\u0275\u0275elementStart"](19,"div",28),r["\u0275\u0275element"](20,"div",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",41),r["\u0275\u0275text"](22," All Data "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",21),r["\u0275\u0275text"](24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](25,Kt,2,1,"div",0),r["\u0275\u0275template"](26,Zt,2,1,"div",0),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"button",45),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).generatePDF()})),r["\u0275\u0275element"](28,"i",46),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"span",47),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).exportCsv("print-section")})),r["\u0275\u0275element"](30,"i",48),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](31,Xt,14,17,"div",49),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",t.isMapView),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](t.viewName),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("data",t.chartData)("options",t.chartOptions),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"](" ",t.allKpis.length," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","showprim_status"==t.viewType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","showprim_status"!==t.viewType),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.table)}}function ee(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,Gt,33,12,"div",0),r["\u0275\u0275template"](2,te,32,8,"nb-card",1),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.allKpis.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.allKpis.length)}}let ne=(()=>{class t{constructor(t,e,n,a,o,i,r,s,l,d,c){this.api=t,this.common=e,this.user=n,this.formBuilder=a,this.modalService=o,this.mapService=i,this.datePipe=r,this.dateService=s,this._sanitizer=l,this.csvService=d,this.pdfService=c,this.testingDate=this.common.dateFormatter(new Date,"",!1),this.submitted=!1,this.kpis=[],this.allKpis=[],this.searchTxt="",this.filters=[],this.today=null,this.viewType="showprim_status",this.viewName="Primary Status",this.kpiGroups=null,this.kpiGroupsKeys=[],this.keyGroups=[],this.isCluster=!1,this.markers=null,this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.viewIndex=0,this.viewOtions=[{name:"Primary Status",key:"showprim_status"},{name:"Trip Start",key:"x_showtripstart"},{name:"Trip End",key:"x_showtripend"}],this.selectedFilterKey="",this.table=null,this.primaryStatus=[],this.subPrimaryStatus={},this.secondaryStatus=[],this.activePrimaryStatus="",this.primarySubStatus=[],this.widths={smartTable:"40%",map:"60%"},this.isMapView=!1,this.infoWindow=null,this.infoStart=null,this.isZoomed=!1,this.lastRefreshTime=new Date,this.pdfData={primary:{name:"Primary",chartData:null,chartOptions:null,list:[],key:"showprim_status"},tripStart:{name:"Trip Start",chartData:null,chartOptions:null,list:[],key:"x_showtripstart",kpiGroups:null},tripEnd:{name:"Trip End",chartData:null,chartOptions:null,list:[],key:"x_showtripend",kpiGroups:null},tables:[]},this.subGroup={name:void 0,data:[]},this.rotate="",console.log("this.user._customer",this.user._customer,"this.user._details",this.user._details),this.getKPIS(),this.common.currentPage="",this.common.refresh=this.refresh.bind(this),this.today=new Date}ngOnInit(){this.registerForm=this.formBuilder.group({firstName:["",tt.F.required],lastName:["",tt.F.required],search:["",tt.F.required]})}ngAfterViewInit(){this.common.stopScroll()}ngOnDestroy(){this.mapService.map=null,this.common.continuoueScroll()}get f(){return this.registerForm.controls}onSubmit(){this.submitted=!0,this.registerForm.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.registerForm.value))}refresh(){this.getKPIS()}getKPIS(t){this.lastRefreshTime=new Date,!t&&this.common.loading++;let e=this.api.get("VehicleKpis").subscribe(n=>{!t&&this.common.loading--,1==n.code&&(this.allKpis=n.data,localStorage.setItem("KPI_DATA",JSON.stringify(this.allKpis)),this.kpis=n.data,this.grouping(this.viewType),this.table=this.setTable(),this.handlePdfPrint()),e.unsubscribe()},n=>{!t&&this.common.loading--,console.error("getKPIs:",n),e.unsubscribe()})}getTableColumns(t){let e=[];return(t||this.kpis).map((t,n)=>{e.push({_id:t.x_showveh,vehicle:{value:t.x_showveh,action:"",colActions:{dblclick:"",click:"",mouseover:"",mouseout:""}},vehicleType:{value:t.x_vehicle_type,action:""},status:{value:t.showprim_status,action:""},location:{value:t.Address,action:""},hrs:{value:t.x_hrssince,action:""},Idle_Time:{value:this.common.changeTimeformat(t.x_idle_time),action:""},trail:{value:this.common.getTripStatusHTML(t.trip_status_type,t.x_showtripstart,t.x_showtripend,t.x_p_placement_type,t.x_p_loc_name),action:"",isHTML:!0},kmp:{value:t.x_kmph,action:""},action:{value:"",isHTML:!1,action:null,icons:this.actionIcons()}})}),e}getViewType(){this.table.data.columns=this.getTableColumns(),this.grouping(this.viewType)}grouping(t){if(this.kpis=this.allKpis,this.kpiGroups=z.groupBy(this.allKpis,t),("x_showtripend"===this.viewType||"x_showtripstart"===this.viewType)&&this.kpiGroups[""]){let t={};this.kpiGroups[""].forEach(e=>{let n="";e.placements.length&&(n=e.placements[0].name),n in t?t[n].push(e):t[n]=[e]}),Object.keys(t).forEach(e=>{e in this.kpiGroups?this.kpiGroups[e].push(...t[e]):this.kpiGroups[e]=t[e]})}Object.keys(this.kpiGroups).forEach(t=>{if(t.includes("#")){let e=t.split("#")[0];e in this.kpiGroups?this.kpiGroups[e].push(...this.kpiGroups[t]):this.kpiGroups[e]=this.kpiGroups[t],delete this.kpiGroups[t]}}),this.kpiGroupsKeys=Object.keys(this.kpiGroups),this.keyGroups=[],"showprim_status"==t?(this.primaryStatusGrouping(),this.primaryStatus.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t.name,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`}),t.bgColor=`hsl(${e}, 100%, 75%)`,t.textColor=`hsl(${e}, 100%, 25%)`})):this.kpiGroupsKeys.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`})}),this.sortData(t)}primaryStatusGrouping(){this.primaryStatus=[],this.allKpis.map(t=>{let e=t.showprim_status.split(","),n=e.splice(0,1)[0].trim(),a=e.join(",").trim(),o=!1;"No Data 12 Hr"==n?(n="Issue",a="12 Hr +"):"Undetected"==n?(n="Issue",a="Undetected"):"No GPS Data"==n&&(n="Issue",a="No GPS Data"),this.primaryStatus.map(e=>{e.name==n&&(o=!0,e.length++,e.subStatus[a]?e.subStatus[a].push(t):e.subStatus[a]=[t])}),o||(this.primaryStatus.push({name:n,length:1,subStatus:{}}),this.primaryStatus[this.primaryStatus.length-1].subStatus[a]=[t])})}sortData(t){let e=[];this.chartColors=[];let n=[],a=[];"showprim_status"==t?(this.primaryStatus=z.sortBy(this.primaryStatus,["length"]).reverse(),this.primaryStatus.map(t=>{this.chartColors.push(t.bgColor),n.push(t.name),a.push(t.length)})):(this.keyGroups.map(t=>{e.push({group:t,length:this.kpiGroups[t.name].length})}),this.kpiGroupsKeys=[],z.sortBy(e,["length"]).reverse().map(t=>{this.kpiGroupsKeys.push(t.group)}),this.kpiGroupsKeys.map(t=>{this.chartColors.push(t.bgColor),n.push(t.name),a.push(this.kpiGroups[t.name].length)}));let o=this.common.pieChart(n,a,this.chartColors);this.chartData=o.chartData,this.chartOptions=o.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}filterData(t,e){if("showprim_status"==this.viewType||"showprim_status"==e){if(this.kpis=[],"All"==t)this.primaryStatus.map(t=>{Object.keys(t.subStatus).map(e=>{t.subStatus[e].map(t=>{this.kpis.push(t)})})});else for(let e=0;e<this.primaryStatus.length;e++)if(this.primaryStatus[e].name==t){Object.keys(this.primaryStatus[e].subStatus).map(t=>{this.primaryStatus[e].subStatus[t].map(t=>{this.kpis.push(t)})});break}}else if("All"==t)this.kpis=this.allKpis;else if(this.selectedFilterKey=t,this.kpis=this.allKpis.filter(e=>e[this.viewType].split("-").map(t=>t.split("#")[0]).join(" - ")==t),"x_showtripend"===this.viewType&&""!=t){let e=z.groupBy(this.allKpis,this.viewType),n={};e[""].forEach(t=>{let e="";t.placements&&t.placements.length&&(e=t.placements[0].name,e in n?n[e].push(t):n[e]=[t])}),Object.keys(n).forEach(e=>{e===t&&this.kpis.push(...n[e])})}this.table=this.setTable()}filterSubStatus(t){if(this.subGroup.name==t)return void(this.subGroup={name:void 0,data:[]});let e=this.allKpis.filter(e=>e[this.viewType].split("#")[0]==t),n=this.allKpis.filter(t=>!t[this.viewType]).filter(e=>!(!e.placements||!e.placements.length||e.placements[0].name!==t));if(e.push(...n),e.length<2||""===t)return this.selectSubStatus(e),void(this.subGroup={name:void 0,data:[]});let a=z.groupBy(e,"x_showtripend"===this.viewType?"x_showtripstart":"x_showtripend");if(("x_showtripend"===this.viewType||"x_showtripstart"===this.viewType)&&a[""]){let t={};a[""].forEach(e=>{let n="";e.placements&&e.placements.length&&(n=e.placements[0].name,n in t?t[n].push(e):t[n]=[e])}),Object.keys(t).forEach(e=>{""===e?a[""]=t[e]:e in a?a[e].push(...t[e]):a[e]=t[e]})}delete a[""];let o=[];if(Object.keys(a).forEach(t=>{let e=t.split("#")[0];e!==t&&(e in a?(a[e].push(...a[t]),-1===o.indexOf(t)&&o.push(t)):(a[e]=a[t],o.push(t)))}),o.forEach(t=>delete a[t]),Object.keys(a).length<=1)return this.selectSubStatus(e),void(this.subGroup={name:void 0,data:[]});a.All=e,this.subGroup.name=t,this.subGroup.data=Object.keys(a).map(t=>({name:t,kpi:a[t]})).sort((t,e)=>t.kpi.length<e.kpi.length?1:-1).slice(0,6)}showLocation(t){t.x_tlat?(this.common.params={location:{lat:t.x_tlat,lng:t.x_tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}findVehicle(){this.kpis=this.searchTxt?this.allKpis.filter(t=>t.x_showveh.toUpperCase().includes(this.searchTxt.toUpperCase())):this.allKpis}findFilters(){this.filters=["all"],this.allKpis.map(t=>{-1==this.filters.indexOf(t.showprim_status)&&this.filters.push(t.showprim_status)})}showDetails(t){this.common.params={kpi:t},this.modalService.open(x.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="kpisDetails"}getLR(t){this.common.loading++;let e=this.api.post("FoDetails/getLorryDetails",{x_lr_id:t.x_lr_id}).subscribe(t=>{this.common.loading--,t.data&&t.data.length&&this.showLR(t.data[0]),e.unsubscribe()},t=>{this.common.loading--,console.error("getLR: ",t),e.unsubscribe()})}showLR(t){this.common.params={images:[{name:"Lr",image:t.lr_image},{name:"Invoice",image:t.invoice_image},{name:"Other_Image",image:t.other_image}],title:"LR Details"},this.modalService.open(C.a,{size:"lg",container:"nb-layout"})}changeOptions(t){"forward"===t?(++this.viewIndex,this.viewIndex>this.viewOtions.length-1&&(this.viewIndex=0)):(--this.viewIndex,this.viewIndex<0&&(this.viewIndex=this.viewOtions.length-1)),this.viewType=this.viewOtions[this.viewIndex].key,this.viewName=this.viewOtions[this.viewIndex].name,this.grouping(this.viewType)}allData(){this.selectedFilterKey="",this.filterData("All")}reportIssue(t){this.common.params={refPage:"db"},this.modalService.open(ht.a,{size:"sm",container:"nb-layout"}).result.then(e=>e.status&&this.common.reportAnIssue(e.issue,t.x_vehicle_id))}setTable(t){return{data:{headings:{vehicle:{title:"Vehicle Number",placeholder:"Vehicle No"},vehicleType:{title:"Vehicle Type",placeholder:"Veh Type"},status:{title:"Status",placeholder:"Status"},location:{title:"Location",placeholder:"Location"},hrs:{title:"Hrs",placeholder:"Hrs "},Idle_Time:{title:"Idle Time",placeholder:"Idle Time"},trail:{title:"Trail",placeholder:"Trail"},kmp:{title:"Kmp",placeholder:"KMP"},action:{title:"Action",placeholder:"",hideSearch:!0}},columns:this.getTableColumns(t)},settings:{hideHeader:!0,count:{icon:"fa fa-map",action:this.handleMapView.bind(this)},pagination:!0,tableHeight:"87vh",oneAction:!0,selectRow:!0,selectMultiRow:!1}}}choosePrimarySubStatus(t){if(t.name==this.activePrimaryStatus)return this.activePrimaryStatus="",void(this.primarySubStatus=[]);if(1==Object.keys(t.subStatus).length)return this.kpis=t.subStatus[Object.keys(t.subStatus)[0]],this.table=this.setTable(),this.primarySubStatus=[],void(this.activePrimaryStatus="");let e=[];Object.keys(t.subStatus).map((n,a)=>{0==a&&e.push({id:0,name:"All",kpis:[]}),t.subStatus[n].map(t=>e[0].kpis.push(Object.assign({},t))),e.push({id:a+1,name:(n||t.name)+" : "+t.subStatus[n].length,kpis:t.subStatus[n]})}),e[0].name+=" : "+e[0].kpis.length,this.primarySubStatus=e,this.activePrimaryStatus=t.name}selectSubStatus(t){this.kpis=t,this.table=this.setTable()}vehicleReport(t){this.common.params={vehicleId:t.x_vehicle_id,vehicleRegNo:t.x_showveh,ref_page:"consView"},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(pt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"myCustomModalClass"})}openRouteMapper(t){let e,n,a;e=new Date,n=t.x_showstarttime?this.common.dateFormatter(t.x_showstarttime):new Date(e.setDate(e.getDate()-2)),a=this.common.dateFormatter(n);let o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t.x_vehicle_id,vehicleRegNo:t.x_showveh,fromTime:o,toTime:i},this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}openTripDetails(t){let e,n,a;e=new Date,n=new Date(e.setMonth(e.getMonth()-2)),a=this.common.dateFormatter(n);let o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.params={vehicleId:t.x_vehicle_id,vehicleRegNo:t.x_showveh,fromTime:o,toTime:i},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(bt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}vehicleOnMap(){this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicles:this.kpis},this.modalService.open(mt.a,{size:"lg",container:"nb-layout"})}onResizeEnd(t,e){this.widths[e]=t.rectangle.width+"px"}initialiseMap(){this.mapService.map&&"concise-view-map"==this.mapService.map.__gm.Z.id?this.mapService.map.__gm.Z=document.getElementById("concise-view-map"):this.mapService.mapIntialize("concise-view-map"),this.mapService.clearAll();for(let t=0;t<this.kpis.length;t++)this.kpis[t].color="No Data 12 Hr"==this.kpis[t].showprim_status||"Undetected"==this.kpis[t].showprim_status||"No GPS Data"==this.kpis[t].showprim_status?"ff0000":this.kpis[t].x_idle_time/60>0?"ffff00":"00ff00";setTimeout(()=>{this.mapService.setMapType(0),this.markers=this.mapService.createMarkers(this.kpis),this.mapService.addListerner(this.mapService.map,"center_changed",()=>{}),this.mapService.addListerner(this.mapService.map,"zoom_changed",()=>{});let t=0;for(const e of this.mapService.markers){let n=this.kpis[t];this.mapService.addListerner(e,"mouseover",()=>this.setEventInfo(n)),this.mapService.addListerner(e,"mouseout",()=>this.unsetEventInfo()),t++}},1e3)}setMarkerLabels(){if(0!=this.mapService.markers.length)for(const t of this.mapService.markers)t.setLabel("");if(this.mapService.map.getZoom()>=9)for(let t=0;t<this.mapService.markers.length;t++)this.mapService.markers[t].setLabel(this.kpis[t].x_showveh)}createCluster(){if(this.isCluster){for(let t=0;t<this.markers.length;t++)this.markers[t]&&(this.markers[t].title=this.kpis[t].x_showveh);this.mapService.createCluster(this.markers,!0)}else this.mapService.createCluster(this.markers,!1)}setEventInfo(t){this.infoStart=(new Date).getTime(),this.infoWindow&&this.infoWindow.close(),this.infoWindow=this.mapService.createInfoWindow(),this.infoWindow.opened=!1,this.infoWindow.setContent(`\n      <b>Vehicle:</b>${t.x_showveh} <br>\n      <span><b>Trip:</b>${this.common.getTripStatusHTML(t.trip_status_type,t.x_showtripstart,t.x_showtripend,t.x_p_placement_type,t.x_p_loc_name)}</span> <br>\n      <b>Status:</b>${t.showprim_status} <br>\n      <b>Location:</b>${t.Address} <br>\n      `),this.rotateBounce(t,null,!1),this.infoWindow.setPosition(this.mapService.createLatLng(t.x_tlat,t.x_tlong)),this.infoWindow.open(this.mapService.map),this.mapService.getMapBounds()}unsetEventInfo(){(new Date).getTime()-this.infoStart>500&&(this.infoWindow.close(),this.infoWindow.opened=!1)}handleMapView(){if(this.isZoomed)return this.isZoomed=!1,this.mapService.setMapType(0),void this.mapService.resetBounds();this.isMapView=!this.isMapView,setTimeout(()=>{this.initialiseMap()},1e3)}rotateBounce(t,e,n=!0){this.rotate="rotate("+t.x_angle+"deg)",n&&this.mapService.toggleBounceMF(e)}getUpadte(t){this.common.params={tripDetils:{vehicleId:t.x_vehicle_id,siteId:t.x_hl_site_id},ref_page:"kpi"},this.modalService.open(xt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getZoomAndaddShortTarget(t){this.isMapView?this.getZoom(t):this.addShortTarget(t)}getZoom(t){if(t){let e=this.mapService.getLatLngValue(t),n=this.mapService.createLatLng(e.lat,e.lng);this.mapService.zoomAt(n),this.isZoomed=!0}}actionIcons(){return[{class:"icon fa fa-chart-pie",action:""},{class:"icon fa fa-star",action:""},{class:"icon fa fa-route",action:""},{class:"icon fa fa-truck",action:""},{class:"icon fa fa-globe",action:""},{class:"icon fa fa-question-circle",action:""},{class:"icon fa fa-user-secret",action:""},{class:"icon fas fa-tachometer-alt",action:""},{class:"icon fas fa-flag-checkered",action:""},{class:"icon fa fa-gavel",action:""},{class:"icon fa fa-phone",action:""}]}openChangeStatusModal(t){let e=new Date,n=this.common.dateFormatter(new Date),a=new Date(e.setHours(e.getHours()-48)),o=this.common.dateFormatter(a),i={id:t.id,vehicle_id:t.x_vehicle_id,tTime:n,suggest:null,latch_time:o,status:2,remark:t.remark,regno:t.x_showveh,tripName:this.common.getTripStatusHTML(t.trip_status_type,t.x_showtripstart,t.x_showtripend,t.x_p_placement_type,t.x_p_loc_name)};this.common.ref_page="tsfl",this.common.params=i,this.modalService.open("admin"!=this.user._loggedInBy?Et.a:vt.a,{size:"lg",container:"nb-layout"})}openVehicleStates(t){this.common.params={vehicleId:t.x_vehicle_id,vehicleRegNo:t.x_showveh,lat:t.x_tlat,long:t.x_tlong,vregno:t.x_showveh},this.modalService.open(ut.a,{size:"lg",container:"nb-layout"})}onMouseMove(t){let e=Ct(new Date),n=Ct(this.lastRefreshTime);Ct.duration(e.diff(n)).asMinutes()>=5&&this.getKPIS(!0)}addShortTarget(t){this.common.params={vehicleId:t.x_vehicle_id,vehicleRegNo:t.x_showveh},this.modalService.open(yt.a,{size:"sm",container:"nb-layout"})}openStations(t){this.common.params={lat:t.x_tlat,long:t.x_tlong},this.modalService.open(St.a,{size:"lg",container:"nb-layout"})}openOdoMeter(t){this.common.params={vehicleId:t.x_vehicle_id,regno:t.x_showveh},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}openentityFlag(t){this.common.handleModalSize("class","modal-lg","800"),this.common.params={title:"Entity Flag ",vehicleId:t.x_vehicle_id,regno:t.x_showveh},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"})}openVehicleWiseOrders(t){this.common.params={vehicle:{id:t.x_vehicle_id,regno:t.x_showveh}},this.modalService.open(Pt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}callNotification(t){if(t.x_mobileno){let e={mobileno:t.x_mobileno,callTime:this.common.dateFormatter(new Date)};this.common.loading++;let n=this.api.post("Notifications/sendCallSuggestionNotifications",e).subscribe(t=>{this.common.loading--,console.log("res",t),this.common.showToast(t.msg),n.unsubscribe()},t=>{this.common.loading--,this.common.showError(),console.error("callNotification:",t),n.unsubscribe()})}else this.common.showError("Driver Mobile no. does not exist")}getPdf(){this.common.downloadPdf("Content1")}handlePdfPrint(){let t={key:this.viewType,name:this.viewName};["primary","tripStart","tripEnd"].map(t=>{this.viewType=this.pdfData[t].key,this.grouping(this.viewType),this.pdfData[t].chartData=Object.assign({},this.chartData),this.pdfData[t].chartOptions=Object.assign({},this.chartOptions),"primary"==t?this.pdfData[t].list=this.primaryStatus:(this.pdfData[t].list=this.kpiGroupsKeys,this.pdfData[t].kpiGroups=this.kpiGroups)}),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),this.viewType=t.key,this.viewName=t.name,this.grouping(this.viewType)}generatePDF(){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id);let e=this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.printPDF(t.data.name),e.unsubscribe()},t=>{this.common.loading--,console.error("Error:",t),e.unsubscribe()})}printPDF(t){this.pdfData.tables=[];let e=this.pdfData.primary.list;const n=[];this.primaryStatus.map(t=>{let e=[];Object.keys(t.subStatus).map(n=>{e.push(...t.subStatus[n])}),this.pdfData.tables.push(this.setTable(e))}),this.pdfData.tables.map((t,e)=>{n.push("print-table-"+e)}),this.pdfService.tableWithImages("page-1",n,e,t,"Trip Feedback Logs")}cookPdfData(){let t={key:this.viewType,name:this.viewName};["primary","tripStart","tripEnd"].map(t=>{this.viewType=this.pdfData[t].key,this.grouping(this.viewType),this.pdfData[t].chartData=Object.assign({},this.chartData),this.pdfData[t].chartOptions=Object.assign({},this.chartOptions),"primary"==t?this.pdfData[t].list=this.primaryStatus:(this.pdfData[t].list=this.kpiGroupsKeys,this.pdfData[t].kpiGroups=this.kpiGroups)}),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),this.viewType=t.key,this.viewName=t.name,this.grouping(this.viewType)}exportCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id);let n=this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let a=[{customer:"Customer : "+e.data.name},{report:"Report : Dashboard Trips"},{time:"Time : "+this.datePipe.transform(this.today,"dd-MM-yyyy hh:mm:ss a")}];this.csvService.byMultiIds([t],"Dashboard",a),n.unsubscribe()},t=>{this.common.loading--,console.error("Err:",t),n.unsubscribe()})}jrxActionHandler(t){if(t.heading&&"icon"!==t.actionLevel)switch(t.heading){case"vehicle":"click"===t.actionType?this.addShortTarget(this.findKPI(t.column._id)):"dblclick"===t.actionType?this.showDetails(this.findKPI(t.column._id)):"mouseover"===t.actionType&&this.isMapView?this.rotateBounce.bind(this.findKPI(t.column._id),t.index):"mouseout"===t.actionType&&this.isMapView&&this.mapService.toggleBounceMF(t.index,2);break;case"status":this.showDetails(this.findKPI(t.column._id));break;case"location":this.showLocation(this.findKPI(t.column._id));break;case"trail":this.getUpadte(this.findKPI(t.column._id))}else if("icon"===t.actionLevel)switch(t.heading){case"icon fa fa-chart-pie":this.openChangeStatusModal(this.findKPI(t.column._id));break;case"icon fa fa-star":this.vehicleReport(this.findKPI(t.column._id));break;case"icon fa fa-route":this.openRouteMapper(this.findKPI(t.column._id));break;case"icon fa fa-truck":this.openTripDetails(this.findKPI(t.column._id));break;case"icon fa fa-globe":this.openVehicleStates(this.findKPI(t.column._id));break;case"icon fa fa-question-circle":this.reportIssue(this.findKPI(t.column._id));break;case"icon fa fa-user-secret":this.openStations(this.findKPI(t.column._id));break;case"icon fas fa-tachometer-alt":this.openOdoMeter(this.findKPI(t.column._id));break;case"icon fas fa-flag-checkered":this.openentityFlag(this.findKPI(t.column._id));break;case"icon fa fa-gavel":this.openVehicleWiseOrders(this.findKPI(t.column._id));break;case"icon fa fa-phone":this.callNotification(this.findKPI(t.column._id))}}findKPI(t){return this.kpis.find(e=>e.x_showveh==t)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](tt.g),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](ft.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](_t.a),r["\u0275\u0275directiveInject"](Tt.b),r["\u0275\u0275directiveInject"](kt.a),r["\u0275\u0275directiveInject"](wt.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["concise"]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("mousemove",(function(t){return e.onMouseMove(t)}),!1,r["\u0275\u0275resolveDocument"])},decls:2,vars:2,consts:[[4,"ngIf"],["class","nb_card_box","style","border: 0px; height: 100%;",4,"ngIf"],["id","page-1",1,"status-print-view","pt-0"],[1,"status-print-title","text-center"],["class","row",4,"ngIf"],[1,"truck-route"],[1,"truck_road"],[1,"fas","fa-truck-moving","left-truck"],[1,"fas","fa-truck-moving","right-truck"],["id","page-2",1,"row"],[1,"col-sm-3","pl-5"],[1,"",2,"overflow","hidden",3,"hidden"],[1,"row",2,"font-size","16px","margin","0px","text-align","center","padding","8px 0px","background","linear-gradient(45deg,#30ccff 0,#5a9cff 100%)","color","#fff","border-radius","5px","margin-bottom","10px"],[1,"col-sm-12"],[1,"status_box"],[1,""],[4,"ngFor","ngForOf"],[1,"col-6"],[1,"col-sm-3","pr-5"],["mwlResizable","",1,"map-table-container",3,"enableGhostResize","ngStyle","resizeEdges","resizeEnd"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[2,"overflow","hidden",3,"hidden"],[1,"chartbox"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[1,"graph-data"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-sm-9"],[1,"col-sm-11","pr-0"],[3,"id"],[1,"home-page-tabel",2,"width","100%",3,"data","settings"],[1,"nb_card_box",2,"border","0px","height","100%"],[2,"padding","5px 5px 0px"],[1,"row","m-0"],[1,"col-sm-3","pl-0","pr-2",2,"height","90vh","overflow","hidden",3,"hidden"],[1,"col-sm-2"],[3,"click"],[1,"icon","ion-ios-rewind"],[1,"col-sm-8"],[1,"icon","ion-ios-fastforward"],[1,"status_box",2,"overflow","auto","height","calc(90vh - 250px)","max-height","calc(90vh - 250px)"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],["type","button","pdf","",1,"btn","btn-primary","pdf-print",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer",3,"click"],[1,"fas","fa-file-excel"],["class","",3,"ngClass",4,"ngIf"],["class","select_option",4,"ngIf"],[1,"select_option"],[3,"click",4,"ngFor","ngForOf"],[1,"",3,"ngClass"],["id","print-section"],[1,"home-page-tabel",2,"width","100%",3,"data","settings","action"],[2,"padding","0px","min-width","300px","display","inline-block","position","relative",3,"hidden","ngStyle"],["id","concise-view-map",2,"width","100%","height","87vh"],[1,"tracker_img",3,"ngStyle"],["src","./assets/images/arrow-top.png","alt","image"],[1,"cluster-view"],["type","checkbox",2,"vertical-align","middle","margin-top","0",3,"ngModel","ngModelChange","change"],[2,"vertical-align","middle","margin-left","5px"]],template:function(t,e){1&t&&(r["\u0275\u0275template"](0,At,1,0,"tmg",0),r["\u0275\u0275template"](1,ee,3,2,"div",0)),2&t&&(r["\u0275\u0275property"]("ngIf",20632==e.user._customer.foid||20632==e.user._details.foid),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",20632!=e.user._customer.foid&&20632!=e.user._details.foid))},directives:[c.u,Dt.a,c.t,It.a,c.x,Ft.ChartComponent,s.s,s.r,_.a,c.r,tt.a,tt.r,tt.u],pipes:[c.G],styles:['.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .icon{margin-right:5px;cursor:pointer}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#96ec11;color:#000}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.status_box[_ngcontent-%COMP%]{width:100%}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0!important;border:none!important;border-top:1px solid #d7dee4!important}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:14px 10px;font-weight:700}.select_option[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:10px;margin-left:10px;margin-bottom:10px;margin-right:10px;-webkit-box-shadow:rgba(0,0,0,.2) 0 3px 10px 0;box-shadow:0 3px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:100%;margin-right:5px;display:inline-block;vertical-align:middle;-webkit-box-shadow:0 5px 10px 0 rgba(0,0,0,.2);box-shadow:0 5px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{background-color:#96ec11}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{background-color:#dc3545}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{background-color:#ff5200}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4)   span[_ngcontent-%COMP%]{background-color:#2196f3}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5)   span[_ngcontent-%COMP%]{background-color:#009688}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6)   span[_ngcontent-%COMP%]{background-color:#607d8b}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7)   span[_ngcontent-%COMP%]{background-color:#9c27b0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:10px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}mwlResizable[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box}.map-table-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;border-right:5px solid #fff}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:60px}[_nghost-%COMP%]     th:nth-child(3){width:50px}[_nghost-%COMP%]     th:nth-child(4){width:70px}[_nghost-%COMP%]     th:nth-child(5){width:70px}[_nghost-%COMP%]     th:nth-child(6){width:42px}[_nghost-%COMP%]     th:nth-child(7){width:42px}[_nghost-%COMP%]     th:nth-child(8){width:100px}[_nghost-%COMP%]     th:nth-child(9){width:44px}[_nghost-%COMP%]     th:nth-child(10){width:70px}[_nghost-%COMP%]     th{position:relative;z-index:999}[_nghost-%COMP%]     th .sort-container{width:15px;display:none}[_nghost-%COMP%]     th .filter-input-container{width:auto}[_nghost-%COMP%]     th:hover .sort-container{display:inline-block}[_nghost-%COMP%]     th:hover .filter-input-container{width:calc(100% - 17px)}[_nghost-%COMP%]     td .icon.fa-chart-pie{color:#04a9f5}[_nghost-%COMP%]     td .icon.fa-chart-pie span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-chart-pie span:before{content:"Change Vehicle Status";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-star{color:#8518d5}[_nghost-%COMP%]     td .icon.fa-star span{position:absolute;display:none;padding:10px 44px;font-weight:400;font-size:11px;left:-36px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-star span:before{content:"Vehicle Event";display:block;position:absolute;top:0;left:0;background-color:#8518d5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8518d5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-star:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-route{color:#ff8091}[_nghost-%COMP%]     td .icon.fa-route span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-route span:before{content:"Route Tracker";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-route:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-truck{color:#5cd050}[_nghost-%COMP%]     td .icon.fa-truck span{position:absolute;display:none;padding:10px 23px;font-size:11px;font-weight:400;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-truck span:before{content:"Trips";display:block;position:absolute;top:0;left:0;background-color:#5cd050;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-truck span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #5cd050;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-truck:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-globe{color:#d51818}[_nghost-%COMP%]     td .icon.fa-globe span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-globe span:before{content:"Vehicle States";display:block;position:absolute;top:0;left:0;background-color:#d51818;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-globe span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d51818;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     td .icon.fa-globe:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle{color:#b150d0}[_nghost-%COMP%]     td .icon.fa-question-circle span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-62px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-question-circle span:before{content:"Report Issue";display:block;position:absolute;top:0;left:0;background-color:#b150d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #b150d0;position:absolute;bottom:-5px;right:10px}[_nghost-%COMP%]     td .icon.fa-user-secret{color:#50a1d0}[_nghost-%COMP%]     td .icon.fa-user-secret span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-user-secret span:before{content:"Station";display:block;position:absolute;top:0;left:0;background-color:#50a1d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-user-secret span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #50a1d0;position:absolute;bottom:-5px;right:22px}[_nghost-%COMP%]     td .icon.fa-user-secret:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-tachometer-alt{color:#ff8099}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:before{content:"Odometer";display:block;position:absolute;top:0;left:0;background-color:#ff8099;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8099;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-tachometer-alt:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-flag-checkered{color:#d84a11}[_nghost-%COMP%]     td .icon.fa-flag-checkered span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:before{content:"Entity flag";display:block;position:absolute;top:0;left:0;background-color:#d84a11;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d84a11;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-flag-checkered:hover span{display:block}[_nghost-%COMP%]     .icon.fa-gavel{color:#d51818}[_nghost-%COMP%]     .icon.fa-gavel span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .icon.fa-gavel span:before{content:"Vehicle Orders";display:block;position:absolute;top:0;left:0;background-color:#d51818;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .icon.fa-gavel span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d51818;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     .icon.fa-gavel:hover span{display:block}[_nghost-%COMP%]     .icon.fa-phone span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .icon.fa-phone span:before{content:"Call Driver";display:block;position:absolute;top:0;left:0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .icon.fa-phone span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     .icon.fa-phone:hover span{display:block}[_nghost-%COMP%]     .loading{color:green}[_nghost-%COMP%]     .unloading{color:red}[_nghost-%COMP%]     .others{color:teal}.tracker_img[_ngcontent-%COMP%]{position:absolute;bottom:10px;z-index:999;width:40px;left:12px}.tracker_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 115px)}[_nghost-%COMP%]     .no-search{background:#fff;color:#000}.exel-icon[_ngcontent-%COMP%]{right:30px;background-color:#4fa9ff;font-size:16px;border-radius:100px;width:40px;height:40px;text-align:center;line-height:40px;color:#fff;-webkit-box-shadow:5px 4px 24px rgba(0,0,0,.4);box-shadow:5px 4px 24px rgba(0,0,0,.4)}.exel-icon[_ngcontent-%COMP%], .pdf-print[_ngcontent-%COMP%]{bottom:35px;position:absolute}.pdf-print[_ngcontent-%COMP%]{width:40px!important;height:40px!important;text-align:center!important;line-height:40px!important;border-radius:100%!important;padding:0;font-size:16px!important;margin-top:0!important;left:0;background-color:red!important;cursor:pointer!important}.cluster-view[_ngcontent-%COMP%]{background:#f2f2f2;position:absolute;z-index:999999;bottom:20px;padding:5px 10px;border-radius:5px;left:45%}.status-print-title[_ngcontent-%COMP%]{margin-top:-7px;padding-bottom:20px}.status-print-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{height:auto;margin:auto;z-index:999999;overflow:visible;border-radius:.17rem;padding:4px 20px;background-color:#c9c2de;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);display:inline-block;color:#000;font-weight:600;font-size:1rem;text-align:center}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}','.nb_card_box[_ngcontent-%COMP%]{position:absolute;top:70px;z-index:998}.status-print-view2[_ngcontent-%COMP%]{width:210mm;height:297mm;margin:auto}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{width:33%;display:inline-block;padding:0;font-size:14px;font-weight:700}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:15px 6px;display:block}.status-print-view[_ngcontent-%COMP%]{padding:15px;height:310mm;font-size:24px}.all_data[_ngcontent-%COMP%]{font-size:12px}.status-print-view[_ngcontent-%COMP%]   .dashboard_chart[_ngcontent-%COMP%]{width:60%;margin:16px auto 15px}.truck-route[_ngcontent-%COMP%]{position:relative;width:80%;margin:20px auto 40px}.truck_road[_ngcontent-%COMP%]{display:block;width:100%}.truck_road[_ngcontent-%COMP%]:before{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;bottom:-3px}.truck_road[_ngcontent-%COMP%]:after{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;right:0;bottom:-3px}.truck_road[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{background-color:#000;height:2px;margin:0}.left-truck[_ngcontent-%COMP%]{margin-left:15px}.right-truck[_ngcontent-%COMP%]{float:right;margin-right:15px}.truck_road[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font-size:40px;color:#f87003}#page-2[_ngcontent-%COMP%]   .status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]:first-child{border-top:0!important}.status-print-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#000;font-weight:600;font-size:1rem;text-align:center}.status_box[_ngcontent-%COMP%]{margin-right:-90px!important}']}),t})();var ae=n("QsjJ"),oe=n("aF+1"),ie=n("Ivxp"),re=n("ZD20"),se=n("61Pi");function le(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"p",2),r["\u0275\u0275text"](2,"Ticket Actions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"p",4),r["\u0275\u0275elementStart"](5,"span"),r["\u0275\u0275text"](6,"Time Remaining"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"i",5),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getExtraTime()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"span",6),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"p",7),r["\u0275\u0275elementStart"](11,"span"),r["\u0275\u0275text"](12,"Reminder"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"i",8),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().setReminder()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"p",7),r["\u0275\u0275elementStart"](15,"span"),r["\u0275\u0275text"](16,"Forward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"i",9),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().forwardTicket()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"p",10),r["\u0275\u0275elementStart"](19,"span"),r["\u0275\u0275text"](20,"Trail List"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"i",11),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getTrailList()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"p",10),r["\u0275\u0275elementStart"](23,"span"),r["\u0275\u0275text"](24,"Comments"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"i",5),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().commentPrompt()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"i",11),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getComments()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",12),r["\u0275\u0275elementStart"](28,"div",13),r["\u0275\u0275elementStart"](29,"div",14),r["\u0275\u0275elementStart"](30,"button",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getRemark(-5)})),r["\u0275\u0275elementStart"](31,"span",16),r["\u0275\u0275text"](32,"Can't Do"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div",17),r["\u0275\u0275elementStart"](34,"button",18),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getRemark(5)})),r["\u0275\u0275elementStart"](35,"span",16),r["\u0275\u0275text"](36,"Mark as done"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](t.ticketInfo&&t.common.findRemainingTime(t.ticketInfo.exp_tkt_time))}}let de=(()=>{class t{constructor(t,e,n,a,o){this.common=t,this.user=e,this.router=n,this.modalService=a,this.api=o}ngOnInit(){}getExtraTime(){this.common.params={ticketId:this.notification.fo_ticket_allocation_id},this.modalService.open(oe.a,{size:"lg",container:"nb-layout",backdrop:"static"})}forwardTicket(){this.common.params={title:"Forward Ticket",ticketId:this.notification.ticket_id,fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id,msg:this.ticketInfo.msg},this.modalService.open(se.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.router.navigate(["/pages/tickets"])})}getTrailList(){this.common.loading++,this.api.get("FoTickets/getTrailLists?ticket_id="+this.notification.ticket_id).subscribe(t=>{console.log(t),this.common.loading--;let e=[];t.data.map((t,n)=>{e.push([n,t.employeename,t.spent_time,t.status])}),this.showList("Trail List",["#","Employee Name","Spent Time","Status"],e)},t=>{this.common.loading--,console.log(t),this.common.showError()})}showList(t,e,n){this.common.params={title:t,headings:e,data:n},this.modalService.open(w.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getComments(){this.common.loading++,this.api.get("FoTickets/getTicketComments?ticket_id="+this.notification.ticket_id).subscribe(t=>{if(console.log(t),this.common.loading--,!t.data.length)return void this.common.showToast("No Comment Found!");let e=[];t.data.map((t,n)=>{e.push([n,t.employeename,t.status,t.comment,t.addtime])}),this.showList("Trail List",["#","Name","Status","Comment","Time"],e)},t=>{this.common.loading--,console.log(t),this.common.showError()})}getRemark(t){this.common.params={title:"Remarks ",isMandatory:5!=t},this.modalService.open(re.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.updateNotificationStatus(t,e.remark)})}updateNotificationStatus(t,e){let n={ticket_id:this.notification.ticket_id,fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id,status:t,aduserid:this.user._details.id,remark:e,msg:this.ticketInfo.msg};console.log(n),this.common.loading++,this.api.post("FoTickets/updateTicketStatus",n).subscribe(t=>{console.log(t),this.common.loading--,this.common.showToast(t.msg),this.router.navigate(["/pages/tickets"])},t=>{this.common.loading--,console.log(t),this.common.showError()})}commentPrompt(){this.common.params={title:"Remarks "},this.modalService.open(re.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.addComment(t.remark)})}addComment(t){let e={ticket_id:this.notification.ticket_id,aduserid:this.user._details.id,comment:t,status:this.notification.status};console.log(e),this.common.loading++,this.api.post("FoTickets/setTicketComments",e).subscribe(t=>{console.log(t),this.common.loading--,this.common.showToast(t.msg)},t=>{this.common.loading--,console.log(t),this.common.showError()})}setReminder(){this.common.params={fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id},this.modalService.open(ie.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.c),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ticket-actions"]],inputs:{ticketInfo:"ticketInfo",notification:"notification"},decls:1,vars:1,consts:[["class","main",4,"ngIf"],[1,"main"],[1,"section"],[1,"actions","action-text"],[1,"info","action-text"],[1,"action-icon","fa","fa-plus",3,"click"],[1,"remain-time"],[1,"forward","action-text"],[1,"action-icon","fa","fa-bell",3,"click"],[1,"action-icon","fa","fa-share",3,"click"],[1,"mark-done","action-text"],[1,"action-icon","fa","fa-info-circle",3,"click"],[1,"footer"],[1,"row"],[1,"col",2,"padding-left","5%"],[1,"btn","btn-default","btn-sm",3,"click"],[2,"margin-left","10px","text-transform","none","cursor","pointer"],[1,"col"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,e){1&t&&r["\u0275\u0275template"](0,le,37,1,"div",0),2&t&&r["\u0275\u0275property"]("ngIf",e.ticketInfo)},directives:[c.u],styles:[".main[_ngcontent-%COMP%]{height:auto;background:#fff;border:1px solid #dee2e6}.section[_ngcontent-%COMP%]{padding:15px 8px;font-weight:500;letter-spacing:.5px;font-family:Exo;color:#181818;font-size:28px}.action-text[_ngcontent-%COMP%]{padding:8px 0 5px 5px;margin-left:8px;margin-right:8px;font-weight:500;color:#000;width:95%;font-family:Roboto}i[_ngcontent-%COMP%]{cursor:pointer}.footer[_ngcontent-%COMP%]{margin-top:10px;border-top:1px solid #b1b0b0;padding-top:3%}.row[_ngcontent-%COMP%]{width:95%}.btn.btn-primary.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:-5%;background:#05276b;margin-bottom:3%}.action-icon[_ngcontent-%COMP%]{float:right;background:#f2f2f2;padding:5px 10px;margin-top:-10px;border-radius:2px;min-width:40px;text-align:center}.remain-time[_ngcontent-%COMP%]{float:right;border:1px solid orange;color:orange;padding:4px 5px;border-radius:20px;margin-top:-8px;margin-right:10px;font-size:10px}.ftr-btn[_ngcontent-%COMP%]{background:#fc4a1a;background:-webkit-gradient(linear,right top,left top,from(#f7b733),to(#fc4a1a));background:linear-gradient(270deg,#f7b733,#fc4a1a);color:#fff;font-weight:700;letter-spacing:.5px;width:100%}"]}),t})();function ce(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1),r["\u0275\u0275element"](2,"a",11),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",t.haltInfo.empname," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("href","tel:"+t.haltInfo.mobileno,r["\u0275\u0275sanitizeUrl"])}}function he(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1," Unknown "),r["\u0275\u0275elementEnd"]())}function me(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](2,1,t.haltInfo.entry_time,"dd MMM HH:mm"))}}function pe(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](2,1,t.haltInfo.start_time,"dd MMM HH:mm"))}}function ge(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.findRemainingTime(t.haltInfo.duration))}}function be(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"th"),r["\u0275\u0275text"](2,"Reason"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](null==t.haltInfo?null:t.haltInfo.halt_type)}}function ue(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275elementStart"](1,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2);return e.handleAction(e.secType1)})),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.common.secondaryType[t.secType1].btnTxt)}}function fe(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275elementStart"](1,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2);return e.handleAction(e.secType2)})),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.common.secondaryType[t.secType2].btnTxt)}}function xe(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275template"](2,ue,3,1,"div",14),r["\u0275\u0275template"](3,fe,3,1,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.secType1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.secType2)}}let ve=(()=>{class t{constructor(t,e,n,a){this.api=t,this.router=e,this.modalService=n,this.common=a,this.haltInfo=null,this.ticketInfo=null,this.notification=null,this.title="",this.secType1="",this.secType2="",this.common.params&&localStorage.setItem("Params",JSON.stringify(this.common.params)),this.common.params=JSON.parse(localStorage.getItem("Params")),this.notification=this.common.params.data,this.title=this.common.params.title,this.secType1=this.common.params.secType1,this.secType2=this.common.params.secType2,console.log(this.title,this.secType1,this.secType2),this.getNotificationDetails(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getNotificationDetails()}getNotificationDetails(){this.common.loading++,this.api.get("FoTickets/getSingleTicketInfo?ticket_id="+this.notification.ticket_id+"&pri_type="+this.notification.pri_type,{}).subscribe(t=>{this.common.loading--,console.log(t),this.haltInfo=t.data.issue_info[0],this.ticketInfo=t.data.tkt_info[0]},t=>{this.common.loading--,console.error(t)})}showLocation(){if(!this.haltInfo.lat)return void this.common.showToast("Location not available!");const t={lat:this.haltInfo.lat,lng:this.haltInfo.long,name:"",time:""};console.log("Location: ",t),this.common.params={location:t,title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})}getHaltOptions(){this.common.loading++;let t="type_id="+this.haltInfo.type_id+"&rowid="+this.haltInfo.id+"&regno="+this.haltInfo.regno+"&halt_type_id="+this.haltInfo.halt_type_id;console.log(t),this.api.get("FoTickets/getHaltDetails?"+t,{}).subscribe(t=>{this.common.loading--,console.log(t),this.changeHalt(t.data[0].title,t.data[0].description,t.data[0].option)},t=>{this.common.loading--,console.error(t)})}changeHalt(t,e,n){this.common.params={title:t,description:e,options:n},this.modalService.open(ae.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data: ",t),t.response&&this.updateHalt(t.option)})}updateHalt(t){let e={type_id:this.haltInfo.type_id,rowid:this.haltInfo.id,regno:this.haltInfo.regno,halt_type_id:t.id,remark:t.name};console.log(e),this.common.loading++,this.api.post("FoTickets/updateHaltTypes",e).subscribe(t=>{this.common.loading--,this.common.showToast(t.msg),console.log(t),this.getNotificationDetails()},t=>{this.common.loading--,console.error(t),this.common.showError()})}findRemainingTime(t){let e=t%60,n=Math.floor(t/60);return n?n+" hours "+e+" minutes":e+" minutes "}handleAction(t){201==t?this.getHaltOptions():202==t&&this.changeDriver()}changeDriver(){}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](l.c),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ticket-site-details"]],decls:49,vars:12,consts:[[2,"border","0px","padding","0 5px"],[1,"ticket_site_details",2,"padding","15px 0px","clear","both","overflow","hidden"],[1,"col-md-6","pr-0"],[1,"row"],[1,"col-sm-10"],[1,"table","table-bordered","table-hover"],[4,"ngIf"],[2,"color","blue","cursor","pointer",3,"click"],[1,"col-md-6"],[3,"ticketInfo","notification"],["class","card","style","margin-top: 10px; padding: 10px;",4,"ngIf"],[3,"href"],[1,"card",2,"margin-top","10px","padding","10px"],[1,"row",2,"margin-left","42%"],["class","col",4,"ngIf"],[1,"col"],[1,"btn","ftr-btn",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"nb-card"),r["\u0275\u0275elementStart"](4,"nb-card-header"),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"h5"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"nb-card-body"),r["\u0275\u0275elementStart"](10,"div"),r["\u0275\u0275elementStart"](11,"table",5),r["\u0275\u0275elementStart"](12,"tbody"),r["\u0275\u0275elementStart"](13,"tr"),r["\u0275\u0275elementStart"](14,"th"),r["\u0275\u0275text"](15,"Vehicle"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275text"](17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"tr"),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Driver"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"td"),r["\u0275\u0275template"](22,ce,3,2,"div",6),r["\u0275\u0275template"](23,he,2,0,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"tr"),r["\u0275\u0275elementStart"](25,"th"),r["\u0275\u0275text"](26,"Time Since"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"td"),r["\u0275\u0275template"](28,me,3,4,"div",6),r["\u0275\u0275template"](29,pe,3,4,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"tr"),r["\u0275\u0275elementStart"](31,"th"),r["\u0275\u0275text"](32,"Duration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](33,ge,2,1,"td",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"tr"),r["\u0275\u0275elementStart"](35,"th"),r["\u0275\u0275text"](36,"Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"td"),r["\u0275\u0275text"](38),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"tr"),r["\u0275\u0275elementStart"](40,"th"),r["\u0275\u0275text"](41,"Map View"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"td"),r["\u0275\u0275elementStart"](43,"span",7),r["\u0275\u0275listener"]("click",(function(){return e.showLocation()})),r["\u0275\u0275text"](44,"click here.."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](45,be,5,1,"tr",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"div",8),r["\u0275\u0275element"](47,"ticket-actions",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](48,xe,4,2,"div",10),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate"](e.title||"Vehicle Halt"),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](null==e.haltInfo?null:e.haltInfo.regno),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",null==e.haltInfo?null:e.haltInfo.empname),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!(null!=e.haltInfo&&e.haltInfo.empname)),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",null==e.haltInfo?null:e.haltInfo.entry_time),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.haltInfo?null:e.haltInfo.start_time),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",null==e.haltInfo?null:e.haltInfo.duration),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"]((null==e.haltInfo?null:e.haltInfo.loc_name)||"Unknown"),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",300==(null==e.notification?null:e.notification.pri_type)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ticketInfo",e.ticketInfo)("notification",e.notification),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.secType1||e.secType2))},directives:[s.s,s.v,s.r,c.u,de],pipes:[c.f],styles:["nb-card-body[_ngcontent-%COMP%]{width:auto}.table[_ngcontent-%COMP%]{background:#fff;width:100%}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-size:1rem;line-height:1.25;font-weight:400}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#0d0e00}.gray-col[_ngcontent-%COMP%]{background:#e2e2e2;font-weight:500}.section[_ngcontent-%COMP%]{background:#f2f2f2;padding:5px 8px;font-weight:500;letter-spacing:.5px}.action-text[_ngcontent-%COMP%]{padding:0 0 3px;border-bottom:1px solid #f2f2f2;margin-left:8px;margin-right:8px;font-weight:500}.action-icon[_ngcontent-%COMP%]{float:right;background:#f2f2f2;padding:5px 10px;margin-top:-10px;border-radius:2px;min-width:40px;text-align:center}.remain-time[_ngcontent-%COMP%]{float:right;border:1px solid orange;color:orange;padding:4px 5px;border-radius:20px;margin-top:-8px;margin-right:10px;font-size:10px}.ftr-btn[_ngcontent-%COMP%]:hover{background:#343a40;color:#fff;font-weight:700;letter-spacing:.5px;cursor:pointer}.ticket_site_details[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%], [_nghost-%COMP%]     ticket-actions .section{padding:10px 15px;border-bottom:1px solid #ccc}[_nghost-%COMP%]     ticket-actions .section{font-size:1.25rem}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var Ce=n("ahTD"),ye=n("TPVD"),_e=n("+lJe"),Se=n("YKH3"),Me=n("Xy1B"),we=n("0zba");function Oe(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275elementStart"](1,"button",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().closeModal()})),r["\u0275\u0275elementStart"](2,"span",16),r["\u0275\u0275text"](3,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Pe(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275text"](1," No Data Available On That Time Period ! "),r["\u0275\u0275elementEnd"]())}function Ee(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",18),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}const ke=function(t){return{regno:t}};let Te=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.activeModal=a,this.vehicleId=null,this.startDate="",this.endDate="",this.openType=this.common.openType,this.vehicleNo="",this.tripstagesData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.common.openType="page",console.log("openType",this.openType);let o=new Date;this.endDate=this.common.dateFormatter(o).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(o.setDate(o.getDate()-1))).split(" ")[0],this.common.refresh=this.refresh.bind(this),"modal"==this.openType&&(console.log("console.log",this.common.params),this.startDate=this.common.params.fromTime?this.common.params.fromTime:this.startDate,this.endDate=this.common.params.toTime?this.common.params.toTime:this.endDate,this.vehicleId=this.common.params.vehicleId,this.vehicleNo=this.common.params.vehicleRegNo,this.getTripStages())}ngOnInit(){}refresh(){this.vehicleId=null,this.getTripStages()}getDate(t){this.common.params={ref_page:"vehicle trip stages"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.startDate)):(this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}getvehicleData(t){console.log("Vehicle Data: ",t),this.vehicleId=t.id}getTripStages(){this.tripstagesData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};const t={vehicleId:this.vehicleId?this.vehicleId:-1,startDate:this.common.dateFormatter1(this.startDate).split(" ")[0],endDate:this.common.dateFormatter1(this.endDate.split(" ")[0])};console.log("params:",t);const e="startDate="+t.startDate+"&endDate="+t.endDate+"&vehicleId="+t.vehicleId;this.common.loading++,this.api.get("TripsOperation/vehicleDynTripSummary?"+e).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.tripstagesData=t.data,console.log("tripstagesData",this.tripstagesData);let e=this.tripstagesData[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.tripstagesData.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.tripstagesData[e][this.headings[t]],class:this.tripstagesData[e][this.headings[t]]>0?"blue":"black",action:this.tripstagesData[e][this.headings[t]]>0?this.openRouteMapper.bind(this,this.tripstagesData[e]):""};t.push(this.valobj)}return t}openRouteMapper(t){console.log("Data",t),this.common.handleModalHeightWidth("class","modal-lg","200","1500");let e=t._startdt.split("T")[0],n=t._startdt.split("T")[1],a=t._enddt.split("T")[0],o=t._enddt.split("T")[1];this.common.params={vehicleId:t._vid,vehicleRegNo:t._regno,fromTime:e+" "+n,toTime:a+" "+o},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}closeModal(){this.activeModal.close()}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-trip-stages"]],decls:25,vars:14,consts:[[2,"border","0px"],[1,"row"],[1,"col-5"],[1,"col-7"],[1,"col-sm-3"],[1,"search_vehicle_input"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-2"],[1,"btn","btn-primary","m-0",3,"click"],["class","col-sm-1",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],[1,"col-sm-1"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Trip States"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"auto-suggestion",6),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getvehicleData(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"input",7),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](13,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",4),r["\u0275\u0275elementStart"](15,"input",8),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](16,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",9),r["\u0275\u0275elementStart"](18,"button",10),r["\u0275\u0275listener"]("click",(function(){return e.getTripStages()})),r["\u0275\u0275text"](19,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](20,Oe,4,0,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"nb-card-body"),r["\u0275\u0275template"](22,Pe,2,0,"div",12),r["\u0275\u0275elementStart"](23,"div"),r["\u0275\u0275template"](24,Ee,1,2,"smart-table",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("preSelected",r["\u0275\u0275pureFunction1"](12,ke,e.vehicleNo)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](13,6,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](16,9,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf","modal"==e.openType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0==e.tripstagesData.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.tripstagesData.length>0))},directives:[s.s,s.v,we.a,c.u,s.r,_.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .red{color:red}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function De(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"table",21),r["\u0275\u0275elementStart"](1,"thead",22),r["\u0275\u0275elementStart"](2,"tr",23),r["\u0275\u0275elementStart"](3,"th"),r["\u0275\u0275text"](4,"Avg. Speed"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"tr",23),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Avg. Speed Moving"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"tr",23),r["\u0275\u0275elementStart"](13,"th"),r["\u0275\u0275text"](14,"Time Taken"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td"),r["\u0275\u0275text"](16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"tr",23),r["\u0275\u0275elementStart"](18,"th"),r["\u0275\u0275text"](19,"Fuel Consuption"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"td"),r["\u0275\u0275text"](21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"tr",23),r["\u0275\u0275elementStart"](23,"th"),r["\u0275\u0275text"](24,"Total Distance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"td"),r["\u0275\u0275text"](26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"tr",23),r["\u0275\u0275elementStart"](28,"th"),r["\u0275\u0275text"](29,"Fuel Avg."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"td"),r["\u0275\u0275text"](31),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"]("",t.vehicleInfo.avgSpeed," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.vehicleInfo.avgSpeedMoving),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.vehicleInfo.timeTot),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.vehicleInfo.fuelCons),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.vehicleInfo.TotDis),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.vehicleInfo.fuelAvg)}}const Ie=function(t){return{background:t}},Fe=function(t){return{regno:t}},Ae=function(){return{regno:""}};let Ve=(()=>{class t{constructor(t,e,n,a){this.common=t,this.api=e,this.activeModal=n,this.mapService=a,this.vehicleInfo=null,this.vehicleId=-1,this.vehicleRegNo=null,this.tonnage=0,this.startDate=new Date,this.endDate=new Date,this.common.handleModalSize("class","modal-lg","1300","px",0),this.common.params&&this.common.params.refData&&(console.log(this.common.params.refData),this.vehicleId=this.common.params.refData._vid,this.vehicleRegNo=this.common.params.refData.Vehicle,this.startDate=new Date(this.common.params.refData["Start Date"]),this.endDate=new Date(this.common.params.refData["End Date"]))}ngOnInit(){}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.setMapType(0),this.mapService.map.setOptions({draggableCursor:"cursor"})}closeModal(){this.activeModal.close()}searchVehicle(t){this.vehicleId=t.id,this.vehicleRegNo=t.regno}getVehicleInfo(){console.log(this.vehicleInfo),this.vehicleInfo=null,this.mapService.clearAll();let t=this.common.dateFormatter(this.startDate),e=this.common.dateFormatter(this.endDate);console.log("start & end",t,e);const n="vId="+this.vehicleId+"&fromTime="+t+"&toTime="+e+"&tonnage="+this.tonnage;console.log("params",n),++this.common.loading,this.api.get("Test/getVehicleAvgFuelConsumption?"+n).subscribe(t=>{--this.common.loading,console.log("Res:",t.data),this.vehicleInfo=t.data,this.vehicleInfo.path.forEach(t=>{this.mapService.createPolyPathManual(this.mapService.createLatLng(t.lat,t.long)),this.mapService.setBounds(this.mapService.createLatLng(t.lat,t.long))}),this.mapService.createMarkers([this.vehicleInfo.path[0],this.vehicleInfo.path[this.vehicleInfo.pathCount-1]],!1,!1)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](ft.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-info"]],decls:34,vars:13,consts:[[1,"modal-header",3,"ngStyle"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-6"],[1,"table","table-bordered","table-hover"],["colspan","2"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[2,"width","90px"],["type","number","placeholder","Tonnage",2,"width","90px",3,"ngModel","ngModelChange"],[1,"row","mr-0"],[1,"col-sm-12","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[1,"go_btn"],[1,"btn","btn-primary",2,"margin","0px","border","0px",3,"click"],["colspan","3"],["class","table table-bordered",4,"ngIf"],[1,"col-6","pl-0"],["id","map",2,"width","100%","height","68vh"],[1,"table","table-bordered"],[1,"thead"],[2,"text-align","center"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h5",1),r["\u0275\u0275text"](2,"Historic Trip Cost Estimate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"button",2),r["\u0275\u0275listener"]("click",(function(){return e.closeModal()})),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275elementStart"](8,"div",6),r["\u0275\u0275elementStart"](9,"table",7),r["\u0275\u0275elementStart"](10,"tbody"),r["\u0275\u0275elementStart"](11,"tr"),r["\u0275\u0275elementStart"](12,"td",8),r["\u0275\u0275elementStart"](13,"auto-suggestion",9),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchVehicle(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td",10),r["\u0275\u0275elementStart"](15,"input",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.tonnage=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"tr"),r["\u0275\u0275elementStart"](17,"td"),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275elementStart"](19,"div",13),r["\u0275\u0275elementStart"](20,"uj-date-time-picker",14),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"td"),r["\u0275\u0275elementStart"](22,"div",12),r["\u0275\u0275elementStart"](23,"div",13),r["\u0275\u0275elementStart"](24,"uj-date-time-picker",14),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"td",15),r["\u0275\u0275elementStart"](26,"button",16),r["\u0275\u0275listener"]("click",(function(){return e.getVehicleInfo()})),r["\u0275\u0275text"](27,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"tr"),r["\u0275\u0275elementStart"](29,"td",17),r["\u0275\u0275template"](30,De,32,6,"table",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](31,"tr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",19),r["\u0275\u0275element"](33,"div",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](8,Ie,e.isLite?"#22b108":"#46a79a")),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("preSelected",e.vehicleId>0?r["\u0275\u0275pureFunction1"](10,Fe,e.vehicleRegNo):r["\u0275\u0275pureFunction0"](12,Ae)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.tonnage),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("isTime",!0)("dateTimeValue",e.startDate),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("isTime",!0)("dateTimeValue",e.endDate),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",null!=e.vehicleInfo))},directives:[c.x,we.a,tt.x,tt.d,tt.r,tt.u,et.a,c.u],styles:['.modal-header[_ngcontent-%COMP%]{padding:10px 15px!important}.tbl[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{margin:0}.tbl[_ngcontent-%COMP%]{overflow:auto;height:60vh;display:block;border:0}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.slide-bar[_ngcontent-%COMP%]{display:-moz-inline-stack;vertical-align:middle;display:inline-block;height:68px;border:2px solid #909090;position:relative;width:100%;margin-top:10px}.time-line-event[_ngcontent-%COMP%]{position:absolute;width:100%}.time-line-event[_ngcontent-%COMP%]   .time-line-scale[_ngcontent-%COMP%]{position:relative;width:98%;border-bottom:1px solid #000;top:4px}.time-line-event[_ngcontent-%COMP%]   .time-line-circle[_ngcontent-%COMP%]{position:absolute;height:10px;top:50%;background-color:#0ff}.slide-bar[_ngcontent-%COMP%]   .player_inner[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:auto;margin:0;padding:0 15px}.player_inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;background-color:#000;border:0;color:#fff;font-size:12px;padding:8px 10px;border-radius:5px;outline:none!important}.player_inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868686}.player_inner[_ngcontent-%COMP%]   .road[_ngcontent-%COMP%]{float:right;margin-top:5px}.player_inner[_ngcontent-%COMP%]   span.clock[_ngcontent-%COMP%]{display:block;text-align:right;margin-top:0}.player_inner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .tooltip[_ngcontent-%COMP%]{display:inline-block}.tooltip[_ngcontent-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{width:120px;background-color:#555;color:#fff;text-align:center;padding:5px 0;border-radius:6px;margin:0!important;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.btn-primary.form-control[_ngcontent-%COMP%]{border:0;color:#fff;padding:5px 0}.close[_ngcontent-%COMP%]{font-size:36px;padding:8px 16px;outline:none}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px!important;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;word-break:break-all}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .go_btn[_ngcontent-%COMP%]{width:50px!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.lite[_ngcontent-%COMP%]{margin-left:50vh!important;font-weight:1000;color:#8b008b}.star[_ngcontent-%COMP%]{font-size:16px;color:#000}']}),t})();function Le(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",20),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().openAddTripModal()})),r["\u0275\u0275text"](1,"Add Trip"),r["\u0275\u0275elementEnd"]()}}function ze(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",21),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let je=(()=>{class t{constructor(t,e,n,a,o,i,r){let s;this.datePipe=t,this.api=e,this.common=n,this.dateService=a,this.user=o,this.map=i,this.modalService=r,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},s=new Date,this.endDate=new Date(s),this.startDate=new Date(s.setDate(s.getDate()-14)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleTrips()}getVehicleTrips(){this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let t=this.common.dateFormatter(this.startDate),e=this.common.dateFormatter(this.endDate);console.log("start & end",t,e);let n="vehicleId="+this.vehicleId+"&startDate="+t+"&endDate="+e;console.log("params",n),++this.common.loading,this.api.get("TripsOperation/getTrips?"+n).subscribe(t=>{if(--this.common.loading,console.log("Res:",t.data),this.vehicleTrips=t.data,null!=this.vehicleTrips){console.log("vehicleTrips",this.vehicleTrips);let t=this.vehicleTrips[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};"Start Date"!==e&&"End Date"!==e||(t.type="date"),this.table.data.headings[e]=t}this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}else this.common.showToast("No Record Found !!")},t=>{--this.common.loading,console.log("Err:",t)})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(var e=0;e<this.vehicleTrips.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[e]),isHTML:!0,class:"black"}:"Vehicle"==this.headings[t]?{value:this.vehicleTrips[e][this.headings[t]],action:this.openShowRoute.bind(this,this.vehicleTrips[e]),isHTML:!0,class:"blue"}:{value:this.vehicleTrips[e][this.headings[t]],class:"black",action:""},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[e])},"admin"==this.user._loggedInBy&&this.valobj.action.icons.push({class:"fa fa-chart-pie change-status",action:this.openChangeStatusModal.bind(this,this.vehicleTrips[e])});this.valobj.style={background:this.vehicleTrips[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}actionIcons(t){let e=[{class:"fa fa-question-circle report-btn",action:this.reportIssue.bind(this,t)},{class:" fa fa-route route-mapper",action:this.openRouteMapper.bind(this,t)},{class:"fa fa-star  vehicle-report",action:this.vehicleReport.bind(this,t)},{class:"fa fa-chart-bar status",action:this.vehicleStates.bind(this,t)},{class:"fa fa-handshake-o trip-settlement",action:this.tripSettlement.bind(this,t)},{class:"fa fa-road route-view",action:this.vehicleInfo.bind(this,t)}];return this.user.permission.edit&&e.push({class:"fa fa-pencil-square-o  edit-btn",action:this.update.bind(this,t)}),this.user.permission.delete&&e.push({class:" fa fa-trash remove",action:this.deleteTrip.bind(this,t)}),e}searchVehicle(t){this.vehicleId=t.id,this.vehicleRegNo=t.regno}getUpadte(t){t.endTime?this.common.showToast("This trip cannot be updated "):(this.common.params=t,console.log("vehicleTrip",t),this.modalService.open(xt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.respone),this.getVehicleTrips()}))}openRouteMapper(t){let e,n,a;console.log("----trip----",t),e=new Date,n=new Date(e.setDate(e.getDate()-2)),a=this.common.dateFormatter(n);let o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vid,vehicleRegNo:t.Vehicle,fromTime:t._startdate||o,toTime:t._enddate||i},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}openAddTripModal(){this.common.params={vehId:-1},this.modalService.open(ye.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getVehicleTrips()})}reportIssue(t){this.common.params={refPage:"vt"},console.log("reportIssue",t),this.modalService.open(ht.a,{size:"sm",container:"nb-layout"}).result.then(e=>e.status&&this.common.reportAnIssue(e.issue,t.id))}deleteTrip(t){console.log("deleteTrip",t);let e={tripId:t._tripid};++this.common.loading,this.api.post("VehicleTrips/deleteVehicleTrip",e).subscribe(t=>{--this.common.loading,console.log("Res:",t),this.common.showToast(t.msg)},t=>{--this.common.loading,console.log("Err:",t)})}update(t){this.common.params={vehicleTrip:t},this.modalService.open(_e.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{})}tripSettlement(t){console.log("======",t),this.common.params={refData:{refId:t._tripid,refType:14}},this.modalService.open(K.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getVehicleTrips()})}vehicleInfo(t){console.log(t),this.common.params={refData:t},this.modalService.open(Ve,{size:"lg",container:"nb-layout",backdrop:"static"})}openChangeDriverModal(t){this.common.params={vehicleId:t.vehicle_id,vehicleRegNo:t.regno},this.modalService.open(Se.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.respone)})}vehicleReport(t){console.log("trip------",t);let e=t._startdate,n=t._enddate;console.log("trip------",e,n),this.common.params={vehicleId:t._vid,vehicleRegNo:t.Vehicle,fromTime:e,toTime:n},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(pt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"mycustomModalClass"})}vehicleStates(t){console.log("trip------",t);let e=t._startdate,n=t._enddate;console.log("trip------",e,n),this.common.params={vehicleId:t._vid,vehicleRegNo:t.Vehicle,fromTime:e,toTime:n},this.common.openType="modal",this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(Te,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"mycustomModalClass"})}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Vehicle Trip",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"Customer Name::"+e.data.name,"Report Name::Vehicle Trip",["Action"],"")},t=>{this.common.loading--,console.log(t)})}openChangeStatusModal(t){let e,n,a;console.log("trip====",t),e=new Date,n=new Date(e.setDate(e.getDate()-2)),a=this.common.dateFormatter(n);let o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date),r={vehicle_id:t._vid,suggest:11,latch_time:t._startdate||o,tTime:t._enddate||i};console.log("VehicleStatusData",r),this.common.params=r,this.modalService.open(vt.a,{size:"lg",container:"nb-layout"}).result.then(t=>{})}openShowRoute(t){let e=[];e=t._viapoints,e.length>1?(window.open(this.map.getURL(e)),this.common.params.data={title:"Map Route"}):this.common.showError("Atleast Two Points required")}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](_t.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](ft.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-trip"]],features:[r["\u0275\u0275ProvidersFeature"]([c.f])],decls:28,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"col-sm-6","text-right"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],[1,"col-sm-3","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","vehicleTrip",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Trips"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275template"](7,Le,2,0,"button",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"nb-card-body"),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"div",6),r["\u0275\u0275elementStart"](11,"div",7),r["\u0275\u0275elementStart"](12,"auto-suggestion",8),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchVehicle(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",9),r["\u0275\u0275elementStart"](14,"uj-date-time-picker",10),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",9),r["\u0275\u0275elementStart"](16,"uj-date-time-picker",11),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",12),r["\u0275\u0275elementStart"](18,"button",13),r["\u0275\u0275listener"]("click",(function(){return e.getVehicleTrips()})),r["\u0275\u0275text"](19,"OK"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",14),r["\u0275\u0275elementStart"](21,"span"),r["\u0275\u0275elementStart"](22,"span",15),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("vehicleTrip")})),r["\u0275\u0275element"](23,"i",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"span",17),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("vehicleTrip")})),r["\u0275\u0275element"](25,"i",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,ze,1,2,"smart-table",19),r["\u0275\u0275element"](27,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.startDate),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isStart",!1),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",e.vehicleTrips&&e.vehicleTrips.length))},directives:[s.s,s.v,c.u,s.r,we.a,et.a,_.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 235px);height:auto!important}[_nghost-%COMP%]     td i.fa-pencil-square-o{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-pencil-square-o span{position:absolute;display:none;padding:11px 21px;left:-9px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-pencil-square-o span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-question-circle{background-color:#1de9b6;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Report";display:block;position:absolute;top:0;left:0;background-color:#1de9b6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1de9b6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash{background-color:#f44236;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-trash:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash span:before{content:"trash";display:block;position:absolute;top:0;left:0;background-color:#f44236;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f44236;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#ff8091;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-star{background-color:#8280ff;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-star:hover span{display:block}[_nghost-%COMP%]     td i.fa-star span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-star span:before{content:"Events";display:block;position:absolute;top:0;left:0;background-color:#8280ff;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8280ff;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-bar{background-color:#80f54f;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-bar:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-bar span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-bar span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#80f54f;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-bar span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #80f54f;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-handshake-o{background-color:#15986e;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-handshake-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-handshake-o span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-handshake-o span:before{content:"Settlement";display:block;position:absolute;top:0;left:0;background-color:#15986e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #15986e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-road{background-color:#ff0;color:#000;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-road:hover span{display:block}[_nghost-%COMP%]     .blue{text-decoration:underline;color:#00f}[_nghost-%COMP%]     td i.fa-road span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-road span:before{content:"Hist. Fuel Consumption";display:block;position:absolute;top:0;left:0;background-color:#ff0;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-road span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff0;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var Re=n("r+Tg");function He(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().period=e}))("change",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().changeTrendType()})),r["\u0275\u0275elementStart"](2,"option",8),r["\u0275\u0275text"](3,"Day"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"option",17),r["\u0275\u0275text"](5,"Week"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",18),r["\u0275\u0275text"](7,"Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.period)}}function Ne(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().week_month_number=e}))("change",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().changeTrendType("week_month")})),r["\u0275\u0275elementStart"](2,"option",19),r["\u0275\u0275text"](3,"4"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"option",20),r["\u0275\u0275text"](5,"5"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",21),r["\u0275\u0275text"](7,"6"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"option",22),r["\u0275\u0275text"](9,"7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",23),r["\u0275\u0275text"](11,"8"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",24),r["\u0275\u0275text"](13,"9"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"option",25),r["\u0275\u0275text"](15,"10"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.week_month_number)}}function Ue(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",26),r["\u0275\u0275elementStart"](1,"input",27),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getDate("start")})),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](2,1,t.fromDate,"dd MMM yyyy"))}}function Ge(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",26),r["\u0275\u0275elementStart"](1,"input",28),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getDate("end")})),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](2,1,t.endDate,"dd MMM yyyy"))}}function Be(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",26),r["\u0275\u0275elementStart"](1,"button",29),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getTrend()})),r["\u0275\u0275text"](2,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function $e(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Loading Hours"),r["\u0275\u0275elementEnd"]())}function We(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Unloading Hours "),r["\u0275\u0275elementEnd"]())}function Ke(t,e){}function qe(t,e){1&t&&r["\u0275\u0275template"](0,Ke,0,0,"ng-template")}function Je(t,e){if(1&t&&r["\u0275\u0275text"](0),2&t){const t=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275textInterpolate2"]("",t.sitename,"_",t.siteid,"")}}function Ye(t,e){if(1&t&&r["\u0275\u0275text"](0),2&t){const t=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275textInterpolate"](t.sitename)}}function Ze(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",41),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](4).locationOnMap(e)})),r["\u0275\u0275template"](1,qe,1,0,void 0,42),r["\u0275\u0275template"](2,Je,1,2,"ng-template",null,43,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](4,Ye,1,1,"ng-template",null,44,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275reference"](3),e=r["\u0275\u0275reference"](5),n=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","unknown"==n.sitename.toLowerCase())("ngIfThen",t)("ngIfElse",e)}}function Qe(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"td",45),r["\u0275\u0275text"](1,"No Site"),r["\u0275\u0275elementEnd"]())}function Xe(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275template"](1,Ze,6,3,"td",39),r["\u0275\u0275template"](2,Qe,2,0,"td",40),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",41),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](4).getPendingStatusDetails(e)})),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!=t.sitename&&null!=t.siteid),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.sitename),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.loading_hrs),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.loading_count)}}function tn(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,Xe,7,4,"tr",37),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",11==n.trendType&&0!=t.loading_count)}}function en(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275template"](1,tn,2,1,"ng-container",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.siteDetails)}}function nn(t,e){}function an(t,e){1&t&&r["\u0275\u0275template"](0,nn,0,0,"ng-template")}function on(t,e){if(1&t&&r["\u0275\u0275text"](0),2&t){const t=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275textInterpolate2"]("",t.sitename,"_",t.siteid,"")}}function rn(t,e){if(1&t&&r["\u0275\u0275text"](0),2&t){const t=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275textInterpolate"](t.sitename)}}function sn(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",48),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](4).locationOnMap(e)})),r["\u0275\u0275template"](1,an,1,0,void 0,42),r["\u0275\u0275template"](2,on,1,2,"ng-template",null,43,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](4,rn,1,1,"ng-template",null,44,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275reference"](3),e=r["\u0275\u0275reference"](5),n=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","unknown"==n.sitename.toLowerCase())("ngIfThen",t)("ngIfElse",e)}}function ln(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"td",49),r["\u0275\u0275text"](1,"No Site"),r["\u0275\u0275elementEnd"]())}function dn(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275template"](1,sn,6,3,"td",46),r["\u0275\u0275template"](2,ln,2,0,"td",47),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",48),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](4).getPendingStatusDetails(e)})),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!=t.sitename&&null!=t.siteid),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.sitename),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.unloading_hrs),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.unloading_count)}}function cn(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,dn,7,4,"tr",37),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==n.trendType&&0!=t.unloading_count)}}function hn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275template"](1,cn,2,1,"ng-container",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.siteUnloading)}}function mn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",34),r["\u0275\u0275elementStart"](1,"table",35),r["\u0275\u0275elementStart"](2,"thead",36),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"Site Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,$e,2,0,"th",37),r["\u0275\u0275template"](7,We,2,0,"th",37),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,en,2,1,"tbody",37),r["\u0275\u0275template"](11,hn,2,1,"tbody",37),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",11==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==t.trendType),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",11==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==t.trendType)}}function pn(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Loading Hours"),r["\u0275\u0275elementEnd"]())}function gn(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Unloading Hours "),r["\u0275\u0275elementEnd"]())}function bn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.vehicle_id),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.loading_hrs),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.ldng_count)}}function un(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,bn,7,3,"tr",37),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",11==n.trendType&&0!=t.ldng_count)}}function fn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275template"](1,un,2,1,"ng-container",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.vehicleDetails)}}function xn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.vehicle_id),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.unloading_hrs),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.unldng_count)}}function vn(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,xn,7,3,"tr",37),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==n.trendType&&0!=t.unldng_count)}}function Cn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275template"](1,vn,2,1,"ng-container",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.vehicleUnloading)}}function yn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",50),r["\u0275\u0275elementStart"](1,"table",35),r["\u0275\u0275elementStart"](2,"thead",36),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"Vehicle Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,pn,2,0,"th",37),r["\u0275\u0275template"](7,gn,2,0,"th",37),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,fn,2,1,"tbody",37),r["\u0275\u0275template"](11,Cn,2,1,"tbody",37),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",11==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==t.trendType),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",11==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",21==t.trendType)}}function _n(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](5,"td"),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.vehicle_id),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.onward)}}function Sn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",51),r["\u0275\u0275elementStart"](1,"table",52),r["\u0275\u0275elementStart"](2,"thead",53),r["\u0275\u0275elementStart"](3,"tr"),r["\u0275\u0275elementStart"](4,"th"),r["\u0275\u0275text"](5,"Vehicle Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"th"),r["\u0275\u0275text"](7,"OnWard Hours"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"th"),r["\u0275\u0275text"](9,"Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"tbody"),r["\u0275\u0275template"](11,_n,6,2,"tr",38),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngForOf",t.vehicleDetails)}}function Mn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",30),r["\u0275\u0275template"](1,mn,12,4,"div",31),r["\u0275\u0275template"](2,yn,12,4,"div",32),r["\u0275\u0275template"](3,Sn,12,1,"div",33),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.onWardFlag),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.onWardFlag),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.onWardFlag)}}let wn=(()=>{class t{constructor(t,e,n,a,o,i){this.api=t,this.common=e,this.theme=n,this.user=a,this.datepipe=o,this.modalService=i,this.Hours=[],this.dateDay=[],this.startDate="",this.endDate="",this.lastTrend="",this.showtrend=!1,this.showTables=!1,this.Details=[],this.siteDetails=[],this.vehicleDetails=[],this.kmpdDate=[],this.showPeriod=!0,this.dateStr=[],this.trendType="11",this.siteUnloading=[],this.vehicleUnloading=[],this.onWardDistance=[],this.week_month_number="4",this.period="0",this.url="",this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",this.onWardFlag=!1,this.fromDate="",this.lastDurationCategory="",this.element={},this.chartObject={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:""},this.getDefaultTrend(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getDefaultTrend()}getDefaultTrend(){let t,e,n;t=new Date,e=new Date(t.setDate(t.getDate()-1)),this.endDate=this.common.dateFormatter(e),console.log("enddate for default",this.endDate),"0"==this.period?(n=new Date(t.setDate(t.getDate()-6)),this.fromDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.fromDate),console.log("zero period call"),this.getDayWiseTrends()):"1"==this.period?(this.startDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.startDate),this.getweeklyTrend()):"2"==this.period?(this.startDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.startDate),this.getMonthlyTrends()):(n=new Date(t.setDate(t.getDate()-6)),this.fromDate=this.common.dateFormatter(n))}showChart(){console.log("dateday:showChart",this.dateDay),console.log("kmpd:showChart",this.dateDay),console.log("Hours:showChart",this.Hours),this.chartObject.type="line","31"==this.trendType?(this.chartObject.data={labels:this.kmpdDate,datasets:[{data:this.Hours,borderColor:this.bgColor,fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chartObject.options={responsive:!0,maintainAspectRatio:!1,elements:this.element,legend:{display:!1},yAxes:[{ticks:{min:100,max:500,stepSize:100}}]}):(this.chartObject.data={labels:this.dateDay,datasets:[{data:this.Hours,borderColor:this.bgColor,fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chartObject.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},yAxes:[{ticks:{min:100,max:500,stepSize:100}}]}),console.log("lable",this.chartObject.lables)}getSiteWise(){let t={startDate:this.common.dateFormatter(this.fromDate).split(" ")[0],endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsSiteWise",t).subscribe(t=>{this.common.loading--,this.siteDetails=t.data,console.log("siteDetails: ",this.siteDetails),this.siteUnloading=[],z.sortBy(this.siteDetails,["unloading_hrs"]).reverse().map(t=>{console.log("keydata",t),this.siteUnloading.push(t)})},t=>{this.common.loading--,this.common.showError()})}getVehicleWise(){let t={startDate:this.common.dateFormatter(this.fromDate).split(" ")[0],endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsVehicleWise",t).subscribe(t=>{this.common.loading--,this.vehicleDetails=t.data,console.log("vehicleDetails: ",this.vehicleDetails),this.vehicleUnloading=[],z.sortBy(this.vehicleDetails,["unloading_hrs"]).reverse().map(t=>{this.vehicleUnloading.push(t)})},t=>{this.common.loading--,this.common.showError()})}changeTrendType(t){"week_month"==t?"1"==this.period?this.getweeklyTrend():"2"==this.period&&this.getMonthlyTrends():"31"==this.trendType?(this.showTables=!1,this.showPeriod=!1,this.getOnwardDistance()):"0"==this.period?(this.showPeriod=!0,"DayWise"==this.lastDurationCategory?"kmpd"==this.lastTrend?this.getDayWiseTrends():this.getCategoryDayWise():this.getDayWiseTrends()):"1"==this.period?(this.showPeriod=!0,this.showTables=!1,"WeekWise"==this.lastDurationCategory?this.getCategoryWeekWise():this.getweeklyTrend()):(this.showPeriod=!0,this.showTables=!1,"MonthWise"==this.lastDurationCategory?this.getCategoryMonthWise():this.getMonthlyTrends()),this.lastTrend=this.trendType}getDate(t){this.common.params={ref_page:"trends"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.fromDate="",this.fromDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("fromDate",this.fromDate)):(this.endDate="",this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}getDayWiseTrends(){this.lastTrend="",this.Details=[],console.log("getDayWiseTrends call"),this.dateDay=[],this.fromDate=this.common.dateFormatter(this.fromDate).split(" ")[0],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0];let t={startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsDayWise",t).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.Details=t.data,this.Details.forEach(t=>{this.showdate=this.datepipe.transform(t.date_day,"dd-MMM"),this.dateDay.push(this.showdate),console.log("dateDay: ",this.showdate)}),this.getCategoryDayWise()},t=>{this.common.loading--,this.common.showError()}),this.getSiteWise(),this.getVehicleWise()}getCategoryDayWise(){this.Hours=[],this.lastDurationCategory="DayWise",console.log("changeTrendType:","call"),this.Details.forEach(t=>{"11"==this.trendType?(this.Hours.push(t.loading_hrs),this.showTables=!0,this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",this.onWardFlag=!1,console.log("Hours: ",this.Hours)):"21"==this.trendType?(this.Hours.push(t.unloading_hrs),this.showTables=!0,this.flag="UnLoading",this.bgColor="#E91E63",this.yScale="Hours",this.onWardFlag=!1):"0"==this.trendType&&(this.Hours.push(t.onward),this.showTables=!0,this.flag="onWard",this.bgColor="#4CAF50",this.yScale="percent",this.onWardFlag=!0)}),this.showChart()}getweeklyTrend(){let t,e;this.dateStr=[],this.Details=[],t=new Date,this.endDate=this.common.dateFormatter(new Date(t.setDate(t.getDate()-1))).split(" ")[0];let n=parseInt(this.week_month_number);console.log("converted number",n),e=new Date(t.setDate(t.getDate()-7*n)),this.startDate=this.common.dateFormatter(e.setDate(e.getDate()+1)).split(" ")[0],console.log("startDate:weekly",this.startDate);let a={startDate:this.startDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",a),this.common.loading++,this.api.post("Trends/getTrendsWeekWise",a).subscribe(t=>{this.common.loading--,console.log("res:weekWise",t.data),this.Details=t.data,this.Details.forEach(t=>{this.dateStr.push(t.date_day)}),this.getCategoryWeekWise()},t=>{this.common.loading--,this.common.showError()})}getCategoryWeekWise(){let t;this.dateDay=[],this.Hours=[],this.lastDurationCategory="WeekWise",parseInt(this.week_month_number),console.log("datestr length",this.dateStr.length);for(let e=0;e<this.dateStr.length;e++)if(t=this.datepipe.transform(this.dateStr[e],"dd-MMM")+" - ",this.dateStr[e+1]){let n=new Date(this.dateStr[e+1]);t+=this.datepipe.transform(this.common.dateFormatter(new Date(n.setDate(n.getDate())-1)),"dd-MMM"),this.dateDay.push(t)}else e+1==this.dateStr.length?(t+=this.datepipe.transform(this.endDate,"dd-MMM"),this.dateDay.push(t)):(t+=this.datepipe.transform(this.dateStr[e],"dd-MMM"),this.dateDay.push(t));this.Details.forEach(t=>{"11"==this.trendType?(this.Hours.push(t.loading_hrs),this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours"):"21"==this.trendType?(this.Hours.push(t.unloading_hrs),this.flag="UnLoading",this.bgColor="#E91E63",this.yScale="Hours"):"0"==this.trendType&&(this.Hours.push(t.onward),this.flag="onWard",this.bgColor="#4CAF50",this.yScale="percent")}),this.showChart()}getMonthlyTrends(){let t,e;this.showTables=!1,this.Details=[],this.dateStr=[],t=new Date,this.endDate=this.common.dateFormatter(new Date(t.setDate(t.getDate()-1))).split(" ")[0];let n=parseInt(this.week_month_number);console.log("converted number",n),e=new Date(t.setMonth(t.getMonth()-n)),this.startDate=this.common.dateFormatter(e.setDate(e.getDate()+1)).split(" ")[0],console.log("startDate:monthly",this.startDate);let a={startDate:this.startDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",a),this.common.loading++,this.api.post("Trends/getTrendsMonthWise",a).subscribe(t=>{this.common.loading--,this.Details=t.data,console.log("res:monthWise",t.data),this.Details.forEach(t=>{this.dateStr.push(t.date_day)}),this.getCategoryMonthWise()},t=>{this.common.loading--,this.common.showError()})}getCategoryMonthWise(){let t;this.dateDay=[],this.Hours=[],this.lastDurationCategory="MonthWise",parseInt(this.week_month_number);for(let e=0;e<this.dateStr.length;e++)if(t=this.datepipe.transform(this.dateStr[e],"dd-MMM")+" - ",this.dateStr[e+1]){let n=new Date(this.dateStr[e+1]);t+=this.datepipe.transform(this.common.dateFormatter(new Date(n.setDate(n.getDate())-1)),"dd-MMM"),this.dateDay.push(t)}else e+1==this.dateStr.length?(t+=this.datepipe.transform(this.endDate,"dd-MMM"),this.dateDay.push(t)):(t+=this.datepipe.transform(this.dateStr[e],"dd-MMM"),this.dateDay.push(t));console.log("dateDay:month ",this.dateDay),this.Details.forEach(t=>{"11"==this.trendType?(this.Hours.push(t.loading_hrs),this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",console.log("loading case:","call")):"21"==this.trendType?(this.Hours.push(t.unloading_hrs),this.flag="UnLoading",this.bgColor="#E91E63",this.yScale="Hours"):"0"==this.trendType&&(this.Hours.push(t.onward),this.flag="onWard",this.bgColor="#4CAF50",this.yScale="percent")}),this.showChart()}getPendingStatusDetails(t){let e={siteId:t.siteid,startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};this.common.loading++,this.api.post("Trends/getSiteWiseVehicleList",e).subscribe(t=>{this.common.loading--,console.log(t);let e=[];t.data.map((t,n)=>{"11"==this.trendType?11==t.halttypid&&e.push([t.regno,t.countevent]):21==t.halttypid&&e.push([t.regno,t.countevent])}),console.log(e),this.common.params={title:"SiteWise Vehicle List:",headings:["Vehicle_RegNo.","Count Event"],data:e},this.modalService.open(Re.a,{size:"sm",container:"nb-layout"})},t=>{this.common.loading--,console.log(t)})}locationOnMap(t){if(!t.lat)return void this.common.showToast("Vehicle location not available!");const e={lat:t.lat,lng:t.long,name:"",time:""};console.log("Location: ",e),this.common.params={location:e,title:"Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})}getOnwardDistance(){this.onWardDistance=[],this.kmpdDate=[],this.Hours=[],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0],this.fromDate=this.common.dateFormatter(this.fromDate).split(" ")[0];let t={startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getGroupOnwardDistance",t).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.onWardDistance=t.data,this.showTables=!1,this.showPeriod=!1,this.onWardDistance.forEach(t=>{this.showdate=this.datepipe.transform(t.DATE,"dd-MMM"),this.kmpdDate.push(this.showdate),this.Hours.push(t.KMPD),console.log("dateDay , Hours: ",this.kmpdDate,this.Hours),this.yScale="KMPD"}),this.element={line:{tension:0}},this.bgColor="#A0522D",this.showChart()},t=>{this.common.loading--,this.common.showError()})}getTrend(){"31"==this.trendType?(this.lastTrend="kmpd",this.getOnwardDistance()):this.getDayWiseTrends()}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](s.Kb),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trends"]],decls:27,vars:11,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange","change"],["value","11"],["value","21"],["value","0"],["value","31"],["class","col-sm-3",4,"ngIf"],["class","col-sm-2",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"col-sm-1","pr-0","text-right",2,"padding-top","50px"],[1,"col-sm-11"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],["class","row","style","margin-top: 10px",4,"ngIf"],["value","1"],["value","2"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],[1,"col-sm-2"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"row",2,"margin-top","10px"],["class","col-sm-6 pr-0",4,"ngIf"],["class","col-sm-6",4,"ngIf"],["class","col-sm-12","style","height:300px;overflow:auto;",4,"ngIf"],[1,"col-sm-6","pr-0"],[1,"table","table-bordered"],[1,"thead"],[4,"ngIf"],[4,"ngFor","ngForOf"],["style","color:#00695C;",3,"click",4,"ngIf"],["style","color:#00695C;",4,"ngIf"],[2,"color","#00695C",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["showid",""],["showname",""],[2,"color","#00695C"],["style","color:#E91E63;",3,"click",4,"ngIf"],["style","color:#E91E63;",4,"ngIf"],[2,"color","#E91E63",3,"click"],[2,"color","#E91E63"],[1,"col-sm-6"],[1,"col-sm-12",2,"height","300px","overflow","auto"],[1,"table","table-bordered",2,"margin-left","70px","margin-right","70px","text-align","center"],[1,"thead",2,"background-color","darkgrey"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.trendType=t}))("change",(function(){return e.changeTrendType()})),r["\u0275\u0275elementStart"](6,"option",6),r["\u0275\u0275text"](7,"Loading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"option",7),r["\u0275\u0275text"](9,"Unloading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",8),r["\u0275\u0275text"](11,"Onward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",9),r["\u0275\u0275text"](13,"Onward - KMPD"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,He,8,1,"div",10),r["\u0275\u0275template"](15,Ne,16,1,"div",10),r["\u0275\u0275template"](16,Ue,3,4,"div",11),r["\u0275\u0275template"](17,Ge,3,4,"div",11),r["\u0275\u0275template"](18,Be,3,0,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"div",12),r["\u0275\u0275elementStart"](20,"div",3),r["\u0275\u0275elementStart"](21,"div",13),r["\u0275\u0275elementStart"](22,"label"),r["\u0275\u0275text"](23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",14),r["\u0275\u0275element"](25,"chart",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,Mn,4,3,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.trendType),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",e.showPeriod),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",("1"==e.period||"2"==e.period)&&"31"!=e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","0"==e.period||"31"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","0"==e.period||"31"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","0"==e.period||"31"==e.trendType),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.yScale),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("type",e.chartObject.type)("data",e.chartObject.data)("options",e.chartObject.options),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.showTables))},directives:[s.s,s.r,tt.D,tt.r,tt.u,tt.w,tt.G,c.u,Ft.ChartComponent,c.t],pipes:[c.f],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 405px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),t})();var On=n("1j6Q");function Pn(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td",6),r["\u0275\u0275elementStart"](14,"button",7),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"]().openPlacementModal(n)})),r["\u0275\u0275text"](15,"ADD"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.x_showveh),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.x_showtripstart),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.x_showtripend),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.showprim_status),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.x_placement)}}function En(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let kn=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.placements=[],this.getPlacement(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getPlacement()}getPlacement(){this.common.loading++,this.api.get("Placement/getFoPlacementRePort?").subscribe(t=>{this.common.loading--,console.log(t),this.placements=t.data},t=>{this.common.loading--,console.log(t)})}openPlacementModal(t){console.log("openPlacementModal",t);let e={id:t.x_trip_id,startName:t.x_showtripstart,startTime:t.x_showstarttime,regno:t.x_showveh,vehicleId:t.x_vehicle_id,siteId:t.x_hl_site_id};this.common.params={tripDetils:e,ref_page:"placements"},console.log("vehicleTrip",e),this.modalService.open(xt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getPlacement()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["placements"]],decls:28,vars:2,consts:[[1,"row"],[1,"col-sm-10"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[2,"text-align","center"],[1,"btn","btn-danger",2,"border-radius","8px",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h4"),r["\u0275\u0275text"](5,"Placements"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div"),r["\u0275\u0275elementStart"](8,"table",2),r["\u0275\u0275elementStart"](9,"thead",3),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275elementStart"](11,"th"),r["\u0275\u0275text"](12,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th"),r["\u0275\u0275text"](14,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16,"Source"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"Destination"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"th"),r["\u0275\u0275text"](22,"Placements"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"th"),r["\u0275\u0275text"](24,"Action"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"tbody"),r["\u0275\u0275template"](26,Pn,16,6,"tr",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](27,En,2,0,"div",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](26),r["\u0275\u0275property"]("ngForOf",e.placements),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.placements.length))},directives:[s.s,s.v,s.r,c.t,c.u],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var Tn=n("i+lE");const Dn=function(t){return{"background-color":t}};function In(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275elementStart"](1,"tr",28),r["\u0275\u0275listener"]("mouseover",(function(){r["\u0275\u0275restoreView"](t);const n=e.index;return r["\u0275\u0275nextContext"]().mapService.toggleBounceMF(n)}))("mouseover",(function(){r["\u0275\u0275restoreView"](t);const n=e.index;return r["\u0275\u0275nextContext"]().mapService.toggleBounceMF(n,2)})),r["\u0275\u0275elementStart"](2,"td"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"td"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"td"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("id","vehicleEvent-row-"+n)("ngStyle",r["\u0275\u0275pureFunction1"](7,Dn,"Trails"!=t.desc?"#"+t.color:"#fff")),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.halt_reason),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.loc_name),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.commonService.changeDateformat2(t.start_time)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.commonService.changeDateformat2(t.end_time)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.duration)}}function Fn(t,e){1&t&&r["\u0275\u0275element"](0,"i",29)}function An(t,e){1&t&&r["\u0275\u0275element"](0,"i",30)}const Vn=function(t,e){return{background:t,left:e}};function Ln(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",31),r["\u0275\u0275listener"]("mouseover",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"]().setEventInfo(n)}))("mouseout",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().unsetEventInfo()})),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction2"](1,Vn,"#"+t.color,t.position+"%"))}}const zn=function(t){return{left:t}};let jn=(()=>{class t{constructor(t,e,n,a){this.modalService=t,this.mapService=e,this.apiService=n,this.commonService=a,this.slideToolTipLeft=0,this.polypath=[{lat:null,lng:null,odo:null,time:null}],this.zoomLevel=7,this.maxOdo=0,this.startDate=null,this.endDate=null,this.vehicleSelected=null,this.vehicleEvents=[],this.timelineValue=1,this.isPlay=!1,this.breakPrevious=!1,this.eventInfo=null,this.infoWindow=null}ngOnInit(){}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.setMapType(0)}get timeLinePoly(){let t=this.maxOdo*(this.timelineValue/100);if(1==this.timelineValue)return{time:this.startDate,lat:this.polypath[0].lat,lng:this.polypath[0].lng};for(const e of this.polypath)if(e.odo>=t)return e;return{time:null,lat:null,lng:null}}getHaltTrails(){if(!(this.vehicleSelected&&this.startDate&&this.endDate))return void this.commonService.showError("Fill All Params");this.commonService.loading++;let t={vehicleId:this.vehicleSelected,startDate:this.commonService.dateFormatter(this.startDate),endDate:this.commonService.dateFormatter(this.endDate)};this.apiService.post("HaltOperations/getVehicleEvents",t).subscribe(t=>{this.commonService.loading--,console.log(t);let e=t.data,n={vehicleId:this.vehicleSelected,startTime:this.commonService.dateFormatter(this.startDate,"YYYYMMDD",!0,"-"),toTime:this.commonService.dateFormatter(this.endDate,"YYYYMMDD",!0,"-")};this.commonService.loading++,console.log(n),this.apiService.post("VehicleTrail/getVehicleTrailAll",n).subscribe(t=>{this.commonService.loading--,this.mapService.clearAll();let n=0,a=null,o=0;for(const r of t.data){0!=n?(o+=this.commonService.distanceFromAToB(r.lat,r.long,a.lat,a.long,"Mt"),this.polypath.push({lat:r.lat,lng:r.long,odo:o,time:r.time})):(this.polypath=[],this.polypath.push({lat:r.lat,lng:r.long,odo:0,time:r.time}));for(let t=0;t<e.length;t++)"Unloading"!=e[t].halt_reason&&"Loading"!=e[t].halt_reason||(e[t].subType="marker",e[t].color="Unloading"==e[t].halt_reason?"ff4d4d":"88ff4d");this.mapService.createPolyPathManual(this.mapService.createLatLng(r.lat,r.long)),this.mapService.setBounds(this.mapService.createLatLng(r.lat,r.long)),a=r,n++}this.maxOdo=o,console.log("PolyLine",this.polypath),this.mapService.polygonPath.set("icons",[{icon:this.mapService.lineSymbol,offset:"0%"}]),console.log("VehicleEvents",e),e=e.reverse(),this.vehicleEvents=e,this.mapService.createMarkers(this.vehicleEvents,!1,!1);let i=0;for(const e of this.mapService.markers){let t=this.vehicleEvents[i];this.mapService.addListerner(e,"mouseover",()=>this.setEventInfo(t)),this.mapService.addListerner(e,"mouseout",()=>this.unsetEventInfo()),i++}},t=>{this.commonService.loading--,console.log(t)})},t=>{this.commonService.loading--,console.log(t)})}setSliderPoint(){this.breakPrevious=!0,this.isPlay=!1,this.slideToolTipLeft=document.getElementById("myRange").offsetWidth/100*this.timelineValue,console.log("Point",this.timelineValue,"width: ",this.slideToolTipLeft),this.mapService.polygonPath.set("icons",[{icon:this.mapService.lineSymbol,offset:this.timelineValue+"%"}]),this.zoomOnArrow(!1)}async runLineSymbol(){if(this.isPlay){this.breakPrevious=!1;for(let t=this.timelineValue;t<=100&&(await this.sleep(100),this.mapService.polygonPath.set("icons",[{icon:this.mapService.lineSymbol,offset:t+"%"}]),this.slideToolTipLeft=document.getElementById("myRange").offsetWidth/100*t,this.zoomOnArrow(!1),this.timelineValue=t,!this.breakPrevious);t++);}else this.breakPrevious=!0}zoomOnArrow(t=!0){let e=this.mapService.getMapBounds();!t&&e.lat1+.001<=this.timeLinePoly.lat&&e.lat2-.001>=this.timeLinePoly.lat&&e.lng1+.001<=this.timeLinePoly.lng&&e.lng2-.001>=this.timeLinePoly.lng||this.mapService.zoomAt({lat:this.timeLinePoly.lat,lng:this.timeLinePoly.lng},this.zoomLevel)}setEventInfo(t){this.infoWindow=this.mapService.createInfoWindow(),this.infoWindow.opened=!1,this.infoWindow.setContent(`\n      <b> Reason: </b>${t.halt_reason} <br>\n      <b>Loc: </b>${t.loc_name} <br>\n      <b>Start Time:</b> ${t.start_time} <br>\n      <b>End Time:</b>${t.end_time} <br>\n      <b>Duration:</b>${t.duration} <br>\n      `),this.infoWindow.setPosition(this.mapService.createLatLng(t.lat,t.long)),this.infoWindow.open(this.mapService.map),this.mapService.getMapBounds()}unsetEventInfo(){this.infoWindow.close(),this.infoWindow.opened=!1}sleep(t){return new Promise(e=>setTimeout(e,t))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](ft.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["route-mapper"]],decls:52,vars:15,consts:[[1,"row"],[1,"col-5"],[1,"table","table-bordered","table-hover"],["colspan","3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["placeholder","Start Time","autocomplete","off","name","s-date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["sDate",""],["placeholder","End Time","autocomplete","off","name","e-date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["eDate",""],[1,"btn","btn-primary","form-control",3,"click"],[1,"tbl","table","table-bordered","table-hover",2,"border","1px gray solid"],[2,"width","40px"],[4,"ngFor","ngForOf"],[1,"col-7"],["id","map",2,"width","100%","height","75%"],[1,"slide-bar"],[1,"row","player_inner"],[1,"col-1","p-0"],[3,"click"],["class","fa fa-pause",4,"ngIf"],["class","fa fa-play",4,"ngIf"],[1,"col-11","pr-0","tooltip"],["type","range","min","1","max","100","name","slider-name","id","myRange",1,"slider",3,"ngModel","input","ngModelChange"],[1,"tooltiptext",3,"ngStyle"],["type","range","min","7","max","13","name","zoomSlider",3,"ngModel","ngModelChange","input"],[1,"time-line-event"],[1,"time-line-scale"],["class","time-line-circle",3,"ngStyle","mouseover","mouseout",4,"ngFor","ngForOf"],["cdkDrag","",3,"id","ngStyle","mouseover"],[1,"fa","fa-pause"],[1,"fa","fa-play"],[1,"time-line-circle",3,"ngStyle","mouseover","mouseout"]],template:function(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"table",2),r["\u0275\u0275elementStart"](5,"tbody"),r["\u0275\u0275elementStart"](6,"tr"),r["\u0275\u0275elementStart"](7,"td",3),r["\u0275\u0275elementStart"](8,"auto-suggestion",4),r["\u0275\u0275listener"]("onSelected",(function(t){return e.vehicleSelected=t.id})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"tr"),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275elementStart"](11,"input",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](12,"owl-date-time",null,6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td"),r["\u0275\u0275elementStart"](15,"input",7),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"owl-date-time",null,8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"td"),r["\u0275\u0275elementStart"](19,"button",9),r["\u0275\u0275listener"]("click",(function(){return e.getHaltTrails()})),r["\u0275\u0275text"](20,"Go"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"tr"),r["\u0275\u0275elementStart"](22,"td",3),r["\u0275\u0275elementStart"](23,"table",10),r["\u0275\u0275elementStart"](24,"thead"),r["\u0275\u0275elementStart"](25,"th",11),r["\u0275\u0275text"](26,"Reason"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"th"),r["\u0275\u0275text"](28,"Place"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"th"),r["\u0275\u0275text"](30,"Start"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"th"),r["\u0275\u0275text"](32,"End"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"th"),r["\u0275\u0275text"](34,"Duration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](35,In,12,9,"tbody",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](36,"tr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",13),r["\u0275\u0275element"](38,"div",14),r["\u0275\u0275elementStart"](39,"div",15),r["\u0275\u0275elementStart"](40,"div",16),r["\u0275\u0275elementStart"](41,"div",17),r["\u0275\u0275elementStart"](42,"button",18),r["\u0275\u0275listener"]("click",(function(){return e.isPlay=!e.isPlay,e.runLineSymbol()})),r["\u0275\u0275template"](43,Fn,1,0,"i",19),r["\u0275\u0275template"](44,An,1,0,"i",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",21),r["\u0275\u0275elementStart"](46,"input",22),r["\u0275\u0275listener"]("input",(function(){return e.setSliderPoint()}))("ngModelChange",(function(t){return e.timelineValue=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",23),r["\u0275\u0275elementStart"](48,"input",24),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.zoomLevel=t}))("input",(function(){return e.zoomOnArrow()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"div",25),r["\u0275\u0275element"](50,"div",26),r["\u0275\u0275template"](51,Ln,1,4,"div",27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275reference"](13),n=r["\u0275\u0275reference"](17);r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",e.startDate)("owlDateTime",t)("owlDateTimeTrigger",t),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.endDate)("owlDateTime",n)("owlDateTimeTrigger",n),r["\u0275\u0275advance"](20),r["\u0275\u0275property"]("ngForOf",e.vehicleEvents),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.isPlay),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.isPlay),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.timelineValue),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](13,zn,"calc( "+e.slideToolTipLeft+"px - "+(45+.1*e.timelineValue)+"px)")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",e.zoomLevel),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",e.vehicleEvents)}},directives:[s.s,s.r,we.a,tt.d,Tn.b,tt.r,tt.u,Tn.d,Tn.a,c.t,c.u,tt.A,c.x],styles:['.row[_ngcontent-%COMP%]{height:85vh}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.slide-bar[_ngcontent-%COMP%]{display:-moz-inline-stack;vertical-align:middle;display:inline-block;height:10%;border:4px solid #000;position:relative;width:100%}.time-line-event[_ngcontent-%COMP%]{position:absolute;width:100%}.time-line-event[_ngcontent-%COMP%]   .time-line-scale[_ngcontent-%COMP%]{position:relative;width:98%;border-bottom:1px solid #000;top:4px}.time-line-event[_ngcontent-%COMP%]   .time-line-circle[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;border-radius:100%;top:50%;background-color:#0ff}.slide-bar[_ngcontent-%COMP%]   .player_inner[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:auto;margin:0;padding:0 15px}.player_inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;background-color:#000;border:0;color:#fff;font-size:14px;padding:7px 0;border-radius:5px;width:100%}.player_inner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block}.player_inner[_ngcontent-%COMP%]   .col-11[_ngcontent-%COMP%]{padding-top:6px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{width:120px;background-color:#555;color:#fff;text-align:center;padding:5px 0;border-radius:6px;margin:0!important;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}']}),t})();var Rn=n("lxmq");function Hn(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Nn=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.callLogs=[],this.foAdminUserId=[],this.currentDay=null,this.nextDay=null,this.table=null;let o=new Date(this.common.dateFormatter1(new Date).split(" ")[0]);this.currentDay=this.common.dateFormatter1(o),this.nextDay=this.common.dateFormatter1(new Date(o.setDate(o.getDate()+1))).split(" ")[0],console.log("currentDay:",this.currentDay,this.nextDay)}ngOnInit(){}getDate(){this.common.params={ref_page:"call-logs"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{let e=new Date(this.common.dateFormatter1(t.date).split(" ")[0]);this.currentDay=this.common.dateFormatter1(e),this.nextDay=this.common.dateFormatter1(new Date(e.setDate(e.getDate()+1))).split(" ")[0],console.log("currentDay:",this.currentDay,this.nextDay)})}getFoAdmin(t){console.log("foAdmin",t),this.foAdminUserId=t.id}getCallDetails(){let t={foAdminUserId:this.foAdminUserId,currentDay:this.common.dateFormatter1(this.currentDay),nextDay:this.common.dateFormatter1(this.nextDay)};console.log("params:",t),++this.common.loading,this.api.post("FoDetails/getDriverCallLogs",t).subscribe(t=>{--this.common.loading,console.log("Res:",t),this.callLogs=t.data,this.table=this.setTable()},t=>{--this.common.loading,console.log("Err:",t)})}setTable(){return{data:{headings:{vehicleNumber:{title:"Vehicle Number",placeholder:"Vehicle No"},driverName:{title:"Driver Name",placeholder:"Driver Name"},mobileNo:{title:"Mobile Number",placeholder:"Mobile Number"},incoming:{title:"Incoming ",placeholder:"Incoming"},outgoing:{title:"Outgoing",placeholder:"Outgoing"},total:{title:"Total",placeholder:"Total"},unanswered:{title:"Unanswered",placeholder:"Unanswered"},missed:{title:"Missed",placeholder:"Missed"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}getTableColumns(){let t=[];return this.callLogs.map(e=>{let n={vehicleNumber:{value:e.y_vehiclename},driverName:{value:e.y_drivername},mobileNo:{value:e.y_mobileno},incoming:{value:e.y_incomming},outgoing:{value:e.y_outgoing},total:{value:`<div style="color: black;" class="${e.y_total?"blue":"black"}"><span>${e.y_total||"-"}</span></div>`,action:this.openHistoryModel.bind(this,e),isHTML:!0},unanswered:{value:e.y_unanswered},missed:{value:e.y_missed}};t.push(n)}),t}openHistoryModel(t){let e={vehicleId:t.y_vehicle_id,foAdminUserId:this.foAdminUserId,currentDay:this.common.dateFormatter1(this.currentDay),nextDay:this.common.dateFormatter1(this.nextDay)};this.common.params={callData:e},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(Rn.a,{size:"lg",container:"nb-layout"}).result.then(t=>console.log("data",t))}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Call Logs",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Call Logs",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["call-logs"]],decls:26,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5"],[1,"col-sm-4"],["type","text","autocomplete","off","placeholder","Select Date","name","date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-4"],[1,"search_vehicle_input"],["url","Suggestion/getFoAdminList?foid=","display","employeename","placeholder","Fo",1,"auto-suggest",2,"width","100%",3,"onSelected"],[1,"btn","btn-primary","m-0",3,"click"],["id","call-logs",3,"data","settings",4,"ngIf"],["id","call-logs",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Call Logs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",4),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("call-logs")})),r["\u0275\u0275element"](9,"i",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"span",6),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("call-logs")})),r["\u0275\u0275element"](11,"i",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"div",1),r["\u0275\u0275elementStart"](14,"div",9),r["\u0275\u0275elementStart"](15,"input",10),r["\u0275\u0275listener"]("click",(function(){return e.getDate()})),r["\u0275\u0275pipe"](16,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275elementStart"](19,"auto-suggestion",13),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getFoAdmin(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",9),r["\u0275\u0275elementStart"](21,"button",14),r["\u0275\u0275listener"]("click",(function(){return e.getCallDetails()})),r["\u0275\u0275text"](22,"Get Details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"nb-card-body"),r["\u0275\u0275elementStart"](24,"div"),r["\u0275\u0275template"](25,Hn,1,2,"smart-table",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](16,2,e.currentDay,"dd MMM yyyy")),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",e.callLogs&&e.callLogs.length))},directives:[s.s,s.v,we.a,s.r,c.u,_.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .blue, total-clr[_ngcontent-%COMP%]{color:#00f}.btn-primary[_ngcontent-%COMP%]{text-transform:capitalize;padding:12px 14px;margin:0;height:auto}[_nghost-%COMP%]     .tableFixHead{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 170px);height:auto!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function Un(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",10),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Gn=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.fromDate=this.common.dateFormatter1(new Date),this.endDate=this.common.dateFormatter1(new Date),this.title="",this.showTable=!1,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},console.log(this.fromDate),console.log(this.endDate),this.getCallSummary(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getCallSummary()}getDate(t){this.common.params={ref_page:"user-call-summary"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&(console.log("data date:"),console.log(e.date),"startdate"==t?(this.fromDate=this.common.dateFormatter1(e.date).split(" ")[0],console.log("Date:",this.fromDate)):(this.endDate=this.common.dateFormatter1(e.date).split(" ")[0],console.log("Date:",this.endDate)))})}getCallSummary(){this.common.loading++,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.api.post("Drivers/getUserCallSummary",{x_start_date:this.fromDate,x_end_date:this.endDate+" 23:59:00"}).subscribe(t=>{if(this.common.loading--,this.data=t.data,console.log("data:"),console.log(this.data),null==this.data)return void(this.data=[]);let e=this.data[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},t=>{this.common.loading--,console.log(t)})}getTableColumns(){let t=[];for(var e=0;e<this.data.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]=0!=t&&"User Name"!=this.headings[t]?this.data[e][this.headings[t]]?{value:`<div style="color: black;" class="${this.data[e][this.headings[t]]?"blue":"black"}"><span>${this.data[e][this.headings[t]]||""}</span></div>`,action:this.openHistoryModel.bind(this,this.data[e],this.headings[t]),isHTML:!0}:{value:`<div style="color: black;" class="${this.data[e][this.headings[t]]?"blue":"black"}"><span>${this.data[e][this.headings[t]]||""}</span></div>`,isHTML:!0}:{value:this.data[e][this.headings[t]],class:"black",action:""};t.push(this.valobj)}return t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}openHistoryModel(t,e){let n=this.endDate+" 23:59:00";console.log("data------------------/",n);let a={vehicleId:0,foAdminUserId:t._foadmusr_id,currentDay:this.common.dateFormatter1(this.fromDate),nextDay:this.common.dateFormatter(n),type:e};this.common.params={callData:a},console.log("calldatas =",this.common.params.callData),this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(Rn.a,{size:"lg",container:"nb-layout"}).result.then(t=>console.log("data",t))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["user-call-summary"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-sm-4"],["type","text","autocomplete","off","placeholder","Select Start Date","name","startdate","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-sm-5"],["type","text","autocomplete","off","placeholder","Select End Date","name","enddate","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-sm-3"],["type","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"User Call Summary"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",3),r["\u0275\u0275elementStart"](9,"input",4),r["\u0275\u0275listener"]("click",(function(){return e.getDate("startdate")})),r["\u0275\u0275pipe"](10,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",5),r["\u0275\u0275elementStart"](12,"input",6),r["\u0275\u0275listener"]("click",(function(){return e.getDate("enddate")})),r["\u0275\u0275pipe"](13,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",7),r["\u0275\u0275elementStart"](15,"button",8),r["\u0275\u0275listener"]("click",(function(){return e.getCallSummary()})),r["\u0275\u0275text"](16,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"nb-card-body"),r["\u0275\u0275elementStart"](18,"div"),r["\u0275\u0275template"](19,Un,1,2,"smart-table",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](10,3,e.fromDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](13,6,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,c.u,_.a],pipes:[c.f],styles:["[_nghost-%COMP%]     .blue{color:#00f}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{text-transform:capitalize;padding:8px 15px;margin:0;height:auto;border-radius:5px;border:0;width:100%}[_nghost-%COMP%]     .tableFixHead{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 170px);height:auto!important}"]}),t})();var Bn=n("4mMb");function $n(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",13),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table.placements)("settings",t.table.settings)}}function Wn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",11),r["\u0275\u0275template"](1,$n,1,2,"smart-table",12),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.placements&&t.placements.length)}}function Kn(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",15),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table1.data)("settings",t.table1.settings)}}function qn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",3),r["\u0275\u0275template"](1,Kn,1,2,"smart-table",14),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.filteredVehiclePlacements&&t.filteredVehiclePlacements.length)}}let Jn=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.placements=[],this.vehiclePlacements=[],this.filteredVehiclePlacements=[],this.table=null,this.table1={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.dis_all=0,this.headings=[],this.showTable=!1,this.valobj=null,this.getPlacements(),this.getVehiclePlacement(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getPlacements()}getPlacements(){console.log("api hit"),this.common.loading++,this.api.get("Placement/getFOAdminPlacementRePort").subscribe(t=>{this.common.loading--,console.log("data====",t.data),this.placements=t.data,this.table=this.setTable()},t=>{this.common.loading--,console.log(t)})}getTableColumns(){let t=[];return this.placements.map(e=>{let n={siteName:{value:e.r_sitename,action:this.siteTripModal.bind(this,e,"site")},onward:{value:e.r_todayonwards,action:this.siteTripModal.bind(this,e,"onward")},loading:{value:e.r_loadings,action:this.siteTripModal.bind(this,e,"loading")},towards:{value:e.r_intransits,action:this.siteTripModal.bind(this,e,"towards")},waiting:{value:e.r_waitingtime}};t.push(n)}),t}setTable(){return{placements:{headings:{siteName:{title:"Site Name",placeholder:"Site Name"},onward:{title:"Onward 24 Hrs",placeholder:"Onward 24 Hrs"},loading:{title:"At Loading",placeholder:"At Loading"},towards:{title:"Towards",placeholder:"Towards"},waiting:{title:"Waiting Time",placeholder:"Waiting Time"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getVehiclePlacement(){this.common.loading++,this.api.get("Placement/getFoPlacementRePort?").subscribe(t=>{this.common.loading--,this.vehiclePlacements=t.data,console.log("vehicle placement",this.vehiclePlacements),this.displayList(0)},t=>{this.common.loading--,console.log(t)})}displayList(t){console.log("display Type=",t,"vehiclePlacements=",this.vehiclePlacements),1==t?(this.filteredVehiclePlacements=[],this.vehiclePlacements.forEach(t=>{t._placementid>0&&this.filteredVehiclePlacements.push(t)})):-1==t?(this.filteredVehiclePlacements=[],this.vehiclePlacements.forEach(t=>{t._placementid<=0&&this.filteredVehiclePlacements.push(t)})):(this.filteredVehiclePlacements=[],this.filteredVehiclePlacements=this.vehiclePlacements),this.smartTableWithHeadings()}smartTableWithHeadings(){if(console.log("smart table with heading"),this.table1={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.filteredVehiclePlacements){console.log("filteredVehiclePlacements",this.filteredVehiclePlacements);let e=this.filteredVehiclePlacements[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);let e={title:t,placeholder:this.formatTitle(t)};"Trip Start"==t&&(e.type="date"),this.table1.data.headings[t]=e}this.table1.data.columns=this.getTableColumns2(),console.log("table:"),console.log(this.table1),this.showTable=!0}else this.common.showToast("No Record Found !!")}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns2(){let t=[];for(var e=0;e<this.filteredVehiclePlacements.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)"Trip"==this.headings[t]?(console.log("htmll------",this.common.getJSONTripStatusHTML(this.filteredVehiclePlacements[e])),this.valobj[this.headings[t]]={value:this.common.getJSONTripStatusHTML(this.filteredVehiclePlacements[e]),isHTML:!0,class:"black",action:""}):this.valobj[this.headings[t]]="Action"==this.headings[t]?this.user.permission.edit&&{value:'<i class="fa fa-pencil-alt"></i>',isHTML:!0,action:this.openPlacementModal.bind(this,this.filteredVehiclePlacements[e]),class:"icon text-center del"}:"Current Loc"==this.headings[t]?{value:this.filteredVehiclePlacements[e][this.headings[t]],class:"black",action:this.showLocation.bind(this,this.filteredVehiclePlacements[e])}:{value:this.filteredVehiclePlacements[e][this.headings[t]],class:"black",action:""};this.valobj.style={background:this.filteredVehiclePlacements[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}openPlacementModal(t){console.log("openPlacementModal",t);let e={vehicleId:t._vid,siteId:t._site_id};this.common.params={tripDetils:e,ref_page:"placements"},console.log("vehicleTrip",e),this.modalService.open(xt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getVehiclePlacement()})}siteTripModal(t,e){console.log("siteTripModal",t);let n={userId:t.r_uid,siteId:t.r_siteid,status:"site"==e?"null":e};this.common.params={dataForView:n,ref_page:"placements"},console.log("dataForView",n),this.modalService.open(Bn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{})}showLocation(t){t._tlat?(this.common.params={location:{lat:t._tlat,lng:t._tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["placements-dash-board"]],decls:18,vars:5,consts:[[2,"border","0px"],[2,"padding-bottom","0px"],[1,"row"],[1,"col-sm-6"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["id","dis-pen",3,"ngClass","click"],[2,"padding-bottom","0px","padding-top","10px"],["class","col-sm-6 pr-0",4,"ngIf"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6","pr-0"],["id","tblVehDocs",3,"data","settings",4,"ngIf"],["id","tblVehDocs",3,"data","settings"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Placements DashBoard"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"ul",4),r["\u0275\u0275elementStart"](8,"li",5),r["\u0275\u0275listener"]("click",(function(){return e.displayList(0),e.dis_all=0})),r["\u0275\u0275text"](9," All "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"li",6),r["\u0275\u0275listener"]("click",(function(){return e.displayList(1),e.dis_all=1})),r["\u0275\u0275text"](11," Placements Assigned "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"li",7),r["\u0275\u0275listener"]("click",(function(){return e.displayList(-1),e.dis_all=-1})),r["\u0275\u0275text"](13," Placement Pending "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"nb-card-body",8),r["\u0275\u0275elementStart"](15,"div",2),r["\u0275\u0275template"](16,Wn,2,1,"div",9),r["\u0275\u0275template"](17,qn,2,1,"div",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngClass",0==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",1==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",-1==e.dis_all?"active":""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.placements&&e.placements.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.filteredVehiclePlacements&&e.filteredVehiclePlacements.length))},directives:[s.s,s.v,c.r,s.r,c.u,_.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:10px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 20px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 162px)}[_nghost-%COMP%]     td i.fa-pencil-alt{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function Yn(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"td",13),r["\u0275\u0275elementStart"](8,"td",14),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).showLocation(n)})),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275text"](11),r["\u0275\u0275elementStart"](12,"button",15),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=e.index;return r["\u0275\u0275nextContext"](2).tripVerified(n,"true",a)})),r["\u0275\u0275text"](13,"Verified"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275elementStart"](17,"span",16),r["\u0275\u0275elementStart"](18,"input",17),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.origin=n})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.destination=n})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"select",19),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.status=n})),r["\u0275\u0275elementStart"](21,"option",20),r["\u0275\u0275text"](22,"Select Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"option",21),r["\u0275\u0275text"](24,"Loading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"option",22),r["\u0275\u0275text"](26,"Unloading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"option",23),r["\u0275\u0275text"](28,"Onward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"option",24),r["\u0275\u0275text"](30,"Available"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"span",16),r["\u0275\u0275elementStart"](32,"input",25),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.remark=n})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"button",26),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=e.index;return r["\u0275\u0275nextContext"](2).tripVerified(n,"false",a)})),r["\u0275\u0275text"](34,"Change"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.r_regno),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.r_driver),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",a.common.getTripStatusHTML(t.r_trip._trip_status_type,t.r_trip._showtripstart,t.r_trip._showtripend,t.r_trip._p_placement_type,t.r_trip._p_loc_name),r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.r_location),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",t.r_tripstatus," "),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](t.r_tripstartdate),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.origin),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.destination),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.status)("name","trip-status-"+n),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",t.remark)}}function Zn(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275template"](1,Yn,35,12,"tr",12),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.trips)}}function Qn(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",27),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let Xn=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.trips=[],this.getTrips(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getTrips()}getTrips(){this.common.loading++,this.api.get("TripsOperation/tripDetailsForVerification").subscribe(t=>{this.common.loading--,this.trips=t.data;for(let e=0;e<this.trips.length;e++)this.trips[e].status="";console.log("Trips",this.trips)},t=>{this.common.loading--,console.log(t)})}tripVerified(t,e,n){console.log("action",e),"true"==e||"false"==e&&(t.status>0||t.origin||t.destination)?this.changeVerification(t,e,n):this.common.showError("One Input Field is Mandatory")}changeVerification(t,e,n){let a={vehicleId:t.r_vid,verifyFlag:e,oldOrigin:t.r_origin,oldDestination:t.r_destination,oldState:t.r_state_id,newOrigin:t.origin?t.origin:"",newDestination:t.destination?t.destination:"",newState:t.status,location:t.r_location,remark:t.remark};console.log("params",a),this.trips.splice(n,1),this.api.post("TripsOperation/tripVerification",a).subscribe(t=>{console.log("response",t.data[0].rtn_id),t.data[0].rtn_id>0?this.common.showToast("Successfully Verified"):this.common.showError(t.data[0].rtn_msg)},t=>{console.log(t)})}showLocation(t){t.r_lat?(this.common.params={location:{lat:t.r_lat,lng:t.r_lng,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Trip Status FeedBack",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"Customer Name::"+e.data.name,"Report Name::Trip Status FeedBack",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-status-feedback"]],decls:34,vars:2,consts:[[1,"row"],[1,"col-sm-8"],[1,"col-sm-4",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","trip-feedback",1,"table","table-bordered","table-hover","m-0"],[1,"thead"],[2,"text-align","center"],[4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[2,"color","blue","cursor","pointer",3,"click"],[1,"btn","btn-success",3,"click"],[2,"display","inline-flex"],["type","text","placeholder","Origin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Destination",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","name","ngModelChange"],["value","","selected",""],["value","11"],["value","12"],["value","51"],["value","21"],["type","remark","placeholder","Remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Trip Status FeedBack"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"span",3),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("trip-feedback")})),r["\u0275\u0275element"](8,"i",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("trip-feedback")})),r["\u0275\u0275element"](10,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"nb-card-body"),r["\u0275\u0275elementStart"](12,"div"),r["\u0275\u0275elementStart"](13,"table",7),r["\u0275\u0275elementStart"](14,"thead",8),r["\u0275\u0275elementStart"](15,"tr",9),r["\u0275\u0275elementStart"](16,"th"),r["\u0275\u0275text"](17,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"th"),r["\u0275\u0275text"](19,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"th"),r["\u0275\u0275text"](21,"Driver"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"th"),r["\u0275\u0275text"](23,"Trip"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"th"),r["\u0275\u0275text"](25,"Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"th"),r["\u0275\u0275text"](27,"Trip Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"th"),r["\u0275\u0275text"](29,"Trip_Start Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"th"),r["\u0275\u0275text"](31,"Verification"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](32,Zn,2,1,"tbody",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](33,Qn,2,0,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](32),r["\u0275\u0275property"]("ngIf",0!=e.trips.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.trips.length))},directives:[s.s,s.v,s.r,c.u,c.t,tt.d,tt.r,tt.u,tt.D,tt.w,tt.G],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:24px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:24px;color:#9f0001}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:100px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:90px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:150px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{font-size:12px;text-transform:capitalize;padding:7px 6px;height:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 220px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:90px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto;text-align:left}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100px;text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px;width:100px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:30px!important;padding:3px!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2px;text-transform:capitalize}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var ta=n("JYbL");function ea(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",4),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let na=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.showTable=!1,this.delayFaults=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getDelayFaults(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getDelayFaults()}getDelayFaults(){this.delayFaults=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/placementDelayFaults?").subscribe(t=>{if(this.common.loading--,this.delayFaults=JSON.parse(t.data[0].fn_placements_getfaults),null!=this.delayFaults){console.log("delayFaults",this.delayFaults);let t=this.delayFaults[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.delayFaults.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)"endpt"==this.headings[t]?(console.log("headings[j]",this.headings[t]),this.valobj[this.headings[t]]={value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.openPlacementModal.bind(this,this.delayFaults[e])}):"%Dist"==this.headings[t]?(console.log("headings[j]",this.headings[t]),this.valobj[this.headings[t]]={value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.delayFaults[e])}):"vehicle"==this.headings[t]?(console.log("headings[j]",this.headings[t]),this.valobj[this.headings[t]]={value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.delayFaults[e])}):this.valobj[this.headings[t]]={value:this.delayFaults[e][this.headings[t]],class:"black",action:""};this.valobj.style={background:this.delayFaults[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}openPlacementModal(t){console.log("openPlacementModal",t);let e={vehicleId:t._vid,siteId:t._site_id?t._site_id:-1};this.common.params={tripDetils:e,ref_page:"placements"},console.log("vehicleTrip",e),this.modalService.open(xt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{})}openRouteMapper(t){console.log("defaultFault",t);let e=this.common.dateFormatter(t._start_time),n=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vid,vehicleRegNo:t.vehicle,fromTime:e,toTime:n},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}addShortTarget(t){this.common.params={vehicleId:t._vid,vehicleRegNo:t.vehicle},this.modalService.open(yt.a,{size:"sm",container:"nb-layout"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["placement-delay-faults"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-4"],[1,"model-body"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Placement Delay Faults"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275template"](8,ea,1,2,"smart-table",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.delayFaults&&e.delayFaults.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}"]}),t})();function aa(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",18),r["\u0275\u0275elementStart"](3,"label",19),r["\u0275\u0275text"](4,"KM/Day:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",20),r["\u0275\u0275elementStart"](6,"input",21),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().kmpdval=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",22),r["\u0275\u0275elementStart"](8,"button",23),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]();return e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](9,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.kmpdval)}}function oa(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",24),r["\u0275\u0275elementStart"](3,"select",25),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().hoursType=e})),r["\u0275\u0275elementStart"](4,"option",26),r["\u0275\u0275text"](5,"Hours"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",27),r["\u0275\u0275text"](7,"Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",28),r["\u0275\u0275elementStart"](9,"input",29),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().hours=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",22),r["\u0275\u0275elementStart"](11,"button",23),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]();return e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](12,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.hoursType),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.hours)}}function ia(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",31),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function ra(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,ia,1,2,"smart-table",30),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.driverData.length)}}function sa(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",33),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table2.data)("settings",t.table2.settings)}}function la(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,sa,1,2,"smart-table",32),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.onwardDelayData.length)}}function da(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",35),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table3.data)("settings",t.table3.settings)}}function ca(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,da,1,2,"smart-table",34),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.delayFaults.length)}}function ha(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",37),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table4.data)("settings",t.table4.settings)}}function ma(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,ha,1,2,"smart-table",36),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.shortTarget.length)}}function pa(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",39),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table5.data)("settings",t.table5.settings)}}function ga(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,pa,1,2,"smart-table",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.longUnLoading&&t.longLoading.length)}}function ba(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",41),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table6.data)("settings",t.table6.settings)}}function ua(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,ba,1,2,"smart-table",40),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.longUnLoading&&t.longUnLoading.length)}}let fa=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.CountSummary=[],this.onwardTotal=null,this.onwardDelay=null,this.loadingTotal=null,this.loadingDelay=null,this.unloadingTotal=null,this.unloadingDelay=null,this.driverData=[],this.headings=[],this.kmpdval=300,this.runhourval=10,this.distance=0,this.strcurdate="",this.stryesterday="",this.dis_all="dcs",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.showTable=!1,this.onwardDelayData=[],this.valobj2={},this.table2={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.delayFaults=[],this.valobj3={},this.table3={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.shortTarget=[],this.valobj4={},this.table4={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.longLoading=[],this.hoursType="hrs",this.hours=10,this.valobj5={},this.table5={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.longUnLoading=[],this.valobj6={},this.table6={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getCountSummary();let o=new Date;this.strcurdate=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),o.setDate(o.getDate()-1),this.stryesterday=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),this.getReport(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getReport()}getReportdata(t){console.log("dis_all",t),"11"==t?this.getLongLoading(t):"21"==t?this.getLongUnloading(t):"51"==t?this.getOnwardDelayData(t):"dcs"==t?this.fetchReport():"pdf"==t?this.getDelayFaults():"st"==t&&this.getShortTarget()}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}fetchReport(){if(null==this.kmpdval||!this.kmpdval)return this.common.showError("Please provide Km per day"),!1;this.getReport()}openDistance(t){this.common.loading++;let e=new Date,n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();e.setDate(e.getDate()-1);let a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();this.api.post("Vehicles/getVehDistanceBwTime",{vehicleId:t,fromTime:a,tTime:n}).subscribe(e=>{this.common.loading--;let n=e.data;n>0&&(this.distance=Math.round(n/1e3*100)/100),this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.openRouteMapper(t)},t=>{this.common.loading--,console.log(t)})}getReport(){let t,e;this.common.loading++,this.headings=[],t=0==this.kmpdval||null==this.kmpdval?null:this.kmpdval,e=0==this.runhourval||null==this.runhourval?null:this.runhourval;let n=this.user._details.id;"admin"==this.user._loggedInBy&&(n=this.user._customer.id),"string"==typeof t&&(t=parseInt(t)),this.api.post("Drivers/getDriverCallSuggestion",{x_user_id:n,x_kmpd:t}).subscribe(t=>{this.common.loading--,this.resetDisplayTable(),this.driverData=t.data,null!=this.driverData&&null!=t.data||(console.log("resetting table"),this.driverData=[],this.resetDisplayTable()),console.info("driver Data",this.driverData);let e=this.driverData[0];for(var n in this.table.data.headings={},e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Trip Start Time"===n&&(t.type="date"),this.table.data.headings[n]=t}console.log("hdgs:"),console.log(this.headings),console.log(this.table.data.headings),this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}resetDisplayTable(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}getTableColumns(){let t=[];for(let e=0;e<this.driverData.length;e++){let n={};for(let t=0;t<this.headings.length;t++){let a=this.driverData[e][this.headings[t]];n[this.headings[t]]="Dist Covered"==this.headings[t]&&this.driverData[e]._starttime?{value:a,class:"blue",action:this.openRouteMapper.bind(this,this.driverData[e])}:"Driver"==this.headings[t]?{value:a,class:"blue",action:this.openChangeDriverModal.bind(this,this.driverData[e])}:"Vehicle"==this.headings[t]?{value:a,class:"blue",action:this.addShortTarget.bind(this,this.driverData[e])}:"Mobile"==this.headings[t]?{value:a,class:"blue",action:this.callNotification.bind(this,this.driverData[e])}:"Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.driverData[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.driverData[e])}:"Current Loc"==this.headings[t]?{value:a,class:"blue",action:this.showLocation.bind(this,this.driverData[e])}:"Last 24Hr KM"==this.headings[t]&&this.driverData[e]._last24starttime?{value:a,class:"blue",action:this.openRouteMapper.bind(this,this.driverData[e],"Last 24Hr KM")}:"Act"==this.headings[t]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.driverData[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.driverData[e])},{class:"icon fa fa-route route-mapper",action:this.openRouteMapper.bind(this,this.driverData[e])}]}:{value:a,class:"black",action:""}}t.push(n)}return console.log("datalength:"),console.log(this.driverData.length),t}getOnwardDelayData(t){let e=this.hours;"days"==this.hoursType&&(e=24*this.hours),this.onwardDelayData=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?type="+t+"&hours="+e).subscribe(t=>{this.common.loading--,console.log("result",t.data),this.onwardDelayData=t.data,this.smartTableWithHeadings()},t=>{this.common.loading--,this.common.showError()})}getCountSummary(){this.CountSummary=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?type=0&hours=10").subscribe(t=>{this.common.loading--,console.log("getCountSummary",t.data[0]),this.CountSummary=t.data[0],this.onwardTotal=this.CountSummary.totalonward,this.onwardDelay=this.CountSummary.tenhronwarddelaycount,this.loadingTotal=this.CountSummary.totalloading,this.loadingDelay=this.CountSummary.tenhrloadingdelaycount,this.unloadingTotal=this.CountSummary.totalunloading,this.unloadingDelay=this.CountSummary.tenhrunloadingdelaycount},t=>{this.common.loading--,this.common.showError()})}smartTableWithHeadings(){if(this.table2={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.onwardDelayData){console.log("onwardDelayData",this.onwardDelayData);let e=this.onwardDelayData[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);let e={title:t,placeholder:this.formatTitle(t)};"ETOA"!==t&&"Start Time"!==t&&"Target Time"!==t||(e.type="date"),this.table2.data.headings[t]=e}this.table2.data.columns=this.getTableColumns2(),console.log("table:2"),console.log(this.table2),this.showTable=!0}else this.common.showToast("No Record Found !!")}getTableColumns2(){let t=[];for(var e=0;e<this.onwardDelayData.length;e++){this.valobj2={};for(let t=0;t<this.headings.length;t++)console.log("header",this.headings[t]),this.valobj2[this.headings[t]]="Vehicle"==this.headings[t]?{value:this.onwardDelayData[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.onwardDelayData[e])}:"Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.onwardDelayData[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.onwardDelayData[e])}:"Current Loc"==this.headings[t]?{value:this.onwardDelayData[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.onwardDelayData[e])}:"%Dist"==this.headings[t]?{value:this.onwardDelayData[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.onwardDelayData[e])}:"Mobile"==this.headings[t]?{value:this.onwardDelayData[e][this.headings[t]],class:"blue",action:this.openChangeDriverModal.bind(this,this.onwardDelayData[e])}:"Act"==this.headings[t]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.onwardDelayData[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.onwardDelayData[e])}]}:{value:this.onwardDelayData[e][this.headings[t]],class:"black",action:""};this.valobj2.style={background:this.onwardDelayData[e]._rowcolor},t.push(this.valobj2)}return console.log("Columns:",t),t}getDelayFaults(){this.delayFaults=[],this.table3={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/placementDelayFaults?").subscribe(t=>{if(this.common.loading--,this.delayFaults=t.data,null==this.delayFaults)return this.common.showToast("No Record Found !!"),void(this.delayFaults=[]);{console.log("delayFaults",this.delayFaults);let t=this.delayFaults[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table3.data.headings[e]=t}this.table3.data.columns=this.getTableColumns3(),console.log("table:"),console.log(this.table),this.showTable=!0}},t=>{this.common.loading--,this.common.showError()})}getTableColumns3(){let t=[];for(var e=0;e<this.delayFaults.length;e++){this.valobj3={};for(let t=0;t<this.headings.length;t++)this.valobj3[this.headings[t]]="mobileno"==this.headings[t]?{value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.openChangeDriverModal.bind(this,this.delayFaults[e])}:"%Dist"==this.headings[t]?{value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.delayFaults[e])}:"vehicle"==this.headings[t]?{value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.delayFaults[e])}:"Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.delayFaults[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.delayFaults[e])}:"Current Loc"==this.headings[t]?{value:this.delayFaults[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.delayFaults[e])}:"Act"==this.headings[t]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.delayFaults[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.delayFaults[e])}]}:{value:this.delayFaults[e][this.headings[t]],class:"black",action:""};this.valobj3.style={background:this.delayFaults[e]._rowcolor},t.push(this.valobj3)}return console.log("Columns:",t),t}getShortTarget(){this.shortTarget=[],this.table4={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/getShortTarget").subscribe(t=>{if(this.common.loading--,this.shortTarget=t.data,null==this.shortTarget)return this.common.showToast("No Record Found !!"),void(this.shortTarget=[]);{console.log("shortTarget",this.shortTarget);let t=this.shortTarget[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table4.data.headings[e]=t}this.table4.data.columns=this.getTableColumns4(),console.log("table:"),console.log(this.table4),this.showTable=!0}},t=>{this.common.loading--,this.common.showError()})}getTableColumns4(){let t=[];for(var e=0;e<this.shortTarget.length;e++){this.valobj4={};for(let t=0;t<this.headings.length;t++)console.log("header",this.headings[t]),this.valobj4[this.headings[t]]="Vehicle"==this.headings[t]?{value:this.shortTarget[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.shortTarget[e])}:"Current Loc"==this.headings[t]?{value:this.shortTarget[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.shortTarget[e])}:"Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.shortTarget[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.shortTarget[e])}:"Act"==this.headings[t]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.shortTarget[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.shortTarget[e])}]}:"remark"==this.headings[t]?{value:this.shortTarget[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.shortTarget[e])}:"Mobile"==this.headings[t]?{value:this.shortTarget[e][this.headings[t]],class:"blue",action:this.openChangeDriverModal.bind(this,this.shortTarget[e])}:{value:this.shortTarget[e][this.headings[t]],class:"black",action:""};this.valobj4.style={background:this.shortTarget[e]._rowcolor},t.push(this.valobj4)}return console.log("Columns:",t),t}getLongLoading(t){let e=this.hours;this.longLoading=[],this.table5={data:{headings:{},columns:[]},settings:{hideHeader:!0}},"days"==this.hoursType&&(e=24*this.hours);let n="type="+t+"&hours="+e;console.log("params: ",n),this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?"+n).subscribe(t=>{if(this.common.loading--,this.longLoading=t.data,null==this.longLoading)return this.common.showToast("No Record Found !!"),void(this.longLoading=[]);{console.log("shortTarget",this.longLoading);let t=this.longLoading[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table5.data.headings[e]=t}this.table5.data.columns=this.getTableColumns5(),console.log("table:"),console.log(this.table5),this.showTable=!0}},t=>{this.common.loading--,this.common.showError()})}getTableColumns5(){let t=[];for(var e=0;e<this.longLoading.length;e++){this.valobj5={};for(let t=0;t<this.headings.length;t++)console.log("header",this.headings[t]),this.valobj5[this.headings[t]]="Vehicle"==this.headings[t]?{value:this.longLoading[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.longLoading[e])}:"Driver"==this.headings[t]?{value:this.longLoading[e][this.headings[t]],class:"blue",action:this.openChangeDriverModal.bind(this,this.longLoading[e])}:"Current Loc"==this.headings[t]?{value:this.longLoading[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.longLoading[e])}:"Act"==this.headings[t]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.longLoading[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.longLoading[e])}]}:"Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.longLoading[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.longLoading[e])}:"%Dist"==this.headings[t]?{value:this.longLoading[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.longLoading[e])}:{value:this.longLoading[e][this.headings[t]],class:"black",action:""};this.valobj5.style={background:this.longLoading[e]._rowcolor},t.push(this.valobj5)}return console.log("Columns:",t),t}getLongUnloading(t){this.longUnLoading=[];let e=this.hours;this.table6={data:{headings:{},columns:[]},settings:{hideHeader:!0}},"days"==this.hoursType&&(e=24*this.hours);let n="type="+t+"&hours="+e;console.log("params: ",n),this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?"+n).subscribe(t=>{if(this.common.loading--,this.longUnLoading=t.data,console.log("longunLoading",this.longUnLoading),null!=this.longUnLoading){let t=this.longUnLoading[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table6.data.headings[e]=t}this.table6.data.columns=this.getTableColumns6(),console.log("table:"),console.log(this.table6),this.showTable=!0}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,this.common.showError()})}getTableColumns6(){let t=[];for(var e=0;e<this.longUnLoading.length;e++){console.log("longUnLoading",this.longUnLoading),this.valobj6={};for(let t=0;t<this.headings.length;t++)"Vehicle"==this.headings[t]?this.valobj6[this.headings[t]]={value:this.longUnLoading[e][this.headings[t]],class:"blue",action:this.addShortTarget.bind(this,this.longUnLoading[e])}:"Driver"==this.headings[t]?this.valobj6[this.headings[t]]={value:this.longUnLoading[e][this.headings[t]],class:"blue",action:this.openChangeDriverModal.bind(this,this.longUnLoading[e])}:"Current Loc"==this.headings[t]?this.valobj6[this.headings[t]]={value:this.longUnLoading[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.longUnLoading[e])}:"Act"==this.headings[t]?this.valobj6[this.headings[t]]={value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.longUnLoading[e])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.longUnLoading[e])}]}:"Trip"==this.headings[t]?this.valobj6[this.headings[t]]={value:this.common.getJSONTripStatusHTML(this.longUnLoading[e]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.longUnLoading[e])}:"%Dist"==this.headings[t]?this.valobj6[this.headings[t]]={value:this.longUnLoading[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.longUnLoading[e])}:"Trip"==this.headings[t]?(console.log("htmll------",this.common.getJSONTripStatusHTML(this.longUnLoading[e])),this.valobj6[this.headings[t]]={value:this.common.getJSONTripStatusHTML(this.longUnLoading[e]),isHTML:!0,class:"black",action:""}):this.valobj6[this.headings[t]]={value:this.longUnLoading[e][this.headings[t]],class:"black",action:""};this.valobj6.style={background:this.longUnLoading[e]._rowcolor},t.push(this.valobj6)}return console.log("Columns:",t),t}addShortTarget(t){console.log("target",t),this.common.params={vehicleId:t._vid||t._vehicleid,vehicleRegNo:t.vehicle||t.Vehicle||t.regno||t.v_regno},console.log("params=",this.common.params),this.modalService.open(yt.a,{size:"sm",container:"nb-layout"})}openChangeDriverModal(t){console.log("vehicleTrip",t);let e={vehicleId:t._vehicleid||t._vid,vehicleRegNo:t.Vehicle||t.regno||t.v_regno||t.vehicle};this.common.params={vehicleId:e.vehicleId,vehicleRegNo:e.vehicleRegNo},this.modalService.open(Se.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.respone)})}openPlacementModal(t){console.log("openPlacementModal",t);let e={vehicleId:t._vehicleid||t._vid,siteId:t._siteid?t._siteid:-1};this.common.params={tripDetils:e,ref_page:"cs"},console.log("vehicleTrip",e),this.modalService.open(xt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}showLocation(t){t._curlat||t._tlat?(this.common.params={location:{lat:t._curlat||t._tlat,lng:t._curlong||t._tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}openRouteMapper(t,e="Trip Start"){let n=null;console.log("defaultFault",t),n=this.common.dateFormatter("Last 24Hr KM"==e?t._last24starttime:t._starttime);let a=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vehicleid||t._vid,vehicleRegNo:t.Vehicle||t.regno||t.v_regno||t.vehicle,fromTime:n,toTime:a},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}reportIssue(t){this.common.params={refPage:"db"},this.modalService.open(ht.a,{size:"sm",container:"nb-layout"}).result.then(e=>e.status&&this.common.reportAnIssue(e.issue,t._vehicleid))}callNotification(t){console.log("driver",t);let e={mobileno:t.Mobile,callTime:this.common.dateFormatter(new Date)};console.log("params: ",e),this.common.loading++,this.api.post("Notifications/sendCallSuggestionNotifications",e).subscribe(t=>{this.common.loading--,console.log("res--",t),this.common.showToast(t.msg)},t=>{this.common.loading--,this.common.showError()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["driver-call-suggestion"]],decls:79,vars:20,consts:[[2,"border","0px"],[1,"row"],[1,"col-8"],[1,"col-sm-4",2,"cursor","pointer",3,"click"],[1,"col-sm-12","divstyleOnboarding"],[2,"font-size","22px","text-align","center","font-weight","500","color","black","width","100%","padding-top","5px"],[1,"row",2,"padding-bottom","15px"],[1,"tablestyle"],[2,"color","black","font-size","18px","font-weight","500"],[1,"col-sm-12","divstyleLoading"],[1,"col-sm-12","divstyleUnloading"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","col-md-3",4,"ngIf"],[4,"ngIf"],[1,"col-md-3"],[1,"col-md-3","pr-0"],[2,"margin-top","8px"],[1,"col-md-5"],["type","text","id","txtkmpd","name","txtkmpd","placeholder","Kmpd","value","this.kmpdval","maxlength","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-4","pl-0"],["type","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[1,"col-md-4","pr-0"],[1,"w-100",3,"ngModel","ngModelChange"],["value","hrs"],["value","days"],[1,"col-md-4"],["type","text","id","txthrs","name","txthrs","placeholder","Hours","value","this.hours","maxlength","2",1,"form-control",3,"ngModel","ngModelChange"],["id","tblsuggestions",3,"data","settings",4,"ngIf"],["id","tblsuggestions",3,"data","settings"],["id","tblsuggestions2",3,"data","settings",4,"ngIf"],["id","tblsuggestions2",3,"data","settings"],["id","tblsuggestions3",3,"data","settings",4,"ngIf"],["id","tblsuggestions3",3,"data","settings"],["id","tblsuggestions4",3,"data","settings",4,"ngIf"],["id","tblsuggestions4",3,"data","settings"],["id","tblsuggestions5",3,"data","settings",4,"ngIf"],["id","tblsuggestions5",3,"data","settings"],["id","tblsuggestions6",3,"data","settings",4,"ngIf"],["id","tblsuggestions6",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Call Suggestion"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",3),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="51",e.getReportdata(e.dis_all)})),r["\u0275\u0275elementStart"](9,"div",4),r["\u0275\u0275elementStart"](10,"label",5),r["\u0275\u0275text"](11,"Onward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",6),r["\u0275\u0275elementStart"](13,"table",7),r["\u0275\u0275elementStart"](14,"tr"),r["\u0275\u0275elementStart"](15,"td",8),r["\u0275\u0275text"](16,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td",8),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"tr"),r["\u0275\u0275elementStart"](20,"td",8),r["\u0275\u0275text"](21,"Delay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"td",8),r["\u0275\u0275text"](23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",3),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="11",e.getReportdata(e.dis_all)})),r["\u0275\u0275elementStart"](25,"div",9),r["\u0275\u0275elementStart"](26,"label",5),r["\u0275\u0275text"](27,"Loading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",6),r["\u0275\u0275elementStart"](29,"table",7),r["\u0275\u0275elementStart"](30,"tr"),r["\u0275\u0275elementStart"](31,"td",8),r["\u0275\u0275text"](32,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"td",8),r["\u0275\u0275text"](34),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"tr"),r["\u0275\u0275elementStart"](36,"td",8),r["\u0275\u0275text"](37,"Delay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"td",8),r["\u0275\u0275text"](39),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"div",3),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="21",e.getReportdata(e.dis_all)})),r["\u0275\u0275elementStart"](41,"div",10),r["\u0275\u0275elementStart"](42,"label",5),r["\u0275\u0275text"](43,"Unloading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"div",6),r["\u0275\u0275elementStart"](45,"table",7),r["\u0275\u0275elementStart"](46,"tr"),r["\u0275\u0275elementStart"](47,"td",8),r["\u0275\u0275text"](48,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"td",8),r["\u0275\u0275text"](50),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"tr"),r["\u0275\u0275elementStart"](52,"td",8),r["\u0275\u0275text"](53,"Delay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"td",8),r["\u0275\u0275text"](55),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"div",1),r["\u0275\u0275elementStart"](57,"div",11),r["\u0275\u0275elementStart"](58,"ul",12),r["\u0275\u0275elementStart"](59,"li",13),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="dcs",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](60," Driver Call Suggestion "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](61,"li",14),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="11",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](62," Long Loading "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"li",14),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="51",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](64," Onward Trip Delay "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"li",14),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="21",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](66," Long UnLoading "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](67,"li",14),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="pdf",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](68," Placement Delay Faults "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](69,"li",14),r["\u0275\u0275listener"]("click",(function(){return e.dis_all="st",e.getReportdata(e.dis_all)})),r["\u0275\u0275text"](70," Short Target "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](71,aa,10,1,"div",15),r["\u0275\u0275template"](72,oa,13,2,"div",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](73,ra,2,1,"div",16),r["\u0275\u0275template"](74,la,2,1,"div",16),r["\u0275\u0275template"](75,ca,2,1,"div",16),r["\u0275\u0275template"](76,ma,2,1,"div",16),r["\u0275\u0275template"](77,ga,2,1,"div",16),r["\u0275\u0275template"](78,ua,2,1,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](18),r["\u0275\u0275textInterpolate"](e.onwardTotal),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.onwardDelay),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate"](e.loadingTotal),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.loadingDelay),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate"](e.unloadingTotal),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.unloadingDelay),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngClass","dcs"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","11"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","51"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","21"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","pdf"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","st"==e.dis_all?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf","dcs"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==e.dis_all||"21"==e.dis_all||"51"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","dcs"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","51"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","pdf"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","st"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==e.dis_all),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==e.dis_all))},directives:[s.s,s.v,s.r,c.r,c.u,tt.d,tt.m,tt.r,tt.u,tt.D,tt.w,tt.G,_.a],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn.btn-primary[_ngcontent-%COMP%]{padding:8px 15px;text-transform:capitalize;border-radius:5px;border:0;width:100%}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 198px);height:auto!important}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}.icon[_ngcontent-%COMP%]{padding:4px;margin-left:2px}[_nghost-%COMP%]     .tableFixHead table td i{margin-right:5px}.divstyleOnboarding[_ngcontent-%COMP%]{background:#e3daff}.divstyleLoading[_ngcontent-%COMP%], .divstyleOnboarding[_ngcontent-%COMP%]{height:auto;margin-bottom:10px;padding-bottom:10px;border-radius:10px;border:9px double #fff}.divstyleLoading[_ngcontent-%COMP%]{background:#fccca9}.divstyleUnloading[_ngcontent-%COMP%]{height:auto;margin-bottom:10px;padding-bottom:10px;border-radius:10px;background:#dbf3fa;border:9px double #fff}.tablestyle[_ngcontent-%COMP%]{width:86%;margin-left:7%;border-radius:5px}.tablestyle[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px!important}']}),t})();function xa(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",9),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let va=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.modalService=o,this.gpsDtails=[],this.table=null,this.getVehicleGpsDetail(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleGpsDetail()}getVehicleGpsDetail(){this.common.loading++,this.api.get("GpsData/getVehicleGpsDetail").subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.gpsDtails=t.data,this.table=this.setTable()},t=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{regno:{title:"Vehicle regno",placeholder:"Vehicle regno"},apiProvider:{title:"Api Provider",placeholder:"Api Provider"},lastCall:{title:"last Call ",placeholder:"last Call"},time:{title:"Date Time ",placeholder:"Date Time "}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"75vh"}}}getTableColumns(){let t=[];return this.gpsDtails.map(e=>{t.push({regno:{value:e.regno},apiProvider:{value:e.apiprovider},lastCall:{value:e.lastcalldt},time:{value:e.dttime}})}),t}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"GPS Details",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:GPS Details",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-gps-detail"]],features:[r["\u0275\u0275ProvidersFeature"]([c.f])],decls:15,vars:1,consts:[[1,"row"],[1,"col-sm-10"],[1,"col-sm-02"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"model-body"],["id","gpsDetails",3,"data","settings",4,"ngIf"],["id","gpsDetails",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Gps Details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",3),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("gpsDetails")})),r["\u0275\u0275element"](9,"i",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("gpsDetails")})),r["\u0275\u0275element"](11,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"nb-card-body"),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275template"](14,xa,1,2,"smart-table",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngIf",e.gpsDtails&&e.gpsDtails.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 145px)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})();var Ca=n("0Qh/");function ya(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let _a=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.datePipe=e,this.common=n,this.modalService=a,this.user=o,this.showTable=!1,this.distanceData=[],this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.today=null,this.today=new Date,this.common.refresh=this.refresh.bind(this),this.getData()}ngOnInit(){}refresh(){console.log("Refresh"),this.today=new Date,this.getData()}getData(){this.distanceData=[],this.common.loading++,this.api.get("Vehicles/foVehiclePerodicDistance").subscribe(t=>{this.common.loading--;let e=JSON.stringify(t.data);if(null==e)return this.data=[];console.log("re---",e);let n=JSON.parse(e);this.data=JSON.parse(e),console.log("response data ",n);let a=[];Object.keys(n).map(t=>{let e={_id:t,_lat:n[t].lat,_long:n[t].long,Regno:n[t].regno,Location:n[t].currLoc,LastSuccessDate:n[t].successdt,haltDur:n[t].haltDur,group:n[t].group};n[t].slots&&n[t].slots.map((t,n)=>{e["Slot"+(n+1)]=t}),a.push(e)}),this.distanceData=a,this.smartTableWithHeadings()},t=>{this.common.loading--,this.common.showError()})}smartTableWithHeadings(){if(this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.distanceData){let e=this.distanceData[0];for(var t in e)if("_"!=t.charAt(0)){this.headings.push(t);let e={title:t,placeholder:this.formatTitle(t)};"LastSuccessDate"===t&&(e.type="date"),this.table.data.headings[t]=e}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(var e=0;e<this.distanceData.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Location"==this.headings[t]?{value:this.distanceData[e][this.headings[t]],class:"black",action:this.showLocation.bind(this,this.distanceData[e])}:"LastSuccessDate"==this.headings[t]?{value:this.datePipe.transform(this.distanceData[e][this.headings[t]],"dd MMM HH:mm "),class:"black",action:""}:{value:this.distanceData[e][this.headings[t]],class:"black",action:""},this.valobj.style={background:this.distanceData[e]._rowcolor};t.push(this.valobj)}return t}showLocation(t){if(!t._lat)return void this.common.showToast("Vehicle location not available!");const e={lat:t._lat,lng:t._long,name:"",time:""};console.log("Location: ",e),this.common.params={location:e,title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})}openCompactForm(){this.common.params={data:this.data},this.modalService.open(Ca.a,{size:"lg",container:"nb-layout",backdrop:"static"})}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n=e.data.name,a=this.datePipe.transform(this.today,"dd-MM-yyyy hh:mm:ss a");this.common.getPDFFromTableId(t,n,"Vehicle Distance(24Hr)",null,a)},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n="Customer Name:"+e.data.name,a="Report Generation Time:"+this.datePipe.transform(this.today,"dd-MM-yyyy hh:mm:ss a");this.common.getCSVFromTableId(t,n,"Report Name:Vehicle Distance(24Hr)",null,a)},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-covered-distance"]],decls:21,vars:6,consts:[[1,"row"],[1,"col-sm-4"],[1,"col-sm-2"],[1,"btn","btn-primary","pt-1","pb-1","rounded-sm","text-capitalize",3,"click"],[1,"col-sm-2",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"model-body"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Distance(24Hr)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"p"),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",2),r["\u0275\u0275elementStart"](11,"button",3),r["\u0275\u0275listener"]("click",(function(){return e.openCompactForm()})),r["\u0275\u0275text"](12,"Compact"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",4),r["\u0275\u0275elementStart"](14,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("tbldocs")})),r["\u0275\u0275element"](15,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"span",7),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("tbldocs")})),r["\u0275\u0275element"](17,"i",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"nb-card-body"),r["\u0275\u0275elementStart"](19,"div",9),r["\u0275\u0275template"](20,ya,1,2,"smart-table",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind3"](9,2,e.today,"dd-MM-yyyy hh:mm:ss a","+0530")),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngIf",e.distanceData&&e.distanceData.length))},directives:[s.s,s.v,s.r,c.u,_.a],pipes:[c.f],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:24px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:24px;color:#9f0001}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),t})();function Sa(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"span"),r["\u0275\u0275elementStart"](2,"span",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().printPDF("feedbackLogs")})),r["\u0275\u0275element"](3,"i",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().printCsv("feedbackLogs")})),r["\u0275\u0275element"](5,"i",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Ma(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",17),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let wa=(()=>{class t{constructor(t,e,n,a){let o;this.api=t,this.common=e,this.modalService=n,this.user=a,this.vehicleId=null,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},o=new Date,this.endDate=this.common.dateFormatter(o).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(o.setDate(o.getDate()-1))).split(" ")[0],this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.vehicleId=null,this.getFeedbackLogs()}getDate(t){this.common.params={ref_page:"trip feedback logs"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.startDate)):(this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}getvehicleData(t){console.log("Vehicle Data: ",t),this.vehicleId=t.id}getFeedbackLogs(){this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};var t=new Date(this.common.dateFormatter1(this.endDate).split(" ")[0]);const e={vehicleId:this.vehicleId?this.vehicleId:-1,startDate:this.common.dateFormatter1(this.startDate).split(" ")[0],endDate:this.common.dateFormatter1(t.setDate(t.getDate()+1)).split(" ")[0]};console.log("params:",e);const n="startDate="+e.startDate+"&endDate="+e.endDate+"&vehicleId="+e.vehicleId;this.common.loading++,this.api.get("tripsOperation/tripFeedbackLogs?"+n).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),this.activitySummary=t.data,console.log("activitySummary",this.activitySummary);let e=this.activitySummary[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.activitySummary.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.activitySummary[e][this.headings[t]],class:"black",action:""};t.push(this.valobj)}return t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Trip Feedback Logs",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Trip Feedback Logs",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tip-feedback-logs"]],decls:25,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"col-3"],[4,"ngIf"],[1,"col-7"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"search_vehicle_input"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],[1,"btn","btn-primary","m-0",3,"click"],["id","feedbackLogs",3,"data","settings",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","feedbackLogs",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Trip Feedback Logs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275template"](7,Sa,6,0,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275elementStart"](9,"div",1),r["\u0275\u0275elementStart"](10,"div",6),r["\u0275\u0275elementStart"](11,"input",7),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](12,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",6),r["\u0275\u0275elementStart"](14,"input",8),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](15,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",6),r["\u0275\u0275elementStart"](17,"div",9),r["\u0275\u0275elementStart"](18,"auto-suggestion",10),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getvehicleData(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",6),r["\u0275\u0275elementStart"](20,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getFeedbackLogs()})),r["\u0275\u0275text"](21,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"nb-card-body"),r["\u0275\u0275elementStart"](23,"div"),r["\u0275\u0275template"](24,Ma,1,2,"smart-table",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.activitySummary.length),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](12,4,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](15,7,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",e.activitySummary&&e.activitySummary.length))},directives:[s.s,s.v,c.u,we.a,s.r,_.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 156px)}[_nghost-%COMP%]    .tableFixHead.paginaion_conditon{max-height:calc(100vh - 192px)!important}.btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px;width:100%}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function Oa(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",4),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Pa=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.showTable=!1,this.onwardDelayData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getData(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getData()}getData(){this.onwardDelayData=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay").subscribe(t=>{this.common.loading--,console.log("result",t.data[0].fn_trips_onwarddelay),this.onwardDelayData=JSON.parse(t.data[0].fn_trips_onwarddelay),this.smartTableWithHeadings()},t=>{this.common.loading--,this.common.showError()})}smartTableWithHeadings(){if(this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.onwardDelayData){console.log("onwardDelayData",this.onwardDelayData);let e=this.onwardDelayData[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);let e={title:t,placeholder:this.formatTitle(t)};this.table.data.headings[t]=e}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(var e=0;e<this.onwardDelayData.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.onwardDelayData[e][this.headings[t]],class:"black",action:""};this.valobj.style={background:this.onwardDelayData[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-onward-delay"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-8"],[1,"model-body"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Onward Trip Delay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275template"](8,Oa,1,2,"smart-table",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.onwardDelayData&&e.onwardDelayData.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),t})();var Ea=n("NTD5");function ka(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",4),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ta=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.showTable=!1,this.shortTarget=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getOnwardKmpd(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getOnwardKmpd()}getOnwardKmpd(){this.shortTarget=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/getShortTarget").subscribe(t=>{if(this.common.loading--,this.shortTarget=JSON.parse(t.data[0].result),null!=this.shortTarget){console.log("shortTarget",this.shortTarget);let t=this.shortTarget[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.shortTarget.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.shortTarget[e][this.headings[t]],class:"black",action:""};this.valobj.style={background:this.shortTarget[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](Ea.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["short-target"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-4"],[1,"model-body"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Short Target"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275template"](8,ka,1,2,"smart-table",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.shortTarget&&e.shortTarget.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),t})();function Da(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",14),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ia=(()=>{class t{constructor(t,e,n,a){let o;this.api=t,this.common=e,this.user=n,this.modalService=a,this.showTable=!1,this.onwardKmpd=[],this.headings=[],this.valobj={},this.startDate="",this.endDate="",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},o=new Date,this.startDate=this.common.dateFormatter(o.setDate(o.getDate()-6)),console.log("today startdate",o,this.startDate),o=new Date,this.endDate=this.common.dateFormatter(o.setDate(o.getDate()-1)),console.log("default date",this.startDate,this.endDate),this.getonwardKmpd(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getonwardKmpd()}getonwardKmpd(){this.startDate=this.common.dateFormatter(this.startDate).split(" ")[0],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0],this.onwardKmpd=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};let t={startdate:this.startDate,enddate:this.endDate};console.log("params: ",t),this.common.loading++,this.api.post("VehicleTrips/getFleetOnwardsKmpd",t).subscribe(t=>{if(this.common.loading--,this.onwardKmpd=t.data,null!=this.onwardKmpd){let t=this.onwardKmpd[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.onwardKmpd.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="y_regno"==this.headings[t]?{value:this.onwardKmpd[e][this.headings[t]],class:"blue",action:this.showLocation.bind(this,this.onwardKmpd[e])}:"y_kms"==this.headings[t]?{value:this.onwardKmpd[e][this.headings[t]],class:"blue",action:this.openRouteMapper.bind(this,this.onwardKmpd[e])}:{value:this.onwardKmpd[e][this.headings[t]],class:"black",action:""};this.valobj.style={background:this.onwardKmpd[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getDate(t){this.common.params={ref_page:"onward-kmpd"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("startDate",this.startDate)):(this.endDate="",this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}showLocation(t){t._lat?(this.common.params={location:{lat:t._lat,lng:t._long,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}openRouteMapper(t,e="Trip Start"){console.log("defaultFault",t);let n=this.common.dateFormatter(this.startDate),a=this.common.dateFormatter(this.endDate);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vid,vehicleRegNo:t.y_regno,fromTime:n,toTime:a},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Onward KMPD",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Onward KMPD",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["onward-kmpd"]],decls:26,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"model-body"],["id","onwardKmpd",3,"data","settings",4,"ngIf"],["id","onwardKmpd",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Onward KMPD"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",3),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("onwardKmpd")})),r["\u0275\u0275element"](9,"i",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("onwardKmpd")})),r["\u0275\u0275element"](11,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",7),r["\u0275\u0275elementStart"](13,"div",0),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275elementStart"](15,"input",9),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](16,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275elementStart"](18,"input",10),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](19,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",8),r["\u0275\u0275elementStart"](21,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getonwardKmpd()})),r["\u0275\u0275text"](22,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"nb-card-body"),r["\u0275\u0275elementStart"](24,"div",12),r["\u0275\u0275template"](25,Da,1,2,"smart-table",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](16,3,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](19,6,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.onwardKmpd&&e.onwardKmpd.length))},directives:[s.s,s.v,s.r,c.u,_.a],pipes:[c.f],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 145px)!important}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})();var Fa=n("hit9"),Aa=n("vjOA"),Va=n("bG9B"),La=n("Zw/Q"),za=n("pfN2"),ja=n("se9s"),Ra=n("9zuT"),Ha=n("ia/1");function Na(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275text"](1," No Data Available ! "),r["\u0275\u0275elementEnd"]())}function Ua(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ga=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.modalService=n,this.activeModal=a,this.user=o,this.verifyState=[],this.stateId=[],this.adduserId=[],this.isVerified=[],this.pendingStateType="0",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"68vh"}},this.headings=[],this.valobj={},this.getPendingStates(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getPendingStates()}getPendingStates(){this.stateId=[],this.adduserId=[],this.isVerified=[],this.verifyState=[];let t="is_verified="+this.pendingStateType;console.log("params",t),this.common.loading++,this.api.get("vehicles/getPendingVehicleStates?"+t).subscribe(t=>{this.common.loading--,this.verifyState=t.data||[];for(let o=0;o<this.verifyState.length;o++)null!=this.verifyState[o]._id&&this.stateId.push(this.verifyState[o]._id),this.adduserId.push(this.verifyState[o]._aduserid),this.isVerified.push(this.verifyState[o]._isverified);console.log("adduserid",this.adduserId),console.log("stateid",this.stateId),console.log("isVerified",this.isVerified),console.log("verifyState",this.verifyState);let e=this.verifyState[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Start Date"===n&&(t.type="date"),this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action")};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.verifyState),this.verifyState.map((e,n)=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""},this.valobj.action={value:null,isHTML:!1,action:null,class:"",icons:this.actionIcons(e,n)};t.push(this.valobj)}),t}actionIcons(t,e){let n=[];return 0==this.isVerified[e]&&n.push({class:" fa fa-check-circle",action:this.acceptOnTrip.bind(this,t)},{class:"fa fa-window-close",action:this.rejectOnTrip.bind(this,t)}),this.adduserId[e]>0&&n.push({class:"fa fa-trash remove",action:this.removeVehicleState.bind(this,e)}),n}acceptOnTrip(t){let e={vehicleStateId:t._id,isVerified:1};t&&(console.log("details",t),this.common.params={title:"Accept Trip ",description:"<b>&nbsp;Are Sure To Accept This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(console.log("data",t),this.common.loading++,this.api.post("Vehicles/ActionOnPendingVehicleStates",e).subscribe(t=>{this.common.loading--,console.log("res: ",t),this.common.showToast(t.data[0].r_msg),this.getPendingStates()},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError("Error!")}))}))}rejectOnTrip(t){let e={vehicleStateId:t._id,isVerified:0,vehicleId:t._vid,lat:t._lat,long:t._lngt,vregno:t.Vehicle};console.log("Param:",e),t&&(console.log("details",t),this.common.params={title:"Reject Trip ",description:"<b>&nbsp;Are Sure To Reject This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(n=>{n.response&&(console.log("data",n),this.common.loading++,this.api.post("Vehicles/ActionOnPendingVehicleStates",e).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.data[0].r_msg,"",1e4),this.common.params={vehicleStateId:t._id,isVerified:0,vehicleId:t._vid,lat:t._lat,long:t._lngt,vregno:t.Vehicle},this.modalService.open(ut.a,{size:"lg",container:"nb-layout",backdrop:"static"})},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError("Error!")}))}))}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Verify Trip States",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Verify Trip States",["Action"],"")},t=>{this.common.loading--,console.log(t)})}removeVehicleState(t){let e={stateid:this.stateId[t]};console.log("params",e),console.log("index",t),this.common.params={title:"Remove State ",description:"<b>&nbsp;Are Sure To Remove State <b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{t.response&&(console.log("data",t),this.common.loading++,this.api.post("Vehicles/removeVehicleState",e).subscribe(t=>{this.common.loading--,console.log("res: ",t),t.data[0].r_id>0?(this.common.showToast("Selected state has been deleted"),this.getPendingStates()):this.common.showToast(t.data[0].r_msg,"",1e4)},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError("Error!")}))})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-verify-states"]],decls:23,vars:3,consts:[[2,"border","0px"],[1,"row"],[1,"col-3"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","-1"],[1,"col-02"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","verifyState",3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],["id","verifyState",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Verify Trip States"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"select",4),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pendingStateType=t}))("change",(function(){return e.getPendingStates()})),r["\u0275\u0275elementStart"](8,"option",5),r["\u0275\u0275text"](9,"No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",6),r["\u0275\u0275text"](11,"Yes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",7),r["\u0275\u0275text"](13,"Any"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275elementStart"](15,"span",9),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("verifyState")})),r["\u0275\u0275element"](16,"i",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"span",11),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("verifyState")})),r["\u0275\u0275element"](18,"i",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"nb-card-body"),r["\u0275\u0275template"](20,Na,2,0,"div",13),r["\u0275\u0275elementStart"](21,"div"),r["\u0275\u0275template"](22,Ua,1,2,"smart-table",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",e.pendingStateType),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngIf",0==e.verifyState.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.verifyState.length>0))},directives:[s.s,s.v,tt.D,tt.r,tt.u,tt.w,tt.G,s.r,c.u,_.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     table .fa{margin-right:10px;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-check-circle{color:#37ad28}[_nghost-%COMP%]     .fa-check-circle span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-check-circle span:before{content:"Accept";display:block;position:absolute;top:0;left:0;background-color:#37ad28;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-check-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #37ad28;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-check-circle:hover span{display:block}[_nghost-%COMP%]     .fa-window-close{color:red}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Reject";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .tableFixHead{height:calc(100vh - 220px)!important}']}),t})();function Ba(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275text"](1," Select StartDate & EndDate And Click Submit ! "),r["\u0275\u0275elementEnd"]())}function $a(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275text"](1," No Data Available ! "),r["\u0275\u0275elementEnd"]())}function Wa(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ka=(()=>{class t{constructor(t,e,n,a){this.common=t,this.api=e,this.modalService=n,this.dateService=a,this.startDate=null,this.endDate=null,this.vehiclePerformance=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.click=!1;let o=new Date,i=new Date;this.endDate=o,this.endDate=this.common.dateFormatter(o),i=new Date(o.setDate(o.getDate()-7)),this.startDate=this.common.dateFormatter(i),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehiclePerformance()}getDate(t){this.common.params={ref_page:"vehicle-performance"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.dateService.dateFormatter(e.date,"",!1).split(" ")[0]):(this.endDate=this.dateService.dateFormatter(e.date,"",!1).split(" ")[0],console.log("endDate",this.endDate)))})}getVehiclePerformance(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.vehiclePerformance=[];const t=this.common.dateFormatter1(this.startDate).split(" ")[0],e=this.common.dateFormatter1(this.endDate.split(" ")[0]);this.click=!0;const n="startDate="+t+"&endDate="+e;this.common.loading++,this.api.get("Vehicles/vehiclePerformance?"+n).subscribe(t=>{if(this.common.loading--,console.log("res: ",t.data),null==t.data)return this.vehiclePerformance=[],void(this.table=null);this.vehiclePerformance=t.data;let e=this.vehiclePerformance[0];for(var n in console.log("first_Rec",e),e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.vehiclePerformance.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("Test....",this.headings[t]),this.valobj[this.headings[t]]="distance"===this.headings[t]?{value:this.vehiclePerformance[e][this.headings[t]],class:this.vehiclePerformance[e][this.headings[t]]>0?"blue":"",action:this.vehiclePerformance[e][this.headings[t]]>0?this.openRouteMapper.bind(this,this.vehiclePerformance[e]):""}:{value:this.vehiclePerformance[e][this.headings[t]]};t.push(this.valobj)}return t}openRouteMapper(t){this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vid,vehicleRegNo:t.regno,fromTime:t._start,toTime:t._end},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](_t.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-performance"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","m-0",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Performance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"input",5),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](10,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"input",6),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](13,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",4),r["\u0275\u0275elementStart"](15,"button",7),r["\u0275\u0275listener"]("click",(function(){return e.getVehiclePerformance()})),r["\u0275\u0275text"](16,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"nb-card-body"),r["\u0275\u0275template"](18,Ba,2,0,"div",8),r["\u0275\u0275template"](19,$a,2,0,"div",8),r["\u0275\u0275elementStart"](20,"div"),r["\u0275\u0275template"](21,Wa,1,2,"smart-table",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](10,5,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](13,8,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",!e.click),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.vehiclePerformance.length&&e.click),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.vehiclePerformance&&e.vehiclePerformance.length))},directives:[s.s,s.v,s.r,c.u,_.a],pipes:[c.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var qa=n("kSDO");function Ja(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",14),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ya=(()=>{class t{constructor(t,e,n,a,o,i){this.router=t,this.modalservice=e,this.common=n,this.api=a,this.datePipe=o,this.user=i,this.checkstart=null,this.checkend=null,this.arrdriverData=[{days:null,Regno:null,attendance:null,id:null}],this.table={data:{headings:{Regno:{placeholder:"RegNo",editable:!1}},columns:[]},settings:{hideHeader:!0,editable:!1}},this.data=[],this.vehicleId=null;let r=new Date;this.startDate=new Date(r.setDate(r.getDate()-7)),this.endDate=new Date,console.log("date on cons",this.startDate,this.endDate)}ngOnInit(){}getDate(t){console.log("start",this.startDate),this.common.params={ref_page:"daywise vehicle distance"},this.modalservice.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{"start"==t?(this.startDate="",this.startDate=e.date):(this.endDate="",this.endDate=e.date),console.log("start and end",this.startDate,this.endDate)})}getDistance(){if(this.data=[],this.table={data:{headings:{Regno:{placeholder:"RegNo",editable:!1}},columns:[]},settings:{hideHeader:!0,editable:!1}},console.log("this.table",this.table),this.checkstart=new Date(this.startDate.valueOf()),this.checkend=new Date(this.endDate.valueOf()),console.log("checkend and checkstart",this.checkend,this.checkstart),this.checkend>this.checkstart.setDate(this.checkstart.getDate()+7))return void this.common.showToast("Differece from start to end date should be 7 days");let t={fromTime:this.common.dateFormatter(this.startDate).split(" ")[0],tTime:this.common.dateFormatter(this.endDate).split(" ")[0]};console.log("params to insert",t),this.common.loading++,this.api.post("Vehicles/foVehicleDayWiseDistance",t).subscribe(t=>{this.common.loading--,console.log("Res:",t.data),this.data=t.data||[],this.table.data.columns=this.getTableColumns(this.formattData())},t=>{this.common.loading--,console.log(t)})}formattData(){console.log("this.data",this.data);let t=z.groupBy(this.data,"vehicleId"),e=[];return Object.keys(t).map(n=>{e.push({Regno:t[n][0].regno,data:[...t[n]]})}),e[0].data.map(t=>{this.table.data.headings[t.date.split(" ")[0]]={placeholder:this.datePipe.transform(t.date.split(" ")[0],"dd")}}),console.log("Group:",t,e,this.table.data.headings),e}getTableColumns(t){let e=[];return t.map(t=>{let n={Regno:{value:t.Regno}};t.data.map(t=>{n[t.date.split(" ")[0]]={value:t.distance}}),e.push(n)}),e}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Daywise Vehicle Distance",["Action"],"")},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"FoName:"+e.data.name,"Report:Daywise Vehicle Distance",["Action"],"")},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](l.c),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["daywise-vehicle-distance"]],decls:25,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mb-3"],[1,"col-3"],["type","text","autocomplete","off","placeholder","Start Date","name","date",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","end Date","name","date1",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"btn","btn-primary","pt-1","pb-1","rounded-sm","text-capitalize",3,"click"],[1,"container"],["id","daywiseVehDistance",3,"data","settings",4,"ngIf"],["id","daywiseVehDistance",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5," Day Wise Vehicle Distance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",3),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("daywiseVehDistance")})),r["\u0275\u0275element"](9,"i",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("daywiseVehDistance")})),r["\u0275\u0275element"](11,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"nb-card-body"),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275elementStart"](15,"input",9),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](16,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275elementStart"](18,"input",10),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](19,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",8),r["\u0275\u0275elementStart"](21,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getDistance()})),r["\u0275\u0275text"](22,"Get Distance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",12),r["\u0275\u0275template"](24,Ja,1,2,"smart-table",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](16,3,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](19,6,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.table.data.columns.length))},directives:[s.s,s.v,s.r,c.u,_.a],pipes:[c.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})();var Za=n("F9Xm"),Qa=n("QVK/");function Xa(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",32),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit;return e.customField=!0,e.customButton=!1})),r["\u0275\u0275text"](1,"Add Fields"),r["\u0275\u0275elementEnd"]()}}function to(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275template"](1,Xa,2,0,"button",36),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.customButton)}}function eo(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275elementStart"](1,"button",32),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).addMore()})),r["\u0275\u0275text"](2,"Add Materials"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function no(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275elementStart"](1,"i",37),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]().index;return r["\u0275\u0275nextContext"]().particulars.splice(e,1)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function ao(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275elementStart"](2,"auto-suggestion",38),r["\u0275\u0275listener"]("onSelected",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[0]=e.id})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275elementStart"](4,"i",39),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).addField()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275elementStart"](6,"input",40),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[1]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275elementStart"](8,"input",41),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[2]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275elementStart"](10,"input",40),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[3]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275elementStart"](12,"input",41),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[4]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275elementStart"](14,"input",40),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[5]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td"),r["\u0275\u0275elementStart"](16,"input",41),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[6]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td"),r["\u0275\u0275elementStart"](18,"input",40),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[7]=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]().$implicit,e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("data",e.getFieldName)("preSelected",null),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[1]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[2]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[3]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[4]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[5]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[6]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.customfields.customDetail[7])}}function oo(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tbody"),r["\u0275\u0275elementStart"](1,"tr"),r["\u0275\u0275elementStart"](2,"td"),r["\u0275\u0275elementStart"](3,"label"),r["\u0275\u0275text"](4," Material "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275elementStart"](6,"auto-suggestion",33),r["\u0275\u0275listener"]("onSelected",(function(n){r["\u0275\u0275restoreView"](t);const a=e.index,o=r["\u0275\u0275nextContext"]();return o.searchMaterialType(n,a,o.material)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275elementStart"](8,"label"),r["\u0275\u0275text"](9,"Number Of Articles "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275elementStart"](11,"input",34),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.articles=n}))("focus",(function(){r["\u0275\u0275restoreView"](t);const n=e.index;return r["\u0275\u0275nextContext"]().material(n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"td"),r["\u0275\u0275elementStart"](13,"label"),r["\u0275\u0275text"](14,"Weight"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td"),r["\u0275\u0275elementStart"](16,"input",15),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.weight=n})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td"),r["\u0275\u0275elementStart"](18,"label"),r["\u0275\u0275text"](19,"Material Value"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"td"),r["\u0275\u0275elementStart"](21,"input",15),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.material_value=n})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](22,to,2,1,"td",35),r["\u0275\u0275template"](23,eo,3,0,"td",35),r["\u0275\u0275template"](24,no,2,0,"td",35),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](25,ao,19,9,"tr",35),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("preSelected",null)("inputId","material-"+n),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.articles),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.weight),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.material_value),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n==a.particulars.length-1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n==a.particulars.length-1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0!==n),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.customField)}}let io=(()=>{class t{constructor(t,e,n,a,o){this.modalService=t,this.common=e,this.accountService=n,this.api=a,this.mapService=o,this.materialDetails=null,this.branches=null,this.vehicleId=null,this.vehicleRegNo=null,this.vehicleno=null,this.flag=!1,this.lr={taxPaidBy:null,consigneeName:null,consigneeAddress:null,consigneeId:null,deliveryAddress:null,consignorAddress:null,consignorName:null,consignorId:null,sameAsDelivery:!1,paymentTerm:"1",payableAmount:0,lrNumber:null,sourceCity:null,sourceLat:null,sourceLng:null,destinationCity:null,destinationLat:null,destinationLng:null,remark:null,date:null,amount:0,gstPer:0},this.particulars=[{material:null,articles:null,weight:null,material_value:null,customfields:{customDetail:[]},customField:!1,customButton:!0}],this.driver={name:null,licenseNo:null,id:null},this.taName=null,this.taId=null,this.preSelectedDriver=null,this.getFieldName=[];let i=new Date;i.setDate(i.getDate()),this.lr.date=i,this.getAllFieldName()}ngOnInit(){}ngAfterViewInit(){this.mapService.autoSuggestion("sourceCity",(t,e,n)=>{this.lr.sourceCity=t,this.lr.sourceLat=e,this.lr.sourceLng=n}),this.mapService.autoSuggestion("destinationCity",(t,e,n)=>{this.lr.destinationCity=t,this.lr.destinationLat=e,this.lr.destinationLng=n})}getBranches(){this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(t=>{console.log("Branches :",t.data),this.accountService.branches=t.data},t=>{console.log("Error: ",t)})}addConsignee(){console.log("open material modal"),this.modalService.open(Za.a,{size:"sm",container:"nb-layout",backdrop:"static",windowClass:"add-consige-veiw"}).result.then(t=>{console.log("Data:",t)})}addDriver(){this.common.params={vehicleId:this.vehicleId,vehicleRegNo:this.vehicleRegNo},this.modalService.open(Se.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t),t.data&&this.getDriverInfo()})}getvehicleData(t){console.log("Vehicle Data: ",t),this.vehicleId=t.id,this.vehicleRegNo=t.regno,this.getDriverInfo()}getDriverInfo(){let t={vid:this.vehicleId};this.common.loading++,this.api.post("Drivers/getDriverInfo",t).subscribe(t=>{this.common.loading--,console.log("res",t.data),t.data.length>0?(this.driver.name=t.data[0].empname,this.driver.id=t.data[0].driver_id,this.mobileno=t.data[0].mobileno,this.preSelectedDriver={mobileno:t.data[0].mobileno},console.log("------------------:",this.preSelectedDriver),console.log("name,id,number",this.driver.name,this.driver.id,this.mobileno)):this.flag=!1},t=>{this.common.loading--,this.common.showError()})}getDriverData(t){return console.log("driver",t),this.driver.name=t.empname,this.driver.licenseNo=t.licence_no,this.driver.id=t.id,this.driver.id}getConsignorDetail(t){console.log("consignor",t),this.lr.consignorAddress=t.address,this.lr.consignorName=t.name,this.lr.consignorId=t.id}getConsigneeDetail(t){console.log("consignee",t),this.lr.consigneeAddress=t.address,this.lr.consigneeName=t.name,this.lr.consigneeId=t.id}getBranchDetails(){}fillConsigneeAddress(){console.log("sameAsDelivery",this.lr.consigneeAddress),this.lr.deliveryAddress=this.lr.sameAsDelivery?this.lr.consigneeAddress:null}addMore(){this.particulars.push({material:null,articles:null,weight:null,material_value:null,customfields:{customDetail:[]},customField:!1,customButton:!0})}searchTaName(t){this.taName=t.name,this.taId=t.id}searchMaterialType(t,e,n){}material(t){console.log("material-"+t),this.particulars[t].material=document.getElementById("material-"+t).value,console.log("Vlue",this.particulars[t].material)}saveDetails(){if(this.lr.sourceLat&&this.lr.destinationLat){++this.common.loading;let t=JSON.parse(JSON.stringify(this.particulars));t.map(t=>{for(let e=0;e<t.customfields.customDetail.length;e+=2)t.customfields[t.customfields.customDetail[e]]=t.customfields.customDetail[e+1];t.customfields=Object.assign({},t.customfields),delete t.customfields.customDetail});let e=this.common.dateFormatter1(this.lr.date).split(" ")[0];console.log("params lrdate",e);let n={branchId:this.accountService.selected.branch.id,vehicleId:this.vehicleId,lrNo:this.lr.lrNumber,lrDate:e,driverId:this.driver.id,source:this.lr.sourceCity,destination:this.lr.destinationCity,consignorId:this.lr.consignorId,consigneeId:this.lr.consigneeId,amount:this.lr.amount,gstPer:this.lr.gstPer,totalAmount:this.lr.payableAmount,payType:this.lr.paymentTerm,taxPaid:this.lr.taxPaidBy,travelAgentId:this.taId,deliveryAddress:this.lr.deliveryAddress,lrDetails:JSON.stringify(t),remarks:this.lr.remark,sourceLat:this.lr.sourceLat,sourceLng:this.lr.sourceLng,destinationLat:this.lr.destinationLat,destinationLng:this.lr.destinationLng,consigneeAddress:this.lr.consigneeAddress,consignorAddress:this.lr.consignorAddress,vehicleRegNo:document.getElementById("vehicleno").value,lrType:"true"};console.log("params",n),this.api.post("LorryReceiptsOperation/generateLR",n).subscribe(t=>{--this.common.loading,console.log("response :",t.data[0].rtn_id),t.data[0].rtn_id>0?alert("LR Generated Successfully"):alert(t.data[0].rtn_msg)},t=>{--this.common.loading,alert(t),console.log("Error: ",t)})}else this.common.showError("Source and Destination Location selection are required")}checkDateFormat(){let t=this.lr.date;if(console.log("this.lrdate",this.lr.date),!(t.length<8||t.match(/^\d{4}[-]\d{2}[-]\d{2}$/))){let e=t[0]+t[1],n=t[2]+t[3],a=t.substring(4,8);this.lr.date=a+"-"+n+"-"+e,console.log("checkDateFormat",this.lr.date)}}getDate(){this.common.params={ref_page:"generate-lr"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&(this.lr.date=this.common.dateFormatter(t.date,"ddMMYYYY").split(" ")[0],console.log("lrdate: by getDate "+this.lr.date))})}resetData(t){this.vehicleId=null,console.log(t)}calculateTotalAmount(){let t=0;t=100+parseFloat(""+this.lr.gstPer),this.lr.payableAmount=this.lr.amount*t/100,console.log(t,"lr payable amount",this.lr.payableAmount)}addField(){this.modalService.open(Qa.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getAllFieldName()})}getAllFieldName(){this.api.get("Suggestion/lrFoFields?sugId=1").subscribe(t=>{this.getFieldName=t.data,console.log("All Name",this.getFieldName)},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](ft.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["generate-lr-no-vehicles"]],decls:153,vars:24,consts:[[2,"border","0px"],[1,"table","table-bordered","gerrate_tabel"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number","inputId","vehicleno",2,"width","60%",3,"ngModel","onSelected","change","ngModelChange"],["type","text","placeholder","Enter LR Number",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-12"],[3,"isTime","dateTimeValue","onChanged"],["url","Suggestion/GetTransportAgent","display","name","placeholder","Transport Agent Name",3,"preSelected","onSelected"],["url","Booster/getDrivers","display","mobileno","placeholder","Select Driver",1,"col-md-10","auto-suggest",2,"width","100%",3,"preSelected","onSelected"],["col-md-2",""],[1,"fa","fa-plus","add","col-md-2",3,"click"],["placeholder","sourceCity","id","sourceCity",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","destinationCity","id","destinationCity",1,"form-control",3,"ngModel","ngModelChange"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","",1,"col-md-10","auto-suggest",2,"width","100%",3,"onSelected"],["type","text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange","change"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"],["type","number","min","0","max","31",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"form-conrol",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],[1,"radio-btn"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","1",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","2",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","3",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","4",1,"radio-btn",3,"ngModel","ngModelChange"],["type","text","placeholder","Any Other Remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"material_details"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["url","Suggestion/GetMaterialTypes","display","name","placeholder","Material Name",3,"preSelected","inputId","onSelected"],["type","text",1,"form-control",3,"ngModel","ngModelChange","focus"],[4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"fa","fa-trash","remove",3,"click"],["display","name","placeholder","Name",3,"data","preSelected","onSelected"],[1,"fa","fa-plus","add","col-md-4",3,"click"],["type","text","placeholder","Value",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Generate LR "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"table",1),r["\u0275\u0275elementStart"](6,"tbody"),r["\u0275\u0275elementStart"](7,"tr"),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275elementStart"](9,"label"),r["\u0275\u0275text"](10,"Vehicle No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td"),r["\u0275\u0275elementStart"](12,"auto-suggestion",2),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getvehicleData(t)}))("change",(function(t){return e.resetData(t)}))("ngModelChange",(function(t){return e.vehicleno=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"LR No*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275elementStart"](17,"input",3),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.lrNumber=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"tr"),r["\u0275\u0275elementStart"](19,"td"),r["\u0275\u0275elementStart"](20,"label"),r["\u0275\u0275text"](21,"Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"td"),r["\u0275\u0275elementStart"](23,"div",4),r["\u0275\u0275elementStart"](24,"div",5),r["\u0275\u0275elementStart"](25,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.lr.date=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"td"),r["\u0275\u0275elementStart"](27,"label"),r["\u0275\u0275text"](28,"T.A. Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"td"),r["\u0275\u0275elementStart"](30,"auto-suggestion",7),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchTaName(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"tr"),r["\u0275\u0275elementStart"](32,"td"),r["\u0275\u0275elementStart"](33,"label"),r["\u0275\u0275text"](34,"Driver Mob NO"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"td"),r["\u0275\u0275elementStart"](36,"span"),r["\u0275\u0275elementStart"](37,"auto-suggestion",8),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getDriverData(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"div",9),r["\u0275\u0275elementStart"](39,"i",10),r["\u0275\u0275listener"]("click",(function(){return e.addDriver()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"td"),r["\u0275\u0275elementStart"](41,"label"),r["\u0275\u0275text"](42,"Driver Name : "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](43),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"td"),r["\u0275\u0275elementStart"](45,"label"),r["\u0275\u0275text"](46,"License No : "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"tr"),r["\u0275\u0275elementStart"](49,"td"),r["\u0275\u0275elementStart"](50,"label"),r["\u0275\u0275text"](51,"Source City*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"td"),r["\u0275\u0275elementStart"](53,"input",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.sourceCity=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"td"),r["\u0275\u0275elementStart"](55,"label"),r["\u0275\u0275text"](56,"Destination City* "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"td"),r["\u0275\u0275elementStart"](58,"input",12),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.destinationCity=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"tr"),r["\u0275\u0275elementStart"](60,"td"),r["\u0275\u0275elementStart"](61,"label"),r["\u0275\u0275text"](62,"Consignor Name*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"td"),r["\u0275\u0275elementStart"](64,"span"),r["\u0275\u0275elementStart"](65,"auto-suggestion",13),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getConsignorDetail(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"i",10),r["\u0275\u0275listener"]("click",(function(){return e.addConsignee()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](67,"td"),r["\u0275\u0275elementStart"](68,"label"),r["\u0275\u0275text"](69,"Consignor Address"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"td"),r["\u0275\u0275elementStart"](71,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.consignorAddress=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](72,"tr"),r["\u0275\u0275elementStart"](73,"td"),r["\u0275\u0275elementStart"](74,"label"),r["\u0275\u0275text"](75,"Consignee Name*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](76,"td"),r["\u0275\u0275elementStart"](77,"span"),r["\u0275\u0275elementStart"](78,"auto-suggestion",13),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getConsigneeDetail(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](79,"div",9),r["\u0275\u0275elementStart"](80,"i",10),r["\u0275\u0275listener"]("click",(function(){return e.addConsignee()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](81,"td"),r["\u0275\u0275elementStart"](82,"label"),r["\u0275\u0275text"](83,"Consignee Address"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](84,"td"),r["\u0275\u0275elementStart"](85,"input",15),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.consigneeAddress=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](86,"tr"),r["\u0275\u0275elementStart"](87,"td"),r["\u0275\u0275elementStart"](88,"label"),r["\u0275\u0275text"](89,"Delivery Address "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](90,"td"),r["\u0275\u0275elementStart"](91,"input",16),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.sameAsDelivery=t}))("change",(function(){return e.fillConsigneeAddress()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](92," Same as Consignee Address "),r["\u0275\u0275elementStart"](93,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.deliveryAddress=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](94,"tr"),r["\u0275\u0275elementStart"](95,"td"),r["\u0275\u0275elementStart"](96,"label"),r["\u0275\u0275text"](97,"Amount"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](98,"td"),r["\u0275\u0275elementStart"](99,"input",17),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.amount=t}))("change",(function(){return e.calculateTotalAmount()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](100,"td"),r["\u0275\u0275elementStart"](101,"label"),r["\u0275\u0275text"](102,"GST %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](103,"td"),r["\u0275\u0275elementStart"](104,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.gstPer=t}))("change",(function(){return e.calculateTotalAmount()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](105,"tr"),r["\u0275\u0275elementStart"](106,"td"),r["\u0275\u0275elementStart"](107,"label"),r["\u0275\u0275text"](108,"Total Amount"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](109,"td"),r["\u0275\u0275text"](110),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](111,"td"),r["\u0275\u0275elementStart"](112,"label"),r["\u0275\u0275text"](113,"Payment Term"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](114,"td"),r["\u0275\u0275elementStart"](115,"select",19),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.paymentTerm=t})),r["\u0275\u0275elementStart"](116,"option",20),r["\u0275\u0275text"](117,"ToPay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](118,"option",21),r["\u0275\u0275text"](119,"Paid"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](120,"option",22),r["\u0275\u0275text"](121,"To Be Billed"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](122,"tr"),r["\u0275\u0275elementStart"](123,"td"),r["\u0275\u0275elementStart"](124,"label"),r["\u0275\u0275text"](125,"Tax Paid By : "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](126,"td"),r["\u0275\u0275elementStart"](127,"span"),r["\u0275\u0275elementStart"](128,"label",23),r["\u0275\u0275elementStart"](129,"input",24),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.taxPaidBy=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](130,"Consignor "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](131,"label",23),r["\u0275\u0275elementStart"](132,"input",25),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.taxPaidBy=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](133,"Consignee "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](134,"label",23),r["\u0275\u0275elementStart"](135,"input",26),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.taxPaidBy=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](136,"GTA "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](137,"label",23),r["\u0275\u0275elementStart"](138,"input",27),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.taxPaidBy=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](139,"Exempt "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](140,"td"),r["\u0275\u0275elementStart"](141,"label"),r["\u0275\u0275text"](142,"Remark"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](143,"td"),r["\u0275\u0275elementStart"](144,"input",28),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.lr.remark=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](145,"div",29),r["\u0275\u0275elementStart"](146,"h5"),r["\u0275\u0275text"](147,"Material Details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](148,"table",30),r["\u0275\u0275template"](149,oo,26,9,"tbody",31),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](150,"div"),r["\u0275\u0275elementStart"](151,"button",32),r["\u0275\u0275listener"]("click",(function(){return e.saveDetails()})),r["\u0275\u0275text"](152,"Save"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",e.vehicleno),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.lr.lrNumber),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.lr.date),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("preSelected",e.preSelectedDriver),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",e.driver.name," "),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",e.driver.licenseNo," "),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.lr.sourceCity),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.lr.destinationCity),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngModel",e.lr.consignorAddress),r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngModel",e.lr.consigneeAddress),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.lr.sameAsDelivery),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.lr.deliveryAddress),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.lr.amount),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.lr.gstPer),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",e.lr.payableAmount," "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.lr.paymentTerm),r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngModel",e.lr.taxPaidBy),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",e.lr.taxPaidBy),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",e.lr.taxPaidBy),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",e.lr.taxPaidBy),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.lr.remark),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",e.particulars))},directives:[s.s,s.v,s.r,we.a,tt.r,tt.u,tt.d,et.a,tt.a,tt.x,tt.D,tt.w,tt.G,tt.z,c.t,c.u],styles:["label.radio-btn[_ngcontent-%COMP%] + label.radio-btn[_ngcontent-%COMP%]{margin-left:10px}.radio-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:0 5px 0 0}textarea[_ngcontent-%COMP%]{width:100%;height:100px}.remove[_ngcontent-%COMP%]{font-size:12px;background-color:#f44236;color:#fff;padding:7px 8px;border-radius:3px}.auto-suggest[_ngcontent-%COMP%]{margin-left:-15px}nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding:10px 15px}table.gerrate_tabel[_ngcontent-%COMP%]{border:0}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding:5px 10px}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-box-shadow:none;box-shadow:none}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:14px;color:#fff;background:linear-gradient(-135deg,#1de9b6,#1dc4e9);width:28px;float:right;padding:8px 0;text-align:center;border-radius:3px}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:15%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:35%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:35%}.material_details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #ccc;padding:10px 0;margin-bottom:15px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border:0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{border:0!important}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding:5px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-box-shadow:none;box-shadow:none;padding:3px 5px!important;height:auto!important}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:14px;color:#fff;background:#000;width:28px;float:right;padding:6px 0;text-align:center;border-radius:3px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;border:0;border-radius:3px;padding:7px;text-transform:capitalize}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;margin:0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{vertical-align:middle;margin:0 5px 0 0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:7%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:8%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:7%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){width:9%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(11){width:1%}.material_details[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:10px 20px;cursor:pointer!important}"]}),t})();var ro=n("V+Fr"),so=n("EFD8");function lo(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",7),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().genrateLrManifest()})),r["\u0275\u0275text"](1,"Generate-lr-ManiFest"),r["\u0275\u0275elementEnd"]()}}function co(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",11),r["\u0275\u0275text"](1," No Data Available On That Time Period ! "),r["\u0275\u0275elementEnd"]())}function ho(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",12),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let mo=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.user=n,this.modalService=a,this.activeModal=o,this.startDate="",this.endDate="",this.manifestData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};let i=new Date;this.endDate=this.common.dateFormatter(i).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(i.setDate(i.getDate()-10))).split(" ")[0],this.common.refresh=this.refresh.bind(this),this.getLrManifest()}ngOnInit(){}refresh(){this.getLrManifest()}getDate(t){this.common.params={ref_page:"vehicle trip stages"},this.modalService.open(Me.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&("start"==t?(this.startDate="",this.startDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.startDate)):(this.endDate=this.common.dateFormatter(e.date).split(" ")[0],console.log("endDate",this.endDate)))})}getLrManifest(){this.manifestData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};let t=this.common.dateFormatter1(this.endDate.split(" ")[0])+" 23:59:00",e="startDate="+this.common.dateFormatter1(this.startDate).split(" ")[0]+"&endDate="+t;this.common.loading++,this.api.get("LorryReceiptsOperation/getLrManifest?"+e).subscribe(t=>{if(this.common.loading--,this.manifestData=t.data,console.log("retrun Data length is zero",this.manifestData),null==this.manifestData)return;let e=this.manifestData[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:n,placeholder:this.formatTitle(n)};"Date"===n&&(t.type="date"),this.table.data.headings[n]=t}this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];for(var e=0;e<this.manifestData.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.manifestData[e][this.headings[t]],class:this.manifestData[e][this.headings[t]]>0?"blue":"black",action:""},this.valobj.action={value:"",isHTML:!1,action:null,icons:this.actionIcons(this.manifestData[e])};t.push(this.valobj)}return t}actionIcons(t){let e=[{class:"fa fa-print",action:this.openViewManifestModal.bind(this,t)}];return this.user.permission.edit&&e.push({class:" fa fa-pencil-square-o ml-2",action:this.editLrManifest.bind(this,t)}),e}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}closeModal(){this.activeModal.close()}openViewManifestModal(t){console.log("====manifestData=",t),this.common.params={manifestId:t._id},this.modalService.open(ro.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(t=>{})}editLrManifest(t){this.common.params={manifestId:t._id},this.modalService.open(so.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getLrManifest()})}genrateLrManifest(){this.common.params={},this.modalService.open(so.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getLrManifest()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["view-manifesto"]],decls:21,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-5"],[1,"col-sm-2"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-1"],[1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["class","no-data alert alert-danger text-center","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger","text-center"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Manifestation "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"input",4),r["\u0275\u0275listener"]("click",(function(){return e.getDate("start")})),r["\u0275\u0275pipe"](8,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275elementStart"](10,"input",5),r["\u0275\u0275listener"]("click",(function(){return e.getDate("end")})),r["\u0275\u0275pipe"](11,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",6),r["\u0275\u0275elementStart"](13,"button",7),r["\u0275\u0275listener"]("click",(function(){return e.getLrManifest()})),r["\u0275\u0275text"](14,"OK"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",3),r["\u0275\u0275template"](16,lo,2,0,"button",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"nb-card-body"),r["\u0275\u0275template"](18,co,2,0,"div",9),r["\u0275\u0275elementStart"](19,"div"),r["\u0275\u0275template"](20,ho,1,2,"smart-table",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](8,5,e.startDate,"dd MMM yyyy")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",r["\u0275\u0275pipeBind2"](11,8,e.endDate,"dd MMM yyyy")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",null==e.manifestData),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.manifestData&&e.manifestData.length>0))},directives:[s.s,s.v,c.u,s.r,_.a],pipes:[c.f],styles:['nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding:10px 15px}[_nghost-%COMP%]     td .zoom{background:linear-gradient(-135deg,#1de9b6,#1dc4e9);display:inline-block;padding:3px 8px;border-radius:3px;color:#fff}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}[_nghost-%COMP%]     td i.fa-print span{position:absolute;display:none;padding:11px 57px;left:-44px;top:-28px;font-family:Roboto;z-index:999}.fa-print[_ngcontent-%COMP%]:before{content:"\\f02f";padding:10px}']}),t})();var po=n("cSOp"),go=n("nvNi"),bo=n("FgHD"),uo=n("9M6I");function fo(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",11),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function xo(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275element"](1,"smart-table",13),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function vo(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275elementStart"](1,"h4",15),r["\u0275\u0275text"](2,"No Record Found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}let Co=(()=>{class t{constructor(t,e,n,a,o,i){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.route=o,this.modalService=i,this.dropDown=[{name:"Pending",id:0},{name:"Complete",id:1}],this.vehicleStatus=0,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewImages=null,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.endDate=new Date}ngOnInit(){}getLorryPodReceipts(){console.log("status",this.vehicleStatus);var t=new Date(this.common.dateFormatter(this.endDate).split(" ")[0]);let e="startDate="+this.common.dateFormatter(this.startDate).split(" ")[0]+"&endDate="+this.common.dateFormatter(t.setDate(t.getDate()+1)).split(" ")[0]+"&status="+this.vehicleStatus;++this.common.loading,this.api.get("LorryReceiptsOperation/getLRPodReceipts?"+e).subscribe(t=>{if(this.common.loading--,this.data=t.data,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!this.data||!this.data.length)return;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"LR Date"!==n&&"POD Date"!==n||(t.type="date"),this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]="Action"==this.headings[t]?{value:"",action:null,html:!0,icons:this.actionIcons(e)}:{value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}actionIcons(t){let e=[{class:"fa fa-eye",action:this.getPodImage.bind(this,t)}];return this.user.permission.edit&&e.push({class:"fa fa-edit",action:this.openPodDeatilsModal.bind(this,t)}),this.user.permission.delete&&e.push({class:"fa fa-trash",action:this.deleteLr.bind(this,t)}),e}deleteLr(t){let e={podId:t._id};t._id&&(this.common.params={title:"Delete Lr-Pod-Receipt",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("LorryReceiptsOperation/deleteLrPodDelete",e).subscribe(t=>{this.common.loading--,t.data[0].r_id>0?(this.common.showToast("Successfully Deleted."),this.getLorryPodReceipts()):this.common.showError(t.data[0].r_msg),console.log("res",t.data)},t=>{this.common.loading--,this.common.showError()}))}))}openPodDeatilsModal(t){console.log("====podr=====",t);let e={podId:t._id,lrId:t._lrid};console.log("====podDetails=====",e),this.common.params={podDetails:e},this.modalService.open(Y.a,{size:"lg",container:"nb-layout",windowClass:"lrpoddetail"}).result.then(t=>{})}getPodImage(t){console.log("val",t),t._docid?(this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:t._docid},title:"docImage"},this.modalService.open(C.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})):this.common.showError("There is No image")}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["lr-pod-receipts"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-sm-2"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],[1,"btn","btn-primary","m-0",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"value"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Lorry Pod Receipts"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",2),r["\u0275\u0275elementStart"](11,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.vehicleStatus=t})),r["\u0275\u0275template"](12,fo,2,2,"option",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"button",8),r["\u0275\u0275listener"]("click",(function(){return e.getLorryPodReceipts()})),r["\u0275\u0275text"](15,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div"),r["\u0275\u0275template"](17,xo,2,2,"div",9),r["\u0275\u0275template"](18,vo,3,0,"div",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"router-outlet")),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startDate),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endDate),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.vehicleStatus),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.dropDown),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[s.s,s.v,s.r,et.a,tt.D,tt.r,tt.u,c.t,c.u,l.h,tt.w,tt.G,_.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i{font-size:16px;margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i.fa-edit{color:#00f}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i.fa-trash{color:red}"]}),t})();var yo=n("axIL");function _o(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",9),r["\u0275\u0275elementStart"](1,"div",10),r["\u0275\u0275elementStart"](2,"auto-suggestion",11),r["\u0275\u0275listener"]("onSelected",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getvehicleData(e)}))("change",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().resetData(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",10),r["\u0275\u0275elementStart"](4,"uj-date-time-picker",12),r["\u0275\u0275listener"]("onChanged",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().startTime=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",10),r["\u0275\u0275elementStart"](6,"uj-date-time-picker",13),r["\u0275\u0275listener"]("onChanged",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().endTime=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",14),r["\u0275\u0275elementStart"](8,"button",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().search()})),r["\u0275\u0275text"](9," Search "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime)}}function So(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Mo=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.modalService=n,this.activeModal=a,this.user=o,this.State="1",this.vehicleId=null,this.vehicleRegno=null,this.startTime=new Date((new Date).setMonth((new Date).getMonth()-1)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.changeState()}ngOnInit(){}refresh(){"1"==this.State?this.changeState():this.search()}changeState(){if("0"==this.State)return this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],void(this.valobj={});this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};const t="isSummary="+this.State+"&startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Vehicles/showManualKmData?"+t).subscribe(t=>{if(this.common.loading--,console.log("res: ",t.data),!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action"),hideHeader:!0};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}search(){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};const t="vehicleId="+this.vehicleId+"&isSummary="+this.State+"&startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Vehicles/showManualKmData?"+t).subscribe(t=>{if(this.common.loading--,console.log("res: ",t.data),this.data=[],!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action"),hideHeader:!0};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];return this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.action={class:"",icons:this.actionIcons(e)},t.push(this.valobj)}),t}actionIcons(t){let e=[];return t._id?this.user.permission.delete&&e.push({class:"fa fa-window-close",action:this.remove.bind(this,t)}):e.push({class:"fa fa-tachometer-alt",action:this.openOdoMeter.bind(this,t)}),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}openOdoMeter(t){this.common.params={vehicleId:t._vid,regno:t.Vehicle},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.changeState()})}remove(t){let e={id:t._id,vehicleId:t._vid};t._id&&(this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("Vehicles/deleteOdometerEntry",e).subscribe(t=>{this.common.loading--,this.common.showToast(t.data.r_id>0?"Success":t.data.r_msg),"1"==this.State?this.changeState():this.search()},t=>{this.common.loading--,console.log("Error: ",t)}))}))}getvehicleData(t){this.vehicleId=t.id,this.vehicleRegno=t.regno}refreshAuto(){let t=document.getElementsByName("suggestion")[0].value;""!=t&&null!=t||(this.vehicleRegno=null,this.vehicleId=null)}resetData(t){this.vehicleId=null,console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-odometer"]],decls:15,vars:3,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[1,"col-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","1"],["value","0"],["class","row mb-3",4,"ngIf"],["id","odoMeter",3,"data","settings",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-2","pr-0"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected","change"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["id","odoMeter",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle OdoMeter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"select",4),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.State=t}))("change",(function(){return e.changeState()})),r["\u0275\u0275elementStart"](8,"option",5),r["\u0275\u0275text"](9,"summary"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",6),r["\u0275\u0275text"](11,"Details"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"nb-card-body"),r["\u0275\u0275template"](13,_o,10,5,"div",7),r["\u0275\u0275template"](14,So,1,2,"smart-table",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",e.State),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf","0"==e.State),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,tt.D,tt.r,tt.u,tt.w,tt.G,s.r,c.u,we.a,et.a,_.a],styles:['.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .fa-window-close{color:red;font-size:18px}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}[_nghost-%COMP%]     .fa-tachometer-alt{color:#ff8099;font-size:18px}[_nghost-%COMP%]     .fa-tachometer-alt span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-32px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-tachometer-alt span:before{content:"OdoMeter";display:block;position:absolute;top:0;left:0;background-color:#ff8099;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8099;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-tachometer-alt:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function wo(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Oo=(()=>{class t{constructor(t,e,n){this.api=t,this.user=e,this.common=n,this.foid=null,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.table=null,this.data=[],this.foid=this.user._customer.id,console.log("foid",this.foid)}ngOnInit(){}setTable(){return{data:{headings:{regno:{title:"Regno",placeholder:"Regno"},first_date:{title:"First Date",placeholder:"First Date"},first_kms:{title:"First Kms",placeholder:"First Kms"},last_date:{title:"Last Date",placeholder:"Last Date"},last_kms:{title:"Last Kms",placeholder:"Last Kms"},dis_diff_FromODO:{title:"disFromODO",placeholder:"disFromODO"},disFromDB:{title:"disFromDB",placeholder:"disFromDB"},diff_percentage:{title:"difference %",placeholder:"difference  %"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let t=[];return this.data.map(e=>{let n={regno:{value:e.regno},first_date:{value:this.common.changeDateformat2(e.first_date)},first_kms:{value:e.first_kms},last_date:{value:this.common.changeDateformat2(e.last_date)},last_kms:{value:e.last_kms},dis_diff_FromODO:{value:e.dis_diff_FromODO},disFromDB:{value:e.disFromDB},diff_percentage:{value:e.diff_percentage}};t.push(n)}),t}showData(){const t={fromTime:this.common.dateFormatter(this.startDate),tTime:this.common.dateFormatter(this.endDate)};console.log("params",t),this.common.loading++,this.api.post("Vehicles/getDiffBwDistanceByOdoMeter",t).subscribe(t=>{this.data=t.data,this.table=this.setTable(),console.log("data",t),this.common.loading--},t=>console.error("Activity Api Error:",t))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-distance-with-odometer"]],decls:28,vars:6,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"Vehicle-distance"],[1,"row","mb-3"],[1,"col-10"],[1,"row"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Vehicle Distance With Odometer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",2),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",4),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"div",6),r["\u0275\u0275elementStart"](12,"label",7),r["\u0275\u0275text"](13,"From Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275elementStart"](15,"uj-date-time-picker",9),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",6),r["\u0275\u0275elementStart"](17,"div",5),r["\u0275\u0275elementStart"](18,"div",10),r["\u0275\u0275elementStart"](19,"label",7),r["\u0275\u0275text"](20,"To Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",11),r["\u0275\u0275elementStart"](22,"uj-date-time-picker",12),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",13),r["\u0275\u0275elementStart"](24,"button",14),r["\u0275\u0275listener"]("click",(function(){return e.showData()})),r["\u0275\u0275text"](25,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div"),r["\u0275\u0275template"](27,wo,1,2,"smart-table",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:[".btn-primary[_ngcontent-%COMP%]{border-radius:5px;padding:5px 15px;text-transform:capitalize}"]}),t})();function Po(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",21),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Eo=(()=>{class t{constructor(t,e){this.api=t,this.common=e,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.table=null,this.data=[],this.vehid=null}ngOnInit(){}setTable(){return{data:{headings:{regno:{title:"regno",placeholder:"regno"},entry_time:{title:"Entry Time",placeholder:"Entry Time",type:"date"},fuel_station:{title:"fuel Station",placeholder:"fuel Station"},location:{title:"location",placeholder:"location"},site_name:{title:"site name",placeholder:"site name"},litres:{title:"litres",placeholder:"litres"},rate:{title:"rate",placeholder:"rate"},amount:{title:"amount",placeholder:"amount"},is_full:{title:"is_full",placeholder:"is_full"},fse_id:{title:"fse_id",placeholder:"fse_id"},addtime:{title:"addtime",placeholder:"addtime",type:"date"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let t=[];return this.data.map(e=>{let n={regno:{value:e.regno},entry_time:{value:this.common.changeDateformat2(e.end_time)},fuel_station:{value:e.fuel_station},location:{value:e.location},site_name:{value:e.site_name},litres:{value:e.litres},rate:{value:e.rate},amount:{value:e.amount},is_full:{value:e.is_full},fse_id:{value:e.fse_id},addtime:{value:this.common.changeDateformat2(e.addtime)}};t.push(n)}),t}searchVehicle(t){this.vehid=t.id,console.log("event",t)}submit(){let t;t="start_time="+this.common.dateFormatter(this.startDate)+"&end_time="+this.common.dateFormatter(this.endDate)+"&vehicle_id="+this.vehid,console.log("param",t),this.common.loading++,this.api.get("Fuel/getAllFuelStationEntryWrtVeh?"+t).subscribe(t=>{this.data=t.data,this.table=this.setTable(),console.log("datA",t),this.common.loading--},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fse-entry"]],decls:35,vars:7,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"Vehicle-distance"],[1,"row"],[1,"col-12"],[1,"row","mb-3"],[1,"col-3"],[1,"row","align-items-center"],[1,"col-4","pr-0"],[1,"col-8"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"row","row","align-items-center"],[1,"col-4","pl-0","pr-0"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0","pl-0"],[1,"col-9"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Fuel Station Entry"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",2),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",4),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"label"),r["\u0275\u0275text"](13,"Vehicle id:"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",9),r["\u0275\u0275elementStart"](15,"auto-suggestion",10),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchVehicle(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",6),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275elementStart"](19,"label"),r["\u0275\u0275text"](20,"From Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",13),r["\u0275\u0275elementStart"](22,"uj-date-time-picker",14),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",6),r["\u0275\u0275elementStart"](24,"div",7),r["\u0275\u0275elementStart"](25,"div",15),r["\u0275\u0275elementStart"](26,"label"),r["\u0275\u0275text"](27,"To Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",16),r["\u0275\u0275elementStart"](29,"uj-date-time-picker",17),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"div",18),r["\u0275\u0275elementStart"](31,"button",19),r["\u0275\u0275listener"]("click",(function(){return e.submit()})),r["\u0275\u0275text"](32,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div"),r["\u0275\u0275template"](34,Po,1,2,"smart-table",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,we.a,et.a,c.u,_.a],styles:["nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{border-radius:5px;padding:5px 15px;text-transform:capitalize}"]}),t})();var ko=n("IAms"),To=n("R++u"),Do=n("ioEQ"),Io=n("dgDc"),Fo=n("wcs7");function Ao(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",7),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().OpenFoFreight()})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function Vo(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",10),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Lo=(()=>{class t{constructor(t,e,n,a){this.modalService=t,this.common=e,this.user=n,this.api=a,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.currentYear=(new Date).getFullYear(),this.toDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.toDate).getDate()-20)),this.endDate=new Date,this.getFrieghtRate(),this.common.refresh=this.refresh.bind(this),console.log("current Year",this.startDate)}ngOnInit(){}refresh(){this.getFrieghtRate()}getFrieghtRate(){if(this.startDate>this.endDate)this.common.showError("StartDate Should be less then Enddate");else{let t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.common.loading++,this.api.post("FrieghtRate/getFrieghtRatePattern",t).subscribe(t=>{if(this.common.loading--,console.log("res: ",t.data),this.data=[],!t.data)return;this.data=t.data,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("withLocation"),placeholder:this.formatTitle("withLocation"),hideHeader:!0};this.table.data.headings.withLocation=a;let o={title:this.formatTitle("withoutLocation"),placeholder:this.formatTitle("withoutLocation"),hideHeader:!0};this.table.data.headings.withoutLocation=o,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.withLocation={class:"",icons:this.withLocationicon(e)},this.valobj.withoutLocation={class:"",icons:this.withOutLocationicon(e)},t.push(this.valobj)}),t}withLocationicon(t){console.log("detatis Page:",t);let e=[];return e.push({class:"addButton",action:this.openWithLocationModal.bind(this,t)},{class:"fa fa-eye ml-1",action:this.frieghtRateSummary.bind(this,t)}),e}withOutLocationicon(t){console.log("detatis Page:",t);let e=[];return e.push({class:"addButton",action:this.openWithoutLocationModal.bind(this,t)}),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}openWithoutLocationModal(t){console.log("row",t),this.common.params={data:{frpId:t._id,locId:!1}},console.log("without location"),this.modalService.open(ko.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t&&t.response&&this.getFrieghtRate()})}frieghtRateSummary(t){console.log("row",t),this.common.params={id:t._id},this.modalService.open(Fo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t&&t.response&&this.getFrieghtRate()})}openWithLocationModal(t){console.log("row",t);let e=t._id;console.log("with location",e),this.common.params={id:e},this.modalService.open(To.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t&&t.response&&this.getFrieghtRate()})}OpenFoFreight(){this.common.handleModalSize("class","modal-lg","400"),this.modalService.open(Do.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t&&t.data&&this.getFrieghtRate()})}freightRateCalculation(){this.modalService.open(Io.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["frieght-rate-input"]],decls:22,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"col-10"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["id","frieghtRateInput",3,"data","settings",4,"ngIf"],["id","frieghtRateInput",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Freight Rate Inputs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",5),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",4),r["\u0275\u0275elementStart"](11,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",4),r["\u0275\u0275elementStart"](13,"button",7),r["\u0275\u0275listener"]("click",(function(){return e.getFrieghtRate()})),r["\u0275\u0275text"](14,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",4),r["\u0275\u0275template"](16,Ao,2,0,"button",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",4),r["\u0275\u0275elementStart"](18,"button",7),r["\u0275\u0275listener"]("click",(function(){return e.freightRateCalculation()})),r["\u0275\u0275text"](19,"Freight Rate Calculation"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"nb-card-body"),r["\u0275\u0275template"](21,Vo,1,2,"smart-table",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,et.a,c.u,s.r,_.a],styles:['[_nghost-%COMP%]     .addButton{margin:5px 0;display:inline-block;font-style:normal}[_nghost-%COMP%]     .addButton:before{content:"Add";background-color:#128cc4;border-radius:3px;padding:5px 10px;color:#fff;width:100%;font-size:12px;margin:0!important}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var zo=n("lrE7");function jo(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",19),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function Ro(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",19),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function Ho(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().addFuelIndent()})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function No(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",20),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Uo=(()=>{class t{constructor(t,e,n,a){this.api=t,this.modalService=e,this.user=n,this.common=a,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleType=0,this.vehicleStatus=0,this.regno=null,this.dropDown1=[{name:"Self",id:0},{name:"Company",id:1}],this.dropDown2=[{name:"Pending",id:0},{name:"Complete",id:1},{name:"Reject",id:-1},{name:"All",id:-2}],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-7)),this.indentType="0",this.apiUrl="Fuel/getPendingFuelIndentWrtFo?",this.getFuelIndent(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getFuelIndent()}getFuelIndent(){if(this.common.dateFormatter1(this.startDate)>this.common.dateFormatter1(this.endDate))return void this.common.showError("Start Date should less then End Date");this.apiUrl="0"==this.indentType?"Fuel/getPendingFuelIndentWrtFo?":"Fuel/getPendingCashIndentWrtFo?";const t="startdate="+this.common.dateFormatter1(this.startDate)+"&enddate="+this.common.dateFormatter1(this.endDate)+"&addedBy="+this.vehicleType+"&status="+this.vehicleStatus+"&regno="+this.regno;++this.common.loading,this.api.get(this.apiUrl+t).subscribe(t=>{if(--this.common.loading,console.log("API Res:",t),this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{--this.common.loading,this.common.showError(t),console.log("Error: ",t)})}getTableColumns(){let t=[];return this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)"Action"==this.headings[t]?(console.log("Test"),this.valobj[this.headings[t]]={value:"",action:null,icons:this.actionIcons(e)}):this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}actionIcons(t){let e=[{class:"fa fa-print",action:this.printReceipt.bind(this,t)}];return this.user.permission.edit&&e.push({class:"fa fa-edit",action:this.editFuelIndent.bind(this,t)}),this.user.permission.delete&&e.push({class:"fa fa-trash",action:this.deleteFuelIndent.bind(this,t)}),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}editFuelIndent(t){console.log("Edit fuel Data",t),this.common.params={title:"Edit Fuel Indent",editFuelData:t,button:"update",index:0,refData:{refType:t._ref_type,refId:t._ref_id}},this.modalService.open(zo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFuelIndent()})}deleteFuelIndent(t){let e="Fuel/deleteFuelIndent";e="0"==this.indentType?"Fuel/deleteFuelIndent":"Fuel/deleteCashIndent";const n={rowid:t._id};t._id&&(this.common.params={title:"Delete Indent ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post(e,n).subscribe(t=>{console.log("Api Response:",t),this.common.showToast(t.msg),this.getFuelIndent(),this.common.loading--},t=>console.error(" Api Error:",t)))}))}addFuelIndent(){this.common.params={title:"Add Fuel Indent",button:"add",index:0},this.modalService.open(zo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFuelIndent()})}printReceipt(t){console.log("Receipt:",t);let e=`\n    <div style="padding: 20px 40px;/* background: #B2B2B2 !important; */width: 90%;margin: auto;margin-top: 30px;border: 2px solid #555;"><div _ngcontent-wbc-c12="" style="\n    background: #fff;\n    padding: 15px;\n"><div style="text-align:center;"><span style="\n    font-size: 35px;\n    font-weight: 600;\n">${t._fo_name}</span></div><div _ngcontent-wbc-c12="" style="text-align:center;margin-bottom: 30px;"><span _ngcontent-wbc-c12="" style="\n    font-size: 18px;\n    margin-bottom: 30px;\n">${t._fo_address}</span></div><div _ngcontent-wbc-c12="" class="row" style="\n    margin: 10px -15px;\n    font-size: 20px;\n"><div class="col" style="text-align:left"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 10px;\n">Ref No:</span><span>${t._ref_id}</span></div><div _ngcontent-wbc-c12="" class="col" style="text-align:right"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 0px;\n">Date:</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    padding-left: 7px;\n">${t["Issue Date"]}</span></div></div><div _ngcontent-wbc-c12="" style="\n    margin-bottom: 10px;\n    font-size: 20px;\n    margin-top: 30px;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 5px;\n    display: inline-block;\n    width: 30px;\n    /* background: red; */\n">To,</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    display: inline-block;\n    width: calc(100% - 40px);\n">${t["Fuel Station"]}</span></div><div _ngcontent-wbc-c12="" style="\n    font-size: 20px;\n    margin-top: 30px;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 5px;\n    display: inline-block;\n    width: 110px;\n    /* background: red; */\n">Vehicle No.</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    display: inline-block;\n    width: calc(100% - 115px);\n">${t.regno}</span></div><div _ngcontent-wbc-c12="" style="\n    margin-bottom: 15px;\n    padding-left: 115px;\n    font-size: 14px;\n    width: 70%;\n"><span _ngcontent-wbc-c12="">Please Supply to the bearer the following on credit &amp; debit the cost of my/our account:-</span></div><table _ngcontent-wbc-c12="" class="table table-bordered" style="\n    margin-top: 40px;\n    border-color: #000 !important;\n    border-width: 2px;\n"><tbody _ngcontent-wbc-c12="" style="\n    border: none;\n"><tr _ngcontent-wbc-c12="" style="\n    border: none;\n"><td _ngcontent-wbc-c12="" style="\n    border-left: none;\n    border-top-width: 2px;\n    border-bottom-width: 2px;\n    padding-top: 30px;\n    padding-bottom: 30px;\n    border-color: #000 !important;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 10px;\n">${t._ledger_id?"CASH":"FUEL"}:</span><span _ngcontent-wbc-c12="" style="\n    display: inline-block;\n    width: 80%;\n    padding-left: 10px;\n">${t._ledger_id?"\u20b9"+t.Amount:t.Fuel+" ltr"}</span></td><td _ngcontent-wbc-c12="" style="\n    border-top-width: 2px;\n    border-bottom-width: 2px;\n    border-color: #000 !important;\n"><span _ngcontent-wbc-c12=""></span></td></tr></tbody></table><div _ngcontent-wbc-c12="" class="row" style="\n    margin-top: 80px;\n    font-size: 16px;\n    font-weight: bold;\n"><div _ngcontent-wbc-c12="" class="col"><span _ngcontent-wbc-c12="">Sign. of Driver</span></div><div _ngcontent-wbc-c12="" class="col" style="\n    text-align: right;\n"><span _ngcontent-wbc-c12="">Signature with Stamp</span></div></div></div>\n    </div>\n    `,n=document.createElement("div");n.id="print-receipt",n.className="print-receipt",n.innerHTML=e,n.style.left="0",n.style.position="absolute",n.style.top="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="#fff",n.style.zIndex="9999999999999999999999",document.body.appendChild(n),document.getElementsByTagName("ngx-app")[0].style.visibility="hidden",window.print();let a=setInterval(()=>{if("complete"==document.readyState){clearInterval(a),document.getElementsByTagName("ngx-app")[0].style.visibility="visible";let t=document.getElementsByTagName("body")[0],e=document.getElementById("print-receipt");t.removeChild(e)}},200)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-indent"]],decls:37,vars:14,consts:[[2,"border","0px","height","100%"],[1,"fuel-indent"],[1,"row","mb-3"],[1,"col-1","pr-0"],[1,"col-2"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"col-1"],[1,"",3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1-5","mr-3"],["name","indentType","id","indentType",1,"form-control",3,"ngModel","ngModelChange"],["name","fuelIndent",3,"value"],["name","cashIndent",3,"value"],["name","dropDown","id","dropDown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-1","pr-0","pl-0"],["type","button",1,"btn","btn-primary","w-100",3,"click"],["type","button","class","btn btn-primary w-100",3,"click",4,"ngIf"],["id","fuelIndent",3,"data","settings",4,"ngIf"],[3,"value"],["id","fuelIndent",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275elementStart"](3,"h5"),r["\u0275\u0275text"](4,"Fuel/Cash Indent"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"nb-card-body"),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275elementStart"](8,"div",3),r["\u0275\u0275elementStart"](9,"label"),r["\u0275\u0275text"](10,"Start Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"uj-date-time-picker",5),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",6),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"End Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",4),r["\u0275\u0275elementStart"](17,"uj-date-time-picker",7),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",8),r["\u0275\u0275elementStart"](19,"select",9),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.indentType=t})),r["\u0275\u0275elementStart"](20,"option",10),r["\u0275\u0275text"](21," Fuel-Indent "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"option",11),r["\u0275\u0275text"](23," Cash-Indent "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",8),r["\u0275\u0275elementStart"](25,"select",12),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.vehicleType=t})),r["\u0275\u0275template"](26,jo,2,2,"option",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",8),r["\u0275\u0275elementStart"](28,"select",14),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.vehicleStatus=t})),r["\u0275\u0275template"](29,Ro,2,2,"option",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"div",15),r["\u0275\u0275elementStart"](31,"button",16),r["\u0275\u0275listener"]("click",(function(){return e.getFuelIndent()})),r["\u0275\u0275text"](32,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"div",6),r["\u0275\u0275template"](34,Ho,2,0,"button",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"div"),r["\u0275\u0275template"](36,No,1,2,"smart-table",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.indentType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",1),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",e.vehicleType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.dropDown1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.vehicleStatus),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.dropDown2),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,et.a,tt.D,tt.r,tt.u,tt.w,tt.G,c.t,c.u,_.a],styles:['.add[_ngcontent-%COMP%]{content:"\\f040";display:block;font-family:FontAwesome;font-size:14px;color:#00f}.fuel-indent[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:3px;padding:5px;text-transform:capitalize}[_nghost-%COMP%]     .fa-edit{color:#00f;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#00f;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #00f;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]     .fa-trash{color:red;font-size:18px}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-print{color:#000;font-size:18px}[_nghost-%COMP%]     .fa-print span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-print:hover span{display:block}']}),t})();var Go=n("VKYg"),Bo=n("svlw"),$o=n("edw2"),Wo=n("RZbU"),Ko=n("7xJQ");function qo(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().saveAdvices()})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function Jo(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Yo=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.modalService=n,this.activeModal=a,this.user=o,this.stateType=0,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.searchData()}refresh(){this.searchData()}ngOnInit(){}selectType(t){console.log("type:",t.target.value),this.stateType=t.target.value}searchData(){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};let t={status:this.stateType,startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};this.common.loading++,this.api.post("Drivers/getAdvicesInPeriod",t).subscribe(t=>{if(this.common.loading--,this.data=[],!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action"),hideHeader:!0};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,this.common.showError()})}getTableColumns(){let t=[];return this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.action={class:"",icons:this.actionIcons(e)},t.push(this.valobj)}),t}actionIcons(t){console.log("details:",t);let e=[];return e.push({class:"far fa-eye",action:this.adviceView.bind(this,t)},{class:"fas fa-user-check",action:this.clearAdvices.bind(this,t)}),"Accept"!=t.Status&&"Reject"!=t.Status||e.pop(),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}saveAdvices(){this.common.params={refData:null},this.common.handleModalSize("class","modal-lg","1100"),this.modalService.open($o.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.searchData()})}clearAdvices(t){let e={id:t._id,typeId:t._advice_type_id};console.log("row:",e),this.common.params={advice:e},this.modalService.open(Wo.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.searchData()})}adviceView(t){let e={view:{api:"Drivers/getAdvicesSingleVehicle",param:{vId:t._vid,test1:1,test2:"Hello"}},delete:{},title:"Advices View"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:e},this.modalService.open(Ko.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["advices"]],decls:27,vars:7,consts:[[1,"row"],[1,"col-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"[ngModel]","change"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"col-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["type","submit",1,"btn","btn-primary","mt-0","mb-0",3,"click"],[1,"col-2"],["class","btn btn-primary mt-0 mb-0",3,"click",4,"ngIf"],[1,"mt-3"],["id","advices",3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","mt-0","mb-0",3,"click"],["id","advices",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Advices"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"select",2),r["\u0275\u0275listener"]("[ngModel]",(function(){return e.stateType}))("change",(function(t){return e.selectType(t)})),r["\u0275\u0275elementStart"](8,"option",3),r["\u0275\u0275text"](9,"Pending"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",4),r["\u0275\u0275text"](11,"Accept"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",5),r["\u0275\u0275text"](13,"Reject"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"option",6),r["\u0275\u0275text"](15,"Any"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275elementStart"](17,"uj-date-time-picker",8),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",7),r["\u0275\u0275elementStart"](19,"uj-date-time-picker",9),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",7),r["\u0275\u0275elementStart"](21,"button",10),r["\u0275\u0275listener"]("click",(function(){return e.searchData()})),r["\u0275\u0275text"](22,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",11),r["\u0275\u0275template"](24,qo,2,0,"button",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",13),r["\u0275\u0275template"](26,Jo,1,2,"smart-table",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,tt.w,tt.G,et.a,c.u,_.a],styles:['[_nghost-%COMP%]     .fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-eye span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-eye:hover span{display:block}[_nghost-%COMP%]     .fa-user-check{color:#8af304;font-size:18px;padding-left:20px;cursor:pointer}[_nghost-%COMP%]     .fa-user-check span{position:absolute;display:none;padding:10px 38px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-user-check span:before{content:"AddVerify";display:block;position:absolute;top:0;left:0;background-color:#8af304;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-user-check span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8af304;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-user-check:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var Zo=n("pl/H");function Qo(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",11),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function Xo(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",11),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function ti(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275element"](1,"smart-table",13),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function ei(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275elementStart"](1,"h4",15),r["\u0275\u0275text"](2,"No Record Found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}let ni=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.status=[{name:"accept",id:"1"},{name:"pending",id:"0"},{name:"Reject",id:"-1"}],this.type=[{name:"LR",id:"11"},{name:"Manifest",id:"12"},{name:"Trip",id:"14"},{name:"Any",id:"-1"}],this.actionTypes=[{name:"Any",id:"-1"},{name:"Expense",id:"1"},{name:"Revenue",id:"2"},{name:"Transfer",id:"3"},{name:"Advice",id:"4"}],this.statusid=1,this.Typeid=-1,this.actionTypeId=-1,this.startTime=new Date((new Date).setDate((new Date).getDate()-15)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getExpenses(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}getSelection(){}refresh(){this.getExpenses()}getExpenses(){var t=new Date(this.common.dateFormatter1(this.endTime).split(" ")[0]);let e={startTime:this.common.dateFormatter1(this.startTime).split(" ")[0],endTime:this.common.dateFormatter1(t.setDate(t.getDate()+1)).split(" ")[0],status:this.statusid,type:this.Typeid,actionType:this.actionTypeId};++this.common.loading,this.api.post("FrieghtRate/getAllFreightExpenseAndRevenue",e).subscribe(t=>{if(--this.common.loading,this.data=t.data,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!this.data||!this.data.length)return;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Date"!==n&&"Entred At"!==n||(t.type="date"),this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{console.error(t),this.common.showError()})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Expense"==this.headings[t]?{value:"",action:null,isHTML:!1,icons:[this.user.permission.edit&&{class:"fa fa-edit",action:this.openExpenseModal.bind(this,e)},{action:null,txt:e._exp_count}]}:"Revenue"==this.headings[t]?{value:"",action:null,isHTML:!1,icons:[this.user.permission.edit&&{class:"fa fa-edit",action:this.openRevenueModal.bind(this,e)},{action:null,txt:e._rev_count}]}:"Transfer"==this.headings[t]?{value:"",action:null,isHTML:!1,icons:[this.user.permission.edit&&{class:"fa fa-edit",action:this.openTransferReceipt.bind(this,e)},{action:null,txt:e._trans_count}]}:"Advice"==this.headings[t]?{value:"",action:null,isHTML:!1,icons:[this.user.permission.edit&&{class:"fa fa-edit",action:this.openadvice.bind(this,e)},{action:null,txt:e._adv_count}]}:{value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}openExpenseModal(t){let e={id:t._id,refId:t._ref_id,refernceType:t._ref_type,remarks:t._exp_remarks};console.log("expense",t),this.common.params={expenseData:e},this.modalService.open(q.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getExpenses()})}openRevenueModal(t){this.common.params={revenueData:{id:t._id,refId:t._ref_id,refernceType:t._ref_type,remarks:t._exp_remarks}},this.modalService.open(J.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getExpenses()})}openTransferReceipt(t){console.log("transfer",t),this.common.params={refData:{refId:t._ref_id,refType:t._ref_type}},this.modalService.open(Zo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getExpenses()})}openadvice(t){this.common.handleModalSize("class","modal-lg","900","px"),this.common.params={refData:{refId:t._ref_id,refType:t._ref_type}},this.modalService.open($o.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getExpenses()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["freight-expenses"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row","submit-exp"],[1,"col-sm-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-sm-2"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-0",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"value"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Frieght Expenses/Revenue"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"select",6),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.Typeid=t})),r["\u0275\u0275template"](12,Qo,2,2,"option",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",5),r["\u0275\u0275elementStart"](14,"select",6),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.actionTypeId=t})),r["\u0275\u0275template"](15,Xo,2,2,"option",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",5),r["\u0275\u0275elementStart"](17,"button",8),r["\u0275\u0275listener"]("click",(function(){return e.getExpenses()})),r["\u0275\u0275text"](18,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,ti,2,2,"div",9),r["\u0275\u0275template"](20,ei,3,0,"div",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"router-outlet")),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.Typeid),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.type),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.actionTypeId),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.actionTypes),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[s.s,s.v,s.r,et.a,tt.D,tt.r,tt.u,c.t,c.u,l.h,tt.w,tt.G,_.a],styles:['.submit-exp[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 15px;text-transform:capitalize;border-radius:3px}[_nghost-%COMP%]     .tableFixHead table thead tr th:last-child, [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(2), [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(3), [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(4){width:80px}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i{font-size:16px;margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span:before{content:"Save";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit:hover span{display:block}']}),t})();var ai=n("SJoR");function oi(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",19),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let ii=(()=>{class t{constructor(t,e,n,a){this.apiService=t,this.common=e,this.DateService=n,this.user=a,this.sitesDatalist=[],this.siteName=null,this.siteId=null,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-7)),this.isFlag=1,this.bGConditions=[{key:"is_flag",value:1,class:"normal"},{key:"is_flag",value:2,class:"abnormal"}],this.getAllFoSites(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getAllFoSites()}getAllFoSites(){this.common.loading++,this.apiService.get("Site/getAllFoSites").subscribe(t=>{this.common.loading--,console.log(t),this.sitesDatalist=t.data},t=>{this.common.loading--,console.log(t)})}getReport(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.data=[];let t=null;t=2==this.isFlag?"Site/getLocalSiteInOutHistory":"Site/getSiteInAndOut";let e={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate),siteId:this.siteId};console.log(e),this.common.loading++,this.apiService.post(t,e).subscribe(t=>{this.common.loading--,console.log(t),this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{this.common.loading--,console.log(t)})}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.apiService.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getPDFFromTableId(t,e.data.name,"Site In And Out",["Action"],"","Site Name : "+this.siteName)},t=>{this.common.loading--,console.log(t)})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.apiService.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.common.getCSVFromTableId(t,"Customer Name::"+e.data.name,"Report Name::Site In And Out",["Action"],"","Site Name ::"+this.siteName)},t=>{this.common.loading--,console.log(t)})}changeRefernceType(t){this.siteName=t.name,this.siteId=this.sitesDatalist.find(e=>(console.log(e.name==t),this.isFlag=2==e.is_flag?2:1,e.id==t.id)).id}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](ai.a),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["site-in-out"]],decls:29,vars:6,consts:[[2,"border","0px","height","100%"],[1,"row","align-items-center"],[1,"col-2"],["display","name","inputId","siteId",3,"data","bGConditions","onSelected"],[1,"col-1","pr-0"],[1,"col-3"],[1,"",3,"dateTimeValue","onChanged"],[1,"col-1"],[1,"",3,"dateTimeValue","isStart","onChanged"],[1,"col-1","p-0"],[1,"btn","btn-primary",3,"click"],[1,"col-1","text-right"],[1,"doc-icons"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"mt-2"],["id","siteInAndOut",3,"data","settings",4,"ngIf"],["id","siteInAndOut",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Site In And Out"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"auto-suggestion",3),r["\u0275\u0275listener"]("onSelected",(function(t){return e.changeRefernceType(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"label"),r["\u0275\u0275text"](10,"Start Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",5),r["\u0275\u0275elementStart"](12,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"End Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",5),r["\u0275\u0275elementStart"](17,"uj-date-time-picker",8),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",9),r["\u0275\u0275elementStart"](19,"button",10),r["\u0275\u0275listener"]("click",(function(){return e.getReport()})),r["\u0275\u0275text"](20,"Get Report"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",11),r["\u0275\u0275elementStart"](22,"span",12),r["\u0275\u0275elementStart"](23,"span",13),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("siteInAndOut")})),r["\u0275\u0275element"](24,"i",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"span",15),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("siteInAndOut")})),r["\u0275\u0275element"](26,"i",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",17),r["\u0275\u0275template"](28,oi,1,2,"smart-table",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("data",e.sitesDatalist)("bGConditions",e.bGConditions),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.startDate),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isStart",!1),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,we.a,et.a,c.u,_.a],styles:[".btn-primary[_ngcontent-%COMP%]{width:100%;font-size:12px;padding:6px 0;border-radius:3px;text-transform:capitalize}.doc-icons[_ngcontent-%COMP%]{font-size:28px}.doc-icons[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{color:#e13017}.doc-icons[_ngcontent-%COMP%]   .exel-icon[_ngcontent-%COMP%]{color:#227849}[_nghost-%COMP%]  .abnormal{color:#0ff50f}"]}),t})();var ri=n("Q+lQ"),si=n("tkEC"),li=n("rBa8"),di=n("Sg9u"),ci=n("2M/P");function hi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().invoice("Add",null)})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function mi(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function pi(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let gi=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.modalService=o,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewFreightInvoice(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.viewFreightInvoice()}viewFreightInvoice(){if(!this.startTime||!this.endTime)return void this.common.showError("Dates cannot be blank.");let t={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};console.log("params",t),++this.common.loading,this.api.post("FrieghtRate/getInvoices",t).subscribe(t=>{if(--this.common.loading,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Invoice Date"===n&&(t.type="date"),this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{--this.common.loading,this.common.showError(t),console.log("Error: ",t)})}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj["Follow Up"]={class:"",icons:this.invoiceIcon(e)},this.valobj.Action={class:"",icons:this.actionIcon(e)},t.push(this.valobj)}),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}actionIcon(t){let e=[];return t._islocked||(e.push({class:"far fa-eye",action:this.lrAssign.bind(this,t)}),this.user.permission.edit&&e.push({class:"far fa-edit",action:this.invoice.bind(this,"Edit",t)}),this.user.permission.delete&&e.push({class:"fas fa-trash-alt",action:this.deleteRow.bind(this,t)})),t._lrcount>0&&e.push({class:"fas fa-print",action:this.printInvoice.bind(this,t,t._invtype)},{class:"far fa-file",action:this.supportDoc.bind(this,t,t._invtype)},{class:"fa fa-inr",action:this.openFreightRateModal.bind(this,t,1)}),e}invoiceIcon(t){let e=[];return 1==t._invtype&&t._lrcount>0&&e.push({class:"fa fa-plus",action:this.invoice.bind(this,"add",t,2)},{class:"fa fa-plus",action:this.invoice.bind(this,"add",t,3)}),e}deleteRow(t){console.log("row:",t);let e={id:t._id};t._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("FrieghtRate/deleteInvoices",e).subscribe(t=>{this.common.loading--,t.data[0].r_id?(this.common.showToast("Deleted successfully"),this.viewFreightInvoice()):this.common.showError(t.data[0].r_msg)},t=>{this.common.loading--,console.log("Error: ",t)}))}))}lrAssign(t){this.common.handleModalSize("class","modal-lg","1300"),this.common.params={row:t},this.modalService.open(si.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Date:",t),t&&this.viewFreightInvoice()})}invoice(t,e,n){this.common.params={invoiceDetail:{id:!!e&&e._id,type:n||1,title:t}},this.modalService.open(ri.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t),this.viewFreightInvoice()})}printInvoice(t,e){this.common.params={previewData:{title:"Invoice",previewId:null,refId:t._id,refType:"FRINV"}},console.log("invoice",t),this.modalService.open(X.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(t=>{console.log("Date:",t)})}supportDoc(t,e){this.common.params={invoice:{id:t._id,type:e,typeId:t._invtype_id}},this.modalService.open(di.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t)})}lrInvoice(){this.modalService.open(li.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t)})}addFoField(){this.modalService.open(Qa.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t)})}openFreightRateModal(t,e){this.common.params={invoice:{id:t._id,parentId:t._parentid}},this.modalService.open(ci.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t),this.viewFreightInvoice()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["freight-invoices"]],decls:18,vars:8,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Freight invoices"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"button",6),r["\u0275\u0275listener"]("click",(function(){return e.viewFreightInvoice()})),r["\u0275\u0275text"](12,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",5),r["\u0275\u0275template"](14,hi,2,0,"button",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div"),r["\u0275\u0275template"](16,mi,1,2,"smart-table",8),r["\u0275\u0275template"](17,pi,2,0,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.data.length))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td i{width:18px;text-align:center;margin:4px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr{color:#ea3fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:before{content:"Rate";display:block;position:absolute;top:0;left:0;background-color:#ea3fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ea3fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:before{content:"Support Doc";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file:hover span{display:block}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var bi=n("eHBT");function ui(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",16),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}const fi=function(){return["empname","mobileno"]};let xi=(()=>{class t{constructor(t,e,n){this.common=t,this.api=e,this.modalService=n,this.refId="",this.is_card=0,this.cardNo="",this.effDate=new Date,this.dataCardDetails="",this.date="",this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getData(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getData()}addDriverCard(){let t=this.common.dateFormatter(this.date);const e={refId:this.refId,cardType:this.is_card,cardNo:this.cardNo,effDate:t};console.log("params",e),this.common.loading++,this.api.post("CardMapping/saveCardMappingDetails",e).subscribe(t=>{this.common.loading--,console.log("res",t.data),this.common.showToast(t.msg),this.getData()},t=>{this.common.loading--,this.common.showError()})}checkdate(t){this.date=t}getDriverId(t){console.log("event",t),this.refId=t.id,console.log("id",this.refId)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""},this.valobj.action={class:"",icons:this.actionIcons(e)};t.push(this.valobj)}),t}actionIcons(t){let e=[];return e.push({class:"fa fa-trash",action:this.remove.bind(this,t)}),e}remove(t){console.log("row",t);let e={rowId:t._id};t._id&&(console.log("id",t._id),this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(console.log("data",t),this.common.loading++,this.api.post("CardMapping/deleteCardMappingDetail",e).subscribe(t=>{this.common.loading--,this.common.showToast(t.msg),this.refId="",this.is_card=0,this.cardNo="",this.effDate=new Date,this.getData()},t=>{this.common.loading--,console.log("Error: ",t)}))}))}getData(){this.data=[],console.log("ap"),this.api.get("CardMapping/getCardMappingDetails").subscribe(t=>{this.data=t.data,console.log("result",t);let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}let a={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action"),hideSearch:!0};this.table.data.headings.action=a,this.table.data.columns=this.getTableColumns()})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["card-mapping"]],decls:31,vars:7,consts:[[2,"border","0px","height","100%"],[1,"row","mb-3"],[1,"col-2"],["url","Suggestion/getDriverName","seperator","-","placeholder","Driver Name",2,"width","60%",3,"display","onSelected"],[3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["type","text","placeholder","card no",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4"],[3,"dateTimeValue","isTime","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Card Mapping"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"auto-suggestion",3),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getDriverId(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"select",4),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.is_card=t})),r["\u0275\u0275elementStart"](10,"option",5),r["\u0275\u0275text"](11,"Select Card Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",6),r["\u0275\u0275text"](13,"IOCL"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"option",7),r["\u0275\u0275text"](15,"BPCL"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"option",8),r["\u0275\u0275text"](17,"Hapay"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",9),r["\u0275\u0275text"](19,"Toll"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"option",10),r["\u0275\u0275text"](21,"HPCL"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",2),r["\u0275\u0275elementStart"](23,"input",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.cardNo=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",12),r["\u0275\u0275elementStart"](25,"uj-date-time-picker",13),r["\u0275\u0275listener"]("onChanged",(function(t){return e.checkdate(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",2),r["\u0275\u0275elementStart"](27,"button",14),r["\u0275\u0275listener"]("click",(function(){return e.addDriverCard()})),r["\u0275\u0275text"](28,"SAVE"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div"),r["\u0275\u0275template"](30,ui,1,2,"smart-table",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("display",r["\u0275\u0275pureFunction0"](6,fi)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.is_card),r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngModel",e.cardNo),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.date)("isTime",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,we.a,tt.D,tt.r,tt.u,tt.w,tt.G,tt.d,et.a,c.u,_.a],styles:[""]}),t})();var vi=n("1jZA"),Ci=n("yd97");function yi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().addTransfer()})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function _i(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",17),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function Si(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let Mi=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.modalService=o,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.transferType=-1,this.ledgerId="",this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.viewTransfer()}ledger(t){this.ledgerId=t.id}viewTransfer(){const t="startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime)+"&ledgerId="+this.ledgerId+"&transferType="+this.transferType;++this.common.loading,this.api.get("FrieghtRate/getTransfers?"+t).subscribe(t=>{if(--this.common.loading,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Time"===n&&(t.type="date"),this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{--this.common.loading,this.common.showError(t),console.log("Error: ",t)})}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)"Action"==this.headings[t]?this.valobj[this.headings[t]]={value:"",action:null,isHTML:!1,icons:this.actionIcons(e)}:"Credit To"==this.headings[t]?(console.log("test",this.headings[t]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openViewTransfer.bind(this,e._cr_ledgerid,e[this.headings[t]],"Credit To")}):"Debit To"==this.headings[t]?this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"blue",action:this.openViewTransfer.bind(this,e._dr_ledgerid,e[this.headings[t]],"Debit To")}:(console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""});t.push(this.valobj)}),t}actionIcons(t){let e=[{class:"fas fa-gas-pump",action:this.editFuelFilling.bind(this,t)}];return this.user.permission.edit&&e.push({class:t._islocked?"":"fas fa-edit",action:this.editTransfer.bind(this,t._id)}),this.user.permission.delete&&e.push({class:t._islocked?"":"fa fa-trash",action:this.deleteTransfer.bind(this,t)}),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}addTransfer(){this.common.params={refData:null},this.modalService.open(Zo.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t),this.viewTransfer()})}editTransfer(t){this.common.params={refData:{transferId:t}},this.modalService.open(Zo.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t),this.viewTransfer()})}editFuelFilling(t){if(null==t._vid)return this.common.showError("Vehichel id does not exist");this.common.params={info:t},this.modalService.open(Ci.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t),this.viewTransfer()})}openViewTransfer(t,e,n){console.log("Id",t),console.log("Title:",e),console.log("ledgerType:",n),this.common.params={ledgerId:t,title:e,ledgerType:n},this.modalService.open(vi.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t)})}deleteTransfer(t){console.log("row",t);let e={id:t._id};t._id&&(this.common.params={title:"Delete Transfer ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(console.log("data",t),this.common.loading++,this.api.post("FrieghtRate/deleteTransfers",e).subscribe(t=>{this.common.loading--,t.data[0].y_id>0?(this.common.showToast("Success"),this.viewTransfer()):this.common.showError(t.data[0].y_msg)},t=>{this.common.loading--,console.log("Error: ",t)}))}))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["transfers"]],decls:34,vars:13,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-1",2,"text-align","right"],[1,"col-2"],[1,"search",2,"display","inline-block"],["url","Suggestion/GetPurchaseLedger","display","name","placeholder","Search",3,"preSelected","onSelected"],[2,"display","inline-block"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[1,"col-md-3"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Transfer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"label"),r["\u0275\u0275text"](12,"Ledger"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",6),r["\u0275\u0275elementStart"](14,"div",7),r["\u0275\u0275elementStart"](15,"auto-suggestion",8),r["\u0275\u0275listener"]("onSelected",(function(t){return e.ledger(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",6),r["\u0275\u0275elementStart"](17,"label"),r["\u0275\u0275text"](18,"Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",9),r["\u0275\u0275elementStart"](20,"select",10),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.transferType=t})),r["\u0275\u0275elementStart"](21,"option",11),r["\u0275\u0275text"](22,"Transfer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"option",11),r["\u0275\u0275text"](24,"Receipt"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"option",11),r["\u0275\u0275text"](26,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",12),r["\u0275\u0275elementStart"](28,"button",13),r["\u0275\u0275listener"]("click",(function(){return e.viewTransfer()})),r["\u0275\u0275text"](29,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](30,yi,2,0,"button",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div"),r["\u0275\u0275template"](32,_i,1,2,"smart-table",15),r["\u0275\u0275template"](33,Si,2,0,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.transferType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",-1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.data.length))},directives:[s.s,s.v,s.r,et.a,we.a,tt.D,tt.r,tt.u,tt.w,tt.G,c.u,_.a],styles:['[_nghost-%COMP%]     .fa-trash{color:red}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}.search[_ngcontent-%COMP%]{width:auto}[_nghost-%COMP%]     .blue{color:#00f;text-decoration:underline}[_nghost-%COMP%]     .fa-gas-pump{color:#760dbb;margin-left:4px}[_nghost-%COMP%]     .fa-gas-pump span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-gas-pump span:before{display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-gas-pump span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-gas-pump:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function wi(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",21),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.description)}}function Oi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",22),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().submitPolygon()})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.site.name)}}function Pi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",23),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().cancelMapServices()})),r["\u0275\u0275text"](1,"Cancel"),r["\u0275\u0275elementEnd"]()}}function Ei(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",24),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}const ki=function(t){return{location:t}};let Ti=(()=>{class t{constructor(t,e,n,a){this.common=t,this.api=e,this.mapService=n,this.user=a,this.table=null,this.showTable=!1,this.LatLongData=null,this.path="",this.companyId=null,this.Sites=[],this.site={sitename:null,sitetype:1,name:null,id:null},this.remainingList=[],this.circle=null,this.routeId=null,this.siteLatLng={lat:0,lng:90},this.typeId=1,this.siteLoc="",this.siteName=null,this.tempData=[],this.isUpdate=!1,this.mergeSiteId=null,this.position=null,this.final=null,this.meterRadius=20,this.lat=null,this.long=null,this.isHeatAble=!1,this.kmsShow=null,this.Location=null,this.typeIds=[{description:"loading/unloading",id:"1"},{description:"Petrol Pump",id:"101"},{description:"Dhaba",id:"111"},{description:"My Office Site",id:"121"},{description:"Workshop",id:"131"},{description:"otherSite",id:"201"}],this.typeID=null,this.companySites(),this.site.name="Add",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.companySites()}ngAfterViewInit(){this.mapService.mapIntialize("map",10),setTimeout(()=>{this.mapService.setMapType(0)},2e3),this.mapService.isDrawAllow=!0,this.mapService.createPolygonPath(),this.mapService.addListerner(this.mapService.map,"click",t=>{this.mapService.isDrawAllow&&console.log("Event",t)})}submitPolygon(){if(this.mapService.polygonPath){this.path="(";var t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return this.common.showError("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var e=0;e<t.length;e++)this.lat=t[e].lat(),this.long=t[e].lng(),this.path+=t[e].lat()+" "+t[e].lng()+",";this.path+=t[0].lat()+" "+t[0].lng()+",",this.path=this.path.substr(0,this.path.length-1),this.path+=")",console.log("latlong:",this.path)}if(""==this.site.sitename)this.common.showError("Please fill Site Name.");else{let t={siteId:this.site.id,siteName:this.site.sitename,polygon:this.path,siteLoc:this.Location,typeId:this.typeID},e=this.site.id?"SiteFencing/updateSiteFence":"SiteFencing/createSiteAndFenceWrtFo";this.common.loading++,this.api.post(e,t).subscribe(t=>{this.common.loading--,console.log("Success:",t),t.code>0&&(this.common.showToast("success!!"),this.mapService.clearAll(),this.site.name="Add",this.Location=null,this.typeID=null,this.site.sitename="",this.companySites()),t.code<0&&(this.common.showError(t.msg),this.companySites())},t=>{this.common.loading--,console.log(t)})}}clearMapServices(){"Update"==this.site.name?(this.mapService.resetPolygons(),this.mapService.clearAll(),this.path=""):this.mapService.clearAll()}cancelMapServices(){this.site.sitename="",this.path="",this.site.id="",this.mapService.resetPolygons(),this.site.name="Add",this.Location=null,document.getElementById("location").value="",this.typeID=null}companySites(){this.mapService.clearAll(),this.common.loading++,this.api.get("SiteFencing/getLocalFoSites").subscribe(t=>{this.common.loading--,console.log(t),this.Sites=t.data,null!=this.Sites?(this.showTable=!0,this.table=this.setTable()):(this.showTable=!1,this.common.showToast("Record Not Found!!"))},t=>{this.common.loading--,console.log(t)})}showdata(t){console.log("Data",t),this.path=t.fences,this.mapService.resetPolygons();let e=t.latlongs;this.mapService.setMultiBounds(e,!0);for(let a=0;a<e.length;a++){const t=e[a];e[a]={lat:t.lat,lng:t.lng}}let n=[{data:e,isMain:!0,isSec:!1,show:t.name}];this.site.name="Update",this.site.sitename=t.name,this.site.sitetype=t.type,this.site.id=t.id,this.Location=t.loc_name,this.typeID=t._type_id,this.mapService.resetPolygons(),this.mapService.createPolygons(n)}setTable(){return{data:{headings:{name:{title:"Site Name",placeholder:"Site Name"},loc_name:{title:"Loc Name",placeholder:"Loc Name"},Type:{title:"SiteType",placeholder:"SiteType"},Delete:{title:"Delete",placeholder:"Delete",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let t=[];return this.Sites.map(e=>{let n={name:{value:e.name,action:this.showdata.bind(this,e)},loc_name:{value:e.loc_name,action:this.showdata.bind(this,e)},Type:{value:e.Type,action:this.showdata.bind(this,e)},Delete:this.user.permission.delete&&{value:'<i class="fa fa-trash text-danger"></i>',isHTML:!0,action:this.deleteRecord.bind(this,e),class:"icon text-center del"},rowActions:{click:"selectRow"}};t.push(n)}),t}deleteRecord(t){if(confirm("do you really want to delete this Site: "+t.name+"?")){let e={rowId:t.id};this.mapService.clearAll(),this.common.loading++,this.api.post("SiteFencing/deleteSiteAndFenceWrtFo",e).subscribe(t=>{this.common.loading--,console.log(t),this.Sites=t.data,t.code>0?(this.common.showToast("site deleted !!"),this.companySites()):this.common.showError(t.msg)},t=>{this.common.loading--,this.common.showError(t),console.log(t)})}}selectLocation(t){console.log(t),this.Location=t&&t.location?t.location:null,this.Location&&this.mapService.zoomAt(this.mapService.createLatLng(t.lat,t.long),12)}getLatLng(){if(!this.Location){let t=document.getElementById("moveto").value;console.log("ltlngString",t);let e=t.split(",")[0],n=t.split(",")[1];console.log("lat,lng",e,n),this.mapService.zoomAt(this.mapService.createLatLng(e,n),18)}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](ft.a),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["sites"]],decls:49,vars:12,consts:[[1,"body-box"],[1,"row"],[1,"col-4",2,"border-left","solid","border-top","solid","border-bottom","solid","border-right","solid","border-width","2px","border-color","lightgrey","padding","10px","border-radius","3px"],[1,"form-group"],[1,"col-4","display"],[2,"color","red","font-size","15px"],[1,"col-8","display"],["type","text","placeholder","Site Name",2,"width","100%",3,"ngModel","ngModelChange"],["url","Location/getPlaceFromRedis?","display","location","inputId","location","placeholder","Location",3,"preSelected","onSelected"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12",2,"text-align","center"],["type","submit","class","btn btn-success pt-2 pb-2 rounded-sm mr-3 text-capitalize",3,"click",4,"ngIf"],["type","submit","class","btn btn-warning pt-2 pb-2 rounded-sm mr-3 text-capitalize",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["url","Location/getPlaceFromRedis?","display","location","inputId","moveto","placeholder","Location",3,"preSelected","onSelected","focusout"],[1,"col-12"],[2,"background-color","#dad4d4","height","1px","width","100%"],["style","height:27vh!important;overflow-y:scroll!important;","id","verifyState",3,"data","settings",4,"ngIf"],[1,"col-8"],["id","map",2,"width","100%","height","75vh"],[3,"value"],["type","submit",1,"btn","btn-success","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["type","submit",1,"btn","btn-warning","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["id","verifyState",2,"height","27vh!important","overflow-y","scroll!important",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Sites"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275elementStart"](8,"div",3),r["\u0275\u0275elementStart"](9,"div",4),r["\u0275\u0275elementStart"](10,"label"),r["\u0275\u0275text"](11,"SiteName"),r["\u0275\u0275elementStart"](12,"span",5),r["\u0275\u0275text"](13,"*"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",6),r["\u0275\u0275elementStart"](15,"input",7),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.site.sitename=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",3),r["\u0275\u0275elementStart"](17,"div",4),r["\u0275\u0275elementStart"](18,"label"),r["\u0275\u0275text"](19,"Location Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",6),r["\u0275\u0275elementStart"](21,"auto-suggestion",8),r["\u0275\u0275listener"]("onSelected",(function(t){return e.selectLocation(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",3),r["\u0275\u0275elementStart"](23,"div",4),r["\u0275\u0275elementStart"](24,"label"),r["\u0275\u0275text"](25,"Site Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",6),r["\u0275\u0275elementStart"](27,"select",9),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.typeID=t})),r["\u0275\u0275template"](28,wi,2,2,"option",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",3),r["\u0275\u0275elementStart"](30,"div",11),r["\u0275\u0275template"](31,Oi,2,1,"button",12),r["\u0275\u0275template"](32,Pi,2,0,"button",13),r["\u0275\u0275elementStart"](33,"button",14),r["\u0275\u0275listener"]("click",(function(){return e.clearMapServices()})),r["\u0275\u0275text"](34,"Clear"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"div",3),r["\u0275\u0275elementStart"](36,"div",4),r["\u0275\u0275elementStart"](37,"label"),r["\u0275\u0275text"](38,"Move To"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"div",6),r["\u0275\u0275elementStart"](40,"auto-suggestion",15),r["\u0275\u0275listener"]("onSelected",(function(t){return e.selectLocation(t)}))("focusout",(function(){return e.getLatLng()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"div",3),r["\u0275\u0275elementStart"](42,"div",16),r["\u0275\u0275element"](43,"hr",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"div",3),r["\u0275\u0275elementStart"](45,"div",16),r["\u0275\u0275template"](46,Ei,1,2,"smart-table",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",19),r["\u0275\u0275element"](48,"div",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngModel",e.site.sitename),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("preSelected",e.site.id?r["\u0275\u0275pureFunction1"](8,ki,e.Location):""),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.typeID),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.typeIds),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","Update"==e.site.name),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("preSelected",e.site.id?r["\u0275\u0275pureFunction1"](10,ki,e.Location):""),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.Sites.length>0))},directives:[s.s,s.v,s.r,tt.d,tt.r,tt.u,we.a,tt.D,c.t,c.u,tt.w,tt.G,_.a],styles:[".display[_ngcontent-%COMP%]{display:inline-block}.mrgn[_ngcontent-%COMP%]{margin-top:5px}.btnstyle[_ngcontent-%COMP%]{background-color:transparent;border:none}.icon[_ngcontent-%COMP%]{font-size:30px!important;padding-left:34%!important}.tag[_ngcontent-%COMP%], [_nghost-%COMP%]     .no-search span{color:#000}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 472px)}"]}),t})();var Di=n("vHBT"),Ii=n("EXPs");function Fi(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275text"](1," No Data Available On That Time Period ! "),r["\u0275\u0275elementEnd"]())}function Ai(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",3),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Vi=(()=>{class t{constructor(t,e,n,a){this.api=t,this.activeModal=e,this.modalService=n,this.common=a,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.recoveries=[],this.getRecoveries(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getRecoveries()}getRecoveries(){this.common.loading++,this.api.get("FinanceRecovery/getOutstandingCredit?branchId=0&accGroupId=0&ledgerId=0").subscribe(t=>{this.common.loading--,console.log("Res:",t),this.recoveries=t.data||[],this.setTable()},t=>{this.common.loading--,this.common.showError(),console.log("Error:",t)})}setTable(){this.table.data={headings:this.generateHeadings(),columns:this.genearateColumns()}}generateHeadings(){let t={};for(let e in this.recoveries[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t}genearateColumns(){let t=[];return this.recoveries.map(e=>{let n={};for(let t in this.generateHeadings())if("Action"==t)n.Action={class:"fas fa-eye",action:this.showAction.bind(this,e._ledid)};else if("View Contacts"==t)n[t]={value:"show",class:"Black"==e._cc?"black":"Red"==e._cc?"red":"Blue"==e._cc?"blue":"Green"==e._cc?"green":"Light Green"==e._cc?"lightGreen":"Purple"==e._cc?"purple":"Yellow"==e._cc?"yellow":"",action:this.customerMobileNo.bind(this)};else if("ledgername"==t){let a=[{class:"fa fa-bell",action:this.customerResponse.bind(this)},{txt:e[t],action:this.customerResponse.bind(this)}];1!=e._reminderflag&&a.splice(0,1),n[t]={class:"Black"==e._cc?"black":"Red"==e._cc?"red":"Blue"==e._cc?"blue":"Green"==e._cc?"green":"Light Green"==e._cc?"lightGreen":"Purple"==e._cc?"purple":"Yellow"==e._cc?"yellow":"",icons:a}}else n[t]={value:e[t],class:"Black"==e._cc?"black":"Red"==e._cc?"red":"Blue"==e._cc?"blue":"Green"==e._cc?"green":"Light Green"==e._cc?"lightGreen":"Purple"==e._cc?"purple":"Yellow"==e._cc?"yellow":"",action:""};t.push(n)}),t}customerResponse(){this.common.params={data:{title:"Customer Response",type:"radio",apiData:null,radio1:"Not Picking The Phone",radio2:"Switch Off",radio3:"Highly Negative Response",btn1:"Cancel",btn2:"Submit"}},this.modalService.open(Ii.a,{container:"nb-layout",size:"sm",backdrop:"static"})}customerMobileNo(){let t={title:"User mobile",type:"text",apiData:null};this.api.get("FinanceRecovery/getCompanyContacts").subscribe(e=>{console.log("res",e.data),t.apiData=e.data[0].MobileNo,console.log("data api",t.apiData),this.common.params={data:t},this.modalService.open(Ii.a,{container:"nb-layout",size:"sm",backdrop:"static"})},t=>{this.common.loading--,this.common.showError()})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}showAction(t){this.common.params={ledgerId:t},console.log("params",this.common.params),this.modalService.open(Di.a,{container:"nb-layout"}).result.then(t=>{console.log("res",t),this.getRecoveries()})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["finance-recovery"]],decls:8,vars:2,consts:[["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Finance Recovery"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275template"](5,Fi,2,0,"div",0),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275template"](7,Ai,1,2,"smart-table",1),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",0==e.recoveries.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.recoveries.length>0))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).black{color:#fff;background-color:#000}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).red{color:#fff;background-color:red}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).pink{color:#fff;background-color:pink}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).green{color:#fff;background-color:green}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).lightGreen{color:#fff;background-color:#90ee90}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).blue{color:#fff;background-color:#00f}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).purple{color:#fff;background-color:purple}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).yellow{color:#fff;background-color:#ff0}[_nghost-%COMP%]     .tableFixHead table tr td.fa-check{font-family:FontAwesome}[_nghost-%COMP%]     .tableFixHead table tr .fa-bell .zoom{display:inline-block;margin-left:10px;font-weight:700;padding:5px 0;font-size:14px;font-family:Poppins,sans-serif!important}"]}),t})();var Li=n("3Wbk"),zi=n("enZy");function ji(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",16),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.y_id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.y_groupname," ")}}function Ri(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",17),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Hi=(()=>{class t{constructor(t,e,n){this.api=t,this.modalService=e,this.common=n,this.assType=null,this.searchValue="",this.searchString="",this.associationType=[],this.companyId=null,this.companyName=null,this.companyExist=!1,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.refresh(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getAssociationType()}getAssociationType(){this.common.loading++,this.api.get("Suggestion/getAssocTypeWrtFo").subscribe(t=>{this.common.loading--,this.associationType=t.data},t=>{this.common.loading--})}checkCompany(){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.api.get("ManageParty/checkCompany").subscribe(t=>{t.data&&t.data.length?(this.companyExist=!0,this.companyId=t.data[0].company_id,this.companyName=t.data[0].Company):(this.companyExist=!1,this.common.showError("please add company")),console.log("para",this.companyId,this.companyName,t.data),console.log(t)},t=>{})}getCmpAssocWrtType(){const t="assocType="+this.assType+"&searchValue="+this.searchValue+"&searchString="+this.searchString;console.log("pod",t),this.common.loading++,this.api.get("ManageParty/getCmpAssocWrtType?"+t).subscribe(t=>{if(this.common.loading--,null==t.data)return this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],void(this.valobj={});{if(this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let n=this.data[0];for(var e in n)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:this.formatTitle(e),placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("Api Response:",t)}},t=>{this.common.loading--,console.error("Api Error:",t)})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("Type",this.headings[t]),console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]="Action"==this.headings[t]?{value:"",action:null,icons:[{class:"fa fa-edit",action:this.addNewParty.bind(this,"Edit",e)},{class:"fab fa-reddit",action:this.partyMapping.bind(this,e)},{class:"fa fa-trash",action:this.deleteParty.bind(this,e)}]}:{value:e[this.headings[t]],class:"black",action:""};t.push(this.valobj)}),t}addNewParty(t,e){console.log("TESTING"),this.common.params={cmpId:this.companyId,cmpName:this.companyName,associationType:this.assType,refName:t},e&&(this.common.params.cmpAssocDetail=e),console.log("add",this.common.params),this.modalService.open(Li.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"add-consige-veiw"})}partyMapping(t){null==t._ledid?(this.common.params={partyId:t._id,userGroupId:t._asstype},this.modalService.open(zi.a,{size:"lg",container:"nb-layout"}).result.then(t=>{t&&this.getCmpAssocWrtType()})):this.common.showToast("Ledger Already Mapped")}deleteParty(t){const e={assocId:t._id};t._id&&(this.common.params={title:"Delete Party ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("ManageParty/deletePartyAssociation",e).subscribe(t=>{console.log("Api Response:",t),this.common.showToast(t.msg),this.getCmpAssocWrtType(),this.common.loading--},t=>console.error(" Api Error:",t)))}))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["manage-fo-party"]],decls:36,vars:5,consts:[[1,"company-association"],[1,"row"],[1,"col-2"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2","ml-2"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","name"],["value","gst"],["value","pan "],["value","ledgername"],["type","text","autocomplete","off","name","searchValue",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-2","text-right"],[1,"row","mt-2"],["id","companyBranch",3,"data","settings",4,"ngIf"],[3,"value"],["id","companyBranch",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Manage Party"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"div",2),r["\u0275\u0275elementStart"](8,"label"),r["\u0275\u0275text"](9,"Association Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"select",3),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.assType=t})),r["\u0275\u0275template"](11,ji,2,2,"option",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",5),r["\u0275\u0275elementStart"](13,"label"),r["\u0275\u0275text"](14,"Search String"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"select",6),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.searchString=t})),r["\u0275\u0275elementStart"](16,"option",7),r["\u0275\u0275text"](17,"Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",8),r["\u0275\u0275text"](19,"GST No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"option",9),r["\u0275\u0275text"](21,"PAN No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"option",10),r["\u0275\u0275text"](23,"Ledger"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",5),r["\u0275\u0275elementStart"](25,"label"),r["\u0275\u0275text"](26,"Search Value"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"input",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.searchValue=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",2),r["\u0275\u0275elementStart"](29,"button",12),r["\u0275\u0275listener"]("click",(function(){return e.getCmpAssocWrtType()})),r["\u0275\u0275text"](30,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div",13),r["\u0275\u0275elementStart"](32,"button",12),r["\u0275\u0275listener"]("click",(function(){return e.addNewParty("Add")})),r["\u0275\u0275text"](33,"ADD NEW PARTY"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",14),r["\u0275\u0275template"](35,Ri,1,2,"smart-table",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngModel",e.assType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.associationType),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.searchString),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",e.searchValue),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length))},directives:[s.s,s.v,s.r,tt.D,tt.r,tt.u,c.t,tt.w,tt.G,tt.d,c.u,_.a],styles:['[_nghost-%COMP%]     td i.fa-edit{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative;margin-right:5px}[_nghost-%COMP%]     td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     td i.fa-edit span{position:absolute;display:none;padding:11px 57px;left:-44px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-edit span:before{content:"Edit Party Details";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-reddit{background-color:#82c91e;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-reddit:hover span{display:block}[_nghost-%COMP%]     td i.fa-reddit span{position:absolute;display:none;padding:11px 70px;left:-59px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-reddit span:before{content:"Party Ledger Mapping";display:block;position:absolute;top:0;left:0;background-color:#82c91e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-reddit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #82c91e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-trash{color:red;font-size:18px;margin-left:6px}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 33px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}']}),t})();var Ni=n("mdFJ"),Ui=n("4zcd"),Gi=n("kZSg"),Bi=n("U79Z");function $i(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).addFuelRule()})),r["\u0275\u0275text"](1,"Add Rule"),r["\u0275\u0275elementEnd"]()}}function Wi(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function Ki(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function qi(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",5),r["\u0275\u0275template"](2,$i,2,0,"button",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",7),r["\u0275\u0275template"](4,Wi,1,2,"smart-table",8),r["\u0275\u0275template"](5,Ki,2,0,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.fuelNorms&&t.fuelNorms.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.fuelNorms.length)}}function Ji(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.table1.data)("settings",t.table1.settings)}}function Yi(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}function Zi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275elementStart"](2,"div",14),r["\u0275\u0275elementStart"](3,"auto-suggestion",15),r["\u0275\u0275listener"]("onSelected",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getFs(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",5),r["\u0275\u0275elementStart"](5,"button",16),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().addFoFsMapping()})),r["\u0275\u0275text"](6,"Add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",7),r["\u0275\u0275template"](8,Ji,1,2,"smart-table",8),r["\u0275\u0275template"](9,Yi,2,0,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.foFsMapping.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==t.foFsMapping.length)}}function Qi(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).addFuelAvg()})),r["\u0275\u0275text"](1,"Add Model Fuel Mileage"),r["\u0275\u0275elementEnd"]()}}function Xi(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data Available On That Time Period ! "),r["\u0275\u0275elementEnd"]())}function tr(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("data",t.fuelTable.data)("settings",t.fuelTable.settings)}}function er(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275elementStart"](2,"div",17),r["\u0275\u0275template"](3,Qi,2,0,"button",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"br"),r["\u0275\u0275template"](5,Xi,2,0,"div",9),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275template"](7,tr,1,2,"smart-table",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0==t.fuelAvg.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.fuelAvg.length>0)}}let nr=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.fuelAvg=[],this.fuelTable={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.fuelHeadings=[],this.fuelValobj={},this.table=null,this.fuelNorms=[],this.table1=null,this.foFsMapping=[],this.fsid=null,this.foid=null,this.fuelData=[],this.vehicleId=null,this.activeTab="Credit Fuel Station",this.common.refresh=this.refresh.bind(this),this.getFuelNorms(),this.getFoFsMapping(),this.getFuelAvg()}ngOnInit(){}refresh(){this.getFuelNorms(),this.getFoFsMapping(),this.getFuelAvg()}addFuelRule(){this.common.params={},this.modalService.open(Gi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFuelNorms()})}getFuelNorms(){this.fuelNorms=[],this.common.loading++,this.api.get("Fuel/getFuelFullNorms").subscribe(t=>{this.common.loading--,console.log("res",t.data),this.fuelNorms=t.data||[],this.table=this.setTable()},t=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{FoName:{title:"Fo Name",placeholder:"Fo Name"},RuleType:{title:"Rule Type ",placeholder:"Rule Type"},Name:{title:"Name ",placeholder:"Name"},AngleFrom:{title:"Angle From ",placeholder:"Angle From"},AngleTo:{title:"Angle To ",placeholder:"Angle To"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let t=[];return this.fuelNorms.map(e=>{let n={FoName:{value:e.fo_name},RuleType:{value:e.type},Name:{value:e.name},AngleFrom:{value:e.angle_from},AngleTo:{value:e.angle_to},action:{value:"",isHTML:!1,action:null,icons:this.actionIcons(e)},rowActions:{click:"selectRow"}};t.push(n)}),t}actionIcons(t){let e=[];return this.user.permission.edit&&e.push({class:"far fa-edit",action:this.updateRule.bind(this,t)}),this.user.permission.delete&&e.push({class:" fa fa-trash-alt",action:this.deleteRule.bind(this,t)}),e}updateRule(t){this.common.params={title:"Edit Fuel Rule",rule:t},this.modalService.open(Gi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getFuelNorms()})}deleteRule(t){if(window.confirm("Are You Want Delete Record")){const e={rowid:t.id};console.log("params",e),this.common.loading++,this.api.post("Fuel/deleteRule",e).subscribe(t=>{this.common.loading--;let e=t.data;console.log("data:"),console.log(e),this.common.showToast(t.msg),this.getFuelNorms()},t=>{this.common.loading--,console.log(t)})}}getFoFsMapping(){this.common.loading++,this.api.get("Fuel/getFoFsMapping").subscribe(t=>{this.common.loading--,console.log("res",t.data),this.foFsMapping=t.data||[],this.table1=this.setTable1()},t=>{this.common.loading--,this.common.showError()})}addFoFsMapping(){if(!this.fsid)return void this.common.showToast("Fuel Station Is Missing");let t={foid:null,fsid:this.fsid};this.common.loading++,this.api.post("Fuel/insertFoFsMapping",t).subscribe(t=>{this.common.loading--,console.log("res",t.data),this.common.showToast(t.msg),t.success&&this.getFoFsMapping()},t=>{this.common.loading--,this.common.showError()})}getFo(t){this.foid=t.id}getFs(t){this.fsid=t.id}setTable1(){return{data:{headings:{StationName:{title:"Station Name",placeholder:"Station Name"},SiteName:{title:"Site Name",placeholder:"Site Name"},Location:{title:"Location",placeholder:"Location"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns1()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns1(){let t=[];return this.foFsMapping.map(e=>{let n={StationName:{value:e.station_name},SiteName:{value:e.site_name},Location:{value:e.location},action:{value:"",isHTML:!1,action:null,icons:[this.user.permission.delete&&{class:" fa fa-trash-alt",action:this.deleteMapping.bind(this,e)}]},rowActions:{click:"selectRow"}};t.push(n)}),t}deleteMapping(t){let e={rowid:t.id};console.log("rowid",e),this.common.loading++,this.api.post("Fuel/deleteFoFsMapping",e).subscribe(t=>{this.common.loading--,this.common.showToast(t.msg),t.success&&this.getFoFsMapping()},t=>{this.common.loading--,this.common.showError()})}addFuelAvg(){this.common.params={row:null,load:null,unload:null,vehicle:null},this.modalService.open(Bi.a,{container:"nb-layout",backdrop:"static"}).result.then(t=>{this.getFuelAvg()})}getFuelAvg(){this.fuelAvg=[],this.fuelTable={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.fuelHeadings=[],this.fuelValobj={},this.common.loading++,this.api.get("Fuel/getModelWiseFuelAvgWrtFo").subscribe(t=>{this.common.loading--,this.fuelAvg=[],this.fuelAvg=t.data||[],console.log("result",t);let e=this.fuelAvg[0];for(var n in e)if("_"!=n.charAt(0)){this.fuelHeadings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.fuelTable.data.headings[n]=t}this.fuelTable.data.columns=this.getTableFuelColumns()})}getTableFuelColumns(){let t=[];return console.log("Data=",this.fuelAvg),this.fuelAvg.map(e=>{this.fuelValobj={};for(let t=0;t<this.fuelHeadings.length;t++)console.log("doc index value:",e[this.fuelHeadings[t]]),"Action"==this.fuelHeadings[t]?this.fuelValobj.Action={value:"",action:null,icons:this.actionIcon(e)}:this.fuelValobj[this.fuelHeadings[t]]={value:e[this.fuelHeadings[t]],class:"black",action:""};t.push(this.fuelValobj)}),t}actionIcon(t){let e=[];return this.user.permission.edit&&e.push({class:"far fa-edit",action:this.updateFuel.bind(this,t._id,t.LoadMileage,t.UnloadMileage,t._vm_id,t.VehicleModel,t.Brand)}),this.user.permission.delete&&e.push({class:"fas fa-trash-alt",action:this.deleteFuel.bind(this,t._id)}),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}updateFuel(t,e,n,a,o,i){this.common.params={row:t,load:e,unLoad:n,vehicle:a,name:o,brand:i},this.modalService.open(Bi.a,{container:"nb-layout"}).result.then(t=>{this.getFuelAvg()})}deleteFuel(t){console.log("id",t);const e={rowId:t};console.log("id2",e),t&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are you Sure You Want  To Delete This Record?<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,console.log("par",e),this.api.post("Fuel/deleteModelWiseFuelAvgWrtFo",e).subscribe(t=>{console.log("Api Response:",t),this.common.showToast(t.msg),this.getFuelAvg(),this.common.loading--},t=>console.error(" Api Error:",t)))}))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-master"]],decls:17,vars:6,consts:[[1,"tabs_style_main"],[1,"tabs_style","text-left"],[3,"ngClass","click"],[1,"fuel-master"],[4,"ngIf"],[1,"text-right"],["type","submit","class","btn btn-primary m-0","name","add","style","border-radius:3px;",3,"click",4,"ngIf"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["type","submit","name","add",1,"btn","btn-primary","m-0",2,"border-radius","3px",3,"click"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"],[1,"row"],[1,"col-3"],["url","Suggestion/GetFuelStation","display","name","placeholder","Search Fuel Station",3,"preSelected","onSelected"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],[1,"col-12","text-right"],["type","submit","class","btn btn-primary m-0","name","add","style","border-radius:3px",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Fuel Master"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"ul",1),r["\u0275\u0275elementStart"](7,"li",2),r["\u0275\u0275listener"]("click",(function(){return e.activeTab="Credit Fuel Station"})),r["\u0275\u0275text"](8," Credit Fuel Station"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"li",2),r["\u0275\u0275listener"]("click",(function(){return e.activeTab="Fuel Rule"})),r["\u0275\u0275text"](10,"IsFull Rule"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"li",2),r["\u0275\u0275listener"]("click",(function(){return e.activeTab="Model Fuel Mileage"})),r["\u0275\u0275text"](12," Model Fuel Mileage "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",3),r["\u0275\u0275template"](14,qi,6,3,"div",4),r["\u0275\u0275template"](15,Zi,10,3,"div",4),r["\u0275\u0275template"](16,er,8,3,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngClass","Credit Fuel Station"==e.activeTab?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","Fuel Rule"==e.activeTab?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","Model Fuel Mileage"==e.activeTab?"active":""),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","Fuel Rule"==e.activeTab),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","Credit Fuel Station"==e.activeTab),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","Model Fuel Mileage"==e.activeTab))},directives:[s.s,s.v,s.r,c.r,c.u,_.a,we.a],styles:['.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;font-size:12px}[_nghost-%COMP%]     .tableFixHead{border-bottom:1px solid #ccc;padding-bottom:20px;margin-bottom:20px;border-top:1px solid #ccc;padding-top:20px;margin-top:20px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 20px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:14px;font-weight:400;cursor:pointer}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.error[_ngcontent-%COMP%]{font:200;font-size:14px}.ex-pen[_ngcontent-%COMP%]{display:block;font-weight:400;margin-top:5px}.ex-pen[_ngcontent-%COMP%], .text-red[_ngcontent-%COMP%]{color:red}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .fa-edit{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .fa-trash-alt{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}']}),t})();var ar=n("Opnw"),or=n("Lmhy");function ir(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",11),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().openDispatchOrder(!1)})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function rr(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",17),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function sr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275elementStart"](1,"h4",19),r["\u0275\u0275text"](2,"No Record Found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}let lr=(()=>{class t{constructor(t,e,n,a){this.common=t,this.user=e,this.modalService=n,this.api=a,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.dispatchOrders=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getDispatchOrders()}ngOnInit(){}getDispatchOrders(){let t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.common.loading++,this.api.post("LorryReceiptsOperation/getDispatchOrders",t).subscribe(t=>{console.log("Res:",t),this.common.loading--,this.dispatchOrders=t.data,t.data&&(this.clearAllTableData(),this.setTable())},t=>{this.common.loading--,this.common.showError(t)})}setTable(){this.table.data={headings:this.generateHeadings(this.dispatchOrders[0]),columns:this.getColumns(this.dispatchOrders,this.dispatchOrders[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)},"Date"===n&&(e[n].type="date"));return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]="Action"==n?{value:"",action:null,icons:this.actionIcons(t)}:{value:t[n],class:"black",action:""};n.push(a)}),n}actionIcons(t){let e=[{class:"fa fa-print",action:this.printDispatchOrder.bind(this,t)},{class:t._lrid?"":"fa fa-list",action:this.openGenerateLr.bind(this,t)}];return this.user.permission.edit&&e.push({class:"fa fa-edit",action:this.openDispatchOrder.bind(this,t)}),this.user.permission.delete&&e.push({class:"fas fa-trash-alt",action:this.deleteDispatchOrder.bind(this,t)}),e}deleteDispatchOrder(t){this.common.params={title:"Delete  ",description:"<b>Are you Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("LorryReceiptsOperation/deleteDispatchOrders",{dispatchOrderId:t._dispatchid,vehicleId:t._vid}).subscribe(t=>{this.common.loading--,console.log("response:",t),t.data[0].r_id>0&&(this.common.showToast("Sucessfully Deleted",1e4),this.getDispatchOrders())},t=>{this.common.loading--,console.log(t)}))})}clearAllTableData(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}openDispatchOrder(t){let e=null;e=!!t&&{id:t._dispatchid},console.log(t,e),this.common.params={dispatchOrderData:e},this.modalService.open(or.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t),this.getDispatchOrders()})}printDispatchOrder(t){let e=null;e=!!t&&{title:"Dispatch Order",previewId:null,refId:t._dispatchid,refType:"DSPOD_PRT"},console.log(t,e),this.common.params={previewData:e},this.modalService.open(X.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data:",t)})}openGenerateLr(t){let e={dispOrdId:t._dispatchid};console.log("Data Do:",e),this.common.params={lrData:e},this.modalService.open($.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Data1:",t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["dispatch-orders"]],decls:30,vars:8,consts:[[2,"border","0px","height","100%"],[1,"dispatch-orders"],[1,"row"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1","pr-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-2"],[1,"col-1"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[3,"data","settings",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Dispatch Orders"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"div",3),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275elementStart"](10,"label",4),r["\u0275\u0275text"](11,"From Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",5),r["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",3),r["\u0275\u0275elementStart"](15,"div",2),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275elementStart"](17,"label",4),r["\u0275\u0275text"](18,"To Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",8),r["\u0275\u0275elementStart"](20,"uj-date-time-picker",9),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",10),r["\u0275\u0275elementStart"](22,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getDispatchOrders()})),r["\u0275\u0275text"](23,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](24,"div",12),r["\u0275\u0275elementStart"](25,"div",13),r["\u0275\u0275template"](26,ir,2,0,"button",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",4),r["\u0275\u0275template"](28,rr,1,2,"smart-table",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](29,sr,3,0,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.dispatchOrders&&e.dispatchOrders.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.dispatchOrders))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:['[_nghost-%COMP%]     td i.fa-edit{color:#000;padding:5px;border-radius:3px;position:relative;margin-right:5px}[_nghost-%COMP%]     td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     td i.fa-edit span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-24px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash-alt{color:red;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash-alt span{position:absolute;display:none;padding:11px 31px;left:-22px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-list{color:#000;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-list:hover span{display:block}[_nghost-%COMP%]     td i.fa-list span{position:absolute;display:none;padding:11px 70px;left:-59px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-list span:before{content:"Generate LR";display:block;position:absolute;top:0;left:0;background-color:#82c91e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #82c91e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}']}),t})();function dr(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",6),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let cr=(()=>{class t{constructor(t,e){this.common=t,this.api=e,this.totalFillCount=0,this.totalFuel=0,this.totelFuelCost=0,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.fuelConsumption=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={}}ngOnInit(){}getFuelConsumption(){this.fuelConsumption=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};let t=null!=this.startDate?this.common.dateFormatter(this.startDate):null,e=null!=this.endDate?this.common.dateFormatter(this.endDate):null;if(null==t)return this.common.showError("Start Date is Missing");if(null==e)return this.common.showError("End Date is Missing");if(this.startDate>this.endDate)return this.common.showError("Start Date should not be Greater than End Date");const n={start_time:t,end_time:e};console.log(n),this.common.loading++,this.api.post("FuelDetails/getFuelConsumption",n).subscribe(t=>{this.common.loading--,this.fuelConsumption=t.data,this.totalFillCount=0,this.totalFuel=0,this.totelFuelCost=0,console.log("result",t);let e=this.fuelConsumption[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()})}getTableColumns(){let t=[];console.log("Data=",this.fuelConsumption),this.fuelConsumption.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""},"Filling Count"==this.headings[t]&&(this.totalFillCount=this.totalFillCount+e[this.headings[t]]),"Total Fuel (Litres)"==this.headings[t]&&(this.totalFuel=this.totalFuel+e[this.headings[t]]),"Total Fuel Cost"==this.headings[t]&&(this.totelFuelCost=this.totelFuelCost+e[this.headings[t]]);t.push(this.valobj)}),this.valobj={};for(let e=0;e<this.headings.length;e++)"Pump Name"==this.headings[e]&&(this.valobj[this.headings[e]]={value:"Total",class:"text-colour",action:""}),"Filling Count"==this.headings[e]&&(this.valobj[this.headings[e]]={value:this.totalFillCount,class:"text-colour",action:""}),"Total Fuel (Litres)"==this.headings[e]&&(this.valobj[this.headings[e]]={value:this.totalFuel,class:"text-colour",action:""}),"Total Fuel Cost"==this.headings[e]&&(this.valobj[this.headings[e]]={value:this.totelFuelCost,class:"text-colour",action:""});return t.push(this.valobj),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-consumption"]],decls:15,vars:6,consts:[[1,"row"],[1,"col-4"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],["id","fuelConsumption",3,"data","settings",4,"ngIf"],["id","fuelConsumption",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Fuel Consumption"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",0),r["\u0275\u0275elementStart"](6,"div",1),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",2),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",1),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",1),r["\u0275\u0275elementStart"](11,"button",4),r["\u0275\u0275listener"]("click",(function(){return e.getFuelConsumption()})),r["\u0275\u0275text"](12,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div"),r["\u0275\u0275template"](14,dr,1,2,"smart-table",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.fuelConsumption&&e.fuelConsumption.length))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:["[_nghost-%COMP%]    .text-colour{background:grey;color:#fff}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3), [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4), [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5){text-align:center}[_nghost-%COMP%]     .tableFixHead table tr th .filter-input-container{width:calc(100% - 20px)!important}[_nghost-%COMP%]     .tableFixHead table tr th:nth-child(3) .filter-input-container input, [_nghost-%COMP%]     .tableFixHead table tr th:nth-child(4) .filter-input-container input, [_nghost-%COMP%]     .tableFixHead table tr th:nth-child(5) .filter-input-container input{text-align:center}"]}),t})();function hr(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",20),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let mr=(()=>{class t{constructor(t,e,n,a){this.common=t,this.datePipe=e,this.user=n,this.api=a,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.TripPNLData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}ngOnInit(){}getPnlSummary(){let t=this.common.dateFormatter(this.startDate),e=this.common.dateFormatter(this.endDate);if(console.log("_________________________________=====+++++++++++++++_________________"),t||e)if(t)if(this.endDate)if(t>e)this.common.showError("StartDate Should Be Less Then EndDate");else{let n={startDate:this.common.dateFormatter(t),endDate:this.common.dateFormatter(e)};this.common.loading++,this.api.post("TripsOperation/getPnlSummary",n).subscribe(t=>{console.log("Res:",t),this.common.loading--,t.data&&(this.TripPNLData=t.data,this.clearAllTableData(),this.setTable())},t=>{this.common.loading--,this.common.showError(t)})}else this.common.showError("Please Enter EndDate");else this.common.showError("Please Enter StartDate");else this.common.showError("Please Enter StartDate And Enddate")}setTable(){this.table.data={headings:this.generateHeadings(this.TripPNLData[0]),columns:this.getColumns(this.TripPNLData,this.TripPNLData[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]={value:t[n],class:"black",action:""};n.push(a)}),n}clearAllTableData(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}printPDF(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n=e.data.name,a="Start Date:"+this.datePipe.transform(this.startDate,"dd-MM-yyyy")+"  End Date:"+this.datePipe.transform(this.endDate,"dd-MM-yyyy");this.common.getPDFFromTableId(t,n,"Trip Profit And Loss",["Action"],a)},t=>{this.common.loading--,console.log(t)})}printCsv(t){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--;let n="FoName:"+e.data.name,a="Start Date:"+this.datePipe.transform(this.startDate,"dd-MM-yyyy")+"  End Date:"+this.datePipe.transform(this.endDate,"dd-MM-yyyy");this.common.getCSVFromTableId(t,n,"Report:Trip Profit And Loss",null,a)},t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-pnl"]],decls:34,vars:6,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"row"],[1,"col-10"],[1,"col-2"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"trip-PNL"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isStart","isTime","onChanged"],[1,"col-1","pr-0"],["type","button",1,"btn","btn-primary",3,"click"],["id","pl",3,"data","settings",4,"ngIf"],["id","pl",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Trip Profit And Loss"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.printPDF("pl")})),r["\u0275\u0275element"](9,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"span",7),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("pl")})),r["\u0275\u0275element"](11,"i",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"nb-card-body"),r["\u0275\u0275elementStart"](13,"div",9),r["\u0275\u0275elementStart"](14,"div",2),r["\u0275\u0275elementStart"](15,"div",10),r["\u0275\u0275elementStart"](16,"div",2),r["\u0275\u0275elementStart"](17,"div",10),r["\u0275\u0275elementStart"](18,"label",11),r["\u0275\u0275text"](19,"From Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",12),r["\u0275\u0275elementStart"](21,"uj-date-time-picker",13),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",10),r["\u0275\u0275elementStart"](23,"div",2),r["\u0275\u0275elementStart"](24,"div",14),r["\u0275\u0275elementStart"](25,"label",11),r["\u0275\u0275text"](26,"To Date :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",15),r["\u0275\u0275elementStart"](28,"uj-date-time-picker",16),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",17),r["\u0275\u0275elementStart"](30,"button",18),r["\u0275\u0275listener"]("click",(function(){return e.getPnlSummary()})),r["\u0275\u0275text"](31,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",11),r["\u0275\u0275template"](33,hr,1,2,"smart-table",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](21),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isStart",!1)("isTime",!1),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.TripPNLData&&e.TripPNLData.length))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})();var pr=n("VwZz");const gr=function(t){return{"background-color":t}};function br(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-body",11),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"]().filterData(n.name)})),r["\u0275\u0275elementStart"](2,"div",12),r["\u0275\u0275element"](3,"div",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",7),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"titlecase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",14),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](5,gr,t.bgColor)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,3,t.name)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",n.routeGroups[t.name].length," ")}}let ur=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.routeData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.viewName="Route Status",this.viewIndex=0,this.viewOtions=[{name:"Route Status",key:"route_status"},{name:"Routes",key:"show_name"},{name:"Onward Status",key:"onward_status"}],this.isGraphView=!1,this.viewType="route_status",this.routesData=[],this.routeGroups=[],this.routeGroupsKeys=null,this.keyGroups=[],this.activePrimaryStatus="",this.primarySubStatus=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getFoWiseRouteData(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}ngAfterViewInit(){this.common.stopScroll()}ngOnDestroy(){this.common.continuoueScroll()}refresh(){this.getFoWiseRouteData()}allData(){this.selectedFilterKey="",this.filterData("All")}selectSubStatus(t){this.routeData=t,this.table=this.setTable()}getFoWiseRouteData(){this.common.loading++,this.api.get("ViaRoutes/foRouteDashboard?").subscribe(t=>{if(this.common.loading--,console.log("api data",t),!t.data)return this.routeData=[],void(this.routesData=[]);this.routeData=t.data,this.grouping("route_status"),this.routeData.length?this.table=this.setTable():this.resetTable(),this.routesData=t.data},t=>{this.common.loading--,console.log(t)})}resetTable(){this.table.data={headings:{},columns:[]}}setTable(){return{data:{headings:{regno:{title:"Regno",placeholder:"Regno"},lastSeenTime:{title:"Last Seen Time",placeholder:"Last Seen Time"},routeName:{title:"Route Name",placeholder:"Route Name"},startLocation:{title:"Start Location",placeholder:"Start Location"},startTime:{title:"Start Time",placeholder:"Start time"},endLocation:{title:"Last Location",placeholder:"Last Location"},lastTime:{title:"Last Exit Time",placeholder:"Last Exit Time"},currentLocation:{title:"Current Location",placeholder:"Current Location"},currentLocationTime:{title:"CL Time",placeholder:"CL Time"},nextLocation:{title:"Next Location",placeholder:"Next Location"},distanceRemaining:{title:"Distance Remaining ",placeholder:"Distance Remaining"},etoa:{title:"ETOA ",placeholder:"ETOA"},startDelay:{title:"Start  delay ",placeholder:"Start  delay"},totalDelay:{title:"Total  delay ",placeholder:"Total  delay"},lastHrKms:{title:"Last Hr KMS",placeholder:"Last Hr KMS"},action:{title:"Action",placeholder:"Action",hideSearch:!0,class:"del"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"84vh",count:{icon:"fa fa-map",action:this.handleView.bind(this)}}}}handleView(){this.isGraphView=!this.isGraphView}getTableColumns(){let t=[];return this.routeData.map(e=>{let n={regno:{value:e.v_regno?e.v_regno:"-"},lastSeenTime:{value:e.v_time?this.common.changeDateformat2(e.v_time):"-",action:this.viewlocation.bind(this,e)},routeName:e.name?this.getRouteAconym(e.name,e):"-",startLocation:{value:e.f_name?e.f_name:"-",action:this.viewlocation.bind(this,e)},startTime:{value:e.f_end_time?this.common.changeDateformat2(e.f_end_time):"-",action:this.viewlocation.bind(this,e),class:e.f_delay>0?"red":e.f_delay<0?"green":""},endLocation:{value:e.l_name?e.l_name:"-",action:this.viewlocation.bind(this,e)},lastTime:{value:e.l_end_time?this.common.changeDateformat2(e.l_end_time):"-",action:this.viewlocation.bind(this,e)},currentLocation:{value:e.c_name?e.c_name:"-",action:this.viewlocation.bind(this,e)},currentLocationTime:{value:e.c_start_time?this.common.changeDateformat2(e.c_start_time):"-"},nextLocation:{value:e.n_name?e.n_name:"-",action:this.viewlocation.bind(this,e)},distanceRemaining:{value:e.n_dist_rem?e.n_dist_rem:"-"},etoa:{value:e.etoa_next?this.common.changeDateformat2(e.etoa_next):"-"},startDelay:{value:e.start_delay?e.start_delay:"-"},totalDelay:{value:e.total_delay?e.total_delay:"-",class:e.c_delay>0?"red":e.c_delay<0?"green":""},lastHrKms:{value:e.last_hour_kms?e.last_hour_kms:"-"},action:{value:"",isHTML:!1,action:null,icons:this.actionIcons(e)}};t.push(n)}),t}actionIcons(t){return[{class:" fa fa-route mr-1",action:this.openRouteMapper.bind(this,t)},{class:"fas fa-truck-moving mr-1",action:this.viewRouteTimeTable.bind(this,t)},{class:"fa fa-pencil-square-o",action:this.addShortTarget.bind(this,t)}]}openRouteMapper(t){let e,n,a,o,i;e=new Date,n=t.f_end_time?this.common.dateFormatter(t.f_end_time):new Date(e.setDate(e.getDate()-2)),o=t.c_start_time?this.common.dateFormatter(t.c_start_time):new Date,a=this.common.dateFormatter(n),i=this.common.dateFormatter(o);let r=this.common.dateFormatter(a),s=this.common.dateFormatter(i);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t.v_id,vehicleRegNo:t.v_regno,fromTime:r,toTime:s},this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}viewlocation(t){console.log("route",t),this.common.params={location:{lat:t.v_lat?t.v_lat:0,lng:t.v_long?t.v_long:0,name:"",time:""},title:"Vehicle Location"},this.modalService.open(v.a,{size:"lg",container:"nb-layout",backdrop:"static"})}viewRouteTimeTable(t){this.common.params={routeTime:{vehicleId:t.v_id,routeId:t.route_id,routeTimeId:t.tt_id}},this.modalService.open(pr.a,{size:"lg",container:"nb-layout",backdrop:"static"})}addShortTarget(t){console.log("target",t),this.common.params={vehicleId:t.v_id||t._vehicleid,vehicleRegNo:t.vehicle||t.Vehicle||t.regno||t.v_regno},console.log("params=",this.common.params),this.modalService.open(yt.a,{size:"sm",container:"nb-layout"})}getRouteAconym(t,e){let n=t.substring(0,20),a={value:(t="'"+t+"'")?"<acronym title="+t+">"+n+"</acronym>":"-",action:this.viewlocation.bind(this,e),isHTML:!0};return console.log("route=",t),a}grouping(t){console.log("viewType",t),this.routeGroups=z.groupBy(this.routeData,t),this.routeGroupsKeys=Object.keys(this.routeGroups),this.keyGroups=[],this.routeGroupsKeys.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`})}),this.sortData(t)}sortData(t){let e=[];this.chartColors=[];let n=[],a=[];this.keyGroups.map(t=>{console.log("group",t,"this.routeGroups",this.routeGroups,"group.name=",t.name,"this.routeGroups[group.name]=",this.routeGroups[t.name]),e.push({group:t,length:this.routeGroups[t.name]?this.routeGroups[t.name].length:0})}),this.routeGroupsKeys=[],z.sortBy(e,["length"]).reverse().map(t=>{this.routeGroupsKeys.push(t.group)}),this.routeGroupsKeys.map(t=>{console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.routeGroups=",this.routeGroups,"this.routeGroups[keyGroup.name]=",this.routeGroups[t.name]),this.chartColors.push(t.bgColor),n.push(t.name),a.push(this.routeGroups[t.name].length)});let o=this.common.pieChart(n,a,this.chartColors);this.chartData=o.chartData,this.chartOptions=o.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}filterData(t,e){"All"==t?this.routeData=this.routesData:(this.selectedFilterKey=t,this.routeData=this.routesData.filter(e=>e[this.viewType]==t)),this.table=this.setTable()}changeOptions(t){this.selectedFilterKey="All",this.filterData("All"),"forward"===t?(++this.viewIndex,this.viewIndex>this.viewOtions.length-1&&(this.viewIndex=0)):(--this.viewIndex,this.viewIndex<0&&(this.viewIndex=this.viewOtions.length-1)),this.viewType=this.viewOtions[this.viewIndex].key,this.viewName=this.viewOtions[this.viewIndex].name,this.grouping(this.viewType)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["route-dashboard"]],decls:31,vars:9,consts:[[2,"border","0px"],[1,"row","m-0"],[1,"col-sm-3","pl-0","pr-2",2,"height","90vh","overflow","hidden",3,"hidden"],[1,"row",2,"font-size","16px","margin","0px","text-align","center","padding","8px 0px","background","linear-gradient(45deg,#30ccff 0,#5a9cff 100%)","color","#fff","border-radius","5px","margin-bottom","10px"],[1,"col-sm-2"],[3,"click"],[1,"icon","ion-ios-rewind"],[1,"col-sm-8"],[1,"icon","ion-ios-fastforward"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[1,"status_box",2,"overflow","auto","height","calc(90vh - 250px)","max-height","calc(90vh - 250px)"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[1,"",2,"overflow","hidden",3,"ngClass"],["id","routeDashbord",2,"width","100%",3,"data","settings"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"div",3),r["\u0275\u0275elementStart"](5,"div",4),r["\u0275\u0275elementStart"](6,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.changeOptions("reverse")})),r["\u0275\u0275element"](7,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",7),r["\u0275\u0275elementStart"](9,"span"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"span",5),r["\u0275\u0275listener"]("click",(function(){return e.changeOptions("forward")})),r["\u0275\u0275element"](13,"i",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div"),r["\u0275\u0275element"](15,"chart",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",10),r["\u0275\u0275elementStart"](17,"nb-card"),r["\u0275\u0275elementStart"](18,"nb-card-body",11),r["\u0275\u0275listener"]("click",(function(){return e.allData()})),r["\u0275\u0275elementStart"](19,"div",12),r["\u0275\u0275element"](20,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",7),r["\u0275\u0275elementStart"](22,"span"),r["\u0275\u0275text"](23," All Data "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",14),r["\u0275\u0275elementStart"](25,"span"),r["\u0275\u0275text"](26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div"),r["\u0275\u0275template"](28,br,9,7,"nb-card",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",16),r["\u0275\u0275element"](30,"smart-table",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",e.isGraphView),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](e.viewName),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("data",e.chartData)("options",e.chartOptions),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate"](e.routesData.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.keyGroups),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass",e.isGraphView?"col-sm-12 p-0":"col-sm-9 p-0"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings))},directives:[s.s,s.r,Ft.ChartComponent,c.t,c.r,_.a,c.x],pipes:[c.G],styles:['[_nghost-%COMP%]    .black{color:#000;background:#fff8dc}[_nghost-%COMP%]    .green{background-color:#b5f37c}[_nghost-%COMP%]    .red{background-color:#f37c7c}[_nghost-%COMP%]     .fa-route{color:#000;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-route span{position:absolute;display:none;padding:10px 50px;font-size:11px;left:-36px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-route span:before{content:"Route Mapper";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-route:hover span{display:block}[_nghost-%COMP%]     .fa-truck-moving{color:#ff8091;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-truck-moving span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-truck-moving span:before{content:"Route Time";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-truck-moving span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-truck-moving:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-square-o{color:#0bf714;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-pencil-square-o span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-square-o span:before{content:"Short Target";display:block;position:absolute;top:0;left:0;background-color:#0bf714;border-radius:3px;padding:5px 10px;color:#000;width:100%}[_nghost-%COMP%]     .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0bf714;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:70px}[_nghost-%COMP%]     th:nth-child(3){width:70px}[_nghost-%COMP%]     th:nth-child(4){width:85px}[_nghost-%COMP%]     th:nth-child(5){width:70px}[_nghost-%COMP%]     th:nth-child(6){width:70px}[_nghost-%COMP%]     th:nth-child(7){width:70px}[_nghost-%COMP%]     th:nth-child(8){width:70px}[_nghost-%COMP%]     th:nth-child(9){width:70px}[_nghost-%COMP%]     th:nth-child(10){width:70px}[_nghost-%COMP%]     th:nth-child(11){width:70px}[_nghost-%COMP%]     th:nth-child(12){width:44px}[_nghost-%COMP%]     th:nth-child(13){width:70px}[_nghost-%COMP%]     th:nth-child(14){width:60px}[_nghost-%COMP%]     th:nth-child(15){width:60px}[_nghost-%COMP%]     th:nth-child(16){width:44px}[_nghost-%COMP%]     th:nth-child(17){width:70px}']}),t})();function fr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",9),r["\u0275\u0275elementStart"](1,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().saveUserRole()})),r["\u0275\u0275text"](2,"Save"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function xr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",22),r["\u0275\u0275elementStart"](1,"input",23),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](4).checkOrUnCheckAll(n,"page")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](2),r["\u0275\u0275elementStart"](3,"div",24),r["\u0275\u0275elementStart"](4,"div",25),r["\u0275\u0275elementStart"](5,"input",26),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isadd=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"label"),r["\u0275\u0275text"](7,"A"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",25),r["\u0275\u0275elementStart"](9,"input",27),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isedit=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"label"),r["\u0275\u0275text"](11,"E"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",25),r["\u0275\u0275elementStart"](13,"input",28),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isdeleted=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"D"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("name","page-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.title," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.has_add),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isadd),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",!t.has_edit),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isedit),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",!t.has_delete),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isdeleted)}}function vr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"div",18),r["\u0275\u0275elementStart"](2,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](3).checkOrUnCheckAll(n,"group")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3),r["\u0275\u0275elementStart"](4,"span",19),r["\u0275\u0275text"](5,"All Functionality"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"input",20),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isAll=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"]().index;return r["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(n,a,n.isAll)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,xr,16,10,"div",21),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","group-box")("name","group-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.isAll),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.pages)}}function Cr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275elementStart"](2,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).checkOrUnCheckAll(n,"module")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"span",15),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"uppercase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,vr,8,6,"div",16),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","module-box")("name","section-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](5,5,t.name)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.groups)}}function yr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",11),r["\u0275\u0275template"](1,Cr,7,7,"div",12),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.formattedData)}}function _r(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",22),r["\u0275\u0275elementStart"](1,"input",30),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](4).checkOrUnCheckAll(n,"page")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](2),r["\u0275\u0275elementStart"](3,"div",24),r["\u0275\u0275elementStart"](4,"div",25),r["\u0275\u0275elementStart"](5,"input",26),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isadd=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"label"),r["\u0275\u0275text"](7,"A"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",25),r["\u0275\u0275elementStart"](9,"input",27),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isedit=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"label"),r["\u0275\u0275text"](11,"E"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",25),r["\u0275\u0275elementStart"](13,"input",28),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isdeleted=n}))("click",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return r["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",n)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"label"),r["\u0275\u0275text"](15,"D"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("name","page-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.title," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",!t.has_add),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isadd),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",!t.has_edit),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isedit),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("hidden",!t.has_delete),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.isdeleted)}}function Sr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"div",18),r["\u0275\u0275elementStart"](2,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](3).checkOrUnCheckAll(n,"group")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3),r["\u0275\u0275elementStart"](4,"span",19),r["\u0275\u0275text"](5,"All Functionality"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"input",20),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isAll=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"]().index;return r["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(n,a,n.isAll)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,_r,16,10,"div",21),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","group-box")("name","group-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.name," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.isAll),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.pages)}}function Mr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275elementStart"](2,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(n){return r["\u0275\u0275restoreView"](t),e.$implicit.isSelected=n}))("change",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).checkOrUnCheckAll(n,"module")})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"span",15),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"uppercase"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,Sr,8,6,"div",16),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","module-box")("name","section-"+n)("ngModel",t.isSelected),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](5,5,t.name)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.groups)}}function wr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275elementStart"](1,"h4"),r["\u0275\u0275text"](2,"Mobile App"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,Mr,7,7,"div",12),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",t.formattedDataApp)}}const Or=function(){return["name","mobileno"]};let Pr=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.user=a,this.getUsersList=[],this.getAllPagesList=[],this.formattedData=[],this.formattedDataApp=[],this.dashBoardPages=[],this.appPages=[],this.selectedUser={details:null,oldPreferences:[]},this.istaskOpertion=!1,this.common.isComponentActive=!1,this.common.refresh=this.refresh.bind(this),this.getAllUserList()}ngOnInit(){}refresh(){this.common.isComponentActive=!1,this.getAllUserList(),document.getElementById("name").value="",this.formattedData=[],this.formattedDataApp=[]}canDeactivate(){return console.log("activity Start",this.common.isComponentActive),this.common.isComponentActive?(this.common.params={title:"Confirmation ",description:"<b>&nbsp;Are Sure To Leave This Page<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.isComponentActive=!1,console.log("no, you wont navigate anywhere"))}),!1):(console.log("you are going away, goodby"),!0)}getAllUserList(){this.common.loading++,this.api.get("Suggestion/getAllFoAdminUsersWrtFo?").subscribe(t=>{this.common.loading--,this.getUsersList=t.data,console.log("api Data:",this.getUsersList)},t=>{this.common.loading--,console.log("Error: ",t)})}getUserDetails(t){this.getAllPagesList=[],this.formattedData=[],this.dashBoardPages=[],this.appPages=[],this.selectedUser.details=t;const e={userId:t.id,userType:3,iswallet:localStorage.getItem("iswallet")||"0"};this.common.loading++,this.api.post("UserRoles/getAllPages",e).subscribe(t=>{this.common.loading--,this.getAllPagesList=t.data,this.selectedUser.oldPreferences=t.data,this.getAllPagesList.map(t=>{console.log("dt",t),"Dashboard"==t.type?this.dashBoardPages.push(t):"App"==t.type&&this.appPages.push(t)}),console.log("dashboardPages",this.dashBoardPages),console.log("app pages",this.appPages),this.managedata(),this.manageAppData()},t=>{this.common.loading--,console.log("Error: ",t)})}managedata(){this.formattedData=[];let t=z.groupBy(this.dashBoardPages,"module");console.log(t),this.formattedData=Object.keys(t).map(e=>({name:e,groups:t[e],isSelected:!1,isOp:!1})),this.formattedData.map(t=>{let e=!0,n=z.groupBy(t.groups,"group_name");console.log(n),console.log(Object.keys(n)),t.groups=Object.keys(n).map(t=>{let a=!0,o=n[t].map(t=>(t.isSelected=!!t.userid,t.isadd=!!t.isadd,t.isedit=!!t.isedit,t.isdeleted=!!t.isdeleted,t.isOp=!1,a&&(a=t.isSelected),t));return e&&(e=a),{name:t,pages:o,isSelected:a}}),t.isSelected=e}),this.formattedData=z.sortBy(this.formattedData,["name"],["asc"]).map(t=>(t.groups=z.sortBy(t.groups,["name"],["asc"]).map(t=>(t.pages=z.sortBy(t.pages,["title"],["asc"]),t)),t))}manageAppData(){this.formattedDataApp=[];let t=z.groupBy(this.appPages,"module");console.log(t),this.formattedDataApp=Object.keys(t).map(e=>({name:e,groups:t[e],isSelected:!1,isOp:!1})),this.formattedDataApp.map(t=>{let e=!0,n=z.groupBy(t.groups,"group_name");console.log(n),console.log(Object.keys(n)),t.groups=Object.keys(n).map(t=>{let a=!0,o=n[t].map(t=>(t.isSelected=!!t.userid,t.isadd=!!t.isadd,t.isedit=!!t.isedit,t.isdeleted=!!t.isdeleted,t.isOp=!1,a&&(a=t.isSelected),t));return e&&(e=a),{name:t,pages:o,isSelected:a}}),t.isSelected=e}),this.formattedDataApp=z.sortBy(this.formattedDataApp,["name"],["asc"]).map(t=>(t.groups=z.sortBy(t.groups,["name"],["asc"]).map(t=>(t.pages=z.sortBy(t.pages,["title"],["asc"]),t)),t))}checkOrUnCheckAll(t,e){this.common.isComponentActive=!0,console.log("component is",this.common.isComponentActive),"group"===e?(console.log("details.isSelected:",t.isSelected),t.pages.map(e=>{console.log("details.isSelected:",t.isSelected),e.isSelected=t.isSelected})):"module"===e&&t.groups.map(e=>{e.isSelected=t.isSelected,e.pages.map(e=>e.isSelected=t.isSelected)}),t.isSelected||"page"!=e||(t.isSelected=t.isSelected,t.isadd=!1,t.isedit=!1,t.isdeleted=!1,t.isOp=!0)}checkOrUnCheckfunctionality(t,e,n){if(console.log(t,e,n),n)for(let a=0;a<t.pages.length;a++)console.log(t.pages[a]),t.pages[a].isSelected=!0,t.pages[a].isadd=!0,t.pages[a].isedit=!0,t.pages[a].isdeleted=!0,t.pages[a].isOp=!0;else for(let a=0;a<t.pages.length;a++)t.pages[a].isSelected=!1,t.pages[a].isadd=!1,t.pages[a].isedit=!1,t.pages[a].isdeleted=!1,t.pages[a].isOp=!1}changePagePermission(t,e,n){if(this.istaskOpertion=!0,this.istaskOpertion)return t.isOp=!0}saveUserRole(){const t={pages:this.findSelectedPages(),userId:this.selectedUser.details.id,userType:3};console.log("Param:",t),this.common.loading++,this.api.post("UserRoles/setPagesWrtUser",t).subscribe(t=>{this.common.loading--,console.log("Res: ",t),this.common.showToast(t.msg),this.refresh()},t=>{this.common.loading--,console.log("Error: ",t)})}findSelectedPages(){let t=[];return console.log("formattedData: ",this.formattedData),this.formattedData.map(e=>{e.groups.map(e=>{e.pages.map(e=>{t.push(e.isSelected?{id:e.id,status:1,isadd:e.isadd,isedit:e.isedit,isdeleted:e.isdeleted,isOp:e.isOp}:{id:e.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:e.isOp})})})}),this.formattedDataApp.map(e=>{e.groups.map(e=>{e.pages.map(e=>{t.push(e.isSelected?{id:e.id,status:1,isadd:e.isadd,isedit:e.isedit,isdeleted:e.isdeleted,isOp:e.isOp}:{id:e.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:e.isOp})})})}),t}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](Ea.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fo-user-role"]],decls:15,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[2,"min-height","580px"],[1,"search","mt-2"],["seperator","-","placeholder","Employee","inputId","name",3,"data","display","preSelected","onSelected"],["class","col text-right mt-4",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[1,"col","text-right","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"container"],[4,"ngFor","ngForOf"],[1,"module-container"],["type","checkbox",3,"ngClass","name","ngModel","ngModelChange","change"],[1,"module-name"],["class","group-container",4,"ngFor","ngForOf"],[1,"group-container"],[1,"group-head"],[2,"font-size","14px","margin-left","40px"],["type","checkbox",1,"group-box",3,"ngModel","ngModelChange","change"],["class","col-2 page-container",4,"ngFor","ngForOf"],[1,"col-2","page-container"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","change"],[1,"row","permission-type",3,"hidden"],[1,"col-4",2,"padding","0px!important",3,"hidden"],["type","checkbox","name","add",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","edit",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","delete",1,"page-box-type",3,"ngModel","ngModelChange","click"],[1,"container","mt-4"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Fo User Role"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body",3),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"label"),r["\u0275\u0275text"](10," Select Employee Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"auto-suggestion",5),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getUserDetails(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,fr,3,0,"div",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,yr,2,1,"div",7),r["\u0275\u0275template"](14,wr,4,1,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("data",e.getUsersList)("display",r["\u0275\u0275pureFunction0"](6,Or))("preSelected",null),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.selectedUser.details),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.formattedData.length>0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.formattedDataApp.length>0))},directives:[s.s,s.v,s.r,we.a,c.u,c.t,tt.a,c.r,tt.r,tt.u],pipes:[c.I],styles:[".row.col-2[_ngcontent-%COMP%]{margin:2px}.search[_ngcontent-%COMP%]{width:180px;margin-left:20px}.container[_ngcontent-%COMP%]{color:#000;border:2px solid grey}.module-container[_ngcontent-%COMP%]{background:#ffd7d7;padding:5px 16px;font-weight:700;text-transform:capitalize;font-size:22px;margin-top:10px}.module-name[_ngcontent-%COMP%]{color:#01203c}.group-container[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:500;padding:5px 30px;font-size:18px;color:initial}.group-head[_ngcontent-%COMP%]{color:#161617;background:#d0e4f5;padding:4px}.page-container[_ngcontent-%COMP%]{font-size:14px!important;color:#00008b;margin-left:25px;padding:0;display:inline-table}input.group-box[_ngcontent-%COMP%], input.module-box[_ngcontent-%COMP%], input.page-box[_ngcontent-%COMP%]{width:16px;height:16px!important;cursor:pointer}.permission-type[_ngcontent-%COMP%]{margin:2px;border:1px solid;width:94%}.permission-type.col-4[_ngcontent-%COMP%]{padding:0;margin:0}.permission-type[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-right:10px}input.page-box-type[_ngcontent-%COMP%]{width:12px;height:12px!important;margin-left:8px;cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();function Er(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().period=e}))("ngModelChange",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().refresh()})),r["\u0275\u0275elementStart"](2,"option",18),r["\u0275\u0275text"](3,"Day"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"option",19),r["\u0275\u0275text"](5,"Week"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",20),r["\u0275\u0275text"](7,"Month"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.period)}}function kr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().weekMonthNumber=e}))("ngModelChange",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]();return e.getweeklyMothlyTrend(),e.getTrendsVehicleSite()})),r["\u0275\u0275elementStart"](2,"option",21),r["\u0275\u0275text"](3,"4"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"option",22),r["\u0275\u0275text"](5,"5"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",23),r["\u0275\u0275text"](7,"6"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"option",24),r["\u0275\u0275text"](9,"7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",25),r["\u0275\u0275text"](11,"8"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",26),r["\u0275\u0275text"](13,"9"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"option",27),r["\u0275\u0275text"](15,"10"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"option",6),r["\u0275\u0275text"](17,"11"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",28),r["\u0275\u0275text"](19,"12"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"option",29),r["\u0275\u0275text"](21,"13"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"option",30),r["\u0275\u0275text"](23,"14"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"option",31),r["\u0275\u0275text"](25,"15"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"option",32),r["\u0275\u0275text"](27,"16"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.weekMonthNumber)}}function Tr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().weekMonthNumber=e}))("ngModelChange",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]();return e.getweeklyMothlyTrend(),e.getTrendsVehicleSite()})),r["\u0275\u0275elementStart"](2,"option",20),r["\u0275\u0275text"](3,"3"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"option",21),r["\u0275\u0275text"](5,"4"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"option",22),r["\u0275\u0275text"](7,"5"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"option",23),r["\u0275\u0275text"](9,"6"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",24),r["\u0275\u0275text"](11,"7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",25),r["\u0275\u0275text"](13,"8"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",t.weekMonthNumber)}}function Dr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275elementStart"](1,"uj-date-time-picker",34),r["\u0275\u0275listener"]("onChanged",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().startDate=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1)}}function Ir(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275elementStart"](1,"uj-date-time-picker",35),r["\u0275\u0275listener"]("onChanged",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().endDate=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1)}}function Fr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275elementStart"](1,"button",36),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().refresh()})),r["\u0275\u0275text"](2,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Ar(t,e){if(1&t&&r["\u0275\u0275element"](0,"chart",39),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.dataSet)("options",t.chart.options)}}function Vr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",37),r["\u0275\u0275template"](1,Ar,1,3,"chart",38),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.chart.type)}}function Lr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td",44),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"td",44),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td",44),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.vehicle_id),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](5,4,t.onward,"1.2-2")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.hlt_count),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](10,7,t.total_halt,"1.2-2"))}}function zr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",40),r["\u0275\u0275elementStart"](1,"div",41),r["\u0275\u0275elementStart"](2,"table",42),r["\u0275\u0275elementStart"](3,"thead",43),r["\u0275\u0275elementStart"](4,"tr"),r["\u0275\u0275elementStart"](5,"th"),r["\u0275\u0275text"](6,"Regno"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"th",44),r["\u0275\u0275text"](8,"Avg Onward/Day(Hr)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"th",44),r["\u0275\u0275text"](10,"Halt Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"th",44),r["\u0275\u0275text"](12,"Average Halt(Hr)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"tbody"),r["\u0275\u0275template"](14,Lr,11,10,"tr",45),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngForOf",t.trendsVehicleData)}}function jr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Average loading Hours(Hr)"),r["\u0275\u0275elementEnd"]())}function Rr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Average Unloading Hours(Hr)"),r["\u0275\u0275elementEnd"]())}function Hr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Loading Count "),r["\u0275\u0275elementEnd"]())}function Nr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"UnLoading Count"),r["\u0275\u0275elementEnd"]())}function Ur(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td",44),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"number"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](2,1,t.loading_hrs,"1.2-2")," ")}}function Gr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td",44),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"number"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](2,1,t.unloading_hrs,"1.2-2")," ")}}function Br(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",54),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit,n=r["\u0275\u0275nextContext"](2);return e.ldng_count>0?n.getPendingStatus(e,"vehicle"):""})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.ldng_count,"")}}function $r(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",55),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit,n=r["\u0275\u0275nextContext"](2);return e.unldng_count>0?n.getPendingStatus(e,"vehicle"):""})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.unldng_count,"")}}function Wr(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td",51),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).locationOnMap(e)})),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,Ur,3,4,"td",47),r["\u0275\u0275template"](4,Gr,3,4,"td",47),r["\u0275\u0275template"](5,Br,2,1,"td",52),r["\u0275\u0275template"](6,$r,2,1,"td",53),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]().$implicit,e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",t.sitename,""),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==e.trendType)}}function Kr(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,Wr,7,5,"tr",49),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==n.trendType&&0!=t.ldng_count&&0!=t.loading_hrs||"21"==n.trendType&&0!=t.unloading_hrs&&0!=t.unldng_count)}}function qr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th"),r["\u0275\u0275text"](1,"Regno"),r["\u0275\u0275elementEnd"]())}function Jr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Average Loading Hours(Hr)"),r["\u0275\u0275elementEnd"]())}function Yr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Average Unloading Hours(Hr) "),r["\u0275\u0275elementEnd"]())}function Zr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"Loading Count "),r["\u0275\u0275elementEnd"]())}function Qr(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",44),r["\u0275\u0275text"](1,"UnLoading Count"),r["\u0275\u0275elementEnd"]())}function Xr(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.vehicle_id)}}function ts(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td",44),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"number"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](2,1,t.loading_hrs,"1.2-2"),"")}}function es(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"td",44),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"number"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](2,1,t.unloading_hrs,"1.2-2")," ")}}function ns(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",54),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit,n=r["\u0275\u0275nextContext"](2);return e.ldng_count>0?n.getPendingStatus(e,"site"):""})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.ldng_count,"")}}function as(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"td",57),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"](2).$implicit,n=r["\u0275\u0275nextContext"](2);return e.unldng_count>0?n.getPendingStatus(e,"site"):""})),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.unldng_count," ")}}function os(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275template"](1,Xr,2,1,"td",49),r["\u0275\u0275template"](2,ts,3,4,"td",50),r["\u0275\u0275template"](3,es,3,4,"td",50),r["\u0275\u0275template"](4,ns,2,1,"td",52),r["\u0275\u0275template"](5,as,2,1,"td",56),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType||"21"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType)}}function is(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,os,6,5,"tr",49),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==n.trendType&&0!=t.ldng_count||"21"==n.trendType&&0!=t.unldng_count)}}function rs(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",40),r["\u0275\u0275elementStart"](1,"div",46),r["\u0275\u0275elementStart"](2,"table",42),r["\u0275\u0275elementStart"](3,"thead",43),r["\u0275\u0275elementStart"](4,"tr"),r["\u0275\u0275elementStart"](5,"th"),r["\u0275\u0275text"](6,"Site Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,jr,2,0,"th",47),r["\u0275\u0275template"](8,Rr,2,0,"th",47),r["\u0275\u0275template"](9,Hr,2,0,"th",47),r["\u0275\u0275template"](10,Nr,2,0,"th",47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"tbody"),r["\u0275\u0275template"](12,Kr,2,1,"ng-container",45),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",48),r["\u0275\u0275elementStart"](14,"table",42),r["\u0275\u0275elementStart"](15,"thead",43),r["\u0275\u0275elementStart"](16,"tr"),r["\u0275\u0275template"](17,qr,2,0,"th",49),r["\u0275\u0275template"](18,Jr,2,0,"th",50),r["\u0275\u0275template"](19,Yr,2,0,"th",50),r["\u0275\u0275template"](20,Zr,2,0,"th",50),r["\u0275\u0275template"](21,Qr,2,0,"th",50),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"tbody"),r["\u0275\u0275template"](23,is,2,1,"ng-container",45),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.trendsVehicleSiteData),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf","11"==t.trendType||"21"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==t.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","21"==t.trendType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.trendsVehicleData)}}let ss=(()=>{class t{constructor(t,e,n,a,o){this.common=t,this.api=e,this.datepipe=n,this.modalService=a,this.mapService=o,this.scale="",this.trendType="11",this.period="1",this.weekMonthNumber="4",this.showPeriod=!0,this.trends=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-6)),this.loadingSite=[],this.vehicleCount=0,this.dateDay=[],this.trendsVehicleData=[],this.onward=[],this.trendsVehicleSiteData=[],this.siteUnloading=[],this.graphString0="Loading Hours",this.graphString1="Loading Count",this.latLngSite=[],this.xAxesLabels={1:"Days of",2:"Weeks of",3:"Month of"},this.chart={data:{line:[],bar:[]},type:"",dataSet:{labels:[],datasets:[]},yaxisname:"Month",options:null},this.common.refresh=this.refresh.bind(this),this.refresh()}ngOnInit(){}refresh(){this.getTrends(),this.getTrendsVehicleSite()}getTrends(){let t={startDate:"1"==this.period?this.common.dateFormatter1(this.startDate):"",endDate:"1"==this.period?this.common.dateFormatter1(this.endDate):"",purpose:this.period,value:this.weekMonthNumber};this.common.loading++,this.api.post("Trends/getTrendsWrtFo",t).subscribe(t=>{this.common.loading--,this.trends=t.data.result||[],0!=this.trends.length&&null!=this.trends||this.common.showError("Chart is not available"),this.vehicleCount=t.data.veh_count,this.dateDay=this.trends.map(t=>this.datepipe.transform(t.date_day,"dd-MMM")),this.getCategoryDayMonthWeekWise()},t=>{this.common.loading--,console.log("Api Error:",t),this.common.showError()})}getCategoryDayMonthWeekWise(t){t&&(this.trendType=t),this.chart.data.line=[],this.chart.data.bar=[];let e={0:["Onward Percentage",""],11:["Avg Loading Hours","Loading Count"],21:["Avg Unloading Hours","Unloading Count"],31:["Avg Onward Km",""]},n=e[this.trendType][0],a=e[this.trendType][0],o=e[this.trendType][1],i=e[this.trendType][1],r=this.xAxesLabels[this.period],s="11"==this.trendType?"ldng_count":"21"==this.trendType?"unldng_count":"onward";this.trendsVehicleSiteData=z.reverse(z.sortBy(this.trendsVehicleSiteData,[s])),this.trendsVehicleData=z.reverse(z.sortBy(this.trendsVehicleData,[s])),this.trends.forEach(t=>{if("11"==this.trendType||"21"==this.trendType)this.chart.data.line.push("11"==this.trendType?t.loading_hrs/t.loading_count||0:t.unloading_hrs/t.unloading_count||0),this.chart.data.bar.push("11"==this.trendType?t.loading_count:t.unloading_count);else if("0"==this.trendType){let e="number"==typeof t.onward?t.onward:parseFloat(t.onward);this.chart.data.line.push(e)}else"31"==this.trendType&&this.chart.data.line.push(t.Onward_kmpd/this.vehicleCount)}),this.setDataset("11"==this.trendType||"21"==this.trendType,n,r,i,a,o)}getTick(t,e,n=.1,a=.1){let o,i,r,s=1/0,l=0;return t.forEach(t=>{s=Math.min(t,s),l=Math.max(t,l)}),i=(l-s)*n,r=(l-s)*a,s=s-r<=0?0:s-r,l+=i,o=Math.round((l-s)/e),{suggestedMin:s,suggestedMax:o*e+s,stepSize:o}}setDataset(t,e,n,a,o,i){let r={labels:this.dateDay,datasets:[]};r.datasets.push({type:"line",label:t?o:"",borderColor:t?"#0a7070":"blue",backgroundColor:t?"#0a7070":"blue",fill:!1,data:this.chart.data.line.map(t=>t.toFixed(2)),pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",yAxisID:"y-axis-1",yAxisName:"Count"}),t&&r.datasets.push({type:"bar",label:i,borderColor:"#c7eded",backgroundColor:"#c7eded",pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",fill:!1,data:this.chart.data.bar,yAxisID:"y-axis-2"}),this.chart={data:{line:[],bar:[]},type:t?"bar":"line",dataSet:r,yaxisname:"Average Count",options:this.setChartOptions(t,e,n,a)}}setChartOptions(t,e,n,a){let o={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:"31"!=this.trendType&&"0"!=this.trendType},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,labelString:n,fontSize:17}}]}};return o.scales.yAxes.push({ticks:this.getTick(this.chart.data.line,5),scaleLabel:{display:!0,labelString:e,fontSize:17},type:"linear",display:!0,position:"left",id:"y-axis-1"}),t&&o.scales.yAxes.push({ticks:this.getTick(this.chart.data.bar,5),scaleLabel:{display:!0,labelString:a,fontSize:17},type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),o}getTrendsVehicleSite(){let t;this.trendsVehicleData=[],this.trendsVehicleSiteData=[],this.trends=[],this.dateDay=[],t="1"==this.period?{startDate:this.common.dateFormatter1(this.startDate),endDate:this.common.dateFormatter1(this.endDate),purpose:this.period,value:this.weekMonthNumber}:{purpose:this.period,value:this.weekMonthNumber},this.common.loading++,this.api.post("Trends/getTrendsWrtVehiclesAndSites",t).subscribe(t=>{this.common.loading--,this.trendsVehicleData=t.data.vehData||[],0!=this.trendsVehicleData.length&&null!=this.trendsVehicleData||this.common.showError("Vehicle Data is not availabe"),console.log("--------------------",this.trendsVehicleData),this.trendsVehicleSiteData=t.data.siteData||[],0!=this.trendsVehicleSiteData.length&&null!=this.trendsVehicleSiteData||this.common.showError("Site Data is not availabe"),this.loadingSite=t.data.siteData.lodingArray,this.getTrendsVehicle(),this.getTrendsSite()},t=>{this.common.loading--,this.common.showError(),console.log("Error: ",t)})}getTrendsVehicle(){this.trendsVehicleData.map(t=>{t.loading_hrs=t.loading_hrs/t.ldng_count,t.unloading_hrs=t.unloading_hrs/t.unldng_count,0!=t.total_halt||0!=t.hlt_count?t.total_halt=t.total_halt/t.hlt_count:(t.total_halt=0,t.hlt_count=0)})}getTrendsSite(){this.trendsVehicleSiteData.map(t=>{t.loading_hrs=t.loading_hrs/t.ldng_count,t.unloading_hrs=t.unloading_hrs/t.unldng_count}),this.siteUnloading=[],z.sortBy(this.trendsVehicleSiteData,["unloading_hrs"]).reverse().map(t=>{this.siteUnloading.push(t)})}getweeklyMothlyTrend(){this.dateDay=[],this.trends=[],this.vehicleCount=null;let t={purpose:this.period,value:this.weekMonthNumber};this.common.loading++,this.api.post("Trends/getTrendsWrtFo",t).subscribe(t=>{this.common.loading--,this.trends=t.data.result||[],this.vehicleCount=t.data.veh_count,this.trends.forEach(t=>{this.dateDay.push(this.datepipe.transform(t.date_day,"dd-MMM"))}),this.getCategoryDayMonthWeekWise()},t=>{this.common.loading--,this.common.showError()})}locationOnMap(t){t.lat?(this.common.params={location:{lat:t.lat,lng:t.long,name:"",time:""},title:"Location",fence:t.latLngs},this.modalService.open(v.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}getPendingStatus(t,e){console.log("data",t);let n=[];n="vehicle"===e?["RegNo.","Count Event","Avg Hrs."]:["Site","Count Event","Avg Hrs."];let a=[],o=[],i=[];"11"==this.trendType?(a=t.lodingArray,Object.keys(a).map(t=>{let e=[];e.push(t,a[t].count,(a[t].avgHours/a[t].count).toFixed(2)),i.push(e)}),i.sort((t,e)=>e[1]==t[1]?e[2]-t[2]:e[1]-t[1])):"21"==this.trendType&&(a=t.unloadingArray,Object.keys(a).map(t=>{let e=[];e.push(t,a[t].count,(a[t].avgHours/a[t].count).toFixed(2)),i.push(e)}),i.sort((t,e)=>e[1]==t[1]?e[2]-t[2]:e[1]-t[1])),o=i,this.common.params={title:"SiteWise Vehicle List :"+(t.sitename?t.sitename:t.vehicle_id),headings:n,data:o},this.modalService.open(Re.a,{size:"lg",container:"nb-layout"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](ft.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trends-fo"]],decls:29,vars:11,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange"],["value","11"],["value","21"],["value","0"],["value","31"],["class","col-sm-3",4,"ngIf"],["class","col-sm-2",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"row",2,"margin-top","-23px"],["class","col-sm-12",4,"ngIf"],[1,"row",2,"margin-top","-18px"],[1,"col","text-right"],["class","row ","style","margin-top: 10px",4,"ngIf"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-12"],["style","margin-right:5px;height:250px",3,"type","data","options",4,"ngIf"],[2,"margin-right","5px","height","250px",3,"type","data","options"],[1,"row",2,"margin-top","10px"],[1,"col-12"],[1,"table","table-border"],[1,"thead"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"col-sm-6",2,"overflow","auto"],["style","text-align: center",4,"ngIf"],[1,"col-sm-6","pr-0"],[4,"ngIf"],["style","text-align:center",4,"ngIf"],[2,"color","#00695C",3,"click"],["style","color:#00695C;text-align: center; cursor: pointer;",3,"click",4,"ngIf"],["style","color:#E91E63; cursor: pointer;",3,"click",4,"ngIf"],[2,"color","#00695C","text-align","center","cursor","pointer",3,"click"],[2,"color","#E91E63","cursor","pointer",3,"click"],["style","color:#E91E63;cursor: pointer; text-align: center",3,"click",4,"ngIf"],[2,"color","#E91E63","cursor","pointer","text-align","center",3,"click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.trendType=t}))("ngModelChange",(function(){return e.getCategoryDayMonthWeekWise(e.trendType)})),r["\u0275\u0275elementStart"](6,"option",6),r["\u0275\u0275text"](7,"Loading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"option",7),r["\u0275\u0275text"](9,"Unloading"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"option",8),r["\u0275\u0275text"](11,"Onward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"option",9),r["\u0275\u0275text"](13,"Onward - KMPD"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,Er,8,1,"div",10),r["\u0275\u0275template"](15,kr,28,1,"div",10),r["\u0275\u0275template"](16,Tr,14,1,"div",10),r["\u0275\u0275template"](17,Dr,2,2,"div",11),r["\u0275\u0275template"](18,Ir,2,3,"div",11),r["\u0275\u0275template"](19,Fr,3,0,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"div",12),r["\u0275\u0275elementStart"](21,"div",13),r["\u0275\u0275template"](22,Vr,2,1,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",15),r["\u0275\u0275elementStart"](24,"div",16),r["\u0275\u0275elementStart"](25,"label"),r["\u0275\u0275text"](26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](27,zr,15,1,"div",17),r["\u0275\u0275template"](28,rs,24,11,"div",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.trendType),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",e.showPeriod),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","2"==e.period),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","3"==e.period),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","1"==e.period),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","1"==e.period),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","1"==e.period),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.dateDay.length>0),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("Vehicle Count:",e.vehicleCount,""),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","0"==e.trendType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","11"==e.trendType||"21"==e.trendType))},directives:[s.s,s.r,tt.D,tt.r,tt.u,tt.w,tt.G,c.u,et.a,Ft.ChartComponent,c.t],pipes:[c.g],styles:[".btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}.vertical[_ngcontent-%COMP%]{-webkit-writing-mode:tb-rl;-ms-writing-mode:tb-rl;writing-mode:tb-rl;-webkit-transform:rotate(90deg);transform:rotate(90deg);white-space:nowrap;display:block;bottom:0;width:20px;height:20px}.chartjs-render-monitor[_ngcontent-%COMP%]{max-height:350px}.xScale[_ngcontent-%COMP%]{margin-left:487px;font-size:16px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 462px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),t})();var ls=n("GmXA"),ds=n("Nwm+"),cs=n("k6ZE");function hs(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().openMvcFreightModal("Add",null)})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function ms(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",11),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function ps(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let gs=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.datePipe=n,this.user=a,this.modalService=o,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.viewMvcFreightStaement()}ngOnInit(){}viewMvcFreightStaement(){if(!this.startTime||!this.endTime)return void this.common.showError("Dates cannot be blank.");let t={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};console.log("params",t),++this.common.loading,this.api.post("FrieghtRate/getMVSFreightInvoices",t).subscribe(t=>{if(--this.common.loading,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};"Invoice Date"===n&&(t.type="date"),this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{--this.common.loading,this.common.showError(t),console.log("Error: ",t)})}getTableColumns(){let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.Action={class:"",icons:this.actionIcon(e)},t.push(this.valobj)}),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}actionIcon(t){let e=[];return t._islocked||(e.push({class:"far fa-eye",action:this.lrAssign.bind(this,t)}),this.user.permission.edit&&e.push({class:"far fa-edit",action:this.openMvcFreightModal.bind(this,"Edit",t)}),this.user.permission.delete&&e.push({class:"fas fa-trash-alt",action:this.deleteMvsStatement.bind(this,t)})),t._lrcount>0&&e.push({class:"fas fa-print",action:this.printMVSInvoice.bind(this,t)}),e}lrAssign(t){this.common.handleModalSize("class","modal-lg","1300"),this.common.params={row:t},this.modalService.open(ls.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("Date:",t),t&&this.viewMvcFreightStaement()})}refresh(){this.viewMvcFreightStaement()}openMvcFreightModal(t,e,n){console.log("row:",e),this.common.params={mvsFreightId:!!e&&e._id},this.modalService.open(ds.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{this.viewMvcFreightStaement()})}deleteMvsStatement(t){console.log("row:",t);let e={id:t._id};t._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("FrieghtRate/deleteMVSFreightInvoices",e).subscribe(t=>{this.common.loading--,t.data[0].r_id?(this.common.showToast("Deleted successfully"),this.viewMvcFreightStaement()):this.common.showError(t.data[0].r_msg)},t=>{this.common.loading--,console.log("Error: ",t)}))}))}printMVSInvoice(t){this.common.params={invoice:{id:t._id}},this.modalService.open(cs.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{console.log("Date:",t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["mvs-freight-statement"]],decls:18,vars:8,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["id","mvsStatement",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","mvsStatement",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"MVS Freight Statement"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"button",6),r["\u0275\u0275listener"]("click",(function(){return e.viewMvcFreightStaement()})),r["\u0275\u0275text"](12,"Search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",5),r["\u0275\u0275template"](14,hs,2,0,"button",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div"),r["\u0275\u0275template"](16,ms,1,2,"smart-table",8),r["\u0275\u0275template"](17,ps,2,0,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0==e.data.length))},directives:[s.s,s.v,s.r,et.a,c.u,_.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td i{width:18px;text-align:center;margin:4px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr{color:#ea3fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:before{content:"Rate";display:block;position:absolute;top:0;left:0;background-color:#ea3fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ea3fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:before{content:"Support Doc";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file:hover span{display:block}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}']}),t})();var bs=n("zKWU");function us(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275text"](1," No Data Available On That Time Period ! "),r["\u0275\u0275elementEnd"]())}function fs(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",3),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let xs=(()=>{class t{constructor(t,e,n){this.common=t,this.api=e,this.modalService=n,this.unMerge=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getUnmergeStateList()}ngOnInit(){}refresh(){this.getUnmergeStateList()}getUnmergeStateList(){this.common.loading++,this.api.get("HaltOperations/getUnmergedLrVehicles?").subscribe(t=>{this.common.loading--,console.log("Res:",t),this.unMerge=t.data||[],this.setTable()},t=>{this.common.loading--,this.common.showError(),console.log("Error:",t)})}setTable(){this.table.data={headings:this.generateHeadings(),columns:this.genearateColumns()}}generateHeadings(){let t={};for(let e in this.unMerge[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t}genearateColumns(){let t=[];return this.unMerge.map(e=>{let n={};for(let t in this.generateHeadings())"Action"==t?n.Action={class:"fas fa-eye",action:this.lrState.bind(this,e)}:n[t]={value:e[t],class:"black"};t.push(n)}),t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}lrState(t){this.common.params={unMergeStateData:{vehicleId:t.vehicle_id,regno:t.regno}},this.modalService.open(bs.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["unmerge-lrstate"]],decls:8,vars:2,consts:[["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Unmerge LR State"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275template"](5,us,2,0,"div",0),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275template"](7,fs,1,2,"smart-table",1),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",0==e.unMerge.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.unMerge.length>0))},directives:[s.s,s.v,s.r,c.u,_.a],styles:[""]}),t})();var vs=n("meIB");function Cs(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",5),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().addSupplierAssociation()})),r["\u0275\u0275text"](1,"Add"),r["\u0275\u0275elementEnd"]()}}function ys(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",6),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let _s=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.user=n,this.modalService=a,this.activeModal=o,this.supplierAssociationData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getvehicleSupplierData()}ngOnInit(){}refresh(){this.getvehicleSupplierData()}getvehicleSupplierData(){this.common.loading++,this.api.get("ManageParty/getVehicleSupplierAssoc?").subscribe(t=>{this.common.loading--,console.log("res:",t),this.supplierAssociationData=t.data||[],this.supplierAssociationData.length?this.setTable():this.resetTable()},t=>{this.common.loading--,console.log(t)})}resetTable(){this.table.data={headings:{},columns:[]}}setTable(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}generateHeadings(){let t={};for(var e in this.supplierAssociationData[0])"_"!=e.charAt(0)&&(t[e]={title:e,placeholder:this.formatTitle(e)});return t}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];return this.supplierAssociationData.map(e=>{let n={};for(let t in this.generateHeadings())n[t]="Action"==t?{value:"",isHTML:!1,action:null,icons:this.actionIcons(e)}:{value:e[t],class:"black",action:""};t.push(n)}),t}actionIcons(t){let e=[];return this.user.permission.edit&&e.push({class:"fa fa-edit mr-3",action:this.editSupplier.bind(this,t)}),this.user.permission.delete&&e.push({class:"fa fa-trash",action:this.deleteSupplier.bind(this,t)}),e}addSupplierAssociation(){this.modalService.open(vs.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getvehicleSupplierData()})}editSupplier(t){this.common.params={vehicleSupplier:{id:t._rowid}},this.modalService.open(vs.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getvehicleSupplierData()})}deleteSupplier(t){console.log("delete",t);let e={rowId:t._rowid};t._rowid&&(this.common.params={title:"Delete Vehicle Supplier ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("ManageParty/deleteVehicleSupplierAssoc",e).subscribe(t=>{this.common.loading--,console.log("res",t),this.common.showToast(t.msg),this.getvehicleSupplierData()},t=>{this.common.loading--,console.log("Error: ",t)}))}))}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-supplier-association"]],decls:10,vars:2,consts:[[1,"row"],[1,"col-9"],[1,"col-3"],["class","btn btn-primary","name","add",3,"click",4,"ngIf"],["id","vehcileSupplier",3,"data","settings",4,"ngIf"],["name","add",1,"btn","btn-primary",3,"click"],["id","vehcileSupplier",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Supplier Association"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275template"](7,Cs,2,0,"button",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"nb-card-body"),r["\u0275\u0275template"](9,ys,1,2,"smart-table",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.supplierAssociationData&&e.supplierAssociationData.length))},directives:[s.s,s.v,c.u,s.r,_.a],styles:['[_nghost-%COMP%]     .fa-trash{color:red;font-size:16px;cursor:pointer}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:#000;font-size:16px;cursor:pointer}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t})();var Ss=n("VTeO");function Ms(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",9),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().addEditGpsApiUrl()})),r["\u0275\u0275text"](1,"Add Gps Api Url"),r["\u0275\u0275elementEnd"]()}}function ws(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",10),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Os=(()=>{class t{constructor(t,e,n,a){this.modalService=t,this.common=e,this.user=n,this.api=a,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.mvGpsApiDetails=[],this.getMvGpsDetails()}ngOnInit(){}getMvGpsDetails(){this.common.loading++,this.api.get("GpsData/getMvGpsDetailsWrtFo").subscribe(t=>{console.log("Res:",t),this.common.loading--,this.clearAllTableData(),t.data?(this.mvGpsApiDetails=t.data,this.setTable()):this.common.showError("Data Not Found")},t=>{this.common.loading--,this.common.showError(t)})}setTable(){this.table.data={headings:this.generateHeadings(this.mvGpsApiDetails[0]),columns:this.getColumns(this.mvGpsApiDetails,this.mvGpsApiDetails[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]="Action"==n?{value:"",action:null,icons:this.actionIcons(t)}:{value:t[n],class:"black",action:""};n.push(a)}),n}actionIcons(t){let e=[];return this.user.permission.edit&&e.push({class:"far fa-edit",action:this.addEditGpsApiUrl.bind(this,t)}),this.user.permission.delete&&e.push({class:"fas fa-trash",action:this.deleteGpsApiUrl.bind(this,t._id)}),e}addEditGpsApiUrl(t){this.common.params=null,t&&(this.common.params=t),this.modalService.open(Ss.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.response&&this.getMvGpsDetails()})}deleteGpsApiUrl(t){let e={rowId:t};this.common.loading++,this.api.post("GpsData/deleteMvGpsDetails",e).subscribe(t=>{--this.common.loading,this.common.showToast(t.msg),this.getMvGpsDetails()},t=>{--this.common.loading,console.error(" Api Error:",t)})}clearAllTableData(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["mv-gps-apis"]],decls:11,vars:2,consts:[[2,"border","0px","height","100%"],[1,"gps-api"],[1,"row"],[1,"col-2"],[2,"margin-top","12px"],[1,"col-10"],["type","button","style","margin-left: 752px;","class","btn btn-primary",3,"click",4,"ngIf"],[1,"mv-gps-api"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["type","button",1,"btn","btn-primary",2,"margin-left","752px",3,"click"],["id","PaymentRequest",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5",4),r["\u0275\u0275text"](5,"MV GPS APIS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",5),r["\u0275\u0275template"](7,Ms,2,0,"button",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"nb-card-body"),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275template"](10,ws,1,2,"smart-table",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.user.permission.add),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.mvGpsApiDetails&&e.mvGpsApiDetails.length))},directives:[s.s,s.v,c.u,s.r,_.a],styles:["[_nghost-%COMP%]    .fa-trash{color:red}"]}),t})();function Ps(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",7),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Es=(()=>{class t{constructor(t,e,n){this.common=t,this.api=e,this.modalService=n,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.gpsApiHistory=[],this.getGpsApiHistory(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getGpsApiHistory()}getGpsApiHistory(){this.common.loading++,this.api.get("GpsData/getGpsApiHistory").subscribe(t=>{console.log("Res:",t),this.common.loading--,this.resetTable(),t.data?(this.gpsApiHistory=t.data||[],this.setTable()):this.common.showError("Data Not Found")},t=>{this.common.loading--,this.common.showError(t)})}setTable(){this.table.data={headings:this.generateHeadings(this.gpsApiHistory[0]),columns:this.getColumns(this.gpsApiHistory,this.gpsApiHistory[0])}}generateHeadings(t){let e={};for(var n in t)"_"!=n.charAt(0)&&(e[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getColumns(t,e){let n=[];return t.map(t=>{let a={};for(let n in this.generateHeadings(e))a[n]="Action"==n?{value:"",action:null}:{value:t[n],class:"TotalVeh"==n?"blue":"black",action:"TotalVeh"==n?this.vehicleHistory.bind(this,t):""};n.push(a)}),n}resetTable(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}vehicleHistory(t){let e={view:{api:"GpsData/getAllVehicleWrtGpsApi",param:{apiId:t._apiid}},delete:{},title:"Vehicle List"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:e},this.modalService.open(Ko.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["mv-gps-api-history"]],decls:9,vars:1,consts:[[2,"border","0px","height","100%"],[1,"gps-api"],[1,"row"],[1,"col-8"],[2,"margin-top","12px"],[1,"mv-gps-api-history"],["id","apiHistory",3,"data","settings",4,"ngIf"],["id","apiHistory",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h5",4),r["\u0275\u0275text"](5,"MV GPS API History"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275template"](8,Ps,1,2,"smart-table",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.gpsApiHistory&&e.gpsApiHistory.length))},directives:[s.s,s.v,s.r,c.u,_.a],styles:["[_nghost-%COMP%]    .blue{color:#00f}"]}),t})();function ks(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",13),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let Ts=(()=>{class t{constructor(t,e,n,a,o,i){let r;this.datePipe=t,this.api=e,this.common=n,this.dateService=a,this.user=o,this.modalService=i,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.routeid=0,this.routename="",r=new Date,this.endDate=new Date(r),this.startDate=new Date,console.log("start and enddate",this.startDate,this.endDate),this.getRouteTrips(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getRouteTrips()}getRouteTrips(){this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};let t=this.common.dateFormatter(this.startDate),e=this.common.dateFormatter(this.endDate);console.log("start & end",t,e);const n={vehicleId:this.vehicleId,Date:t,routeId:this.routeid};console.log("params",n),this.common.loading++,this.api.post("TripExpenseVoucher/getRouteTrips",n).subscribe(t=>{if(this.common.loading--,console.log("Res:",t.data),this.vehicleTrips=t.data,null!=this.vehicleTrips){console.log("vehicleTrips",this.vehicleTrips);let t=this.vehicleTrips[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,console.log("Err:",t)})}getTableColumns(){let t=[];for(var e=0;e<this.vehicleTrips.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[e]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[e][this.headings[t]],class:"black",action:""},this.valobj.action={value:"",isHTML:!0,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",isHTML:"<h2>test</h2>",action:this.viewRouteTimeTable.bind(this,this.vehicleTrips[e])}]};this.valobj.style={background:this.vehicleTrips[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}viewRouteTimeTable(t){console.log("hello dost"),this.common.params={routeTime:{vehicleId:this.vehicleId,routeId:t.id,routeTimeId:0,routetrip:1}},this.modalService.open(pr.a,{size:"lg",container:"nb-layout",backdrop:"static"})}update(t){console.log("vehicle trip",t),this.common.params={vehicleTrip:t}}searchVehicle(t){this.vehicleId=t.id,this.vehicleRegNo=t.regno}searchRoute(t){this.routeid=t.id,this.routename=t.name}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](_t.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["route-trip"]],decls:21,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],["url","suggestion/getRoutesWrtFo","display","name","placeholder","Search Route",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-2"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Route Trips"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",3),r["\u0275\u0275elementStart"](8,"div",4),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"auto-suggestion",6),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchVehicle(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275elementStart"](12,"div",5),r["\u0275\u0275elementStart"](13,"auto-suggestion",7),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchRoute(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275elementStart"](15,"uj-date-time-picker",9),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",10),r["\u0275\u0275elementStart"](17,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getRouteTrips()})),r["\u0275\u0275text"](18,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,ks,1,2,"smart-table",12),r["\u0275\u0275element"](20,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.vehicleTrips&&e.vehicleTrips.length))},directives:[s.s,s.v,s.r,we.a,et.a,c.u,_.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 235px);height:auto!important}[_nghost-%COMP%]     td i.fa-pencil-square-o{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-pencil-square-o span{position:absolute;display:none;padding:11px 21px;left:-9px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-pencil-square-o span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-question-circle{background-color:#1de9b6;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Report";display:block;position:absolute;top:0;left:0;background-color:#1de9b6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1de9b6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash{background-color:#f44236;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-trash:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash span:before{content:"trash";display:block;position:absolute;top:0;left:0;background-color:#f44236;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f44236;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#ff8091;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-star{background-color:#8280ff;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-star:hover span{display:block}[_nghost-%COMP%]     td i.fa-star span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-star span:before{content:"Events";display:block;position:absolute;top:0;left:0;background-color:#8280ff;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8280ff;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-bar{background-color:#80f54f;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-bar:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-bar span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-bar span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#80f54f;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-bar span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #80f54f;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-handshake-o{background-color:#15986e;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-handshake-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-handshake-o span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-handshake-o span:before{content:"Settlement";display:block;position:absolute;top:0;left:0;background-color:#15986e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #15986e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}']}),t})();function Ds(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",11),r["\u0275\u0275elementStart"](1,"button",12),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getTripSummary()})),r["\u0275\u0275text"](2,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Is(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",13),r["\u0275\u0275element"](1,"chart",14),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("type",t.Config.type)("data",t.Config.data)("options",t.Config.options)}}function Fs(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",15),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let As=(()=>{class t{constructor(t,e,n,a,o,i){this.api=t,this.common=e,this.theme=n,this.user=a,this.datepipe=o,this.modalService=i,this.Hours=[],this.dateDay=[],this.startTime=new Date,this.endTime=new Date,this.lastTrend="",this.showtrend=!1,this.showTables=!1,this.Details=[],this.siteDetails=[],this.vehicleDetails=[],this.kmpdDate=[],this.showPeriod=!0,this.dateStr=[],this.trendType="11",this.siteUnloading=[],this.vehicleUnloading=[],this.onWardDistance=[],this.week_month_number="4",this.period="0",this.url="",this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",this.onWardFlag=!1,this.fromDate="",this.vehicleTrips=[],this.headings=[],this.valobj={},this.lastDurationCategory="",this.element={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.Config={type:"line",data:null,options:{responsive:!0,title:{display:!0,text:"Route Summary",fontSize:14,fontColor:"blue"},maintainAspectRatio:!1,lineTension:0,legend:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,scaleLabel:{display:!0,labelString:"Month"}},y:{display:!0,scaleLabel:{display:!0,labelString:"Value"}}}}},this.common.refresh=this.refresh.bind(this);let r=new Date;this.startTime=new Date(r.setDate(r.getDate()-7)),this.getTripSummary()}ngOnInit(){}refresh(){this.getTripSummary()}refreshData(t){console.log("Row------",t);var e=[],n=[];Object.keys(t).forEach(a=>{if("Kpi"!==a&&"_kpi_id"!=a){e.push(a);var o=parseInt(t[a].split("$")[0]);n.push(isNaN(o)?0:o)}}),this.Config.data={labels:e,datasets:[{label:"Values",backgroundColor:"#FF0000",borderColor:"#FF0000",data:n,fill:!1,lineTension:0}],options:{legend:!1}}}getTripSummary(){this.headings=[],this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.Config.data=null;let t=this.common.dateFormatter1(this.startTime),e=this.common.dateFormatter1(this.endTime);console.log("start & end",t,e);const n={startDate:t,endDate:e};console.log("params",n),this.common.loading++,this.api.post("TripExpenseVoucher/getRouteTripSummary",n).subscribe(t=>{if(this.common.loading--,console.log("Res:",t.data),this.vehicleTrips=t.data,null!=this.vehicleTrips){console.log("vehicleTrips",this.vehicleTrips);let t=this.vehicleTrips[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}else this.common.showToast("No Record Found !!")},t=>{this.common.loading--,console.log("Err:",t)})}getTableColumns(){let t=[];for(var e=0;e<this.vehicleTrips.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("column*******",this.headings[t]),this.valobj[this.headings[t]]="Kpi"==this.headings[t]?{value:this.vehicleTrips[e][this.headings[t]],class:"black",action:this.refreshData.bind(this,this.vehicleTrips[e])}:{value:this.getSplitData(this.vehicleTrips[e][this.headings[t]]),class:0!=this.getSplitData(this.vehicleTrips[e][this.headings[t]])?"blue":"black",action:0!=this.getSplitData(this.vehicleTrips[e][this.headings[t]])?this.vehicleHistory.bind(this,this.vehicleTrips[e][this.headings[t]],this.vehicleTrips[e]._kpi_id):""};this.valobj.style={background:this.vehicleTrips[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}getSplitData(t){let e=null;return e=t.split("$")[0],e}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}vehicleHistory(t,e){console.log("column",t),console.log("id",e);let n=null,a=null;n=t.split("$")[1],a=t.split("$")[2];let o={view:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:n,endDate:a,type:e}},viewModal:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:"_start",endDate:"_end",type:"_type",levelId:"_id"}},title:"Trip Data"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:o},this.modalService.open(Ko.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](s.Kb),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-summary"]],decls:13,vars:8,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["class","col-sm-2",4,"ngIf"],["class","col-sm-12",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],[1,"col-sm-2"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","200px","max-height","330px",3,"type","data","options"],["id","vehicleTrip",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"uj-date-time-picker",5),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,Ds,3,0,"div",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275template"](10,Is,2,3,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](11,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,Fs,1,2,"smart-table",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","0"==e.period||"31"==e.trendType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.Config.data),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.vehicleTrips&&e.vehicleTrips.length))},directives:[s.s,s.r,et.a,c.u,Ft.ChartComponent,_.a],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 405px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}[_nghost-%COMP%]     .blue{color:#00f;cursor:pointer}[_nghost-%COMP%]     .black{color:#000;cursor:pointer}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:90px!important}[_nghost-%COMP%]     th{width:60px!important}"]}),t})(),Vs=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.endTime=new Date,this.startTime=new Date((new Date).setDate(new Date(this.endTime).getDate()-7)),this.deviationData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.data=[],this.headings=[],this.valobj={},this.apiUrl="ViaRoutes/routeDeviation ",this.getrouteDeviations()}ngOnInit(){}getrouteDeviations(){if(this.common.dateFormatter1(this.startTime)>this.common.dateFormatter1(this.endTime))return void this.common.showError("Start Date should less then End Date");const t={startTime:this.common.dateFormatter1(this.startTime),endTime:this.common.dateFormatter1(this.endTime)};++this.common.loading,this.api.post(this.apiUrl,t).subscribe(t=>{if(--this.common.loading,console.log("API Res:",t),this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!t.data)return;this.data=t.data;let e=this.data[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns()},t=>{--this.common.loading,this.common.showError(t),console.log("Error: ",t)})}getTableColumns(){let t=[];return this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)"Action"==this.headings[t]?(console.log("Test"),this.valobj[this.headings[t]]={value:"",action:null}):this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black"};t.push(this.valobj)}),t}actionIcons(t){}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["route-deviations"]],decls:15,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-sm-2"],[1,"btn","btn-primary",3,"click"],["id","routedeviations",2,"width","100%",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3,"Route Deviations"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"nb-card-body"),r["\u0275\u0275elementStart"](5,"div",1),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",5),r["\u0275\u0275elementStart"](11,"button",6),r["\u0275\u0275listener"]("click",(function(){return e.getrouteDeviations()})),r["\u0275\u0275text"](12,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",1),r["\u0275\u0275element"](14,"smart-table",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("isTime",!1)("dateTimeValue",e.startTime),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",e.endTime),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings))},directives:[s.s,s.v,s.r,et.a,_.a],styles:[""]}),t})();var Ls=n("uk0L");function zs(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",15),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.name)}}function js(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275element"](1,"chart",17),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("type",t.Config.type)("data",t.Config.data)("options",t.Config.options)}}let Rs=(()=>{class t{constructor(t,e,n,a,o,i){this.common=t,this.api=e,this.modalService=n,this.activeModal=a,this.dateService=o,this.user=i,this.startTime=null,this.endTime=null,this.reportType=1,this.modelType=0,this.modelTypes=[],this.Config={type:"line",data:null,options:{responsive:!0,title:{display:!0,text:"Daily Fuel Consumption",fontSize:14,fontColor:"blue"},maintainAspectRatio:!1,lineTension:0,legend:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,scaleLabel:{display:!0,labelString:"Date"}},y:{display:!0,scaleLabel:{display:!0,labelString:"Fuel"}}},onClick:(t,e)=>{if(console.log("e",t,e),!e.length)return;let n=e[0]._index;console.log(n),console.log("month data",this.Config.data);let a=this.Config.data.labels[n];console.log("Label:",a,"Value:",this.Config.data.datasets[0].data[n]);let o=this.sortArray(a);console.log("fuel_daily_cumsion:",o,this.fuel_daily_cumsion);let i=this.fuel_daily_cumsion.filter(t=>t.Date.split("-")[1]==o&&(console.log(t.Date.split("-")[1],o),!0));console.log("Data:",i),this.openfueldailycunsumption(i)}}},this.flagType="1",this.fuel_daily_cumsion=[],this.fuel_daily_cumsion_level2=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};let r=new Date;this.endTime=new Date(r),new Date(r.getFullYear(),r.getMonth(),0).getDate(),this.startTime=new Date(r.setDate(r.getDate()-90)),this.common.refresh=this.refresh.bind(this),this.getVehicleModals(),this.getFuelDailyConsumption()}ngOnInit(){}refresh(){console.log("Refresh"),this.getFuelDailyConsumption()}changeModal(t){this.flagType=t}getVehicleModals(){this.common.loading++,this.api.get("Suggestion/getVehicleModals").subscribe(t=>{this.common.loading--,this.modelTypes=t&&t.data?t.data:[]},t=>{this.common.loading--,console.log("Err:",t)})}getFuelDailyConsumption(){if(this.Config.data=null,this.startTime>this.endTime)return void this.common.showToast("start date should be less than end date");const t={startDate:this.common.dateFormatter1(this.startTime),endDate:this.common.dateFormatter1(this.endTime),flagtype:1,modelType:this.modelType,reportType:this.reportType};console.log("params",t),this.common.loading++,this.api.post("Fuel/getfueldailyconsumption",t).subscribe(t=>{this.common.loading--,console.log("Res json data:",t),t.data&&(this.getChartData(t.data),this.fuel_daily_cumsion=[],this.fuel_daily_cumsion_level2=[],t.data[0].y_json_data_level_1&&(this.fuel_daily_cumsion=JSON.parse(t.data[0].y_json_data_level_1),this.fuel_daily_cumsion_level2=JSON.parse(t.data[0].y_json_data_level_2),console.log("double data",this.fuel_daily_cumsion)))},t=>{this.common.loading--,console.log("Err:",t)})}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(t){let e=[];return t||(t=this.fuel_daily_cumsion),t.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};e.push(this.valobj)}),e}getChartData(t){let e=[],n=[];t.map(t=>{if(t.y_date){let n=this.dateService.format(t.y_date,"dd MMM yyyy");e.push("1"==this.flagType?n.split(" ")[0]:n.split(",")[0])}t.y_consumption&&n.push(t.y_consumption)}),this.Config.data={labels:e,datasets:[{label:"Values",backgroundColor:"#3835ea",borderColor:"#3835ea",data:n,fill:!1,lineTension:0}],options:{legend:!1}}}sortArray(t){console.log("month value",t);let e=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(t)+1;return console.log("searchvalue",e),e<=9?"0"+e:e+""}openfueldailycunsumption(t){this.common.params={reportType:this.reportType,consumtiondata:t,fueldailycumsionlevel2:this.fuel_daily_cumsion_level2},this.modalService.open(Ls.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](y.b),r["\u0275\u0275directiveInject"](ai.a),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-daily-consumption"]],decls:31,vars:9,consts:[[1,"row"],[1,"col-10"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isStart","isTime","onChanged"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],["class","col-sm-12",4,"ngIf"],[3,"value"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","400px","max-height","400px",3,"type","data","options"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Daily Fuel Consumption"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body"),r["\u0275\u0275elementStart"](7,"div",0),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",3),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",2),r["\u0275\u0275elementStart"](11,"uj-date-time-picker",4),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endTime=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",2),r["\u0275\u0275elementStart"](13,"select",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.reportType=t}))("change",(function(){return e.getFuelDailyConsumption()})),r["\u0275\u0275elementStart"](14,"option",6),r["\u0275\u0275text"](15,"Mid 50%"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"option",7),r["\u0275\u0275text"](17,"Median"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",8),r["\u0275\u0275text"](19,"Average"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",2),r["\u0275\u0275elementStart"](21,"select",9),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.modelType=t})),r["\u0275\u0275elementStart"](22,"option",10),r["\u0275\u0275text"](23,"All"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](24,zs,2,2,"option",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",2),r["\u0275\u0275elementStart"](26,"button",12),r["\u0275\u0275listener"]("click",(function(){return e.getFuelDailyConsumption()})),r["\u0275\u0275text"](27,"submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"div",13),r["\u0275\u0275elementStart"](29,"div",0),r["\u0275\u0275template"](30,js,2,3,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("dateTimeValue",e.startTime)("isTime",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endTime)("isStart",!1)("isTime",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.reportType),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",e.modelType),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",e.modelTypes),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.Config.data))},directives:[s.s,s.v,s.r,et.a,tt.D,tt.r,tt.u,tt.w,tt.G,c.t,c.u,Ft.ChartComponent],styles:[".radio-type[_ngcontent-%COMP%]{padding-bottom:10px;font-size:18px;text-align:center;color:#00008b}.radio-type[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;width:20px;height:20px!important;margin:0 5px 0 8px}"]}),t})();function Hs(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",6),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function Ns(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let Us=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.modalService=n,this.user=a,this._sanitizer=o,this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.VehicleStatusAlerts=[],this.getVehicleStatusAlerts(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getVehicleStatusAlerts()}getVehicleStatusAlerts(){this.common.loading++,this.api.get("HaltOperations/getFoAdminWiseVehicleStatus?").subscribe(t=>{this.common.loading--,console.log("Res: ",t.data),t.data&&(this.VehicleStatusAlerts=t.data,this.gettingTableHeader(this.VehicleStatusAlerts))},t=>{this.common.loading--,console.error(t),this.common.showError()})}gettingTableHeader(t){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let e=t[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(t)}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(t){this.valobj={};let e=[];return t.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]="Action"==this.headings[e]?{value:"",isHTML:!0,action:null,icons:this.actionIcons(t)}:"Trip"==this.headings[e]?{value:this.common.getTripStatusHTML(t._trip_status_type,t._showtripstart,t._showtripend,t._p_placement_type,t._p_loc_name),isHTML:!0}:{value:t[this.headings[e]],class:"black",action:""};e.push(this.valobj)}),e}actionIcons(t){return[{class:"fa fa-cog delete",action:this.enterTicket.bind(this,t)}]}openChangeStatusCustomerModal(t){let e={vehicle_id:t._vid,latch_time:t.latch_time,toTime:t.ttime,suggest:0,status:1,fo_name:t.group_name,regno:t.vehicle_name,tripName:this.common.getTripStatusHTML(t._trip_status_type,t._showtripstart,t._showtripend,t._p_placement_type,t._p_loc_name)};console.log("VehicleStatusData",e),this.common.params=e,this.common.ref_page="vsc","admin"!=this.user._loggedInBy?this.modalService.open(Et.a,{size:"lg",container:"nb-layout"}).result.then(e=>{this.getVehicleStatusAlerts(),this.exitTicket(t)}):this.modalService.open(vt.a,{size:"lg",container:"nb-layout"}).result.then(e=>{this.getVehicleStatusAlerts(),this.exitTicket(t)})}enterTicket(t){let e,n={tblRefId:1,tblRowId:t._vid};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",n).subscribe(n=>{if(this.common.loading--,e=n,console.log(e),!e.success)return!1;this.openChangeStatusCustomerModal(t)},t=>{this.common.loading--,console.log(t)})}exitTicket(t){let e;var n={tblRefId:1,tblRowId:t._vid};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",n).subscribe(t=>(this.common.loading--,e=t,console.log(e),!!e.sucess||(this.getVehicleStatusAlerts(),!1)),t=>{this.common.loading--,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](Tt.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-status-change-by-user"]],decls:12,vars:3,consts:[[1,"row"],[1,"col-10"],[2,"padding","10px 15px"],["id","VehicleStatusAlerts",3,"data","settings",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],["id","VehicleStatusAlerts",3,"data","settings"],[1,"no-data"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle Status Changes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body",2),r["\u0275\u0275template"](7,Hs,1,2,"smart-table",3),r["\u0275\u0275template"](8,Ns,2,0,"div",4),r["\u0275\u0275elementStart"](9,"div",5),r["\u0275\u0275elementStart"](10,"b"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.VehicleStatusAlerts&&e.VehicleStatusAlerts.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.VehicleStatusAlerts.length),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",e.VehicleStatusAlerts.length,""))},directives:[s.s,s.v,s.r,c.u,_.a],styles:[""]}),t})();function Gs(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"smart-table",8),r["\u0275\u0275listener"]("filtered",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().jrxFiltered(e)})),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)("returnFilteredData",!0)}}function Bs(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",9),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}const $s=function(t){return{active:t}};let Ws=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.user=a,this.autoPlay="forward",this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.VehicleStatusAlerts=[],this.filteredIndexes=[],this.activeIndex=-1,this.getVehicleStatusAlerts(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleStatusAlerts()}getVehicleStatusAlerts(){this.filteredIndexes=[],this.modalRef=null,this.activeIndex=-1,this.common.loading++,this.api.get("HaltOperations/getFoAdminWiseTripIssues?").subscribe(t=>{this.common.loading--,console.log("Res: ",t.data),this.VehicleStatusAlerts=t.data,this.gettingTableHeader(this.VehicleStatusAlerts)},t=>{this.common.loading--,console.error(t),this.common.showError()})}gettingTableHeader(t){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let e=t[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(t)}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(t){this.valobj={};let e=[];return t.map((t,n)=>{this.valobj={class:"xyz",index:n};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]="Action"==this.headings[e]?{value:"",isHTML:!0,action:null,icons:this.actionIcons(t,n)}:"Trip"==this.headings[e]?{value:this.common.getTripStatusHTML(t._trip_status_type,t._showtripstart,t._showtripend,t._p_placement_type,t._p_loc_name),isHTML:!0}:{value:t[this.headings[e]],class:"black",action:""};t._class&&(this.valobj.class="selected"),e.push(this.valobj)}),e}actionIcons(t,e){return[{class:"fa fa-cog delete",action:this.handleIconAction.bind(this,t,e)}]}handleIconAction(t,e){this.openChangeStatusCustomerModal(t,e)}modalOpens(t){if("forward"==this.autoPlay&&t<this.VehicleStatusAlerts.length)if(this.filteredIndexes.length){let e=this.filteredIndexes[this.filteredIndexes.indexOf(t)+1];console.log("nextInex",e),e&&this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[e],e)}else this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[t+1],t+1);else if("backward"==this.autoPlay&&t>=0)if(this.filteredIndexes.length){let e=this.filteredIndexes[this.filteredIndexes.indexOf(t)-1];console.log("previousIndex",e),e&&this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[e],e)}else this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[t-1],t-1)}openChangeStatusCustomerModal(t,e){this.VehicleStatusAlerts[e]._class="selected",this.table.data.columns[e].class="selected";let n=this.modalRef?"xhide-trip-issue":"";this.common.ref_page="vsc",this.common.params={loader:!n,vehicle_id:t._vid,latch_time:t.latch_time,toTime:t.ttime,suggest:0,status:1,fo_name:t.group_name,regno:t.vehicle_name,tripName:this.common.getTripStatusHTML(t._trip_status_type,t._showtripstart,t._showtripend,t._p_placement_type,t._p_loc_name)};let a=this.modalService.open("admin"!=this.user._loggedInBy?Et.a:vt.a,{size:"lg",container:"nb-layout",windowClass:n,backdropClass:n});this.activeIndex=e,a.result.then(t=>{try{document.querySelector(".xhide-trip-issue").classList.remove("xhide-trip-issue"),document.querySelector(".xhide-trip-issue").classList.remove("xhide-trip-issue")}catch(n){}t.response&&e<this.VehicleStatusAlerts.length&&e>=0?this.modalOpens(this.activeIndex):this.modalRef=null})}enterTicket(t){let e,n={tblRefId:1,tblRowId:t.vehicle_id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",n).subscribe(t=>{if(this.common.loading--,e=t,console.log(e),!e.success)return!1},t=>{this.common.loading--,console.log(t)})}exitTicket(t){let e;var n={tblRefId:1,tblRowId:t.vehicle_id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",n).subscribe(t=>(this.common.loading--,e=t,console.log(e),!!e.sucess),t=>{this.common.loading--,console.log(t)})}jrxFiltered(t){console.log("event:",t),this.filteredIndexes=t.map(t=>t.index),console.log("this.filteredIndexes:",this.filteredIndexes)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tripissues"]],decls:19,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-6",2,"text-align","right"],[1,"btn","btn-primary",2,"margin-left","15px",3,"ngClass","click"],[2,"padding","10px 15px"],["id","VehicleStatusAlerts",3,"data","settings","returnFilteredData","filtered",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],["id","VehicleStatusAlerts",3,"data","settings","returnFilteredData","filtered"],[1,"no-data"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",0),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Trip Issues"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275text"](8,"Autoplay "),r["\u0275\u0275elementStart"](9,"button",3),r["\u0275\u0275listener"]("click",(function(){return e.autoPlay="forward"})),r["\u0275\u0275text"](10,"Forward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"button",3),r["\u0275\u0275listener"]("click",(function(){return e.autoPlay="backward"})),r["\u0275\u0275text"](12,"Backward"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"nb-card-body",4),r["\u0275\u0275template"](14,Gs,1,3,"smart-table",5),r["\u0275\u0275template"](15,Bs,2,0,"div",6),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275elementStart"](17,"b"),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](5,$s,"forward"==e.autoPlay)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](7,$s,"backward"==e.autoPlay)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.VehicleStatusAlerts&&e.VehicleStatusAlerts.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.VehicleStatusAlerts.length),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",e.VehicleStatusAlerts.length,""))},directives:[s.s,s.v,c.r,s.r,c.u,_.a],styles:["[_nghost-%COMP%]     .selected{background-color:#ff0!important}.active[_ngcontent-%COMP%]{background:#40dc7e!important}.active[_ngcontent-%COMP%]:hover{background:#40dc7e!important}"]}),t})();var Ks=n("x82i");function qs(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",15),r["\u0275\u0275text"](1,"Ticket Types"),r["\u0275\u0275elementEnd"]())}function Js(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"th",15),r["\u0275\u0275text"](1,"User"),r["\u0275\u0275elementEnd"]())}function Ys(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td",16),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unacklt30mins,a.type)})),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unackgt30mins,a.type)})),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unclmlt30mins,a.type)})),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unclmgt30mins,a.type)})),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.uncallt1hr,a.type)})),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.uncalgt1hr,a.type)})),r["\u0275\u0275text"](16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.openlt3hr,a.type)})),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.opengt3hr,a.type)})),r["\u0275\u0275text"](20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.tkt),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unacklt30mins.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unacklt30mins.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unackgt30mins.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unackgt30mins.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unclmlt30mins.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unclmlt30mins.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unclmgt30mins.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unclmgt30mins.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.uncallt1hr.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.uncallt1hr.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.uncalgt1hr.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.uncalgt1hr.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.openlt3hr.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.openlt3hr.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.opengt3hr.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.opengt3hr.split("_")[0])}}function Zs(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"table",9),r["\u0275\u0275elementStart"](1,"thead",10),r["\u0275\u0275elementStart"](2,"tr"),r["\u0275\u0275elementStart"](3,"th",11),r["\u0275\u0275text"](4,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,qs,2,0,"th",12),r["\u0275\u0275template"](6,Js,2,0,"th",12),r["\u0275\u0275elementStart"](7,"th",13),r["\u0275\u0275text"](8,"UnAcknowledged"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"th",13),r["\u0275\u0275text"](10,"UnClaimed"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"th",13),r["\u0275\u0275text"](12,"UnCalled"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th",13),r["\u0275\u0275text"](14,"Open"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"tr"),r["\u0275\u0275elementStart"](16,"th"),r["\u0275\u0275text"](17," < 30 mins"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"th"),r["\u0275\u0275text"](19," > 30 mins"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"th"),r["\u0275\u0275text"](21," < 30 mins"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"th"),r["\u0275\u0275text"](23," > 30 mins"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"th"),r["\u0275\u0275text"](25," < 1 hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"th"),r["\u0275\u0275text"](27," > 1 hr "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"th"),r["\u0275\u0275text"](29," < 3 hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"th"),r["\u0275\u0275text"](31," > 3 hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"tbody"),r["\u0275\u0275template"](33,Ys,21,26,"tr",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf","alertwise"==t.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","userwise"==t.type),r["\u0275\u0275advance"](27),r["\u0275\u0275property"]("ngForOf",t.kpis)}}function Qs(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.totaldriver,a.type)})),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.totalcalls,a.type)})),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.callper,a.type)})),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unresponded_call,a.type)})),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.vsccount,a.type)})),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.lh_check_time,a.type)})),r["\u0275\u0275text"](16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td"),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.uname),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.totaldriver.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.totaldriver.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("0(00:00)"!=t.totalcalls.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.totalcalls.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("0%"!=t.callper.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.callper.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unresponded_call.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unresponded_call.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.vsccount.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.vsccount.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.lh_check_time.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.lh_check_time.split("_")[0]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.last_call_sync_time)}}function Xs(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"table",9),r["\u0275\u0275elementStart"](1,"thead",10),r["\u0275\u0275elementStart"](2,"tr"),r["\u0275\u0275elementStart"](3,"th"),r["\u0275\u0275text"](4," #"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"th"),r["\u0275\u0275text"](6," User Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"th"),r["\u0275\u0275text"](8," Total Driver"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"th"),r["\u0275\u0275text"](10," Total Calls"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"th"),r["\u0275\u0275text"](12," Driver Call %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th"),r["\u0275\u0275text"](14," Unrespond Call"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16," Pending VSC Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18," Last Halt Check Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Last Sync Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"tbody"),r["\u0275\u0275template"](22,Qs,19,21,"tr",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](22),r["\u0275\u0275property"]("ngForOf",t.kpis)}}function tl(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.totaldriver,a.type)})),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.totalcalls,a.type)})),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.callper,a.type)})),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.unresponded_call,a.type)})),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.avg_response_time,a.type)})),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"td",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit,a=r["\u0275\u0275nextContext"](2);return a.openTicketDetails(n.vscrescnt,a.type)})),r["\u0275\u0275text"](16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td"),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n+1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.uname),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.totaldriver.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.totaldriver.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("0(00:00,M:0)"!=t.totalcalls.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.totalcalls.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("0%"!=t.callper.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.callper.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](0!=t.unresponded_call.split("_")[0]?"drillDown":""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.unresponded_call.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("00:00:00"==t.avg_response_time.split("_")[0]||"-"==t.avg_response_time.split("_")[0]?"":"drillDown"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.avg_response_time.split("_")[0]),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"]("0"==t.vscrescnt.split("_")[0]||"-"==t.vscrescnt.split("_")[0]?"":"drillDown"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.vscrescnt.split("_")[0]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.last_call_sync_time)}}function el(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"div",18),r["\u0275\u0275elementStart"](2,"uj-date-time-picker",19),r["\u0275\u0275listener"]("onChanged",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().date=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",20),r["\u0275\u0275elementStart"](4,"button",21),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().getTicketsKPI()})),r["\u0275\u0275text"](5,"Ok"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"table",9),r["\u0275\u0275elementStart"](7,"thead",10),r["\u0275\u0275elementStart"](8,"tr"),r["\u0275\u0275elementStart"](9,"th"),r["\u0275\u0275text"](10," #"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"th"),r["\u0275\u0275text"](12," User Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"th"),r["\u0275\u0275text"](14," Total Driver"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16," Total Calls"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18," Driver Call %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20," Unrespond Call"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"th"),r["\u0275\u0275text"](22," Avg. Response Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"th"),r["\u0275\u0275text"](24," Resolved Vsc"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"th"),r["\u0275\u0275text"](26,"Last Sync Time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"tbody"),r["\u0275\u0275template"](28,tl,19,21,"tr",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",t.date)("isTime",!1),r["\u0275\u0275advance"](26),r["\u0275\u0275property"]("ngForOf",t.kpis)}}function nl(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",22),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let al=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.user=n,this.modalService=a,this.kpis=[],this.testData=[],this.type="alertwise",this.date=new Date,this.getTicketsKPI(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getTicketsKPI()}getTicketsKPI(t){this.kpis=[],t=t||this.type,++this.common.loading,this.api.get("VehicleKpis/getTicketKpis?type="+t+"&fromDate="+this.common.dateFormatter(this.date,"YYYYMMDD",!1)).subscribe(t=>{--this.common.loading,console.log(t),this.kpis=t.data?t.data:[]},t=>{--this.common.loading,console.error(t)})}openTicketDetails(t,e){if(console.log("ticket",t,e,t.split("_")[0]),"0%"==t.split("_")[0]||0==t.split("_")[0]||"0"==t.split("_")[0]||"00:00"==t.split("_")[0]||"00:00:00"==t.split("_")[0]||"0(00:00)"==t.split("_")[0]||"-"==t.split("_")[0]||"0(00:00,M:0)"==t.split("_")[0])this.common.showError("There is no data");else{let n={type:e,rowId:t.split("_")[2],columnId:t.split("_")[1],date:this.date};this.common.params={ticketInfo:n},console.log("this.common.params.ticketInfo",this.common.params.ticketInfo),this.modalService.open(Ks.a,{size:"lg",container:"nb-layout"}).result.then(t=>{console.log("data",t),t.response&&this.refresh()})}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tickets-kpi"]],decls:17,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","table table-bordered table-hover",4,"ngIf"],["class","row",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"table","table-bordered","table-hover"],[1,"thead"],["rowspan","2",2,"padding-bottom","20px!important"],["rowspan","2","style","width:20%;padding-bottom:20px!important;",4,"ngIf"],["colspan","2"],[4,"ngFor","ngForOf"],["rowspan","2",2,"width","20%","padding-bottom","20px!important"],[2,"width","20%"],[3,"click"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-2"],[1,"btn","btn-primary",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"ul",3),r["\u0275\u0275elementStart"](5,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.type="alertwise",e.getTicketsKPI(e.type)})),r["\u0275\u0275text"](6," Ticket Alert Wise "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"li",5),r["\u0275\u0275listener"]("click",(function(){return e.type="userwise",e.getTicketsKPI(e.type)})),r["\u0275\u0275text"](8," Ticket User Wise "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.type="currentreport",e.getTicketsKPI(e.type)})),r["\u0275\u0275text"](10," Current Status "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.type="daywisereport",e.getTicketsKPI(e.type)})),r["\u0275\u0275text"](12," Day Wise Report "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,Zs,34,3,"table",6),r["\u0275\u0275template"](14,Xs,23,1,"table",6),r["\u0275\u0275template"](15,el,29,3,"div",7),r["\u0275\u0275template"](16,nl,2,0,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngClass","alertwise"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","userwise"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","currentreport"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","daywisereport"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf","alertwise"==e.type||"userwise"==e.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","currentreport"==e.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","daywisereport"==e.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.kpis.length))},directives:[s.s,s.r,c.r,c.u,c.t,et.a],styles:['.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}.drillDown[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff;text-align:center}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;text-align:center}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 218px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed;text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}']}),t})();function ol(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",14),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](t);const e=r["\u0275\u0275nextContext"]().index;return r["\u0275\u0275nextContext"]().users.splice(e,1)})),r["\u0275\u0275elementEnd"]()}}function il(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",15),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"](2).addUser()})),r["\u0275\u0275elementEnd"]()}}const rl=function(){return["name","mobileno"]},sl=function(t,e){return{name:t,mobileno:e}};function ll(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"auto-suggestion",6),r["\u0275\u0275listener"]("onSelected",(function(n){r["\u0275\u0275restoreView"](t);const a=e.$implicit;return a.id=n.id,a.name=n.name,a.mobileno=n.mobileno})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",11),r["\u0275\u0275template"](4,ol,1,0,"i",12),r["\u0275\u0275template"](5,il,1,0,"i",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=e.index,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("data",a.getUsersList)("display",r["\u0275\u0275pureFunction0"](5,rl))("preSelected",r["\u0275\u0275pureFunction2"](6,sl,t.name,t.mobileno)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0!==n),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n==a.users.length-1)}}let dl=(()=>{class t{constructor(t,e,n,a){this.api=t,this.common=e,this.modalService=n,this.user=a,this.getUsersList=[],this.supervisorId=null,this.users=[{id:null,name:"",mobileno:""}],this.getAllUserList()}ngOnInit(){}getAllUserList(){this.common.loading++,this.api.get("Suggestion/getAllFoAdminUsersWrtFo?").subscribe(t=>{this.common.loading--,this.getUsersList=t.data,console.log("api Data:",this.getUsersList)},t=>{this.common.loading--,console.log("Error: ",t)})}getUserDetails(t){console.log(t),this.supervisorId=t.id,this.common.loading++,this.api.get("FoAdmin/GetSuperUserAndUserMapping?superUserId="+this.supervisorId).subscribe(t=>{this.common.loading--,this.users=t.data||[{id:null,name:"",mobileno:""}]},t=>{this.common.loading--,console.log("Error: ",t)})}saveAssociation(){const t={superUserId:this.supervisorId,viewUsers:JSON.stringify(this.users)};this.common.loading++,this.api.post("FoAdmin/saveSuperUserAndUserMapping",t).subscribe(t=>{this.common.loading--,t.data&&t.data[0]?t.data[0].y_id>0?this.common.showToast(t.data[0].y_msg):this.common.showError(t.data[0].y_msg):this.common.showError("Something went wrong")},t=>{this.common.loading--,console.log("Error: ",t)})}addUser(){this.users.push({id:null,name:"",mobileno:""})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r),r["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["supervisor-user-association"]],decls:23,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[2,"min-height","580px"],[1,"table","table-bordered",2,"width","50%"],[1,"thead"],["seperator","-","placeholder","Employee","inputId","name",3,"data","display","preSelected","onSelected"],["class","row","style","margin-bottom: 6px;",4,"ngFor","ngForOf"],[1,"col","text-right","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"row",2,"margin-bottom","6px"],[1,"col-3"],["class","fa fa-trash remove",3,"click",4,"ngIf"],["class","fa fa-plus add",3,"click",4,"ngIf"],[1,"fa","fa-trash","remove",3,"click"],[1,"fa","fa-plus","add",3,"click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Supervisor User Association"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"nb-card-body",3),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"table",4),r["\u0275\u0275elementStart"](9,"thead",5),r["\u0275\u0275elementStart"](10,"th"),r["\u0275\u0275text"](11,"Supervisor"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"th"),r["\u0275\u0275text"](13,"Users"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"tbody"),r["\u0275\u0275elementStart"](15,"tr"),r["\u0275\u0275elementStart"](16,"td"),r["\u0275\u0275elementStart"](17,"auto-suggestion",6),r["\u0275\u0275listener"]("onSelected",(function(t){return e.getUserDetails(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"td"),r["\u0275\u0275template"](19,ll,6,9,"div",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",8),r["\u0275\u0275elementStart"](21,"button",9),r["\u0275\u0275listener"]("click",(function(){return e.saveAssociation()})),r["\u0275\u0275text"](22,"Save"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("data",e.getUsersList)("display",r["\u0275\u0275pureFunction0"](4,rl))("preSelected",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.users))},directives:[s.s,s.v,s.r,we.a,c.t,c.u],styles:[".remove[_ngcontent-%COMP%]{font-size:12px;background-color:#f44236;padding:7px 8px}.add[_ngcontent-%COMP%], .remove[_ngcontent-%COMP%]{color:#fff;border-radius:3px}.add[_ngcontent-%COMP%]{font-size:14px;background:linear-gradient(-135deg,#1de9b6,#1dc4e9);width:26px;float:right;padding:8px 0;text-align:center}"]}),t})();var cl=n("JyC3");function hl(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",14),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let ml=(()=>{class t{constructor(t,e,n,a,o){let i;this.datePipe=t,this.api=e,this.common=n,this.user=a,this.modalService=o,this.type="2",this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},i=new Date,this.endDate=new Date(i),this.startDate=new Date(i.setDate(i.getDate()-14)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(this.type),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleTrips(this.type)}getVehicleTrips(t){this.type=t,this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let e=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",e,n);let a="vehicleId="+this.vehicleId+"&startDate="+e+"&endDate="+n+"&status="+this.type;console.log("params",a),++this.common.loading,this.api.get("TripsOperation/getTrips?"+a).subscribe(t=>{if(--this.common.loading,console.log("Res:",t.data),this.vehicleTrips=t.data,null!=this.vehicleTrips){console.log("vehicleTrips",this.vehicleTrips);let t=this.vehicleTrips[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};this.table.data.headings[e]=t}this.table.data.headings.km={title:"KM",placeholder:"KM"},this.table.data.headings.googlekm={title:"Google KM",placeholder:"Google KM"},this.table.data.headings.hiskm={title:"Historic KM (Avg)",placeholder:"Historic KM (Avg)"},"-2"==this.type&&(this.table.data.headings.status={title:"Status",placeholder:"Status"},this.table.data.headings.remark={title:"Remark",placeholder:"Remark"}),this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}else this.common.showToast("No Record Found !!")},t=>{--this.common.loading,console.log("Err:",t)})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(var e=0;e<this.vehicleTrips.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]="Trip"==this.headings[t]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[e]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[e][this.headings[t]],class:"black",action:""},this.valobj.km={value:this.vehicleTrips[e]._km,class:"blue",action:this.openTripKmRepair.bind(this,this.vehicleTrips[e])},this.valobj.googlekm={value:this.vehicleTrips[e]._googlekm,isHTML:!0,action:null},this.valobj.hiskm={value:this.vehicleTrips[e]._hiskm,isHTML:!0,action:null},this.valobj.remark={value:this.vehicleTrips[e]._remark,isHTML:!0,action:null},this.valobj.status={value:this.vehicleTrips[e]._statusname,isHTML:!0,action:null},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[e])};this.valobj.style={background:this.vehicleTrips[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}openTripKmRepair(t){t._km?(this.common.params={tripId:t["Trip Id"]},console.log("tripData",this.common.params),this.modalService.open(cl.a,{size:"lg",container:"nb-layout"}).result.then(t=>{})):this.common.showError("No Data")}actionIcons(t){return[{class:" fa fa-route route-mapper",action:this.openRouteMapper.bind(this,t)},{class:"fa fa-question-circle  change-status",action:this.openRemarkModal.bind(this,t)}]}searchVehicle(t){this.vehicleId=t.id,this.vehicleRegNo=t.regno}openRemarkModal(t){this.common.params={remark:null,title:"Add Objection "},this.modalService.open(re.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.tripStampped(e.remark,t._tripid)})}openRouteMapper(t){let e,n,a;console.log("----trip----",t),e=new Date,n=new Date(e.setDate(e.getDate()-2)),a=this.common.dateFormatter(n);let o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:t._vid,vehicleRegNo:t.Vehicle,fromTime:t._startdate||o,toTime:t._enddate||i},console.log("open Route Mapper modal",this.common.params),this.modalService.open(gt.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then(t=>console.log("data",t))}tripStampped(t,e){console.log("this.tripId",e);let n={tripId:e,status:-2,remark:t};++this.common.loading,this.api.post("HaltOperations/tripVerification",n).subscribe(t=>{--this.common.loading,this.common.showToast(t.data[0].y_msg),this.getVehicleTrips(this.type)},t=>{--this.common.loading})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["trips"]],decls:20,vars:8,consts:[[2,"border","0px"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"div",3),r["\u0275\u0275elementStart"](5,"auto-suggestion",4),r["\u0275\u0275listener"]("onSelected",(function(t){return e.searchVehicle(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",5),r["\u0275\u0275elementStart"](7,"uj-date-time-picker",6),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275elementStart"](9,"uj-date-time-picker",7),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",8),r["\u0275\u0275elementStart"](11,"div",9),r["\u0275\u0275elementStart"](12,"ul",10),r["\u0275\u0275elementStart"](13,"li",11),r["\u0275\u0275listener"]("click",(function(){return e.type="2",e.getVehicleTrips(e.type)})),r["\u0275\u0275text"](14," Verified "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"li",11),r["\u0275\u0275listener"]("click",(function(){return e.type="1",e.getVehicleTrips(e.type)})),r["\u0275\u0275text"](16," High Confidence "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"li",12),r["\u0275\u0275listener"]("click",(function(){return e.type="-2",e.getVehicleTrips(e.type)})),r["\u0275\u0275text"](18," Objections "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,hl,1,2,"smart-table",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.startDate),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isStart",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngClass","2"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","1"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","-2"==e.type?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.vehicleTrips&&e.vehicleTrips.length))},directives:[s.s,s.r,we.a,et.a,c.r,c.u,_.a],styles:['.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     td i.fa-question-circle{background-color:red;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Add Objection";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#0f0;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#0f0;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0f0;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}']}),t})();function pl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",18),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275property"]("value",t.id),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](t.description)}}function gl(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",19),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}let bl=(()=>{class t{constructor(t,e,n,a,o){this.api=t,this.common=e,this.csvService=n,this.user=a,this.modalService=o,this.startDate=new Date((new Date).setDate((new Date).getDate()-3)),this.endDate=new Date,this.vehicleId=null,this.stateType="-1",this.stateTypes=[],this.count=0,this.vehicleStates=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.count=0,this.getStates(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}getStates(){this.api.get("Suggestion/getTypeMaster?typeId=13").subscribe(t=>{console.log("Res: ",t.data),this.stateTypes=t.data},t=>{console.error(t),this.common.showError()})}refresh(){this.count=0,this.getVehicleStates()}getVehicleStates(){this.vehicleStates=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let t=this.common.dateFormatter(this.startDate),e=this.common.dateFormatter(this.endDate);console.log("start & end",t,e);let n="vehicleId="+this.vehicleId+"&startDate="+t+"&endDate="+e+"&stateId="+this.stateType;console.log("params",n),++this.common.loading,this.api.get("Vehicles/getVehicleState?"+n).subscribe(t=>{if(--this.common.loading,console.log("Res:",t.data),this.vehicleStates=t.data,null!=this.vehicleStates){console.log("vehicleStates",this.vehicleStates);let t=this.vehicleStates[0];for(var e in console.log("first_Rec",t),t)if("_"!=e.charAt(0)){this.headings.push(e);let t={title:e,placeholder:this.formatTitle(e)};"start_time"!==e&&"end_time"!==e&&"addtime"!==e||(t.type="date"),this.table.data.headings[e]=t}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}else this.common.showToast("No Record Found !!")},t=>{--this.common.loading,console.log("Err:",t)})}formatTitle(t){return t.indexOf("_")>0?t.toLowerCase().split("_").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):t.charAt(0).toUpperCase()+t.substr(1)}getTableColumns(){let t=[];for(var e=0;e<this.vehicleStates.length;e++){this.valobj={};for(let t=0;t<this.headings.length;t++)this.valobj[this.headings[t]]={value:this.vehicleStates[e][this.headings[t]],class:"black",action:""},this.valobj.Action={value:null,isHTML:!1,action:null,class:"",icons:this.actionIcons(this,this.vehicleStates[e])};this.valobj.style={background:this.vehicleStates[e]._rowcolor},t.push(this.valobj)}return console.log("Columns:",t),t}printCsv(t){let e=this.user._customer.name;"customer"==this.user._loggedInBy&&(e=this.user._details.name),this.csvService.byMultiIds([t],"Fleet States",[{customer:"Customer : "+e},{report:"Report : Fleet States"},{period:"Report Date :"+this.startDate+" to "+this.endDate}])}resetVehicle(){this.vehicleId=null}setVehicleDetail(t){this.count++,this.vehicleId=t.id,this.count<2&&(console.log(" this.stateTypes",this.stateTypes),this.stateTypes.push({description:"All",id:-1}))}actionIcons(t,e){let n=[];return n.push({class:"fa fa-trash remove",action:this.removeVehicleState.bind(this,e)}),n}removeVehicleState(t){let e={stateid:t._id};this.common.params={title:"Remove State ",description:"<b>&nbsp;Are Sure To Remove State <b>"},this.modalService.open(Ha.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{t.response&&(console.log("data",t),this.common.loading++,this.api.post("Vehicles/removeVehicleState",e).subscribe(t=>{this.common.loading--,console.log("res: ",t),t.data[0].r_id>0?(this.common.showToast("Selected state has been deleted"),this.getStates()):this.common.showToast(t.data[0].r_msg,"",1e4)},t=>{this.common.loading--,console.log("Error: ",t),this.common.showError("Error!")}))})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](kt.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-states"]],decls:27,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"col-md-6","text-right"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleState",3,"data","settings",4,"ngIf"],[3,"value"],["id","vehicleState",3,"data","settings"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"h5"),r["\u0275\u0275text"](5,"Vehicle States"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"span",4),r["\u0275\u0275listener"]("click",(function(){return e.printCsv("vehicleState")})),r["\u0275\u0275element"](9,"i",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"nb-card-body"),r["\u0275\u0275elementStart"](11,"div",6),r["\u0275\u0275elementStart"](12,"div",7),r["\u0275\u0275elementStart"](13,"div",8),r["\u0275\u0275elementStart"](14,"auto-suggestion",9),r["\u0275\u0275listener"]("onSelected",(function(t){return e.setVehicleDetail(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",10),r["\u0275\u0275elementStart"](16,"select",11),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.stateType=t})),r["\u0275\u0275template"](17,pl,2,2,"option",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",10),r["\u0275\u0275elementStart"](19,"uj-date-time-picker",13),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",10),r["\u0275\u0275elementStart"](21,"uj-date-time-picker",14),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",15),r["\u0275\u0275elementStart"](23,"button",16),r["\u0275\u0275listener"]("click",(function(){return e.getVehicleStates()})),r["\u0275\u0275text"](24,"OK"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](25,gl,1,2,"smart-table",17),r["\u0275\u0275element"](26,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("preSelected",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.stateType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.stateTypes),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",e.vehicleStates&&e.vehicleStates.length))},directives:[s.s,s.v,s.r,we.a,tt.D,tt.r,tt.u,c.t,et.a,c.u,tt.w,tt.G,_.a],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t})();var ul=n("F4EW");function fl(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"label",6),r["\u0275\u0275text"](1,"Cluster Size"),r["\u0275\u0275elementEnd"]())}function xl(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",14),r["\u0275\u0275listener"]("ngModelChange",(function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().clusterSize=e})),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",t.clusterSize)}}function vl(t,e){if(1&t&&r["\u0275\u0275element"](0,"smart-table",15),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)("ngClass","misTripMultiDestSingleUnload"==t.reportType?"lastcolumn":"")}}function Cl(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275text"](1," No Data available ! "),r["\u0275\u0275elementEnd"]())}let yl=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.reportType="misTripReject",this.reportData=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.clusterSize=100,this.getReportData(this.reportType),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getReportData(this.reportType)}getReportData(t){this.reportType=t,this.common.loading++;let e="fromDate="+this.common.dateFormatter1(this.startDate)+"&toDate="+this.common.dateFormatter1(this.endDate)+"&level=1&vehicleId=&locName=&clusterSize="+this.clusterSize+"&reportType="+this.reportType;this.api.get("TripsOperation/tripReports?"+e).subscribe(t=>{this.common.loading--,console.log("Res: ",t.data),this.reportData=t.data||[],this.gettingTableHeader(this.reportData)},t=>{this.common.loading--,console.error(t),this.common.showError()})}gettingTableHeader(t){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let e=t[0];for(var n in e)if("_"!=n.charAt(0)){this.headings.push(n);let t={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=t}this.table.data.columns=this.getTableColumns(t)}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(t){this.valobj={};let e=[];return t.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]="Action"==this.headings[e]?{value:"",isHTML:!0,action:null,icons:this.actionIcons(t)}:"Location"==this.headings[e]||"Unload Location"==this.headings[e]?{value:t[this.headings[e]],class:"blue",action:this.openGenericModel.bind(this,t),isHTML:!0}:"Original"==this.headings[e]||"Cluster Name"==this.headings[e]||"location"==this.headings[e]?{value:t[this.headings[e]],class:"blue",action:this.showDataOnMap.bind(this,t),isHTML:!0}:"Trip"==this.headings[e]?{value:this.common.getTripStatusHTML(t._trip_status_type,t._showtripstart,t._showtripend,t._p_placement_type,t._p_loc_name),isHTML:!0}:{value:t[this.headings[e]],class:"black",action:"",isHTML:!0};e.push(this.valobj)}),e}actionIcons(t){}openGenericModel(t){console.log("data",t);let e={view:{api:"TripsOperation/tripReports",param:{fromDate:this.common.dateFormatter1(this.startDate),toDate:this.common.dateFormatter1(this.endDate),level:2,locName:t.Location||t["Unload Location"],loadLocName:t.Location||t["Unload Location"],reportType:this.reportType,clusterSize:this.clusterSize}},viewModal:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:"_start",endDate:"_end",type:"_type",levelId:"_id"}},title:"Details - "+t.Location||!1};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:e},this.modalService.open(Ko.a,{size:"lg",container:"nb-layout",backdrop:"static"})}showDataOnMap(t){this.common.params={mapData:t._map},this.modalService.open(ul.a,{size:"lg",container:"nb-layout"})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["issues-report"]],decls:32,vars:16,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[2,"margin-left","20px","margin-right","10px"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],["style","margin-left: 20px;margin-right: 10px;",4,"ngIf"],["type","number","class","clu-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-primary","text-capitalize",2,"margin-left","20px",3,"click"],["id","reportData",3,"data","settings","ngClass",4,"ngIf"],["class","no-data",4,"ngIf"],["type","number",1,"clu-input",3,"ngModel","ngModelChange"],["id","reportData",3,"data","settings","ngClass"],[1,"no-data"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-body"),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"ul",3),r["\u0275\u0275elementStart"](5,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="misTripReject",e.getReportData(e.reportType)})),r["\u0275\u0275text"](6," Rejected "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"li",5),r["\u0275\u0275listener"]("click",(function(){return e.reportType="misTripOutsideUnload",e.getReportData(e.reportType)})),r["\u0275\u0275text"](8," OutSide Unload "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="neverUnloadAtDest",e.getReportData(e.reportType)})),r["\u0275\u0275text"](10," Never Unload at Destinaion "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="maxMisTripMaxUnloadDatDest",e.getReportData(e.reportType)})),r["\u0275\u0275text"](12," Max Unload at Destination "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="misTripMultiDestSingleUnload",e.getReportData(e.reportType)})),r["\u0275\u0275text"](14," Common Unloading Point "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="verticalClusterReport",e.getReportData(e.reportType)})),r["\u0275\u0275text"](16," Cluster Report "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"li",4),r["\u0275\u0275listener"]("click",(function(){return e.reportType="misDiffLocUnloadSameName",e.getReportData(e.reportType)})),r["\u0275\u0275text"](18," Diff. Unload Similar Name "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",1),r["\u0275\u0275elementStart"](20,"label",6),r["\u0275\u0275text"](21,"From :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"uj-date-time-picker",7),r["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"label",6),r["\u0275\u0275text"](24,"To :"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"uj-date-time-picker",8),r["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,fl,2,0,"label",9),r["\u0275\u0275template"](27,xl,1,1,"input",10),r["\u0275\u0275elementStart"](28,"button",11),r["\u0275\u0275listener"]("click",(function(){return e.getReportData(e.reportType)})),r["\u0275\u0275text"](29,"OK"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](30,vl,1,3,"smart-table",12),r["\u0275\u0275template"](31,Cl,2,0,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngClass","misTripReject"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","misTripOutsideUnload"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","neverUnloadAtDest"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","maxMisTripMaxUnloadDatDest"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","misTripMultiDestSingleUnload"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","verticalClusterReport"==e.reportType?"active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass","misDiffLocUnloadSameName"==e.reportType?"active":""),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","misTripReject"!=e.reportType&&"misDiffLocUnloadSameName"!=e.reportType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","misTripReject"!=e.reportType&&"misDiffLocUnloadSameName"!=e.reportType),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.reportData&&e.reportData.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.reportData.length))},directives:[s.s,s.r,c.r,et.a,c.u,tt.x,tt.d,tt.r,tt.u,_.a],styles:['.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:3px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     .blue{color:#00f!important;text-decoration:underline}[_nghost-%COMP%]     .lastcolumn th:nth-child(5){width:550px!important}.clu-input[_ngcontent-%COMP%]{width:50px;height:30px!important}']}),t})();function _l(t,e){if(1&t&&r["\u0275\u0275element"](0,"chart",18),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.dataSet)("options",t.chart.options)}}function Sl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle No"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Amount),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Due Days"])}}function Ml(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Challan Date"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle No"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.State),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Amount),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Status)}}function wl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275elementStart"](2,"b"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"td"),r["\u0275\u0275elementStart"](5,"b"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275elementStart"](8,"b"),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275elementStart"](11,"b"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td"),r["\u0275\u0275elementStart"](14,"b"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.state),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t["Total Count"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t["Total Challan Amount"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t["Pending Challan Count"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.Pending)}}function Ol(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Driver),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Challan Count"])}}function Pl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Driver),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Challan Amount"])}}let El=(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.challansMonthGraph=[],this.challanStateWise=[],this.challansMostAged=[],this.challansLatest=[],this.challansdrivarcount=[],this.challansdrivaramount=[],this.xAxisData=[],this.yaxisObj1=null,this.yaxisObj2=null,this.chart={data:{line:[],bar:[]},type:"",dataSet:{labels:[],datasets:[]},yaxisname:"Month",options:null},this.getChallansMonthGraph(),this.getChallansMostAged(),this.getChallansLatest(),this.getChallansdrivarcount(),this.getChallansdrivaramount(),this.getChallansstatewize(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.xAxisData=[],this.getChallansMonthGraph(),this.getChallansMostAged(),this.getChallansLatest(),this.getChallansdrivarcount(),this.getChallansdrivaramount(),this.getChallansstatewize()}getChallansMonthGraph(){this.challansMonthGraph=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-6)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e)};this.api.post("Tmgreport/GetChallansMonthGraph",n).subscribe(t=>{--this.common.loading,console.log("challansMonthGraph:",t),this.challansMonthGraph=t.data,this.getlabelValue()},t=>{--this.common.loading,console.log("Err:",t)})}getChallansMostAged(){this.challansMostAged=[],++this.common.loading,this.api.post("Tmgreport/GetChallansMostAged",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("challansMostAged:",t),this.challansMostAged=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getChallansLatest(){this.challansLatest=[],++this.common.loading,this.api.post("Tmgreport/GetChallansLatestChallans",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("challansLatest:",t),this.challansLatest=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getChallansdrivarcount(){this.challansdrivarcount=[],++this.common.loading,this.api.post("Tmgreport/GetChallansdrivarcount",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("challansdrivarcount:",t),this.challansdrivarcount=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getChallansdrivaramount(){this.challansdrivaramount=[];let t=new Date((new Date).setFullYear((new Date).getFullYear()-1)),e=new Date,n={totalrecord:3,fromdate:this.common.dateFormatter1(t),todate:this.common.dateFormatter1(e)};++this.common.loading,this.api.post("Tmgreport/GetChallansdrivaramount",n).subscribe(t=>{--this.common.loading,console.log("challansdrivaramount:",t),this.challansdrivaramount=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getChallansstatewize(){let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date;this.challanStateWise=[],++this.common.loading;let n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e)};this.api.post("Tmgreport/getChallansstatewize",n).subscribe(t=>{--this.common.loading,console.log("Res:",t.data),this.challanStateWise=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getlabelValue(){this.challansMonthGraph&&(this.challansMonthGraph.forEach(t=>{this.chart.data.line.push(t.Amount),this.chart.data.bar.push(t.Count),this.xAxisData.push(t.Month)}),this.handleChart())}handleChart(){this.yaxisObj1=this.common.chartScaleLabelAndGrid(this.chart.data.bar),this.yaxisObj2=this.common.chartScaleLabelAndGrid(this.chart.data.line),console.log("this.yaxisObj1",this.yaxisObj1,"this.yaxisObj2",this.yaxisObj2);let t={labels:this.xAxisData,datasets:[]};t.datasets.push({type:"line",label:"Amount",borderColor:"#ed7d31",backgroundColor:"#ed7d31",pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",fill:!1,data:this.yaxisObj2.scaleData,yAxisID:"y-axis-2"}),t.datasets.push({type:"bar",label:"count",borderColor:"#386ac4",backgroundColor:"#386ac4",fill:!1,data:this.yaxisObj1.scaleData.map(t=>t.toFixed(2)),pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",yAxisID:"y-axis-1",yAxisName:"Count"}),this.chart={data:{line:[],bar:[]},type:"bar",dataSet:t,yaxisname:"Average Count",options:this.setChartOptions()}}setChartOptions(){let t={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:!0},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,labelString:"Months",fontSize:17}}]}};return t.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Count of Challans"+this.yaxisObj1.yaxisLabel,fontSize:16},ticks:{stepSize:this.yaxisObj1.gridSize},suggestedMin:this.yaxisObj1.minValue,type:"linear",display:!0,position:"left",id:"y-axis-1"}),t.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Challan Amount "+this.yaxisObj2.yaxisLabel,fontSize:16},ticks:{stepSize:this.yaxisObj2.gridSize},suggestedMin:this.yaxisObj2.minValue,type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),t}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg-challan"]],decls:82,vars:6,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-6","pl-0"],[1,"outer",2,"min-height","300px"],[2,"text-align","center"],[1,"charthead"],["style","margin-right:5px;min-height: 300px;max-height: 300px;",3,"type","data","options",4,"ngIf"],[1,"row","mt-4","mr-0","mb-0"],[1,"col-6","p-1"],[1,"outer","p-0",2,"min-height","130px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-6","pl-0","pr-0"],[1,"outer",2,"min-height","195px"],["colspan","2"],[1,"mt-2","outer",2,"min-height","130px"],[2,"margin-right","5px","min-height","300px","max-height","300px",3,"type","data","options"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h6",4),r["\u0275\u0275elementStart"](5,"b",5),r["\u0275\u0275text"](6," Challan Trends (Last 6 Months) "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,_l,1,3,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",7),r["\u0275\u0275elementStart"](9,"div",8),r["\u0275\u0275elementStart"](10,"div",9),r["\u0275\u0275elementStart"](11,"h6",4),r["\u0275\u0275elementStart"](12,"b",5),r["\u0275\u0275text"](13,"Most Aged Challans (Pending)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"table",10),r["\u0275\u0275elementStart"](15,"thead",11),r["\u0275\u0275elementStart"](16,"th"),r["\u0275\u0275text"](17,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"th"),r["\u0275\u0275text"](19,"Amount"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"th"),r["\u0275\u0275text"](21,"Due Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"tbody",12),r["\u0275\u0275template"](23,Sl,7,3,"tr",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",8),r["\u0275\u0275elementStart"](25,"div",9),r["\u0275\u0275elementStart"](26,"h6",4),r["\u0275\u0275elementStart"](27,"b",5),r["\u0275\u0275text"](28,"Latest Challans"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"table",10),r["\u0275\u0275elementStart"](30,"thead",11),r["\u0275\u0275elementStart"](31,"th"),r["\u0275\u0275text"](32,"Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"th"),r["\u0275\u0275text"](34,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"th"),r["\u0275\u0275text"](36,"State"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"th"),r["\u0275\u0275text"](38,"Amount"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"th"),r["\u0275\u0275text"](40,"Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"tbody",12),r["\u0275\u0275template"](42,Ml,11,5,"tr",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"div",14),r["\u0275\u0275elementStart"](44,"div",15),r["\u0275\u0275elementStart"](45,"h6",4),r["\u0275\u0275elementStart"](46,"b",5),r["\u0275\u0275text"](47,"State Wise Challans in Last 30 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"table",10),r["\u0275\u0275elementStart"](49,"thead",11),r["\u0275\u0275elementStart"](50,"th"),r["\u0275\u0275text"](51,"State"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"th",16),r["\u0275\u0275text"](53,"Total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"th",16),r["\u0275\u0275text"](55,"Pending"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"tbody",12),r["\u0275\u0275template"](57,wl,16,5,"tr",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](58,"div",17),r["\u0275\u0275elementStart"](59,"h6",4),r["\u0275\u0275elementStart"](60,"b",5),r["\u0275\u0275text"](61,"Worst 3 Drivers(Count Wise) "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"table",10),r["\u0275\u0275elementStart"](63,"thead",11),r["\u0275\u0275elementStart"](64,"th"),r["\u0275\u0275text"](65,"Driver Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"th"),r["\u0275\u0275text"](67,"Challan Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](68,"tbody",12),r["\u0275\u0275template"](69,Ol,5,2,"tr",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"div",17),r["\u0275\u0275elementStart"](71,"h6",4),r["\u0275\u0275elementStart"](72,"b",5),r["\u0275\u0275text"](73,"Worst 3 Drivers(Amount Wise) "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](74,"table",10),r["\u0275\u0275elementStart"](75,"thead",11),r["\u0275\u0275elementStart"](76,"th"),r["\u0275\u0275text"](77,"Driver Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"th"),r["\u0275\u0275text"](79,"Challan Amount"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](80,"tbody",12),r["\u0275\u0275template"](81,Pl,5,2,"tr",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.chart.type),r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngForOf",e.challansMostAged),r["\u0275\u0275advance"](19),r["\u0275\u0275property"]("ngForOf",e.challansLatest),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.challanStateWise),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngForOf",e.challansdrivarcount),r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngForOf",e.challansdrivaramount))},directives:[c.u,c.t,Ft.ChartComponent],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:11px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),t})();function kl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Breakdown + Maintenance(in Hrs)"])}}function Tl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Site Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Avg Loading Time(in Hrs)"])}}function Dl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Driver Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Avg Unloading Time(in Hr:Mi)"])}}function Il(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Driver Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Trip),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Avg Speed KM/Hrs"])}}function Fl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Site Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Avg Unloading Time(in Hrs)"])}}function Al(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vendor Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Total GPS"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["% Offline GPS"])}}function Vl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Duration (HH:MM)"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Location)}}function Ll(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Duration (HH:MM)"])}}function zl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["R + M + B (HH:MM)"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["RMB Type"])}}function jl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Location),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Duration (HH:MM)"])}}function Rl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Duration (HH:MM)"])}}function Hl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Driver Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Trip),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["KM/Hrs"])}}function Nl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Vehicle Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Duration (HH:MM)"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Location)}}function Ul(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"td"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Executive Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.vehiclecount),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.yesterday_per),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.last30_days_per)}}function Gl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.foadmin_name),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.yesterday_per),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.last30_days_per)}}function Bl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Date"])}}function $l(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Date"])}}function Wl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["TAT(Hrs)"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["VSC Time"])}}function Kl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Date"])}}function ql(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["Alert Name"]),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["TAT in Hrs"])}}function Jl(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.Executive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t["TAT(Hrs)"])}}const Yl=[{path:"",component:m,children:[{path:"",component:ne},{path:"dashboard",component:ne,canActivate:[u.a,b.b]},{path:"load-intelligence",loadChildren:()=>Promise.resolve().then(n.bind(null,"u1rS")).then(t=>t.LoadIntelligenceModule),canActivate:[u.a]},{path:"vehiclestatuschange",component:Us,canActivate:[u.a,b.b]},{path:"vehicle-states",component:bl,canActivate:[u.a,b.b]},{path:"tripissues",component:Ws,canActivate:[u.a,b.b]},{path:"tmg-trip",component:(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.tripOnwardKmd=[],this.tripUnLoadindTime=[],this.tripLoadindTime=[],this.tripLongHalt=[],this.longestLoadindSites=[],this.longestUnLoadindDriver=[],this.tripSlowestOnward=[],this.longestUnLoadindSites=[],this.tripGpsPerformance=[],this.xAxisData=[],this.chart={type:"",data:{},options:{}},this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.getTripOnwardKmd(),this.getTripLoadindTime(),this.getTripUnLoadindTime(),this.getTripLongHalt(),this.getLongestLoadindSites(),this.getTripSlowestOnward(),this.getLongestUnLoadindDriver(),this.getLongestUnLoadindSites(),this.getTripGpsPerformance(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.xAxisData=[],this.getTripOnwardKmd(),this.getTripLoadindTime(),this.getTripUnLoadindTime(),this.getTripLongHalt(),this.getLongestLoadindSites(),this.getTripSlowestOnward(),this.getLongestUnLoadindDriver(),this.getLongestUnLoadindSites(),this.getTripGpsPerformance()}getTripOnwardKmd(){this.tripOnwardKmd=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7};this.api.post("Tmgreport/GetTripOnwardKmd",n).subscribe(t=>{--this.common.loading,console.log("tripOnwardKmd:",t),this.tripOnwardKmd=t.data,this.getlabelValue()},t=>{--this.common.loading,console.log("Err:",t)})}getTripLoadindTime(){this.tripLoadindTime=[];let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7};++this.common.loading,this.api.post("Tmgreport/GetTripLoadindTime",n).subscribe(t=>{--this.common.loading,console.log("tripLoadindTime:",t),this.tripLoadindTime=t.data,this.tripLoadindTime.length>0&&this.handleChart1()},t=>{--this.common.loading,console.log("Err:",t)})}getTripUnLoadindTime(){this.tripUnLoadindTime=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7};this.api.post("Tmgreport/GetTripUnLoadindTime",n).subscribe(t=>{--this.common.loading,console.log("tripUnLoadindTime:",t),this.tripUnLoadindTime=t.data,this.tripUnLoadindTime.length>0&&this.handleChart2()},t=>{--this.common.loading,console.log("Err:",t)})}getTripLongHalt(){this.tripLongHalt=[];let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetTripLoadindHalt",n).subscribe(t=>{--this.common.loading,console.log("tripLongHalt:",t),this.tripLongHalt=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getLongestLoadindSites(){this.longestLoadindSites=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetLongestLoadindSites",n).subscribe(t=>{--this.common.loading,console.log("longestLoadindSites:",t.data),this.longestLoadindSites=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getLongestUnLoadindSites(){this.longestUnLoadindSites=[];let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetLongestUnLoadindSites",n).subscribe(t=>{--this.common.loading,console.log("longestUnLoadindSites:",t),this.longestUnLoadindSites=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTripSlowestOnward(){this.tripSlowestOnward=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetTripSlowestOnward",n).subscribe(t=>{--this.common.loading,console.log("tripSlowestOnward:",t.data),this.tripSlowestOnward=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getLongestUnLoadindDriver(){this.longestUnLoadindDriver=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetLongestUnLoadindDriver",n).subscribe(t=>{--this.common.loading,console.log("longestUnLoadindDriver:",t.data),this.longestUnLoadindDriver=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTripGpsPerformance(){this.tripGpsPerformance=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetTripGpsPerformance",n).subscribe(t=>{--this.common.loading,console.log("tripGpsPerformance:",t.data),this.tripGpsPerformance=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getlabelValue(){this.handleChart()}setChartOptions(){let t={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:!0},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,fontSize:17}}]}};return t.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Onward KMS",fontSize:17},type:"linear",display:!0,position:"left",id:"y-axis-1"}),t.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Total KMS",fontSize:17},type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),t}handleChart(){let t=[],e=[];this.tripOnwardKmd.map(n=>{e.push(n.Period),t.push(n["Onward KMs"])});let n=this.common.chartScaleLabelAndGrid(t);console.log("handleChart",e,t),this.chart.type="bar",this.chart.data={labels:e,datasets:[{label:"Onward KMs",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart.options={responsive:!0,legend:{position:"bottom",display:!1},scaleLabel:{display:!0,labelString:"Onward KMS"+n.yaxisLabel,fontSize:17},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Onward KMS"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}handleChart1(){let t=[],e=[];this.tripLoadindTime.map(n=>{e.push(n.Period),t.push(n["Loading Duration(hrs)"])});let n=this.common.chartScaleLabelAndGrid(t);console.log("handleChart1",e,t),this.chart1.type="line",this.chart1.data={labels:e,datasets:[{label:"Time (in Hrs.)",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Hrs.)"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}handleChart2(){let t=[],e=[];this.tripUnLoadindTime.map(n=>{e.push(n.Period),t.push(n["Unloading Duration(hrs)"])});let n=this.common.chartScaleLabelAndGrid(t);console.log("handleChart2",e,t),this.chart2.type="line",this.chart2.data={labels:e,datasets:[{label:"Time (in Hrs)",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Hrs.)"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg-trip"]],decls:106,vars:15,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer",2,"min-height","200px"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"col-4","pl-0","pr-0"],[1,"outer",2,"min-height","145px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h6",4),r["\u0275\u0275elementStart"](5,"b",5),r["\u0275\u0275text"](6,"Onward KMPD Graph"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275elementStart"](10,"h6",4),r["\u0275\u0275elementStart"](11,"b",5),r["\u0275\u0275text"](12,"Avg. Loading Time Graph"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",7),r["\u0275\u0275elementStart"](15,"div",3),r["\u0275\u0275elementStart"](16,"h6",4),r["\u0275\u0275elementStart"](17,"b",5),r["\u0275\u0275text"](18,"Avg. Unloading Time Graph"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",1),r["\u0275\u0275elementStart"](21,"div",2),r["\u0275\u0275elementStart"](22,"div",8),r["\u0275\u0275elementStart"](23,"h6",4),r["\u0275\u0275elementStart"](24,"b",5),r["\u0275\u0275text"](25,"Worst 3 Vehicles in Last Week(Breakdown + Maintenance)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"table",9),r["\u0275\u0275elementStart"](27,"thead",10),r["\u0275\u0275elementStart"](28,"th"),r["\u0275\u0275text"](29,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"th"),r["\u0275\u0275text"](31,"BreakDown+Maintenace (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"tbody",11),r["\u0275\u0275template"](33,kl,5,2,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",2),r["\u0275\u0275elementStart"](35,"div",8),r["\u0275\u0275elementStart"](36,"h6",4),r["\u0275\u0275elementStart"](37,"b",5),r["\u0275\u0275text"](38,"Longest Loading Sites in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"table",9),r["\u0275\u0275elementStart"](40,"thead",10),r["\u0275\u0275elementStart"](41,"th"),r["\u0275\u0275text"](42,"Site Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"th"),r["\u0275\u0275text"](44,"Avg. Loading Time (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"tbody",11),r["\u0275\u0275template"](46,Tl,5,2,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",7),r["\u0275\u0275elementStart"](48,"div",8),r["\u0275\u0275elementStart"](49,"h6",4),r["\u0275\u0275elementStart"](50,"b",5),r["\u0275\u0275text"](51,"Longest Unloading Drivers in Last 30 Days "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"table",9),r["\u0275\u0275elementStart"](53,"thead",10),r["\u0275\u0275elementStart"](54,"th"),r["\u0275\u0275text"](55,"Driver Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"th"),r["\u0275\u0275text"](57,"Avg. Unloading Time (Hrs) "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](58,"tbody",11),r["\u0275\u0275template"](59,Dl,5,2,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"div",1),r["\u0275\u0275elementStart"](61,"div",2),r["\u0275\u0275elementStart"](62,"div",8),r["\u0275\u0275elementStart"](63,"h6",4),r["\u0275\u0275elementStart"](64,"b",5),r["\u0275\u0275text"](65,"Slowest 5 Onward Drivers in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"table",9),r["\u0275\u0275elementStart"](67,"thead",10),r["\u0275\u0275elementStart"](68,"th"),r["\u0275\u0275text"](69,"Driver Name "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"th"),r["\u0275\u0275text"](71,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](72,"th"),r["\u0275\u0275text"](73,"Trip"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](74,"th"),r["\u0275\u0275text"](75,"Avg Speed"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](76,"tbody",11),r["\u0275\u0275template"](77,Il,9,4,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"div",2),r["\u0275\u0275elementStart"](79,"div",8),r["\u0275\u0275elementStart"](80,"h6",4),r["\u0275\u0275elementStart"](81,"b",5),r["\u0275\u0275text"](82,"Longest Unloading Sites in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](83,"table",9),r["\u0275\u0275elementStart"](84,"thead",10),r["\u0275\u0275elementStart"](85,"th"),r["\u0275\u0275text"](86,"Site Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](87,"th"),r["\u0275\u0275text"](88,"Avg. Unloading Time (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](89,"tbody",11),r["\u0275\u0275template"](90,Fl,5,2,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](91,"div",7),r["\u0275\u0275elementStart"](92,"div",8),r["\u0275\u0275elementStart"](93,"h6",4),r["\u0275\u0275elementStart"](94,"b",5),r["\u0275\u0275text"](95,"GPS Performance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](96,"table",9),r["\u0275\u0275elementStart"](97,"thead",10),r["\u0275\u0275elementStart"](98,"th"),r["\u0275\u0275text"](99,"Vendor Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](100,"th"),r["\u0275\u0275text"](101,"Total GPS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](102,"th"),r["\u0275\u0275text"](103,"% Offline GPS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](104,"tbody",11),r["\u0275\u0275template"](105,Al,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("type",e.chart.type)("data",e.chart.data)("options",e.chart.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart1.type)("data",e.chart1.data)("options",e.chart1.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart2.type)("data",e.chart2.data)("options",e.chart2.options),r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngForOf",e.tripLongHalt),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.longestLoadindSites),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.longestUnLoadindDriver),r["\u0275\u0275advance"](18),r["\u0275\u0275property"]("ngForOf",e.tripSlowestOnward),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.longestUnLoadindSites),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.tripGpsPerformance))},directives:[Ft.ChartComponent,c.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),t})(),canActivate:[u.a,b.b]},{path:"tmg-traffic",component:(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.trafficLiveStatus=[],this.trafficLongestDriverUnavailable=[],this.trafficLongestVehicleGpsIssue=[],this.trafficTopRmb=[],this.trafficLongestLoadingSites=[],this.trafficLongestUnloadingSite=[],this.trafficSlowestOnwardVehicles=[],this.trafficLongestVehicleEmpty=[],this.chart={type:"",data:{},options:{},plugins:[]},this.getTrafficLiveStatus(),this.getTrafficLongestDriverUnavailable(),this.getTrafficLongestVehicleGpsIssue(),this.getTrafficTopRmb(),this.getTrafficLongestLoadingSites(),this.getTrafficLongestUnloadingSite(),this.getTrafficLongestVehicleEmpty(),this.getTrafficSlowestOnwardVehicles(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getTrafficLiveStatus(),this.getTrafficLongestDriverUnavailable(),this.getTrafficLongestVehicleGpsIssue(),this.getTrafficTopRmb(),this.getTrafficLongestLoadingSites(),this.getTrafficLongestUnloadingSite(),this.getTrafficSlowestOnwardVehicles(),this.getTrafficLongestVehicleEmpty()}getTrafficLiveStatus(){this.trafficLiveStatus=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLiveStatus",{totalrecord:7}).subscribe(t=>{--this.common.loading,console.log("trafficLiveStatus:",t),this.trafficLiveStatus=t.data,this.handleChart(this.trafficLiveStatus)},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficLongestDriverUnavailable(){this.trafficLongestDriverUnavailable=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestDriverUnavailable",{totalrecord:5}).subscribe(t=>{--this.common.loading,console.log("tripSlowestOnward:",t),this.trafficLongestDriverUnavailable=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficLongestVehicleGpsIssue(){this.trafficLongestVehicleGpsIssue=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestVehicleGpsIssue",{totalrecord:5}).subscribe(t=>{--this.common.loading,console.log("trafficLongestVehicleGpsIssue:",t.data),this.trafficLongestVehicleGpsIssue=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficTopRmb(){this.trafficTopRmb=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficTopRmb",{totalrecord:10}).subscribe(t=>{--this.common.loading,console.log("trafficTopRmb:",t),this.trafficTopRmb=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficLongestLoadingSites(){this.trafficLongestLoadingSites=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestLoadingSites",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("trafficLongestLoadingSites:",t),this.trafficLongestLoadingSites=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficLongestUnloadingSite(){this.trafficLongestUnloadingSite=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestUnloadingSite",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("trafficLongestUnloadingSite:",t),this.trafficLongestUnloadingSite=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficSlowestOnwardVehicles(){this.trafficSlowestOnwardVehicles=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficSlowestOnwardVehicles",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("trafficSlowestOnwardVehicles:",t.data),this.trafficSlowestOnwardVehicles=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getTrafficLongestVehicleEmpty(){this.trafficLongestVehicleEmpty=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestVehicleEmpty",{totalrecord:3}).subscribe(t=>{--this.common.loading,console.log("trafficLongestVehicleEmpty:",t.data),this.trafficLongestVehicleEmpty=t.data},t=>{--this.common.loading,console.log("Err:",t)})}handleChart(t){let e=[],n=[];t&&(t.forEach(t=>{e.push(t.split_part),n.push(t.totalvehicle)}),console.log("label",e,"data",n),this.chart.type="pie",this.chart.data={labels:e,datasets:[{label:"Zones",data:n,backgroundColor:["#0074D9","#FF4136","#2ECC40","#39CCCC","#01FF70","#8B008B","#FFD700","#D2B48C"]}]},this.chart.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"right",labels:{fontSize:n.length>8?11:12,padding:n.length>8?3:8,boxWidth:10}}})}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg-traffic"]],decls:113,vars:10,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0"],[1,"col-4","pl-0"],[1,"outer",2,"min-height","130px"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","0px","margin-top","0px","min-height","200px","max-height","200px",3,"type","data","options"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-4","pl-0","pr-0"],[1,"col-8","pl-0","pr-0"],[1,"row","mr-0","mb-0"],[1,"col-6","pl-0"],[1,"col-6","pl-0","pr-0"],[1,"row","mr-0","mb-0","mt-2"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h6",4),r["\u0275\u0275elementStart"](5,"b",5),r["\u0275\u0275text"](6,"Live Traffic Status "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275elementStart"](10,"h6",4),r["\u0275\u0275elementStart"](11,"b",5),r["\u0275\u0275text"](12,"Longest Driver Unavailable"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"table",7),r["\u0275\u0275elementStart"](14,"thead",8),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"Unavailable Hours"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"tbody",9),r["\u0275\u0275template"](22,Vl,7,3,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",11),r["\u0275\u0275elementStart"](24,"div",3),r["\u0275\u0275elementStart"](25,"h6",4),r["\u0275\u0275elementStart"](26,"b",5),r["\u0275\u0275text"](27,"Longest GPS Offline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"table",7),r["\u0275\u0275elementStart"](29,"thead",8),r["\u0275\u0275elementStart"](30,"th"),r["\u0275\u0275text"](31,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"th"),r["\u0275\u0275text"](33,"Offline Since(Hours)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"tbody",9),r["\u0275\u0275template"](35,Ll,5,2,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div",1),r["\u0275\u0275elementStart"](37,"div",2),r["\u0275\u0275elementStart"](38,"div",3),r["\u0275\u0275elementStart"](39,"h6",4),r["\u0275\u0275elementStart"](40,"b",5),r["\u0275\u0275text"](41,"Top Vehicles with RTO + Maintenance + Breakdown Issues"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"table",7),r["\u0275\u0275elementStart"](43,"thead",8),r["\u0275\u0275elementStart"](44,"th"),r["\u0275\u0275text"](45,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"th"),r["\u0275\u0275text"](47,"R + M + B (in Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"th"),r["\u0275\u0275text"](49,"RMB Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"tbody",9),r["\u0275\u0275template"](51,zl,7,3,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"div",12),r["\u0275\u0275elementStart"](53,"div",13),r["\u0275\u0275elementStart"](54,"div",14),r["\u0275\u0275elementStart"](55,"div",3),r["\u0275\u0275elementStart"](56,"h6",4),r["\u0275\u0275elementStart"](57,"b",5),r["\u0275\u0275text"](58,"Longest Loading Sites"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"table",7),r["\u0275\u0275elementStart"](60,"thead",8),r["\u0275\u0275elementStart"](61,"th"),r["\u0275\u0275text"](62,"Site Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"th"),r["\u0275\u0275text"](64,"Avg Loading Aging Time(in Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"tbody",9),r["\u0275\u0275template"](66,jl,5,2,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](67,"div",15),r["\u0275\u0275elementStart"](68,"div",3),r["\u0275\u0275elementStart"](69,"h6",4),r["\u0275\u0275elementStart"](70,"b",5),r["\u0275\u0275text"](71,"Longest Unloading Vehicles"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](72,"table",7),r["\u0275\u0275elementStart"](73,"thead",8),r["\u0275\u0275elementStart"](74,"th"),r["\u0275\u0275text"](75,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](76,"th"),r["\u0275\u0275text"](77,"Avg Unloading Aging Time(in Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"tbody",9),r["\u0275\u0275template"](79,Rl,5,2,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](80,"div",16),r["\u0275\u0275elementStart"](81,"div",14),r["\u0275\u0275elementStart"](82,"div",3),r["\u0275\u0275elementStart"](83,"h6",4),r["\u0275\u0275elementStart"](84,"b",5),r["\u0275\u0275text"](85,"Slowest Onward Vehicles"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](86,"table",7),r["\u0275\u0275elementStart"](87,"thead",8),r["\u0275\u0275elementStart"](88,"th"),r["\u0275\u0275text"](89,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](90,"th"),r["\u0275\u0275text"](91,"Driver Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](92,"th"),r["\u0275\u0275text"](93,"Trip"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](94,"th"),r["\u0275\u0275text"](95,"KMPD"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](96,"tbody",9),r["\u0275\u0275template"](97,Hl,9,4,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](98,"div",15),r["\u0275\u0275elementStart"](99,"div",3),r["\u0275\u0275elementStart"](100,"h6",4),r["\u0275\u0275elementStart"](101,"b",5),r["\u0275\u0275text"](102,"Longest Empty Vehicles"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](103,"table",7),r["\u0275\u0275elementStart"](104,"thead",8),r["\u0275\u0275elementStart"](105,"th"),r["\u0275\u0275text"](106,"Vehicle No."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](107,"th"),r["\u0275\u0275text"](108,"Available Hours"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](109,"th"),r["\u0275\u0275text"](110,"Location"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](111,"tbody",9),r["\u0275\u0275template"](112,Nl,7,3,"tr",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("type",e.chart.type)("data",e.chart.data)("options",e.chart.options),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.trafficLongestDriverUnavailable),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.trafficLongestVehicleGpsIssue),r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngForOf",e.trafficTopRmb),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.trafficLongestLoadingSites),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.trafficLongestUnloadingSite),r["\u0275\u0275advance"](18),r["\u0275\u0275property"]("ngForOf",e.trafficSlowestOnwardVehicles),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.trafficLongestVehicleEmpty))},directives:[Ft.ChartComponent,c.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:12px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),t})(),canActivate:[u.a,b.b]},{path:"issues-report",component:yl,canActivate:[u.a,b.b]},{path:"vehicle-kpis",component:M,canActivate:[u.a,b.b]},{path:"",redirectTo:"dashboard",pathMatch:"full",canActivate:[u.a,b.b]},{path:"tickets",component:L,canActivate:[u.a,b.b]},{path:"tickets-all",component:B,canActivate:[u.a,b.b]},{path:"tickets-kpi",component:al,canActivate:[u.a,b.b]},{path:"lorry-receipts",component:it,canActivate:[u.a,b.b]},{path:"generate-lr",component:On.a,canActivate:[u.a,b.b]},{path:"expenses",component:ct,canActivate:[u.a,b.b]},{path:"concise",component:ne,canActivate:[u.a,b.b]},{path:"ticket-site-details",component:ve,canActivate:[u.a,b.b]},{path:"card-mapping",component:xi,canActivate:[u.a,b.b]},{path:"fuel-average-analysis",component:Ce.a,canActivate:[u.a,b.b]},{path:"vehicle-trip",component:je,canActivate:[u.a,b.b]},{path:"trip",component:ml,canActivate:[u.a,b.b]},{path:"route-mapper",component:jn,canActivate:[u.a,b.b]},{path:"trends",component:wn,canActivate:[u.a,b.b]},{path:"placements",component:kn,canActivate:[u.a,b.b]},{path:"finance-recovery",component:Vi,canActivate:[u.a,b.b]},{path:"fo-fuel-average",component:Ni.a,canActivate:[u.a,b.b]},{path:"fuel-master",component:nr,canActivate:[u.a,b.b]},{path:"call-logs",component:Nn,canActivate:[u.a,b.b]},{path:"driver-call-suggestion",component:fa,canActivate:[u.a,b.b]},{path:"site-in-out",component:ii,canActivate:[u.a,b.b]},{path:"user-call-summary",component:Gn,canActivate:[u.a,b.b]},{path:"placements-dash-board",component:Jn,canActivate:[u.a,b.b]},{path:"trip-status-feedback",component:Xn,canActivate:[u.a,b.b]},{path:"trip-onward-delay",component:Pa,canActivate:[u.a,b.b]},{path:"user-activity-status",component:ta.a,canActivate:[u.a,b.b]},{path:"placement-delay-faults",component:na,canActivate:[u.a,b.b]},{path:"vehicle-covered-distance",component:_a,canActivate:[u.a,b.b]},{path:"vehicle-gps-detail",component:va,canActivate:[u.a,b.b]},{path:"trip-feedback-logs",component:wa,canActivate:[u.a,b.b]},{path:"short-target",component:Ta,canActivate:[u.a,b.b]},{path:"onward-kmpd",component:Ia,canActivate:[u.a,b.b]},{path:"vehicle-trip-stages",component:Te,canActivate:[u.a,b.b]},{path:"vehicle-trip-states",component:Te,canActivate:[u.a,b.b]},{path:"fuel-fillings",component:Fa.a,canActivate:[u.a,b.b]},{path:"remaining-fuel",component:Aa.a,canActivate:[u.a,b.b]},{path:"consolidate-fuel-average",component:qa.a},{path:"documentation-details",component:Va.a,canActivate:[u.a,b.b]},{path:"documents-summary",component:La.a,canActivate:[u.a,b.b]},{path:"document-dashboard",component:za.a,canActivate:[u.a,b.b]},{path:"driver-performance",component:ja.a,canActivate:[u.a,b.b]},{path:"vehicle-distance",component:Ra.a,canActivate:[u.a,b.b]},{path:"trip-verify-states",component:Ga,canActivate:[u.a,b.b]},{path:"vehicle-performance",component:Ka,canActivate:[u.a,b.b]},{path:"daywise-vehicle-distance",component:Ya},{path:"generate-lr-no-vehicles",component:io,canActivate:[u.a,b.b]},{path:"view-manifesto",component:mo,canActivate:[u.a,b.b]},{path:"driver-list",component:po.a,canActivate:[u.a,b.b]},{path:"vehicle-driver-mapping",component:go.a,canActivate:[u.a,b.b]},{path:"driver-attendance",component:bo.a,canActivate:[u.a,b.b]},{path:"driver-document",component:uo.a,canActivate:[u.a,b.b]},{path:"lr-pod-receipts",component:Co,canActivate:[u.a,b.b]},{path:"vehicle-distance-with-odometer",component:Oo,canActivate:[u.a,b.b]},{path:"vehicles",component:yo.a,canActivate:[u.a,b.b]},{path:"fse-entry",component:Eo,canActivate:[u.a,b.b]},{path:"vehicle-odoMeter",component:Mo,canActivate:[u.a,b.b]},{path:"fuel-indent",component:Uo,canActivate:[u.a,b.b]},{path:"frieght-rate-input",component:Lo,canActivate:[u.a,b.b]},{path:"via-routes",component:Go.a,canActivate:[u.a,b.b]},{path:"freight-expenses",component:ni,canActivate:[u.a,b.b]},{path:"pod-dashboard",component:Bo.a,canActivate:[u.a,b.b]},{path:"advices",component:Yo,canActivate:[u.a,b.b]},{path:"freight-invoices",component:gi,canActivate:[u.a,b.b]},{path:"nearby-pods",component:bi.a,canActivate:[u.a,b.b]},{path:"transfers",component:Mi,canActivate:[u.a,b.b]},{path:"sites",component:Ti,canActivate:[u.a,b.b]},{path:"manage-fo-party",component:Hi,canActivate:[u.a,b.b]},{path:"fuel-mileage-with-odo",component:Ui.a,canActivate:[u.a,b.b]},{path:"web-acttivity-summary",component:ar.a,canActivate:[u.a,b.b]},{path:"dispatch-orders",component:lr,canActivate:[u.a,b.b]},{path:"fuel-consumption",component:cr,canActivate:[u.a,b.b]},{path:"trip-pnl",component:mr,canActivate:[u.a,b.b]},{path:"route-dashboard",component:ur,canActivate:[u.a,b.b]},{path:"fo-user-role",component:Pr,canActivate:[u.a,b.b],canDeactivate:[b.a]},{path:"supervisor-user-association",component:dl,canActivate:[u.a,b.b],canDeactivate:[b.a]},{path:"trends-fo",component:ss,canActivate:[u.a,b.b]},{path:"mvs-freight-statement",component:gs,canActivate:[u.a,b.b]},{path:"unmerge-lrstate",component:xs,canActivate:[u.a,b.b]},{path:"vehicle-supplier-association",component:_s,canActivate:[u.a,b.b]},{path:"mv-gps-apis",component:Os,canActivate:[u.a,b.b]},{path:"mv-gps-api-history",component:Es,canActivate:[u.a,b.b]},{path:"route-trip",component:Ts,canActivate:[u.a,b.b]},{path:"trip-summary",component:As,canActivate:[u.a,b.b]},{path:"route-deviations",component:Vs,canActivate:[u.a,b.b]},{path:"fuel-daily-consumption",component:Rs,canActivate:[u.a,b.b]},{path:"tmg-challan",component:El,canActivate:[u.a,b.b]},{path:"tmg-dashboard",component:Dt.a,canActivate:[u.a,b.b]},{path:"tmg-calls",component:(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.callsDrivar=[],this.callsSupervisorWiseNotRespod=[],this.callsNotRespod=[],this.callsSupervisorWiseTopWorstDriverCalls=[],this.callsSupervisorLoadingTat=[],this.callOnwardKmd=[],this.callsSupervisorUnLoadingTat=[],this.xAxisData=[],this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.chart3={type:"",data:{},options:{}},this.chart4={type:"",data:{},options:{}},this.chart5={type:"",data:{},options:{}},this.getCallsDrivar(),this.getCallsSupervisorWiseNotRespod(),this.getCallsNotRespod(),this.getCallsSupervisorWiseTopWorstDriverCalls(),this.getCallsSupervisorLoadingTat(),this.getCallOnwardKmd(),this.getCallsSupervisorUnLoadingTat(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.xAxisData=[],this.getCallsDrivar(),this.getCallsSupervisorWiseNotRespod(),this.getCallsNotRespod(),this.getCallsSupervisorWiseTopWorstDriverCalls(),this.getCallsSupervisorLoadingTat(),this.getCallOnwardKmd(),this.getCallsSupervisorUnLoadingTat()}getCallsDrivar(){this.callsDrivar=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsDrivar",n).subscribe(t=>{--this.common.loading,console.log("callsDrivar:",t),this.callsDrivar=t.data,this.callsDrivar.length>0&&this.handleChart1()},t=>{--this.common.loading,console.log("Err:",t)})}getCallsSupervisorWiseNotRespod(){this.callsSupervisorWiseNotRespod=[];let t={totalrecord:7,isfo:!0,isadmin:!0,fromdate:new Date((new Date).setMonth((new Date).getMonth()-1)),todate:new Date};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorWiseNotRespod",t).subscribe(t=>{--this.common.loading,console.log("callsSupervisorWiseNotRespod:",t),this.callsSupervisorWiseNotRespod=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getCallsNotRespod(){this.callsNotRespod=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsNotRespod",n).subscribe(t=>{--this.common.loading,console.log("tripUnLoadindTime:",t),this.callsNotRespod=t.data,this.callsNotRespod.length>0&&this.handleChart2()},t=>{--this.common.loading,console.log("Err:",t)})}getCallsSupervisorWiseTopWorstDriverCalls(){this.callsSupervisorWiseTopWorstDriverCalls=[];let t={totalrecord:3,fromdate:new Date((new Date).setDate((new Date).getDate()-7)),todate:new Date,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorWiseTopWorstDriverCalls",t).subscribe(t=>{--this.common.loading,console.log("callsSupervisorWiseTopWorstDriverCalls:",t),this.callsSupervisorWiseTopWorstDriverCalls=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getCallsSupervisorLoadingTat(){this.callsSupervisorLoadingTat=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsSupervisorLoadingTat",n).subscribe(t=>{--this.common.loading,console.log("callsSupervisorLoadingTat:",t),this.callsSupervisorLoadingTat=t.data,this.callsSupervisorLoadingTat.length>0&&this.handleChart3()},t=>{--this.common.loading,console.log("Err:",t)})}getCallsSupervisorUnLoadingTat(){this.callsSupervisorUnLoadingTat=[];let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:15,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorUnLoadingTat",n).subscribe(t=>{--this.common.loading,console.log("callsSupervisorUnLoadingTat:",t),this.callsSupervisorUnLoadingTat=t.data,this.callsSupervisorUnLoadingTat.length>0&&this.handleChart5()},t=>{--this.common.loading,console.log("Err:",t)})}getCallOnwardKmd(){this.callOnwardKmd=[];let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:15,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallOnwardKmd",n).subscribe(t=>{--this.common.loading,console.log("callsSupervisorUnLoadingTat:",t),this.callOnwardKmd=t.data,this.callOnwardKmd.length>0&&this.handleChart4()},t=>{--this.common.loading,console.log("Err:",t)})}getAlertWorstCallTat(){this.callsSupervisorUnLoadingTat=[],++this.common.loading;let t=new Date((new Date).setMonth((new Date).getMonth()-1)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:15,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetAlertWorstCallTat",n).subscribe(t=>{--this.common.loading,console.log("tripUnLoadindTime:",t),this.callsSupervisorUnLoadingTat=t.data,this.callsSupervisorUnLoadingTat.length>0&&this.handleChart5()},t=>{--this.common.loading,console.log("Err:",t)})}handleChart1(){let t=[],e=[];this.callsDrivar.map(n=>{e.push(n.Period),t.push(n["Calls Percent"])});let n=this.common.chartScaleLabelAndGrid(t);console.log("handleChart1",e,t),this.chart1.type="line",this.chart1.data={labels:e,datasets:[{label:"Call %",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Call %"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}handleChart2(){let t=[],e=[];this.callsNotRespod.map(n=>{e.push(n.Period),t.push(n.percent)});let n=this.common.chartScaleLabelAndGrid(t);console.log("handleChart2",e,t),this.chart2.type="line",this.chart2.data={labels:e,datasets:[{label:"Call %",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Call %"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}handleChart3(){let t=[],e=z.groupBy(this.callsSupervisorLoadingTat,"Executive"),n=z.groupBy(this.callsSupervisorLoadingTat,"Period"),a=Object.keys(n).map(e=>{let a="#"+Math.floor(16777215*Math.random()).toString(16);return t.push(...n[e].map(t=>t["TAT(Hrs)"])),{label:e,backgroundColor:a,borderColor:a,borderWidth:1,data:n[e].map(t=>t["TAT(Hrs)"])}});console.log("DataSets:",a),console.log("handleChart3",[],t),this.chart3.type="bar",this.chart3.data={labels:Object.keys(e),datasets:a};let o=this.common.chartScaleLabelAndGrid(t);this.chart3.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"TAT (in Hrs.)"+o.yaxisLabel},ticks:{stepSize:o.gridSize},suggestedMin:o.minValue}]}}}handleChart4(){let t=z.groupBy(this.callOnwardKmd,"Executive"),e=z.groupBy(this.callOnwardKmd,"Period"),n=[],a=Object.keys(e).map(t=>{let a="#"+Math.floor(16777215*Math.random()).toString(16);return n.push(...e[t].map(t=>t["Onward KMs"])),{label:t,backgroundColor:a,borderColor:a,borderWidth:1,data:this.common.chartScaleLabelAndGrid(e[t].map(t=>t["Onward KMs"])).scaleData}});this.chart4.type="bar",this.chart4.data={labels:Object.keys(t),datasets:a},console.log("yaxis:",n);let o=this.common.chartScaleLabelAndGrid(n);this.chart4.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"KM"+o.yaxisLabel},ticks:{stepSize:o.gridSize},suggestedMin:o.minValue}]}},console.log(" this.chart4:",this.chart4)}handleChart5(){let t=[],e=z.groupBy(this.callsSupervisorUnLoadingTat,"Executive"),n=z.groupBy(this.callsSupervisorUnLoadingTat,"Period"),a=Object.keys(n).map(e=>{let a="#"+Math.floor(16777215*Math.random()).toString(16);return t.push(...n[e].map(t=>t["TAT(Hrs)"])),{label:e,backgroundColor:a,borderColor:a,borderWidth:1,data:n[e].map(t=>t["TAT(Hrs)"])}});console.log("DataSets:",a),console.log("handleChart5",[],t),this.chart5.type="bar",this.chart5.data={labels:Object.keys(e),datasets:a};let o=this.common.chartScaleLabelAndGrid(t);this.chart5.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"TAT (in Hrs.)"+o.yaxisLabel},ticks:{stepSize:o.gridSize},suggestedMin:o.minValue}]}}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg-calls"]],decls:68,vars:17,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"outer",2,"min-height","265px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-4","pl-0","pr-0"],[1,"col-3"],[1,"col-6"],[1,"outer",2,"border","1px solid #7c94bf","min-height","120px"],[2,"margin-right","5px","min-height","350px","max-height","350px",3,"type","data","options"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h6",4),r["\u0275\u0275elementStart"](5,"b",5),r["\u0275\u0275text"](6,"Driver Calls % "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"h6",4),r["\u0275\u0275elementStart"](11,"b",5),r["\u0275\u0275text"](12,"Supervisor Wise % Not Responded Calls"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"table",8),r["\u0275\u0275elementStart"](14,"thead",9),r["\u0275\u0275elementStart"](15,"th"),r["\u0275\u0275text"](16,"Executive Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"th"),r["\u0275\u0275text"](18,"Vehicle Count"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"th"),r["\u0275\u0275text"](20,"Yesterday %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"th"),r["\u0275\u0275text"](22,"Last 30 Days %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"tbody",10),r["\u0275\u0275template"](24,Ul,9,4,"tr",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",12),r["\u0275\u0275elementStart"](26,"div",3),r["\u0275\u0275elementStart"](27,"h6",4),r["\u0275\u0275elementStart"](28,"b",5),r["\u0275\u0275text"](29,"% Not Responded Calls"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div",1),r["\u0275\u0275element"](32,"div",13),r["\u0275\u0275elementStart"](33,"div",14),r["\u0275\u0275elementStart"](34,"div",15),r["\u0275\u0275elementStart"](35,"h6",4),r["\u0275\u0275elementStart"](36,"b",5),r["\u0275\u0275text"](37," Worst 3 Driver Calls % "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"table",8),r["\u0275\u0275elementStart"](39,"thead",9),r["\u0275\u0275elementStart"](40,"th"),r["\u0275\u0275text"](41,"Executive Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"th"),r["\u0275\u0275text"](43,"Yesterday % "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"th"),r["\u0275\u0275text"](45,"Last 30 Days %"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"tbody",10),r["\u0275\u0275template"](47,Gl,7,3,"tr",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](48,"div",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"div",1),r["\u0275\u0275elementStart"](50,"div",2),r["\u0275\u0275elementStart"](51,"div",3),r["\u0275\u0275elementStart"](52,"h6",4),r["\u0275\u0275elementStart"](53,"b",5),r["\u0275\u0275text"](54,"Longest Loading TAT"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](55,"chart",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"div",2),r["\u0275\u0275elementStart"](57,"div",3),r["\u0275\u0275elementStart"](58,"h6",4),r["\u0275\u0275elementStart"](59,"b",5),r["\u0275\u0275text"](60,"Onward KMPD "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](61,"chart",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"div",12),r["\u0275\u0275elementStart"](63,"div",3),r["\u0275\u0275elementStart"](64,"h6",4),r["\u0275\u0275elementStart"](65,"b",5),r["\u0275\u0275text"](66,"Worst Unloading TAT"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](67,"chart",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("type",e.chart1.type)("data",e.chart1.data)("options",e.chart1.options),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",e.callsSupervisorWiseNotRespod),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart2.type)("data",e.chart2.data)("options",e.chart2.options),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",e.callsSupervisorWiseTopWorstDriverCalls),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("type",e.chart3.type)("data",e.chart3.data)("options",e.chart3.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart4.type)("data",e.chart4.data)("options",e.chart4.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart5.type)("data",e.chart5.data)("options",e.chart5.options))},directives:[Ft.ChartComponent,c.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),t})(),canActivate:[u.a,b.b]},{path:"tmg-alerts",component:(()=>{class t{constructor(t,e,n){this.api=t,this.common=e,this.modalService=n,this.alertAckTat=[],this.alertCallTat=[],this.alertVscTat=[],this.alertNotAck=[],this.alertNotCall=[],this.alertOpen=[],this.alertWorstCallTat=[],this.alertVscPending=[],this.alertVscWorst=[],this.chart={type:"",data:{},options:{}},this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.getAlertAckTat(),this.getAlertCallTat(),this.getAlertVscTat(),this.getAlertNotAck(),this.getAlertNotCall(),this.getAlertOpen(),this.getAlertVscPending(),this.getAlertWorstCallTat(),this.getAlertVscWorst(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getAlertAckTat(),this.getAlertCallTat(),this.getAlertVscTat(),this.getAlertNotAck(),this.getAlertNotCall(),this.getAlertOpen(),this.getAlertVscPending(),this.getAlertWorstCallTat(),this.getAlertVscWorst()}getAlertAckTat(){this.alertAckTat=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:1};this.api.post("Tmgreport/GetAlertAckTat",n).subscribe(t=>{--this.common.loading,console.log("alertAckTat:",t),this.alertAckTat=t.data,this.alertAckTat.length>0&&this.handleChart()},t=>{--this.common.loading,console.log("Err:",t)})}getAlertCallTat(){this.alertCallTat=[];let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:1};++this.common.loading,this.api.post("Tmgreport/GetAlertCallTat",n).subscribe(t=>{--this.common.loading,console.log("alertCallTat:",t),this.alertCallTat=t.data,this.alertCallTat.length>0&&this.handleChart1()},t=>{--this.common.loading,console.log("Err:",t)})}getAlertVscTat(){this.alertVscTat=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),groupdays:1};this.api.post("Tmgreport/GetAlertVscTat",n).subscribe(t=>{--this.common.loading,console.log("alertVscTat:",t),this.alertVscTat=t.data,this.alertVscTat.length>0&&this.handleChart2()},t=>{--this.common.loading,console.log("Err:",t)})}getAlertNotAck(){this.alertNotAck=[];let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetAlertNotAck",n).subscribe(t=>{--this.common.loading,console.log("alertNotAck:",t),this.alertNotAck=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getAlertNotCall(){this.alertNotCall=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetAlertNotCall",n).subscribe(t=>{--this.common.loading,console.log("alertNotCall:",t.data),this.alertNotCall=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getAlertVscPending(){this.alertVscPending=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetAlertVscPending",n).subscribe(t=>{--this.common.loading,console.log("alertVscPending:",t.data),this.alertVscPending=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getAlertOpen(){this.alertOpen=[];let t=new Date((new Date).setDate((new Date).getDate()-7)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetAlertOpen",n).subscribe(t=>{--this.common.loading,console.log("alertOpen:",t),this.alertOpen=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getAlertWorstCallTat(){this.alertWorstCallTat=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetAlertWorstCallTat",n).subscribe(t=>{--this.common.loading,console.log("alertWorstCallTat:",t.data),this.alertWorstCallTat=t.data},t=>{--this.common.loading,console.log("Err:",t)})}getAlertVscWorst(){this.alertVscWorst=[],++this.common.loading;let t=new Date((new Date).setDate((new Date).getDate()-30)),e=new Date,n={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(e),totalrecord:3};this.api.post("Tmgreport/GetAlertVscWorst",n).subscribe(t=>{--this.common.loading,console.log("alertVscWorst:",t.data),this.alertVscWorst=t.data},t=>{--this.common.loading,console.log("Err:",t)})}handleChart(){let t=[],e=[];this.alertAckTat.map(n=>{e.push(n.Period),t.push(n["Ack TAT(Hrs)"])}),console.log("handleChart",e,t),this.chart.type="line",this.chart.data={labels:e,datasets:[{label:"Ack TAT(Hrs)",data:t,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Ack TAT (in Hrs.)"}}]}}}handleChart1(){let t=[],e=[];this.alertCallTat.map(n=>{e.push(n.Period),t.push(n["Call TAT(Hrs)"])}),console.log("handleChart1",e,t),this.chart1.type="line",this.chart1.data={labels:e,datasets:[{label:"Time (in Mins.)",data:t,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Mins.)"}}]}}}handleChart2(){let t=[],e=[];this.alertVscTat.map(n=>{e.push(n.Period),t.push(n["TAT(Hrs)"])}),console.log("handleChart2",e,t),this.chart2.type="line",this.chart2.data={labels:e,datasets:[{label:"Time (in Mins)",data:t,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Mins.)"}}]}}}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](f.a),r["\u0275\u0275directiveInject"](y.r))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg-alerts"]],decls:110,vars:15,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"col-4","pl-0","pr-0"],[1,"outer",2,"min-height","170px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"outer",2,"min-height","100px"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"h6",4),r["\u0275\u0275elementStart"](5,"b",5),r["\u0275\u0275text"](6,"Alert Ack TAT in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",2),r["\u0275\u0275elementStart"](9,"div",3),r["\u0275\u0275elementStart"](10,"h6",4),r["\u0275\u0275elementStart"](11,"b",5),r["\u0275\u0275text"](12,"Alert Call TAT in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",7),r["\u0275\u0275elementStart"](15,"div",3),r["\u0275\u0275elementStart"](16,"h6",4),r["\u0275\u0275elementStart"](17,"b",5),r["\u0275\u0275text"](18,"VSC TAT in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"chart",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",1),r["\u0275\u0275elementStart"](21,"div",2),r["\u0275\u0275elementStart"](22,"div",8),r["\u0275\u0275elementStart"](23,"h6",4),r["\u0275\u0275elementStart"](24,"b",5),r["\u0275\u0275text"](25,"Longest Alert Not Ack"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"table",9),r["\u0275\u0275elementStart"](27,"thead",10),r["\u0275\u0275elementStart"](28,"th"),r["\u0275\u0275text"](29,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"th"),r["\u0275\u0275text"](31,"Alert Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"th"),r["\u0275\u0275text"](33,"Alert Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"tbody",11),r["\u0275\u0275template"](35,Bl,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div",2),r["\u0275\u0275elementStart"](37,"div",8),r["\u0275\u0275elementStart"](38,"h6",4),r["\u0275\u0275elementStart"](39,"b",5),r["\u0275\u0275text"](40,"Longest Alert Not Called "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"table",9),r["\u0275\u0275elementStart"](42,"thead",10),r["\u0275\u0275elementStart"](43,"th"),r["\u0275\u0275text"](44,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"th"),r["\u0275\u0275text"](46,"Alert Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"th"),r["\u0275\u0275text"](48,"Alert Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"tbody",11),r["\u0275\u0275template"](50,$l,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"div",7),r["\u0275\u0275elementStart"](52,"div",8),r["\u0275\u0275elementStart"](53,"h6",4),r["\u0275\u0275elementStart"](54,"b",5),r["\u0275\u0275text"](55,"Longest Pending VSC TAT "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"table",9),r["\u0275\u0275elementStart"](57,"thead",10),r["\u0275\u0275elementStart"](58,"td"),r["\u0275\u0275text"](59,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"th"),r["\u0275\u0275text"](61,"TAT (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"th"),r["\u0275\u0275text"](63,"Oldest VSC Date "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](64,"tbody",11),r["\u0275\u0275template"](65,Wl,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](66,"div",1),r["\u0275\u0275elementStart"](67,"div",2),r["\u0275\u0275elementStart"](68,"div",13),r["\u0275\u0275elementStart"](69,"h6",4),r["\u0275\u0275elementStart"](70,"b",5),r["\u0275\u0275text"](71,"Longest Open Alert"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](72,"table",9),r["\u0275\u0275elementStart"](73,"thead",10),r["\u0275\u0275elementStart"](74,"th"),r["\u0275\u0275text"](75,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](76,"th"),r["\u0275\u0275text"](77,"Alert Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](78,"th"),r["\u0275\u0275text"](79,"Alert Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](80,"tbody",11),r["\u0275\u0275template"](81,Kl,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](82,"div",2),r["\u0275\u0275elementStart"](83,"div",13),r["\u0275\u0275elementStart"](84,"h6",4),r["\u0275\u0275elementStart"](85,"b",5),r["\u0275\u0275text"](86,"Worst Call TAT in Last 7 Days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](87,"table",9),r["\u0275\u0275elementStart"](88,"thead",10),r["\u0275\u0275elementStart"](89,"th"),r["\u0275\u0275text"](90,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](91,"th"),r["\u0275\u0275text"](92,"Alert Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](93,"th"),r["\u0275\u0275text"](94,"TAT (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](95,"tbody",11),r["\u0275\u0275template"](96,ql,7,3,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](97,"div",7),r["\u0275\u0275elementStart"](98,"div",13),r["\u0275\u0275elementStart"](99,"h6",4),r["\u0275\u0275elementStart"](100,"b",5),r["\u0275\u0275text"](101,"Worst VSC TAT in Last 7 Days "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](102,"table",9),r["\u0275\u0275elementStart"](103,"thead",10),r["\u0275\u0275elementStart"](104,"th"),r["\u0275\u0275text"](105,"Executive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](106,"th"),r["\u0275\u0275text"](107,"TAT (Hrs)"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](108,"tbody",11),r["\u0275\u0275template"](109,Jl,5,2,"tr",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("type",e.chart.type)("data",e.chart.data)("options",e.chart.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart1.type)("data",e.chart1.data)("options",e.chart1.options),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("type",e.chart2.type)("data",e.chart2.data)("options",e.chart2.options),r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngForOf",e.alertNotAck),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.alertNotCall),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.alertVscPending),r["\u0275\u0275advance"](16),r["\u0275\u0275property"]("ngForOf",e.alertOpen),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",e.alertWorstCallTat),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",e.alertVscWorst))},directives:[Ft.ChartComponent,c.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),t})(),canActivate:[u.a,b.b]}]}];let Zl=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[l.g.forChild(Yl)],l.g]}),t})();const Ql=[{path:"",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-miscellaneous"]],decls:1,vars:0,template:function(t,e){1&t&&r["\u0275\u0275element"](0,"router-outlet")},directives:[l.h],encapsulation:2}),t})(),children:[{path:"404",component:(()=>{class t{constructor(t){this.menuService=t}goToHome(){this.menuService.navigateHome()}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](s.Z))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["type","button",1,"btn","btn-block","btn-hero-primary",3,"click"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"nb-card"),r["\u0275\u0275elementStart"](3,"nb-card-body"),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"h2",3),r["\u0275\u0275text"](6,"404 Page Not Found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"small",4),r["\u0275\u0275text"](8,"The page you were looking for doesn't exist"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",5),r["\u0275\u0275listener"]("click",(function(){return e.goToHome()})),r["\u0275\u0275text"](10," Take me home "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())},directives:[s.s,s.r],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.btn[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),t})()}]}];let Xl=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[l.g.forChild(Ql)],l.g]}),t})(),td=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[p.a,Xl]]}),t})();var ed=n("FUS3"),nd=n("dImq"),ad=n("d2mR"),od=n("qfjS");let id=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[Zl,p.a,g,td,Ft.ChartModule,ed.a,Tn.c,Tn.e,tt.B,It.b,nd.LorryReceiptModule,ad.a,od.DriverModule]]}),t})()}}]);