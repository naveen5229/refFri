(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jkDv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return Wo}));var a=n("iInd"),o=n("H+bZ"),i=n("OlR4"),r=n("NTD5"),l=n("Nfpe"),s=n("8Y7J"),d=n("G0yt"),c=n("tKwJ"),m=n("SVse"),g=n("wD9S");function p(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",3),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let h=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.escalationMatrix=null,this.matrixList=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.Matrixdata()}ngOnInit(){}refresh(){this.Matrixdata()}Matrixdata(){this.common.loading++,this.api.post("FoTicketEscalation/getEscalationMatrix",{}).subscribe(e=>{this.common.loading--,console.log("res: "+e.msg),this.matrixList=e.msg;let t=this.matrixList[0],n={};for(var a in t)if("_"!=a.charAt(0)){this.headings.push(a);let e={title:this.formatTitle(a),placeholder:this.formatTitle(a)};n[a]=e}this.table.data={headings:n,columns:this.getTableColumns()}},e=>{this.common.loading--,this.common.showError()})}getTableColumns(){let e=[];return console.log("Data=",this.matrixList),this.matrixList.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};this.valobj.Action={class:"",icons:this.actionIcons(t)},e.push(this.valobj)}),e}actionIcons(e){let t=[];return t.push({class:"fa fa-edit",action:this.openAddIssueModel.bind(this,e)}),console.log("details-------:",e),t}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}openAddIssueModel(e){let t=e._issue_type_id,n=e["Issue Name"];console.log("foid is:",e),e&&(this.common.params={issueType:t,issueTypeValue:n}),this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.Matrixdata()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["escalation-matrix"]],decls:7,vars:1,consts:[[1,"col-sm-4"],[2,"min-height","580px"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Escalation Matrix"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body",1),s["\u0275\u0275template"](6,p,1,2,"smart-table",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.matrixList&&t.matrixList.length))},directives:[c.s,c.v,c.r,m.u,g.a],styles:["button[_ngcontent-%COMP%]{background-color:#ffebcd}.search[_ngcontent-%COMP%]{width:220px;margin-left:20px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var u=n("s7LF"),b=n("0zba");function f(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"i",31),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).removeField("groupFlag",n.gid,"gid")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.gid),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.gname)}}function v(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"table",28),s["\u0275\u0275elementStart"](1,"tr"),s["\u0275\u0275elementStart"](2,"th"),s["\u0275\u0275text"](3,"S.No."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"th"),s["\u0275\u0275text"](5,"gId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275text"](7,"gName"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275elementStart"](11,"i",29),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().groupFlag=!1})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,f,9,3,"tr",30),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngForOf",e.getUserGroups)}}function S(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"i",31),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).removeField("groupFlag",n.fid,"fid")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.fid),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.fname)}}function x(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"table",32),s["\u0275\u0275elementStart"](1,"tr"),s["\u0275\u0275elementStart"](2,"th"),s["\u0275\u0275text"](3,"S.No."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"th"),s["\u0275\u0275text"](5,"fId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275text"](7,"fName"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275elementStart"](11,"i",29),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().userFlag=!1})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,S,9,3,"tr",30),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngForOf",e.getGroupUsers)}}function y(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"auto-suggestion",33),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().searchVehicle(t)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("preSelected",null))}function C(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",34),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().addVehicleGroupAss.csv=t}))("change",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().handleFileSelection(t)})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngModel",e.addVehicleGroupAss.csv)}}function M(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"i",31),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).removeField("vehicleFlag",n.vid,"vid")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.vid),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.vregno)}}function E(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"table",28),s["\u0275\u0275elementStart"](1,"tr"),s["\u0275\u0275elementStart"](2,"th"),s["\u0275\u0275text"](3,"S.No."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"th"),s["\u0275\u0275text"](5,"vId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275text"](7,"vRegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275elementStart"](11,"i",29),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().vehicleFlag=!1})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,M,9,3,"tr",30),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngForOf",e.getVehicles)}}function _(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"i",31),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).removeField("vehicleFlag",n.gid,"gid")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.gid),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.gname)}}function w(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"table",32),s["\u0275\u0275elementStart"](1,"tr"),s["\u0275\u0275elementStart"](2,"th"),s["\u0275\u0275text"](3,"S.No."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"th"),s["\u0275\u0275text"](5,"gId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275text"](7,"gName"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275elementStart"](11,"i",29),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().vehicleGroupFlag=!1})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,_,9,3,"tr",30),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngForOf",e.getVehicleGroups)}}const k=function(){return["foaname","foname"]};let P=(()=>{class e{constructor(e,t,n,a){this.modalService=e,this.api=t,this.common=n,this.user=a,this.groupFlag=!1,this.userFlag=!1,this.vehicleFlag=!1,this.vehicleGroupFlag=!1,this.getGroupUsers=[],this.getUserGroups=[],this.getVehicles=[],this.getVehicleGroups=[],this.addGroupDetails={foid:"",groupName:""},this.addUserGroupAss={grpid:"",fid:""},this.addVehicleGroupAss={grpid:"",vid:null,csv:null},this.selectOption="single",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}searchUserId(e){this.addGroupDetails.foid=e.id}addGroup(){let e={foid:this.addGroupDetails.foid,groupName:this.addGroupDetails.groupName};console.log("foid: ",this.addGroupDetails.foid),console.log("groupName: ",this.addGroupDetails.groupName),this.common.loading++,this.api.post("GroupManagment/insertGroup",e).subscribe(e=>{this.common.loading--,console.log("res: "+e),console.log("success: "+e.success),"true"==e.success&&this.common.showToast("Group Created")},e=>{this.common.loading--,this.common.showError()})}searchGroupId(e){this.addUserGroupAss.fid=e.foaid}searchGroup(e){this.addUserGroupAss.grpid=e.id}addUserGroup(){let e={fid:this.addUserGroupAss.fid,grpid:this.addUserGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/insertGroupUserAssoc",e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),"true"==e.success&&this.common.showToast("User Created")},e=>{this.common.loading--,this.common.showError()})}showGroups(){this.groupFlag=!0,console.log("groupFlag",this.groupFlag);let e={user_id:this.addUserGroupAss.fid};this.common.loading++,this.api.post("GroupManagment/getUsersGroups",e).subscribe(e=>{this.common.loading--,this.getUserGroups=e.data,console.log("res: ",e.data)},e=>{this.common.loading--,this.common.showError()})}showUsers(){this.userFlag=!0,console.log("userFlag",this.userFlag);let e={gid:this.addUserGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/getGroupsUsers",e).subscribe(e=>{this.common.loading--,this.getGroupUsers=e.data,console.log("res: ",e.data)},e=>{this.common.loading--,this.common.showError()})}searchVGroup(e){this.addVehicleGroupAss.grpid=e.id}searchVehicle(e){this.addVehicleGroupAss.vid=e.id}addVehicleGroup(){let e={vid:this.addVehicleGroupAss.vid,grpid:this.addVehicleGroupAss.grpid,csv:this.addVehicleGroupAss.csv};console.log("result:",e),this.common.loading++,this.api.post("GroupManagment/insertGroupVehicleAssoc",e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data);let t=e.msg.split(":")[1];this.common.showToast(t||e.msg)},e=>{this.common.loading--,this.common.showError()})}showVehicles(){this.vehicleFlag=!0;let e={gid:this.addVehicleGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/getGroupsVehicles",e).subscribe(e=>{this.common.loading--,this.getVehicles=e.data,console.log("res: ",e.data)},e=>{this.common.loading--,this.common.showError()})}showvehicleGroups(){this.vehicleGroupFlag=!0;let e={vId:this.addVehicleGroupAss.vid};this.common.loading++,this.api.post("GroupManagment/getVehiclesGroups",e).subscribe(e=>{this.common.loading--,this.getVehicleGroups=e.data,console.log("res: ",e.data)},e=>{this.common.loading--,this.common.showError()})}removeField(e,t,n){let a;console.log("selectFlag",e),"groupFlag"==e&&(a="gid"==n?{gId:t,uId:this.addUserGroupAss.fid}:{gId:this.addUserGroupAss.grpid,uId:t},console.log("params: ",a),this.common.loading++,this.api.post("GroupManagment/deleteGroupsUsers",a).subscribe(e=>{this.common.loading--,this.showUsers(),console.log("res: "+e.data)},e=>{this.common.loading--,this.common.showError()})),"vehicleFlag"==e&&(a="gid"==n?{gId:t,vId:this.addVehicleGroupAss.vid}:{gId:this.addVehicleGroupAss.grpid,vId:t},console.log("params: ",a),this.common.loading++,this.api.post("GroupManagment/deleteGroupsVehicles",a).subscribe(e=>{this.common.loading--,this.showVehicles(),console.log("res: "+e.data)},e=>{this.common.loading--,this.common.showError()}))}handleFileSelection(e){this.common.loading++,this.common.getBase64(e.target.files[0]).then(t=>{this.common.loading--;let n=e.target.files[0];if(console.log("Type",n.type),"application/vnd.ms-excel"!=n.type)return alert("valid Format Are : csv"),!1;t=t.toString().replace("vnd.ms-excel","csv"),console.log("Base 64: ",t),this.addVehicleGroupAss.csv=t},e=>{this.common.loading--,console.error("Base Err: ",e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["group-managements"]],decls:68,vars:14,consts:[[1,"model-header",2,"margin-left","10px"],["id","model-basic-title",1,"model-title"],[1,"model-body-1",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-1-tile",2,"margin-left","50px","margin-top","10px"],[1,"row",2,"margin-top","20px","margin-bottom","20px"],[1,"col-2"],[1,"col-3"],["type","text","placeholder","group name","name","groupName",1,"form-control",3,"ngModel","ngModelChange"],["type","button","outline","","id","add",1,"btn","btn-primary",3,"click"],[1,"model-body-2",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-2-tile",2,"margin-left","50px","margin-top","10px"],[1,"col-1"],[1,"col-3",2,"text-align","center"],["seperator","-","url","Suggestion/getAllFoAdminListwithCustomer?isFo=true","placeholder","user ID",3,"display","preSelected","onSelected"],["url","suggestion/getGroups","display","description","placeholder","Group ID",3,"preSelected","onSelected"],[1,"row",2,"margin-bottom","10px"],["type","button","outline","",1,"btn-group",2,"cursor","pointer","background-color","darkcyan","color","white","border","2px solid darkgray","border-radius","2px","font-size","10px",3,"click"],[1,"col-4"],[1,"row"],[1,"col-6"],["class","table show-group",4,"ngIf"],["class","table show-users",4,"ngIf"],[1,"model-body-3",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-3-tile",2,"margin-left","50px","margin-top","10px"],["type","radio","value","single","name","radio",3,"ngModel","ngModelChange","input"],["type","radio","value","csv","name","radio",3,"ngModel","ngModelChange","input"],["class","col-3",4,"ngIf","ngIfElse"],["csv",""],[1,"table","show-group"],[1,"fa","fa-hand-o-left",2,"cursor","pointer",3,"click"],[4,"ngFor","ngForOf"],["aria-label","Delete",1,"fa","fa-trash",3,"click"],[1,"table","show-users"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle ID",3,"preSelected","onSelected"],["type","file","name","csv",3,"ngModel","ngModelChange","change"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"h4",1),s["\u0275\u0275text"](2,"Group Managements"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275text"](5,"Groups"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275element"](7,"div",5),s["\u0275\u0275elementStart"](8,"div",6),s["\u0275\u0275elementStart"](9,"input",7),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.addGroupDetails.groupName=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](10,"div",5),s["\u0275\u0275elementStart"](11,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.addGroup()})),s["\u0275\u0275text"](12,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",9),s["\u0275\u0275elementStart"](14,"div",10),s["\u0275\u0275text"](15,"Group Users"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",4),s["\u0275\u0275element"](17,"div",11),s["\u0275\u0275elementStart"](18,"div",12),s["\u0275\u0275elementStart"](19,"auto-suggestion",13),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchGroupId(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](20,"div",5),s["\u0275\u0275elementStart"](21,"div",6),s["\u0275\u0275elementStart"](22,"auto-suggestion",14),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchGroup(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](23,"div",11),s["\u0275\u0275elementStart"](24,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.addUserGroup()})),s["\u0275\u0275text"](25,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",15),s["\u0275\u0275element"](27,"div",5),s["\u0275\u0275elementStart"](28,"button",16),s["\u0275\u0275listener"]("click",(function(){return t.showGroups()})),s["\u0275\u0275text"](29,"See Groups"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](30,"div",17),s["\u0275\u0275elementStart"](31,"button",16),s["\u0275\u0275listener"]("click",(function(){return t.showUsers()})),s["\u0275\u0275text"](32,"See Users"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",18),s["\u0275\u0275elementStart"](34,"div",19),s["\u0275\u0275template"](35,v,13,1,"table",20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",19),s["\u0275\u0275template"](37,x,13,1,"table",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"div",22),s["\u0275\u0275elementStart"](39,"div",23),s["\u0275\u0275text"](40,"Group Vehicle"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"div",4),s["\u0275\u0275element"](42,"div",11),s["\u0275\u0275elementStart"](43,"div",12),s["\u0275\u0275elementStart"](44,"auto-suggestion",14),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVGroup(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"div",5),s["\u0275\u0275elementStart"](46,"input",24),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectOption=e}))("input",(function(){return t.addVehicleGroupAss.csv=null})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](47,"single "),s["\u0275\u0275elementStart"](48,"input",25),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectOption=e}))("input",(function(){return t.addVehicleGroupAss.vid=null})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](49,"csv "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](50,y,2,1,"div",26),s["\u0275\u0275template"](51,C,1,1,"ng-template",null,27,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275element"](53,"div",11),s["\u0275\u0275elementStart"](54,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.addVehicleGroup()})),s["\u0275\u0275text"](55,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"div",15),s["\u0275\u0275element"](57,"div",5),s["\u0275\u0275elementStart"](58,"button",16),s["\u0275\u0275listener"]("click",(function(){return t.showVehicles()})),s["\u0275\u0275text"](59,"See Vehicles"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](60,"div",17),s["\u0275\u0275elementStart"](61,"button",16),s["\u0275\u0275listener"]("click",(function(){return t.showvehicleGroups()})),s["\u0275\u0275text"](62,"See Groups"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](63,"div",18),s["\u0275\u0275elementStart"](64,"div",19),s["\u0275\u0275template"](65,E,13,1,"table",20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](66,"div",19),s["\u0275\u0275template"](67,w,13,1,"table",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](52);s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngModel",t.addGroupDetails.groupName),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("display",s["\u0275\u0275pureFunction0"](13,k))("preSelected",null),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("ngIf",t.groupFlag),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.userFlag),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.selectOption),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.selectOption),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf","single"==t.selectOption)("ngIfElse",e),s["\u0275\u0275advance"](15),s["\u0275\u0275property"]("ngIf",t.vehicleFlag),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.vehicleGroupFlag)}},directives:[u.d,u.r,u.u,b.a,m.u,u.z,m.t],styles:["td[_ngcontent-%COMP%]{background-color:#fff}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var O=n("crgt"),D=n("ia/1");function I(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",4),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let T=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.ticketProperties=[],this.checkFlag=!1,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.refresh()}ngOnInit(){}refresh(){this.getFoProperties()}getFoProperties(){this.common.loading++,this.api.post("FoTicketProperties/getFoProperties",{}).subscribe(e=>{if(this.common.loading--,this.ticketProperties=[],this.ticketProperties=e.data,null==this.ticketProperties)return this.ticketProperties=[];let t=this.ticketProperties[0],n={};for(var a in t)if("_"!=a.charAt(0)){this.headings.push(a);let e={title:this.formatTitle(a),placeholder:this.formatTitle(a)};n[a]=e}this.table.data={headings:n,columns:this.getTableColumns()}},e=>{this.common.loading--,this.common.showError()})}getTableColumns(){let e=[];return this.ticketProperties.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};this.valobj.Action={class:"",icons:this.actionIcons(t)},e.push(this.valobj)}),e}actionIcons(e){let t=[];return t.push({class:"fas fa-pencil-alt",action:this.addNewProperties.bind(this,e)},{class:"fa fa-trash ml-2",action:this.deleteProperties.bind(this,e)}),e._row_id&&t.push({class:"fa fa-edit ml-2",action:this.openUpdatePropertiesModel.bind(this,e)}),t}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}openUpdatePropertiesModel(e){this.common.params={values:e,flag:"Edit"},this.modalService.open(O.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.getFoProperties()})}addNewProperties(e){this.common.params={values:e,flag:"Add"},this.modalService.open(O.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.getFoProperties()})}deleteProperties(e){let t={id:e._row_id};e._row_id&&(this.common.params={title:"Delete Property ",description:"<b>&nbsp;Are You Sure To Delete This Record<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("FoTicketProperties/deleteFoProperties ",t).subscribe(e=>{this.common.loading--,"1"==e.code&&this.common.showToast([e][0].msg),this.getFoProperties()},e=>{this.common.loading--,this.common.showError()}))}))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["ticket-properties"]],decls:8,vars:1,consts:[[1,"col-sm-4"],[2,"min-height","580px"],[1,"row","mt-2"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Ticket Properties"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body",1),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275template"](7,I,1,2,"smart-table",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.ticketProperties&&t.ticketProperties.length))},directives:[c.s,c.v,c.r,m.u,g.a],styles:['.search[_ngcontent-%COMP%]{width:220px;margin-left:20px}[_nghost-%COMP%]     .fa-trash{color:red;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-alt{color:#00f;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-pencil-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-17px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-alt span:before{content:"Add";display:block;position:absolute;top:0;left:0;background-color:#00f;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-pencil-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #00f;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-pencil-alt:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:green;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-13px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var A=n("qfBg"),F=n("flj8"),L=n("IAMq");function V(e,t){if(1&e&&s["\u0275\u0275element"](0,"nb-menu",3),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("items",e.user._menu.admin)}}let z=(()=>{class e{constructor(e,t,n,a,o){this.common=e,this.user=t,this.api=n,this.router=a,this.accountService=o,console.log(t._menu.admin),"customer"!=this.user._loggedInBy?this.accountService.branches.length||this.getBranches():this.router.navigate(["/pages"])}getBranches(){this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{console.log("Branches :",e.data),this.accountService.branches=e.data},e=>{console.log("Error: ",e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](F.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[1,"admin"],["autoCollapse","true",3,"items",4,"ngIf"],[1,"admin-dot"],["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ngx-sample-layout",0),s["\u0275\u0275template"](1,V,1,1,"nb-menu",1),s["\u0275\u0275element"](2,"router-outlet",2),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.user._menu.admin.length))},directives:[L.a,m.u,a.h,c.W],styles:[""]}),e})();var N=n("suYr"),j=n("3a3o");function R(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",5),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function H(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let U=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.issues=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getIssueAlerts(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getIssueAlerts()}getIssueAlerts(){++this.common.loading,this.api.get("IssueDetection/getIssueAlerts?").subscribe(e=>{--this.common.loading,console.log("Res: ",e.data),this.issues=e.data,this.issues.length?this.setTable():this.resetTable()},e=>{--this.common.loading,console.error(e),this.common.showError()})}resetTable(){this.table.data={headings:{},columns:[]}}setTable(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}generateHeadings(){let e={};for(var t in this.issues[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getTableColumns(){let e=[];return this.issues.map(t=>{let n={};for(let e in this.generateHeadings())n[e]="Action"==e?{value:"",isHTML:!1,action:null,icons:this.actionIcons(t)}:{value:t[e],class:"black",action:""};e.push(n)}),e}actionIcons(e){return[{class:"fa fa-question-circle mr-3",action:this.goToTrail.bind(this,e)},{class:"fa fa-check-circle mr-3",action:this.issueComplete.bind(this,e)}]}goToSiteFencing(){window.open("http://dev.elogist.in/dost/#/admin/site-fencing")}goToTrail(e){if(e._site_id)this.goToSiteFencing();else{let t=new Date(e.addtime),n=new Date(t.setHours(t.getHours()-48)),a=this.common.dateFormatter(n),o={vehicle_id:e._referid,tTime:e.addtime,suggest:11,latch_time:a};console.log("VehicleStatusData",o),this.common.params=o,this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})}}issueComplete(e){console.log("issue",e),this.common.loading++;let t={alertId:e._id,status:1};console.log(t),this.api.post("IssueDetection/issueStatusUpdate?",t).subscribe(e=>{this.common.loading--,this.getIssueAlerts()},e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["issue-alerts"]],decls:12,vars:3,consts:[[1,"col-sm-4"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","20px"],[3,"data","settings"],[1,"no-data"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Issues Status Changes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body"),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275template"](7,R,1,2,"smart-table",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,H,2,0,"div",3),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275elementStart"](10,"b"),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.issues&&t.issues.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.issues.length),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",t.issues.length,""))},directives:[c.s,c.v,c.r,m.u,g.a],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var B=n("Xy1B"),G=n("TC5E"),$=n("Q5eR"),Y=n("i+lE");let W=(()=>{class e{constructor(e,t,n,a){this.router=e,this.modalservice=t,this.common=n,this.api=a,this.Distance=null,this.listtype="",this.diagnostics={vechileno:null,endDate:this.common.dateFormatter(new Date),startTime:this.common.dateFormatter(new Date)},this.selectedVehicleId=null,this.Trails={vechileno:null,startTime:this.common.dateFormatter(new Date),endDate:this.common.dateFormatter(new Date)},this.VehicleStatusData={vehicle_id:null,latch_time:null},this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}getDate(e){this.modalservice.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.diagnostics[e]=this.common.dateFormatter(t.time).split(" ")[0],console.log("Date:",this.diagnostics[e])})}calculateDistance(){let e={vehicleId:this.selectedVehicleId,fromTime:this.common.dateFormatter(this.diagnostics.startTime),tTime:this.common.dateFormatter(this.diagnostics.endDate)};console.log("params :",e),this.common.loading++,this.api.post("Vehicles/getVehDistanceBwTime",e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),this.Distance=e.data?parseInt(""+e.data/1e3)+" KM":"Not Available"},e=>{this.common.loading--,this.common.showError()})}getvehicleData(e,t){console.log("Vehicle Data:+++++ ",e,t),"trails"==t&&(this.Trails.vechileno=e.id),"distance"==t&&(this.diagnostics.vechileno=e.regno),"Status"==t&&(this.VehicleStatusData.vehicle_id=e.id)}getVehicleTrails(){let e={vehicleId:this.selectedVehicleId,fromTime:this.common.dateFormatter(this.Trails.startTime),toTime:this.common.dateFormatter(this.Trails.endDate),suggestId:1,status:0};console.log("param",e),this.common.loading++,this.api.post("VehicleStatusChange/getVehicleTrail",e).subscribe(e=>{this.common.loading--,e.data.length>0?(this.common.params=e.data,console.log("res: ",this.common.params),this.modalservice.open(G.a,{size:"lg",container:"nb-layout"})):alert("Vehicle Trails are not present for this time period")},e=>{this.common.loading--,this.common.showError()})}getChangeVehicleStatusChange(){let e={vehicleId:this.selectedVehicleId,fromTime:this.VehicleStatusData.latch_time,suggestId:1};console.log("param",e),this.common.loading++,this.api.post("VehicleStatusChange/getVehicleTrail",e).subscribe(e=>{this.common.loading--,e.data.length>0?(this.common.params=e.data,console.log("res: ",this.common.params),this.modalservice.open(j.a,{size:"lg",container:"nb-layout"})):alert("Vehicle Trails are not present for this time period")},e=>{this.common.loading--,this.common.showError()})}selectVehicle(e){console.log("Vehicle Data:+++ ",this.selectedVehicleId),this.selectedVehicleId=e.id,console.log("vehicle=",e)}topRecord(){console.log("type :",this.listtype),console.log("Vehicle Data: ",this.selectedVehicleId);let e={vehicleId:this.selectedVehicleId,tableName:this.listtype};console.log("params :",e),this.common.loading++,this.api.post("MasterDetails/getDataAccordingVehicle",e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),e.data.length>0?(this.common.params=e.data,console.log("res: ",this.common.params),this.modalservice.open($.a,{size:"lg",container:"nb-layout"})):alert("No Vehicle Data are  Available ")},e=>{this.common.loading--,this.common.showError()})}vehicleRecord(){}ChangeVehicleStatusChange(){}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["diagnostics"]],decls:80,vars:20,consts:[[1,"row"],[1,"col-4"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["name","list",1,"form-control",3,"ngModel","ngModelChange"],["value","halts",1,"form-control"],["value","vehicle_placements",1,"form-control"],["value","lorry_receipts",1,"form-control"],["value","master_vehicle_temp1",1,"form-control"],[1,"btn","btn-primary","mt-4","p-1",3,"click"],[1,"form-group"],[1,"divActivities",2,"border","2px solid  blue"],[1,"col-3"],[1,"col-2"],["url","Vehicles/getVehiclesFromRedis?","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["placeholder","Start Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["placeholder","End Time","autocomplete","off","name","date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date",""],[1,"btn","btn-primary",3,"click"],["type","text","placeholder","Distance","name","distance","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["placeholder","Start time","autocomplete","off","name","date2",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date2",""],["placeholder","End Time","autocomplete","off","name","date3",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date3",""],["placeholder","Start Time","autocomplete","off","name","date4",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date4",""]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Diagnostics "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7,"Vehicle No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",1),s["\u0275\u0275elementStart"](10,"label"),s["\u0275\u0275text"](11,"Table Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.listtype=e})),s["\u0275\u0275elementStart"](13,"option",4),s["\u0275\u0275text"](14,"Halts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"option",5),s["\u0275\u0275text"](16,"Vehicle_Placement"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"option",6),s["\u0275\u0275text"](18,"lorry_Receipts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"option",7),s["\u0275\u0275text"](20,"Master_Vehicle_Temp"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",1),s["\u0275\u0275elementStart"](22,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.topRecord()})),s["\u0275\u0275text"](23,"Top Latest Record"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"form",9),s["\u0275\u0275elementStart"](25,"div",10),s["\u0275\u0275elementStart"](26,"div",0),s["\u0275\u0275elementStart"](27,"div",11),s["\u0275\u0275elementStart"](28,"label"),s["\u0275\u0275text"](29,"Distance Travelled In A Time Range"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",0),s["\u0275\u0275elementStart"](31,"div",12),s["\u0275\u0275elementStart"](32,"auto-suggestion",13),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",11),s["\u0275\u0275elementStart"](34,"input",14),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.diagnostics.startTime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](35,"owl-date-time",null,15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",11),s["\u0275\u0275elementStart"](38,"input",16),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.diagnostics.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](39,"owl-date-time",null,17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"div",12),s["\u0275\u0275elementStart"](42,"button",18),s["\u0275\u0275listener"]("click",(function(){return t.calculateDistance()})),s["\u0275\u0275text"](43,"Calculate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"div",12),s["\u0275\u0275elementStart"](45,"input",19),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Distance=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"div",10),s["\u0275\u0275elementStart"](47,"div",0),s["\u0275\u0275elementStart"](48,"div",11),s["\u0275\u0275elementStart"](49,"label"),s["\u0275\u0275text"](50,"Vechile Trails In A Time Range"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](51,"div",0),s["\u0275\u0275elementStart"](52,"div",12),s["\u0275\u0275elementStart"](53,"auto-suggestion",20),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e,"trails")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"div",11),s["\u0275\u0275elementStart"](55,"input",21),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Trails.startTime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](56,"owl-date-time",null,22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](58,"div",11),s["\u0275\u0275elementStart"](59,"input",23),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Trails.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](60,"owl-date-time",null,24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"div",12),s["\u0275\u0275elementStart"](63,"button",18),s["\u0275\u0275listener"]("click",(function(){return t.getVehicleTrails()})),s["\u0275\u0275text"](64,"Calculate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](65,"div",10),s["\u0275\u0275elementStart"](66,"div",0),s["\u0275\u0275elementStart"](67,"div",11),s["\u0275\u0275elementStart"](68,"label"),s["\u0275\u0275text"](69,"Change Vehicle Status"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](70,"div",0),s["\u0275\u0275elementStart"](71,"div",12),s["\u0275\u0275elementStart"](72,"auto-suggestion",20),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e,"Status")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](73,"div",11),s["\u0275\u0275elementStart"](74,"input",25),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.VehicleStatusData.latch_time=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](75,"owl-date-time",null,26),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](77,"div",12),s["\u0275\u0275elementStart"](78,"button",18),s["\u0275\u0275listener"]("click",(function(){return t.ChangeVehicleStatusChange()})),s["\u0275\u0275text"](79,"Vehicle History"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](36),n=s["\u0275\u0275reference"](40),a=s["\u0275\u0275reference"](57),o=s["\u0275\u0275reference"](61),i=s["\u0275\u0275reference"](76);s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngModel",t.listtype),s["\u0275\u0275advance"](20),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.diagnostics.startTime)("owlDateTime",e)("owlDateTimeTrigger",e),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.diagnostics.endDate)("owlDateTime",n)("owlDateTimeTrigger",n),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.Distance),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.Trails.startTime)("owlDateTime",a)("owlDateTimeTrigger",a),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.Trails.endDate)("owlDateTime",o)("owlDateTimeTrigger",o),s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.VehicleStatusData.latch_time)("owlDateTime",i)("owlDateTimeTrigger",i)}},directives:[c.s,c.v,c.r,b.a,u.D,u.r,u.u,u.w,u.G,u.H,u.s,u.t,u.d,Y.b,Y.d,Y.a],styles:[".divActivities[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin-bottom:15px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var K=n("tUv6"),Z=n("F9Xm"),q=n("i7b3"),J=n("ec4X");function X(e,t){}function Q(e,t){1&e&&s["\u0275\u0275template"](0,X,0,0,"ng-template")}function ee(e,t){}function te(e,t){1&e&&s["\u0275\u0275template"](0,ee,0,0,"ng-template")}function ne(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",23),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().revertLrDetails(t)})),s["\u0275\u0275text"](1,"Revert"),s["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",23),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](),n=t.$implicit,a=t.index;return s["\u0275\u0275nextContext"]().modalOpenHandling(n,a)})),s["\u0275\u0275text"](1,"Edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"button",23),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().openGenerateLr(t)})),s["\u0275\u0275text"](3,"New Edit"),s["\u0275\u0275elementEnd"]()}}function oe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",19),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().getImage(n)})),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"th"),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"td"),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"td"),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"td"),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"td"),s["\u0275\u0275text"](15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"td"),s["\u0275\u0275text"](17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"td"),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275text"](21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"td"),s["\u0275\u0275text"](23),s["\u0275\u0275pipe"](24,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"td"),s["\u0275\u0275template"](26,Q,1,0,void 0,20),s["\u0275\u0275template"](27,te,1,0,void 0,20),s["\u0275\u0275template"](28,ne,2,0,"ng-template",null,21,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](30,ae,4,0,"ng-template",null,22,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275reference"](29),a=s["\u0275\u0275reference"](31);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.receipt_no),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](7,15,e.lr_date,"dd MMM")),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.consigner_name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.consignee_name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.vehicle_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.source),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.destination),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.current_user),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](24,18,e.addtime,"dd MMM HH:mm")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",0==e.status)("ngIfThen",a),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",1==e.status)("ngIfThen",n)}}function ie(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",2),s["\u0275\u0275elementStart"](1,"h6"),s["\u0275\u0275text"](2,"Transport Agent Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function re(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",2),s["\u0275\u0275elementStart"](1,"div",43),s["\u0275\u0275elementStart"](2,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.option=t}))("change",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).changeStatusType("first")})),s["\u0275\u0275elementStart"](3,"option",44),s["\u0275\u0275text"](4,"Accept"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"option",45),s["\u0275\u0275text"](6,"Reject"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.option)}}const le=function(e){return{regno:e}},se=function(e){return{name:e}};function de(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",46),s["\u0275\u0275elementStart"](1,"input",47),s["\u0275\u0275listener"]("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).openNextModal()}))("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.receipt_no=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"input",48),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.source=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"input",49),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.destination=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"auto-suggestion",50),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchVehicle(t,"first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"input",51),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.remark=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",8),s["\u0275\u0275elementStart"](7,"div",52),s["\u0275\u0275elementStart"](8,"auto-suggestion",53),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchTaName(t,"first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",46),s["\u0275\u0275elementStart"](10,"button",54),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).addAgentName("first")})),s["\u0275\u0275text"](11,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",55),s["\u0275\u0275elementStart"](13,"div",41),s["\u0275\u0275elementStart"](14,"auto-suggestion",56),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchName(t,"Consigner","first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",46),s["\u0275\u0275elementStart"](16,"button",57),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).add("first")})),s["\u0275\u0275text"](17,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",8),s["\u0275\u0275elementStart"](19,"div",52),s["\u0275\u0275elementStart"](20,"auto-suggestion",58),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchName(t,"Consignee","first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",46),s["\u0275\u0275elementStart"](22,"button",59),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).add("first")})),s["\u0275\u0275text"](23,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",8),s["\u0275\u0275elementStart"](25,"div",60),s["\u0275\u0275elementStart"](26,"input",61),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.lrDate=t}))("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).checkDateFormat("first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",2),s["\u0275\u0275elementStart"](28,"span",62),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectDate("first")})),s["\u0275\u0275element"](29,"i",63),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",64),s["\u0275\u0275elementStart"](31,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.payType=t}))("change",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).changePayType("first")})),s["\u0275\u0275elementStart"](32,"option",5),s["\u0275\u0275text"](33,"ToPay"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"option",65),s["\u0275\u0275text"](35,"Advance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"option",66),s["\u0275\u0275text"](37,"NA"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"input",67),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.rate=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"input",68),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.amount=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"div",69),s["\u0275\u0275elementStart"](41,"div",70),s["\u0275\u0275elementStart"](42,"auto-suggestion",71),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchMaterialType(t,"first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",1),s["\u0275\u0275elementStart"](44,"input",72),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.LrData.weight=t}))("focus",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).getMaterialName("first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"div",73),s["\u0275\u0275elementStart"](46,"div",74),s["\u0275\u0275elementStart"](47,"Button",75),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).resetValues("first")})),s["\u0275\u0275text"](48,"Reset"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](49,"div",74),s["\u0275\u0275elementStart"](50,"Button",76),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).insertLrDetails("first")})),s["\u0275\u0275text"](51,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.receipt_no),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.source),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.destination),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](15,le,e.modal.first.data.regno)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.remark),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](17,se,e.modal.first.data.taName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](19,se,e.modal.first.data.consignerName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](21,se,e.modal.first.data.consineeName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",e.modal.first.data.lrDate),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.first.data.payType),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.rate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.amount),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("inputId","material_input")("preSelected",s["\u0275\u0275pureFunction1"](23,se,e.modal.first.data.materialName)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.LrData.weight)}}function ce(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"div",8),s["\u0275\u0275elementStart"](2,"div",74),s["\u0275\u0275elementStart"](3,"input",78),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.pan=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",74),s["\u0275\u0275elementStart"](5,"input",79),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.name=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",8),s["\u0275\u0275elementStart"](7,"div",74),s["\u0275\u0275elementStart"](8,"input",80),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.city=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",74),s["\u0275\u0275elementStart"](10,"input",81),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.gstin=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"h6"),s["\u0275\u0275text"](12,"Sub Admin 1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",8),s["\u0275\u0275elementStart"](14,"div",74),s["\u0275\u0275elementStart"](15,"input",79),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname1=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",74),s["\u0275\u0275elementStart"](17,"input",82),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile1=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"h6"),s["\u0275\u0275text"](19,"Sub Admin 2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",8),s["\u0275\u0275elementStart"](21,"div",74),s["\u0275\u0275elementStart"](22,"input",79),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname2=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"div",74),s["\u0275\u0275elementStart"](24,"input",82),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile2=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"h6"),s["\u0275\u0275text"](26,"Sub Admin 3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",8),s["\u0275\u0275elementStart"](28,"div",74),s["\u0275\u0275elementStart"](29,"input",79),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname3=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",74),s["\u0275\u0275elementStart"](31,"input",82),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile3=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",83),s["\u0275\u0275elementStart"](33,"div",74),s["\u0275\u0275elementStart"](34,"Button",76),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).insertAgentInfo("first")})),s["\u0275\u0275text"](35,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",74),s["\u0275\u0275elementStart"](37,"Button",84),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).resetView("first")})),s["\u0275\u0275text"](38,"Close"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.pan),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.name),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.city),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.gstin),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbname1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbmobile1),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbname2),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbmobile2),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbname3),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.first.data.transportAgentDetails.sbmobile3)}}function me(e,t){if(1&e&&s["\u0275\u0275element"](0,"jrx-image-viewer",85),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("images",e.modal.first.data.images)("idContainer","idOnHTMLFirst")("loadOnInit",!0)}}function ge(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",24),s["\u0275\u0275elementStart"](1,"div",25),s["\u0275\u0275elementStart"](2,"div",26),s["\u0275\u0275elementStart"](3,"button",27),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().closeModal("first")})),s["\u0275\u0275elementStart"](4,"span",28),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",29),s["\u0275\u0275elementStart"](7,"table",30),s["\u0275\u0275elementStart"](8,"thead",15),s["\u0275\u0275elementStart"](9,"tr"),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"VehicleRegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"VehicleId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"LRId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"addUserId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"tbody"),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275text"](21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"td"),s["\u0275\u0275text"](23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"td"),s["\u0275\u0275text"](25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"td"),s["\u0275\u0275text"](27),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](28,"div",31),s["\u0275\u0275elementStart"](29,"div",32),s["\u0275\u0275elementStart"](30,"div",8),s["\u0275\u0275template"](31,ie,3,0,"div",33),s["\u0275\u0275template"](32,re,7,1,"div",33),s["\u0275\u0275elementStart"](33,"div",2),s["\u0275\u0275elementStart"](34,"button",34),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("LR","first")})),s["\u0275\u0275text"](35,"Lorry Receipt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",2),s["\u0275\u0275elementStart"](37,"button",35),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("Invoice","first")})),s["\u0275\u0275text"](38,"Invoice"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",36),s["\u0275\u0275elementStart"](40,"button",37),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("Other","first")})),s["\u0275\u0275text"](41,"Others"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",38),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().removeLrDetails("first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",8),s["\u0275\u0275template"](44,de,52,25,"div",39),s["\u0275\u0275template"](45,ce,39,10,"div",40),s["\u0275\u0275elementStart"](46,"div",41),s["\u0275\u0275template"](47,me,1,3,"jrx-image-viewer",42),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",e.modal.first.class),s["\u0275\u0275advance"](21),s["\u0275\u0275textInterpolate"](e.modal.first.data.LrData.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.LrData.vehicle_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.LrData.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.LrData.aduserid),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.showAgentLayout),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.showMain),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngIf",e.modal.first.data.showMain),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.showAgentLayout),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.first.data.images.length)}}function pe(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",2),s["\u0275\u0275elementStart"](1,"h6"),s["\u0275\u0275text"](2,"Transport Agent Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function he(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",2),s["\u0275\u0275elementStart"](1,"div",43),s["\u0275\u0275elementStart"](2,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.option=t}))("change",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).changeStatusType("second")})),s["\u0275\u0275elementStart"](3,"option",44),s["\u0275\u0275text"](4,"Accept"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"option",45),s["\u0275\u0275text"](6,"Reject"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.option)}}function ue(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",46),s["\u0275\u0275elementStart"](1,"input",86),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.receipt_no=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"input",87),s["\u0275\u0275listener"]("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).openNextModal()}))("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.source=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"input",88),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.destination=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"auto-suggestion",50),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchVehicle(t,"second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"input",89),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.remark=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",8),s["\u0275\u0275elementStart"](7,"div",52),s["\u0275\u0275elementStart"](8,"auto-suggestion",53),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchTaName(t,"second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",46),s["\u0275\u0275elementStart"](10,"button",54),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).addAgentName("second")})),s["\u0275\u0275text"](11,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",55),s["\u0275\u0275elementStart"](13,"div",41),s["\u0275\u0275elementStart"](14,"auto-suggestion",56),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchName(t,"Consigner","second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",46),s["\u0275\u0275elementStart"](16,"button",57),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).add("second")})),s["\u0275\u0275text"](17,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",8),s["\u0275\u0275elementStart"](19,"div",52),s["\u0275\u0275elementStart"](20,"auto-suggestion",58),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchName(t,"Consignee","second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",46),s["\u0275\u0275elementStart"](22,"button",59),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).add("second")})),s["\u0275\u0275text"](23,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",8),s["\u0275\u0275elementStart"](25,"div",60),s["\u0275\u0275elementStart"](26,"input",90),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.lrDate=t}))("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).checkDateFormat("second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",2),s["\u0275\u0275elementStart"](28,"span",62),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectDate("second")})),s["\u0275\u0275element"](29,"i",63),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",64),s["\u0275\u0275elementStart"](31,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.payType=t}))("change",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).changePayType("second")})),s["\u0275\u0275elementStart"](32,"option",5),s["\u0275\u0275text"](33,"ToPay"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"option",65),s["\u0275\u0275text"](35,"Advance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"option",66),s["\u0275\u0275text"](37,"NA"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"input",91),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.rate=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"input",92),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.amount=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"div",93),s["\u0275\u0275elementStart"](41,"div",70),s["\u0275\u0275elementStart"](42,"auto-suggestion",71),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).searchMaterialType(t,"second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",1),s["\u0275\u0275elementStart"](44,"input",94),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.LrData.weight=t}))("focus",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).getMaterialName("second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"div",73),s["\u0275\u0275elementStart"](46,"div",74),s["\u0275\u0275elementStart"](47,"Button",75),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).resetValues("second")})),s["\u0275\u0275text"](48,"Reset"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](49,"div",74),s["\u0275\u0275elementStart"](50,"Button",76),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).insertLrDetails("second")})),s["\u0275\u0275text"](51,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.receipt_no),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.source),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.destination),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](15,le,e.modal.second.data.regno)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.remark),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](17,se,e.modal.second.data.taName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](19,se,e.modal.second.data.consignerName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("preSelected",s["\u0275\u0275pureFunction1"](21,se,e.modal.second.data.consineeName)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",e.modal.second.data.lrDate),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.second.data.payType),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.rate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.amount),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("inputId","second-material_input")("preSelected",s["\u0275\u0275pureFunction1"](23,se,e.modal.second.data.materialName)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.LrData.weight)}}function be(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"div",8),s["\u0275\u0275elementStart"](2,"div",74),s["\u0275\u0275elementStart"](3,"input",95),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.pan=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",74),s["\u0275\u0275elementStart"](5,"input",96),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.name=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",8),s["\u0275\u0275elementStart"](7,"div",74),s["\u0275\u0275elementStart"](8,"input",97),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.city=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",74),s["\u0275\u0275elementStart"](10,"input",98),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.gstin=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"h6"),s["\u0275\u0275text"](12,"Sub Admin 1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",8),s["\u0275\u0275elementStart"](14,"div",74),s["\u0275\u0275elementStart"](15,"input",96),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname1=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",74),s["\u0275\u0275elementStart"](17,"input",99),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile1=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"h6"),s["\u0275\u0275text"](19,"Sub Admin 2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",8),s["\u0275\u0275elementStart"](21,"div",74),s["\u0275\u0275elementStart"](22,"input",96),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname2=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"div",74),s["\u0275\u0275elementStart"](24,"input",99),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile2=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"h6"),s["\u0275\u0275text"](26,"Sub Admin 3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",8),s["\u0275\u0275elementStart"](28,"div",74),s["\u0275\u0275elementStart"](29,"input",96),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname3=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",74),s["\u0275\u0275elementStart"](31,"input",99),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile3=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",83),s["\u0275\u0275elementStart"](33,"div",74),s["\u0275\u0275elementStart"](34,"Button",76),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).insertAgentInfo("second")})),s["\u0275\u0275text"](35,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",74),s["\u0275\u0275elementStart"](37,"Button",84),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).resetView("second")})),s["\u0275\u0275text"](38,"Close"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.pan),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.name),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.city),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.gstin),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbname1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbmobile1),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbname2),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbmobile2),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbname3),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.modal.second.data.transportAgentDetails.sbmobile3)}}function fe(e,t){if(1&e&&s["\u0275\u0275element"](0,"jrx-image-viewer",85),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("images",e.modal.second.data.images)("idContainer","idOnHTMLSecond")("loadOnInit",!0)}}function ve(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",24),s["\u0275\u0275elementStart"](1,"div",25),s["\u0275\u0275elementStart"](2,"div",26),s["\u0275\u0275elementStart"](3,"button",27),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().closeModal("second")})),s["\u0275\u0275elementStart"](4,"span",28),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",29),s["\u0275\u0275elementStart"](7,"table",30),s["\u0275\u0275elementStart"](8,"thead",15),s["\u0275\u0275elementStart"](9,"tr"),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"VehicleRegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"VehicleId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"LRId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"addUserId"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"tbody"),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275text"](21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"td"),s["\u0275\u0275text"](23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"td"),s["\u0275\u0275text"](25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"td"),s["\u0275\u0275text"](27),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](28,"div",31),s["\u0275\u0275elementStart"](29,"div",32),s["\u0275\u0275elementStart"](30,"div",8),s["\u0275\u0275template"](31,pe,3,0,"div",33),s["\u0275\u0275template"](32,he,7,1,"div",33),s["\u0275\u0275elementStart"](33,"div",2),s["\u0275\u0275elementStart"](34,"button",34),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("LR","second")})),s["\u0275\u0275text"](35,"Lorry Receipt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",2),s["\u0275\u0275elementStart"](37,"button",35),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("Invoice","second")})),s["\u0275\u0275text"](38,"Invoice"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",36),s["\u0275\u0275elementStart"](40,"button",37),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadImage("Other","second")})),s["\u0275\u0275text"](41,"Others"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",38),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().removeLrDetails("second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",8),s["\u0275\u0275template"](44,ue,52,25,"div",39),s["\u0275\u0275template"](45,be,39,10,"div",40),s["\u0275\u0275elementStart"](46,"div",41),s["\u0275\u0275template"](47,fe,1,3,"jrx-image-viewer",42),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",e.modal.second.class),s["\u0275\u0275advance"](21),s["\u0275\u0275textInterpolate"](e.modal.second.data.LrData.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.LrData.vehicle_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.LrData.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.LrData.aduserid),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.second.data.showAgentLayout),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.showMain),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngIf",e.modal.second.data.showMain),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.showAgentLayout),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.second.data.images.length)}}let Se=(()=>{class e{constructor(e,t,n,a,o){let i;this.api=e,this.common=t,this.user=n,this.zone=a,this.modalService=o,this.pendinglr=[],this.fromDate="",this.endDate="",this.lrType="0",this.modal={active:"",first:{show:!1,class:"",data:this.setModalData()},second:{show:!1,class:"",data:this.setModalData()}},this.activeLrIndex=-1,i=new Date,this.endDate=this.common.dateFormatter(i),this.fromDate=this.common.dateFormatter(new Date(i.setDate(i.getDate()-6))),console.log("dates start and end",this.endDate,this.fromDate),this.getPendingLr(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getPendingLr()}setModalData(){return{showMain:!0,showAgentLayout:!1,images:[],tonnage:"",LrData:null,vehId:"",lrDate:null,payType:"toPay",regno:"",taName:"",consignerName:"",materialName:"",consineeName:"",isUpdated:!1,option:"accept",tempDate:null,status:1,transportAgentDetails:{gstin:"",name:"",pan:"",city:"",sbname1:"",sbmobile1:"",sbname2:"",sbmobile2:"",sbname3:"",sbmobile3:""}}}getPendingLr(){let e={startDate:this.fromDate,endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59",foId:this.foid,status:this.lrType};this.common.loading++,this.api.post("LorryReceiptsOperation/getPendingLr",e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),this.pendinglr=e.data},e=>{this.common.loading--,this.common.showError()})}openEditLorryDetailsModel(e,t="first"){this.common.params={details:Object.assign({},e)};let n=this.modal[t].data;n.LrData=this.common.params.details,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.taName=n.LrData.ta_name,n.consignerName=n.LrData.consigner_name,n.consineeName=n.LrData.consignee_name,n.materialName=n.LrData.material_name,n.payType=n.LrData.pay_type,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.images[0]=n.LrData.lr_image,null!=n.LrData.lr_date&&(n.lrDate=n.LrData.lr_date,n.lrDate=this.common.dateFormatter1(n.lrDate))}modalOpenHandling(e,t){this.activeLrIndex=t,console.log("Handler Start: ",this.modal.active),this.modal.active?"first"==this.modal.active?(this.modal.second.class="custom-passive-modal",this.modal.second.show=!0,this.handleModalData("second",e),this.modal.active="first"):"second"==this.modal.active&&(this.modal.first.class="custom-passive-modal",this.modal.first.show=!0,this.handleModalData("first",e),this.modal.active="second"):(this.modal.first.class="custom-active-modal",this.modal.first.show=!0,this.handleModalData("first",e),this.modal.active="first"),console.log("Handler End: ",this.modal.active),setTimeout(this.autoSuggestion.bind(this,this.modal.active+"-source",this.modal.active),300),setTimeout(this.autoSuggestion.bind(this,this.modal.active+"-destination",this.modal.active),300)}handleModalData(e,t){this.common.params={details:Object.assign({},t)};let n=this.modal[e].data;n.LrData=this.common.params.details,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.taName=n.LrData.ta_name,n.consignerName=n.LrData.consigner_name,n.consineeName=n.LrData.consignee_name,n.materialName=n.LrData.material_name,n.payType=n.LrData.pay_type,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.images[0]=n.LrData.lr_image,null!=n.LrData.lr_date&&(n.lrDate=n.LrData.lr_date,n.lrDate=this.common.dateFormatter1(n.lrDate))}enterTicket(e){let t,n={tblRefId:6,tblRowId:e.id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",n).subscribe(n=>{if(this.common.loading--,t=n,console.log(t),!t.success)return!1;this.modalOpenHandling(e,this.activeLrIndex)},e=>{this.common.loading--,console.log(e)})}exitTicket(e){let t;var n={tblRefId:6,tblRowId:e.id};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",n).subscribe(e=>(this.common.loading--,t=e,console.log(t),!!t.sucess),e=>{this.common.loading--,console.log(e)})}getDate(e){this.common.params={ref_page:"lrDetails"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&("start"==e?(this.fromDate="",this.fromDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("fromDate",this.fromDate)):(this.endDate="",this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)))})}revertLrDetails(e){let t={lr_id:e.id};this.common.loading++,this.api.post("LorryReceiptsOperation/revertLrDetails",t).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),this.common.showToast(e.msg),"Success"==e.msg&&this.getPendingLr()},e=>{this.common.loading--,this.common.showError()})}getFolist(e){this.foid=e.id}getImage(e){console.log(e);let t=[{name:"LR",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other Image",image:e.other_image}];console.log("images:",t),this.common.params={images:t,title:"LR Details"},this.modalService.open(K.a,{size:"lg",container:"nb-layout"})}searchVehicle(e,t){let n=this.modal[t].data;return console.log("vehiclelist: ",e),n.vehId=e.id,console.log("id:",n.vehId),n.vehId}loadImage(e,t){let n=this.modal[t].data;"LR"==e?(n.images[0]=n.LrData.lr_image,console.log("LR",n.images[0])):"Invoice"==e?n.LrData.invoice_image?(n.images[0]=n.LrData.invoice_image,console.log("Invoice",n.images[0])):this.common.showError("Image not present!!"):"Other"==e&&(n.LrData.other?(n.images[0]=n.LrData.other,console.log("Invoice",n.images[0])):this.common.showError("Image not present!!"))}closeModal(e){this.modal.first.show&&this.modal.second.show?"first"==e?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[e].show=!1,this.modal[e].class="",this.modal[e].data=this.setModalData()),this.getPendingLr()}dismiss(e){this.modal.first.show&&this.modal.second.show?"first"==e?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[e].show=!1,this.modal[e].class="",this.modal[e].data=this.setModalData()),this.exitTicket(this.modal[e].data.LrData),this.getPendingLr()}selectDate(e){let t=this.modal[e].data;this.common.params={ref_page:"lrDetails"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.date&&(t.lrDate=this.common.dateFormatter(e.date,"ddMMYYYY").split(" ")[0],console.log("lrdate: by getDate "+t.lrDate))})}add(e){this.modalService.open(Z.a,{size:"sm",container:"nb-layout",backdrop:"static",windowClass:"drag-box"})}addAgentName(e){let t=this.modal[e].data;t.showMain=!1,t.showAgentLayout=!0,this.common.handleModalSize("class","modal-lg","1300")}searchName(e,t,n){let a=this.modal[n].data;return"Consignee"==t?(a.LrData.consignee_id=e.id,a.LrData.consignee_name=e.name,a.LrData.consignee_id):(a.LrData.consigner_id=e.id,a.LrData.consigner_name=e.name,a.LrData.consigner_id)}searchTaName(e,t){let n=this.modal[t].data;return console.log("list",e),n.LrData.ta_id=e.id,n.LrData.ta_name=e.name,n.LrData.ta_id}insertAgentInfo(e){let t=this.modal[e].data,n={gstin:t.transportAgentDetails.gstin,name:t.transportAgentDetails.name,pan:t.transportAgentDetails.pan,city:t.transportAgentDetails.city,sbname1:t.transportAgentDetails.sbname1,sbmobile1:t.transportAgentDetails.sbmobile1,sbname2:t.transportAgentDetails.sbname2,sbmobile2:t.transportAgentDetails.sbmobile2,sbname3:t.transportAgentDetails.sbname3,sbmobile3:t.transportAgentDetails.sbmobile3};console.log("params agent info",n),this.common.loading++,this.api.post("LorryReceiptsOperation/InsertTransportAgent",n).subscribe(e=>{this.common.loading--,console.log("res: "+e.data),this.common.showToast("Success !!"),t.showAgentLayout=!1,this.common.handleModalSize("class","modal-lg","1000"),t.showMain=!0},e=>{this.common.loading--,this.common.showError(),t.showAgentLayout=!1,this.common.handleModalSize("class","modal-lg","1000"),t.showMain=!0})}changePayType(e){let t=this.modal[e].data;t.LrData.pay_type=t.payType,console.log("paytype to change",t.LrData.pay_type)}resetView(e){let t=this.modal[e].data;t.showAgentLayout=!1,this.common.handleModalSize("class","modal-lg","1000"),t.showMain=!0}searchMaterialType(e,t){let n=this.modal[t].data;return n.LrData.material=e.id,n.LrData.material_name=e.name,n.LrData.material}insertLrDetails(e){let t,n=this.modal[e].data;"reject"==n.option?(n.tempDate=null,console.log("if block"),t={sourceLat:n.LrData.source_lat?n.LrData.source_lat:"",sourceLng:n.LrData.source_long?n.LrData.source_long:"",source:n.LrData.source?n.LrData.source:"",dest:n.LrData.destination?n.LrData.destination:"",destLat:n.LrData.destination_lat?n.LrData.destination_lat:"",destLng:n.LrData.destination_long?n.LrData.destination_long:"",vehId:n.vehId?n.vehId:"",remark:n.LrData.remark?n.LrData.remark:"",id:n.LrData.id?n.LrData.id:"",receiptNo:n.LrData.receipt_no?n.LrData.receipt_no:"",status:n.status,taId:n.LrData.ta_id?n.LrData.ta_id:"",taName:n.LrData.ta_name?n.LrData.ta_name:"",consignerId:n.LrData.consigner_id?n.LrData.consigner_id:"",tonnage:n.LrData.weight?n.LrData.weight:"",consignerName:n.LrData.consigner_name?n.LrData.consigner_name:"",consigneeId:n.LrData.consignee_id?n.LrData.consignee_id:"",consigneeName:n.LrData.consignee_name?n.LrData.consignee_name:"",lrDate:n.lrDate?n.lrDate:"",payType:n.LrData.pay_type?n.LrData.pay_type:"",rate:n.LrData.rate?n.LrData.rate:"",amount:n.LrData.amount?n.LrData.amount:"",material:n.LrData.material_name?n.LrData.material_name:"",materialId:n.LrData.material?n.LrData.material:""}):(console.log("else block"),n.tempDate=this.common.dateFormatter(n.lrDate,"ddMMYYYY",!1,"/"),n.lrDate=this.common.dateFormatter1(new Date(n.lrDate)),console.log("tempDate",n.tempDate),t={sourceLat:n.LrData.source_lat,sourceLng:n.LrData.source_long,source:n.LrData.source,dest:n.LrData.destination,destLat:n.LrData.destination_lat,destLng:n.LrData.destination_long,vehId:n.vehId,remark:n.LrData.remark,id:n.LrData.id,receiptNo:n.LrData.receipt_no,status:n.status,taId:n.LrData.ta_id,taName:n.LrData.ta_name,consignerId:n.LrData.consigner_id,tonnage:n.LrData.weight,consignerName:n.LrData.consigner_name,consigneeId:n.LrData.consignee_id,consigneeName:n.LrData.consignee_name,lrDate:n.lrDate,payType:n.LrData.pay_type,rate:n.LrData.rate,amount:n.LrData.amount,material:n.LrData.material_name,materialId:n.LrData.material}),console.log("params to Insert: ",t),this.common.loading++,this.api.post("LorryReceiptsOperation/updateLorryReceiptsDetails",t).subscribe(t=>{this.common.loading--,console.log("res: ",t.msg),t.success?(this.common.showToast("Success !!"),n.isUpdated=!0,this.closeModal(e)):(this.common.showToast("Not Success !!"),null!=n.tempDate&&(n.lrDate=n.tempDate,console.log("lrDate",n.lrDate)))},e=>{this.common.loading--,this.common.showError()})}ngAfterViewInit(){}autoSuggestion(e,t){let n=document.getElementById(e),a=new google.maps.places.Autocomplete(n,{types:["(cities)"],componentRestrictions:{country:"in"}});google.maps.event.addListener(a,"place_changed",this.updateLocation.bind(this,e,a,t))}updateLocation(e,t,n){console.log("tets");let a=t.getPlace(),o=a.geometry.location.lat(),i=a.geometry.location.lng();a=t.getPlace().formatted_address.split(",")[0],this.setLocations(e,a,o,i,n)}setLocations(e,t,n,a,o){let i=this.modal[o].data;this.zone.run(()=>{e.includes("source")?(i.LrData.source=t,console.log("LrData",i.LrData),i.LrData.source_lat=n,i.LrData.source_long=a):e.includes("destination")&&(i.LrData.destination=t,i.LrData.destination_lat=n,i.LrData.destination_long=a),console.log("elementId",e,"place",t,"lat",n,"lng",a,"modalRef",i)})}removeLrDetails(e){let t=this.modal[e].data;if(null==t.images[0])return console.log("image to delete",t.images[0]),void this.common.showToast("Load LR To Delete !!");let n={lr_id:t.LrData.id,image_url:t.images[0]};console.log("params: ",n),this.common.loading++,this.api.post("LorryReceiptsOperation/deleteLr",n).subscribe(n=>{this.common.loading--,console.log("res: ",n.msg),n.success?(this.common.showToast("Success !!"),t.isUpdated=!0,this.closeModal(e)):this.common.showToast("something went wrong")},e=>{this.common.loading--,this.common.showError()})}getMaterialName(e){let t=this.modal[e].data;t.LrData.material_name=document.getElementById("material_input").value,console.log("getMaterialName",t.LrData.material_name)}checkDateFormat(e){let t=this.modal[e].data;if(!t.lrDate)return;let n=t.lrDate;if(console.log("this.lrdate",t.lrDate),n.length<8)return;let a=n[0]+n[1],o=n[2]+n[3],i=n.substring(4,8);t.lrDate=i+"-"+o+"-"+a,console.log("Date: ",t.lrDate)}resetValues(e){let t=this.modal[e].data;t.LrData.receipt_no=null,t.LrData.source=null,t.LrData.source_lat=null,t.LrData.source_long=null,t.LrData.destination=null,t.LrData.destination_lat=null,t.LrData.destination_long=null,t.LrData.remark=null,t.LrData.ta_name=null,t.LrData.ta_id=null,t.LrData.consigner_name=null,t.LrData.consigner_id=null,t.LrData.consignee_name=null,t.LrData.pay_type=null,t.LrData.weight=null,t.LrData.amount=null,t.LrData.material=null,t.LrData.material_id=null,t.LrData.rate=null,t.vehId=null,t.LrData.lr_date=null}changeStatusType(e){let t=this.modal[e].data;t.status="reject"==t.option?-1:1}openNextModal(){if(this.modal.first.show&&this.modal.second.show)return;if(this.activeLrIndex==this.pendinglr.length-1)return;this.activeLrIndex++;let e=Object.assign({},this.pendinglr[this.activeLrIndex]);console.log("---------------------------------------------"),console.log("Details:",e),console.log("---------------------------------------------"),this.modalOpenHandling(e,this.activeLrIndex)}openGenerateLr(e){this.common.params={lrData:{lrId:e.id}},this.modalService.open(q.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data:",e),this.getPendingLr()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["lorry-receipt-details"]],decls:58,vars:13,consts:[[1,"row",2,"margin-left","10px"],[1,"col-sm-6"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","-1"],[1,"model-body"],[1,"row"],[1,"col-sm-3",2,"margin-top","10px"],["url","suggestion/getFoUsersList","display","name","placeholder","Search",3,"preSelected","onSelected"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"table","table-bordered",2,"margin-left","5px","margin-top","10px","margin-right","5px"],[1,"thead"],["id","heading-row"],[4,"ngFor","ngForOf"],["class","custom-modal",3,"ngClass",4,"ngIf"],[2,"color","blue",3,"click"],[4,"ngIf","ngIfThen"],["showRevert",""],["showEdit",""],[1,"btn",3,"click"],[1,"custom-modal",3,"ngClass"],[1,"custom-modal-body"],[1,"model-header",2,"margin-top","10px","height","20px","margin-left","10px","margin-right","10px"],["type","button","aria-label","Close",1,"close",2,"background-color","white","height","30px","margin-left","15px","margin-top","-10px",3,"click"],["aria-hidden","true"],[1,"row",2,"margin-left","20px","margin-right","20px"],[1,"table","table-bordered"],[1,"border",2,"height","2px","color","brown","margin-top","10px","margin-bottom","20px"],[1,"model-body",2,"margin-left","10px","margin-right","10px","margin-bottom","10px"],["class","col-sm-3",4,"ngIf"],["type","button",1,"btn-loadLr",2,"width","150px",3,"click"],["type","button",1,"btn-loadInvoice",2,"width","150px",3,"click"],[1,"col-sm-2"],["type","button",1,"btn-loadOther",2,"width","150px",3,"click"],[1,"fa","fa-trash","remove",2,"width","50px","height","40px","color","red","margin-left","30px",3,"click"],["class","col-3",4,"ngIf"],["class","col-3","style","margin-bottom:10px",4,"ngIf"],[1,"col-9"],[3,"images","idContainer","loadOnInit",4,"ngIf"],[1,"from-group"],["value","accept"],["value","reject"],[1,"col-3"],["type","text","name","first-RNo.","placeholder","Receipt No.","autocomplete","off",1,"form-control",3,"ngModel","focusout","ngModelChange"],["type","text","id","first-source","name","first-source","placeholder","Source",1,"from-control",3,"ngModel","ngModelChange"],["type","text","id","first-destination","name","first-destination","placeholder","Destination",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],["type","text","name","first-remark","placeholder","Remark",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],[1,"col-9",2,"margin-bottom","10px"],["url","Suggestion/GetTransportAgent","display","name","placeholder","Transport Agent Name",3,"preSelected","onSelected"],["type","button",1,"btn-agentName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],[1,"row",2,"margin-bottom","10px"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","Consigner Name",3,"preSelected","onSelected"],["type","button",1,"btn-consignerName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","Consignee Name",3,"preSelected","onSelected"],["type","button",1,"btn-consigneeName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],[1,"col-sm-9"],["type","text","name","first-lr-date","placeholder","DD/MM/YYYY",1,"form-control",3,"ngModel","ngModelChange","focusout"],[2,"cursor","pointer","font-size","23px","margin-top","8px",3,"click"],[1,"icon","fa","fa-calendar",2,"margin-top","10px","margin-left","-5px"],[1,"from-group",2,"margin-top","10px"],["value","2"],["value","3"],["type","text","name","first-rate","placeholder","Rate",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-amount","placeholder","Amount",1,"form-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["id","first-ton-material",1,"row"],[1,"col-sm-6",2,"margin-top","10px"],["url","Suggestion/GetMaterialTypes","display","name","placeholder","Material Name",3,"inputId","preSelected","onSelected"],["type","text","name","first-tonnage","placeholder","Tonnage",1,"form-control",3,"ngModel","ngModelChange","focus"],[1,"row",2,"margin-top","10px"],[1,"col-6"],["type","reset",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-3",2,"margin-bottom","10px"],["type","text","name","first-pan","placeholder","Pan No.",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-city","placeholder","City",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-gst","placeholder","Gstin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-mobile","placeholder","Mobile",1,"form-control",3,"ngModel","ngModelChange"],[1,"row",2,"margin-top","10px","margin-left","10px"],["type","button",1,"btn","btn-danger",3,"click"],[3,"images","idContainer","loadOnInit"],["type","text","name","second-RNo.","placeholder","Receipt No.","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","second-source","name","second-source","placeholder","Source",1,"from-control",3,"ngModel","focusout","ngModelChange"],["type","text","id","second-destination","name","second-destination","placeholder","Destination",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["type","text","name","second-remark","placeholder","Remark",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["type","text","name","second-lr-date","placeholder","DD/MM/YYYY",1,"form-control",3,"ngModel","ngModelChange","focusout"],["type","text","name","second-rate","placeholder","Rate",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-amount","placeholder","Amount",1,"form-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["id","second-ton-material",1,"row"],["type","text","name","second-tonnage","placeholder","Tonnage",1,"form-control",3,"ngModel","ngModelChange","focus"],["type","text","name","second-pan","placeholder","Pan No.",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-city","placeholder","City",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-gst","placeholder","Gstin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-mobile","placeholder","Mobile",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275text"](4," Lorry Receipt Details "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",2),s["\u0275\u0275elementStart"](6,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lrType=e}))("change",(function(){return t.getPendingLr()})),s["\u0275\u0275elementStart"](7,"option",4),s["\u0275\u0275text"](8,"Pending"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"option",5),s["\u0275\u0275text"](10,"Complete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"option",6),s["\u0275\u0275text"](12,"Rejected"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"nb-card-body"),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"div",8),s["\u0275\u0275elementStart"](16,"div",9),s["\u0275\u0275elementStart"](17,"auto-suggestion",10),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFolist(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",2),s["\u0275\u0275elementStart"](19,"input",11),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](20,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",2),s["\u0275\u0275elementStart"](22,"input",12),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](23,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",2),s["\u0275\u0275elementStart"](25,"button",13),s["\u0275\u0275listener"]("click",(function(){return t.getPendingLr()})),s["\u0275\u0275text"](26,"submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"table",14),s["\u0275\u0275elementStart"](28,"thead",15),s["\u0275\u0275elementStart"](29,"tr",16),s["\u0275\u0275elementStart"](30,"th"),s["\u0275\u0275text"](31,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"th"),s["\u0275\u0275text"](33,"LRNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"th"),s["\u0275\u0275text"](35,"LR Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"th"),s["\u0275\u0275text"](37,"Consignor"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"th"),s["\u0275\u0275text"](39,"Consignee"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"th"),s["\u0275\u0275text"](41,"Vehicle RegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"th"),s["\u0275\u0275text"](43,"Vehicle Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"th"),s["\u0275\u0275text"](45,"Source"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"th"),s["\u0275\u0275text"](47,"Destination"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"th"),s["\u0275\u0275text"](49,"User"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"th"),s["\u0275\u0275text"](51,"Add Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"th"),s["\u0275\u0275text"](53,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"tbody"),s["\u0275\u0275template"](55,oe,32,21,"tr",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](56,ge,48,10,"div",18),s["\u0275\u0275template"](57,ve,48,10,"div",18)),2&e&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",t.lrType),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](20,7,t.fromDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](23,10,t.endDate,"dd MMM yyyy")),s["\u0275\u0275advance"](33),s["\u0275\u0275property"]("ngForOf",t.pendinglr),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.modal.first.show),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.modal.second.show))},directives:[c.s,c.v,u.D,u.r,u.u,u.w,u.G,c.r,b.a,m.t,m.u,m.r,u.d,J.a],pipes:[m.f],styles:[".heading-row[_ngcontent-%COMP%]{font-size:12px}.custom-modal[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding:20px;background:transparent;overflow:auto;height:100%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238!important}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:-10px -1rem -1rem auto;outline:none}.custom-modal-body[_ngcontent-%COMP%]{background:#fff}.custom-active-modal[_ngcontent-%COMP%]{z-index:1050;background:rgba(0,0,0,.5)}.custom-passive-modal[_ngcontent-%COMP%]{z-index:1049}button[_ngcontent-%COMP%]{background-color:#008b8b;border:2px solid #ffebcd;color:#fff;font-size:12px;border-radius:4px}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.close[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none}.suggestion[_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:12px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px 5px;border-bottom:1px solid #ccc}.iv-large-image[_ngcontent-%COMP%]{max-width:1000px!important;max-height:1000px!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var xe=n("1j6Q"),ye=n("1i8C");function Ce(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.description)}}function Me(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",19),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",19),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td",23),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=s["\u0275\u0275nextContext"]();return a.selectedSite=n.id,a.gotoSingle()})),s["\u0275\u0275text"](10,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.hotcnt||"0")}}const Ee=function(e,t){return{grey:e,active:t}};let _e=(()=>{class e{constructor(e,t,n,a){this.mapService=e,this.apiService=t,this.router=n,this.commonService=a,this.isContruct=!1,this.mergeSiteId=null,this.typeIds=[],this.typeId=1,this.moveLoc="",this.siteLoc="",this.isHeatAble=!1,this.selectedSite=null,this.siteName=null,this.remainingList=[],this.siteLocLatLng={lat:0,lng:0},this.siteLatLng={lat:0,lng:90},this.isUpdate=!1,this.minZoom=12,this.tempData=[],this.getTypeIds(),this.getRemainingTable(),this.commonService.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getTypeIds(),this.getRemainingTable()}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("moveLoc",(e,t,n)=>{this.mapService.zoomAt({lat:t,lng:n},13),this.clearAll(),this.loadMarkers()}),this.mapService.autoSuggestion("siteLoc",(e,t,n)=>{this.siteLoc=e,this.siteLocLatLng={lat:t,lng:n}}),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}toggleConstruction(){(0!=this.isContruct||confirm("Are you sure, you want to switch to contruction mode??"))&&(this.isContruct=!this.isContruct,this.clearAll())}mergeSite(){this.mergeSiteId?this.selectedSite?this.apiService.post("SiteFencing/mergeSite",{oldId:this.mergeSiteId,newId:this.selectedSite}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast(e.msg)},e=>{console.error(e),this.commonService.showError()}):this.commonService.showToast("Select New Site!!"):this.commonService.showToast("Select Old Site!!")}getTypeIds(){this.apiService.post("SiteFencing/getSiteTypes",{}).subscribe(e=>{console.log("Res: ",e.data),this.typeIds=e.data,this.typeIds.push({id:0,description:"All"})},e=>{console.error(e),this.commonService.showError()})}gotoSingle(){this.commonService.loading++;let e=this.selectedSite;this.apiService.post("Site/getSingleSite",{siteId:this.selectedSite}).subscribe(t=>{if(!t.success)return void this.commonService.showError(t.msg);let n=t.data;console.log("Res: ",n),this.clearAll(!1),this.tempData=n,this.siteLatLng={lat:parseFloat(n[0].lat),lng:parseFloat(n[0].long)},this.typeId=n[0].type_id,this.selectedSite=n[0].id,this.siteLoc=n[0].loc_name,this.siteName=n[0].name,this.selectedSite=e,this.getRemainingTable(),this.apiService.post("SiteFencing/getSiteFences",{siteId:this.selectedSite}).subscribe(e=>{this.commonService.loading++;let t=e.data,n=Object.keys(t).length;if(console.log("Res: ",e.data),t[this.selectedSite]?(this.tempData[0].color="f00",this.isUpdate=!0):this.isUpdate=!1,this.mapService.createMarkers(this.tempData),1==n)this.mapService.createPolygon(t[Object.keys(t)[0]].latLngs),console.log("Single",t[Object.keys(t)[0]]);else if(n>1){let e=[],n=!1,a=!1,o=1e5,i=-1;for(const r in t)if(n=!1,t.hasOwnProperty(r)){const l=t[r];r==this.selectedSite?n=!0:o>l.dis&&(this.mergeSiteId=r,n=!1,o=l.dis,i=e.length),e.push({data:l.latLngs,isMain:n,isSec:a,show:`\n                  Id: ${r}<br>\n                  Name:${l.name}<br>\n                  Location:${l.loc_name}<br>\n                  `})}-1!=i&&(e[i].isSec=!0),this.mapService.createPolygons(e)}else console.log("Else");this.mapService.zoomMap(18.5),this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})},e=>{console.error(e),this.commonService.showError()}),this.commonService.loading--}clearAll(e=!0){this.exitTicket(),this.mapService.isDrawAllow=!1,this.siteName=null,this.siteLoc=null,this.selectedSite=null,this.isUpdate=!1,e&&(this.typeId=1,this.getRemainingTable()),this.mapService.clearAll()}submitPolygon(){if(this.submitValidity())if(this.mapService.polygonPath){var e="(",t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var n=0;n<t.length;n++)e+=t[n].lat()+" "+t[n].lng()+",";e=(e+=t[0].lat()+" "+t[0].lng()+",").substr(0,e.length-1);let a={polygon:e+=")",siteId:this.selectedSite,siteName:this.siteName,siteLoc:this.siteLoc,typeId:this.typeId,isContruct:this.isContruct};!this.isUpdate||this.isContruct?this.apiService.post("SiteFencing/insertSiteFence",a).subscribe(e=>{if(!e.success)return this.commonService.showError(e.msg),void(this.mapService.isDrawAllow=!0);this.selectedSite=e.data,console.log("Res: ",this.selectedSite),this.commonService.showToast("Created"),this.gotoSingle(),this.getRemainingTable(),this.clearAll(!1)},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0}):this.apiService.post("SiteFencing/updateSiteFence",a).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Updated"),this.getRemainingTable(),this.gotoSingle(),this.clearAll(!1)},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}getRemainingTable(){this.apiService.post("SiteFencing/getRemainingSites",{type:this.typeId}).subscribe(e=>{let t=e.data;console.log("Res: ",e.data),this.remainingList=t},e=>{console.error(e),this.commonService.showError()})}submitValidity(){return!!(!this.selectedSite&&this.isContruct||this.selectedSite&&!this.isContruct)&&!!("unknown"!=this.siteName&&this.siteName||this.isContruct)}loadMarkers(e=!1){(e=e||this.isContruct)||this.mapService.zoomMap(15);let t=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:t.lat1,lng1:t.lng1,lat2:t.lat2,lng2:t.lng2,typeId:e?null:this.typeId}).subscribe(t=>{let n=t.data;console.log("Res: ",t.data),e||this.clearAll(),this.mapService.createMarkers(n,!1,!1,["id","name"])},e=>{console.error(e),this.commonService.showError()})}updateLocName(){if(null!=this.selectedSite&&null!=this.siteLoc){let e=this.commonService.distanceFromAToB(this.siteLatLng.lat,this.siteLatLng.lng,this.siteLocLatLng.lat,this.siteLocLatLng.lng,"Mt"),t=0==parseInt(e+"")?0:parseInt(e+"");if(console.log("distance:",t,this.siteLatLng,this.siteLocLatLng),t>2e4)return void this.commonService.showToast("site is far away from loc");let n={siteId:this.selectedSite,siteLoc:this.siteLoc,siteName:this.siteName,siteTypeId:this.typeId,type:2};console.log("Param",n),this.commonService.loading++,this.apiService.post("SiteFencing/updateSiteDetails",n).subscribe(e=>{this.commonService.loading--,this.commonService.showToast(e.msg)},e=>{this.commonService.loading--,console.log(e)})}else this.commonService.showToast("Enter Site Name or Select Site ")}updateSiteName(){if(null==this.selectedSite||0==this.typeId||null==this.siteName||(this.siteName+"").toLowerCase().includes("unknown"))this.commonService.showToast("Select Site,Type,Name(not unknown)");else{let e={siteId:this.selectedSite,siteLoc:this.siteLoc,siteName:this.siteName,siteTypeId:this.typeId,type:1};console.log("Param",e),this.commonService.loading++,this.apiService.post("SiteFencing/updateSiteDetails",e).subscribe(e=>{this.commonService.loading--,this.commonService.showToast(e.msg)},e=>{this.commonService.loading--,console.log(e)})}}enterTicket(){if(!this.selectedSite&&this.isContruct||this.selectedSite&&!this.isContruct){if(!this.mapService.isDrawAllow){let e={tblRefId:2,tblRowId:this.selectedSite?this.selectedSite:-1};this.commonService.loading++,this.loadMarkers(!0),this.apiService.post("TicketActivityManagment/insertTicketActivity",e).subscribe(e=>{this.commonService.loading--,e.success?(this.mapService.isDrawAllow=!0,this.isUpdate&&this.commonService.showToast("Already Exists")):this.commonService.showToast(e.msg)},e=>{this.commonService.loading--,console.log(e)})}this.mapService.isDrawAllow&&this.submitPolygon()}else this.commonService.showToast("Select site or switch to contruction mode..")}exitTicket(){let e;var t={tblRefId:2,tblRowId:this.selectedSite?this.selectedSite:-1};return console.log("params",t),this.commonService.loading++,this.apiService.post("TicketActivityManagment/updateActivityEndTime",t).subscribe(t=>(this.commonService.loading--,e=t,console.log(e),!!e.sucess),e=>{this.commonService.loading--,console.log(e)}),!1}ignoreSite(){this.selectedSite?(this.commonService.loading++,this.apiService.post("SiteFencing/ignoreSite",{siteId:this.selectedSite}).subscribe(e=>{this.commonService.loading--,this.commonService.showToast(e.msg)},e=>{this.commonService.loading--,console.log(e)}),this.clearAll()):alert("Select Site First!!!")}showHeat(){if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<this.minZoom)return void this.commonService.showToast("bounds are huge");var e=this.mapService.getMapBounds();console.log("Bounds",e);let t={lat:(e.lat1+e.lat2)/2,long:(e.lng2+e.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+t.lat+"&long="+t.long).subscribe(e=>{console.log("Res: ",e.data),this.mapService.createHeatMap(e.data),this.isHeatAble=!0,this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})}}loadLatLong(){if(console.log("moveLoc",this.moveLoc),new RegExp(/[0-9]*,[0-9]*/i).test(this.moveLoc)){let e=parseFloat(this.moveLoc.split(",")[0]),t=parseFloat(this.moveLoc.split(",")[1]);this.mapService.zoomAt({lat:e,lng:t},13),this.clearAll(),this.loadMarkers()}else this.commonService.showError("Pattern is Lat,Long")}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](ye.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["site-fencing"]],decls:78,vars:14,consts:[[1,"row"],[1,"col-6","table"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["placeholder","Old Site Id",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",2,"display","inline-block","margin-right","5px",3,"click"],[1,"fa","fa-pencil-ruler","fa-2x","construct",3,"ngClass","click"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Site Id",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],[1,"btn","btn-primary",3,"click"],["routerLink","/admin/halt-density",1,"btn","btn-primary","ml-1"],[1,"btn","btn-primary","mr-1",3,"click"],["placeholder","Site Name..",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[4,"ngFor","ngForOf"],["id","map",1,"map","col-6"],[3,"value"],[3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"table"),s["\u0275\u0275elementStart"](5,"tbody"),s["\u0275\u0275elementStart"](6,"tr"),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"input",2),s["\u0275\u0275listener"]("keydown.enter",(function(){return t.loadLatLong()}))("ngModelChange",(function(e){return t.moveLoc=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275elementStart"](10,"input",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.mergeSiteId=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275elementStart"](12,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.mergeSite()})),s["\u0275\u0275text"](13,"Merge"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"i",5),s["\u0275\u0275listener"]("click",(function(){return t.toggleConstruction()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"tr"),s["\u0275\u0275elementStart"](16,"td"),s["\u0275\u0275elementStart"](17,"select",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.typeId=e}))("change",(function(){return t.getRemainingTable()})),s["\u0275\u0275template"](18,Ce,2,2,"option",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"td"),s["\u0275\u0275elementStart"](20,"input",8),s["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.selectedSite=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"td"),s["\u0275\u0275elementStart"](22,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.ignoreSite()})),s["\u0275\u0275text"](23,"Ignore"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"button",10),s["\u0275\u0275text"](25,"Buff"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"tr"),s["\u0275\u0275elementStart"](27,"td"),s["\u0275\u0275elementStart"](28,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),s["\u0275\u0275text"](29,"Clear"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),s["\u0275\u0275text"](31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"td"),s["\u0275\u0275elementStart"](33,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),s["\u0275\u0275text"](34,"Load Marker"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.updateSiteName()})),s["\u0275\u0275text"](36,"U.S"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"td"),s["\u0275\u0275elementStart"](38,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),s["\u0275\u0275text"](39),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"tr"),s["\u0275\u0275elementStart"](41,"td"),s["\u0275\u0275elementStart"](42,"input",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.siteName=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"td"),s["\u0275\u0275elementStart"](44,"input",13),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.siteLoc=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"td"),s["\u0275\u0275elementStart"](46,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.updateLocName()})),s["\u0275\u0275text"](47,"Update Loction"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"tr"),s["\u0275\u0275elementStart"](49,"td",14),s["\u0275\u0275elementStart"](50,"div",15),s["\u0275\u0275elementStart"](51,"span"),s["\u0275\u0275elementStart"](52,"span",16),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),s["\u0275\u0275text"](53,"1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"span",16),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),s["\u0275\u0275text"](55,"2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"span",16),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),s["\u0275\u0275text"](57,"3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](58,"span",16),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),s["\u0275\u0275text"](59,"4"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](60,"span",16),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),s["\u0275\u0275text"](61,"5"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"table",17),s["\u0275\u0275elementStart"](63,"thead",18),s["\u0275\u0275elementStart"](64,"tr"),s["\u0275\u0275elementStart"](65,"th",19),s["\u0275\u0275text"](66,"S.No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](67,"th",19),s["\u0275\u0275text"](68,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](69,"th"),s["\u0275\u0275text"](70,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](71,"th"),s["\u0275\u0275text"](72,"Hot Count"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](73,"th"),s["\u0275\u0275text"](74,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](75,"tbody"),s["\u0275\u0275template"](76,Me,11,4,"tr",20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](77,"div",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngModel",t.moveLoc),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.mergeSiteId),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction2"](11,Ee,!t.isContruct,t.isContruct)),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.typeId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.typeIds),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.selectedSite),s["\u0275\u0275advance"](11),s["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.siteName),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.siteLoc),s["\u0275\u0275advance"](32),s["\u0275\u0275property"]("ngForOf",t.remainingList))},directives:[c.s,c.r,u.d,u.r,u.u,m.r,u.D,m.t,a.d,u.w,u.G],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:150px!important;max-width:inherit!important}.construct[_ngcontent-%COMP%]{float:right;margin-top:4px}.grey[_ngcontent-%COMP%]{color:red}.active[_ngcontent-%COMP%]{color:green}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})(),we=(()=>{class e{constructor(e,t,n){this.mapService=e,this.apiService=t,this.commonService=n,this.isUpdate=!1,this.selectedArea={lat:null,long:null,id:null,loc_name:null},this.locName=null,this.locLatLng={lat:0,lng:0},this.tempData=[],this.commonService.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("siteLoc",(e,t,n,a)=>{this.commonService.loading++,this.mapService.zoomAt({lat:t,lng:n},10),this.clearAll(),this.locLatLng={lat:t,lng:n};let o=a.split(",");console.log("PlaceT",o,"pLACE",a),this.locName=o[0]+"("+o[1].substr(0,3)+")",this.gotoSingle(!1),this.commonService.loading--}),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}gotoSingle(e=!0){this.commonService.loading++,this.apiService.post("SiteFencing/getTransportationAreaFences",{lat:this.locLatLng.lat,lng:this.locLatLng.lng}).subscribe(t=>{let n=t.data;if(!n)return this.isUpdate=!1,void this.commonService.loading--;this.isUpdate=!!n[this.locName];let a=Object.keys(n).length;if(console.log("Res: ",t.data),1==a){e&&this.clearAll();let t=[{data:n[Object.keys(n)[0]].latLngs,isMain:this.isUpdate,isSec:!this.isUpdate,show:Object.keys(n)[0]}];this.mapService.createPolygons(t),console.log("Single",n[Object.keys(n)[0]])}else if(a>1){let t=[],a=!1,o=!1,i=1e5,r=-1;for(const e in n)if(a=!1,n.hasOwnProperty(e)){const l=n[e];e==this.locName?a=!0:i>l.dis&&(a=!1,i=l.dis,r=t.length),t.push({data:l.latLngs,isMain:a,isSec:o,show:e}),console.log("Multi",e)}-1!=r&&(t[r].isSec=!0),e&&this.clearAll(),this.mapService.createPolygons(t)}this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})}selectArea(e){console.log("Srearch",e),this.commonService.loading++,this.clearAll(),this.isUpdate=!0,this.locName=e.loc_name,e.lat=parseFloat(e.lat),e.long=parseFloat(e.long),this.locLatLng={lat:e.lat,lng:e.long},this.mapService.zoomAt(this.locLatLng,10),this.gotoSingle(!1),this.selectedArea=e,this.commonService.loading--}clearAll(e=!1){this.exitTicket(),this.mapService.isDrawAllow=!1,this.locName=null,this.locLatLng=null,this.isUpdate=!1,this.selectedArea=null,e?this.mapService.clearAll():this.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!0})}submitPolygon(){if(this.submitValidity())if(this.mapService.polygonPath){var e="(",t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var n=0;n<t.length;n++)e+=t[n].lat()+" "+t[n].lng()+",";e=(e+=t[0].lat()+" "+t[0].lng()+",").substr(0,e.length-1),e+=")",this.isUpdate?this.apiService.post("SiteFencing/updateTA",{polygon:e,locName:this.selectedArea.loc_name,lat:this.selectedArea.lat,long:this.selectedArea.long}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Updated"),this.gotoSingle()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0}):this.apiService.post("SiteFencing/insertTransportAreaFence",{polygon:e,locName:this.locName,lat:this.locLatLng.lat,long:this.locLatLng.lng}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Created"),this.gotoSingle()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}DeleteArea(){console.log("Selected  Area",this.selectedArea),this.selectedArea.loc_name?this.apiService.post("SiteFencing/deleteArea",{locName:this.selectedArea.loc_name}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Deleted"),this.clearAll()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0}):this.commonService.showError("Load Area!!")}submitValidity(){return!!this.locName}loadMarkers(){let e=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:e.lat1,lng1:e.lng1,lat2:e.lat2,lng2:e.lng2,typeId:1}).subscribe(e=>{let t=e.data;console.log("Res: ",e.data),this.mapService.clearAll(!0,!0,{marker:!0,polygons:!1,polypath:!1}),this.mapService.createMarkers(t)},e=>{console.error(e),this.commonService.showError()})}enterTicket(){this.locName?this.mapService.isDrawAllow?this.submitPolygon():this.mapService.isDrawAllow=!0:this.commonService.showToast("Select Location First..")}exitTicket(){return console.log("params",{tblRefId:9,tblRowId:this.locName}),!1}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](ye.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["transport-area"]],decls:39,vars:3,consts:[[1,"row"],[1,"col-6","table"],["name","selected-area","url","Suggestion/getTransArea","display","loc_name","placeholder","Location Name...",3,"preSelected","onSelected"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],["id","map",1,"map","col-6"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"table"),s["\u0275\u0275elementStart"](5,"tbody"),s["\u0275\u0275elementStart"](6,"tr"),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectArea(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275elementStart"](10,"input",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.locName=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275elementStart"](12,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"tr"),s["\u0275\u0275elementStart"](15,"td"),s["\u0275\u0275elementStart"](16,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.clearAll(!0)})),s["\u0275\u0275text"](17,"Clear All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"td"),s["\u0275\u0275elementStart"](19,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),s["\u0275\u0275text"](20,"Load Marker"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"td"),s["\u0275\u0275elementStart"](22,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.DeleteArea()})),s["\u0275\u0275text"](23,"Delete Loc"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"tr"),s["\u0275\u0275elementStart"](25,"td",5),s["\u0275\u0275elementStart"](26,"div",6),s["\u0275\u0275elementStart"](27,"span"),s["\u0275\u0275elementStart"](28,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),s["\u0275\u0275text"](29,"1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),s["\u0275\u0275text"](31,"2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),s["\u0275\u0275text"](33,"3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),s["\u0275\u0275text"](35,"4"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),s["\u0275\u0275text"](37,"5"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](38,"div",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.locName),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"))},directives:[c.s,c.r,b.a,u.d,u.r,u.u],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var ke=n("27xo");function Pe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275elementStart"](12,"button",2),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().updateSiteDetail(n)})),s["\u0275\u0275text"](13,"Edit Row"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.site_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.site_name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.lat),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.lng),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.sh_cnt)}}let Oe=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.siteDetails=[],this.getsiteDetails(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getsiteDetails()}getsiteDetails(){++this.common.loading,this.api.post("Site/getSiteDetails",{}).subscribe(e=>{--this.common.loading,console.log("Res:",e.data),this.siteDetails=e.data},e=>{--this.common.loading,console.log("Err:",e)})}updateSiteDetail(e){console.log(e),this.common.params={site:e},this.common.handleModalSize("class","modal-lg","1200"),this.modalService.open(ke.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.getsiteDetails()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["site-details"]],decls:26,vars:1,consts:[["frame","box",2,"width","100%"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primery",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h2"),s["\u0275\u0275text"](1,"SiteDetails"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](2,"br"),s["\u0275\u0275element"](3,"br"),s["\u0275\u0275elementStart"](4,"table",0),s["\u0275\u0275elementStart"](5,"thead"),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275elementStart"](7,"b"),s["\u0275\u0275text"](8,"SiteID"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"th"),s["\u0275\u0275elementStart"](10,"b"),s["\u0275\u0275text"](11,"SiteName"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275elementStart"](13,"b"),s["\u0275\u0275text"](14,"Lat"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"th"),s["\u0275\u0275elementStart"](16,"b"),s["\u0275\u0275text"](17,"Long"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"th"),s["\u0275\u0275elementStart"](19,"b"),s["\u0275\u0275text"](20,"Sh_Cnt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"th"),s["\u0275\u0275elementStart"](22,"b"),s["\u0275\u0275text"](23,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"tbody"),s["\u0275\u0275template"](25,Pe,14,5,"tr",1),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](25),s["\u0275\u0275property"]("ngForOf",t.siteDetails))},directives:[m.t],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%]{background-color:#737373;color:#fff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;text-align:left;padding:8px}td[_ngcontent-%COMP%]{color:#000}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#005aff;color:#fff;border:none;padding:10px;border-radius:5px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:100px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#eaeaea}"]}),e})();var De=n("V5lr"),Ie=n("LvDl"),Te=n("mNmA");function Ae(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",3),s["\u0275\u0275elementStart"](1,"label"),s["\u0275\u0275text"](2," Select Parent"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"auto-suggestion",31),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().selectParent(t)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("data",e.parentPages)("preSelected",null)}}function Fe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",32),s["\u0275\u0275elementStart"](1,"button",33),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().updatePreferences()})),s["\u0275\u0275text"](2,"Save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Le(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",45),s["\u0275\u0275elementStart"](1,"input",46),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](4).checkOrUnCheckAll(n,"page")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](2),s["\u0275\u0275elementStart"](3,"div",47),s["\u0275\u0275elementStart"](4,"div",48),s["\u0275\u0275elementStart"](5,"input",49),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isadd=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7,"A"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",48),s["\u0275\u0275elementStart"](9,"input",50),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isedit=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"label"),s["\u0275\u0275text"](11,"E"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",48),s["\u0275\u0275elementStart"](13,"input",51),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isdeleted=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"label"),s["\u0275\u0275text"](15,"D"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("name","page-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.title," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!e.has_add),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isadd),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("hidden",!e.has_edit),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isedit),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("hidden",!e.has_delete),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isdeleted)}}function Ve(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",40),s["\u0275\u0275elementStart"](1,"div",41),s["\u0275\u0275elementStart"](2,"input",37),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](3).checkOrUnCheckAll(n,"group")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275elementStart"](4,"span",42),s["\u0275\u0275text"](5,"All Functionality"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"input",43),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isAll=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(n,a,n.isAll)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](7,Le,16,10,"div",44),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngClass","group-box")("name","group-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.isAll),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.pages)}}function ze(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div",36),s["\u0275\u0275elementStart"](2,"input",37),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).checkOrUnCheckAll(n,"module")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",38),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"uppercase"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](6,Ve,8,6,"div",39),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngClass","module-box")("name","section-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](5,5,e.name)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.groups)}}function Ne(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",34),s["\u0275\u0275elementStart"](1,"h4"),s["\u0275\u0275text"](2,"DashBoard"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,ze,7,7,"div",35),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",e.formattedData)}}function je(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",45),s["\u0275\u0275elementStart"](1,"input",46),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](4).checkOrUnCheckAll(n,"page")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](2),s["\u0275\u0275elementStart"](3,"div",47),s["\u0275\u0275elementStart"](4,"div",48),s["\u0275\u0275elementStart"](5,"input",49),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isadd=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7,"A"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",48),s["\u0275\u0275elementStart"](9,"input",50),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isedit=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"label"),s["\u0275\u0275text"](11,"E"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",48),s["\u0275\u0275elementStart"](13,"input",51),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isdeleted=n}))("click",(function(n){s["\u0275\u0275restoreView"](e);const a=t.$implicit;return s["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",n)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"label"),s["\u0275\u0275text"](15,"D"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("name","page-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.title," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!e.has_add),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isadd),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("hidden",!e.has_edit),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isedit),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("hidden",!e.has_delete),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.isdeleted)}}function Re(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",40),s["\u0275\u0275elementStart"](1,"div",41),s["\u0275\u0275elementStart"](2,"input",37),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](3).checkOrUnCheckAll(n,"group")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275elementStart"](4,"span",42),s["\u0275\u0275text"](5,"All Functionality"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"input",43),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isAll=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(n,a,n.isAll)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](7,je,16,10,"div",44),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngClass","group-box")("name","group-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.isAll),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.pages)}}function He(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div",36),s["\u0275\u0275elementStart"](2,"input",37),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.isSelected=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).checkOrUnCheckAll(n,"module")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",38),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"uppercase"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](6,Re,8,6,"div",39),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngClass","module-box")("name","section-"+n)("ngModel",e.isSelected),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](5,5,e.name)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.groups)}}function Ue(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",52),s["\u0275\u0275elementStart"](1,"h4"),s["\u0275\u0275text"](2,"Mobile App"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,He,7,7,"div",35),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",e.formattedDataApp)}}let Be=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.common=t,this.user=n,this.modalService=a,this.route=o,this.data=[],this.dashBoardPages=[],this.appPages=[],this.parentPages=[],this.selectedUser={details:null,oldPreferences:[]},this.formattedData=[],this.formattedDataApp=[],this.pageGroup=[],this.newPage={module:null,group:null,title:null,url:null,parentId:null,type:"Dashboard",addType:1,add:0,edit:0,delete:0},this.getUsersList=[],this.istaskOpertion=!1,this.functionalityFlag=[],this.common.isComponentActive=!1,this.common.refresh=this.refresh.bind(this),this.getAllUserList(),this.getPages()}ngOnInit(){}ngDestroy(){}changePermissionType(e,t){let n=!1;n=t.target.checked,this.newPage[e]=n?1:0}canDeactivate(){return console.log("activity Start",this.common.isComponentActive),this.common.isComponentActive?(this.common.params={title:"Confirmation ",description:"<b>&nbsp;Are Sure To Leave This Page WithOut Save<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.isComponentActive=!1,console.log("no, you wont navigate anywhere"))}),!1):(console.log("you are going away, goodby"),!0)}refresh(){this.data=[],this.selectedUser={details:null,oldPreferences:[]},document.getElementById("employeename").value="",this.common.isComponentActive=!1,this.formattedData=[],this.formattedDataApp=[]}createNewPage(){let e={moduleName:this.newPage.module,groupName:this.newPage.group,title:this.newPage.title,route:this.newPage.url,type:this.newPage.type,add_type:this.newPage.addType,hasAdd:this.newPage.add,hasEdit:this.newPage.edit,hasDelete:this.newPage.delete,parentId:this.newPage.parentId};console.log("params",e),this.common.loading++,this.api.post("UserRoles/insertNewPageDetails",e).subscribe(e=>{this.common.loading--,this.common.showToast(e.msg)},e=>{this.common.loading--,console.log("Error: ",e)})}checkOrUnCheckAll(e,t){this.common.isComponentActive=!0,"group"===t?e.pages.map(t=>{t.isSelected=e.isSelected}):"module"===t&&e.groups.map(t=>{t.isSelected=e.isSelected,t.pages.map(t=>t.isSelected=e.isSelected)}),e.isSelected||"page"!=t||(e.isSelected=e.isSelected,e.isadd=!1,e.isedit=!1,e.isdeleted=!1,e.isOp=!0)}changePagePermission(e,t,n){if(this.istaskOpertion=!0,this.istaskOpertion)return e.isOp=!0}getAllUserList(){this.common.loading++,this.api.get("UserRoles/getActiveAdminUsers?").subscribe(e=>{this.common.loading--,this.getUsersList=e.data},e=>{this.common.loading--,console.log("Error: ",e)})}getUserPages(e){console.log(e),this.appPages=[],this.dashBoardPages=[],this.formattedData=[],this.selectedUser.details=e;const t={userId:e.id,userType:1,iswallet:localStorage.getItem("iswallet")||"0"};this.common.loading++,this.api.post("UserRoles/getAllPages",t).subscribe(e=>{this.common.loading--,this.data=e.data,this.selectedUser.oldPreferences=e.data,this.data.map(e=>{"Dashboard"==e.type?this.dashBoardPages.push(e):"App"==e.type&&this.appPages.push(e)}),console.log("dashboardPages",this.dashBoardPages),console.log("app pages",this.appPages),this.managedata(),this.manageAppData()},e=>{this.common.loading--,console.log("Error: ",e)})}getPages(){this.common.loading++,this.api.get("UserRoles/getPages").subscribe(e=>{this.common.loading--,this.parentPages=e.data?e.data:[]},e=>{this.common.loading--,console.log("Error: ",e)})}managedata(){this.formattedData=[],console.log("this.dashBoardPages",this.dashBoardPages);let e=Ie.groupBy(this.dashBoardPages,"module");console.log("firstGroup",e),console.log("firstGroupkeys",Object.keys(e)),this.formattedData=Object.keys(e).map(t=>({name:t,groups:e[t],isSelected:!1,isOp:!1})),console.log("formattedData",this.formattedData),this.formattedData.map(e=>{let t=!0,n=Ie.groupBy(e.groups,"group_name");e.groups=Object.keys(n).map(e=>{let a=!0,o=n[e].map(e=>(e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e));return t&&(t=a),{name:e,pages:o,isSelected:a}}),e.isSelected=t}),this.formattedData=Ie.sortBy(this.formattedData,["name"],["asc"]).map(e=>(e.groups=Ie.sortBy(e.groups,["name"],["asc"]).map(e=>(e.pages=Ie.sortBy(e.pages,["title"],["asc"]),e)),e))}manageAppData(){this.formattedDataApp=[];let e=Ie.groupBy(this.appPages,"module");console.log("firstGroup",e),console.log("firstGroupkeys",Object.keys(e)),console.log("this.formattedDataApp",this.formattedDataApp),this.formattedDataApp=Object.keys(e).map(t=>({name:t,groups:e[t],isSelected:!1,isOp:!1})),console.log("formattedData1",this.formattedDataApp),this.formattedDataApp.map(e=>{let t=!0,n=Ie.groupBy(e.groups,"group_name");e.groups=Object.keys(n).map(e=>{let a=!0,o=n[e].map(e=>(e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e));return t&&(t=a),{name:e,pages:o,isSelected:a}}),e.isSelected=t}),this.formattedDataApp=Ie.sortBy(this.formattedDataApp,["name"],["asc"]).map(e=>(e.groups=Ie.sortBy(e.groups,["name"],["asc"]).map(e=>(e.pages=Ie.sortBy(e.pages,["title"],["asc"]),e)),e))}updatePreferences(){const e={pages:this.findSelectedPages(),userId:this.selectedUser.details.id,userType:1};console.log("Param:",e),this.common.loading++,this.api.post("UserRoles/setPagesWrtUser",e).subscribe(e=>{console.log(e),this.common.loading--,this.common.showToast(e.msg),this.refresh()},e=>{this.common.loading--,console.log("Error: ",e)})}findSelectedPages(){let e=[];return console.log("formattedData: ",this.formattedData),this.formattedData.map(t=>{t.groups.map(t=>{t.pages.map(t=>{e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})})})}),this.formattedDataApp.map(t=>{t.groups.map(t=>{t.pages.map(t=>{e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})})})}),e}checkOrUnCheckfunctionality(e,t,n){if(console.log(e,t,n),n)for(let a=0;a<e.pages.length;a++)console.log(e.pages[a]),e.pages[a].isSelected=!0,e.pages[a].isadd=!0,e.pages[a].isedit=!0,e.pages[a].isdeleted=!0,e.pages[a].isOp=!0;else for(let a=0;a<e.pages.length;a++)e.pages[a].isSelected=!1,e.pages[a].isadd=!1,e.pages[a].isedit=!1,e.pages[a].isdeleted=!1,e.pages[a].isOp=!1}selectParent(e){this.newPage.parentId=e.id}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](Te.b))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["user-preferences"]],decls:65,vars:18,consts:[[1,"row"],[1,"col-8"],[2,"min-height","580px"],[1,"col-2"],["type","text","id","module","name","module",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","group","name","group",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3"],["type","text","id","url","name","url",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","Dashboard"],["value","App"],[1,"row","mt-3"],["class","col-2",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","-1"],[1,"col-7"],[1,"row",2,"float","right"],[1,"col-12"],["type","checkbox","name","addPermission","id","addPermission",3,"ngModel","value","ngModelChange","change"],["type","checkbox","name","editPermission","id","editPermission",3,"ngModel","value","ngModelChange","change"],["type","checkbox","name","deletePermission","id","deletePermission",3,"ngModel","value","ngModelChange","change"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[1,"row","mt-2"],[1,"search","mt-2"],["display","employeename","placeholder","Employee","inputId","employeename",3,"data","preSelected","onSelected"],["class","col text-left mt-4",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["display","title","placeholder","Parent page","inputId","parentPage",3,"data","preSelected","onSelected"],[1,"col","text-left","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"container"],[4,"ngFor","ngForOf"],[1,"module-container"],["type","checkbox",3,"ngClass","name","ngModel","ngModelChange","change"],[1,"module-name"],["class","group-container",4,"ngFor","ngForOf"],[1,"group-container"],[1,"group-head"],[2,"font-size","14px","margin-left","40px"],["type","checkbox",1,"group-box",3,"ngModel","ngModelChange","change"],["class","col-2 page-container",4,"ngFor","ngForOf"],[1,"col-2","page-container"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","click"],[1,"row","permission-type",3,"hidden"],[1,"col-4",2,"padding","0px!important",3,"hidden"],["type","checkbox","name","add",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","edit",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","delete",1,"page-box-type",3,"ngModel","ngModelChange","click"],[1,"container","mt-4"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275text"](4," User Role "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body",2),s["\u0275\u0275elementStart"](6,"div",0),s["\u0275\u0275elementStart"](7,"div",3),s["\u0275\u0275elementStart"](8,"label"),s["\u0275\u0275text"](9,"Module"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"input",4),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.module=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",3),s["\u0275\u0275elementStart"](12,"label"),s["\u0275\u0275text"](13,"Group"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"input",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.group=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",3),s["\u0275\u0275elementStart"](16,"label"),s["\u0275\u0275text"](17,"Page Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"input",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.title=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",7),s["\u0275\u0275elementStart"](20,"label"),s["\u0275\u0275text"](21,"Url"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"input",8),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.url=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"div",3),s["\u0275\u0275elementStart"](24,"label"),s["\u0275\u0275text"](25,"Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"select",9),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.type=e}))("change",(function(){return t.newPage.parentId=null})),s["\u0275\u0275elementStart"](27,"option",10),s["\u0275\u0275text"](28,"Dashboard"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"option",11),s["\u0275\u0275text"](30,"App"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",12),s["\u0275\u0275template"](32,Ae,4,2,"div",13),s["\u0275\u0275elementStart"](33,"div",3),s["\u0275\u0275elementStart"](34,"label"),s["\u0275\u0275text"](35,"Add Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"select",14),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.addType=e})),s["\u0275\u0275elementStart"](37,"option",15),s["\u0275\u0275text"](38,"Admin"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"option",16),s["\u0275\u0275text"](40,"FoAdmin"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"option",17),s["\u0275\u0275text"](42,"Both"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",18),s["\u0275\u0275elementStart"](44,"div",19),s["\u0275\u0275elementStart"](45,"div",20),s["\u0275\u0275elementStart"](46,"input",21),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.add=e}))("change",(function(e){return t.changePermissionType("add",e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"label"),s["\u0275\u0275text"](48,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](49,"input",22),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.edit=e}))("change",(function(e){return t.changePermissionType("edit",e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"label"),s["\u0275\u0275text"](51,"Edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"input",23),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.delete=e}))("change",(function(e){return t.changePermissionType("delete",e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](53,"label"),s["\u0275\u0275text"](54,"Delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"button",24),s["\u0275\u0275listener"]("click",(function(){return t.createNewPage()})),s["\u0275\u0275text"](56,"Add New Page"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](57,"div",25),s["\u0275\u0275elementStart"](58,"div",26),s["\u0275\u0275elementStart"](59,"label"),s["\u0275\u0275text"](60," Select Employee Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](61,"auto-suggestion",27),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getUserPages(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](62,Fe,3,0,"div",28),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](63,Ne,4,1,"div",29),s["\u0275\u0275template"](64,Ue,4,1,"div",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngModel",t.newPage.module),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.newPage.group),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.newPage.title),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.newPage.url),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.newPage.type),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf","App"==t.newPage.type),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.newPage.addType),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngModel",t.newPage.add)("value",1),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.newPage.edit)("value",1),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.newPage.delete)("value",1),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("data",t.getUsersList)("preSelected",null),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.selectedUser.details),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formattedData.length>0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formattedDataApp.length>0))},directives:[c.s,c.v,c.r,u.d,u.r,u.u,u.D,u.w,u.G,m.u,u.a,b.a,m.t,m.r],pipes:[m.I],styles:[".row.col-2[_ngcontent-%COMP%]{margin:2px}.search[_ngcontent-%COMP%]{width:180px;margin-left:20px}.container[_ngcontent-%COMP%]{color:#000;border:2px solid grey}h4[_ngcontent-%COMP%]{text-align:center}.module-container[_ngcontent-%COMP%]{background:#ffd7d7;padding:5px 16px;font-weight:700;text-transform:capitalize;font-size:22px;margin-top:10px}.module-name[_ngcontent-%COMP%]{color:#01203c}.group-container[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:500;padding:5px 30px;font-size:18px;color:initial}.group-head[_ngcontent-%COMP%]{color:#161617;background:#d0e4f5;padding:4px}.page-container[_ngcontent-%COMP%]{font-size:14px!important;color:#00008b;margin-left:25px;padding:0;display:inline-table}input.group-box[_ngcontent-%COMP%], input.module-box[_ngcontent-%COMP%], input.page-box[_ngcontent-%COMP%]{width:16px;height:16px!important;cursor:pointer}.permission-type[_ngcontent-%COMP%]{margin:2px;border:1px solid;width:94%}.permission-type.col-4[_ngcontent-%COMP%]{padding:0;margin:0}.permission-type[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-right:10px}input.page-box-type[_ngcontent-%COMP%]{width:12px;height:12px!important;margin-left:8px;cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var Ge=n("csNM");function $e(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",13),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.aduserid),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.aduserid)}}const Ye=function(e){return{highlight:e}};function We(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",18),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"td"),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"td"),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"td"),s["\u0275\u0275elementStart"](18,"button",19),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).openVSCModel(n)})),s["\u0275\u0275text"](19," Take Action "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](9,Ye,e.isHighlight)),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.fo_name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.vehicle_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.prim_status),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.sec_status),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.suggest),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.alert_time),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.hold_by)}}function Ke(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",14),s["\u0275\u0275elementStart"](1,"table",15),s["\u0275\u0275elementStart"](2,"thead",16),s["\u0275\u0275elementStart"](3,"tr"),s["\u0275\u0275elementStart"](4,"th"),s["\u0275\u0275text"](5,"Fo Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"th"),s["\u0275\u0275text"](7,"Vehicle RegNo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"Vehicle Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"Primary Status"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"Secondry Status"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"Suggestion"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"Alert Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"th"),s["\u0275\u0275text"](19,"Hold User"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"th"),s["\u0275\u0275text"](21,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"tbody"),s["\u0275\u0275template"](23,We,20,11,"tr",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](23),s["\u0275\u0275property"]("ngForOf",e.VehicleStatusAlerts)}}function Ze(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let qe=(()=>{class e{constructor(e,t,n){this.common=e,this.api=t,this.modalService=n,this.startDate=new Date,this.element="",this.endDate=new Date,this.reportUserWise=[],this.reportVehicleWise=[],this.vehicleId=null,this.adminId=null,this.ticketAccordingTo="vehicle",this.aduserId=null,this.VehicleStatusAlerts=[],this.aduserIds=[],this.getAduserIds(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getAduserIds()}searchVehicle(e){this.vehicleId=e.id}searchUser(e){this.adminId=e.id}getAduserIds(){this.api.get("HaltOperations/getAutoAduserid").subscribe(e=>{console.log("Res: ",e.data),this.aduserIds=e.data},e=>{console.error(e),this.common.showError()})}openVSCModel(e){let t=this.VehicleStatusAlerts.findIndex(t=>t.vehicle_id==e.vehicle_id&&t.addtime==e.addtime);this.VehicleStatusAlerts[t].isHighlight=!0;let n={vehicle_id:e.vehicle_id,tTime:e.ttime,suggest:11,latch_time:e.latch_time};console.log("VehicleStatusData",n),this.common.params=n,this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})}goToTrail(){let e={vehicle_id:this.vehicleId,tTime:this.common.dateFormatter(this.endDate),suggest:11,latch_time:this.common.dateFormatter(this.startDate)};console.log("VehicleStatusData",e),this.common.params=e,this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})}getChallenged(){let e={startTime:this.common.dateFormatter(this.startDate),endTime:this.common.dateFormatter(this.endDate),aduserId:this.aduserId};this.common.loading++,this.api.post("HaltOperations/getChallenged",e).subscribe(e=>{this.common.loading--,console.log("Res: ",e.data),this.VehicleStatusAlerts=e.data},e=>{console.error(e),this.common.loading--,this.common.showError()})}viewAll(){let e="aduserId="+this.aduserId;this.common.loading++,console.log("params ",e),this.api.get("HaltOperations/getVehicleStatusAduserViseAlerts?"+e).subscribe(e=>{this.common.loading--,console.log("Res: ",e.data),this.VehicleStatusAlerts=e.data},e=>{console.error(e),this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vscticket-audit"]],decls:31,vars:11,consts:[[1,"model-body"],[1,"row"],[1,"col-sm-2"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"col-sm-1"],["name","aduserid",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateTimeValue","isTime","onChanged"],[3,"isStart","dateTimeValue","isTime","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],[2,"margin-top","10px"],["class","tableFixHead",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"value"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"click"],[1,"no-data"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h5"),s["\u0275\u0275text"](3,"Vehicle Status Change Cleared Tickets"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body"),s["\u0275\u0275elementStart"](5,"div",0),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"div",2),s["\u0275\u0275elementStart"](8,"auto-suggestion",3),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275elementStart"](10,"select",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.aduserId=e})),s["\u0275\u0275template"](11,$e,2,2,"option",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",2),s["\u0275\u0275elementStart"](13,"uj-date-time-picker",7),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",2),s["\u0275\u0275elementStart"](15,"uj-date-time-picker",8),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",4),s["\u0275\u0275elementStart"](17,"Button",9),s["\u0275\u0275listener"]("click",(function(){return t.goToTrail()})),s["\u0275\u0275text"](18,"vsc"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",2),s["\u0275\u0275elementStart"](20,"Button",9),s["\u0275\u0275listener"]("click",(function(){return t.viewAll()})),s["\u0275\u0275text"](21,"View All Vsc "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",2),s["\u0275\u0275elementStart"](23,"Button",9),s["\u0275\u0275listener"]("click",(function(){return t.getChallenged()})),s["\u0275\u0275text"](24,"View Challenged"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",10),s["\u0275\u0275template"](26,Ke,24,1,"div",11),s["\u0275\u0275template"](27,Ze,2,0,"div",12),s["\u0275\u0275elementStart"](28,"div",10),s["\u0275\u0275elementStart"](29,"b"),s["\u0275\u0275text"](30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.aduserId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.aduserIds),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate)("isTime",!1),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngIf",t.VehicleStatusAlerts&&t.VehicleStatusAlerts.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.VehicleStatusAlerts||!t.VehicleStatusAlerts.length),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.VehicleStatusAlerts&&"Number Of Alerts : "+t.VehicleStatusAlerts.length))},directives:[c.s,c.v,c.r,b.a,u.D,u.r,u.u,m.t,Ge.a,m.u,u.w,u.G,m.r],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{outline:none;padding:8px 15px;margin:0;text-transform:capitalize;border-radius:5px;border:0;cursor:pointer}.highlight[_ngcontent-%COMP%]{background-color:#ff0}"]}),e})();function Je(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",9),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let Xe=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.modalService=n,this.user=a,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-30)),this.missingIndusrtyData=[],this.ticketsData=[],this.missing=0,this.backlog=0,this.tickets=1,this.foid=null,this.isFo="true",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.foid=this.user._customer.id,console.log("foId",this.foid),this.ticket()}ngOnInit(){}refresh(){this.ticket()}ticket(){const e="startDate="+this.common.dateFormatter(this.startDate)+"&endDate="+this.common.dateFormatter(this.endDate)+"&isFo="+this.isFo;this.common.loading++,this.api.get("MissingIndustry?"+e).subscribe(e=>{this.common.loading--,console.log(e),this.ticketsData=e.data||[],this.ticketsData.length?this.setTable():this.resetTable(),console.log("data:",this.ticketsData),this.ticketsData&&(this.tickets=1,this.backlog=0)},e=>{this.common.loading--,console.log(e)})}resetTable(){this.table.data={headings:{},columns:[]}}setTable(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}generateHeadings(){let e={};for(var t in this.ticketsData[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getTableColumns(){let e=[];return this.ticketsData.map(t=>{let n={};for(let e in this.generateHeadings())n[e]="Action"==e?{value:"",isHTML:!1,action:null,icons:this.actionIcons(t)}:{value:t[e],class:"black",action:""};e.push(n)}),e}actionIcons(e){return[{class:"fa fa-pencil-alt mr-3",action:this.enterTicket.bind(this,e)}]}enterTicket(e){let t;console.log("Issue :",e);let n={tblRefId:7,tblRowId:e._vid};console.log("params",n),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",n).subscribe(n=>{if(this.common.loading--,t=n,console.log(t),!t.success)return this.common.showToast(n.msg),!1;this.openChangeStatusModal(e)},e=>{this.common.loading--,console.log(e)})}openChangeStatusModal(e){let t=new Date(e.addtime),n=new Date(t.setHours(t.getHours()-48)),a=(this.common.dateFormatter(n),{id:e._id,vehicle_id:e._vid,tTime:e._ttime,suggest:null,latch_time:e._ltime,status:2,remark:e.remark});console.log("missing open data ",a),this.common.ref_page="ari",this.common.params=a,this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(t=>{console.log("after data chnage "),this.foid||this.ticket();let n=[];for(const a of this.ticketsData)a._id!=e._id&&n.push(a);this.ticketsData=n,this.resetTable(),this.setTable(),this.exitTicket(a)})}exitTicket(e){let t;var n={tblRefId:7,tblRowId:e.vehicle_id};console.log("params",n),this.api.post("TicketActivityManagment/updateActivityEndTime",n).subscribe(e=>(t=e,console.log(t),!!t.sucess),e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](A.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["alert-related-issue"]],decls:22,vars:7,consts:[[1,"col-sm-4"],[1,"col-sm-8","text-right"],[1,"row"],[1,"col-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"isStart","dateTimeValue","isTime","onChanged"],[1,"btn","btn-dark",3,"click"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h5"),s["\u0275\u0275text"](4,"Alert Related Issues"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"nb-card-body"),s["\u0275\u0275elementStart"](9,"div",2),s["\u0275\u0275elementStart"](10,"div",3),s["\u0275\u0275elementStart"](11,"uj-date-time-picker",4),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",3),s["\u0275\u0275elementStart"](13,"uj-date-time-picker",5),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",3),s["\u0275\u0275elementStart"](15,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.isFo="true",t.ticket()})),s["\u0275\u0275text"](16,"Fo Issue"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",3),s["\u0275\u0275elementStart"](18,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.isFo="false",t.ticket()})),s["\u0275\u0275text"](19,"All Issue"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",7),s["\u0275\u0275template"](21,Je,1,2,"smart-table",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"]("",t.ticketsData.length," Records"),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate)("isTime",!1),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",t.ticketsData&&t.ticketsData.length))},directives:[c.s,c.v,c.r,Ge.a,m.u,g.a],styles:[".remove[_ngcontent-%COMP%]{font-size:20px;color:red}.missingIndustry[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.backLogs[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.ticket[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.class1[_ngcontent-%COMP%]:active{background:coral;border-radius:5px}.backLogs[_ngcontent-%COMP%], .missingIndustry[_ngcontent-%COMP%], .ticket[_ngcontent-%COMP%]{padding:11px;border-radius:15px}.tableFixHead[_ngcontent-%COMP%]{overflow-y:auto;height:200vh}.tableFixHead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background:#677078}.btn-design[_ngcontent-%COMP%]{border-radius:5px;background-color:#1a8bbf;border:0;color:#fff;margin-left:5px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 240px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var Qe=n("DzYX");let et=(()=>{class e{constructor(e,t,n,a){this.common=e,this.api=t,this.user=n,this.modalService=a,this.supplierData={param1:"",param2:"",param3:"",param4:""},this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}insertSupplierDetails(){this.modalService.open(Qe.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getFoList(e){}getSupplierList(e){}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["gps-supplier-mapping"]],decls:21,vars:6,consts:[[1,"model-body",2,"margin-left","20px","margin-right","20px","margin-top","20px","text-align","center"],[1,"row"],[1,"col-sm-6"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Supplier",3,"preSelected","onSelected"],[1,"row",2,"margin-top","40px"],[1,"col-sm-3"],["type","text","name","input1","placeholder","Input 1",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input2","placeholder","Input 2",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input3","placeholder","Input 3",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input4","placeholder","Input 4",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",2,"margin-top","40px",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Fo GPS Mapping "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"auto-suggestion",3),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",2),s["\u0275\u0275elementStart"](9,"auto-suggestion",4),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getSupplierList(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",5),s["\u0275\u0275elementStart"](11,"div",6),s["\u0275\u0275elementStart"](12,"input",7),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param1=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",6),s["\u0275\u0275elementStart"](14,"input",8),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param2=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",6),s["\u0275\u0275elementStart"](16,"input",9),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param3=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",6),s["\u0275\u0275elementStart"](18,"input",10),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param4=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"Button",11),s["\u0275\u0275listener"]("click",(function(){return t.insertSupplierDetails()})),s["\u0275\u0275text"](20,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.supplierData.param1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.supplierData.param2),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.supplierData.param3),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.supplierData.param4))},directives:[c.s,c.v,c.r,b.a,u.d,u.r,u.u],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();function tt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275elementStart"](6,"select",10),s["\u0275\u0275listener"]("ngModelChange",(function(n){s["\u0275\u0275restoreView"](e);const a=t.index;return s["\u0275\u0275nextContext"](2).is_ncv[a]=n}))("change",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=t.index;return s["\u0275\u0275nextContext"](2).changeNcvValue(n.id,a)})),s["\u0275\u0275elementStart"](7,"option",11),s["\u0275\u0275text"](8,"Long haul "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"option",12),s["\u0275\u0275text"](10,"Short haul with GPS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"option",13),s["\u0275\u0275text"](12,"Short haul without GPS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",a.is_ncv[n])}}function nt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"table",7),s["\u0275\u0275elementStart"](1,"thead",8),s["\u0275\u0275elementStart"](2,"tr"),s["\u0275\u0275elementStart"](3,"th"),s["\u0275\u0275text"](4,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"th"),s["\u0275\u0275text"](6,"Vehicle RegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"th"),s["\u0275\u0275text"](8,"Category"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"tbody"),s["\u0275\u0275template"](10,tt,13,3,"tr",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngForOf",e.vehicleViewDetails)}}let at=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.common=t,this.user=n,this.modalService=a,this.activeModal=o,this.foid="",this.vehicleViewDetails=[],this.showtable=!1,this.is_ncv=[],this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}getFoList(e){this.foid=e.id,this.getVehiclesView()}getVehiclesView(){let e="foid="+this.foid;console.log("params",e),this.common.loading++,this.api.getToTranstruckNew("Vehicles/getVehicleWrtFo.json",e).subscribe(e=>{this.common.loading--,console.log("res: "+e.data),this.vehicleViewDetails=e.data,this.vehicleViewDetails.forEach(e=>{this.is_ncv.push("0"==e.is_ncv?0:"1"==e.is_ncv?1:"2"==e.is_ncv?2:0),this.showtable=!0})},e=>{this.common.loading--,this.common.showError()})}changeNcvValue(e,t){let n={id:e,is_ncv:this.is_ncv[t]};this.common.loading++,this.api.postToTranstrucknew("Vehicles/updateVehicleCvStatus.json",n).subscribe(e=>{this.common.loading--,console.log("responsecode: ",e.responsecode),this.common.showToast("1"==e.responsecode?"Success!!":"Not Success!!"),this.getVehiclesView()},e=>{this.common.loading--,this.common.showError()})}closeModal(){this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](d.b))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vehicles-view"]],decls:10,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["class","table table-bordered mt-3",4,"ngIf"],[1,"table","table-bordered","mt-3"],[1,"thead",2,"background-color","cadetblue","color","white"],[4,"ngFor","ngForOf"],[1,"form-control",2,"border","2px solid darkcyan","font-size","15px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"h5",1),s["\u0275\u0275text"](2," Update Vehicles Category"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),s["\u0275\u0275elementStart"](4,"span",3),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"div"),s["\u0275\u0275elementStart"](8,"auto-suggestion",5),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](9,nt,11,1,"table",6),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.showtable))},directives:[b.a,m.u,m.t,u.D,u.r,u.u,u.w,u.G],styles:[""]}),e})();var ot=n("KtXj");function it(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"button",5),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().updateCompanyDetails(n)})),s["\u0275\u0275text"](8,"Update"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.pan)}}let rt=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.companies=null,this.getCompanies(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getCompanies()}getCompanies(){++this.common.loading,this.api.get("company/getCompanies").subscribe(e=>{--this.common.loading,console.log("response",e),this.companies=e.data,console.log("this.companies:",this.companies)},e=>{--this.common.loading,console.log("Err:",e)})}updateCompanyDetails(e){console.log("company",e),this.common.params={company:e},this.modalService.open(ot.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.getCompanies()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["company-details"]],decls:20,vars:1,consts:[[1,"col-sm-4"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Company Details"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body"),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"table",2),s["\u0275\u0275elementStart"](8,"thead",3),s["\u0275\u0275elementStart"](9,"tr"),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"PAN "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"tbody"),s["\u0275\u0275template"](19,it,9,3,"tr",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("ngForOf",t.companies))},directives:[c.s,c.v,c.r,m.t],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var lt=n("9oc7");function st(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"button",5),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().updateTranportAgent(n)})),s["\u0275\u0275text"](14,"Update"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.pan),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.gstin),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.city),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.state)}}let dt=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.transportAgents=null,this.getTransportAgent(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getTransportAgent()}getTransportAgent(){++this.common.loading,this.api.get("company/getTransportAgents").subscribe(e=>{--this.common.loading,console.log("response",e),this.transportAgents=e.data,console.log("this.transportAgents:",this.transportAgents)},e=>{--this.common.loading,console.log("Err:",e)})}updateTranportAgent(e){console.log("transportAgent",e),this.common.params={transportAgent:e},this.modalService.open(lt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.getTransportAgent()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["transport-agents"]],decls:26,vars:1,consts:[[1,"col-sm-4"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Transport Agents"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body"),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"table",2),s["\u0275\u0275elementStart"](8,"thead",3),s["\u0275\u0275elementStart"](9,"tr"),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"PAN "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"GSTIN "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"th"),s["\u0275\u0275text"](19,"City"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"th"),s["\u0275\u0275text"](21,"State"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"th"),s["\u0275\u0275text"](23,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"tbody"),s["\u0275\u0275template"](25,st,15,6,"tr",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](25),s["\u0275\u0275property"]("ngForOf",t.transportAgents))},directives:[c.s,c.v,c.r,m.t],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var ct=n("cSOp");function mt(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",13),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let gt=(()=>{class e{constructor(e,t,n,a,o,i){this.api=e,this.common=t,this.theme=n,this.user=a,this.datepipe=o,this.modalService=i,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.vId="",this.gpsTrail=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}searchVehicle(e){this.vId=e.id}result(e){let t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate),a="",o={vehicleId:this.vId,startTime:t,toTime:n};switch(e){case 1:a="VehicleTrail/getVehicleTrailAll";break;case 2:a="VehicleTrail/showVehicleTrail";break;case 3:a="AutoHalts/getSingleVehicleHalts"}console.log("params: ",o),this.common.loading++,this.api.post(a,o).subscribe(e=>{this.common.loading--,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],console.log("res: ",e.data),this.gpsTrail=e.data,console.log("Length",e.data.length);let t=this.gpsTrail[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns()},e=>{this.common.loading--,this.common.showError()})}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}getTableColumns(){let e=[];return console.log("Data=",this.gpsTrail),this.gpsTrail.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)console.log("doc index value:",t[this.headings[e]]),this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};e.push(this.valobj)}),e}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](c.Kb),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vehicle-gps-trail"]],decls:24,vars:5,consts:[[2,"margin","0px","padding-top","0px","border","0px"],[2,"padding-bottom","0px","min-height","450px"],[1,"gps-tril-form"],[1,"row"],[1,"col-md-2","pr-0"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"col-md-4","pr-0"],[3,"dateTimeValue","onChanged"],[3,"isStart","dateTimeValue","onChanged"],[1,"row","mt-3"],[1,"col-md-2","offset-md-08"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h5"),s["\u0275\u0275text"](3,"Vehicle Gps Trail"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body",1),s["\u0275\u0275elementStart"](5,"div",2),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"div",4),s["\u0275\u0275elementStart"](8,"auto-suggestion",5),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",6),s["\u0275\u0275elementStart"](10,"uj-date-time-picker",7),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",6),s["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",9),s["\u0275\u0275elementStart"](14,"div",10),s["\u0275\u0275elementStart"](15,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.result(1)})),s["\u0275\u0275text"](16,"VehicleGpsTrail"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",10),s["\u0275\u0275elementStart"](18,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.result(2)})),s["\u0275\u0275text"](19,"VehicleTrail"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",10),s["\u0275\u0275elementStart"](21,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.result(3)})),s["\u0275\u0275text"](22,"VehicleHalts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,mt,1,2,"smart-table",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("dateTimeValue",t.startDate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngIf",t.gpsTrail&&t.gpsTrail.length))},directives:[c.s,c.v,c.r,b.a,Ge.a,m.u,g.a],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.h5[_ngcontent-%COMP%]{color:#008b8b}[_nghost-%COMP%]    .black{color:#000}.gps-tril-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize!important;width:100%;margin:0!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var pt=n("hit9");function ht(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",10),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.description)}}function ut(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",15),s["\u0275\u0275listener"]("mouseover",(function(){s["\u0275\u0275restoreView"](e);const n=t.index;return s["\u0275\u0275nextContext"](2).rotateBounce(n,1)}))("mouseout",(function(){s["\u0275\u0275restoreView"](e);const n=t.index;return s["\u0275\u0275nextContext"](2).rotateBounce(n,2)})),s["\u0275\u0275elementStart"](1,"td",13),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",13),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.subsite_type)}}function bt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"table",11),s["\u0275\u0275elementStart"](1,"thead",12),s["\u0275\u0275elementStart"](2,"tr"),s["\u0275\u0275elementStart"](3,"th",13),s["\u0275\u0275text"](4,"S.No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"th",13),s["\u0275\u0275text"](6,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"th"),s["\u0275\u0275text"](8,"SubSite Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"tbody"),s["\u0275\u0275template"](10,ut,7,3,"tr",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngForOf",e.subSites)}}const ft=function(){return["name","sd_loc_name"]},vt=function(e,t){return{name:e,sd_loc_name:t}};let St=(()=>{class e{constructor(e,t,n){this.common=e,this.api=t,this.mapService=n,this.siteId=null,this.siteName=null,this.siteLoc=null,this.subSites=null,this.subSiteName=null,this.btn="Create Fencing",this.typeIds=[],this.typeId=null,this.subSiteId=null,this.subSiteLatLng=null,this.sitepoly=null,this.subsitepolys=[],this.tempData=[],this.common.refresh=this.refresh.bind(this),this.getTypeIds()}ngOnInit(){}refresh(){this.getTypeIds(),console.log("refresh")}selectSite(e){this.siteId=e.id,this.getFencing()}getTypeIds(){this.api.get("Suggestion/getTypeMaster?typeId=5").subscribe(e=>{console.log("Res: ",e.data),this.typeIds=e.data,this.typeIds.push({id:0,description:"All"})},e=>{console.error(e),this.common.showError()})}createFinishFencing(){this.mapService.isDrawAllow=!this.mapService.isDrawAllow,this.mapService.isDrawAllow||this.submitPolygon()}getSubSites(){let e="siteId="+this.siteId;this.common.loading++,this.api.get("SubSiteOperation/getSubSites?"+e).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.subSites=e.data.markers,this.mapService.clearAll(),this.markerCreate();let t=e.data.fences;console.log("Res: ",e.data),this.createFences(t),this.getFencing(!1)},e=>{this.common.loading--,this.common.showError()})}getFencing(e=!0){let t={strictSelected:!0,siteId:this.siteId};e&&this.mapService.clearAll(),this.common.loading++,this.api.post("SiteFencing/getSiteFences",t).subscribe(e=>{this.common.loading--;let t=e.data;console.log("Res: ",e.data),this.mapService.createMarkers([t[Object.keys(t)[0]].marker],!1,!0,["id","name"]);let n={paths:t[Object.keys(t)[0]].latLngs,strokeColor:"#D2691E",strokeOpacity:.8,strokeWeight:2,clickable:!1,fillColor:"#b5651d",fillOpacity:.35};this.sitepoly&&this.sitepoly.setMap(null),this.sitepoly=this.mapService.createPolygon(t[Object.keys(t)[0]].latLngs,n),this.mapService.setPolyBounds(this.mapService.polygon.getPath(),!0)},e=>{this.common.loading--,this.common.showError()})}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}markerCreate(){this.mapService.createMarkers(this.subSites);for(const e of this.mapService.markers);}rotateBounce(e,t){console.log("index",e),this.mapService.toggleBounceMF(e,t)}submitValidity(){return!(!this.subSiteName||!this.siteId)}submitPolygon(){if(this.submitValidity())if(this.mapService.polygonPath){var e="(",t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var n=0;n<t.length;n++)e+=t[n].lat()+" "+t[n].lng()+",";e=(e+=t[0].lat()+" "+t[0].lng()+",").substr(0,e.length-1),this.api.post(this.subSiteId?"SubSiteOperation/updateSiteFence":"SubSiteOperation/insertSiteFence",{polygon:e+=")",siteId:this.siteId,subSiteName:this.subSiteName,typeId:this.typeId,subSiteId:this.subSiteId}).subscribe(e=>{if(!e.success)return this.common.showError(e.msg),void(this.mapService.isDrawAllow=!0);this.subSiteId=e.data,this.common.showToast("Created subsite"),this.gotoSingle()},e=>{console.error(e),this.common.showError(),this.mapService.isDrawAllow=!0})}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}clearAll(){this.mapService.isDrawAllow=!1,this.subSiteName=null,this.siteId=null,this.siteName=null,this.siteLoc=null,this.subSiteId=null,this.typeId=null,this.subsitepolys.length>0&&(this.subsitepolys.forEach(e=>{e.setMap(null)}),this.subsitepolys=[]),this.sitepoly&&this.sitepoly.setMap(null),this.mapService.clearAll()}gotoSingle(){this.common.loading++,this.api.post("SubSiteOperation/getSubSite",{subSiteId:this.subSiteId}).subscribe(e=>{if(!e.success)return void this.common.showError(e.msg);let t=e.data;console.log("Res: ",t),this.clearAll(),this.tempData=t,this.subSiteLatLng={lat:parseFloat(t[0].lat),lng:parseFloat(t[0].long)},this.typeId=t[0].type_id,this.subSiteId=t[0].id,this.subSiteName=t[0].name,this.siteId=t[0].site_id,this.siteName=t[0].sname,this.siteLoc=t[0].slname,this.getFencing(),this.api.post("SubSiteOperation/getSubSiteFences",{subSiteId:this.subSiteId}).subscribe(e=>{this.common.loading++;let t=e.data;Object.keys(t),console.log("Res: ",e.data),this.createFences(t),this.common.loading--},e=>{console.error(e),this.common.showError(),this.common.loading--})},e=>{console.error(e),this.common.showError()}),this.common.loading--}createFences(e){this.subsitepolys.length>0&&(this.subsitepolys.forEach(e=>{e.setMap(null)}),this.subsitepolys=[]);let t=Object.keys(e).length;if(e[this.subSiteId]&&(this.tempData[0].color="f00"),this.mapService.createMarkers(this.tempData),1==t)this.subsitepolys.push(this.mapService.createPolygon(e[Object.keys(e)[0]].latLngs)),console.log("Single",e[Object.keys(e)[0]]);else if(t>1){let t=[],n=!1,a=!1,o=1e5,i=-1;for(const r in e)if(n=!1,e.hasOwnProperty(r)){const l=e[r];r==this.subSiteId?n=!0:o>l.dis&&(n=!1,o=l.dis,i=t.length),t.push({data:l.latLngs,isMain:n,isSec:a,show:`\n          Id: ${r}<br>\n          Name:${l.name}<br>\n          Location:${l.loc_name}<br>\n          `})}-1!=i&&(t[i].isSec=!0),this.subsitepolys.push(...this.mapService.createPolygons(t))}else console.log("Else")}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](ye.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["sub-sites"]],decls:28,vars:13,consts:[[1,"row"],[1,"col-6"],["url","Suggestion/getSites?typeId=1","seperator","-","placeholder","Search Site",3,"ngModel","display","preSelected","onSelected","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[1,"btn",3,"click"],["placeholder","Sub Site Id",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["class","tbl table table-bordered table-hover",4,"ngIf"],["id","map",1,"map","col-6"],[3,"value"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[3,"mouseover","mouseout",4,"ngFor","ngForOf"],[3,"mouseover","mouseout"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"table"),s["\u0275\u0275elementStart"](5,"tr"),s["\u0275\u0275elementStart"](6,"td"),s["\u0275\u0275elementStart"](7,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectSite(e)}))("ngModelChange",(function(e){return t.siteId=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"td"),s["\u0275\u0275elementStart"](9,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.typeId=e})),s["\u0275\u0275template"](10,ht,2,2,"option",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275elementStart"](12,"input",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.subSiteName=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"tr"),s["\u0275\u0275elementStart"](14,"td"),s["\u0275\u0275elementStart"](15,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.createFinishFencing()})),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"td"),s["\u0275\u0275elementStart"](18,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.getSubSites()})),s["\u0275\u0275text"](19,"Get SubSites"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275elementStart"](21,"input",7),s["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.subSiteId=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"tr"),s["\u0275\u0275elementStart"](23,"td"),s["\u0275\u0275elementStart"](24,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),s["\u0275\u0275text"](25,"Clear All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](26,bt,11,1,"table",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](27,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.siteId)("display",s["\u0275\u0275pureFunction0"](9,ft))("preSelected",s["\u0275\u0275pureFunction2"](10,vt,t.siteName,t.siteLoc)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.typeId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.typeIds),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.subSiteName),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",t.subSiteId),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.subSites))},directives:[c.s,c.r,b.a,u.r,u.u,u.D,m.t,u.d,m.u,u.w,u.G],styles:[".map[_ngcontent-%COMP%]{width:90%;height:90vh}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var xt=n("JYbL");function yt(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",10),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let Ct=(()=>{class e{constructor(e,t,n,a,o,i){let r;this.api=e,this.common=t,this.theme=n,this.user=a,this.datepipe=o,this.modalService=i,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},r=new Date,this.endDate=this.common.dateFormatter(r).split(" ")[0],this.startDate=this.common.dateFormatter(r).split(" ")[0],console.log("dates ",this.endDate,this.startDate),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getSummary()}getDate(e){this.common.params={ref_page:"trip status feedback"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&("start"==e?(this.startDate="",this.startDate=this.common.dateFormatter(t.date).split(" ")[0]):(this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)))})}getSummary(){this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};const e="startDate="+this.startDate+"&endDate="+this.endDate+" 23:59:59";console.log("params: ",e),this.common.loading++,this.api.get("FoDetails/getFoActivitySummary?"+e).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),this.activitySummary=e.data,console.log("activitySummary",this.activitySummary);let t=this.activitySummary[0];for(var n in console.log("first_Rec",t),t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},e=>{this.common.loading--,this.common.showError()})}getTableColumns(){let e=[];for(var t=0;t<this.activitySummary.length;t++){this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:this.activitySummary[t][this.headings[e]],class:"black",action:this.openUserData.bind(this,this.activitySummary[t])};e.push(this.valobj)}return e}openUserData(e){this.common.params={foid:e._idfo},this.common.openType="modal",this.modalService.open(xt.a,{size:"lg",container:"nb-layout",windowClass:"mycustomModalClass",backdrop:"static"})}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](c.Kb),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["activity-summary"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-4","text-right"],[1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Activity Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"div",1),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"input",5),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](10,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",4),s["\u0275\u0275elementStart"](12,"input",6),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](13,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.getSummary()})),s["\u0275\u0275text"](16," submit "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"nb-card-body"),s["\u0275\u0275elementStart"](18,"div"),s["\u0275\u0275template"](19,yt,1,2,"smart-table",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](10,3,t.startDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](13,6,t.endDate,"dd MMM yyyy")),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.activitySummary&&t.activitySummary.length))},directives:[c.s,c.v,c.r,m.u,g.a],pipes:[m.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}nb-card-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:7px 15px;text-transform:capitalize;width:100%;border-radius:5px;border:0}[_nghost-%COMP%]   [_ngcontent-%COMP%]::nb-deep   .tableFixHead[_ngcontent-%COMP%]{height:auto!important;max-height:calc(100vh - 170px)}"]}),e})();function Mt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"th"),s["\u0275\u0275text"](8),s["\u0275\u0275pipe"](9,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"td"),s["\u0275\u0275text"](11),s["\u0275\u0275pipe"](12,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.regno),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.apiprovider),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](9,5,e.lastcalldt,"dd MMM HH:mm")),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](12,8,e.dttime,"dd MMM HH:mm"))}}let Et=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.gpsDtails=[],this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleGpsDetail()}getFoList(e){this.foid=e.id,console.log("foid: ",this.foid),this.getVehicleGpsDetail()}getVehicleGpsDetail(){this.common.loading++,this.api.get("GpsData/getVehicleGpsDetail?foid="+this.foid).subscribe(e=>{this.common.loading--,console.log("res: ",e.data),this.gpsDtails=e.data},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vehicle-gps-detail"]],decls:22,vars:2,consts:[[1,"model-body"],[1,"row",2,"margin-left","10px"],["url","suggestion/getFoUsersList","display","name","placeholder","Search",3,"preSelected","onSelected"],[1,"table","table-bordered",2,"margin-left","5px","margin-top","10px","margin-right","5px"],[1,"thead"],["id","heading-row"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Vehicle Gps Detail "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"table",3),s["\u0275\u0275elementStart"](8,"thead",4),s["\u0275\u0275elementStart"](9,"tr",5),s["\u0275\u0275elementStart"](10,"th"),s["\u0275\u0275text"](11,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"Vehicle RegNo."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"Api Provider"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"Last Call"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"th"),s["\u0275\u0275text"](19,"Date Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"tbody"),s["\u0275\u0275template"](21,Mt,13,11,"tr",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](15),s["\u0275\u0275property"]("ngForOf",t.gpsDtails))},directives:[c.s,c.v,c.r,b.a,m.t],pipes:[m.f],styles:[""]}),e})();var _t=n("9zuT"),wt=n("pSdM");function kt(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",14),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function Pt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}const Ot=function(){return["name","sd_loc_name"]};let Dt=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.data=[],this.ruleType=[{id:11,name:"Loading"},{id:21,name:"UnLoading"},{id:31,name:"Loading & Unloading"}],this.bodyType=[{id:11,name:"3axle"},{id:21,name:"4axle"},{id:31,name:"6axle"}],this.materialType="",this.siteId=null,this.vehicle={id:null,regno:null},this.table=null,this.common.refresh=this.refresh.bind(this),this.getSiteData()}ngOnInit(){}refresh(){this.getSiteData(),this.vehicle.id=null,this.siteId=null}addsite(){this.common.params={},this.modalService.open(wt.a,{container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getSiteData()})}getSiteData(){this.common.loading++,this.api.get("TripSiteRule").subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data?e.data:[];let t=0;for(const n of this.data){let e=this.bodyType.find(e=>e.id==this.data[t].bodytype_id);this.data[t].bodyName=e?e.name:"N.A";let a=this.ruleType.find(e=>e.id==this.data[t].ruletype_id);this.data[t].ruleName=a?a.name:"N.A",this.data[t].preSiteType=n.pre_site_name?n.pre_site_name:"N.A",this.data[t].materialType=n.mt_name?n.mt_name:"N.A",t++}this.table=this.setTable()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}setTable(){return{data:{headings:{foName:{title:"Fo Name",placeholder:"Fo Name"},preSiteName:{title:"Pre Site Name ",placeholder:"Pre Site Name"},currentSiteName:{title:"Current Site Name ",placeholder:"Current Site Name"},materialName:{title:"Material Name ",placeholder:"Material Name"},bodyType:{title:"Body Type ",placeholder:"Body Type"},ruleType:{title:"Rule Type",placeholder:"Rule Type"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let e=[];return this.data.map(t=>{let n={foName:{value:t.f_name},preSiteName:{value:t.preSiteType},currentSiteName:{value:t.curr_site_name},materialName:{value:t.materialType},bodyType:{value:t.bodyName},ruleType:{value:t.ruleName},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",action:this.editRule.bind(this,t)},{class:" fa fa-trash remove",action:this.deleteRule.bind(this,t)}]},rowActions:{click:"selectRow"}};e.push(n)}),e}editRule(e){console.log("row",e),this.common.params={title:"Edit Site Rule",row:e},this.modalService.open(wt.a,{container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getSiteData()})}deleteRule(e){if(window.confirm("Are You Want Delete Record")){const t={foid:e.foid,currSiteId:e.current_siteid,preSiteId:e.pre_siteid};this.common.loading++,this.api.post("TripSiteRule/delete",t).subscribe(e=>{this.common.loading--;let t=e.data;console.log("data:"),console.log(t),this.common.showToast(e.msg),this.getSiteData()},e=>{this.common.loading--,console.log(e)})}}getAllSiteData(){this.common.loading++,this.api.get("TripSiteRule?vehicleId="+this.vehicle.id+"&siteId="+this.siteId).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data;let t=0;for(const n of this.data){let e=this.bodyType.find(e=>e.id==this.data[t].bodytype_id);this.data[t].bodyName=e?e.name:"N.A";let a=this.ruleType.find(e=>e.id==this.data[t].ruletype_id);this.data[t].ruleName=a?a.name:"N.A",this.data[t].preSiteType=n.pre_site_name?n.pre_site_name:"N.A",this.data[t].materialType=n.mt_name?n.mt_name:"N.A",t++}this.table=null,this.table=this.setTable()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}selectVehicle(e){this.vehicle.id=e.id}selectSite(e){this.siteId=e.id}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-site-rule"]],decls:23,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[1,"row","mb-3"],[1,"col-3"],["url","suggestion/getVehicleList","display","regno","placeholder","Regno",3,"ngModel","preSelected","onSelected","ngModelChange"],[1,"suggestions","ng-star-inserted"],["url","Suggestion/getSites?typeId=1","seperator","-","placeholder","Search Site",3,"ngModel","display","preSelected","onSelected","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Trip Site Rule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.addsite()})),s["\u0275\u0275text"](8,"Add Rule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"nb-card-body",5),s["\u0275\u0275elementStart"](10,"div",6),s["\u0275\u0275elementStart"](11,"div",7),s["\u0275\u0275elementStart"](12,"auto-suggestion",8),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)}))("ngModelChange",(function(e){return t.vehicle.id=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](13,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"auto-suggestion",10),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectSite(e)}))("ngModelChange",(function(e){return t.siteId=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](16,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",7),s["\u0275\u0275elementStart"](18,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.getAllSiteData()})),s["\u0275\u0275text"](19,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div"),s["\u0275\u0275template"](21,kt,1,2,"smart-table",12),s["\u0275\u0275template"](22,Pt,2,0,"div",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngModel",t.vehicle.id)("preSelected",null),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.siteId)("display",s["\u0275\u0275pureFunction0"](7,Ot))("preSelected",null),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.data.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[c.s,c.v,c.r,b.a,u.r,u.u,m.u,g.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var It=n("M5JG");function Tt(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",16),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let At=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.tripLogs=[],this.startDate=null,this.endDate=null,this.status="-1",this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};let o=new Date;this.startDate=this.common.dateFormatter(o).split(" ")[0],this.endDate=this.common.dateFormatter(new Date(o.setDate(o.getDate()+1))).split(" ")[0],console.log("dates ",this.endDate,this.startDate),this.getTripLogs(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getTripLogs()}getDate(e){this.common.params={ref_page:"trip status feedback log"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{if(t.date)if("start"==e){this.startDate="",this.startDate=this.common.dateFormatter(t.date).split(" ")[0];let e=new Date(t.date);console.log("fromDate",this.startDate),this.endDate=this.common.dateFormatter(new Date(e.setDate(e.getDate()+1))).split(" ")[0]}else this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)})}getTripLogs(){this.tripLogs=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++;let e="startDate="+this.startDate+"&endDate="+this.endDate+"&status="+this.status;console.log("params",e),this.api.get("TripsOperation/tripDetailsVerificationLogs?"+e).subscribe(e=>{this.common.loading--,this.tripLogs=e.data?e.data:[],console.log("Trips Logs",this.tripLogs);let t=this.tripLogs[0];for(var n in console.log("first_Rec",t),t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:n,placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)},e=>{this.common.loading--,console.log(e)})}getTableColumns(){let e=[];for(var t=0;t<this.tripLogs.length;t++){this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]="Vehicle"==this.headings[e]?{value:this.tripLogs[t][this.headings[e]],class:"black",action:this.openChangeStatusModal.bind(this,this.tripLogs[t])}:"New Destination"==this.headings[e]?{value:this.tripLogs[t][this.headings[e]],class:"blue",action:this.openPlacementModal.bind(this,this.tripLogs[t])}:"Action"==this.headings[e]?0==this.tripLogs[t][this.headings[e]]?{value:"Action Required",class:"red",action:this.changeTripFeedbackAction.bind(this,this.tripLogs[t])}:{value:"Done",class:"green"}:{value:this.tripLogs[t][this.headings[e]],class:"black",action:""};e.push(this.valobj)}return e}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}openChangeStatusModal(e){console.log("missing open data +++",e);let t=new Date,n=this.common.dateFormatter(new Date),a=new Date(t.setHours(t.getHours()-48)),o=this.common.dateFormatter(a),i={id:e.id,vehicle_id:e._vid,tTime:n,suggest:null,latch_time:o,status:2,remark:e.remark};this.common.ref_page="tsfl",this.common.params=i,console.log("missing open data --",this.common.params),this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(e=>{console.log("after data chnage ")})}getVerifiedButton(){return'\n    <button class="btn btn-primary m-0" (click)="checked();">Get Details</button>\n    '}openPlacementModal(e){this.common.params={tripDetils:{vehicleId:e._vid,siteId:-1},ref_page:"trip status feedback logs"},this.modalService.open(It.a,{size:"lg",container:"nb-layout",backdrop:"static"})}changeTripFeedbackAction(e){let t={tripFeedbackId:e._id};this.common.loading++,this.api.post("TripsOperation/changeTripFeedbackAction",t).subscribe(e=>{this.common.loading--,this.common.showToast(e.msg),1==e.code&&this.getTripLogs()},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-status-feedback-logs"]],decls:30,vars:7,consts:[[1,"row"],[1,"col-sm-8"],[1,"col-sm-4",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"form-control",3,"ngModel","name","ngModelChange"],["value","-1"],["value","1"],["value","2"],[1,"col-sm-2"],[1,"btn","btn-primary","m-0",3,"click"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"h4"),s["\u0275\u0275text"](5,"Trip FeedBack Logs"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"span",3),s["\u0275\u0275listener"]("click",(function(){return t.common.getPDFFromTableId("tbldocs")})),s["\u0275\u0275element"](8,"i",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"span",5),s["\u0275\u0275listener"]("click",(function(){return t.common.getCSVFromTableId("tbldocs")})),s["\u0275\u0275element"](10,"i",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"nb-card-body"),s["\u0275\u0275elementStart"](12,"div",0),s["\u0275\u0275elementStart"](13,"div",7),s["\u0275\u0275elementStart"](14,"input",8),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](15,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",7),s["\u0275\u0275elementStart"](17,"select",9),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),s["\u0275\u0275elementStart"](18,"option",10),s["\u0275\u0275text"](19,"All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"option",11),s["\u0275\u0275text"](21,"Verify"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"option",12),s["\u0275\u0275text"](23,"Change"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",13),s["\u0275\u0275elementStart"](25,"button",14),s["\u0275\u0275listener"]("click",(function(){return t.getTripLogs()})),s["\u0275\u0275text"](26,"Get Details"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div"),s["\u0275\u0275template"](28,Tt,1,2,"smart-table",15),s["\u0275\u0275element"](29,"br"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](14),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](15,4,t.startDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.status)("name",t.status),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngIf",t.tripLogs&&t.tripLogs.length))},directives:[c.s,c.v,c.r,u.D,u.r,u.u,u.w,u.G,m.u,g.a],pipes:[m.f],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}[_nghost-%COMP%]    .green{background-color:#0eec0e}[_nghost-%COMP%]    .red{background-color:#9f0001}[_nghost-%COMP%]    .blue{color:#1801e9}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var Ft=n("ahTD"),Lt=n("vjOA"),Vt=n("X67o");function zt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"auto-suggestion",17),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().getFolist(t)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("preSelected",null))}function Nt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"auto-suggestion",18),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().getGroup(t)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("preSelected",null))}function jt(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",19),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.vscEntry)("settings",e.table.settings)}}let Rt=(()=>{class e{constructor(e,t,n,a,o,i){this.modalService=e,this.api=t,this.common=n,this.datePipe=a,this.user=o,this.activeModal=i,this.ticketSubscribe={refType:"1",refId:"",isActive:!1,isOld:!1},this.table=null,this.vscEntry=[],this.getVscEntry(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getVscEntry()}subscribe(){if(!this.ticketSubscribe.refId)return void this.common.showToast("Fo/Group Is Missing");let e={ref_type:parseInt(this.ticketSubscribe.refType),ref_id:this.ticketSubscribe.refId,is_active:this.ticketSubscribe.isActive?1:0,is_old:this.ticketSubscribe.isOld?1:0};console.log("params to insert",e),this.common.loading++,this.api.post("FoTicketSubscribe/insertVscEntry",e).subscribe(e=>{this.common.loading--,console.log(e.data),e.success&&(this.common.showToast(e.msg),this.getVscEntry())},e=>{this.common.loading--,this.common.showError()})}getFolist(e){this.ticketSubscribe.refId=e.id}getGroup(e){this.ticketSubscribe.refId=e.id}getVscEntry(){this.common.loading++,this.api.get("FoTicketSubscribe/getVscEntry").subscribe(e=>{this.common.loading--,console.log("res",e.data),this.vscEntry=e.data,this.table=this.setTable()},e=>{this.common.loading--,this.common.showError()})}setTable(){return{vscEntry:{headings:{Type:{title:"Type",placeholder:"Type"},isActive:{title:"isActive",placeholder:"isActive"},isOld:{title:"isOld",placeholder:"isOld"},Name:{title:"Name",placeholder:"Name"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}getTableColumns(){let e=[];return this.vscEntry.map(t=>{let n={Type:{value:t.type},isActive:{value:t.is_active},isOld:{value:t.is_old},Name:{value:t.name},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",action:this.editTicketSubscribe.bind(this,t)}]}};e.push(n)}),e}closeModal(){this.activeModal.close()}editTicketSubscribe(e){this.common.params=e,console.log("Param",this.common.params),this.modalService.open(Vt.a,{size:"sm",container:"nb-layout"}).result.then(e=>{e.update&&this.getVscEntry()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.b))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["ticket-subscribe"]],decls:26,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px","height","20px",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["class","col-sm-3",4,"ngIf"],[1,"col-sm-3",2,"height","20px"],["type","checkbox","name","isnotify","value","check",3,"ngModel","ngModelChange"],["type","checkbox","name","isold","value","check",2,"margin-left","20px",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"row",2,"margin-top","20px"],["id","tblvscEntry",3,"data","settings",4,"ngIf"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","suggestion/getGroups","display","description","placeholder","Search Group",3,"preSelected","onSelected"],["id","tblvscEntry",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"h5",1),s["\u0275\u0275text"](2,"Fo Ticket Subscribe"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),s["\u0275\u0275elementStart"](4,"span",3),s["\u0275\u0275text"](5,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"div",5),s["\u0275\u0275elementStart"](8,"div",6),s["\u0275\u0275elementStart"](9,"select",7),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.refType=e})),s["\u0275\u0275elementStart"](10,"option",8),s["\u0275\u0275text"](11,"Fo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"option",9),s["\u0275\u0275text"](13,"Group"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](14,zt,2,1,"div",10),s["\u0275\u0275template"](15,Nt,2,1,"div",10),s["\u0275\u0275elementStart"](16,"div",11),s["\u0275\u0275elementStart"](17,"input",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.isActive=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](18," isActive "),s["\u0275\u0275elementStart"](19,"input",13),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.isOld=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](20,"isOld "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",6),s["\u0275\u0275elementStart"](22,"button",14),s["\u0275\u0275listener"]("click",(function(){return t.subscribe()})),s["\u0275\u0275text"](23,"Save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",15),s["\u0275\u0275template"](25,jt,1,2,"smart-table",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngModel",t.ticketSubscribe.refType),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf","1"==t.ticketSubscribe.refType),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","2"==t.ticketSubscribe.refType),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.ticketSubscribe.isActive),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.ticketSubscribe.isOld),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.table))},directives:[u.D,u.r,u.u,u.w,u.G,m.u,u.a,b.a,g.a],styles:["[_nghost-%COMP%]     .tag .no-search span{color:#000}"]}),e})();var Ht=n("rMv4"),Ut=n("2v/f"),Bt=n("HXSw"),Gt=n("1Qjg"),$t=n("bEhG"),Yt=n("K8iq"),Wt=n("ciOb"),Kt=n("GVT9"),Zt=n("cQKx"),qt=n("xxZ6"),Jt=n("8BUE"),Xt=n("lc8v");let Qt=(()=>{class e{constructor(e,t,n){this.modalService=e,this.common=t,this.api=n,this.foid=null,this.location={grade:"",location:"",lat:"",lng:""},this.data=[],this.common.refresh=this.refresh.bind(this)}refresh(){console.log("Refresh")}ngOnInit(){}addVehicle(){this.modalService.open(Yt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}addFoAdminUser(){this.modalService.open(Ut.a,{size:"lg",container:"nb-layout",backdrop:"static"})}submitted1(){this.modalService.open(Gt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}locationSelection(){this.common.params={placeholder:"selectLocation",title:"SelectLocation"},this.modalService.open(Bt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("response",e),e.location&&(this.location={grade:"",location:e.location.name,lat:e.location.lat,lng:e.location.lng})})}submitted2(){this.modalService.open($t.a,{size:"lg",container:"nb-layout",backdrop:"static"})}typeMaster(){this.modalService.open(Kt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getUserBank(){this.modalService.open(Zt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}vehiclesview(){this.modalService.open(at,{size:"lg",container:"nb-layout",backdrop:"static"})}VSCSubscribe(){this.modalService.open(Rt,{size:"lg",container:"nb-layout",backdrop:"static"})}GpsDetail(){this.common.loading++,this.api.get("GpsData/getGpsInfoWrtFo").subscribe(e=>{this.common.loading--,console.log(e),this.data=e.data,console.log("pa",this.data),this.data&&(this.common.params=this.data,this.modalService.open(Wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}))},e=>{this.common.loading--,console.error(e),this.common.showError()})}bulkCompanyAssociation(){this.modalService.open(qt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}addMultiVehicleHalt(){this.modalService.open(Jt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}addSingleVehicleHalt(){this.modalService.open(Xt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["add-customer"]],decls:45,vars:0,consts:[[1,"container"],[1,"row",2,"margin-bottom","10px"],[1,"col-4"],["id","button",1,"btn","btn-primary","w-100",3,"click"],[1,"row",2,"margin-top","10px"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," ADD CUSTOMER "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.submitted1()})),s["\u0275\u0275text"](8,"Add Fo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",2),s["\u0275\u0275elementStart"](10,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.addFoAdminUser()})),s["\u0275\u0275text"](11,"Fo AdminUser"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",2),s["\u0275\u0275elementStart"](13,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.addVehicle()})),s["\u0275\u0275text"](14,"Add Vehicles"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",4),s["\u0275\u0275elementStart"](16,"div",2),s["\u0275\u0275elementStart"](17,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.submitted2()})),s["\u0275\u0275text"](18,"GPS History"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",2),s["\u0275\u0275elementStart"](20,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.vehiclesview()})),s["\u0275\u0275text"](21,"Vehicles Category"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",2),s["\u0275\u0275elementStart"](23,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.VSCSubscribe()})),s["\u0275\u0275text"](24,"VSC_Subscribe "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",4),s["\u0275\u0275elementStart"](26,"div",2),s["\u0275\u0275elementStart"](27,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.GpsDetail()})),s["\u0275\u0275text"](28,"GPS Enable/Disable"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",2),s["\u0275\u0275elementStart"](30,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.typeMaster()})),s["\u0275\u0275text"](31,"Type Master"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",2),s["\u0275\u0275elementStart"](33,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.getUserBank()})),s["\u0275\u0275text"](34,"User Bank Info"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"div",4),s["\u0275\u0275elementStart"](36,"div",2),s["\u0275\u0275elementStart"](37,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.bulkCompanyAssociation()})),s["\u0275\u0275text"](38,"Bulk company Association"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",2),s["\u0275\u0275elementStart"](40,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.addMultiVehicleHalt()})),s["\u0275\u0275text"](41,"Add Multivehicle Halt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",2),s["\u0275\u0275elementStart"](43,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.addSingleVehicleHalt()})),s["\u0275\u0275text"](44,"Add Single Vehicle Data"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())},directives:[c.s,c.v,c.r],styles:["button[_ngcontent-%COMP%]{text-transform:capitalize}"]}),e})();var en=n("kZSg");function tn(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",8),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function nn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",9),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let an=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.table=null,this.fuelNorms=[],this.common.refresh=this.refresh.bind(this),this.getFuelNorms()}ngOnInit(){}refresh(){console.log("Refresh"),this.getFuelNorms()}addFuelRule(){this.common.params={},this.modalService.open(en.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getFuelNorms()})}getFuelNorms(){this.fuelNorms=[],this.common.loading++,this.api.get("Fuel/getFuelFullNorms").subscribe(e=>{this.common.loading--,console.log("res",e.data),this.fuelNorms=e.data||[],this.table=this.setTable()},e=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{FoName:{title:"Fo Name",placeholder:"Fo Name"},RuleType:{title:"Rule Type ",placeholder:"Rule Type"},Name:{title:"Name ",placeholder:"Name"},AngleFrom:{title:"Angle From ",placeholder:"Angle From"},AngleTo:{title:"Angle To ",placeholder:"Angle To"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let e=[];return this.fuelNorms.map(t=>{let n={FoName:{value:t.fo_name},RuleType:{value:t.type},Name:{value:t.name},AngleFrom:{value:t.angle_from},AngleTo:{value:t.angle_to},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",action:this.updateRule.bind(this,t)},{class:" fa fa-trash remove",action:this.deleteRule.bind(this,t)}]},rowActions:{click:"selectRow"}};e.push(n)}),e}updateRule(e){console.log("rule",e),this.common.params={title:"Edit fuel Rule",rule:e},this.modalService.open(en.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getFuelNorms()})}deleteRule(e){if(window.confirm("Are You Want Delete Record")){const t={rowid:e.id};console.log("params",t),this.common.loading++,this.api.post("Fuel/deleteRule",t).subscribe(e=>{this.common.loading--;let t=e.data;console.log("data:"),console.log(t),this.common.showToast(e.msg),this.getFuelNorms()},e=>{this.common.loading--,console.log(e)})}}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["fuel-rules"]],decls:13,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Fuel Rules"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.addFuelRule()})),s["\u0275\u0275text"](8,"Add Rule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"nb-card-body",5),s["\u0275\u0275elementStart"](10,"div"),s["\u0275\u0275template"](11,tn,1,2,"smart-table",6),s["\u0275\u0275template"](12,nn,2,0,"div",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngIf",t.fuelNorms&&t.fuelNorms.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.fuelNorms.length))},directives:[c.s,c.v,c.r,m.u,g.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),e})(),on=(()=>{class e{constructor(e,t,n){this.mapService=e,this.apiService=t,this.commonService=n,this.isUpdate=!1,this.selectedArea={lat:null,long:null,id:null,loc_name:null},this.locName=null,this.locLatLng={lat:0,lng:0},this.commonService.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("siteLoc",(e,t,n,a)=>{this.commonService.loading++,this.mapService.zoomAt({lat:t,lng:n},10),this.clearAll(),this.locLatLng={lat:t,lng:n};let o=a.split(",");console.log("PlaceT",o,"pLACE",a),this.locName=o[0]+"("+o[1].substr(0,3)+")",this.gotoSingle(!1),this.commonService.loading--}),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}gotoSingle(e=!0){this.commonService.loading++,this.apiService.post("SiteFencing/getPumpStationArea",{lat:this.locLatLng.lat,lng:this.locLatLng.lng}).subscribe(t=>{let n=t.data;if(!n)return this.isUpdate=!1,void this.commonService.loading--;this.isUpdate=!!n[this.locName];let a=Object.keys(n).length;if(console.log("Res: ",t.data),1==a){e&&this.clearAll();let t=[{data:n[Object.keys(n)[0]].latLngs,isMain:this.isUpdate,isSec:!this.isUpdate,show:Object.keys(n)[0]}];this.mapService.createPolygons(t),console.log("Single",n[Object.keys(n)[0]])}else if(a>1){let t=[],a=!1,o=!1,i=1e5,r=-1;for(const e in n)if(a=!1,n.hasOwnProperty(e)){const l=n[e];e==this.locName?a=!0:i>l.dis&&(a=!1,i=l.dis,r=t.length),t.push({data:l.latLngs,isMain:a,isSec:o,show:e}),console.log("Multi",e)}-1!=r&&(t[r].isSec=!0),e&&this.clearAll(),this.mapService.createPolygons(t)}this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})}selectArea(e){console.log("Srearch",e),this.commonService.loading++,this.clearAll(),this.isUpdate=!0,this.locName=e.loc_name,e.lat=parseFloat(e.lat),e.long=parseFloat(e.long),this.locLatLng={lat:e.lat,lng:e.long},this.mapService.zoomAt(this.locLatLng,10),this.gotoSingle(!1),this.selectedArea=e,console.log("slectedArea",this.selectArea),this.commonService.loading--}clearAll(e=!1){this.exitTicket(),this.mapService.isDrawAllow=!1,this.locName=null,this.locLatLng=null,this.isUpdate=!1,this.selectedArea=null,e?this.mapService.clearAll():this.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!0})}submitPolygon(){if(this.submitValidity())if(this.mapService.polygonPath){var e="(",t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var n=0;n<t.length;n++)e+=t[n].lat()+" "+t[n].lng()+",";e=(e+=t[0].lat()+" "+t[0].lng()+",").substr(0,e.length-1),e+=")",this.isUpdate?this.apiService.post("SiteFencing/updatePumpStationArea",{polygon:e,locName:this.selectedArea.loc_name,lat:this.selectedArea.lat,long:this.selectedArea.long,angle_from:this.angleFrom,angle_to:this.angleTo}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Updated"),this.gotoSingle()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0}):this.apiService.post("SiteFencing/insertPumpStationAreaFence",{polygon:e,locName:this.locName,lat:this.locLatLng.lat,long:this.locLatLng.lng,angle_from:this.angleFrom,angle_to:this.angleTo}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Created"),this.gotoSingle()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}DeleteArea(){console.log("Selected  Area",this.selectedArea),this.selectedArea.loc_name?this.apiService.post("SiteFencing/deletePumpStationArea",{locName:this.selectedArea.loc_name}).subscribe(e=>{console.log("Res: ",e.data),this.commonService.showToast("Deleted"),this.clearAll()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0}):this.commonService.showError("Load Area!!")}submitValidity(){return!!this.locName}loadMarkers(){let e=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:e.lat1,lng1:e.lng1,lat2:e.lat2,lng2:e.lng2,typeId:1}).subscribe(e=>{let t=e.data;console.log("Res: ",e.data),this.mapService.clearAll(!0,!0,{marker:!0,polygons:!1,polypath:!1}),this.mapService.createMarkers(t)},e=>{console.error(e),this.commonService.showError()})}enterTicket(){this.locName?this.mapService.isDrawAllow?this.submitPolygon():this.mapService.isDrawAllow=!0:this.commonService.showToast("Select Location First..")}exitTicket(){return console.log("params",{tblRefId:9,tblRowId:this.locName}),!1}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](ye.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["pump-station-area"]],decls:44,vars:5,consts:[[1,"row"],[1,"col-6","table"],["type","text","name","anglefrom","placeholder","Angle from",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","angleTo","placeholder","Angle To",1,"form-control",3,"ngModel","ngModelChange"],["rowspan","2"],[1,"btn","btn-primary",2,"margin-top","30px",3,"click"],["name","selected-area","url","Suggestion/getPumpStationArea","display","loc_name","placeholder","Station Name...",3,"preSelected","onSelected"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],["id","map",1,"map","col-6"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"table"),s["\u0275\u0275elementStart"](5,"tbody"),s["\u0275\u0275elementStart"](6,"tr"),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"input",2),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.angleFrom=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275elementStart"](10,"input",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.angleTo=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td",4),s["\u0275\u0275elementStart"](12,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"tr"),s["\u0275\u0275elementStart"](15,"td"),s["\u0275\u0275elementStart"](16,"auto-suggestion",6),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectArea(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"td"),s["\u0275\u0275elementStart"](18,"input",7),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.locName=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275elementStart"](21,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.clearAll(!0)})),s["\u0275\u0275text"](22,"Clear All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"td"),s["\u0275\u0275elementStart"](24,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),s["\u0275\u0275text"](25,"Load Marker"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"td"),s["\u0275\u0275elementStart"](27,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.DeleteArea()})),s["\u0275\u0275text"](28,"Delete Loc"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"tr"),s["\u0275\u0275elementStart"](30,"td",9),s["\u0275\u0275elementStart"](31,"div",10),s["\u0275\u0275elementStart"](32,"span"),s["\u0275\u0275elementStart"](33,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),s["\u0275\u0275text"](34,"1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),s["\u0275\u0275text"](36,"2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),s["\u0275\u0275text"](38,"3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),s["\u0275\u0275text"](40,"4"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),s["\u0275\u0275text"](42,"5"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](43,"div",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngModel",t.angleFrom),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.angleTo),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.locName))},directives:[c.s,c.r,u.d,u.r,u.u,b.a],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();function rn(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",14),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let ln=(()=>{class e{constructor(e,t,n,a,o){this.router=e,this.modalservice=t,this.common=n,this.api=a,this.user=o,this.table=null,this.dates={startTime:this.common.dateFormatter(new Date),endTime:this.common.dateFormatter(new Date)},this.data=[],this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.gettollTransactionSummary()}getDate(e){this.modalservice.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.dates[e]=this.common.dateFormatter(t.time).split("")[0],console.log("Date:",this.dates[e])})}setTable(){return{data:{headings:{regno:{title:"Vehicle Number",placeholder:"Vehicle Number"},transtime:{title:"transit Time ",placeholder:"Transit Time "},amount:{title:"amount",placeholder:"Amount"},plaza_name:{title:"plaza  ",placeholder:"Plaza "},txnid:{title:"transaction id",placeholder:"Transaction id"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}getTableColumns(){let e=[];return this.data.map(t=>{let n={regno:{value:t.regno},transtime:{value:null==t.transtime?"-":this.common.changeDateformat(t.transtime)},amount:{value:null==t.amount?"-":t.amount},plaza_name:{value:null==t.plaza_name?"-":t.plaza_name},txnid:{value:null==t.txnid?"-":t.txnid},rowActions:{}};e.push(n)}),e}gettollTransactionSummary(){let e={startTime:this.dates.startTime,endTime:this.dates.endTime};this.common.loading++,this.api.post("Toll/getTollTxn",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,this.table=this.setTable()},e=>{this.common.loading--,console.log(e)})}printPDF(e){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.common.getPDFFromTableId(e,t.data.name,"Toll Transaction Summary",null,"")},e=>{this.common.loading--,console.log(e)})}printCSV(e){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.common.getCSVFromTableId(e,t.data.name,"Toll Transaction Summary",null,"")},e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](A.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["toll-transaction-summary"]],decls:25,vars:7,consts:[[1,"row","m-0","p-0"],[1,"col-3"],["placeholder","Start Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["placeholder","End Time","autocomplete","off","name","date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date",""],["type","button",1,"btn","btn-primary","submit-btn",3,"click"],[1,"col-md-12","text-right","margin-top-15","margin-left-220"],[2,"margin-bottom","10px","display","block"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],["id","toll-summary",3,"data","settings",4,"ngIf"],["id","toll-summary",3,"data","settings"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h2"),s["\u0275\u0275text"](3,"Toll Transaction Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"input",2),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.dates.startTime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](7,"owl-date-time",null,3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",1),s["\u0275\u0275elementStart"](10,"input",4),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.dates.endTime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](11,"owl-date-time",null,5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",1),s["\u0275\u0275elementStart"](14,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),s["\u0275\u0275text"](15,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",0),s["\u0275\u0275elementStart"](17,"div",7),s["\u0275\u0275elementStart"](18,"span",8),s["\u0275\u0275elementStart"](19,"span",9),s["\u0275\u0275listener"]("click",(function(){return t.printPDF("toll-summary")})),s["\u0275\u0275element"](20,"i",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"span",11),s["\u0275\u0275listener"]("click",(function(){return t.printCSV("toll-summary")})),s["\u0275\u0275element"](22,"i",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"nb-card-body"),s["\u0275\u0275template"](24,rn,1,2,"smart-table",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](8),n=s["\u0275\u0275reference"](12);s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",t.dates.startTime)("owlDateTime",e)("owlDateTimeTrigger",e),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.dates.endTime)("owlDateTime",n)("owlDateTimeTrigger",n),s["\u0275\u0275advance"](14),s["\u0275\u0275property"]("ngIf",t.data&&t.data.length)}},directives:[c.s,c.v,u.d,Y.b,u.r,u.u,Y.d,Y.a,c.r,m.u,g.a],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.submit-btn[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:8px 15px;text-transform:capitalize}"]}),e})(),sn=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.transitTime={transactiontime:this.common.dateFormatter(new Date)},this.regno=null,this.plazaName=null,this.amount=null,this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.gettollTransactionSummary()}selectVehicle(e){this.regno=e.id}SelectPlaza(e){this.plazaName=e.plaza_name}getDate(e){this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.transitTime[e]=this.common.dateFormatter(t.time).split(" ")[0],console.log("Date:",this.transitTime[e])})}gettollTransactionSummary(){let e={vehicle_id:this.regno,transtime:this.transitTime.transactiontime,amount:this.amount,plaza_name:this.plazaName};this.common.loading++,this.api.post("Toll/manualTollPlazaEntry",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data)},e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["manual-toll-transaction-summary"]],decls:33,vars:4,consts:[[1,"row",2,"margin","10px"],[1,"col-3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["url","Toll/getTollPlazaName","display","plaza_name","placeholder","Enter Toll",2,"width","60%",3,"onSelected"],["placeholder","Transaction Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["type","number","placeholder","Amount","id","amount","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","text-center","margin-top-15"],["type","submit","id","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Manual Toll Transaction Summary "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"label"),s["\u0275\u0275text"](7,"Vehicle No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",1),s["\u0275\u0275elementStart"](9,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",0),s["\u0275\u0275elementStart"](11,"div",1),s["\u0275\u0275elementStart"](12,"label"),s["\u0275\u0275text"](13,"Enter Toll"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",1),s["\u0275\u0275elementStart"](15,"auto-suggestion",3),s["\u0275\u0275listener"]("onSelected",(function(e){return t.SelectPlaza(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",0),s["\u0275\u0275elementStart"](17,"div",1),s["\u0275\u0275elementStart"](18,"label"),s["\u0275\u0275text"](19,"Transit Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",1),s["\u0275\u0275elementStart"](21,"input",4),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.transitTime.transactiontime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](22,"owl-date-time",null,5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",0),s["\u0275\u0275elementStart"](25,"div",1),s["\u0275\u0275elementStart"](26,"label"),s["\u0275\u0275text"](27,"Amount"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",1),s["\u0275\u0275elementStart"](29,"input",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.amount=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",7),s["\u0275\u0275elementStart"](31,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),s["\u0275\u0275text"](32,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](23);s["\u0275\u0275advance"](21),s["\u0275\u0275property"]("ngModel",t.transitTime.transactiontime)("owlDateTime",e)("owlDateTimeTrigger",e),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngModel",t.amount)}},directives:[c.s,c.v,c.r,b.a,u.d,Y.b,u.r,u.u,Y.d,Y.a,u.x,u.C],styles:[""]}),e})();function dn(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",12),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let cn=(()=>{class e{constructor(e,t,n,a,o){this.router=e,this.modalservice=t,this.common=n,this.api=a,this.user=o,this.dates={start:this.common.dateFormatter(new Date),end:this.common.dateFormatter(new Date)},this.vehicle_id=null,this.data=[],this.table=null,this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.gettollTransactionSummary()}getDate(e){this.common.params={ref_page:"card usage"},this.modalservice.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.dates[e]=this.common.dateFormatter(t.date).split(" ")[0],console.log("Date:",this.dates)})}selectVehicle(e){this.vehicle_id=e.id}printPDF(e){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.common.getPDFFromTableId(e,t.data.name,"vehicle Wise Toll Transaction Summary",null,"")},e=>{this.common.loading--,console.log(e)})}printCSV(e){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.common.getCSVFromTableId(e,t.data.name,"vehicle Wise Toll Transaction Summary",null,"")},e=>{this.common.loading--,console.log(e)})}gettollTransactionSummary(){let e={vehicle_id:this.vehicle_id,startDate:this.dates.start,endDate:this.dates.end};this.common.loading++,this.api.post("Toll/getVehicleWiseTollTxn",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,this.table=this.setTable()},e=>{this.common.loading--,console.log(e)})}setTable(){return{data:{headings:{transtime:{title:"Transaction Time",placeholder:"Transaction Time"},plaza_name:{title:"TOll Plaza",placeholder:"\tToll Plaza"},amount:{title:"amount",placeholder:"Amount"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let e=[];return this.data.map(t=>{let n={transtime:{value:null==t.transtime?"-":this.common.changeDateformat(t.transtime)},plaza_name:{value:t.plaza_name},amount:{value:null==t.amount?"-":t.amount}};e.push(n)}),e}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](A.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vehiclewise-tolltransaction"]],decls:25,vars:9,consts:[[1,"row","m-0","p-0"],[1,"col-3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","button",1,"btn","btn-primary","submit-btn",3,"click"],[1,"col-md-12","text-right","margin-top-15","margin-left-220"],[2,"margin-bottom","10px","display","block"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h2"),s["\u0275\u0275text"](3,"Toll Transaction Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",1),s["\u0275\u0275elementStart"](8,"input",3),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](9,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",1),s["\u0275\u0275elementStart"](11,"input",3),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](12,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",1),s["\u0275\u0275elementStart"](14,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),s["\u0275\u0275text"](15,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",0),s["\u0275\u0275elementStart"](17,"div",5),s["\u0275\u0275elementStart"](18,"span",6),s["\u0275\u0275elementStart"](19,"span",7),s["\u0275\u0275listener"]("click",(function(){return t.printPDF("toll-summary")})),s["\u0275\u0275element"](20,"i",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"span",9),s["\u0275\u0275listener"]("click",(function(){return t.printCSV("toll-summary")})),s["\u0275\u0275element"](22,"i",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"nb-card-body"),s["\u0275\u0275template"](24,dn,1,2,"smart-table",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](9,3,t.dates.start,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](12,6,t.dates.end,"dd MMM yyyy")),s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[c.s,c.v,b.a,c.r,m.u,g.a],pipes:[m.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.submit-btn[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:8px 15px;text-transform:capitalize}"]}),e})();function mn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.formatTitle(e)," ")}}function gn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td"),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n[e])}}function pn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",12),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,gn,3,1,"td",11),s["\u0275\u0275elementStart"](4,"td",7),s["\u0275\u0275elementStart"](5,"button",16),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).showDetails(n,"-1")})),s["\u0275\u0275element"](6,"i",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e+1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.columns)}}function hn(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,pn,7,2,"tr",15),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.data)}}function un(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"th"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.formatTitle(e))}}function bn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td"),s["\u0275\u0275elementStart"](1,"span",18),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n[e])}}function fn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,bn,3,1,"td",11),s["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e+1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.columns2)}}function vn(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,fn,4,2,"tr",11),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.workList)}}function Sn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.id)}}function xn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",48),s["\u0275\u0275elementStart"](1,"a",49),s["\u0275\u0275text"](2,"RC Image"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate"]("href",e.modal.first.data.document.rcImage,s["\u0275\u0275sanitizeUrl"])}}function yn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,xn,3,1,"span",47),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.id),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.document.rcImage)}}function Cn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.regno)}}function Mn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.newRegno)}}function En(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.document_type)}}const _n=function(e){return{name:e}};function wn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"auto-suggestion",51),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectBrandType(t,"first")}))("keyup",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).isValidDocument(t,"first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("data",e.modal.first.data.docTypes)("preSelected",s["\u0275\u0275pureFunction1"](2,_n,e.modal.first.data.document.document_type))}}function kn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.document.document_type)}}function Pn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",55),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function On(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"input",52),s["\u0275\u0275listener"]("change",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectModelType(t,"first")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"datalist",53),s["\u0275\u0275template"](3,Pn,2,1,"option",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",e.modelType)}}function Dn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",55),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function In(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",57),s["\u0275\u0275listener"]("change",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).onbodyType(t,"first")}))("focusout",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.openNextModal("second",t.modal.first.data.document.id)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"datalist",58),s["\u0275\u0275template"](5,Dn,2,1,"option",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.bodyType)}}function Tn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",59),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.document.engineNo=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.first.data.document.engineNo)}}function An(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",60),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.document.chasisNo=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.first.data.document.chasisNo)}}function Fn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",64),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function Ln(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",61),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.document._bscode=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"datalist",62),s["\u0275\u0275template"](5,Fn,2,2,"option",63),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.first.data.document._bscode),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.emissionStandard)}}function Vn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](3,1,e.getDateInDisplayFormat(e.modal.first.data.document.wef_date),"dd-MM-yyyy"),"")}}function zn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",65,66),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.first.data.document.wef_date=t}))("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).checkDateFormat("first","wef_date")})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("ngModel",e.modal.first.data.document.wef_date)("value",e.modal.first.data.document.wef_date)}}function Nn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"span",67),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).getDate("wef_date","first")})),s["\u0275\u0275element"](1,"i",68),s["\u0275\u0275elementEnd"]()}}function jn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",69),s["\u0275\u0275elementStart"](1,"button",70),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).updateVehicle("first")})),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.first.data.btn1)}}function Rn(e,t){if(1&e&&s["\u0275\u0275element"](0,"jrx-image-viewer",71),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("images",e.modal.first.data.images)("idContainer","first-"+e.modal.first.data.imageViewerId)("loadOnInit",!0)}}function Hn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"No Image Exists"),s["\u0275\u0275elementEnd"]())}function Un(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",19),s["\u0275\u0275elementStart"](1,"div",20),s["\u0275\u0275elementStart"](2,"div",21),s["\u0275\u0275elementStart"](3,"h5",22),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"button",23),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().closeModal(!1,"first")})),s["\u0275\u0275elementStart"](6,"span",24),s["\u0275\u0275text"](7,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",25),s["\u0275\u0275elementStart"](9,"form",26,27),s["\u0275\u0275elementStart"](11,"div",2),s["\u0275\u0275elementStart"](12,"div",28),s["\u0275\u0275elementStart"](13,"div",29),s["\u0275\u0275elementStart"](14,"label",30),s["\u0275\u0275text"](15,"Vehicle ID"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](16,Sn,3,1,"div",31),s["\u0275\u0275template"](17,yn,4,2,"div",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",29),s["\u0275\u0275elementStart"](19,"label",32),s["\u0275\u0275text"](20,"Vehicle No."),s["\u0275\u0275elementStart"](21,"span",33),s["\u0275\u0275text"](22,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,Cn,3,1,"div",34),s["\u0275\u0275template"](24,Mn,3,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",29),s["\u0275\u0275elementStart"](26,"label",36),s["\u0275\u0275text"](27,"Brand Type"),s["\u0275\u0275elementStart"](28,"span",33),s["\u0275\u0275text"](29,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](30,En,3,1,"div",31),s["\u0275\u0275template"](31,wn,2,4,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",29),s["\u0275\u0275elementStart"](33,"label",36),s["\u0275\u0275text"](34,"Model Type"),s["\u0275\u0275elementStart"](35,"span",33),s["\u0275\u0275text"](36,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](37,kn,3,1,"div",31),s["\u0275\u0275template"](38,On,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",29),s["\u0275\u0275elementStart"](40,"label",36),s["\u0275\u0275text"](41,"Body Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](42,In,6,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",29),s["\u0275\u0275elementStart"](44,"label",36),s["\u0275\u0275text"](45,"Engine No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](46,Tn,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"div",29),s["\u0275\u0275elementStart"](48,"label",36),s["\u0275\u0275text"](49,"chasis No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](50,An,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](51,"div",29),s["\u0275\u0275elementStart"](52,"label",36),s["\u0275\u0275text"](53,"Emission Standard"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](54,Ln,6,2,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"div",29),s["\u0275\u0275elementStart"](56,"label",37),s["\u0275\u0275text"](57,"manufaturing Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](58,Vn,4,4,"div",34),s["\u0275\u0275elementStart"](59,"div",38),s["\u0275\u0275template"](60,zn,2,2,"input",39),s["\u0275\u0275template"](61,Nn,2,0,"span",40),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"div",41),s["\u0275\u0275template"](63,jn,3,1,"div",42),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](64,"div",43),s["\u0275\u0275template"](65,Rn,1,3,"jrx-image-viewer",44),s["\u0275\u0275template"](66,Hn,2,0,"div",8),s["\u0275\u0275element"](67,"div",45),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",e.modal.first.class),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.modal.first.data.title),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.canUpdate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",1===e.modal.first.data.canUpdate&&"admin"==e.user._loggedInBy),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.first.data.document.img_url&&!e.modal.first.data.doc_not_img),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.modal.first.data.document.img_url)}}function Bn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.id)}}function Gn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",48),s["\u0275\u0275elementStart"](1,"a",49),s["\u0275\u0275text"](2,"RC Image"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate"]("href",e.modal.second.data.document.rcImage,s["\u0275\u0275sanitizeUrl"])}}function $n(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,Gn,3,1,"span",47),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.id),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.document.rcImage)}}function Yn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.regno)}}function Wn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.newRegno)}}function Kn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.document_type)}}function Zn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"auto-suggestion",51),s["\u0275\u0275listener"]("onSelected",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectBrandType(t,"second")}))("keyup",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).isValidDocument(t,"second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("data",e.modal.second.data.docTypes)("preSelected",s["\u0275\u0275pureFunction1"](2,_n,e.modal.second.data.document.document_type))}}function qn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",43),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.document.document_type)}}function Jn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",55),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function Xn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"input",82),s["\u0275\u0275listener"]("change",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).selectModelType(t,"second")})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"datalist",83),s["\u0275\u0275template"](3,Jn,2,1,"option",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",e.modelType)}}function Qn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",55),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function ea(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",84),s["\u0275\u0275listener"]("change",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).onbodyType(t,"second")}))("focusout",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.openNextModal("second",t.modal.second.data.document.id)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"datalist",85),s["\u0275\u0275template"](5,Qn,2,1,"option",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.bodyType)}}function ta(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",64),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function na(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",86),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.document._bscode=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"datalist",87),s["\u0275\u0275template"](5,ta,2,2,"option",63),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.second.data.document._bscode),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.emissionStandard)}}function aa(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",59),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.document.engineNo=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.second.data.document.engineNo)}}function oa(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",50),s["\u0275\u0275elementStart"](1,"div",2),s["\u0275\u0275elementStart"](2,"div",56),s["\u0275\u0275elementStart"](3,"input",60),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.document.chasisNo=t})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.modal.second.data.document.chasisNo)}}function ia(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",88),s["\u0275\u0275elementStart"](1,"label",46),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](3,1,e.getDateInDisplayFormat(e.modal.second.data.document.wef_date),"dd-MM-yyyy"),"")}}function ra(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",89,90),s["\u0275\u0275listener"]("ngModelChange",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).modal.second.data.document.wef_date=t}))("focusout",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).checkDateFormat("second","wef_date")})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("ngModel",e.modal.second.data.document.wef_date)("value",e.modal.second.data.document.wef_date)}}function la(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"span",67),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).getDate("wef_date","second")})),s["\u0275\u0275element"](1,"i",68),s["\u0275\u0275elementEnd"]()}}function sa(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",69),s["\u0275\u0275elementStart"](1,"button",91),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).updateVehicle("second")})),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal.second.data.btn1)}}function da(e,t){if(1&e&&s["\u0275\u0275element"](0,"jrx-image-viewer",71),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("images",e.modal.second.data.images)("idContainer","second-"+e.modal.second.imageViewerId)("loadOnInit",!0)}}function ca(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"No Image Exists"),s["\u0275\u0275elementEnd"]())}function ma(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",19),s["\u0275\u0275elementStart"](1,"div",20),s["\u0275\u0275elementStart"](2,"div",21),s["\u0275\u0275elementStart"](3,"h5",72),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"button",23),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().closeModal(!1,"second")})),s["\u0275\u0275elementStart"](6,"span",24),s["\u0275\u0275text"](7,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",25),s["\u0275\u0275elementStart"](9,"form",73,74),s["\u0275\u0275elementStart"](11,"div",2),s["\u0275\u0275elementStart"](12,"div",28),s["\u0275\u0275elementStart"](13,"div",29),s["\u0275\u0275elementStart"](14,"label",75),s["\u0275\u0275text"](15,"Vehicle ID"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](16,Bn,3,1,"div",31),s["\u0275\u0275template"](17,$n,4,2,"div",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",29),s["\u0275\u0275elementStart"](19,"label",76),s["\u0275\u0275text"](20,"Vehicle No."),s["\u0275\u0275elementStart"](21,"span",33),s["\u0275\u0275text"](22,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,Yn,3,1,"div",34),s["\u0275\u0275template"](24,Wn,3,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",29),s["\u0275\u0275elementStart"](26,"label",77),s["\u0275\u0275text"](27,"Brand Type"),s["\u0275\u0275elementStart"](28,"span",33),s["\u0275\u0275text"](29,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](30,Kn,3,1,"div",31),s["\u0275\u0275template"](31,Zn,2,4,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",29),s["\u0275\u0275elementStart"](33,"label",77),s["\u0275\u0275text"](34,"Model Type"),s["\u0275\u0275elementStart"](35,"span",33),s["\u0275\u0275text"](36,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](37,qn,3,1,"div",31),s["\u0275\u0275template"](38,Xn,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",29),s["\u0275\u0275elementStart"](40,"label",77),s["\u0275\u0275text"](41,"Body Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](42,ea,6,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",29),s["\u0275\u0275elementStart"](44,"label",77),s["\u0275\u0275text"](45,"Emission Standard "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](46,na,6,2,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"div",29),s["\u0275\u0275elementStart"](48,"label",36),s["\u0275\u0275text"](49,"Engine No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](50,aa,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](51,"div",29),s["\u0275\u0275elementStart"](52,"label",36),s["\u0275\u0275text"](53,"chasis No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](54,oa,4,1,"div",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"div",29),s["\u0275\u0275elementStart"](56,"label",78),s["\u0275\u0275text"](57,"manufaturing Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](58,ia,4,4,"div",79),s["\u0275\u0275elementStart"](59,"div",38),s["\u0275\u0275template"](60,ra,2,2,"input",80),s["\u0275\u0275template"](61,la,2,0,"span",40),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"div",41),s["\u0275\u0275template"](63,sa,3,1,"div",42),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](64,"div",43),s["\u0275\u0275template"](65,da,1,3,"jrx-image-viewer",44),s["\u0275\u0275template"](66,ca,2,0,"div",8),s["\u0275\u0275element"](67,"div",81),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",e.modal.second.class),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.modal.second.data.title),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.modal.first.data.canUpdate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.canUpdate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.modal.second.data.canUpdate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",1===e.modal.second.data.canUpdate&&"admin"==e.user._loggedInBy),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.modal.second.data.document.img_url&&!e.modal.second.data.doc_not_img),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.modal.second.data.document.img_url)}}let ga=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.workList=[],this.columns2=[],this.data=[],this.columns=[],this.modal={active:"",first:{show:!1,class:"",data:this.setModalData()},second:{show:!1,class:"",data:this.setModalData()}},this.documentTypes=[],this.modelType=[],this.vehicleId=-1,this.bodyType=[],this.emissionStandard=[],this.getPendingDetailsVehicle(),this.getAllTypesOfBrand(),this.getAllBodyType(),this.getUserWorkList(),this.common.refresh=this.refresh.bind(this),this.emissionStandard=["BS 1","BS 2","BS 3","BS 4","BS 6"]}ngOnInit(){}refresh(){console.log("Refresh"),this.columns=[],this.getPendingDetailsVehicle(),this.getAllTypesOfBrand(),this.getAllBodyType(),this.getUserWorkList()}getPendingDetailsVehicle(){let e="&vehicleId="+this.vehicleId;this.common.loading++,this.api.get("vehicles/getPendingFoVehicleBrands?"+e).subscribe(e=>{if(this.common.loading--,console.log("data",e),this.data=e.data,null==this.data)return this.data=[],void alert("Data Not  Available");if(this.data.length){for(var t in this.data[0])"_"!=t.charAt(0)&&this.columns.push(t);console.log("columns"),console.log(this.columns)}},e=>{this.common.loading--,console.log(e)})}getAllTypesOfBrand(){this.api.get("vehicles/getVehicleBrandsMaster").subscribe(e=>{this.documentTypes=e.data,console.log("All Type Docs: ",this.documentTypes)},e=>{console.log(e)})}getAllBodyType(){this.api.get("Vehicles/getVehicleBodyTypes").subscribe(e=>{this.bodyType=e.data,console.log("All Type Body: ",this.bodyType)},e=>{console.log(e)})}getAllTypesOfModel(e,t){this.api.get("vehicles/getVehicleModelsMaster?brandId="+e).subscribe(e=>{this.modelType=e.data,this.modal[t].data.modelType=this.modelType?this.modelType:null,console.log("All Type Model: ",this.modelType)},e=>{console.log(e)})}showDetails(e,t){this.modalOpenHandling({rowData:{vehicle_id:e._vid},title:"Update Vehicle",canUpdate:1},t)}modalOpenHandling(e,t){this.modal.active?"first"==this.modal.active?(this.modal.second.class="custom-passive-modal",this.modal.second.show=!0,this.handleModalData("second",e,t),this.modal.active="first"):"second"==this.modal.active&&(this.modal.first.class="custom-passive-modal",this.modal.first.show=!0,this.handleModalData("first",e,t),this.modal.active="second"):(this.modal.first.class="custom-active-modal",this.modal.first.show=!0,this.handleModalData("first",e,t),this.modal.active="first"),console.log("Handler End: ",this.modal.active)}handleModalData(e,t,n){this.modal[e].data.title=t.title,this.modal[e].data.btn1=t.btn1||"Update",this.modal[e].data.btn2=t.btn2||"Discard Image",t.canUpdate||(this.modal[e].data.canUpdate=0,this.modal[e].data.canreadonly=!0),this.modal[e].data.document=t.rowData,this.modal[e].data.vehicleId=t.rowData.vehicle_id,this.modal[e].data.document.wef_date&&(this.modal[e].data.document.wef_date=this.common.dateFormatter(this.modal[e].data.document.wef_date,"ddMMYYYY").split(" ")[0]),this.modal[e].data.vehicleId=this.modal[e].data.document.vehicle_id,this.modal[e].data.imgs=[],"undefined"!=this.modal[e].data.document.img_url&&this.modal[e].data.document.img_url&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url),"undefined"!=this.modal[e].data.document.img_url2&&this.modal[e].data.document.img_url2&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url2),"undefined"!=this.modal[e].data.document.img_url3&&this.modal[e].data.document.img_url3&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url3),console.log("-------------------------Images:",this.modal[e].data),this.modal[e].data.images=this.modal[e].data.imgs,console.log("Handle Next::",n),this.getvehiclePending(e,n),this.modal[e].data.docTypes=this.documentTypes,this.modal[e].data.modelType=this.modelType,this.modal[e].data.bodyType=this.bodyType}getvehiclePending(e,t){console.log("Modal data: ",this.modal[e].data);let n="vehicleId="+this.modal[e].data.vehicleId;-1!=t&&(n+="&forNext=1"),console.log("Params: ",n),this.api.get(" vehicles/getPendingFoVehicleBrands?"+n).subscribe(t=>{console.log("pending detalis:",t);let n=t.data[0];this.modal[e].data.document.id=t.data[0]._vid,this.modal[e].data.document.newRegno=t.data[0].Vehicle,this.modal[e].data.document.document_type_id=t.data[0]._brandid,this.modal[e].data.document.document_type=t.data[0].Brand,this.modal[e].data.document.wef_date=n._manfdate?n._manfdate.split("-").slice(0,2).reverse().join("/"):"",this.modal[e].data.document.img_url=t.data[0]._rcimage,this.modal[e].data.document.img_url2=t.data[0]._rcimage2,this.modal[e].data.document.img_url3=t.data[0]._rcimage3,this.modal[e].data.document._bscode=t.data[0]._bscode,this.modal[e].data.document.bodyTypeId=t.data[0]._bodytypeid,this.modal[e].data.document.chasisNo=t.data[0].chasisNo,this.modal[e].data.document.engineNo=t.data[0].engineNo,this.modal[e].data.images=[],"undefined"!=this.modal[e].data.document.img_url&&this.modal[e].data.document.img_url&&this.modal[e].data.images.push(this.modal[e].data.document.img_url),"undefined"!=this.modal[e].data.document.img_url2&&this.modal[e].data.document.img_url2&&this.modal[e].data.images.push(this.modal[e].data.document.img_url2),"undefined"!=this.modal[e].data.document.img_url3&&this.modal[e].data.document.img_url3&&this.modal[e].data.images.push(this.modal[e].data.document.img_url3),console.log("-------------------------Images:",this.modal[e].data),this.getAllTypesOfModel(this.modal[e].data.document.document_type_id),this.modal[e].data.document.bodyTypeId&&this.getAllBodyType(),"success"!=t.msg&&(alert(t.msg),this.closeModal(!0,e),console.log("sucess......"))},e=>{console.log(e)})}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}closeModal(e,t){this.modal.first.show&&this.modal.second.show?"first"==t?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[t].show=!1,this.modal[t].class="",this.modal[t].data=this.setModalData())}markAgentSelected(e,t){document.getElementById("doc_agent-"+t),console.log("option:"+e)}checkDatePattern(e){return!!/^((0[1-9])|(1[0-2]))\/(\d{4})$/.test(e)}checkExpiryDateValidity(e){let t=this.modal[e].data.document,n=1;"undefined"!=t.wef_date&&"undefined"!=t.expiry_date&&t.wef_date&&t.expiry_date&&(n=this.checkExpiryDateValidityByValue(t.wef_date,t.expiry_date,e)),n||this.common.showError("Please check the Expiry Date validity")}updateVehicle(e,t,n){if("admin"==this.user._loggedInBy&&1==this.modal[e].data.canUpdate){let t=this.modal[e].data.document,n=t.wef_date.split("/").reverse().join("-")+"-01";const a={vehicleId:t.id,brandId:t.document_type_id,modelId:t.modalTypeId?t.modalTypeId:null,manufacturingDate:n,emsId:t._bscode,bodyTypeId:t.bodyTypeId,chasisNo:t.chasisNo,engineNo:t.engineNo};if(console.log("Params is",a),!t.document_type_id)return this.common.showError("Please enter Brand Type"),!1;if(t.wef_date&&!this.checkDatePattern(t.wef_date))return this.common.showError("Invalid manufacturing Date. Date must be in MM/YYYY format"),!1;if(!t.modalTypeId)return this.common.showError("Please enter Model Type"),!1;let o,i=1,r=1;return"undefined"!=t.wef_date&&"undefined"!=t.expiry_date&&t.wef_date&&t.expiry_date&&(r=this.checkExpiryDateValidityByValue(t.wef_date,t.expiry_date,e)),this.modal[e].data.spnexpdt=i&&r?0:1,this.modal[e].data.spnexpdt?(this.common.showError("Please check the Expiry Date validity"),!1):(this.common.loading++,this.api.post("Vehicles/updateVehicleModal",a).subscribe(t=>{this.common.loading--,console.log("api result",t),1==t.success&&(alert("Success"),this.closeModal(!0,e)),0==t.success&&alert(t.data)},e=>{this.common.loading--,console.log(e)}),o)}}openConrirmationAlert(e,t){console.log("Data ",e),console.log("params :",t),this.common.params={title:"Confirmation ",description:e.msg},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{if(e.response){let e=1;console.log("modal active:",this.modal.active),this.updateVehicle(this.modal.active,t,e)}})}getDate(e,t){this.common.params={ref_page:"pending-vehicle"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(n=>{n.date&&(this.modal[t].data.document[e]=this.common.dateFormatter(n.date,"ddMMYYYY").split(" ")[0],this.modal[t].data.document[e]=this.modal[t].data.document[e].split("-").slice(0,2).reverse().join("/"),console.log("Date:",this.modal[t].data.document[e]))})}setDate(e,t){console.log("fetch Date",e),console.log("Date:",this.modal[t].data.document[e])}checkExpiryDateValidityByValue(e,t,n){let a=e.split("/").reverse().join("-"),o=t.split("/").reverse().join("-");e=this.common.dateFormatter(a).split(" ")[0],t=this.common.dateFormatter(o).split(" ")[0],console.log("comparing "+e+"-"+t);let i=new Date(e),r=new Date(t);return isNaN(i.getTime())||isNaN(r.getTime())?(this.common.showError("Invalid Date. Date formats should be dd/mm/yyyy"),0):i>r?(this.modal[n].data.spnexpdt=1,0):1}findDocumentType(e,t){for(var n=0;n<this.modal[t].data.docTypes.length;n++)if(console.log("val:"+this.modal[t].data.docTypes[n]),this.modal[t].data.docTypes[n].id==e)return this.modal[t].data.docTypes[n].document_type}selectBrandType(e,t){this.modelType=[],this.modal[t].data.document.modalTypeId=null,this.modal[t].data.document.document_type_id=e.id,console.log("brandType id: ",e.id),this.getAllTypesOfModel(e.id,t)}selectModelType(e,t){console.log("select model",e.target.value);let n=e.target.value,a=this.modelType.filter(e=>e.name===n)[0];this.modal[t].data.document.modalTypeId=a.id,console.log("Modal Type:",this.modal[t].data.document.modalTypeId)}isValidDocument(e,t){}getDateInDisplayFormat(e){return e?e.split("-").reverse().join("/"):e}setModalData(){return{title:"",btn1:"",btn2:"",imageViewerId:(new Date).getTime(),agents:[],docTypes:[],vehicleId:0,agentId:"",canUpdate:1,canreadonly:!1,spnexpdt:0,current_date:new Date,images:[],imgs:[],doc_not_img:0,document:{agent:null,agent_id:null,amount:null,doc_no:null,document_type:null,document_type_id:null,modelTypeId:null,id:null,img_url:null,img_url2:null,img_url3:null,regno:null,newRegno:null,vehicle_id:null,wef_date:null,_bscode:null,bodyType:null,bodyTypeId:null}}}openNextModal(e,t){console.log("Handle Next: Open Next Modal"),this.showDetails({_vid:t},!0)}checkDateFormat(e,t){let n=this.modal[e].data.document[t];if(n.length<6)return;let a=n[0]+n[1],o=n.substring(2,6);this.modal[e].data.document[t]=a+"/"+o,console.log("Date: ",this.modal[e].data.document[t])}onbodyType(e,t){let n=e.target.value,a=this.bodyType.filter(e=>e.name===n)[0];this.modal[t].data.document.bodyTypeId=a.id}getUserWorkList(){this.workList=[],this.columns2=[],this.common.loading++,this.api.get("Vehicles/getVehiclesUserWorkSummary").subscribe(e=>{if(this.common.loading--,console.log("data",e),this.workList=e.data,null==this.workList)return this.workList=[],void this.common.showError("Work List No Data Record Available");if(this.workList.length)for(var t in this.workList[0])"_"!=t.charAt(0)&&this.columns2.push(t)},e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["pending-vehicle"]],decls:29,vars:6,consts:[[2,"margin","0px","border","0px","padding-top","0px"],[1,"container"],[1,"row"],[1,"list_table"],["id","tblpending",1,"table","table-bordered","table-hover","table-scroll"],[1,"thead"],["class","text-center",4,"ngFor","ngForOf"],[1,"del"],[4,"ngIf"],[1,"work-table"],[1,"table","table-bordered","table-hover","table-scroll"],[4,"ngFor","ngForOf"],[1,""],["class","custom-modal-1",3,"ngClass",4,"ngIf"],[1,"text-center"],["class","",4,"ngFor","ngForOf"],["title","Edit Vehicle",1,"btn","btn-dark","pl-3","pr-3",3,"click"],[1,"icon","ion-md-create"],[1,"col-sm-1",2,"min-width","100px"],[1,"custom-modal-1",3,"ngClass"],[1,"custom-modal-body"],[1,"modal-header"],["id","modal-basic-title-first",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","vert-mdl-pdg"],["id","document-form-first","name","document-form-first"],["documentFormFirst","ngForm"],[1,"col-sm-4"],[1,"row","form-field","clear"],["for","document_id-first",1,"col-sm-4","mgn-vert"],["class","col-sm-8 ",4,"ngIf"],["for","veh_no-first",1,"col-sm-4","mgn-vert"],[1,"mandatory"],["class","col-sm-8",4,"ngIf"],["class","col-sm-8 frm-fld mgn-vert sug-fld",4,"ngIf"],["for","doc_type-first",1,"col-sm-4","mgn-vert"],["for","wef_date-first",1,"col-sm-4","mgn-vert"],[1,"col-8",2,"padding-left","7px"],["id","wef_date-first","name","wef_date-first","type","text","class","col-sm-10 form-control frm-fld mgn-vert","placeholder","MM/YYYY",3,"ngModel","value","ngModelChange","focusout",4,"ngIf"],["class","col-sm-2","style","cursor:pointer; font-size: 18px; padding: 5px 10px; color: #263238;",3,"click",4,"ngIf"],[1,"row","mt-3","mb-3"],["class","col-12 text-center",4,"ngIf"],[1,"col-sm-8"],[3,"images","idContainer","loadOnInit",4,"ngIf"],["id","imgzoom-first"],[2,"font-size","16px"],["class","rc-image",4,"ngIf"],[1,"rc-image"],["target","_blank","title","View Vehicle",3,"href"],[1,"col-sm-8","frm-fld","mgn-vert","sug-fld"],["url","","display","name","placeholder","Enter Brand Type",1,"documentType",2,"width","60% !important",3,"data","preSelected","onSelected","keyup"],["type","text","list","modelType","name","modeltype","placeholder","Enter Model Type",1,"form-control","mt-1",3,"change"],["id","modelType"],["class","form-contol",4,"ngFor","ngForOf"],[1,"form-contol"],[1,"col-8"],["type","text","list","document_type1","name","bodytype",1,"form-control","mt-1",3,"change","focusout"],["id","document_type1"],["type","text","name","engineNo",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["type","text","name","chasisNo",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["type","text","list","emission1","name","emissiontype",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["id","emission1"],["class","form-contol",3,"value",4,"ngFor","ngForOf"],[1,"form-contol",3,"value"],["id","wef_date-first","name","wef_date-first","type","text","placeholder","MM/YYYY",1,"col-sm-10","form-control","frm-fld","mgn-vert",3,"ngModel","value","ngModelChange","focusout"],["wefdate_first",""],[1,"col-sm-2",2,"cursor","pointer","font-size","18px","padding","5px 10px","color","#263238",3,"click"],[1,"icon","fa","fa-calendar"],[1,"col-12","text-center"],["form","document-form","type","button","outline","","id","submit-first",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"images","idContainer","loadOnInit"],["id","modal-basic-title-second",1,"modal-title"],["id","document-form-second","name","document-form-second"],["documentFormSecond","ngForm"],["for","document_id-second",1,"col-sm-4","mgn-vert"],["for","veh_no-second",1,"col-sm-4","mgn-vert"],["for","doc_type-second",1,"col-sm-4","mgn-vert"],["for","wef_date-second",1,"col-sm-4","mgn-vert"],["class","col-sm-8","style","padding-left:7px;",4,"ngIf"],["id","wef_date-second","name","wef_date-second","type","text","class","col-sm-10 form-control frm-fld mgn-vert","placeholder","MM/YYYY",3,"ngModel","value","ngModelChange","focusout",4,"ngIf"],["id","imgzoom-second"],["type","text","list","modelType2","name","modeltype2","placeholder","Enter Model Type",1,"form-control","mt-1",3,"change"],["id","modelType2"],["type","text","list","document_type2","name","body2",1,"form-control","mt-1",3,"change","focusout"],["id","document_type2"],["type","text","list","emission2","name","emissiontype2",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["id","emission2"],[1,"col-sm-8",2,"padding-left","7px"],["id","wef_date-second","name","wef_date-second","type","text","placeholder","MM/YYYY",1,"col-sm-10","form-control","frm-fld","mgn-vert",3,"ngModel","value","ngModelChange","focusout"],["wefdate_second",""],["form","document-form","type","submit","outline","","id","submit-second",1,"btn","btn-primary",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"table",4),s["\u0275\u0275elementStart"](6,"thead",5),s["\u0275\u0275elementStart"](7,"tr"),s["\u0275\u0275elementStart"](8,"th"),s["\u0275\u0275text"](9,"SrNo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](10,mn,2,1,"th",6),s["\u0275\u0275elementStart"](11,"th",7),s["\u0275\u0275text"](12,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"tbody"),s["\u0275\u0275template"](14,hn,2,1,"ng-container",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",2),s["\u0275\u0275elementStart"](16,"h6"),s["\u0275\u0275text"](17,"Work List"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",9),s["\u0275\u0275elementStart"](19,"table",10),s["\u0275\u0275elementStart"](20,"thead",5),s["\u0275\u0275elementStart"](21,"tr"),s["\u0275\u0275elementStart"](22,"th"),s["\u0275\u0275text"](23,"SrNo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,un,2,1,"th",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"tbody",12),s["\u0275\u0275template"](26,vn,2,1,"ng-container",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,Un,68,20,"div",13),s["\u0275\u0275template"](28,ma,68,20,"div",13)),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngForOf",t.columns),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",t.data.length),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngForOf",t.columns2),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.workList.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.modal.first.show),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.modal.second.show))},directives:[c.s,c.r,m.t,m.u,m.r,u.H,u.s,u.t,b.a,u.w,u.G,u.d,u.r,u.u,J.a],pipes:[m.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.rc-image[_ngcontent-%COMP%]{margin-left:0;padding:10%;display:inline}.rc-image[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#03036b;padding:0;cursor:pointer}.row[_ngcontent-%COMP%]{margin-top:4px}.modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}.btn[_ngcontent-%COMP%]{padding:5px 15px;border-radius:3px;text-transform:capitalize}.btn-danger[_ngcontent-%COMP%]{background-color:#d61414!important}.modal-footer[_ngcontent-%COMP%]{padding:0}.dropdown[_ngcontent-%COMP%]{position:relative}select[_ngcontent-%COMP%]{padding-top:1%}.agent[_ngcontent-%COMP%]{width:90%}.documentType[_ngcontent-%COMP%], .suggestions[_ngcontent-%COMP%]   ng-star-inserted[_ngcontent-%COMP%], auto-suggestion[_ngcontent-%COMP%]{overflow:auto!important;max-height:150px!important}.custom-input-1[_ngcontent-%COMP%], .suggestion-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:60%!important}.mgn-vert[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px}.doc-img[_ngcontent-%COMP%]{max-width:760px;max-height:800px}.clear[_ngcontent-%COMP%]{clear:both}.sug-fld[_ngcontent-%COMP%]{padding-left:6px;padding-right:19px}.vert-mdl-pdg[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.mdl-sel-agt[_ngcontent-%COMP%]{width:100%!important;margin:0!important;height:auto!important}.mgn[_ngcontent-%COMP%]{padding-left:8%}.custom-modal-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding:20px;background:transparent;overflow:auto;height:100%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238!important}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:-10px -1rem -1rem auto;outline:none}.custom-modal-body[_ngcontent-%COMP%]{background:#fff}.custom-active-modal[_ngcontent-%COMP%]{z-index:1050;background:rgba(0,0,0,.5)}.custom-passive-modal[_ngcontent-%COMP%]{z-index:1049}table[_ngcontent-%COMP%]{margin:0;border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{background-color:#1de9b6}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#fff;padding:5px 8px;border-radius:3px;display:inline-block;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background-color:#f44236}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}.list_table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 140px)}h6[_ngcontent-%COMP%]{margin:15px 0 10px}.table-scroll[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .table-scroll[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}"]}),e})();var pa=n("I2Ol");const ha=function(e){return{highlight:e}};function ua(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",14),s["\u0275\u0275elementStart"](1,"td",15),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",15),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().zoomAt(n.lat,n.long)})),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"td",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().createSite(n)})),s["\u0275\u0275text"](14,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](7,ha,e.isHighLight)),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.halt_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.lat),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.long),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.cnt),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.cntl)}}let ba=(()=>{class e{constructor(e,t,n,a,o){this.mapService=e,this.apiService=t,this.router=n,this.modalService=a,this.commonService=o,this.startTime=new Date((new Date).setMonth((new Date).getMonth()-1)),this.endTime=new Date,this.foid=null,this.minZoom=12,this.createSiteMarker=null,this.buffers=[],this.typeId=-1,this.typeIds=[],this.data=null,this.isHeatAble=!1,this.commonService.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("moveLoc",(e,t,n)=>this.mapService.zoomAt({lat:t,lng:n},this.minZoom)),this.mapService.map.setOptions({draggableCursor:"crosshair"}),this.getTypeIds()}createTable(){this.startTime||this.commonService.showToast("Enter Start Time"),this.commonService.loading++,this.mapService.getMapBounds(),this.apiService.get("SiteFencing/getBufferZoneCandidates?lat=-1&long=-1&startTime="+this.commonService.dateFormatter(this.startTime)).subscribe(e=>{this.commonService.loading--,this.mapService.clearAll(),console.log("Res: ",e.data),this.buffers=e.data,this.mapService.createMarkers(this.buffers)},e=>{console.error(e),this.commonService.showError()})}submit(e){if(this.mapService.clearAll(),this.mapService.map.getZoom()<this.minZoom)return void this.commonService.showToast("bounds are huge");var t=this.mapService.getMapBounds();console.log("Bounds",t);let n={foid:this.foid,startTime:this.commonService.dateFormatter(this.startTime),endTime:this.commonService.dateFormatter(this.endTime),lat1:t.lat1,lat2:t.lat2,lng1:t.lng1,lng2:t.lng2};this.apiService.post("HaltOperations/getAllHaltsBtw",n).subscribe(t=>{console.log("Res: ",t.data),this.mapService.options={circle:{scale:1}},e?this.mapService.createHeatMap(t.data,!1):this.mapService.createMarkers(t.data,!1,!1)},e=>{console.error(e),this.commonService.showError()})}loadMarkers(){let e=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:e.lat1,lng1:e.lng1,lat2:e.lat2,lng2:e.lng2,typeId:null}).subscribe(e=>{let t=e.data;console.log("Res: ",e.data),this.mapService.createMarkers(t,!1,!1,["id","name"],e=>{this.apiService.post("Site/getSingleSite",{siteId:e.id}).subscribe(t=>{this.mapService.options={clearHeat:!1},this.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!1}),this.apiService.post("SiteFencing/getSiteFences",{siteId:e.id}).subscribe(t=>{this.commonService.loading++;let n=t.data,a=Object.keys(n).length;if(console.log("Res: ",t.data),1==a)this.mapService.createPolygon(n[Object.keys(n)[0]].latLngs),console.log("Single",n[Object.keys(n)[0]]);else if(a>1){let t=[],a=!1,o=!1,i=1e5,r=-1;for(const l in n)if(a=!1,n.hasOwnProperty(l)){const s=n[l];l==e.id?a=!0:i>s.dis&&(a=!1,i=s.dis,r=t.length),t.push({data:s.latLngs,isMain:a,isSec:o,show:`\n                  Id: ${l}<br>\n                  Name:${s.name}<br>\n                  Location:${s.loc_name}<br>\n                  `})}-1!=r&&(t[r].isSec=!0),this.mapService.createPolygons(t)}else console.log("Else");this.mapService.zoomAt(this.mapService.createLatLng(e.lat,e.long),16),this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})},e=>{console.error(e),this.commonService.showError()})})},e=>{console.error(e),this.commonService.showError()})}createSite(e){this.data=e,this.modalService.open(pa.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e?this.apiService.post("SitesOperation/createBufferZone",{type:e.response,lat:this.data.lat,long:this.data.long}).subscribe(e=>{if(e.success){this.commonService.showToast("Success");let e=this.buffers.findIndex(e=>e.halt_id==this.data.halt_id);this.buffers.splice(e,1),this.typeId=401}else this.commonService.showError(e.msg)},e=>{console.error(e),this.commonService.showError()}):this.commonService.showToast("No Site Type Selected")})}zoomAt(e,t){this.buffers.forEach(n=>{n.isHighLight=n.lat==e&&n.long==t}),this.createSiteMarker?(this.createSiteMarker.setPosition(this.mapService.createLatLng(e,t)),this.createSiteMarker.setMap(this.mapService.map)):this.createSiteMarker=this.mapService.createMarkers([{lat:e,lng:t,subType:"marker"}],!1,!1)[0],this.mapService.zoomAt(this.mapService.createLatLng(parseFloat(e),parseFloat(t)))}getTypeIds(){this.apiService.post("SiteFencing/getSiteTypes",{}).subscribe(e=>{console.log("Res: ",e.data),this.typeIds=e.data},e=>{console.error(e),this.commonService.showError()})}showHeat(){if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<this.minZoom)return void this.commonService.showToast("bounds are huge");var e=this.mapService.getMapBounds();console.log("Bounds",e);let t={lat:(e.lat1+e.lat2)/2,long:(e.lng2+e.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+t.lat+"&long="+t.long).subscribe(e=>{console.log("Res: ",e.data),this.mapService.createHeatMap(e.data,!1),this.isHeatAble=!0,this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})}}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](ye.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["halt-density"]],decls:37,vars:3,consts:[[1,"row"],[1,"col-2"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[1,"col-1"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"col-6"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[3,"ngClass",4,"ngFor","ngForOf"],["id","map",1,"col-6","map"],[3,"ngClass"],[2,"width","40px",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275element"](2,"input",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"uj-date-time-picker",4),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](5,"div",3),s["\u0275\u0275elementStart"](6,"div",5),s["\u0275\u0275elementStart"](7,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",5),s["\u0275\u0275elementStart"](10,"button",7),s["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),s["\u0275\u0275text"](11," Load Marker... "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",5),s["\u0275\u0275elementStart"](13,"button",7),s["\u0275\u0275listener"]("click",(function(){return t.createTable()})),s["\u0275\u0275text"](14," Get Buffers... "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",0),s["\u0275\u0275elementStart"](16,"div",8),s["\u0275\u0275elementStart"](17,"table",9),s["\u0275\u0275elementStart"](18,"thead",10),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"th",11),s["\u0275\u0275text"](21,"S.No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"th",11),s["\u0275\u0275text"](23,"Halt Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"th"),s["\u0275\u0275text"](25,"Lat"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"th"),s["\u0275\u0275text"](27,"Lng"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"th"),s["\u0275\u0275text"](29,"Cnt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"th"),s["\u0275\u0275text"](31,"CntL"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"th"),s["\u0275\u0275text"](33,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"tbody"),s["\u0275\u0275template"](35,ua,15,9,"tr",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](36,"div",13),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("dateTimeValue",t.startTime),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),s["\u0275\u0275advance"](27),s["\u0275\u0275property"]("ngForOf",t.buffers))},directives:[Ge.a,m.t,m.r],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:150px!important;max-width:inherit!important}.highlight[_ngcontent-%COMP%]{background-color:#ff0}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var fa=n("lq42");function va(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",8),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function Sa(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",9),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let xa=(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.data=[],this.ruleType=[{id:11,name:"Loading"},{id:21,name:"UnLoading"},{id:31,name:"Loading & Unloading"}],this.siteId=null,this.vehicle={id:null,regno:null},this.table=null,this.common.refresh=this.refresh.bind(this),this.getSiteData()}ngOnInit(){}refresh(){this.getSiteData(),this.vehicle.id=null,this.siteId=null}addsite(){this.common.params={},this.modalService.open(fa.a,{container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getSiteData()})}getSiteData(){this.common.loading++,this.api.get("PlacementSiteRule/index").subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data;let t=0;for(const n of this.data){let e=this.ruleType.find(e=>e.id==this.data[t].ruletype_id);this.data[t].ruleName=e?e.name:"N.A",this.data[t].preSiteType=n.next_site_name?n.next_site_name:"N.A",t++}this.table=this.setTable()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}setTable(){return{data:{headings:{foName:{title:"Fo Name",placeholder:"Fo Name"},currentSiteName:{title:"Current Site Name ",placeholder:"Current Site Name"},nextSiteName:{title:"Next Site Name ",placeholder:"Next Site Name"},ruleType:{title:"Rule Type",placeholder:"Rule Type"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let e=[];return this.data.map(t=>{let n={foName:{value:t.f_name},currentSiteName:{value:t.curr_site_name},nextSiteName:{value:t.preSiteType},ruleType:{value:t.ruleName},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",action:this.editRule.bind(this,t)},{class:" fa fa-trash remove",action:this.deleteRule.bind(this,t)}]},rowActions:{click:"selectRow"}};e.push(n)}),e}editRule(e){console.log("row",e),this.common.params={title:"Edit Site Rule",row:e},this.modalService.open(fa.a,{container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getSiteData()})}deleteRule(e){if(console.log("doc:",e),window.confirm("Are You Want Delete Record")){const t={foid:e.foid,currSiteId:e.current_siteid,nextSiteId:e.next_siteid};this.common.loading++,this.api.post("PlacementSiteRule/delete",t).subscribe(e=>{this.common.loading--;let t=e.data;console.log("data:"),console.log(t),this.common.showToast(e.msg),this.getSiteData()},e=>{this.common.loading--,console.log(e)})}}getAllSiteData(){this.common.loading++,this.api.get("TripSiteRule?vehicleId="+this.vehicle.id+"&siteId="+this.siteId).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data;let t=0;for(const n of this.data){let e=this.ruleType.find(e=>e.id==this.data[t].ruletype_id);this.data[t].ruleName=e?e.name:"N.A",this.data[t].preSiteType=n.next_site_name?n.next_site_name:"N.A",this.data[t].materialType=n.mt_name?n.mt_name:"N.A",t++}this.table=null,this.table=this.setTable()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}selectVehicle(e){this.vehicle.id=e.id}selectSite(e){this.siteId=e.id}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["placement-site-rule"]],decls:12,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Placement Site Rule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.addsite()})),s["\u0275\u0275text"](8,"Add Rule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"nb-card-body",5),s["\u0275\u0275template"](10,va,1,2,"smart-table",6),s["\u0275\u0275template"](11,Sa,2,0,"div",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngIf",t.data&&t.data.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[c.s,c.v,c.r,m.u,g.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var ya=n("BuQh");function Ca(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",6),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function Ma(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let Ea=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.common=t,this.datePipe=n,this.user=a,this.modalService=o,this.table=null,this.fuelAvgIssues=[],this.getFuelAvgIssues(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getFuelAvgIssues()}getFuelAvgIssues(){this.common.loading++,this.api.get("FuelDetails/getFuelAvgIssues").subscribe(e=>{this.common.loading--,console.log(e.data),this.fuelAvgIssues=e.data,this.common.showToast(e.msg),this.table=this.setTable()},e=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{regno:{title:"Reg No.",placeholder:"Reg No."},startDate:{title:"Start Date ",placeholder:"Start Date"},endDate:{title:"End Date ",placeholder:"End Date"},litre:{title:"Litre",placeholder:"Litre"},amount:{title:"Amount ",placeholder:"Amount"},avg:{title:"Avg ",placeholder:"Avg"},totalDistance:{title:"Total Distance",placeholder:"Total Distance"},loadingDistance:{title:"Loading Distance",placeholder:"Loading Distance"},unloadingDistance:{title:"Unloading Distance",placeholder:"Unloading Distance"},startLoc:{title:"StartLoc",placeholder:"StartLoc"},endLoc:{title:"EndLoc",placeholder:"EndLoc"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let e=[];return this.fuelAvgIssues.map(t=>{let n={regno:{value:t.regno,class:"blue",action:this.vehicleFFdateWise.bind(this,t)},startDate:{value:this.datePipe.transform(t.start_time,"dd MMM yyyy")},endDate:{value:this.datePipe.transform(t.end_time,"dd MMM yyyy")},litre:{value:t.litre},amount:{value:t.amount},avg:{value:t.avg},totalDistance:{value:t.total_distance},loadingDistance:{value:t.loading_distance},unloadingDistance:{value:t.unloading_distance},startLoc:{value:t.startloc},endLoc:{value:t.endloc},rowActions:{click:"selectRow"}};e.push(n)}),e}vehicleFFdateWise(e){this.common.params={value:e},this.modalService.open(ya.a,{size:"lg",container:"nb-layout"})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["fuel-average-issues"]],decls:10,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Fuel Average Issues"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nb-card-body",3),s["\u0275\u0275elementStart"](7,"div"),s["\u0275\u0275template"](8,Ca,1,2,"smart-table",4),s["\u0275\u0275template"](9,Ma,2,0,"div",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",t.fuelAvgIssues&&t.fuelAvgIssues.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.fuelAvgIssues.length))},directives:[c.s,c.v,c.r,m.u,g.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}"]}),e})();var _a=n("kSDO"),wa=n("Adb+"),ka=n("M5eX"),Pa=n("elYE");let Oa=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.datePipe=t,this.common=n,this.user=a,this.modalService=o,this.startDate="",this.endDate="",this.data=[],this.endDate=this.common.dateFormatter(new Date),this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}populateFilling(){let e={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/populateFillingStationEntriesWrtFo",e).subscribe(e=>{this.common.loading--,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}getDate(e){this.common.params={ref_page:"fuel-analysis"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&("start"==e&&(this.startDate="",this.startDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("fromDate",this.startDate)),"end"==e&&(this.endDate="",this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)))})}mappingFE(){let e={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/FSEMapiingWrtFo",e).subscribe(e=>{this.common.loading--,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}mappingIsFull(){let e={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/UpdateIsFullWrtFF",e).subscribe(e=>{this.common.loading--,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}populateFAL(){let e={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/populateFALogsAndUpdateWrtFo",e).subscribe(e=>{this.common.loading--,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}modalWiseFuel(){this.modalService.open(Pa.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getreport(){let e="start_time="+this.startDate+"&end_time="+this.endDate;console.log("params",e),this.common.loading++,this.api.get("Fuel/getPumpWiseTotalFilling?"+e).subscribe(e=>{this.common.loading--,this.data=e.data,this.data&&(this.common.params=this.data,console.log("response",this.common.params),this.modalService.open(ka.a,{size:"lg",container:"nb-layout"})),console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}vechilewiseFuel(){let e="start_time="+this.startDate+"&end_time="+this.endDate;console.log("params",e),this.common.loading++,this.api.get("Fuel/getVehWiseTotalFilling?"+e).subscribe(e=>{this.common.loading--,this.data=e.data,this.data&&(this.common.params=this.data,this.modalService.open(wa.a,{size:"lg",container:"nb-layout"}).result.then(e=>{e.response&&this.vechilewiseFuel()})),console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["fuel-analysis"]],decls:33,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-8"],[1,"mt-1"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"col-sm-3",2,"margin-left","10px"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"row","mt-4"],[1,"col-2"],[1,"btn","btn-primary","primay_btn",3,"click"],[1,"col-md-10","buttons",2,"margin-top","20px"],["id","populatefilling","name","populate-filling",1,"btn","btn-primary",2,"margin","0px","margin-right","5px","cursor","pointer",3,"click"],["id","mappingFE","name","mapping-fe",1,"btn","btn-primary",2,"margin","0px","cursor","pointer",3,"click"],["id","mappingIsFull","name","mapping-isfull",1,"btn","btn-primary",2,"margin","0px","margin-left","10px","cursor","pointer",3,"click"],["id","populateFAL","name","populate-fal",1,"btn","btn-primary",2,"margin","0px","margin-left","15px","cursor","pointer",3,"click"],["id","populateFAL","name","modal-wise-fuelAvg",1,"btn","btn-primary",2,"margin","0px","margin-left","15px","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5",3),s["\u0275\u0275text"](5,"Fuel Diagnosis"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nb-card-body"),s["\u0275\u0275elementStart"](7,"div",1),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"input",5),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](10,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",6),s["\u0275\u0275elementStart"](12,"input",7),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](13,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",8),s["\u0275\u0275elementStart"](15,"div",9),s["\u0275\u0275elementStart"](16,"button",10),s["\u0275\u0275listener"]("click",(function(){return t.vechilewiseFuel()})),s["\u0275\u0275text"](17,"VehicleWiseFuel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",9),s["\u0275\u0275elementStart"](19,"button",10),s["\u0275\u0275listener"]("click",(function(){return t.getreport()})),s["\u0275\u0275text"](20,"PumpFuelFilling"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",1),s["\u0275\u0275elementStart"](22,"div",11),s["\u0275\u0275elementStart"](23,"button",12),s["\u0275\u0275listener"]("click",(function(){return t.populateFilling()})),s["\u0275\u0275text"](24,"Filling Entries"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"button",13),s["\u0275\u0275listener"]("click",(function(){return t.mappingFE()})),s["\u0275\u0275text"](26,"Mapping Filling Entries"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"button",14),s["\u0275\u0275listener"]("click",(function(){return t.mappingIsFull()})),s["\u0275\u0275text"](28,"Mapping Is Full"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"button",15),s["\u0275\u0275listener"]("click",(function(){return t.populateFAL()})),s["\u0275\u0275text"](30,"Populate Fuel Average Logs"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"button",16),s["\u0275\u0275listener"]("click",(function(){return t.modalWiseFuel()})),s["\u0275\u0275text"](32,"Modal Wise Fuel Avg"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](10,2,t.startDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](13,5,t.endDate,"dd MMM yyyy")))},directives:[c.s,c.v,c.r],pipes:[m.f],styles:["nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .primay_btn[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize;border-radius:3px;cursor:pointer!important;padding:8px}.primay_btn[_ngcontent-%COMP%]{width:100%}"]}),e})();var Da=n("Ig2y");function Ia(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",10),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function Ta(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",11),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let Aa=(()=>{class e{constructor(e,t,n,a,o,i){this.common=e,this.api=t,this.modalService=n,this.activeModal=a,this.dateService=o,this.datePipe=i,this.table=null,this.foFsMapping=[],this.fsid=null,this.foid=null,this.getFoFsMapping(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getFoFsMapping()}getFoFsMapping(){this.common.loading++,this.api.get("Fuel/getFoFsMapping").subscribe(e=>{this.common.loading--,console.log("res",e.data),this.foFsMapping=e.data||[],this.table=this.setTable()},e=>{this.common.loading--,this.common.showError()})}addFoFsMapping(){if(!this.foid)return void this.common.showToast("Fo Is Missing");if(!this.fsid)return void this.common.showToast("Fuel Station Is Missing");let e={foid:this.foid,fsid:this.fsid};this.common.loading++,this.api.post("Fuel/insertFoFsMapping",e).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.common.showToast(e.msg),e.success&&this.getFoFsMapping()},e=>{this.common.loading--,this.common.showError()})}getFo(e){this.foid=e.id}getFs(e){this.fsid=e.id}setTable(){return{data:{headings:{StationName:{title:"Station Name",placeholder:"Station Name"},SiteName:{title:"Site Name",placeholder:"Site Name"},Location:{title:"Location",placeholder:"Location"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}getTableColumns(){let e=[];return this.foFsMapping.map(t=>{let n={StationName:{value:t.station_name},SiteName:{value:t.site_name},Location:{value:t.location},action:{value:"",isHTML:!1,action:null,icons:[{class:" fa fa-trash remove",action:this.deleteMapping.bind(this,t)}]},rowActions:{click:"selectRow"}};e.push(n)}),e}deleteMapping(e){let t={rowid:e.id};console.log("rowid",t),this.common.loading++,this.api.post("Fuel/deleteFoFsMapping",t).subscribe(e=>{this.common.loading--,this.common.showToast(e.msg),e.success&&this.getFoFsMapping()},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](Da.a),s["\u0275\u0275directiveInject"](m.f))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["fo-fs-mapping"]],decls:19,vars:4,consts:[[1,"row"],[1,"col-sm-6"],[1,"col-sm-3"],["url","Suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","Suggestion/GetFuelStation","display","name","placeholder","Search Fuel Station",3,"preSelected","onSelected"],[1,"col-sm-2"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"row",2,"margin-top","15px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Fo Fs Mapping"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nb-card-body"),s["\u0275\u0275elementStart"](7,"div",0),s["\u0275\u0275elementStart"](8,"div",2),s["\u0275\u0275elementStart"](9,"auto-suggestion",3),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFo(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",2),s["\u0275\u0275elementStart"](11,"auto-suggestion",4),s["\u0275\u0275listener"]("onSelected",(function(e){return t.getFs(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](12,"div",2),s["\u0275\u0275elementStart"](13,"div",5),s["\u0275\u0275elementStart"](14,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.addFoFsMapping()})),s["\u0275\u0275text"](15,"Add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",7),s["\u0275\u0275template"](17,Ia,1,2,"smart-table",8),s["\u0275\u0275template"](18,Ta,2,0,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.foFsMapping.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.foFsMapping.length))},directives:[c.s,c.v,c.r,b.a,m.u,g.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),e})(),Fa=(()=>{class e{constructor(e,t,n,a,o,i){this.api=e,this.common=t,this.theme=n,this.user=a,this.datepipe=o,this.modalService=i,this.startDate="",this.endDate="",this.endDate=this.common.dateFormatter(new Date).split(" ")[0],this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)).split(" ")[0],this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh")}getDate(e){this.common.params={ref_page:"trip-analysis"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&("start"==e?(this.startDate="",this.startDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("startDate",this.startDate)):(this.endDate="",this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)))})}getTripAnalysis(){let e={startDate:this.startDate,endDate:this.endDate};this.common.loading++,this.api.post("TripsOperation/regenerateVehicleTrips",e).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.common.showToast(e.msg)},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](c.Kb),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-analysis"]],decls:15,vars:8,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Trip Diagnosis "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body",1),s["\u0275\u0275elementStart"](4,"div",2),s["\u0275\u0275elementStart"](5,"div",3),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"input",5),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](8,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275elementStart"](10,"input",6),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](11,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",4),s["\u0275\u0275elementStart"](13,"button",7),s["\u0275\u0275listener"]("click",(function(){return t.getTripAnalysis()})),s["\u0275\u0275text"](14,"Regenerate Trips"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](8,2,t.startDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](11,5,t.endDate,"dd MMM yyyy")))},directives:[c.s,c.v,c.r],pipes:[m.f],styles:[""]}),e})();var La=n("axIL"),Va=n("IGDu"),za=n("7qtK"),Na=n("QVK/"),ja=n("0pSD"),Ra=n("sfyk");let Ha=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.router=t,this.modalService=n,this.common=a,this.user=o,this.data=[],this.dates={start:null,end:this.common.dateFormatter(new Date)};let i=new Date;this.dates.start=this.common.dateFormatter1(new Date(i.setDate(i.getDate()-4))),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}getDate(e){this.common.params={ref_page:"card usage"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.dates[e]=this.common.dateFormatter(t.date).split(" ")[0],console.log("Date:",this.dates)})}getDiagnostics(){this.common.loading++,this.api.get("LorryReceiptsOperation/getUnmappedLr").subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,this.data&&(this.common.params=this.data,this.modalService.open(Va.a,{size:"lg",container:"nb-layout",backdrop:"static"}))},e=>{this.common.loading--,console.log(e)})}getmapedLr(){let e={start_time:this.dates.start,end_time:this.dates.end};this.common.loading++,this.api.post("LorryReceiptsOperation/getMappedLr",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,this.data&&(this.common.params=this.data,this.modalService.open(za.a,{size:"lg",container:"nb-layout",backdrop:"static"}))},e=>{this.common.loading--,console.log(e)})}mergeLrState(){this.common.loading++,this.api.get("LorryReceiptsOperation/mergeLrState").subscribe(e=>{this.common.loading--,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}addFoField(){this.modalService.open(Na.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data:",e)})}lrInvoice(){this.modalService.open(ja.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})}freightRateRules(){this.modalService.open(Ra.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](d.r),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["lr-diagnostics"]],decls:40,vars:8,consts:[[1,"row",2,"margin-bottom","10px"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-2"],[1,"row"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","end Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-md-2"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h2"),s["\u0275\u0275text"](3,"LR Diagnostics"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body"),s["\u0275\u0275elementStart"](5,"div",0),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"label"),s["\u0275\u0275text"](8,"Unmaped LR:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",1),s["\u0275\u0275elementStart"](10,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.getDiagnostics()})),s["\u0275\u0275text"](11,"Unmaped LR"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",3),s["\u0275\u0275elementStart"](13,"label"),s["\u0275\u0275text"](14,"Merge LR State:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",3),s["\u0275\u0275elementStart"](16,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.mergeLrState()})),s["\u0275\u0275text"](17,"Merge LR State"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",4),s["\u0275\u0275elementStart"](19,"div",1),s["\u0275\u0275elementStart"](20,"label"),s["\u0275\u0275text"](21,"Mapped LR"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",1),s["\u0275\u0275elementStart"](23,"input",5),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](24,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",1),s["\u0275\u0275elementStart"](26,"input",6),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](27,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",1),s["\u0275\u0275elementStart"](29,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.getmapedLr()})),s["\u0275\u0275text"](30,"Mapped LR"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",7),s["\u0275\u0275elementStart"](32,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.addFoField()})),s["\u0275\u0275text"](33,"Add-Columns"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"div",7),s["\u0275\u0275elementStart"](35,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.lrInvoice()})),s["\u0275\u0275text"](36,"Assign-Columns"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",7),s["\u0275\u0275elementStart"](38,"button",2),s["\u0275\u0275listener"]("click",(function(){return t.freightRateRules()})),s["\u0275\u0275text"](39,"Freight Rate Rules"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](23),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](24,2,t.dates.start,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](27,5,t.dates.end,"dd MMM yyyy")))},directives:[c.s,c.v,c.r],pipes:[m.f],styles:[""]}),e})();var Ua=n("AsEy");function Ba(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",14),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function Ga(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let $a=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.datePipe=t,this.common=n,this.user=a,this.modalService=o,this.showTable=!1,this.startDate="",this.endDate="",this.siteRule=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.endDate=this.common.dateFormatter(new Date),this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)),this.getSiteRule(),this.common.refresh=this.refresh.bind(this)}refresh(){console.log("Refresh"),this.getSiteRule()}ngOnInit(){}getSiteRule(){this.siteRule=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};let e={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("HaltOperations/getSiteRule",e).subscribe(e=>{if(this.common.loading--,console.log("res",e.data),this.siteRule=e.data||[],null==this.siteRule)this.common.showToast("Record Empty!!");else{this.common.showToast(e.msg);let n=this.siteRule[0];for(var t in console.log("first_Rec",n),n)if("_"!=t.charAt(0)){this.headings.push(t);let e={title:t,placeholder:this.formatTitle(t)};this.table.data.headings[t]=e}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table)}},e=>{this.common.loading--,this.common.showError()})}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getDate(e){this.common.params={ref_page:"fuel-analysis"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{t.date&&("start"==e&&(this.startDate="",this.startDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("fromDate",this.startDate)),"end"==e&&(this.endDate="",this.endDate=this.common.dateFormatter(t.date).split(" ")[0],console.log("endDate",this.endDate)))})}getTableColumns(){let e=[];for(var t=0;t<this.siteRule.length;t++){this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:this.siteRule[t][this.headings[e]],class:"black",action:""};this.valobj.style={background:this.siteRule[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}ShowData(){this.common.loading++,this.api.get("VehicleKpi/createMaster").subscribe(e=>{this.common.loading--,this.common.showToast(e.msg)},e=>{this.common.loading--,this.common.showError()})}autoReview(){this.common.loading++,this.api.get("AutoHalts/runAutoReviewScheduledActivity").subscribe(e=>{this.common.loading--,this.common.showToast(e.msg)},e=>{this.common.loading--,this.common.showError()})}removeSandwitchHalts(){this.common.loading++,this.api.get("AutoHalts/runSandwitchHalts").subscribe(e=>{this.common.loading--,this.common.showToast(e.msg)},e=>{this.common.loading--,this.common.showError()})}getfoSiteDetails(){this.modalService.open(Ua.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vsc-diagnosis"]],decls:33,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"mt-1"],[1,"btn","btn-primary",3,"click"],[1,"col-3"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"col-sm-3",2,"margin-left","10px"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","primay_btn",3,"click"],[2,"margin-top","10px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5",3),s["\u0275\u0275text"](5,"VSC Diagnosis"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.ShowData()})),s["\u0275\u0275text"](8,"M1 M2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",5),s["\u0275\u0275elementStart"](10,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.autoReview()})),s["\u0275\u0275text"](11,"Auto Review Scheduled "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",5),s["\u0275\u0275elementStart"](13,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.removeSandwitchHalts()})),s["\u0275\u0275text"](14,"Remove Sandwitch Halts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",2),s["\u0275\u0275elementStart"](16,"button",4),s["\u0275\u0275listener"]("click",(function(){return t.getfoSiteDetails()})),s["\u0275\u0275text"](17,"Fo Site Count"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"nb-card-body"),s["\u0275\u0275elementStart"](19,"div",1),s["\u0275\u0275elementStart"](20,"div",6),s["\u0275\u0275elementStart"](21,"input",7),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](22,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"div",8),s["\u0275\u0275elementStart"](24,"input",9),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](25,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",6),s["\u0275\u0275elementStart"](27,"button",10),s["\u0275\u0275listener"]("click",(function(){return t.getSiteRule()})),s["\u0275\u0275text"](28,"getSiteRule"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",11),s["\u0275\u0275elementStart"](30,"div"),s["\u0275\u0275template"](31,Ba,1,2,"smart-table",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](32,Ga,2,0,"div",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](21),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](22,4,t.startDate,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](25,7,t.endDate,"dd MMM yyyy")),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.siteRule&&t.siteRule.length),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null==t.siteRule))},directives:[c.s,c.v,c.r,m.u,g.a],pipes:[m.f],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;border:2px solid #008b8b;border-radius:4px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var Ya=n("6ugN"),Wa=n("IarD"),Ka=n("VKYg");function Za(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",18),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",18),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td",21),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=s["\u0275\u0275nextContext"]();return a.routeId=n.id,a.gotoSingle()})),s["\u0275\u0275text"](10,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.lat),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.long)}}let qa=(()=>{class e{constructor(e,t,n,a,o){this.mapService=e,this.apiService=t,this.router=n,this.commonService=a,this.modalService=o,this.remainingList=[],this.circle=null,this.routeId=null,this.siteLatLng={lat:0,lng:90},this.typeId=1,this.siteLoc="",this.siteName=null,this.tempData=[],this.isUpdate=!1,this.mergeSiteId=null,this.position=null,this.final=null,this.meterRadius=20,this.currentCenter=null,this.lat=null,this.long=null,this.isHeatAble=!1,this.kmsShow=null,this.commonService.refresh=this.refresh.bind(this)}ngOnInit(){this.getRemainingTable()}refresh(){console.log("Refresh"),this.getRemainingTable()}calKms(){let e,t,n=0;if(this.mapService.polygonPath)for(var a=this.mapService.polygonPath.getPath().getArray(),o=0;o<a.length;o++)0!=o&&(n+=this.commonService.distanceFromAToB(e,t,a[o].lat(),a[o].lng(),"Mt")),e=a[o].lat(),t=a[o].lng();this.kmsShow=(n/1e3).toFixed(2)}ngAfterViewInit(){this.mapService.mapIntialize("map"),this.mapService.zoomAt({lat:26.928826486644528,lng:75.74931625366207},14),this.mapService.autoSuggestion("moveLoc",(e,t,n)=>this.mapService.zoomAt({lat:t,lng:n},14)),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"}),this.mapService.addListerner(this.mapService.map,"click",e=>{if(this.mapService.isDrawAllow){console.log("Event",e),this.currentCenter=e.latLng,this.circle&&(this.circle.setMap(null),this.circle=null),this.circle=this.mapService.createCirclesOnPostion(e.latLng,this.meterRadius);let t=e.latLng.lat()+","+e.latLng.lng();this.position=t,this.search(!1),this.calKms()}})}getRemainingTable(){this.commonService.loading++,this.apiService.get("Buffer/getBufferRemaining").subscribe(e=>{let t=e.data;this.commonService.loading--,console.log("Res: ",e.data),this.remainingList=t},e=>{console.error(e),this.commonService.showError()})}loadMarkers(){let e=this.mapService.getMapBounds(),t={lat1:e.lat1,lng1:e.lng1,lat2:e.lat2,lng2:e.lng2,typeId:-2};this.commonService.loading++,this.apiService.post("VehicleStatusChange/getSiteAndSubSite",t).subscribe(e=>{this.commonService.loading--;let t=e.data;console.log("Res: ",e.data),this.clearAll(),this.mapService.createMarkers(t,!1,!0,["id","name"])},e=>{console.error(e),this.commonService.showError()})}clearAll(e=!0){this.exitTicket(),this.mapService.isDrawAllow=!1,this.siteName=null,this.siteLoc=null,this.routeId=null,e&&this.getRemainingTable(),this.circle&&this.circle.setMap(null),this.mapService.clearAll(),this.mapService.resetPolyPaths()}undo(){if(this.mapService.isDrawAllow&&(this.mapService.undoPolyPath(),this.calKms(),console.log("Here",this.mapService.polygonPath),this.circle)){let e=this.mapService.polygonPath.getPath().getArray();this.circle.setCenter(e[e.length-1])}}enterTicket(){if(!this.mapService.isDrawAllow){let e={tblRefId:8,tblRowId:this.routeId};this.routeId?(this.commonService.loading++,this.apiService.post("TicketActivityManagment/insertTicketActivity",e).subscribe(e=>{this.commonService.loading--,e.success?(this.mapService.isDrawAllow=!0,this.isUpdate&&this.commonService.showToast("Already Exists")):this.commonService.showToast(e.msg)},e=>{this.commonService.loading--,console.log(e)})):(this.mapService.isDrawAllow=!0,this.isUpdate&&this.commonService.showToast("Already Exists"))}this.mapService.isDrawAllow&&this.submitPolygon()}submitPolygon(){let e;if(this.mapService.createCirclesOnPostion(n,this.meterRadius),this.mapService.polygonPath){var t="(",n=this.mapService.polygonPath.getPath().getArray();if(n.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var a=0;a<n.length;a++)a==Math.floor(n.length/2)&&(this.lat=n[a].lat()),this.long=n[a].lng(),t+=n[a].lat()+" "+n[a].lng()+",";t=t.substr(0,t.length-1);let o={bufferString:t+=")",routeId:this.routeId,roadDist:this.meterRadius,lat:this.lat,long:this.long};this.commonService.loading++,e=this.routeId?"Buffer/updateBufferLines":"Buffer/insertBufferLines",this.apiService.post(e,o).subscribe(e=>{this.commonService.loading--,this.commonService.showToast("Save"),this.getRemainingTable();let t=this.lat+","+this.long;this.clearAll(),this.position=t,this.search()},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}}mapGetCenterAndBound(){let e=this.mapService.getMapBounds();return{lat:(e.lat1+e.lat2)/2,long:(e.lng1+e.lng2)/2,bound:Math.max(Math.abs(e.lat1-e.lat2)/2,Math.abs(e.lng1-e.lng2)/2)}}boundSearch(){let e=this.mapGetCenterAndBound();this.commonService.loading++,this.apiService.post("Buffer/getBuffer",e).subscribe(e=>{this.commonService.loading--;let t=e.data;e.success?(this.mapService.resetPolyPaths(),this.mapService.createPolyPathsManual(t,(e,t)=>{this.remove(e.id)})):this.commonService.showError(e.msg)},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}search(e=!0){console.log("position1",this.position),this.final=this.position.split(","),console.log("array",this.final[0],this.final[1]),e&&this.mapService.zoomAt(this.mapService.createLatLng(this.final[0],this.final[1]),15);let t={lat:this.final[0],long:this.final[1]};this.commonService.loading++,this.apiService.post("Buffer/getBuffer",t).subscribe(e=>{this.commonService.loading--;let t=e.data;console.log("Res: ",e.data),this.mapService.resetPolyPaths(),this.mapService.createPolyPathsManual(t,(e,t)=>{console.log("Poly",e),this.remove(e.id)})},e=>{console.error(e),this.commonService.showError(),this.mapService.isDrawAllow=!0})}gotoSingle(){this.commonService.loading++;let e=this.routeId;this.apiService.post("Buffer/getSingleBuffer",{id:this.routeId}).subscribe(t=>{this.commonService.loading--;let n=t.data;this.clearAll(),this.tempData=n,this.typeId=n[0].type_id,this.routeId=n[0].id,this.siteLoc=n[0].loc_name,this.siteName=n[0].name,this.routeId=e,this.lat=n[0].lat,this.long=n[0].long,this.getRemainingTable(),this.commonService.loading++,this.apiService.post("Buffer/getBuffer",{lat:this.lat,long:this.long}).subscribe(e=>{this.commonService.loading--;let t=e.data;this.mapService.resetPolyPaths(),this.mapService.createPolyPathsManual(t,(e,t)=>{console.log("Poly",e),this.remove(e.id)}),this.mapService.createMarkers(this.tempData),this.mapService.setMapType(1)},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})},e=>{console.error(e),this.commonService.showError()})}remove(e){console.log("row",e);let t={id:e};e&&(console.log("id",e._id),this.commonService.params={title:"Delete Polyline ",description:"<b>&nbsp;Are Sure To Delete This Polyline<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.commonService.loading++,this.apiService.post("Buffer/bufferDelete",t).subscribe(e=>{this.commonService.loading--,this.commonService.showToast(e.msg);let t=this.mapGetCenterAndBound(),n=t.lat+","+t.long;this.clearAll(),this.position=n,this.search()},e=>{this.commonService.loading--,console.log("Error: ",e)}))}))}showHeat(){if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<12)return void this.commonService.showToast("bounds are huge");var e=this.mapService.getMapBounds();console.log("Bounds",e);let t={lat:(e.lat1+e.lat2)/2,long:(e.lng2+e.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+t.lat+"&long="+t.long).subscribe(e=>{console.log("Res: ",e.data),this.mapService.createHeatMap(e.data,!1),this.isHeatAble=!0,this.commonService.loading--},e=>{console.error(e),this.commonService.showError(),this.commonService.loading--})}}ignoreSite(){this.routeId?(this.commonService.loading++,this.apiService.post("Buffer/ignore",{routeId:this.routeId}).subscribe(e=>{this.commonService.loading--,this.commonService.showToast(e.msg),this.getRemainingTable()},e=>{this.commonService.loading--,console.log(e)}),this.clearAll()):alert("Select Buffer First!!!")}exitTicket(){if(this.routeId){let t;var e={tblRefId:8,tblRowId:this.routeId};return console.log("params",e),this.commonService.loading++,this.apiService.post("TicketActivityManagment/updateActivityEndTime",e).subscribe(e=>(this.commonService.loading--,t=e,console.log(t),!!t.sucess),e=>{this.commonService.loading--,console.log(e)}),!1}}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](ye.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](a.c),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["buffer-polyline"]],decls:75,vars:7,consts:[[1,"row"],[1,"col-6","table"],[1,"buffer"],["name","name","id","name","autocomplete","off","placeholder","Lat&Long",1,"fill-elt","form-control","w-100",3,"ngModel","keydown.enter","ngModelChange"],["placeholder","Route Id",1,"form-control","w-100",3,"ngModel","keydown.enter","ngModelChange"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control","w-100"],["type","number","name","meterRadius","id","meterRadius",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","w-100",3,"click"],["name","undo","id","undo",1,"btn","btn-primary","w-60",3,"click"],[1,"btn","btn-primary",3,"click"],["id","ignore","name","ignore",1,"btn","btn-primary","w-60",3,"click"],[1,"btn","btn-primary",2,"display","inline-block","margin-right","5px",3,"click"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["colspan","3"],[1,"zoom-btn",3,"click"],[1,"tbl"],[1,"table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[4,"ngFor","ngForOf"],["id","map",1,"map","col-6"],[3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"table",2),s["\u0275\u0275elementStart"](5,"tbody"),s["\u0275\u0275elementStart"](6,"tr"),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275elementStart"](8,"input",3),s["\u0275\u0275listener"]("keydown.enter",(function(){return t.search()}))("ngModelChange",(function(e){return t.position=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275elementStart"](10,"input",4),s["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.routeId=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275element"](12,"input",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"td"),s["\u0275\u0275elementStart"](14,"input",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.meterRadius=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](15,"Meter "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"tr"),s["\u0275\u0275elementStart"](17,"td"),s["\u0275\u0275elementStart"](18,"button",7),s["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),s["\u0275\u0275text"](19,"Clear"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"td"),s["\u0275\u0275elementStart"](21,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.undo()})),s["\u0275\u0275text"](22,"Undo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"td"),s["\u0275\u0275elementStart"](24,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),s["\u0275\u0275text"](25,"Load Marker"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"td"),s["\u0275\u0275elementStart"](27,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),s["\u0275\u0275text"](28),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"tr"),s["\u0275\u0275elementStart"](30,"td"),s["\u0275\u0275elementStart"](31,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.refresh()})),s["\u0275\u0275text"](32,"Refresh"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"td"),s["\u0275\u0275elementStart"](34,"button",10),s["\u0275\u0275listener"]("click",(function(){return t.ignoreSite()})),s["\u0275\u0275text"](35,"Ignore"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"td"),s["\u0275\u0275elementStart"](37,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.boundSearch()})),s["\u0275\u0275text"](38,"Load P"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"button",9),s["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),s["\u0275\u0275text"](40),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"td"),s["\u0275\u0275elementStart"](42,"input",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.kmsShow=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](43,"KiloMeters "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"tr"),s["\u0275\u0275elementStart"](45,"td",13),s["\u0275\u0275elementStart"](46,"div"),s["\u0275\u0275elementStart"](47,"span"),s["\u0275\u0275elementStart"](48,"span",14),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),s["\u0275\u0275text"](49,"1"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"span",14),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),s["\u0275\u0275text"](51,"2"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"span",14),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),s["\u0275\u0275text"](53,"3"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"span",14),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),s["\u0275\u0275text"](55,"4"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"span",14),s["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),s["\u0275\u0275text"](57,"5"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](58,"div",15),s["\u0275\u0275elementStart"](59,"table",16),s["\u0275\u0275elementStart"](60,"thead",17),s["\u0275\u0275elementStart"](61,"tr"),s["\u0275\u0275elementStart"](62,"th",18),s["\u0275\u0275text"](63,"S.No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](64,"th",18),s["\u0275\u0275text"](65,"Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](66,"th"),s["\u0275\u0275text"](67,"Lat"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](68,"th"),s["\u0275\u0275text"](69,"Long"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](70,"th"),s["\u0275\u0275text"](71,"Action"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](72,"tbody"),s["\u0275\u0275template"](73,Za,11,4,"tr",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](74,"div",20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngModel",t.position),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.routeId),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.meterRadius),s["\u0275\u0275advance"](14),s["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Polyline":"Create Polyline"),s["\u0275\u0275advance"](12),s["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.kmsShow),s["\u0275\u0275advance"](31),s["\u0275\u0275property"]("ngForOf",t.remainingList))},directives:[c.s,c.r,u.d,u.r,u.u,u.x,m.t],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:350px}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:150px!important;max-width:inherit!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var Ja=n("svlw"),Xa=n("eHBT"),Qa=n("6Jfz"),eo=n("TB/t");function to(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",7),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let no=(()=>{class e{constructor(e,t,n,a,o){this.activeModal=e,this.common=t,this.commonService=n,this.api=a,this.modalService=o,this.location=null,this.data=[],this.table=null,this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("refresh")}saveLocation(){this.data=[],this.table=null;let e="search="+this.location;this.common.loading++,this.api.get("Suggestion/getLocations?"+e).subscribe(e=>{this.common.loading--,this.data=e.data,null==this.data&&(this.data=[],this.table=null),this.table=this.setTable()},e=>{this.common.loading--,this.common.showError()})}setTable(){return{data:{headings:{name:{title:"name",placeholder:"name"},district:{title:"district",placeholder:"district"},state:{title:"state",placeholder:"state"},latitude:{title:"latitude",placeholder:"latitude"},longitude:{title:"longitude",placeholder:"longitude"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}getTableColumns(){let e=[];return this.data.map(t=>{let n={name:{value:t.name,action:this.Maplocation.bind(this,t)},district:{value:t.district},state:{value:t.state},latitude:{value:null==t.latitude?"-":t.latitude},longitude:{value:null==t.longitude?"-":t.longitude},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-trash",action:this.deleteLocation.bind(this,t)}]},rowActions:{click:"selectRow"}};e.push(n)}),e}ADD(){this.common.params={title:"Location Selection"},this.modalService.open(Bt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.saveLocation()})}OpenFoAlias(){this.modalService.open(eo.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.saveLocation()})}Maplocation(e){let t={lng:e.longitude,lat:e.latitude};console.log("location:",t),this.common.params={location:t,title:"Location"},this.modalService.open(Qa.a,{size:"lg",container:"nb-layout",backdrop:"static"})}deleteLocation(e){let t={locationId:e._id};e._id&&(this.common.params={title:"Delete Location ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("sitesOperation/deleteLocationDetails",t).subscribe(e=>{console.log("data",e),this.common.loading--,e.data[0].r_id>0?(this.common.showToast("Success"),this.saveLocation()):this.common.showToast(e.data.r_msg)},e=>{this.common.loading--,console.log("Error: ",e)}))}))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["locations"]],decls:16,vars:2,consts:[[1,"container"],[1,"row",2,"margin-bottom","10px"],[1,"col-3"],["type","text","name","location",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],[1,"btn","btn-primary","mr-3",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Location "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"input",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.location=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.saveLocation()})),s["\u0275\u0275text"](10,"Search Location"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.ADD()})),s["\u0275\u0275text"](12,"ADD"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.OpenFoAlias()})),s["\u0275\u0275text"](14,"Fo-Alias"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](15,to,1,2,"smart-table",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.location),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",t.data.length))},directives:[c.s,c.v,c.r,u.d,u.r,u.u,m.u,g.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:5px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span{position:absolute;display:none;padding:10px 20px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash{color:red}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span{position:absolute;display:none;padding:10px 30px;font-size:11px;font-weight:400;left:-24px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span:before{content:"Remove";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash:hover span{display:block}']}),e})();var ao=n("Opnw"),oo=n("WBJn"),io=n("pc3W"),ro=n("JU80");function lo(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",8),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}let so=(()=>{class e{constructor(e,t,n){this.common=e,this.api=t,this.modalService=n,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.voucherSummaries=[],this.startDate=new Date,this.endDate=new Date,this.voucher=[{name:"pending",id:"1"},{name:"voucherPending",id:"2"},{name:"completed",id:"3"}],this.voucherID=1,this.getVouchersSummary(),this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-30)),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVouchersSummary()}getVouchersSummary(){const e="startDate="+this.common.dateFormatter1(this.startDate)+"&endDate="+this.common.dateFormatter1(this.endDate)+"&statusType="+this.voucherID;this.common.loading++,this.api.get("UploadedVouchers/getUploadedVoucherSummary?"+e).subscribe(e=>{this.common.loading--,this.voucherSummaries=e.data||[],this.voucherSummaries.length?this.setTable():this.resetTable()},e=>{this.common.loading--,console.log("Api Error:",e),this.common.showError()})}setTable(){this.table.data={headings:this.generateHeadings(this.voucherSummaries[0]),columns:this.getTableColumns(this.voucherSummaries,this.voucherSummaries[0])}}generateHeadings(e){let t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}getTableColumns(e,t){let n=[];return e.map(e=>{let a={};for(let n in this.generateHeadings(t))a[n]="Action"==n?{value:"",action:null,icons:this.getIcons(e)}:{value:e[n],class:"black",action:""};n.push(a)}),n}getIcons(e){console.log("vouchar",e);let t=[];return t.push(e._vehicle_id?{class:"fas fa-user-shield",action:this.voucherTypeGet.bind(this,e)}:{class:"fa fa-user",action:this.voucherTypeGet.bind(this,e)}),e._ref_id&&e._ref_type&&t.push({class:"fa fa-list",action:this.openFreightExpense.bind(this,e)}),t}resetTable(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}voucherTypeGet(e){let t=2;e._type_id&&(t=1),this.common.params={voucher:e,modalType:t},this.modalService.open(oo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getVouchersSummary()})}openFreightExpense(e){const t={id:null,refId:e._ref_id,refernceType:e._ref_type,remarks:null};"-152"==e._type_id?(this.common.params={expenseData:t},this.modalService.open(io.a,{size:"lg",container:"nb-layout",backdrop:"static"})):"-153"==e._type_id&&(this.common.params={revenueData:t},this.modalService.open(ro.a,{size:"lg",container:"nb-layout",backdrop:"static"}))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vouchers-summary"]],decls:23,vars:9,consts:[[1,"row"],[1,"col-2"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isStart","isTime","onChanged"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"data","settings"],[3,"value"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h2"),s["\u0275\u0275text"](3,"Vouchers Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body"),s["\u0275\u0275elementStart"](5,"div",0),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"label"),s["\u0275\u0275text"](8,"Start Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",1),s["\u0275\u0275elementStart"](10,"uj-date-time-picker",2),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",1),s["\u0275\u0275elementStart"](12,"label"),s["\u0275\u0275text"](13,"End Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",1),s["\u0275\u0275elementStart"](15,"uj-date-time-picker",3),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",1),s["\u0275\u0275elementStart"](17,"select",4),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucherID=e})),s["\u0275\u0275template"](18,lo,2,2,"option",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",1),s["\u0275\u0275elementStart"](20,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.getVouchersSummary()})),s["\u0275\u0275text"](21,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](22,"smart-table",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1)("isTime",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.voucherID),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.voucher),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[c.s,c.v,c.r,Ge.a,u.D,u.r,u.u,m.t,g.a,u.w,u.G],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:10px;font-size:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user{color:#04a9f5;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span{position:absolute;display:none;padding:10px 45px;font-size:11px;font-weight:400;left:-40px;top:-25px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span:before{content:"Apply voucher";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield{color:#000;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span{position:absolute;display:none;padding:10px 45px;font-size:11px;font-weight:400;left:-40px;top:-25px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span:before{content:"voucher";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr .fa-list{color:red;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span{position:absolute;display:none;padding:10px 20px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr .fa-list:hover span{display:block}']}),e})();var co=n("D0ZN"),mo=n("tEc5"),go=n("uk+R"),po=n("lkmy");function ho(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",13),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().addAndEdit("Add",null)})),s["\u0275\u0275text"](1,"Add"),s["\u0275\u0275elementEnd"]()}}function uo(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",14),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let bo=(()=>{class e{constructor(e,t,n,a,o,i){this.activeModal=e,this.common=t,this.commonService=n,this.api=a,this.user=o,this.modalService=i,this.title="",this.showTable=!1,this.views=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.templateType="LR_PRT",this.isFoid=!1,this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getUserViews(!1)}getUserViews(e){this.isFoid=e;let t="type="+this.templateType+"&isFoid="+this.isFoid;this.common.loading++,this.api.get("userTemplate/view?"+t).subscribe(e=>{this.common.loading--,console.log("res:",e),this.views=e.data||[],this.views.length?this.setTable():this.resetTable()},e=>{this.common.loading--,console.log(e)})}resetTable(){this.table.data={headings:{},columns:[]}}setTable(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}generateHeadings(){let e={};for(var t in this.views[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getTableColumns(){let e=[];return this.views.map(t=>{let n={};for(let e in this.generateHeadings())n[e]="Action"==e?{value:"",isHTML:!1,action:null,icons:this.actionIcons(t)}:{value:t[e],class:"black",action:""};e.push(n)}),e}actionIcons(e){let t=[{class:"far fa-eye",action:this.templatePreview.bind(this,"Preview",e)},{class:"fas fa-user",action:this.assign.bind(this,"Edit",e)}];return this.user.permission.edit&&t.push({class:"far fa-edit",action:this.addAndEdit.bind(this,"Edit",e)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteUserTemplate.bind(this,e)}),t}addAndEdit(e,t){this.common.params={title:e,userTemplate:t},this.modalService.open(co.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(t=>{"Add"==e&&this.getUserViews(this.isFoid)})}templatePreview(e,t){this.common.params={previewData:{title:e,previewId:t._id,refId:t._lrId,refType:t._ref_type}},this.modalService.open(go.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(e=>{})}templateDevView(e,t){this.common.params={title:e,userTemplate:t},this.modalService.open(po.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(e=>{})}deleteUserTemplate(e){console.log("row:",e);let t={rowId:e._id};e._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("UserTemplate/delete",t).subscribe(e=>{this.common.loading--,this.common.showToast(e.msg),this.getUserViews(this.isFoid)},e=>{this.common.loading--,console.log("Error: ",e)}))}))}assign(e,t){let n;console.log("view",t),n=t?{type:t.Type,refType:t._ref_type,name:t.Name,id:t._id}:{},this.common.params={title:e,preAssignUserTemplate:n},this.modalService.open(mo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["user-templates"]],decls:29,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-2"],["name","templateType",1,"form-control",3,"ngModel","ngModelChange"],["value","LR_PRT"],["value","FRINV"],["value","DSPOD_PRT"],["value","ALL"],[1,"btn","btn-primary",3,"click"],[1,"col-2","text-right"],["class","btn btn-primary mr-3",3,"click",4,"ngIf"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"click"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," User Template "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"div",0),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"select",3),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.templateType=e})),s["\u0275\u0275elementStart"](8,"option",4),s["\u0275\u0275text"](9,"Lr"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"option",5),s["\u0275\u0275text"](11,"Invoice"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"option",6),s["\u0275\u0275text"](13,"Print Distpatch Order"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"option",7),s["\u0275\u0275text"](15,"All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",2),s["\u0275\u0275elementStart"](17,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.getUserViews(!1)})),s["\u0275\u0275text"](18,"Get All Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",2),s["\u0275\u0275elementStart"](20,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.getUserViews(!0)})),s["\u0275\u0275text"](21,"Get Fo Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",2),s["\u0275\u0275elementStart"](23,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.getUserViews(null)})),s["\u0275\u0275text"](24,"Get Unassign Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",9),s["\u0275\u0275template"](26,ho,2,0,"button",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",11),s["\u0275\u0275template"](28,uo,1,2,"smart-table",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.templateType),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("ngIf",t.user.permission.add),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.views.length))},directives:[c.s,c.v,c.r,u.D,u.r,u.u,u.w,u.G,m.u,g.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{width:30px;text-align:center}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span{position:absolute;display:none;padding:10px 34px;font-weight:400;font-size:11px;left:-32px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span:before{content:"Preview";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user{color:#006400;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:before{content:"Assign";display:block;position:absolute;top:0;left:0;background-color:#006400;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #006400;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user:hover span{display:block}']}),e})();var fo=n("4zcd"),vo=n("Wvez"),So=n("1MnW");function xo(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",14),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("ngValue",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e.name," ")}}function yo(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275pipe"](9,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n+1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",e.brand,""),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.modal),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](9,4,e.adddate,"dd-MMM-yyyy hh:mm a"))}}function Co(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275text"](1," No Data available ! "),s["\u0275\u0275elementEnd"]())}let Mo=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.modals=[],this.items=[],this.selectedModal={id:0,name:""},this.common.refresh=this.refresh.bind(this),this.getModals()}ngOnInit(){}refresh(){this.getModals()}getModals(){console.log("params ","typeId=-2"),this.api.get("Stock/getModals?typeId=-2").subscribe(e=>{this.modals=e.data,console.log("getbatteryModals",this.selectedModal.id=this.modals[0].name,this.modals)},e=>{console.error(e),this.common.showError()})}modalSelected(){console.log("selectedModal ",this.selectedModal,this.selectedModal.id,this.selectedModal.name),this.getStockItems()}getStockItems(){let e="typeId=-2&stockSubTypeId="+this.selectedModal.id;console.log("params ",e),this.api.get("Stock/getStockItems?"+e).subscribe(e=>{this.items=e.data,console.log("getItems",this.items)},e=>{console.error(e),this.common.showError()})}openStockItemModal(e){console.log("stockitem",e),this.common.params=e||{stocktype_name:"battery",stocktype_id:-2,stoctsubtypename:this.selectedModal.name,stocksubtype_id:this.selectedModal.id},console.log("this.common.params",this.common.params),this.modalService.open(vo.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{if(t.response){if(e)return void this.updateStockItem(e.id,t.stockitem);this.addStockItem(t.stockItem)}})}addStockItem(e){console.log(e);const t={name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: ",t),this.common.loading++,this.api.post("Stock/InsertStockItem",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockItems()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateStockItem(e,t){console.log(t);const n={name:t.name,code:t.code,stocksubtypeid:t.stockSubType.id,sales:t.sales,purchase:t.purchase,minlimit:t.minlimit,maxlimit:t.maxlimit,isactive:t.isactive,inventary:t.inventary,stockunit:t.unit.id,stockItemid:e};console.log("paramsans: ",n),this.common.loading++,this.api.post("Stock/UpdateStockItem",n).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockItems()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStockSubTypeModal(e){this.common.params=e||{stocktypename:"battery",stocktype_id:-2},this.modalService.open(So.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{if(t.response){if(e)return void this.updateStockSubType(e.id,t.stockSubType);this.addStockSubType(t.stockSubType)}})}addStockSubType(e){const t={name:e.name,code:e.code,stockid:e.stockType.id};this.common.loading++,this.api.post("Stock/InsertStocksubType",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocksubtype;""==t?(this.common.showToast(" Stock SubType Add"),this.getModals()):this.common.showToast(t)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateStockSubType(e,t){console.log("test"),console.log(t);const n={name:t.name,code:t.code,stockid:t.stockType.id,id:e};this.common.loading++,this.api.post("Stock/updateStocksubType",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocksubtype;this.common.showToast(""==t?" Stock SubType Update":t)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["battery-modals"]],decls:34,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[1,"col-sm-1"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"col-sm-2","text-right"],[1,"col-sm-2"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[2,"padding","10px 15px"],[1,"table","table-bordered","table-hover","mb-0"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert-danger mt-3",4,"ngIf"],[3,"ngValue"],[1,"no-data","alert-danger","mt-3"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Battery Models"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",2),s["\u0275\u0275elementStart"](7,"button",3),s["\u0275\u0275listener"]("click",(function(){return t.openStockSubTypeModal()})),s["\u0275\u0275text"](8,"Add Brand"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275elementStart"](10,"span"),s["\u0275\u0275text"](11," Brand Name : "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",5),s["\u0275\u0275elementStart"](13,"select",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedModal=e}))("change",(function(){return t.modalSelected()})),s["\u0275\u0275template"](14,xo,2,2,"option",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",5),s["\u0275\u0275elementStart"](16,"button",8),s["\u0275\u0275listener"]("click",(function(){return t.openStockItemModal()})),s["\u0275\u0275text"](17,"Add Modal"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"nb-card-body",9),s["\u0275\u0275elementStart"](19,"div"),s["\u0275\u0275elementStart"](20,"table",10),s["\u0275\u0275elementStart"](21,"thead",11),s["\u0275\u0275elementStart"](22,"tr"),s["\u0275\u0275elementStart"](23,"th"),s["\u0275\u0275text"](24,"# "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"th"),s["\u0275\u0275text"](26,"Code"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"th"),s["\u0275\u0275text"](28,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"th"),s["\u0275\u0275text"](30,"Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"tbody"),s["\u0275\u0275template"](32,yo,10,7,"tr",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](33,Co,2,0,"div",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("ngModel",t.selectedModal),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.modals),s["\u0275\u0275advance"](18),s["\u0275\u0275property"]("ngForOf",t.items),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==t.modals.length))},directives:[c.s,c.v,u.D,u.r,u.u,m.t,c.r,m.u,u.w,u.G],pipes:[m.f],styles:[""]}),e})();var Eo=n("mdFJ"),_o=n("baNc"),wo=n("g/MX");function ko(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",3),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275element"](2,"img",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div"),s["\u0275\u0275elementStart"](4,"input",5),s["\u0275\u0275listener"]("ngModelChange",(function(n){return s["\u0275\u0275restoreView"](e),t.$implicit.txt=n}))("keyup.enter",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=t.index;return s["\u0275\u0275nextContext"]().captchaValidator(n,a)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div"),s["\u0275\u0275elementStart"](6,"button",6),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,a=t.index;return s["\u0275\u0275nextContext"]().captchaValidator(n,a)})),s["\u0275\u0275text"](7,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;s["\u0275\u0275property"]("hidden",0!==n),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("src",e.url,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("name","captcha-"+n)("id","captcha-"+n)("ngModel",e.txt)}}let Po=(()=>{class e{constructor(e,t){this.api=e,this.common=t,this.count=0,this.captchas=[],this.common.refresh=this.refresh.bind(this),this.getCaptchas()}ngOnInit(){}ngAfterViewInit(){}refresh(){this.getCaptchas()}getCaptchas(){this.api.get("Captchas/getPendingCaptchasInfo").subscribe(e=>{console.log("Res:",e),this.captchas=e.data.map(e=>(e.txt="",e)),setTimeout(()=>{this.captchas.length&&document.getElementById("captcha-0").focus()},300)},e=>{console.log("Error: ",e),this.common.showError()})}captchaValidator(e,t){e.txt?this.sendCaptchaTxt(e,t):this.common.showError("Please enter valid captcha")}sendCaptchaTxt(e,t){console.log("index:",t),this.captchas.splice(t,1),this.api.post("Captchas/updateCaptcha",{text:e.txt,captchaId:e.id}).subscribe(e=>{console.log("Res: ",e),e.success&&this.count++,this.getCaptchas()},e=>{console.log("Error: ",e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["captcha"]],decls:8,vars:2,consts:[[2,"min-height","580px"],[1,"container"],["class","captcha-container",3,"hidden",4,"ngFor","ngForOf"],[1,"captcha-container",3,"hidden"],["alt","Captcha",3,"src"],["type","text","placeholder","Enter Captcha","autofocus","",1,"form-control",3,"name","id","ngModel","ngModelChange","keyup.enter"],["type","submit","name","submitCaptcha",1,"btn","btn-primary","m-0",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2,"Captcha : "),s["\u0275\u0275elementStart"](3,"span"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-body",0),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275template"](7,ko,8,5,"div",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("0",t.count,""),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",t.captchas))},directives:[c.s,c.v,c.r,m.t,u.d,u.r,u.u],styles:[".btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff}.captcha-container[_ngcontent-%COMP%]{width:450px;margin:auto;padding:10px 25px;border:2px solid #e2e2e2;text-align:center}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:20px!important;text-align:center!important}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:20px;height:50px;width:100%}"]}),e})();var Oo=n("iJpb");function Do(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"td"),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"td"),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"td"),s["\u0275\u0275text"](18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.vehid),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.addtime),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.transtime),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.remark),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.amount_credit),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.amount_debit),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.entry_type),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.balance),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.txn_id)}}const Io=function(){return["name","mobileno"]};let To=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.pdfService=t,this.common=n,this.user=a,this.modalService=o,this.dates={currentdate:this.common.dateFormatter1(new Date),start:null,end:this.common.dateFormatter1(new Date)},this.fo={id:null,name:null,mobileNo:null},this.result=[],this.data=[],this.openingBalance=0,this.closingBalance=0,this.creditAmount=0,this.debitAmount=0,this.vehid=this.user._details.vehid,this.mobileno=this.user._details.mobileno,this.foAgents=[],this.typedKey="",this.common.refresh=this.refresh.bind(this),this.dates.start=this.common.dateFormatter1(new Date((new Date).setDate((new Date).getDate()-15)))}ngOnInit(){}refresh(){this.getaddTimeFinancialTollReport()}calculateAmount(e){let t=e[0].balance,n=e[0].amount;this.openingBalance="usage"!=e[0].entry_type.toLowerCase?parseInt(t)+n:parseInt(t)-n,this.closingBalance=e[e.length-1].balance}getDate(e){this.common.params={ref_page:"card usage"},this.modalService.open(B.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.dates[e]=this.common.dateFormatter(t.date).split(" ")[0],console.log("Date:",this.dates)})}getaddTimeFinancialTollReport(){if(this.openingBalance=0,this.closingBalance=0,this.data=[],this.fo.mobileNo){let e="&startDate="+this.dates.start+"&endDate="+this.dates.end+"&mobileno="+this.fo.mobileNo;this.common.loading++,this.api.walle8Get("FinancialAccountSummary/getFinancialAccountSummaryAddTime.json?"+e).subscribe(e=>{this.common.loading--,console.log("Res:",e),e&&e.data&&e.data.length>0?(this.result=e.data,this.data=e.data,this.calculateAmount(this.data)):this.common.showError("data not found")},e=>{this.common.loading--,console.log(e)})}else alert("Please select customer")}selectFo(e){this.fo.id=e.foid,this.fo.name=e.name,this.fo.mobileNo=e.mobileno}getFoAgents(){let e=document.getElementById("agentFo").value;console.log("searvh ",e),this.api.walle8Get("Suggestion/getFoAgents.json?search="+e).subscribe(e=>{console.log("res",e),this.foAgents=e.data,console.log("-0-0-0",this.foAgents)},e=>{console.log(e)})}filterData(e){console.log("typedKey",this.typedKey),this.data=this.result.filter(e=>!this.typedKey||(console.log("ele",e),!!e.vehid&&e.vehid.toLowerCase().includes(this.typedKey))),console.log("data",this.data)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](Oo.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["financial-account-summary"]],decls:135,vars:21,consts:[[1,"row","doNotPrint"],[1,"col-2"],["placeholder","Enter Customer","seperator","-","inputId","agentFo",2,"width","60%",3,"data","display","onSelected","onChange"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","End Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-3"],["type","text","autocomplete","off","placeholder","Enter Vehicle",1,"form-control",3,"ngModel","keyup","ngModelChange"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["id","financialaccount"],[2,"height","40px"],[1,"row"],[1,"col-6"],["src","http://elogist.in/transtruck/admindashboard/assets/images/left-logo.png",2,"width","150px","height","120px"],[1,"row",2,"margin-top","10px"],[1,"table","table-bordered"],["colspan","2",1,"thead"],[1,"col-12"],["colspan","4",1,"thead"],["colspan","9",1,"thead"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-body"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"auto-suggestion",2),s["\u0275\u0275listener"]("onSelected",(function(e){return t.selectFo(e)}))("onChange",(function(){return t.getFoAgents()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"input",3),s["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),s["\u0275\u0275pipe"](7,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",1),s["\u0275\u0275elementStart"](9,"input",4),s["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),s["\u0275\u0275pipe"](10,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",1),s["\u0275\u0275elementStart"](12,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.getaddTimeFinancialTollReport()})),s["\u0275\u0275text"](13,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",6),s["\u0275\u0275elementStart"](15,"input",7),s["\u0275\u0275listener"]("keyup",(function(e){return t.filterData(e)}))("ngModelChange",(function(e){return t.typedKey=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",8),s["\u0275\u0275elementStart"](17,"span",9),s["\u0275\u0275listener"]("click",(function(){return t.common.downloadPdf("financialaccount")})),s["\u0275\u0275element"](18,"i",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",11),s["\u0275\u0275element"](20,"div",12),s["\u0275\u0275elementStart"](21,"div",13),s["\u0275\u0275elementStart"](22,"div",14),s["\u0275\u0275elementStart"](23,"b"),s["\u0275\u0275text"](24,"eLogist Solutions Pvt. Ltd."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](25,"br"),s["\u0275\u0275text"](26," Address: 605-21, Jaipur Electronic Market,"),s["\u0275\u0275element"](27,"br"),s["\u0275\u0275text"](28," Riddhi Siddhi Circle, Gopalpura Bypass, Jaipur, Rajasthan - 302018"),s["\u0275\u0275element"](29,"br"),s["\u0275\u0275text"](30," Support: 8081604455"),s["\u0275\u0275element"](31,"br"),s["\u0275\u0275text"](32," Website: www.walle8.com "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](33,"div",6),s["\u0275\u0275elementStart"](34,"div",6),s["\u0275\u0275element"](35,"img",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",16),s["\u0275\u0275elementStart"](37,"div",14),s["\u0275\u0275elementStart"](38,"table",17),s["\u0275\u0275elementStart"](39,"tr"),s["\u0275\u0275elementStart"](40,"th",18),s["\u0275\u0275text"](41,"Provider Details"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"tr"),s["\u0275\u0275elementStart"](43,"td"),s["\u0275\u0275text"](44,"Provider Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"td"),s["\u0275\u0275text"](46,"eLogist"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"tr"),s["\u0275\u0275elementStart"](48,"td"),s["\u0275\u0275text"](49,"Provider Address"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"td"),s["\u0275\u0275text"](51,"Jaipur"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"tr"),s["\u0275\u0275elementStart"](53,"td"),s["\u0275\u0275text"](54,"GSTIN"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"td"),s["\u0275\u0275text"](56,"08AAECE3933F1ZS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](57,"tr"),s["\u0275\u0275elementStart"](58,"td"),s["\u0275\u0275text"](59,"Place Of Supply"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](60,"td"),s["\u0275\u0275text"](61,"Rajasthan"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"div",14),s["\u0275\u0275elementStart"](63,"table",17),s["\u0275\u0275elementStart"](64,"tr"),s["\u0275\u0275elementStart"](65,"th",18),s["\u0275\u0275text"](66,"Customer Details"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](67,"tr"),s["\u0275\u0275elementStart"](68,"td"),s["\u0275\u0275text"](69,"Customer Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](70,"td"),s["\u0275\u0275text"](71),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](72,"tr"),s["\u0275\u0275elementStart"](73,"td"),s["\u0275\u0275text"](74,"Mobile No."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](75,"td"),s["\u0275\u0275text"](76),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](77,"tr"),s["\u0275\u0275elementStart"](78,"td"),s["\u0275\u0275text"](79,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](80,"td"),s["\u0275\u0275text"](81),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](82,"tr"),s["\u0275\u0275elementStart"](83,"td"),s["\u0275\u0275text"](84,"Statement Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](85,"td"),s["\u0275\u0275text"](86),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](87,"tr"),s["\u0275\u0275elementStart"](88,"td"),s["\u0275\u0275text"](89,"Statement Period"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](90,"td"),s["\u0275\u0275text"](91),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](92,"div",13),s["\u0275\u0275elementStart"](93,"div",19),s["\u0275\u0275elementStart"](94,"table",17),s["\u0275\u0275elementStart"](95,"tr"),s["\u0275\u0275elementStart"](96,"th",20),s["\u0275\u0275text"](97,"Account Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](98,"tr"),s["\u0275\u0275elementStart"](99,"td"),s["\u0275\u0275text"](100,"Opening Balance(Rs.)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](101,"td"),s["\u0275\u0275text"](102,"Closing Balance(Rs.)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](103,"tr"),s["\u0275\u0275elementStart"](104,"td"),s["\u0275\u0275text"](105),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](106,"td"),s["\u0275\u0275text"](107),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](108,"div",13),s["\u0275\u0275elementStart"](109,"div",19),s["\u0275\u0275elementStart"](110,"table",17),s["\u0275\u0275elementStart"](111,"tr"),s["\u0275\u0275elementStart"](112,"th",21),s["\u0275\u0275text"](113,"Transaction Details"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](114,"tr"),s["\u0275\u0275elementStart"](115,"th"),s["\u0275\u0275text"](116,"Vehicle"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](117,"th"),s["\u0275\u0275text"](118,"Accounting Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](119,"th"),s["\u0275\u0275text"](120,"Transaction Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](121,"th"),s["\u0275\u0275text"](122,"Toll Plaza"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](123,"th"),s["\u0275\u0275text"](124,"Amount(CR)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](125,"th"),s["\u0275\u0275text"](126,"Amount(DR)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](127,"th"),s["\u0275\u0275text"](128,"Transaction Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](129,"th"),s["\u0275\u0275text"](130,"Balance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](131,"th"),s["\u0275\u0275text"](132,"Transaction Id"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](133,"tbody"),s["\u0275\u0275template"](134,Do,19,9,"tr",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("data",t.foAgents)("display",s["\u0275\u0275pureFunction0"](20,Io)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](7,14,t.dates.start,"dd MMM yyyy")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind2"](10,17,t.dates.end,"dd MMM yyyy")),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",t.typedKey),s["\u0275\u0275advance"](56),s["\u0275\u0275textInterpolate"](t.fo.id),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](t.fo.mobileNo),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](t.fo.name),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](t.dates.currentdate),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate2"]("",t.dates.start," - ",t.dates.end,""),s["\u0275\u0275advance"](14),s["\u0275\u0275textInterpolate"](t.openingBalance),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t.closingBalance),s["\u0275\u0275advance"](27),s["\u0275\u0275property"]("ngForOf",t.data))},directives:[c.s,c.r,b.a,u.d,u.r,u.u,m.t],pipes:[m.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}@media print{.doNotPrint[_ngcontent-%COMP%]{display:none!important}}"]}),e})();var Ao=n("JyC3");function Fo(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",19),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}const Lo=[{path:"",component:z,children:[{path:"dashboard",component:N.a,canActivate:[Te.b]},{path:"load-intelligence",loadChildren:()=>Promise.resolve().then(n.bind(null,"u1rS")).then(e=>e.LoadIntelligenceModule),canActivate:[Te.b]},{path:"beehive",component:Ht.a,canActivate:[Te.b]},{path:"vehiclestatuschange",component:N.a,canActivate:[Te.b]},{path:"tripverification",component:(()=>{class e{constructor(e,t,n,a,o){let i;this.datePipe=e,this.api=t,this.common=n,this.user=a,this.modalService=o,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.status=0,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},i=new Date,this.endDate=new Date(i),this.startDate=new Date(i.setDate(i.getDate()-5)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(),this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getVehicleTrips()}getVehicleTrips(){this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let e=this.common.dateFormatter(this.startDate),t=this.common.dateFormatter(this.endDate);console.log("start & end",e,t);let n="vehicleId="+this.vehicleId+"&startDate="+e+"&endDate="+t+"&status="+this.status;console.log("params",n),++this.common.loading,this.api.get("TripsOperation/getTrips?"+n).subscribe(e=>{--this.common.loading,console.log("Res:",e.data),this.vehicleTrips=e.data,null!=this.vehicleTrips?(console.log("vehicleTrips",this.vehicleTrips),this.gettingTableHeader(this.vehicleTrips)):this.common.showToast("No Record Found !!")},e=>{--this.common.loading,console.log("Err:",e)})}gettingTableHeader(e){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};let t=e[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.headings.km={title:"KM",placeholder:"KM"},this.table.data.headings.googlekm={title:"Google KM",placeholder:"Google KM"},this.table.data.headings.hiskm={title:"Historic KM (Avg)",placeholder:"Historic KM (Avg)"},-2==this.status&&(this.table.data.headings.status={title:"Status",placeholder:"Status"},this.table.data.headings.remark={title:"Remark",placeholder:"Remark"}),this.table.data.headings.stampedby={title:"Stamped By",placeholder:"Stamped By"},this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns(),this.table.data.columns=this.getTableColumns()}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getTableColumns(){let e=[];for(var t=0;t<this.vehicleTrips.length;t++){this.valobj={},this.valobj={class:"xyz"};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]="Trip"==this.headings[e]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[t]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[t][this.headings[e]],class:"black",action:""},this.valobj.km={value:this.vehicleTrips[t]._km,class:"blue",action:this.openTripKmRepair.bind(this,this.vehicleTrips[t])},this.valobj.googlekm={value:this.vehicleTrips[t]._googlekm,isHTML:!0,action:null},this.valobj.hiskm={value:this.vehicleTrips[t]._hiskm,isHTML:!0,action:null},this.valobj.remark={value:this.vehicleTrips[t]._remark,isHTML:!0,action:null},this.valobj.status={value:this.vehicleTrips[t]._statusname,isHTML:!0,action:null},this.valobj.stampedby={value:this.vehicleTrips[t]._actionby,isHTML:!0,action:null},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[t],t)};this.vehicleTrips[t]._class&&(console.log("seleed"),this.valobj.class="selected"),e.push(this.valobj)}return console.log("Columns:",e),e}openTripKmRepair(e){e._km?(this.common.params={tripId:e["Trip Id"]},console.log("tripData",this.common.params),this.modalService.open(Ao.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})):this.common.showError("No Data")}actionIcons(e,t){return[{class:"fa fa-chart-pie change-status",action:this.openChangeStatusModal.bind(this,e,t)}]}searchVehicle(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}openChangeStatusModal(e,t){let n,a,o;this.vehicleTrips[t]._class="selected",console.log("this.VehicleStatusAlerts[index]['_class']",this.vehicleTrips[t]),this.gettingTableHeader(this.vehicleTrips),console.log("trip====",e),n=new Date,a=new Date(n.setDate(n.getDate()-2)),o=this.common.dateFormatter(a);let i=this.common.dateFormatter(o),r=this.common.dateFormatter(new Date),l={vehicle_id:e._vid,regno:e.Vehicle,suggest:11,latch_time:e._startdate||i,tTime:e._enddate||r,tripId:e._tripid,ref_page:"tv",verifystatus:e._statustype,tripName:this.common.getJSONTripStatusHTML(e)};console.log("VehicleStatusData",l),this.common.params=l,this.modalService.open(j.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](m.f),s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-verification"]],decls:32,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[3,"ngModel","ngModelChange"],["value","0"],["value","-2"],["value","-1"],["value","1"],["value","2"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Trips Verification"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nb-card-body"),s["\u0275\u0275elementStart"](7,"div",3),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"div",5),s["\u0275\u0275elementStart"](10,"auto-suggestion",6),s["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",7),s["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",7),s["\u0275\u0275elementStart"](14,"uj-date-time-picker",9),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",7),s["\u0275\u0275elementStart"](16,"select",10),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),s["\u0275\u0275elementStart"](17,"option",11),s["\u0275\u0275text"](18,"Pending"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"option",12),s["\u0275\u0275text"](20,"Objections"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"option",13),s["\u0275\u0275text"](22,"Can't Say"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"option",14),s["\u0275\u0275text"](24,"Highly Confident"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"option",15),s["\u0275\u0275text"](26,"Stamped"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",16),s["\u0275\u0275elementStart"](28,"button",17),s["\u0275\u0275listener"]("click",(function(){return t.getVehicleTrips()})),s["\u0275\u0275text"](29,"OK"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](30,Fo,1,2,"smart-table",18),s["\u0275\u0275element"](31,"br"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("preSelected",null),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("dateTimeValue",t.startDate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.status),s["\u0275\u0275advance"](14),s["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[c.s,c.v,c.r,b.a,Ge.a,u.D,u.r,u.u,u.w,u.G,m.u,g.a],styles:['[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .selected{background-color:#ff0!important}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}']}),e})(),canActivate:[Te.b]},{path:"vscticketaudit",component:qe},{path:"issue-alerts",component:U,canActivate:[Te.b]},{path:"escalation-matrix",component:h,canActivate:[Te.b]},{path:"generate-lr",component:xe.a},{path:"group-managements",component:P,canActivate:[Te.b]},{path:"ticket-properties",component:T,canActivate:[Te.b]},{path:"ticket-subscribe",component:Rt,canActivate:[Te.b]},{path:"lorry-receipt-details",component:Se,canActivate:[Te.b]},{path:"site-fencing",component:_e,canActivate:[Te.b]},{path:"transport-area",component:we,canActivate:[Te.b]},{path:"diagnostics",component:W,canActivate:[Te.b]},{path:"site-details",component:Oe,canActivate:[Te.b]},{path:"pending-documents",component:De.a,canActivate:[Te.b]},{path:"user-preferences",component:Be,canActivate:[Te.b],canDeactivate:[Te.a]},{path:"alert-related-issue",component:Xe,canActivate:[Te.b]},{path:"gps-supplier-mapping",component:et,canActivate:[Te.b]},{path:"vehicles-view",component:at,canActivate:[Te.b]},{path:"company-details",component:rt,canActivate:[Te.b]},{path:"transport-agents",component:dt,canActivate:[Te.b]},{path:"driver-list",component:ct.a,canActivate:[Te.b]},{path:"vehicle-gps-trail",component:gt,canActivate:[Te.b]},{path:"sub-sites",component:St,canActivate:[Te.b]},{path:"vehicle-distance",component:_t.a,canActivate:[Te.b]},{path:"activity-summary",component:Ct,canActivate:[Te.b]},{path:"vehicle-gps-detail",component:Et},{path:"trip-status-feedback-logs",component:At,canActivate:[Te.b]},{path:"fuel-fillings",component:pt.a,canActivate:[Te.b]},{path:"fo-fs-mapping",component:Aa,canActivate:[Te.b]},{path:"fuel-rules",component:an,canActivate:[Te.b]},{path:"pump-station-area",component:on,canActivate:[Te.b]},{path:"trip-site-rule",component:Dt,canActivate:[Te.b]},{path:"fuel-average-analysis",component:Ft.a,canActivate:[Te.b]},{path:"fuel-average-issues",component:Ea,canActivate:[Te.b]},{path:"consolidate-fuel-average",component:_a.a,canActivate:[Te.b]},{path:"fuel-analysis",component:Oa,canActivate:[Te.b]},{path:"remaining-fuel",component:Lt.a,canActivate:[Te.b]},{path:"add-customer",component:Qt,canActivate:[Te.b]},{path:"toll-transaction-summary",component:ln,canActivate:[Te.b]},{path:"manual-toll-transaction-summary",component:sn,canActivate:[Te.b]},{path:"vehiclewise-tolltransaction",component:cn,canActivate:[Te.b]},{path:"pending-vehicle",component:ga,canActivate:[Te.b]},{path:"halt-density",component:ba,canActivate:[Te.b]},{path:"placement-site-rule",component:xa,canActivate:[Te.b]},{path:"trip-analysis",component:Fa},{path:"vehicles",component:La.a,canActivate:[Te.b]},{path:"lr-diagnostics",component:Ha,canActivate:[Te.b]},{path:"vsc-diagnosis",component:$a,canActivate:[Te.b]},{path:"view-modal-service",component:Ya.a,canActivate:[Te.b]},{path:"view-sub-modal-service",component:Wa.a,canActivate:[Te.b]},{path:"via-routes",component:Ka.a,canActivate:[Te.b]},{path:"buffer-polyline",component:qa,canActivate:[Te.b]},{path:"pod-dashboard",component:Ja.a,canActivate:[Te.b]},{path:"nearby-pods",component:Xa.a,canActivate:[Te.b]},{path:"locations",component:no,canActivate:[Te.b]},{path:"web-activity-summary",component:ao.a,canActivate:[Te.b]},{path:"vouchers-summary",component:so,canActivate:[Te.b]},{path:"fuel-mileage-with-odo",component:fo.a,canActivate:[Te.b]},{path:"user-templates",component:bo,canActivate:[Te.b]},{path:"fo-fuel-average",component:Eo.a,canActivate:[Te.b]},{path:"battery-modals",component:Mo,canActivate:[Te.b]},{path:"captcha",component:Po,canActivate:[Te.b]},{path:"challan-payment-request",component:_o.a,canActivate:[Te.b]},{path:"mv-gps-api-req",component:wo.a,canActivate:[Te.b]},{path:"financial-account-summary",component:To,canActivate:[Te.b]},{path:"vehdocmismatch",component:(()=>{class e{constructor(e,t,n,a){this.api=e,this.common=t,this.user=n,this.modalService=a,this.vehdocmismatch=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.vehDocMismatchSummary()}ngOnInit(){}vehDocMismatchSummary(){++this.common.loading,this.api.get("Documents/vahenDocumentMismatchSummary").subscribe(e=>{--this.common.loading,console.log("Res:",e.data),this.vehdocmismatch=e.data,this.vehdocmismatch.length?this.setTable():this.resetTable()},e=>{--this.common.loading,console.log("Err:",e)})}setTable(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}resetTable(){this.table.data={headings:{},columns:[]}}generateHeadings(){let e={};for(var t in this.vehdocmismatch[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}getTableColumns(){let e=[];return this.vehdocmismatch.map(t=>{let n={};for(let e in this.generateHeadings())n[e]="Action"==e?{value:"",isHTML:!1,action:null,icons:this.actionIcons(t)}:{value:t[e],class:"black",action:""};e.push(n)}),e}actionIcons(e){let t=[];return t=[{txt:"Reject EL",class:"txtstyle",action:this.rejectEL.bind(this,e)},{txt:"Reject GOVT",class:"txtstyle1",action:this.updateGOVT.bind(this,e)},{class:"fa fa-eye",action:this.vehicleDetail.bind(this,e)}],t}updateGOVT(e){let t={prdId:e._id,docTypeId:e._doctypeid,isReject:1};e._id&&(this.common.params={title:"Reject GOVT ",description:"<b>&nbsp;Are you sure want to reject<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("Documents/insertDocumentVahenLogs",t).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.common.showToast(e.msg),this.vehDocMismatchSummary()},e=>{this.common.loading--,this.common.showError()}))}))}rejectEL(e){let t={docId:e._docid,docTypeId:e._doctypeid,isVerified:0};e._docid&&(this.common.params={title:"Reject EL ",description:"<b>&nbsp;Are you sure want to reject<b>"},this.modalService.open(D.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(this.common.loading++,this.api.post("Documents/updateVehicleDocumentVerifyFlag",t).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.common.showToast(e.msg),this.vehDocMismatchSummary()},e=>{this.common.loading--,this.common.showError()}))}))}vehicleDetail(e){console.log("VehicleDetail:",e),this.common.params={images:[{name:"image",image:e._img_url},{name:"image",image:e._img_url2},{name:"image",image:e._img_url3}],title:"Image"},this.common.handleModalSize("class","modal-lg","1024"),this.modalService.open(K.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](A.a),s["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["vehdocmismatch"]],decls:8,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Vehicle Document Mismatch Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nb-card-body"),s["\u0275\u0275element"](7,"smart-table",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[c.s,c.v,c.r,g.a],styles:["[_nghost-%COMP%]     .txtstyle, [_nghost-%COMP%]     .txtstyle1{padding:3px 8px;color:#000;font-size:12px}[_nghost-%COMP%]     .txtstyle, [_nghost-%COMP%]     .txtstyle1, [_nghost-%COMP%]     .txtstyle2{margin-top:4px!important;font-style:normal;border-radius:3px;cursor:pointer;margin-right:7px;font-weight:500;-webkit-box-shadow:inset 0 0 3px 1px;box-shadow:inset 0 0 3px 1px}[_nghost-%COMP%]     .txtstyle2{padding:2px 2px 1px;color:#ff4500;font-size:10px}"]}),e})(),canActivate:[Te.b]}]}];let Vo=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(Lo)],a.g]}),e})();var zo=n("vTDv");let No=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[zo.a]]}),e})();var jo=n("FUS3"),Ro=n("X0Jz"),Ho=n("dImq"),Uo=n("qfjS"),Bo=n("d2mR"),Go=n("z+eI"),$o=n("Kkpf"),Yo=n("hOtG");let Wo=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[Vo,zo.a,No,jo.a,Y.c,Y.e,Ro.DocumentsModule,Ho.LorryReceiptModule,Uo.DriverModule,Bo.a,Go.ChartModule,$o.BatteryModule,Yo.ChallanModule]]}),e})()}}]);