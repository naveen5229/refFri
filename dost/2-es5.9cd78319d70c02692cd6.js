!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"4zcd":function(t,a,o){"use strict";o.d(a,"a",(function(){return u}));var i=o("H+bZ"),r=o("OlR4"),l=o("8Y7J"),s=o("tKwJ"),d=o("csNM"),c=o("SVse"),m=o("wD9S");function g(e,t){if(1&e&&l["\u0275\u0275element"](0,"smart-table",11),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("data",n.table.averageWithOdo)("settings",n.table.settings)}}var u=function(){var t=function(){function t(n,a){e(this,t),this.api=n,this.common=a,this.startDate=null,this.endDate=null,this.averageWithOdo=[],this.table={averageWithOdo:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.odoObj={}}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getFuelFillingsAverageWithOdo",value:function(){var e=this;if(null!=this.startDate||null!=this.endDate)if(null!=this.startDate)if(null!=this.endDate)if(this.endDate<this.startDate)this.common.showError("StartDate Should be less then EndDate");else{var t={startTime:this.startDate,endTime:this.endDate};this.common.loading++,this.api.post("Fuel/getFuelFillingsAverageWithOdo",t).subscribe((function(t){if(e.common.loading--,e.averageWithOdo=[],e.table={averageWithOdo:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.odoObj={},t.data){e.averageWithOdo=t.data;var n=e.averageWithOdo[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.averageWithOdo.headings[a]=o}e.table.averageWithOdo.columns=e.getTableColumns(),console.log("Api Response:",t)}}),(function(t){e.common.loading--,console.error("Api Error:",t)}))}else this.common.showError("please Enter endDate");else this.common.showError("Please enter startDate");else this.common.showError("Please enter startDate and endDate")}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.averageWithOdo),this.averageWithOdo.map((function(n){e.odoObj={};for(var a=0;a<e.headings.length;a++)e.odoObj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};t.push(e.odoObj)})),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](r.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-mileage-with-odo"]],decls:24,vars:6,consts:[[1,"row"],[1,"col-sm-3"],[1,"Fuel","Mileage","with","ODO"],[1,"row","mb-3"],[1,"col-1","pr-0"],[1,"col-2"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-1"],[3,"dateTimeValue","isTime","isStart","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],["id","averageWithOdo",3,"data","settings",4,"ngIf"],["id","averageWithOdo",3,"data","settings"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Fuel Mileage With ODO"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body"),l["\u0275\u0275elementStart"](7,"div",2),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275elementStart"](9,"div",4),l["\u0275\u0275elementStart"](10,"label"),l["\u0275\u0275text"](11,"Start Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),l["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",7),l["\u0275\u0275elementStart"](15,"label"),l["\u0275\u0275text"](16,"End Date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",5),l["\u0275\u0275elementStart"](18,"uj-date-time-picker",8),l["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",5),l["\u0275\u0275elementStart"](20,"button",9),l["\u0275\u0275listener"]("click",(function(){return t.getFuelFillingsAverageWithOdo()})),l["\u0275\u0275text"](21,"Submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"div"),l["\u0275\u0275template"](23,g,1,2,"smart-table",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",t.averageWithOdo&&t.averageWithOdo.length))},directives:[s.s,s.v,s.r,d.a,c.u,m.a],styles:[""]}),t}()},"6ugN":function(t,a,o){"use strict";o.d(a,"a",(function(){return v}));var i=o("H+bZ"),r=o("OlR4"),l=o("NTD5"),s=o("Deaf"),d=o("8Y7J"),c=o("SVse"),m=o("G0yt"),g=o("tKwJ"),u=o("s7LF"),p=o("0zba"),h=o("wD9S");function f(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",12),d["\u0275\u0275element"](1,"smart-table",13),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function b(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275elementStart"](1,"h4",15),d["\u0275\u0275text"](2,"No Record Found"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}var v=function(){var t=function(){function t(n,a,o,i,r){e(this,t),this.datePipe=n,this.api=a,this.common=o,this.user=i,this.modalService=r,this.data=[],this.brands=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleBrandTypes()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"vehicleBrandTypes",value:function(){var e=this;this.common.loading++,this.api.get("Vehicles/getVehicleBrandsMaster").subscribe((function(t){e.common.loading--,e.brands=t.data,console.log("Brand Type",e.brands)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"addModalService",value:function(){var e=this;this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.refresh(t)}))}},{key:"refresh",value:function(e){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getModelService(e.response)}},{key:"deleteVehicleModel",value:function(e){var t=this;confirm("Are You Sure you want to delete the Entry??")&&(this.common.loading++,this.api.post("VehicleMaintenance/deleteModelService",{id:e}).subscribe((function(e){t.common.loading--,console.log("response:",e),e.success&&(t.common.showToast("Sucessfully Deleted",1e4),console.log("Brand",t.brandId),t.refresh({response:t.brandId}))}),(function(e){t.common.loading--,console.log(e)})))}},{key:"getModelService",value:function(e){var t=this;e&&(this.common.loading++,this.api.get("VehicleMaintenance/viewModalService?brandId="+e).subscribe((function(e){if(t.common.loading--,t.data=e.data,t.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},t.headings=[],t.valobj={},t.data&&t.data.length){var n=t.data[0];for(var a in n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:t.formatTitle(a),placeholder:t.formatTitle(a)};t.table.data.headings[a]=o}t.table.data.headings.action={title:"Action",placeholder:"Action"},t.table.data.columns=t.getTableColumns()}}),(function(e){t.common.loading--,console.log(e)})))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.action={icons:[{class:" fa fa-trash remove",action:e.deleteVehicleModel.bind(e,n._id)}],action:null},t.push(e.valobj)})),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](c.f),d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](m.r))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["view-modal-service"]],decls:17,vars:4,consts:[[2,"margin","0px","padding-top","0px","border","0px","height","100%"],[2,"padding-bottom","0px"],[1,"container"],[1,"row"],[1,"w-100"],[1,"col-md-1"],[1,"col-md-2"],["display","name","placeholder","Enter Brand",3,"data","preSelected","onSelected"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-body",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"div",3),d["\u0275\u0275elementStart"](4,"form",4),d["\u0275\u0275elementStart"](5,"div",3),d["\u0275\u0275elementStart"](6,"div",5),d["\u0275\u0275elementStart"](7,"label"),d["\u0275\u0275text"](8,"Select Brand"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"div",6),d["\u0275\u0275elementStart"](10,"auto-suggestion",7),d["\u0275\u0275listener"]("onSelected",(function(e){return t.getModelService(e.id),t.brandId=e.id})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](11,"div",8),d["\u0275\u0275elementStart"](12,"div",6),d["\u0275\u0275elementStart"](13,"button",9),d["\u0275\u0275listener"]("click",(function(){return t.addModalService()})),d["\u0275\u0275text"](14," Add Vehicle Modal Service "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](15,f,2,2,"div",10),d["\u0275\u0275template"](16,b,3,0,"div",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](10),d["\u0275\u0275property"]("data",t.brands)("preSelected",null),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngIf",t.data&&t.data.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!t.data||!t.data.length))},directives:[g.s,g.r,u.H,u.s,u.t,p.a,c.u,h.a],styles:[".no-record[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 182px)}"]}),t}()},"9zuT":function(t,a,o){"use strict";o.d(a,"a",(function(){return b}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("8Y7J"),d=o("G0yt"),c=o("tKwJ"),m=o("SVse"),g=o("s7LF"),u=o("csNM"),p=o("wD9S");function h(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275elementStart"](2,"span",13),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().printPDF("vehicleDistance")})),s["\u0275\u0275element"](3,"i",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"span",15),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().printCsv("vehicleDistance")})),s["\u0275\u0275element"](5,"i",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",17),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var b=function(){var t=function(){function t(n,a,o,i){e(this,t),this.api=n,this.common=a,this.user=o,this.modalService=i,this.data={foid:"",startDate:null,endDate:null},this.result=[],this.table=null,this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"getFoList",value:function(e){console.log("user",e),this.data.foid=e.id}},{key:"getDistance",value:function(){var e=this;if(this.data.startDate>this.data.endDate)this.common.showError("StartDate Should be less then Enddate");else{console.log("Start Date: ",this.common.dateFormatter(this.data.startDate,"YYYYMMDD",!0,"-")),console.log("End Date: ",this.common.dateFormatter(this.data.endDate,"YYYYMMDD",!0,"-")),console.log("Data:",this.data);var t={fromTime:this.common.dateFormatter(this.data.startDate,"YYYYMMDD",!0,"-"),tTime:this.common.dateFormatter(this.data.endDate,"YYYYMMDD",!0,"-")};this.common.loading++,this.api.post("vehicles/foVehicleDistance",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.result=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Regno Number",placeholder:"Regno No"},dist:{title:"Distance ",placeholder:"Distance"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=[];return this.result.map((function(t){e.push({regno:{value:t.regno},dist:{value:t.distance}})})),e}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Vehicle Distance",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Vehicle Distance",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-distance"]],decls:19,vars:5,consts:[[2,"margin","0px","padding-top","0px","border","0px"],[1,"row"],[1,"col-sm-10"],[1,"col-sm-2"],[4,"ngIf"],[2,"padding-bottom","0px","min-height","450px"],[1,"w-100","mb-3"],[1,"col-4","pr-0"],[3,"dateTimeValue","onChanged"],[3,"isStart","dateTimeValue","onChanged"],[1,"col-2","offset-md-08"],["type","button",1,"btn","btn-primary","mt-0",3,"click"],["id","vehicleDistance",3,"data","settings",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","vehicleDistance",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"Vehicle Distance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275template"](7,h,6,0,"div",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"nb-card-body",5),s["\u0275\u0275elementStart"](9,"form",6),s["\u0275\u0275elementStart"](10,"div",1),s["\u0275\u0275elementStart"](11,"div",7),s["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),s["\u0275\u0275listener"]("onChanged",(function(e){return t.data.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",7),s["\u0275\u0275elementStart"](14,"uj-date-time-picker",9),s["\u0275\u0275listener"]("onChanged",(function(e){return t.data.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",10),s["\u0275\u0275elementStart"](16,"button",11),s["\u0275\u0275listener"]("click",(function(){return t.getDistance()})),s["\u0275\u0275text"](17,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](18,f,1,2,"smart-table",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.result.length),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("dateTimeValue",t.data.startDate),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.data.endDate),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",t.result&&t.result.length))},directives:[c.s,c.v,m.u,c.r,g.H,g.s,g.t,u.a,p.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},GCkA:function(t,n,a){"use strict";a.d(n,"a",(function(){return r}));var o=a("vTDv"),i=a("8Y7J"),r=function(){var t=function t(){e(this,t)};return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.a]]}),t}()},IarD:function(t,a,o){"use strict";o.d(a,"a",(function(){return v}));var i=o("H+bZ"),r=o("OlR4"),l=o("NTD5"),s=o("RKfx"),d=o("8Y7J"),c=o("SVse"),m=o("G0yt"),g=o("tKwJ"),u=o("s7LF"),p=o("0zba"),h=o("wD9S");function f(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",17),d["\u0275\u0275element"](1,"smart-table",18),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function b(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",19),d["\u0275\u0275elementStart"](1,"h4",20),d["\u0275\u0275text"](2,"No Record Found"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}var v=function(){var t=function(){function t(n,a,o,i,r){e(this,t),this.datePipe=n,this.api=a,this.common=o,this.user=i,this.modalService=r,this.data=[],this.modelId=null,this.models=[],this.brands=[],this.mapping=0,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleBrandTypes()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"vehicleBrandTypes",value:function(){var e=this;this.common.loading++,this.api.get("Vehicles/getVehicleBrandsMaster").subscribe((function(t){e.common.loading--,e.brands=t.data,console.log("Brand Type",e.brands)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"vehicleModelTypes",value:function(){var e=this;this.brandId&&(this.common.loading++,this.api.get("Vehicles/getVehicleModelsMaster?brandId="+this.brandId).subscribe((function(t){e.common.loading--,e.models=t.data,console.log("models Type",e.models)}),(function(t){e.common.loading--,console.log(t)})))}},{key:"addModalService",value:function(){var e=this;this.modelId?(this.common.params={modelId:this.modelId},this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&(e.modelId=t.modelId,e.mapping=-1,e.refresh())}))):this.common.showError("Select Model")}},{key:"refresh",value:function(){this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getSubModelService()}},{key:"deleteVehicleModel",value:function(e,t){var n=this;confirm("Are You Sure you want to delete the Entry??")&&(this.common.loading++,this.api.post("VehicleMaintenance/deleteSubModelService",{id:e}).subscribe((function(e){n.common.loading--,console.log("response:",e),e.success&&(n.common.showToast("Sucessfully Deleted",1e4),console.log("Brand",n.brandId),n.modelId=t,n.mapping=-1,n.refresh())}),(function(e){n.common.loading--,console.log(e)})))}},{key:"resetData",value:function(e){this.modelId=null,document.getElementsByName("suggestion")[1].value=""}},{key:"getSubModelService",value:function(){var e=this;this.brandId||this.modelId?(this.common.loading++,this.api.get("VehicleMaintenance/viewSubModalService?brandId="+(this.brandId||-1)+"&modelId="+(this.modelId||-1)+"&mapping="+this.mapping).subscribe((function(t){if(e.common.loading--,e.data=t.data,e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},e.data&&e.data.length){var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.headings.action={title:"Action",placeholder:"Action"},e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,console.log(t)}))):this.common.showError("Model/Brand not selected")}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.action={icons:[{value:"",class:n._id>0?" fa fa-trash remove":null,action:e.deleteVehicleModel.bind(e,n._id,n._modelid)}],action:null},t.push(e.valobj)})),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](c.f),d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](m.r))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["view-sub-modal-service"]],decls:35,vars:7,consts:[[2,"margin","0px","padding-top","0px","border","0px","height","100%"],[2,"padding-bottom","0px"],[1,"container"],[1,"row"],[1,"w-100"],[1,"col-md-1","pt-2"],[1,"col-md-2"],["display","name","placeholder","Enter Brand",3,"data","preSelected","onSelected"],["display","name","placeholder","Enter Model",3,"data","preSelected","onSelected","change"],["name","mapping",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"col-md-1"],[1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-body",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"div",3),d["\u0275\u0275elementStart"](4,"form",4),d["\u0275\u0275elementStart"](5,"div",3),d["\u0275\u0275elementStart"](6,"div",5),d["\u0275\u0275elementStart"](7,"label"),d["\u0275\u0275text"](8,"Brand"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"div",6),d["\u0275\u0275elementStart"](10,"auto-suggestion",7),d["\u0275\u0275listener"]("onSelected",(function(e){return t.brandId=e.id,t.vehicleModelTypes()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",5),d["\u0275\u0275elementStart"](12,"label"),d["\u0275\u0275text"](13,"Model"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"div",6),d["\u0275\u0275elementStart"](15,"auto-suggestion",8),d["\u0275\u0275listener"]("onSelected",(function(e){return t.modelId=e.id}))("change",(function(e){return t.resetData(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"div",5),d["\u0275\u0275elementStart"](17,"label"),d["\u0275\u0275text"](18,"Mapping"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"div",6),d["\u0275\u0275elementStart"](20,"select",9),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.mapping=e})),d["\u0275\u0275elementStart"](21,"option",10),d["\u0275\u0275text"](22,"Any"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"option",11),d["\u0275\u0275text"](24,"Yes"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"option",12),d["\u0275\u0275text"](26,"No"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](27,"div",13),d["\u0275\u0275elementStart"](28,"button",14),d["\u0275\u0275listener"]("click",(function(){return t.getSubModelService()})),d["\u0275\u0275text"](29," View "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"div",13),d["\u0275\u0275elementStart"](31,"button",14),d["\u0275\u0275listener"]("click",(function(){return t.addModalService()})),d["\u0275\u0275text"](32," Add/Update "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](33,f,2,2,"div",15),d["\u0275\u0275template"](34,b,3,0,"div",16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](10),d["\u0275\u0275property"]("data",t.brands)("preSelected",null),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("data",t.models)("preSelected",null),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngModel",t.mapping),d["\u0275\u0275advance"](13),d["\u0275\u0275property"]("ngIf",t.data&&t.data.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!t.data||!t.data.length))},directives:[g.s,g.r,u.H,u.s,u.t,p.a,u.D,u.r,u.u,u.w,u.G,c.u,h.a],styles:[".no-record[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 184px)}"]}),t}()},JYbL:function(t,a,o){"use strict";o.d(a,"a",(function(){return f}));var i=o("Xy1B"),r=o("H+bZ"),l=o("OlR4"),s=o("qfBg"),d=o("8Y7J"),c=o("G0yt"),m=o("tKwJ"),g=o("SVse"),u=o("wD9S");function p(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",9),d["\u0275\u0275elementStart"](1,"button",15),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().closeModal()})),d["\u0275\u0275elementStart"](2,"span",16),d["\u0275\u0275text"](3,"\xd7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function h(e,t){if(1&e&&d["\u0275\u0275element"](0,"smart-table",17),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var f=function(){var t=function(){function t(n,a,o,i,r){var l;e(this,t),this.api=n,this.common=a,this.modalService=o,this.activeModal=i,this.user=r,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.foid=0,this.isAdmin=0,this.id=null,this.openType=this.common.openType,this.common.openType="page",l=new Date,this.endDate=this.common.dateFormatter(l).split(" ")[0],this.startDate=this.common.dateFormatter(l).split(" ")[0],this.common.params&&(this.foid=this.common.params.foid?this.common.params.foid:0,this.isAdmin=this.common.params.foid?1:0),this.getSummary(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getSummary()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trip status feedback"},this.modalService.open(i.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0]):(t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getSummary",value:function(){var e=this;this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var t="startDate="+this.startDate+"&endDate="+this.endDate+" 23:59:59&foid="+this.foid+"&isAdmin="+this.isAdmin;console.log("params: ",t),this.common.loading++,this.api.get("FoDetails/getFoUserActivitySummary?"+t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.activitySummary=t.data,console.log("activitySummary",e.activitySummary);var n=e.activitySummary[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.activitySummary.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.activitySummary[t][this.headings[n]],class:"black",action:""};e.push(this.valobj)}return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"closeModal",value:function(){this.activeModal.close()}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"User Activity Statistics",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:User Activity Statistics",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](c.r),d["\u0275\u0275directiveInject"](c.b),d["\u0275\u0275directiveInject"](s.a))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["user-activity-status"]],decls:27,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-4"],[1,"col-2","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],["class","col-sm-3",4,"ngIf"],["id","acivitySummary",3,"data","settings",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["id","acivitySummary",3,"data","settings"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",1),d["\u0275\u0275elementStart"](3,"div",2),d["\u0275\u0275elementStart"](4,"h5"),d["\u0275\u0275text"](5,"User Activity Statistics"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"div",3),d["\u0275\u0275elementStart"](7,"span"),d["\u0275\u0275elementStart"](8,"span",4),d["\u0275\u0275listener"]("click",(function(){return t.printPDF("acivitySummary")})),d["\u0275\u0275element"](9,"i",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"span",6),d["\u0275\u0275listener"]("click",(function(){return t.printCsv("acivitySummary")})),d["\u0275\u0275element"](11,"i",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"div",8),d["\u0275\u0275elementStart"](13,"div",1),d["\u0275\u0275elementStart"](14,"div",9),d["\u0275\u0275elementStart"](15,"input",10),d["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),d["\u0275\u0275pipe"](16,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"div",9),d["\u0275\u0275elementStart"](18,"input",11),d["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),d["\u0275\u0275pipe"](19,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",9),d["\u0275\u0275elementStart"](21,"button",12),d["\u0275\u0275listener"]("click",(function(){return t.getSummary()})),d["\u0275\u0275text"](22,"submit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](23,p,4,0,"div",13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"nb-card-body"),d["\u0275\u0275elementStart"](25,"div"),d["\u0275\u0275template"](26,h,1,2,"smart-table",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](15),d["\u0275\u0275property"]("value",d["\u0275\u0275pipeBind2"](16,4,t.startDate,"dd MMM yyyy")),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("value",d["\u0275\u0275pipeBind2"](19,7,t.endDate,"dd MMM yyyy")),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngIf","modal"==t.openType),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",t.activitySummary&&t.activitySummary.length))},directives:[m.s,m.v,g.u,m.r,u.a],pipes:[g.f],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 80px)}.btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px;width:100%}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.close[_ngcontent-%COMP%]{font-size:32px;color:#000}"]}),t}()},Opnw:function(t,a,o){"use strict";o.d(a,"a",(function(){return h}));var i=o("OlR4"),r=o("H+bZ"),l=o("Owt1"),s=o("8Y7J"),d=o("G0yt"),c=o("tKwJ"),m=o("csNM"),g=o("SVse"),u=o("wD9S");function p(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",7),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var h=function(){var t=function(){function t(n,a,o,i,r){e(this,t),this.activeModal=n,this.common=a,this.commonService=o,this.api=i,this.modalService=r,this.startDate=new Date,this.endDate=new Date,this.data=[],this.table=null,this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"getFoWebView",value:function(){var e=this;if(this.startDate>this.endDate)return this.common.showError("Select valid Date");var t="startDate="+this.common.dateFormatter(this.startDate)+"&endDate="+this.common.dateFormatter(this.endDate);this.common.loading++,this.api.get("FoAdmin/getFoAdminWebActivity?"+t).subscribe((function(t){e.common.loading--,e.data=t.data,null==e.data&&(e.data=[],e.table=null),e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{Name:{title:"Name",placeholder:"Name"},Channel:{title:"Channel",placeholder:"Channel"},"Login Count":{title:"Login Count",placeholder:"Login Count"},"Total Dur(Min)":{title:"Total Dur(Min)",placeholder:"Total Dur(Min)"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={Name:{value:n.Name,action:e.activitySummary.bind(e,n)},Channel:{value:n.Channel},"Login Count":{value:null==n["Login Count"]?"-":n["Login Count"]},"Total Dur(Min)":{value:null==n["Total Dur(Min)"]?"-":n["Total Dur(Min)"]}};t.push(a)})),t}},{key:"activitySummary",value:function(e){this.common.params={summary:e,sd:this.startDate,ed:this.endDate},this.modalService.open(l.a,{size:"lg",container:"nb-layout"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](d.b),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["web-activity-summary"]],decls:21,vars:6,consts:[[1,"row"],[1,"col-2"],[1,"col-3"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isStart","isTime","onChanged"],[1,"btn","btn-primary",3,"click"],["id","doubleToll",3,"data","settings",4,"ngIf"],["id","doubleToll",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275elementStart"](2,"h2"),s["\u0275\u0275text"](3,"Web Activity Summary"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"nb-card-body"),s["\u0275\u0275elementStart"](5,"div",0),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"label"),s["\u0275\u0275text"](8,"Start Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",2),s["\u0275\u0275elementStart"](10,"uj-date-time-picker",3),s["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",1),s["\u0275\u0275elementStart"](12,"label"),s["\u0275\u0275text"](13,"End Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",2),s["\u0275\u0275elementStart"](15,"uj-date-time-picker",4),s["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",1),s["\u0275\u0275elementStart"](17,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.getFoWebView()})),s["\u0275\u0275text"](18,"GET VIEW"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](19,p,1,2,"smart-table",6),s["\u0275\u0275element"](20,"br"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1)("isTime",!1),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[c.s,c.v,c.r,m.a,g.u,u.a],styles:[""]}),t}()},VKYg:function(t,a,o){"use strict";o.d(a,"a",(function(){return k}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("cFbe"),d=o("R5DY"),c=o("ia/1"),m=o("fwbA"),g=o("x2st"),u=o("08B9"),p=o("ws3O"),h=o("ee+m"),f=o("Cqln"),b=o("8Y7J"),v=o("G0yt"),x=o("tKwJ"),y=o("SVse"),C=o("wD9S");function M(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"button",10),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().addViaRoutes()})),b["\u0275\u0275text"](1,"Add Routes"),b["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e&&b["\u0275\u0275element"](0,"smart-table",11),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var k=function(){var t=function(){function t(n,a,o,i){e(this,t),this.api=n,this.common=a,this.user=o,this.modalService=i,this.foData=null,this.routeId=null,this.viaRoutes=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewTable(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.viewTable()}},{key:"selectFoUser",value:function(e){this.foData=e.id}},{key:"strictRoutes",value:function(){this.modalService.open(p.a,{size:"lg",container:"nb-layout"})}},{key:"addViaRoutes",value:function(){var e=this;this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.viewTable()}))}},{key:"addPriSecRoute",value:function(){this.modalService.open(h.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"viewTable",value:function(){var e=this;this.viaRoutes=[],this.common.loading++,this.api.get("ViaRoutes/view").subscribe((function(t){if(e.common.loading--,e.viaRoutes=t.data||[],e.viaRoutes.length){var n=e.viaRoutes[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action"),hideSearch:!0};e.table.data.headings.action=i,e.table.data.columns=e.getTableColumns()}}),(function(t){console.error(t),e.common.showError()}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.viaRoutes.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""},"via_points"==e.headings[a]&&(e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openViaRoutePoints.bind(e,n)}),"expenses"==e.headings[a]&&(e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openrouteExpenses.bind(e,n)}),"traffic_kpis"==e.headings[a]&&(e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openrouteKpi.bind(e,n)}),"advances"==e.headings[a]&&(e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openrouteAdvance.bind(e,n)}),"time_table"==e.headings[a]&&(e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.addRouteTimeTable.bind(e,n)}),e.valobj.action={class:"",icons:e.actionIcons(n)};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[];return this.user.permission.edit&&t.push({class:"fas fa-edit mr-3",action:this.editRoute.bind(this,e)}),this.user.permission.delete&&t.push({class:"fa fa-window-close",action:this.remove.bind(this,e)}),t}},{key:"remove",value:function(e){var t=this,n={id:e._id,foid:e._foid};e._id&&(this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(c.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("ViaRoutes/delete",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),t.viewTable()}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"openViaRoutePoints",value:function(e){var t=this;this.common.params={route:e},this.modalService.open(d.a,{size:"lg",container:"nb-layout",windowClass:"mycustomModalClass"}).result.then((function(e){console.log("data",e),t.viewTable()}))}},{key:"openrouteExpenses",value:function(e){var t=this;this.common.params={doc:e},this.modalService.open(m.a,{size:"lg",container:"nb-layout"}).result.then((function(e){t.viewTable()}))}},{key:"openrouteAdvance",value:function(e){var t=this;this.common.params={doc:e},this.modalService.open(g.a,{size:"lg",container:"nb-layout"}).result.then((function(e){t.viewTable()}))}},{key:"openrouteKpi",value:function(e){var t=this;this.common.params={doc:e},this.modalService.open(u.a,{size:"lg",container:"nb-layout"}).result.then((function(e){t.viewTable()}))}},{key:"addRouteTimeTable",value:function(e){this.common.params={routeData:{routeId:e._id,routeName:e.name}},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"editRoute",value:function(e){var t=this,n={id:e._id,routeName:e.name,routeType:e._route_type,kms:e.kms};console.log(".....",e),this.common.params={editRoute:n},this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.viewTable()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(b["\u0275\u0275directiveInject"](i.a),b["\u0275\u0275directiveInject"](r.a),b["\u0275\u0275directiveInject"](l.a),b["\u0275\u0275directiveInject"](v.r))},t.\u0275cmp=b["\u0275\u0275defineComponent"]({type:t,selectors:[["via-routes"]],decls:16,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-4"],[1,"col-2"],["type","submit","name","strict",1,"btn","btn-primary","m-0",3,"click"],[1,"col-3"],["type","submit","name","Vehicle",1,"btn","btn-primary","m-0",3,"click"],["type","button","class","btn btn-primary m-0","name","add","id","add",3,"click",4,"ngIf"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["type","button","name","add","id","add",1,"btn","btn-primary","m-0",3,"click"],[3,"data","settings"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"nb-card",0),b["\u0275\u0275elementStart"](1,"nb-card-header"),b["\u0275\u0275elementStart"](2,"div",1),b["\u0275\u0275elementStart"](3,"div",2),b["\u0275\u0275elementStart"](4,"h5"),b["\u0275\u0275text"](5,"Routes "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"div",3),b["\u0275\u0275elementStart"](7,"button",4),b["\u0275\u0275listener"]("click",(function(){return t.strictRoutes()})),b["\u0275\u0275text"](8,"Strict Mapping"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](9,"div",5),b["\u0275\u0275elementStart"](10,"button",6),b["\u0275\u0275listener"]("click",(function(){return t.addPriSecRoute()})),b["\u0275\u0275text"](11,"Vehicle Routes Mapping"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](12,"div",5),b["\u0275\u0275template"](13,M,2,0,"button",7),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](14,"nb-card-body",8),b["\u0275\u0275template"](15,_,1,2,"smart-table",9),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](13),b["\u0275\u0275property"]("ngIf",t.user.permission.add),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",t.viaRoutes&&t.viaRoutes.length))},directives:[x.s,x.v,y.u,x.r,C.a],styles:['[_nghost-%COMP%]     .fa-window-close{color:red;font-size:18px}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:green;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 36px;font-weight:400;font-size:11px;left:-26px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit Route";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},ahTD:function(t,a,o){"use strict";o.d(a,"a",(function(){return y}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("Xy1B"),d=o("21Dh"),c=o("VJ3l"),m=o("SVse"),g=o("8Y7J"),u=o("G0yt"),p=o("tKwJ"),h=o("s7LF"),f=o("wD9S");function b(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",15),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n.id),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function v(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",16),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function x(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",17),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var y=function(){var t=function(){function t(n,a,o,i,r){e(this,t),this.api=n,this.common=a,this.user=o,this.modalService=i,this.datePipe=r,this.fuelAvgDetails=[],this.showTable=!1,this.Status=[{id:1,name:"ALL"},{id:2,name:"Issues"},{id:3,name:"NonIssues"}],this.today=new Date,this.dates={start:this.common.dateFormatter(new Date(this.today.setDate(this.today.getDate()-28))).split(" ")[0],end:this.common.dateFormatter(new Date).split(" ")[0]},this.id="1",this.table=null,this.getfuelAverageDetails(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getfuelAverageDetails()}},{key:"selectType",value:function(){this.getfuelAverageDetails()}},{key:"getfuelAverageDetails",value:function(){var e=this;console.log("Status:",this.id),this.fuelAvgDetails=[],console.log("api hit"),this.common.loading++,this.api.post("FuelDetails/getVehicleFuelFillingAvg",{startTime:this.dates.start,endTime:this.dates.end,foId:null}).subscribe((function(t){e.common.loading--,console.log(t),e.fuelAvgDetails=t.data||[],null!=e.fuelAvgDetails?e.table=e.setTable():(e.table=null,e.common.showToast("No Record Found!!"))}),(function(t){e.common.loading--,console.log(t)}))}},{key:"setTable",value:function(){return{data:{headings:{vehicleNumber:{title:"Vehicle Number",placeholder:"Vehicle No"},startDate:{title:"Start Date",placeholder:"Start Date",type:"date"},endDate:{title:"End Date",placeholder:"End Date",type:"date"},liters:{title:"Liters",placeholder:"Liters"},amount:{title:"Amounts",placeholder:"Amounts"},average:{title:"Average",placeholder:"Average"},totalDistance:{title:"Total Distance",placeholder:"Total Distance"},loadingDistance:{title:"Loading Distance",placeholder:"Loading Distance"},unloadingDistance:{title:"Unloading Distance",placeholder:"Unloading Distance"},location:{title:"Location Trail",placeholder:"Location Trail"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return"1"==this.id&&this.fuelAvgDetails.map((function(n){var a={vehicleNumber:{value:n.reg_number},startDate:{value:e.datePipe.transform(n.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=n.enddate?e.datePipe.transform(n.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:n.liters,class:n.liters?"blue":"black",action:e.getDetails.bind(e,n)},amount:{value:n.amounts},average:{value:n.avg},totalDistance:{value:n.total_distance,class:n.total_distance?"blue":"black",action:e.openRouteMapper.bind(e,n)},loadingDistance:{value:n.loading_distance},unloadingDistance:{value:n.unloading_distance},location:{value:n.location_trail},style:{background:n.is_probable_issue?"lightcoral":""}};t.push(a)})),"2"==this.id&&(this.fuelAvgDetails=this.fuelAvgDetails.filter((function(e){return 1==e.is_probable_issue})),console.log("test",this.fuelAvgDetails),this.fuelAvgDetails.map((function(n){var a={vehicleNumber:{value:n.reg_number},startDate:{value:e.datePipe.transform(n.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=n.enddate?e.datePipe.transform(n.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:n.liters,class:n.liters?"blue":"black",action:e.getDetails.bind(e,n)},amount:{value:n.amounts},average:{value:n.avg},totalDistance:{value:n.total_distance,class:n.total_distance?"blue":"black",action:e.openRouteMapper.bind(e,n)},loadingDistance:{value:n.loading_distance},unloadingDistance:{value:n.unloading_distance},location:{value:n.location_trail},style:{background:n.is_probable_issue?"lightcoral":""}};t.push(a)}))),"3"==this.id&&(this.fuelAvgDetails=this.fuelAvgDetails.filter((function(e){return null==e.is_probable_issue})),console.log("test",this.fuelAvgDetails),this.fuelAvgDetails.map((function(n){var a={vehicleNumber:{value:n.reg_number},startDate:{value:e.datePipe.transform(n.startdate,"dd-MMM hh:mm a")},endDate:{value:null!=n.enddate?e.datePipe.transform(n.enddate,"dd-MMM hh:mm a"):"------"},liters:{value:n.liters,class:n.liters?"blue":"black",action:e.getDetails.bind(e,n)},amount:{value:n.amounts},average:{value:n.avg},totalDistance:{value:n.total_distance,class:n.total_distance?"blue":"black",action:e.openRouteMapper.bind(e,n)},loadingDistance:{value:n.loading_distance},unloadingDistance:{value:n.unloading_distance},location:{value:n.location_trail}};t.push(a)}))),t}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"fuel-avg"},this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&(t.dates[e]=t.common.dateFormatter(n.date).split(" ")[0],console.log("Date:",t.dates[e]))}))}},{key:"getDetails",value:function(e){var t=this;this.common.params=e,console.log("Param",this.common.params),this.modalService.open(d.a,{size:"lg",container:"nb-layout"}).result.then((function(e){e.update&&t.getfuelAverageDetails()}))}},{key:"openRouteMapper",value:function(e){var t;this.common.handleModalHeightWidth("class","modal-lg","200","1500"),t=null!=e.enddate?e.enddate:this.common.dateFormatter(new Date),console.log("date",t),this.common.params={vehicleId:e.vehicle_id,vehicleRegNo:e.reg_number,fromTime:e.startdate,toTime:t},console.log("open Route Mapper modal",this.common.params),this.modalService.open(c.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Fuel Mileage",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Fuel Mileage",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](r.a),g["\u0275\u0275directiveInject"](l.a),g["\u0275\u0275directiveInject"](u.r),g["\u0275\u0275directiveInject"](m.f))},t.\u0275cmp=g["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-average-analysis"]],features:[g["\u0275\u0275ProvidersFeature"]([m.f])],decls:27,vars:12,consts:[[1,"row"],[1,"col-sm-3"],[1,"col-sm-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-2"],["type","text","autocomplete","off","placeholder","Select Start Date","name","start-date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","Select End Date","name","end-date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["name","Status",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["id","submit","name","submit",1,"btn","btn-primary","w-100",2,"margin","0px","cursor","pointer",3,"click"],["id","fuelMileage",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"value"],["id","fuelMileage",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Fuel Mileage"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"span"),g["\u0275\u0275elementStart"](8,"span",3),g["\u0275\u0275listener"]("click",(function(){return t.printPDF("fuelMileage")})),g["\u0275\u0275element"](9,"i",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"span",5),g["\u0275\u0275listener"]("click",(function(){return t.printCsv("fuelMileage")})),g["\u0275\u0275element"](11,"i",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",7),g["\u0275\u0275elementStart"](13,"input",8),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](14,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",7),g["\u0275\u0275elementStart"](16,"input",9),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](17,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",7),g["\u0275\u0275elementStart"](19,"select",10),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.id=e}))("change",(function(){return t.selectType()})),g["\u0275\u0275template"](20,b,2,2,"option",11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",7),g["\u0275\u0275elementStart"](22,"button",12),g["\u0275\u0275listener"]("click",(function(){return t.getfuelAverageDetails()})),g["\u0275\u0275text"](23,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"nb-card-body"),g["\u0275\u0275template"](25,v,1,2,"smart-table",13),g["\u0275\u0275template"](26,x,2,0,"div",14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](13),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](14,6,t.dates.start,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](17,9,t.dates.end,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.id),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.Status),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",t.fuelAvgDetails&&t.fuelAvgDetails.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",null==t.fuelAvgDetails))},directives:[p.s,p.v,h.D,h.r,h.u,m.t,p.r,m.u,h.w,h.G,f.a],pipes:[m.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 8px;font-weight:400;width:110px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 8px!important;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 210px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto;word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700;cursor:pointer}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .indianred{background-color:#f08080;color:#fff}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 192px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},axIL:function(t,a,o){"use strict";o.d(a,"a",(function(){return v}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("j/M5"),d=o("qcv8"),c=o("jjvj"),m=o("NUr5"),g=o("8Y7J"),u=o("G0yt"),p=o("tKwJ"),h=o("SVse"),f=o("wD9S");function b(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",5),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var v=function(){var t=function(){function t(n,a,o,i){e(this,t),this.api=n,this.common=a,this.user=o,this.modalService=i,this.title="",this.showTable=!1,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getVehiclesDetail()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getVehiclesDetail()}},{key:"getVehiclesDetail",value:function(){var e=this;this.common.loading++,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.api.get("Vehicles/vehiclesDetailView").subscribe((function(t){if(e.common.loading--,e.data=t.data,console.log("data:"),console.log(e.data),null!=e.data){var n=e.data[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.data=[]}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.data.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Action"==this.headings[n]?{value:"",isHTML:!1,action:null,icons:this.actionIcons(this.data[t])}:{value:this.data[t][this.headings[n]],class:"black",action:""};e.push(this.valobj)}return e}},{key:"actionIcons",value:function(e){return[{class:"fa fa-pencil-square-o  edit-btn",action:this.OpenVehicleNextServiceModal.bind(this,e)},{class:"icon fas fa-tachometer-alt",action:this.openOdoMeter.bind(this,e)},{class:"icon fa fa-edit",action:this.OpenVehicleupdateModal.bind(this,e)}]}},{key:"openOdoMeter",value:function(e){console.log("data",e),this.common.params={vehicleId:e._vid,regno:e.Vehicle},console.log("Param",this.common.params),this.modalService.open(c.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"OpenVehicleNextServiceModal",value:function(e){var t=this;this.common.params={vehicleId:e._vid,vehicleNo:e.Vehicle},console.log("vehicle",e),this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.data>0&&t.getVehiclesDetail(),console.log("response----",e.data)}))}},{key:"openNextBulkUpdateModal",value:function(){this.modalService.open(d.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}},{key:"OpenVehicleupdateModal",value:function(e){var t=this;this.common.params={vehicle:{id:e._vid}},console.log("vehicle",e),this.modalService.open(m.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.data&&t.getVehiclesDetail(),console.log("response----",e.data)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](r.a),g["\u0275\u0275directiveInject"](l.a),g["\u0275\u0275directiveInject"](u.r))},t.\u0275cmp=g["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicles"]],decls:12,vars:1,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"btn","btn-primary","m-0","bulk","pt-2","pb-2","rounded-sm",3,"click"],["id","vehicle",3,"data","settings",4,"ngIf"],["id","vehicle",3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Vehicles"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.openNextBulkUpdateModal()})),g["\u0275\u0275text"](8,"Bulk Update Service Master"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"nb-card-body"),g["\u0275\u0275template"](10,b,1,2,"smart-table",4),g["\u0275\u0275element"](11,"br"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,h.u,f.a],styles:['.bulk[_ngcontent-%COMP%]{float:right;height:36px;font-size:12px;font-weight:900}[_nghost-%COMP%]     .tableFixHead table tr td i{margin-right:5px}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o{color:red}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span:before{content:"Change Service Time/Kms";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span:before{content:"Add/View Odo";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td .fa-tachometer-alt:hover span{display:block}']}),t}()},baNc:function(t,a,o){"use strict";o.d(a,"a",(function(){return f}));var i=o("H+bZ"),r=o("OlR4"),l=o("msMB"),s=o("m9e2"),d=o("RxAH"),c=o("8Y7J"),m=o("G0yt"),g=o("tKwJ"),u=o("SVse"),p=o("wD9S");function h(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",4),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var f=function(){var t=function(){function t(n,a,o){e(this,t),this.api=n,this.common=a,this.modalService=o,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.challanRequest=[],this.getChallanPaymentRequest(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getChallanPaymentRequest()}},{key:"getChallanPaymentRequest",value:function(){var e=this;this.common.loading++,this.api.get("Challans/getChallanPaymentRequest").subscribe((function(t){console.log("Res:",t),e.common.loading--,e.clearAllTableData(),t.data?(e.challanRequest=t.data,e.setTable()):e.common.showError("Data Not Found")}),(function(t){e.common.loading--,e.common.showError(t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.challanRequest[0]),columns:this.getColumns(this.challanRequest,this.challanRequest[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]="Action"==i?{value:"",action:null,icons:[{class:1==e._req_status?"fas fa-edit mr-2":null,action:n.payChallanPayment.bind(n,e)},{class:e._ch_doc_id?"far fa-file-alt mr-2":"far fa-file-alt text-color",action:n.paymentDocImage.bind(n,e._ch_doc_id)},{class:2==e._req_status?"fa fa-upload mr-2":null,action:n.confirmation.bind(n,e)}]}:{value:e[i],class:"black",action:""};a.push(o)})),a}},{key:"paymentDocImage",value:function(e){var t=this,n="";if(e){var a="docId="+e;this.common.loading++,this.api.get("Documents/getRepositoryImages?"+a).subscribe((function(e){t.common.loading--,console.log(e.data),e.data&&(n=e.data[0].url,t.common.params={pdfUrl:n,title:"Challan"},console.log("params",t.common.params),t.modalService.open(s.a,{size:"lg",container:"nb-layout"}))}),(function(e){t.common.loading--,console.log(e)}))}}},{key:"payChallanPayment",value:function(e){var t=this;this.common.params={regNo:e.Regno,vehicleId:e._vehid,chDate:e["Challan Date"],chNo:e.ChallanNo,amount:e.Amount,rowId:e._id,mainBalance:0},this.modalService.open(l.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("false",e.response),e.response&&t.getChallanPaymentRequest()}))}},{key:"clearAllTableData",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"confirmation",value:function(e){var t=this;this.modalService.open(d.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(n){n.response&&(console.log("data",n),t.uploadImg(e,n.file,n.fileType))}))}},{key:"uploadImg",value:function(e,t,n){var a=this;if(console.log("file",n),"image/jpeg"!=n&&"image/jpg"!=n&&"image/png"!=n&&"application/pdf"!=n&&"application/msword"!=n&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=n&&"application/vnd.ms-excel"!=n&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=n)return this.common.showError("valid Format Are : jpeg,png,jpg,doc,docx,csv,xlsx,pdf"),!1;this.common.showToast("SuccessFull File Selected");var o={challanId:e._id,vehId:e._vehid,status:3,doc1:t};this.common.loading++,this.api.post("Challans/completeChallanPayment",o).subscribe((function(e){a.common.loading--,console.log(e.data),!0===e.success?(a.common.showToast(e.msg),a.getChallanPaymentRequest()):a.common.showError(e.msg)}),(function(e){a.common.loading--,console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](m.r))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["challan-payment-request"]],decls:7,vars:1,consts:[[2,"border","0px","height","100%"],[1,"challan-payment"],[1,"challan_payment"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["id","PaymentRequest",3,"data","settings"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header",1),c["\u0275\u0275elementStart"](2,"h5"),c["\u0275\u0275text"](3,"Challan Payment Request"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"nb-card-body"),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275template"](6,h,1,2,"smart-table",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",t.challanRequest&&t.challanRequest.length))},directives:[g.s,g.v,g.r,u.u,p.a],styles:['.fa-edit[_ngcontent-%COMP%]{color:#00f}[_nghost-%COMP%]     td i.fa-file-alt{background-color:#04a9f5;color:#fff;border-radius:3px;position:relative;padding:11px 5px 5px;height:29px}[_nghost-%COMP%]     td i.fa-file-alt:hover span{display:block}[_nghost-%COMP%]     td i.fa-file-alt span{position:absolute;display:none;padding:11px 30px;left:-22px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-file-alt span:before{content:"Challan";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-file-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-file-alt:hover span{display:block}[_nghost-%COMP%]    .fa-file-alt.text-color{cursor:not-allowed;opacity:.5}[_nghost-%COMP%]     .fa-edit{color:#17a05d;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 25px;font-weight:400;font-size:11px;left:-7px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#17a05d;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #17a05d;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]     .fa-upload{color:#7491c5;font-size:18px}[_nghost-%COMP%]     .fa-upload span{position:absolute;display:none;padding:10px 25px;font-weight:400;font-size:11px;left:-7px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-upload span:before{content:"Upload Receipt";display:block;position:absolute;top:0;left:0;background-color:#7491c5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-upload span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #7491c5;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-upload:hover span{display:block}']}),t}()},d2mR:function(t,n,a){"use strict";a.d(n,"a",(function(){return c})),a("hit9"),a("ahTD");var o=a("vTDv"),i=a("GCkA"),r=a("FUS3"),l=a("i+lE"),s=(a("vjOA"),a("bG9B"),a("Zw/Q"),a("pfN2"),a("kSDO"),a("se9s"),a("9zuT"),a("JYbL"),a("6ugN"),a("IarD"),a("axIL"),a("VKYg"),a("svlw"),a("z+eI")),d=(a("eHBT"),a("4zcd"),a("Opnw"),a("mdFJ"),a("baNc"),a("g/MX"),a("suYr"),a("syhs"),a("8Y7J")),c=function(){var t=function t(){e(this,t)};return t.\u0275mod=d["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[],imports:[[o.a,i.a,r.a,l.c,l.e,s.ChartModule]]}),t}()},eHBT:function(t,a,o){"use strict";o.d(a,"a",(function(){return y}));var i=o("OlR4"),r=o("H+bZ"),l=o("tUv6"),s=o("6Jfz"),d=o("Ydk2"),c=o("8Y7J"),m=o("G0yt"),g=o("tKwJ"),u=o("csNM"),p=o("s7LF"),h=o("SVse"),f=o("wD9S");function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",11),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275property"]("value",n.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function v(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",11),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275property"]("value",n.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function x(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",12),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var y=function(){var t=function(){function t(n,a,o,i,r){e(this,t),this.activeModal=n,this.common=a,this.commonService=o,this.api=i,this.modalService=r,this.data=[],this.branch=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-60)),this.range=[{name:"50KM",id:"50"},{name:"100KM",id:"100"},{name:"200KM",id:"200"},{name:"300KM",id:"300"}],this.RangeId=null,this.BranchID=null,this.branchId=null,this.radius=null,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getBranchList(),new Date,console.log("branchId",this.BranchID),console.log("rangeId:",this.RangeId),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getBranchList()}},{key:"getBranch",value:function(){this.branchId=this.BranchID}},{key:"getRange",value:function(){}},{key:"nearByPods",value:function(){var e=this;this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var t={startDate:this.startDate,endDate:this.common.dateFormatter1(this.endDate),branchId:this.BranchID,radius:this.RangeId};console.log("params",t),this.common.loading++,this.api.post("LorryReceiptsOperation/getNearByPods",t).subscribe((function(t){e.common.loading--,e.data=t.data,null==e.data&&(e.data=[],e.table=null);var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]="Action"==e.headings[a]?{value:"",action:null,icons:[{class:"fa fa-user",action:e.change.bind(e,n)},{class:"fa fa-map-marker",action:e.view.bind(e,n)},{class:"fa fa-picture-o",action:e.LRimage.bind(e,n._img_url2)},{class:"fa fa-image",action:e.getPodImage.bind(e,n._doc_id)}]}:{value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"getBranchList",value:function(){var e=this;this.common.loading++,this.api.post("Suggestion/GetBranchList",{}).subscribe((function(t){e.common.loading--,e.branch=t.data}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"change",value:function(e){var t=this;this.common.params={details:e},this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.nearByPods()}))}},{key:"view",value:function(e){var t={lng:e._long,lat:e._lat};console.log("location:",t),this.common.params={location:t,title:"Location"},this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"LRimage",value:function(e){this.common.params={images:[{name:"Lr",image:e}],title:"Lr Image"},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"lrModal"})}},{key:"getPodImage",value:function(e){console.log("val===",e);var t={refid:"",reftype:"",doctype:"",docid:e};console.log("receipts",t),this.common.params={refdata:t,title:"docImage"},this.modalService.open(l.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](m.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](m.r))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["nearby-pods"]],decls:33,vars:10,consts:[[1,"row","mb-3"],[1,"col-5"],[1,"row","align-items-center"],[1,"col-2"],[1,"col-4"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isTime","isStart","onChanged"],[1,"form-control",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","add",3,"click"],[3,"data","settings",4,"ngIf"],[3,"value"],[3,"data","settings"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"div",2),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"label"),c["\u0275\u0275text"](7,"Start Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",4),c["\u0275\u0275elementStart"](9,"uj-date-time-picker",5),c["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",3),c["\u0275\u0275elementStart"](11,"label"),c["\u0275\u0275text"](12,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",4),c["\u0275\u0275elementStart"](14,"uj-date-time-picker",6),c["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",1),c["\u0275\u0275elementStart"](16,"div",2),c["\u0275\u0275elementStart"](17,"div",3),c["\u0275\u0275elementStart"](18,"label"),c["\u0275\u0275text"](19,"Branch"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",4),c["\u0275\u0275elementStart"](21,"select",7),c["\u0275\u0275listener"]("change",(function(){return t.getBranch()}))("ngModelChange",(function(e){return t.BranchID=e})),c["\u0275\u0275template"](22,b,2,2,"option",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",3),c["\u0275\u0275elementStart"](24,"label"),c["\u0275\u0275text"](25,"Range"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",4),c["\u0275\u0275elementStart"](27,"select",7),c["\u0275\u0275listener"]("change",(function(){return t.getRange()}))("ngModelChange",(function(e){return t.RangeId=e})),c["\u0275\u0275template"](28,v,2,2,"option",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",3),c["\u0275\u0275elementStart"](30,"button",9),c["\u0275\u0275listener"]("click",(function(){return t.nearByPods()})),c["\u0275\u0275text"](31,"submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](32,x,1,2,"smart-table",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngModel",t.BranchID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.branch),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.RangeId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.range),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[g.s,g.r,u.a,p.D,p.r,p.u,h.t,h.u,p.w,p.G,f.a],styles:['button.add[_ngcontent-%COMP%]{border-radius:3px;text-transform:capitalize;padding:7px 15px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user{color:#20d320}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span{position:absolute;display:none;padding:10px 43px;font-weight:400;font-size:11px;left:-38px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:before{content:"Change State";display:block;position:absolute;top:0;left:0;background-color:#20d320;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #20d320;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker{color:red}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span:before{content:"Loacation";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-map-marker:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o{color:#0b5fff}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span:before{content:"Lr Image";display:block;position:absolute;top:0;left:0;background-color:#0b5fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0b5fff;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-picture-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image{color:#0b5fff}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-18px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span:before{content:"POD";display:block;position:absolute;top:0;left:0;background-color:#0b5fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0b5fff;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-image:hover span{display:block}']}),t}()},"g/MX":function(t,a,o){"use strict";o.d(a,"a",(function(){return h}));var i=o("H+bZ"),r=o("OlR4"),l=o("x7AG"),s=o("8Y7J"),d=o("G0yt"),c=o("tKwJ"),m=o("s7LF"),g=o("SVse"),u=o("wD9S");function p(e,t){if(1&e&&s["\u0275\u0275element"](0,"smart-table",11),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var h=function(){var t=function(){function t(n,a,o){e(this,t),this.api=n,this.common=a,this.modalService=o,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.challanRequest=[],this.gpsRequestType=1,this.getMvGpsDetails(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getMvGpsDetails()}},{key:"requestTypeChange",value:function(){this.clearAllTableData(),this.getMvGpsDetails()}},{key:"getMvGpsDetails",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getMvGpsDetails?reqType="+this.gpsRequestType).subscribe((function(t){console.log("Res:",t),e.common.loading--,e.clearAllTableData(),t.data?(e.challanRequest=t.data,e.setTable()):e.common.showError("Data Not Found")}),(function(t){e.common.loading--,e.common.showError(t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.challanRequest[0]),columns:this.getColumns(this.challanRequest,this.challanRequest[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]="Action"==i?{value:"",action:null,icons:[{class:1==e._status?"":"far fa-edit",action:1==e._status?"":n.addGpsWebUrl.bind(n,e)}]}:{value:e[i],class:"black",action:""};a.push(o)})),a}},{key:"addGpsWebUrl",value:function(e){var t=this;console.log("data",e),this.common.params={gpsData:{rowId:e._id,url:e.Url,supplierName:e["Supplier Name"],supplierId:e._supplierid}},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getMvGpsDetails()}))}},{key:"clearAllTableData",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](i.a),s["\u0275\u0275directiveInject"](r.a),s["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["mv-gps-api-req"]],decls:17,vars:2,consts:[[2,"border","0px","height","100%"],[1,"gps-request"],[1,"row"],[1,"col-10"],[1,"col-2"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],[1,"mv-gps-api-req"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["id","PaymentRequest",3,"data","settings"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"h5"),s["\u0275\u0275text"](5,"MV GPS API Request"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"select",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gpsRequestType=e}))("change",(function(){return t.requestTypeChange()})),s["\u0275\u0275elementStart"](8,"option",6),s["\u0275\u0275text"](9,"All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"option",7),s["\u0275\u0275text"](11,"Non-Approved"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"option",8),s["\u0275\u0275text"](13,"Approved"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"nb-card-body"),s["\u0275\u0275elementStart"](15,"div",9),s["\u0275\u0275template"](16,p,1,2,"smart-table",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.gpsRequestType),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",t.challanRequest&&t.challanRequest.length))},directives:[c.s,c.v,m.D,m.r,m.u,m.w,m.G,c.r,g.u,u.a],styles:[""]}),t}()},hit9:function(t,a,o){"use strict";o.d(a,"a",(function(){return k}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("yd97"),d=o("F+35"),c=o("Xy1B"),m=o("cSsx"),g=o("nFJE"),u=o("uxEC"),p=o("1+iI"),h=o("8Y7J"),f=o("SVse"),b=o("G0yt"),v=o("tKwJ"),x=o("wD9S");function y(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",23),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addFuel()})),h["\u0275\u0275text"](1,"Add Fuel"),h["\u0275\u0275elementEnd"]()}}function C(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",24),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().addCsv()})),h["\u0275\u0275text"](1,"Import CSV"),h["\u0275\u0275elementEnd"]()}}function M(e,t){if(1&e&&h["\u0275\u0275element"](0,"smart-table",25),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function _(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",26),h["\u0275\u0275text"](1," No Data available On That Time Period! "),h["\u0275\u0275elementEnd"]())}var k=function(){var t=function(){function t(n,a,o,i,r,l){var s;e(this,t),this.api=n,this.datePipe=a,this.common=o,this.user=i,this.modalService=r,this.csvService=l,this.fillingData=[],this.headings=[],this.table={data:{headings:{pump:{title:"Pump",placeholder:"Pump"},date:{title:"Date",placeholder:"Date"},regno:{title:"Regno",placeholder:"Regno"},litres:{title:"Litres",placeholder:"Litres"},rate:{title:"Rate",placeholder:"Rate"},amount:{title:"Amount",placeholder:"Amount"},addtime:{title:"Addtime",placeholder:"Addtime"},username:{title:"Username",placeholder:"Username"},refName:{title:"RefName",placeholder:"RefName"}},columns:[]},settings:{hideHeader:!0}},this.sizeIndex=0,this.dates={start:this.common.dateFormatter(new Date),end:this.common.dateFormatter(new Date)},s=new Date,this.dates.end=this.common.dateFormatter(s).split(" ")[0],this.dates.start=this.common.dateFormatter(new Date(s.getFullYear(),s.getMonth(),1)).split(" ")[0],this.getFillingData(),this.common.refresh=this.refresh.bind(this),console.log("Page Type:",i._pages)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getFillingData()}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getFillingData",value:function(){var e=this,t={startTime:this.dates.start,endTime:this.dates.end+" 23:59:59"};this.common.loading++;this.user._details.id;"admin"==this.user._loggedInBy&&this.user._customer.id,this.fillingData=[],this.api.post("FuelDetails/getFuelFillingEntries",t).subscribe((function(t){e.common.loading--,e.fillingData=t.data||[],console.info("filling Data",e.fillingData),console.log(e.table.data.headings),e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"openData",value:function(e){var t=this;this.common.params={rowfilling:e,title:"Edit Fuel Filling"},this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getFillingData()}))}},{key:"addFuel",value:function(){var e=this;this.common.params={rowfilling:{fdate:null,litres:null,is_full:null,regno:null,rate:null,amount:null,pp:null,fuel_station_id:null,vehicle_id:null,id:null,ref_type:null,ref_id:null},title:"Add Fuel Filling",sizeIndex:this.sizeIndex},this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getFillingData()}))}},{key:"addCsv",value:function(){this.modalService.open(d.a,{container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.fillingData.map((function(n){var a={pump:{value:n.pp,class:"blue",action:e.user.permission.edit&&e.openData.bind(e,n)},date:{value:e.datePipe.transform(n.date,"dd MMM yyyy"),class:"blue",action:e.openFuelEntry.bind(e,n)},regno:{value:n.regno},litres:{value:n.litres},rate:{value:n.rate},amount:{value:n.amount},addtime:{value:e.datePipe.transform(n.addtime,"dd MMM yyyy")},username:{value:n.username},refName:{value:n.refnum},rowActions:{}};t.push(a)})),t}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"fuel-avg"},this.modalService.open(c.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&(t.dates[e]=t.common.dateFormatter(n.date).split(" ")[0],console.log("Date:",t.dates[e]),t.dates.start&&t.dates.end&&t.getFillingData())}))}},{key:"openFuelEntry",value:function(e){this.common.params={vid:e.vehicle_id,datetime:this.common.dateFormatter(e.date).split(" ")[0]},this.modalService.open(m.a,{size:"lg",container:"nb-layout"})}},{key:"getFuelStation",value:function(){this.modalService.open(g.a,{size:"lg",container:"nb-layout"}),this.common.handleModalSize("class","modal-lg","1200")}},{key:"getFuelMapping",value:function(){var e=this;this.common.loading++,this.api.get("Fuel/mappingFillingStationEntries?").subscribe((function(t){e.common.loading--,console.log("Mapping:",t.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getisFuel",value:function(){var e=this;this.common.loading++,this.api.get("Fuel/mappingIsFullFilling?").subscribe((function(t){e.common.loading--,console.log("Mapping:",t.data)}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"getemptyFueldetails",value:function(){this.modalService.open(u.a,{size:"sm",container:"nb-layout",backdrop:"static"})}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Fuel Filling",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a=[{customer:"Customer : "+n.data.name},{report:"Report : Fuel Filling"},{period:"Report Date :"+t.dates.start+" to "+t.dates.end},{date:"Generated On :"+t.common.dateFormatter(new Date)}];t.csvService.byMultiIds([e],"Dashboard",a)}),(function(e){t.common.loading--,console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h["\u0275\u0275directiveInject"](i.a),h["\u0275\u0275directiveInject"](f.f),h["\u0275\u0275directiveInject"](r.a),h["\u0275\u0275directiveInject"](l.a),h["\u0275\u0275directiveInject"](b.r),h["\u0275\u0275directiveInject"](p.a))},t.\u0275cmp=h["\u0275\u0275defineComponent"]({type:t,selectors:[["fuel-fillings"]],decls:35,vars:12,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-6"],[1,"col-md-6","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[2,"padding-top","0px"],[1,"col-12"],[1,"fuel_filling_button"],["id","add-fuel","name","add-fuel","class","btn btn-primary",3,"click",4,"ngIf"],["id","import-csv","name","import-csv","class","btn btn-primary",3,"click",4,"ngIf"],["id","fuel-station","name","fuel-station",1,"btn","btn-primary",3,"click"],["id","fuel-mapping","name","fuel-mapping",1,"btn","btn-primary",3,"click"],["id","fuel-isFuel","name","fuel-isFuel",1,"btn","btn-primary",3,"click"],["id","empty-fuel-details","name","empty-fuel-details",1,"btn","btn-primary",3,"click"],[1,"row","mb-2"],[1,"col-sm-2"],["type","text","autocomplete","off","placeholder","Select Start Date","name","start-date",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","Select End Date","name","end-date",1,"form-control",2,"cursor","pointer",3,"value","click"],["id","tblfillings",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","add-fuel","name","add-fuel",1,"btn","btn-primary",3,"click"],["id","import-csv","name","import-csv",1,"btn","btn-primary",3,"click"],["id","tblfillings",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"nb-card",0),h["\u0275\u0275elementStart"](1,"nb-card-header"),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275elementStart"](3,"div",2),h["\u0275\u0275elementStart"](4,"h4"),h["\u0275\u0275text"](5,"Fuel Fillings"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",3),h["\u0275\u0275elementStart"](7,"span"),h["\u0275\u0275elementStart"](8,"span",4),h["\u0275\u0275listener"]("click",(function(){return t.printPDF("tblfillings")})),h["\u0275\u0275element"](9,"i",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"span",6),h["\u0275\u0275listener"]("click",(function(){return t.printCsv("tblfillings")})),h["\u0275\u0275element"](11,"i",7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"nb-card-body",8),h["\u0275\u0275elementStart"](13,"div",1),h["\u0275\u0275elementStart"](14,"div",9),h["\u0275\u0275elementStart"](15,"div",10),h["\u0275\u0275template"](16,y,2,0,"button",11),h["\u0275\u0275template"](17,C,2,0,"button",12),h["\u0275\u0275elementStart"](18,"button",13),h["\u0275\u0275listener"]("click",(function(){return t.getFuelStation()})),h["\u0275\u0275text"](19,"Fuel Station"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](20,"button",14),h["\u0275\u0275listener"]("click",(function(){return t.getFuelMapping()})),h["\u0275\u0275text"](21,"Fuel Station Entries Mapping"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"button",15),h["\u0275\u0275listener"]("click",(function(){return t.getisFuel()})),h["\u0275\u0275text"](23,"is FullMapping"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"button",16),h["\u0275\u0275listener"]("click",(function(){return t.getemptyFueldetails()})),h["\u0275\u0275text"](25,"Tank Empty Details"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](26,"div",17),h["\u0275\u0275elementStart"](27,"div",18),h["\u0275\u0275elementStart"](28,"input",19),h["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),h["\u0275\u0275pipe"](29,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](30,"div",18),h["\u0275\u0275elementStart"](31,"input",20),h["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),h["\u0275\u0275pipe"](32,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](33,M,1,2,"smart-table",21),h["\u0275\u0275template"](34,_,2,0,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](16),h["\u0275\u0275property"]("ngIf",t.user.permission.add),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","admin"==t.user._loggedInBy),h["\u0275\u0275advance"](11),h["\u0275\u0275property"]("value",h["\u0275\u0275pipeBind2"](29,6,t.dates.start,"dd MMM yyyy")),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("value",h["\u0275\u0275pipeBind2"](32,9,t.dates.end,"dd MMM yyyy")),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",t.fillingData&&t.fillingData.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",0==t.fillingData.length))},directives:[v.s,v.v,v.r,f.u,x.a],pipes:[f.f],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 272px)!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.fuel_filling_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;text-transform:capitalize;font-size:14px;margin-left:0;margin-top:0;margin-bottom:10px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},kSDO:function(t,a,o){"use strict";o.d(a,"a",(function(){return M}));var i=o("OlR4"),r=o("H+bZ"),l=o("Ig2y"),s=o("qfBg"),d=o("7xJQ"),c=o("8Y7J"),m=o("G0yt"),g=o("SVse"),u=o("tKwJ"),p=o("csNM"),h=o("z+eI"),f=o("s7LF"),b=o("wD9S");function v(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",22),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275property"]("value",n),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n)}}function x(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275elementStart"](1,"select",20),c["\u0275\u0275listener"]("ngModelChange",(function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().selectedModal=e}))("change",(function(){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().mapChartDataAccordingModal()})),c["\u0275\u0275template"](2,v,2,2,"option",21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var a=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",a.selectedModal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",a.modals)}}function y(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",23),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function C(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",24),c["\u0275\u0275text"](1," No Data available ! "),c["\u0275\u0275elementEnd"]())}var M=function(){var t=function(){function t(n,a,o,i,r,l,s){e(this,t),this.common=n,this.api=a,this.modalService=o,this.activeModal=i,this.dateService=r,this.user=l,this.datePipe=s,this.startTime=null,this.endTime=null,this.consolFuelAvg=[],this.showTable=!1,this.headings=[],this.probableIssue=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.selectedModal=null,this.modals=[],this.chartObject={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:""},this.chartdata=[],this.modalsData=[];var d=new Date;this.endTime=new Date(d),new Date(d.getFullYear(),d.getMonth(),0).getDate(),this.startTime=new Date(d.getFullYear(),d.getMonth(),1),this.getConsolidateFuelAvg(),this.getChartData(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getConsolidateFuelAvg()}},{key:"getConsolidateFuelAvg",value:function(){var e=this;if(this.startTime>this.endTime)this.common.showToast("start date should be less than end date");else{this.consolFuelAvg=[],this.headings=[];var t={start_time:this.common.dateFormatter(this.startTime),end_time:this.common.dateFormatter(this.endTime)};this.common.loading++,this.api.post("FuelDetails/getFuelAvgWrtFo",t).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.consolFuelAvg=t.data||[],0!=e.consolFuelAvg.length&&null!=t.data||(e.consolFuelAvg=[],e.common.showToast("Record Not Found !!"),e.resetDisplayTable());var n=e.consolFuelAvg[0];for(var a in console.log("first_Rec",n),e.table.data.headings={},n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,e.common.showError()}))}}},{key:"resetDisplayTable",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.consolFuelAvg.length;t++){for(var n=this.consolFuelAvg[t]._is_probable_issue,a={},o=0;o<this.headings.length;o++)a[this.headings[o]]={value:this.consolFuelAvg[t][this.headings[o]],class:n?"lightcoral":"black",action:this.vehicleFuelHistory.bind(this,this.consolFuelAvg[t])};e.push(a)}return e}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a=n.data.name,o="Start Date:"+t.datePipe.transform(t.startTime,"dd-MM-yyyy h:mm:ss a")+"  End Date:"+t.datePipe.transform(t.endTime,"dd-MM-yyyy h:mm:ss a");t.common.getPDFFromTableId(e,a,"Trip Profit And Loss",["Action"],o)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a="FoName:"+n.data.name,o="Start Date:"+t.datePipe.transform(t.startTime,"dd-MM-yyyy h:mm:ss a")+"  End Date:"+t.datePipe.transform(t.endTime,"dd-MM-yyyy h:mm:ss a");t.common.getCSVFromTableId(e,a,"Report:Trip Profit And Loss",null,o)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"vehicleFuelHistory",value:function(e){console.log("row",e);var t={view:{api:"Fuel/getFuelAvgLogsWrtVeh",param:{vehicleId:e._vehicle_id,startTime:e.start_time,endTime:e.end_time}},delete:{},title:"Fuel Average Logs History"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:t},this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getChartData",value:function(e){var t=this;if(this.startTime>this.endTime)this.common.showToast("start date should be less than end date");else{this.chartdata=[];var n="startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Fuel/getVehicleAvgAge?"+n).subscribe((function(e){t.common.loading--,console.log("getChartData",e.data),e.data&&(t.modals=e.data&&e.data.keys?e.data.keys:[],t.modalsData=e.data&&e.data.graphData?e.data.graphData:[],t.modals.sort(),t.modals.reverse(),t.selectedModal=t.selectedModal?t.selectedModal:t.modals[0],t.mapChartDataAccordingModal())}),(function(e){t.common.loading--,t.common.showError()}))}}},{key:"mapChartDataAccordingModal",value:function(){if(console.log("mapChartDataAccordingModal",this.modals.length),this.modals.length>0){var e=this.modalsData[this.selectedModal].ages;console.log("labelsData",e),this.showChart(e,this.modalsData[this.selectedModal].min_avgs,this.modalsData[this.selectedModal].max_avgs,this.modalsData[this.selectedModal].act_avgs)}}},{key:"showChart",value:function(e,t,n,a){this.chartObject.type="line",this.chartObject.data={labels:e,datasets:[{label:"min",lineTension:0,borderColor:"red",borderWidth:0,data:t,fill:!1},{label:"avg",lineTension:0,borderColor:"blue",borderWidth:0,data:a,fill:!1},{label:"max",lineTension:0,borderColor:"green",borderWidth:0,data:n,fill:!1,line:!1}]},this.chartObject.options={tooltips:{mode:"index",intersect:!1,displayColors:!1},title:{display:!0,text:"Fuel Mileage",fontSize:14,fontColor:"blue"},responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Fuel Mileage"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Vehicle Age (Years)"}}]}}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](m.r),c["\u0275\u0275directiveInject"](m.b),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](g.f))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["consolidate-fuel-average"]],decls:29,vars:11,consts:[[1,"row"],[1,"col-10"],[1,"col-2"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-3"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isStart","isTime","onChanged"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-2"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"row",2,"margin-top","15px"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],[2,"margin-top","15px"],["id","consolidateFuel",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","consolidateFuel",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Consolidate Fuel Average"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",2),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275elementStart"](8,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.printPDF("consolidateFuel")})),c["\u0275\u0275element"](9,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.printCsv("consolidateFuel")})),c["\u0275\u0275element"](11,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"nb-card-body"),c["\u0275\u0275elementStart"](13,"div",0),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"uj-date-time-picker",8),c["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",7),c["\u0275\u0275elementStart"](17,"uj-date-time-picker",9),c["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](18,x,3,2,"div",10),c["\u0275\u0275elementStart"](19,"div",11),c["\u0275\u0275elementStart"](20,"button",12),c["\u0275\u0275listener"]("click",(function(){return t.getConsolidateFuelAvg(),t.getChartData()})),c["\u0275\u0275text"](21,"submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](22,"div",13),c["\u0275\u0275elementStart"](23,"div",14),c["\u0275\u0275elementStart"](24,"div",15),c["\u0275\u0275element"](25,"chart",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",17),c["\u0275\u0275template"](27,y,1,2,"smart-table",18),c["\u0275\u0275template"](28,C,2,0,"div",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("dateTimeValue",t.startTime)("isTime",!0),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("dateTimeValue",t.endTime)("isStart",!1)("isTime",!0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.modals.length>0),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("type",t.chartObject.type)("data",t.chartObject.data)("options",t.chartObject.options),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.consolFuelAvg.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.consolFuelAvg.length))},directives:[u.s,u.v,u.r,p.a,g.u,h.ChartComponent,f.D,f.r,f.u,g.t,f.w,f.G,b.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .lightcoral{color:#721c24!important;background:#f08080!important}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),t}()},mdFJ:function(t,a,o){"use strict";o.d(a,"a",(function(){return b}));var i=o("H+bZ"),r=o("OlR4"),l=o("qfBg"),s=o("U79Z"),d=o("ia/1"),c=o("8Y7J"),m=o("G0yt"),g=o("tKwJ"),u=o("SVse"),p=o("wD9S");function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",7),c["\u0275\u0275text"](1," No Data Available On That Time Period ! "),c["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",8),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var b=function(){var t=function(){function t(n,a,o,i){e(this,t),this.api=n,this.common=a,this.user=o,this.modalService=i,this.fuelData=[],this.fuelAvg=[],this.vehicleId=null,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.getFuelAvg()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getFuelAvg()}},{key:"addFuelAvg",value:function(){var e=this;this.common.params={row:null,load:null,unload:null,vehicle:null},this.modalService.open(s.a,{container:"nb-layout",backdrop:"static"}).result.then((function(t){e.getFuelAvg()}))}},{key:"getFuelAvg",value:function(){var e=this;this.fuelAvg=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.loading++,this.api.get("Fuel/getModelWiseFuelAvgWrtFo").subscribe((function(t){e.common.loading--,e.fuelAvg=[],e.fuelAvg=t.data||[],console.log("result",t),console.log("idd",e.fuelAvg[0]._id);var n=e.fuelAvg[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.fuelAvg),this.fuelAvg.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),"Action"==e.headings[a]?e.valobj.Action={value:"",action:null,icons:[{class:"far fa-edit",action:e.updateFuel.bind(e,n._id,n.LoadMileage,n.UnloadMileage,n._vm_id,n.VehicleModel,n.Brand)},{class:"fas fa-trash-alt",action:e.deleteFuel.bind(e,n._id)}]}:e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"updateFuel",value:function(e,t,n,a,o,i){var r=this;this.common.params={row:e,load:t,unLoad:n,vehicle:a,name:o,brand:i},this.modalService.open(s.a,{container:"nb-layout"}).result.then((function(e){r.getFuelAvg()}))}},{key:"deleteFuel",value:function(e){var t=this;console.log("id",e);var n={rowId:e};console.log("id2",n),e&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are you Sure You Want  To Delete This Record?<b>"},this.modalService.open(d.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,console.log("par",n),t.api.post("Fuel/deleteModelWiseFuelAvgWrtFo",n).subscribe((function(e){console.log("Api Response:",e),t.common.showToast(e.msg),t.getFuelAvg(),t.common.loading--}),(function(e){return console.error(" Api Error:",e)})))})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](m.r))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["fo-fuel-average"]],decls:13,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",2,"border-radius","3px",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5," FO Model Fuel Mileage"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",3),c["\u0275\u0275elementStart"](7,"button",4),c["\u0275\u0275listener"]("click",(function(){return t.addFuelAvg()})),c["\u0275\u0275text"](8,"Add Model Fuel Mileage"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"nb-card-body"),c["\u0275\u0275template"](10,h,2,0,"div",5),c["\u0275\u0275elementStart"](11,"div"),c["\u0275\u0275template"](12,f,1,2,"smart-table",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",0==t.fuelAvg.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.fuelAvg.length>0))},directives:[g.s,g.v,g.r,u.u,p.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .fa-edit{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .fa-trash-alt{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),t}()},se9s:function(t,a,o){"use strict";o.d(a,"a",(function(){return b}));var i=o("OlR4"),r=o("H+bZ"),l=o("Ig2y"),s=o("Xy1B"),d=o("8Y7J"),c=o("G0yt"),m=o("tKwJ"),g=o("SVse"),u=o("wD9S");function p(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",10),d["\u0275\u0275text"](1," Select StartDate & EndDate And Click Submit ! "),d["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",10),d["\u0275\u0275text"](1," No Data Available ! "),d["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&d["\u0275\u0275element"](0,"smart-table",11),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var b=function(){var t=function(){function t(n,a,o,i){e(this,t),this.common=n,this.api=a,this.modalService=o,this.dateService=i,this.startDate=null,this.endDate=null,this.driverPerformance=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.click=!1;var r=new Date,l=new Date;this.endDate=r,this.endDate=this.common.dateFormatter(r),l=new Date(r.setDate(r.getDate()-7)),this.startDate=this.common.dateFormatter(l),console.log("Start Date:",this.startDate),console.log("end Date:",this.endDate)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"driver-performance"},this.modalService.open(s.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.dateService.dateFormatter(n.date,"",!1).split(" ")[0]):(t.endDate=t.dateService.dateFormatter(n.date,"",!1).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getDriverPerformance",value:function(){var e=this;this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.driverPerformance=[],this.headings=[],this.valobj={};var t=this.common.dateFormatter1(this.startDate).split(" ")[0],n=this.common.dateFormatter1(this.endDate.split(" ")[0]);this.click=!0;var a="startDate="+t+"&endDate="+n;this.common.loading++,this.api.get("Drivers/driverPerformance?"+a).subscribe((function(t){if(e.common.loading--,console.log("res: ",t.data),null==t.data)return e.driverPerformance=[],void(e.table=null);e.driverPerformance=t.data,console.log("tripstagesData",e.driverPerformance);var n=e.driverPerformance[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.driverPerformance.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.driverPerformance[t][this.headings[n]]};e.push(this.valobj)}return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](c.r),d["\u0275\u0275directiveInject"](l.a))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["driver-performance"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","w-100","m-0",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275elementStart"](2,"div",1),d["\u0275\u0275elementStart"](3,"div",2),d["\u0275\u0275elementStart"](4,"h5"),d["\u0275\u0275text"](5,"Driver Performance (Lite)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"div",3),d["\u0275\u0275elementStart"](7,"div",1),d["\u0275\u0275elementStart"](8,"div",4),d["\u0275\u0275elementStart"](9,"input",5),d["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),d["\u0275\u0275pipe"](10,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",4),d["\u0275\u0275elementStart"](12,"input",6),d["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),d["\u0275\u0275pipe"](13,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"div",4),d["\u0275\u0275elementStart"](15,"button",7),d["\u0275\u0275listener"]("click",(function(){return t.getDriverPerformance()})),d["\u0275\u0275text"](16,"submit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"nb-card-body"),d["\u0275\u0275template"](18,p,2,0,"div",8),d["\u0275\u0275template"](19,h,2,0,"div",8),d["\u0275\u0275elementStart"](20,"div"),d["\u0275\u0275template"](21,f,1,2,"smart-table",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("value",d["\u0275\u0275pipeBind2"](10,5,t.startDate,"dd MMM yyyy")),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("value",d["\u0275\u0275pipeBind2"](13,8,t.endDate,"dd MMM yyyy")),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("ngIf",!t.click),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!t.driverPerformance.length&&t.click),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.driverPerformance.length))},directives:[m.s,m.v,m.r,g.u,u.a],pipes:[g.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 170px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},suYr:function(t,a,o){"use strict";o.d(a,"a",(function(){return v}));var i=o("H+bZ"),r=o("OlR4"),l=o("r+Tg"),s=o("3a3o"),d=o("UiTq"),c=o("0BXs"),m=o("qfBg"),g=o("8Y7J"),u=o("G0yt"),p=o("tKwJ"),h=o("SVse");function f(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td"),g["\u0275\u0275text"](14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"td"),g["\u0275\u0275text"](16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275elementStart"](18,"button",21),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().enterTicket(e)})),g["\u0275\u0275text"](19," Take Action "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.fo_name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.vehicle_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.prim_status),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.sec_status),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.suggest),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.alert_time),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.hold_by)}}function b(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",22),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var v=function(){var t=function(){function t(n,a,o,i){e(this,t),this.api=n,this.common=a,this.modalService=o,this.user=i,this.viewType="all",this.dis="old",this.VehicleStatusAlerts=[],this.status={1:"Accept",0:"Pending","-1":"Advance Review"},this.getVehicleStatusAlerts(this.viewType),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getVehicleStatusAlerts(this.viewType)}},{key:"getVehicleStatusAlerts",value:function(e){var t=this;this.viewType=e;var n="viewType="+this.viewType;console.log("params ",n),this.api.get("HaltOperations/getVehicleStatusAlerts?"+n).subscribe((function(e){console.log("Res: ",e.data),t.VehicleStatusAlerts=e.data}),(function(e){console.error(e),t.common.showError()}))}},{key:"getPendingStatusDetails",value:function(){var e=this;this.common.loading++,this.api.get("HaltOperations/getPendingAlertDetails?").subscribe((function(t){e.common.loading--,console.log(t);var n=[];t.data.map((function(t,a){n.push([a,t.alertname,t.cnt,t.actct,t.wuct,e.common.changeDateformat(t.time)])})),console.log(n),e.common.params={title:"Pending Alert Details:",headings:["#","Activity Name","Count","Since Updated (In Minutes)","Working User (In Last 10 Minutes)","Clear Tickets (In Last 10 Minutes)"],data:n},e.modalService.open(l.a,{size:"lg",container:"nb-layout"})}),(function(t){e.common.loading--,console.log(t)}))}},{key:"openChangeStatusModal",value:function(e){var t=this;console.log("VehicleStatusData",e),this.common.params=e,this.common.ref_page="vsc",this.modalService.open(s.a,{size:"lg",container:"nb-layout"}).result.then((function(n){t.exitTicket(e)}))}},{key:"openChangeStatusCustomerModal",value:function(e){var t=this;console.log("VehicleStatusData",e),this.common.params=e,this.common.ref_page="vsc",this.modalService.open(c.a,{size:"lg",container:"nb-layout"}).result.then((function(n){t.exitTicket(e)}))}},{key:"enterTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e.vehicle_id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",a).subscribe((function(a){if(n.common.loading--,t=a,console.log(t),!t.success)return!1;"admin"==n.user._loggedInBy?n.openChangeStatusModal(e):n.openChangeStatusCustomerModal(e)}),(function(e){n.common.loading--,console.log(e)}))}},{key:"exitTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e.vehicle_id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",a).subscribe((function(e){return n.common.loading--,t=e,console.log(t),!!t.sucess||(n.getVehicleStatusAlerts(n.viewType),!1)}),(function(e){n.common.loading--,console.log(e)}))}},{key:"openAnalyticsModal",value:function(){this.common.params={title:"Analytics"},this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](r.a),g["\u0275\u0275directiveInject"](u.r),g["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=g["\u0275\u0275defineComponent"]({type:t,selectors:[["vehicle-status-change"]],decls:51,vars:8,consts:[[1,"row"],[1,"col-10"],[1,"col-2"],[1,"anlytics_btn",3,"click"],["height","50px","width","50px","src","assets/images/analytics.png"],[2,"padding","10px 15px"],[1,"vehicle_status_tabs","clearfix","mb-3"],[1,"tabset"],[3,"ngClass"],["type","button","id","viewall","value","View All",3,"click"],["type","button","id","viewnew","value","View New",3,"click"],["type","button","id","viewold","value","View old",3,"click"],["type","button","id","refresh","value","Refresh",3,"click"],["type","button","id","advancereview","value","Advance Review",3,"click"],["type","button","id","statusPending","value","Pending Alerts",3,"click"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],[3,"click"],[1,"no-data"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Vehicle Status Changes"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"span",3),g["\u0275\u0275listener"]("click",(function(){return t.openAnalyticsModal()})),g["\u0275\u0275element"](8,"img",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"nb-card-body",5),g["\u0275\u0275elementStart"](10,"div",6),g["\u0275\u0275elementStart"](11,"ul",7),g["\u0275\u0275elementStart"](12,"li",8),g["\u0275\u0275elementStart"](13,"input",9),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleStatusAlerts("all"),t.dis="all"})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"li",8),g["\u0275\u0275elementStart"](15,"input",10),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleStatusAlerts("view new"),t.dis="new"})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"li",8),g["\u0275\u0275elementStart"](17,"input",11),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleStatusAlerts("view old"),t.dis="old"})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"li",8),g["\u0275\u0275elementStart"](19,"input",12),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleStatusAlerts("pending"),t.dis="refresh"})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"li",8),g["\u0275\u0275elementStart"](21,"input",13),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleStatusAlerts("advance review"),t.dis="adrw"})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"input",14),g["\u0275\u0275listener"]("click",(function(){return t.getPendingStatusDetails()})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"div",15),g["\u0275\u0275elementStart"](24,"table",16),g["\u0275\u0275elementStart"](25,"thead",17),g["\u0275\u0275elementStart"](26,"tr"),g["\u0275\u0275elementStart"](27,"th"),g["\u0275\u0275text"](28,"Fo Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"th"),g["\u0275\u0275text"](30,"Vehicle RegNo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](31,"th"),g["\u0275\u0275text"](32,"Vehicle Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"th"),g["\u0275\u0275text"](34,"Primary Status"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"th"),g["\u0275\u0275text"](36,"Secondry Status"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](37,"th"),g["\u0275\u0275text"](38,"Suggestion"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"th"),g["\u0275\u0275text"](40,"Alert Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"th"),g["\u0275\u0275text"](42,"Hold User"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"th"),g["\u0275\u0275text"](44,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"tbody"),g["\u0275\u0275template"](46,f,20,8,"tr",18),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](47,b,2,0,"div",19),g["\u0275\u0275elementStart"](48,"div",20),g["\u0275\u0275elementStart"](49,"b"),g["\u0275\u0275text"](50),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngClass","all"==t.dis?"tab active":"tab"),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","new"==t.dis?"tab active":"tab"),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","old"==t.dis?"tab active":"tab"),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","refresh"==t.dis?"tab active":"tab"),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","adrw"==t.dis?"tab active":"tab"),g["\u0275\u0275advance"](26),g["\u0275\u0275property"]("ngForOf",t.VehicleStatusAlerts),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.VehicleStatusAlerts.length),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",t.VehicleStatusAlerts.length,""))},directives:[p.s,p.v,p.r,h.r,h.t,h.u],styles:['.remove[_ngcontent-%COMP%]{font-size:20px;color:red}.tableFixHead[_ngcontent-%COMP%]{overflow-y:auto;height:calc(100vh - 225px)}.tableFixHead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background:#37474f}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.anlytics_btn[_ngcontent-%COMP%]{display:block;text-align:right;position:relative}.anlytics_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;height:auto;position:absolute;right:10px;top:-9px}.tabset[_ngcontent-%COMP%]{padding:0;margin:0!important;list-style:none;float:left;width:85%}.tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:-1px;text-align:center;position:relative;display:inline-block}.tabset[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:transparent}.tabset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#26a69a;color:#fff!important;font-weight:400!important;border-radius:5px 5px 0 0;margin-right:8px;border:2px solid #26a69a;padding:5px 20px!important;position:relative;font-size:14px}.tabset[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a!important}.tabset[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:after{content:""!important;position:absolute;background:#fff;width:88%;height:6px;bottom:-2px;left:2px;border-radius:0}#statusPending[_ngcontent-%COMP%]{float:right;background-color:#04a9f5;border:0;color:#fff;font-weight:700;padding:8px 18px;border-radius:5px;font-size:16px;outline:none}#statusPending[_ngcontent-%COMP%]:hover{background-color:#0898db}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#06d79c;border:1px solid #06d79c;-webkit-box-shadow:0 2px 2px 0 rgba(40,190,189,.14),0 3px 1px -2px rgba(40,190,189,.2),0 1px 5px 0 rgba(40,190,189,.12);box-shadow:0 2px 2px 0 rgba(40,190,189,.14),0 3px 1px -2px rgba(40,190,189,.2),0 1px 5px 0 rgba(40,190,189,.12);color:#fff;border-radius:5px;padding:5px 10px;outline:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#06d79c;-webkit-box-shadow:0 14px 26px -12px rgba(40,190,189,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(40,190,189,.2);box-shadow:0 14px 26px -12px rgba(40,190,189,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(40,190,189,.2);border:1px solid #06d79c}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),t}()},svlw:function(t,a,o){"use strict";o.d(a,"a",(function(){return v}));var i=o("OlR4"),r=o("H+bZ"),l=o("tUv6"),s=o("kw6w"),d=o("8Y7J"),c=o("G0yt"),m=o("tKwJ"),g=o("SVse"),u=o("z+eI"),p=o("wD9S");function h(e,t){if(1&e&&d["\u0275\u0275element"](0,"chart",10),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("type",n.chart.type)("data",n.chart.data)("options",n.chart.options)}}function f(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"tr",5),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"]().filterPODs(e)})),d["\u0275\u0275elementStart"](1,"td",6),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"td"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"td"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](o+1),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](a["State Name"]),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](a.count)}}function b(e,t){if(1&e&&d["\u0275\u0275element"](0,"smart-table",11),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var v=function(){var t=function(){function t(n,a,o){e(this,t),this.common=n,this.api=a,this.modalService=o,this.chart={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:"",startAngle:"",backgroundColor:[],legend:{}},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.allPendingPODs=[],this.pendingPODs=[],this.states=[],this.chartData={labels:[],data:[]},this.getPendingPods(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getPendingPods()}},{key:"getPendingPods",value:function(){var e=this;this.common.loading++,this.api.get("LorryReceiptsOperation/getPendingPods").subscribe((function(t){e.common.loading--,console.info("Res:",t),e.allPendingPODs=t.data.result,e.pendingPODs=t.data.result,e.states=t.data.summary,e.handleChart(),e.generateTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"handleChart",value:function(){this.chart.type="pie",this.chart.data={labels:this.states.map((function(e){return e["State Name"]})),datasets:[{label:"Zones",data:this.states.map((function(e){return e.count})),backgroundColor:["#0074D9","#FF4136","#2ECC40","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111"]}]},this.chart.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!1}},console.log("This:",this.chart)}},{key:"generateTable",value:function(){this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getHeadings",value:function(){var e={};for(var t in this.allPendingPODs[0])"_"!=t.charAt(0)&&(e[t]={title:this.formatTitle(t),placeholder:this.formatTitle(t)},"LR Date"===t&&(e[t].type="date"));return e.Action={title:"Action",hideSearch:!0},e}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.pendingPODs.map((function(n){console.log("pendingpod",n);var a={};for(var o in e.getHeadings())a[o]="Action"==o?{value:"",action:null,icons:[{class:"fa fa-user",action:e.changeState.bind(e,n)},{class:"fa fa-tasks",action:e.getPodImage.bind(e,n._doc_id)},{class:"fa fa-picture-o",action:e.viewLRImages.bind(e,n._img_url2)}]}:{value:n[o],class:"black",action:""};t.push(a)})),console.log("Columns:",t),t}},{key:"changeState",value:function(e){var t=this;console.log("pendingPOD",e),this.common.params={details:e},this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getPendingPods()}))}},{key:"getPodImage",value:function(e){console.log("val===",e);var t={refid:"",reftype:"",doctype:"",docid:e};console.log("receipts",t),this.common.params={refdata:t,title:"docImage"},this.modalService.open(l.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}},{key:"viewLRImages",value:function(e){this.common.params={images:[{name:"Lr",image:e}],title:"Lr Image"},this.modalService.open(l.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"lrModal"})}},{key:"filterPODs",value:function(e){this.pendingPODs="all"===e?this.allPendingPODs:this.allPendingPODs.filter((function(t){return t._state_id==e._state_id})),this.generateTable()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](c.r))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["pod-dashboard"]],decls:24,vars:4,consts:[[1,"row"],[1,"col-3"],["style","margin-right:5px;min-height: 200px;",3,"type","data","options",4,"ngIf"],[1,"chart-table","table","table-bordered","table-hover","table-scroll"],[1,"thead"],[3,"click"],["scope","row"],[3,"click",4,"ngFor","ngForOf"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],[3,"data","settings"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-body"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"div",1),d["\u0275\u0275template"](4,h,1,3,"chart",2),d["\u0275\u0275elementStart"](5,"table",3),d["\u0275\u0275elementStart"](6,"thead",4),d["\u0275\u0275elementStart"](7,"tr"),d["\u0275\u0275elementStart"](8,"th"),d["\u0275\u0275text"](9,"#"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"th"),d["\u0275\u0275text"](11,"StateName"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"th"),d["\u0275\u0275text"](13,"StateCount"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"tbody"),d["\u0275\u0275elementStart"](15,"tr",5),d["\u0275\u0275listener"]("click",(function(){return t.filterPODs("all")})),d["\u0275\u0275element"](16,"td",6),d["\u0275\u0275elementStart"](17,"td"),d["\u0275\u0275text"](18,"All"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"td"),d["\u0275\u0275text"](20),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](21,f,7,3,"tr",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](22,"div",8),d["\u0275\u0275template"](23,b,1,2,"smart-table",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",t.chart.type),d["\u0275\u0275advance"](16),d["\u0275\u0275textInterpolate"](t.allPendingPODs.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",t.states),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.pendingPODs.length))},directives:[m.s,m.r,g.u,g.t,u.ChartComponent,p.a],styles:['[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div div+div{margin-left:10px}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span{position:absolute;display:none;padding:10px 40px;font-size:12px;font-weight:400;left:-33px;top:-24px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span:before{content:"Pod Images";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-tasks span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user{color:#5cd050}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span{position:absolute;display:none;padding:10px 40px;font-size:11px;font-weight:400;left:-33px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span:before{content:"State Change";display:block;position:absolute;top:0;left:0;background-color:#5cd050;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o{color:#6c0fff}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span{position:absolute;display:none;padding:10px 33px;font-size:11px;font-weight:400;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span:before{content:"LR Image";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td:last-child div .fa-picture-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.chart-table[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4500;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#0074d9;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4136;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#2ecc40;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#39cccc;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#01ff70;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#85144b;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#f012be;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#3d9970;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#111;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{color:#00f}']}),t}()},syhs:function(t,a,o){"use strict";o.d(a,"a",(function(){return p}));var i=o("8Y7J"),r=o("tKwJ"),l=o("SVse");function s(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-challan")}function d(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-trip")}function c(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-traffic")}function m(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-calls")}function g(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-alerts")}function u(e,t){1&e&&i["\u0275\u0275element"](0,"tmg-documents")}var p=function(){var t=function(){function t(){e(this,t),this.seletionsArray=["Tmg-Challan","Tmg-Trip","Tmg-Traffic","Tmg-Calls","Tmg-Alerts","Tmg-Documents"],this.selectedDashboard="Tmg-Challan"}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getIndex",value:function(){for(var e=0;e<=this.seletionsArray.length;e++)if(this.seletionsArray[e]==this.selectedDashboard)return e}},{key:"forwardMove",value:function(){var e=this.getIndex();this.selectedDashboard=e==this.seletionsArray.length-1?this.seletionsArray[0]:this.seletionsArray[e+1]}},{key:"backwardMove",value:function(){var e=this.getIndex();this.selectedDashboard=0==e?this.seletionsArray[this.seletionsArray.length-1]:this.seletionsArray[e-1]}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tmg"]],decls:39,vars:18,consts:[[2,"border","0px"],[1,"row","toptab"],[1,"col-1",2,"-webkit-writing-mode","vertical-lr"],[1,"dirbtn"],[1,"fa","fa-backward",3,"click"],[1,"col-1-5","hiddenby"],[3,"click"],[1,"col-1",2,"-webkit-writing-mode","vertical-rl"],[1,"fa","fa-forward",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card",0),i["\u0275\u0275elementStart"](1,"nb-card-body"),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275elementStart"](4,"span",3),i["\u0275\u0275elementStart"](5,"i",4),i["\u0275\u0275listener"]("click",(function(){return t.backwardMove()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Challan"})),i["\u0275\u0275elementStart"](8,"b"),i["\u0275\u0275text"](9,"Challan DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",5),i["\u0275\u0275elementStart"](11,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Trip"})),i["\u0275\u0275elementStart"](12,"b"),i["\u0275\u0275text"](13,"Trip DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",5),i["\u0275\u0275elementStart"](15,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Traffic"})),i["\u0275\u0275elementStart"](16,"b"),i["\u0275\u0275text"](17,"Traffic DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",5),i["\u0275\u0275elementStart"](19,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Calls"})),i["\u0275\u0275elementStart"](20,"b"),i["\u0275\u0275text"](21,"Calls DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",5),i["\u0275\u0275elementStart"](23,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Alerts"})),i["\u0275\u0275elementStart"](24,"b"),i["\u0275\u0275text"](25,"ALerts DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",5),i["\u0275\u0275elementStart"](27,"p",6),i["\u0275\u0275listener"]("click",(function(){return t.selectedDashboard="Tmg-Documents"})),i["\u0275\u0275elementStart"](28,"b"),i["\u0275\u0275text"](29,"Document DashBoard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"div",7),i["\u0275\u0275elementStart"](31,"span",3),i["\u0275\u0275elementStart"](32,"i",8),i["\u0275\u0275listener"]("click",(function(){return t.forwardMove()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](33,s,1,0,"tmg-challan",9),i["\u0275\u0275template"](34,d,1,0,"tmg-trip",9),i["\u0275\u0275template"](35,c,1,0,"tmg-traffic",9),i["\u0275\u0275template"](36,m,1,0,"tmg-calls",9),i["\u0275\u0275template"](37,g,1,0,"tmg-alerts",9),i["\u0275\u0275template"](38,u,1,0,"tmg-documents",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275classMap"]("Tmg-Challan"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"]("Tmg-Trip"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"]("Tmg-Traffic"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"]("Tmg-Calls"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"]("Tmg-Alerts"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](4),i["\u0275\u0275classMap"]("Tmg-Documents"==t.selectedDashboard?"active":"default"),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf","Tmg-Challan"==t.selectedDashboard),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Tmg-Trip"==t.selectedDashboard),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Tmg-Traffic"==t.selectedDashboard),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Tmg-Calls"==t.selectedDashboard),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Tmg-Alerts"==t.selectedDashboard),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","Tmg-Documents"==t.selectedDashboard))},directives:[r.s,r.r,l.u],styles:[".default[_ngcontent-%COMP%]{color:#000;border-radius:.17rem;font-size:.85rem;text-align:center;padding:5px;background-color:#c9c2de;cursor:pointer;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);margin-bottom:0}.default[_ngcontent-%COMP%]:hover{border-radius:.17rem;font-size:.85rem;text-align:center;padding:5px;background-color:#4215ca;color:#fff;cursor:pointer;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);margin-bottom:0}.active[_ngcontent-%COMP%]{margin-bottom:0;font-size:.85rem;text-align:center;padding:5px;background-color:#4215ca;border-bottom:1px solid #fff}.active[_ngcontent-%COMP%], .dirbtn[_ngcontent-%COMP%]{border-radius:.17rem;color:#fff;cursor:pointer;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2)}.dirbtn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#3f6ad8}.dirbtn[_ngcontent-%COMP%]:hover{background-color:#0233af}.toptab[_ngcontent-%COMP%]{margin-top:-18px;z-index:5;background-color:#fff}.hiddenby[_ngcontent-%COMP%]{opacity:0;-webkit-transition:.5s;transition:.5s;margin-right:5px}.toptab[_ngcontent-%COMP%]:hover   .hiddenby[_ngcontent-%COMP%]{opacity:1;-webkit-transition:1s;transition:1s}"]}),t}()},vjOA:function(t,a,o){"use strict";o.d(a,"a",(function(){return u}));var i=o("H+bZ"),r=o("OlR4"),l=o("8Y7J"),s=o("SVse"),d=o("G0yt"),c=o("tKwJ"),m=o("wD9S");function g(e,t){if(1&e&&l["\u0275\u0275element"](0,"smart-table",4),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("data",n.table.remainingFuel)("settings",n.table.settings)}}var u=function(){var t=function(){function t(n,a,o,i){e(this,t),this.common=n,this.datePipe=a,this.api=o,this.modalService=i,this.remainingFuel=[],this.table=null,this.getRemainingFuel(),this.common.refresh=this.refresh.bind(this)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getRemainingFuel()}},{key:"getRemainingFuel",value:function(){var e=this;this.common.api.post("Fuel/getRemaningFuels",{}).subscribe((function(t){t.data.length?e.remainingFuel=t.data:e.common.showToast("No Record Found !!"),console.log("res",t.data),e.table=e.setTable()}),(function(t){e.common.showError()}))}},{key:"setTable",value:function(){return{remainingFuel:{headings:{RegNO:{title:"RegNO",placeholder:"RegNO"},startdate:{title:"startdate",placeholder:"Start Date"},TotalDistance:{title:"TotalDistance",placeholder:"Total Distance"},LoadingDistance:{title:"LoadingDistance",placeholder:"Loading Distance"},UnloadingDistance:{title:"UnloadingDistance",placeholder:"Unloading Distance"},RemainingFuel:{title:"RemainingFuel",placeholder:"Remaining Fuel"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.remainingFuel.map((function(n){var a={RegNO:{value:n.reg_number},startdate:{value:e.datePipe.transform(n.startdate,"dd MMM HH:mm a")},TotalDistance:{value:n.total_distance},LoadingDistance:{value:n.loading_distance},UnloadingDistance:{value:n.unloading_distance},RemainingFuel:{value:n.rem_fuel}};t.push(a)})),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](r.a),l["\u0275\u0275directiveInject"](s.f),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](d.r))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["remaining-fuel"]],decls:7,vars:1,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-6"],["id","tblremainingFuel",3,"data","settings",4,"ngIf"],["id","tblremainingFuel",3,"data","settings"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"nb-card",0),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5," Remaining Fuel "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](6,g,1,2,"smart-table",3),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",t.remainingFuel&&t.remainingFuel.length))},directives:[c.s,c.v,s.u,m.a],styles:["[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),t}()}}])}();