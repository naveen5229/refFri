(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{le5C:function(e,t,n){"use strict";n.r(t),n.d(t,"VehicleMaintenanceModule",(function(){return We}));var i=n("SVse"),a=n("qfBg"),o=n("8Y7J"),r=n("iInd"),s=n("IAMq"),l=n("tKwJ");let c=(()=>{class e{constructor(e,t){this.user=e,this.router=t}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](r.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ngx-sample-layout"),o["\u0275\u0275element"](1,"nb-menu",0),o["\u0275\u0275element"](2,"router-outlet"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("items",t.user._menu.vehicleMaintenance))},directives:[s.a,l.W,r.h],encapsulation:2}),e})();var d=n("6ugN"),p=n("IarD"),m=n("H+bZ"),h=n("OlR4"),g=n("Ig2y"),b=n("NTD5"),f=n("G0yt"),u=n("s7LF"),x=n("csNM"),v=n("0zba");function C(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275text"](2," Service Category"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"select",12),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().serviceDetails.serviceCategory=t})),o["\u0275\u0275elementStart"](2,"option",28),o["\u0275\u0275text"](3,"Company"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"option",29),o["\u0275\u0275text"](5,"Own"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",e.serviceDetails.serviceCategory)}}function M(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"label",30),o["\u0275\u0275elementStart"](1,"input",31),o["\u0275\u0275listener"]("ngModelChange",(function(n){o["\u0275\u0275restoreView"](e);const i=t.index;return o["\u0275\u0275nextContext"]().isChecks[i]=n}))("change",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit,i=t.index,a=o["\u0275\u0275nextContext"]();return a.addType(n.id,a.isChecks[i])})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",i.isChecks[n]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",e.name," ")}}function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275text"](2,"Labour Cost"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"input",32),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().serviceDetails.labourCost=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",e.serviceDetails.labourCost)}}function O(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",41),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.addMoreItems(t.i)})),o["\u0275\u0275elementEnd"]()}}function P(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"i",42),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).items.splice(t,1)})),o["\u0275\u0275elementEnd"]()}}function w(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275elementStart"](2,"td"),o["\u0275\u0275elementStart"](3,"input",35),o["\u0275\u0275listener"]("ngModelChange",(function(n){return o["\u0275\u0275restoreView"](e),t.$implicit.name=n})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"td"),o["\u0275\u0275elementStart"](5,"input",36),o["\u0275\u0275listener"]("ngModelChange",(function(n){return o["\u0275\u0275restoreView"](e),t.$implicit.quantity=n})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"td"),o["\u0275\u0275elementStart"](7,"span"),o["\u0275\u0275elementStart"](8,"input",37),o["\u0275\u0275listener"]("ngModelChange",(function(n){return o["\u0275\u0275restoreView"](e),t.$implicit.amount=n})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td",38),o["\u0275\u0275elementStart"](10,"span"),o["\u0275\u0275template"](11,O,1,0,"i",39),o["\u0275\u0275template"](12,P,1,0,"i",40),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.name),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",e.quantity),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.amount),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",n==i.items.length-1),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0!==n)}}function k(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"table",33),o["\u0275\u0275elementStart"](1,"thead"),o["\u0275\u0275elementStart"](2,"tr"),o["\u0275\u0275elementStart"](3,"th"),o["\u0275\u0275elementStart"](4,"label"),o["\u0275\u0275text"](5," Item Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"th"),o["\u0275\u0275elementStart"](7,"label"),o["\u0275\u0275text"](8," Actions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"tbody"),o["\u0275\u0275template"](10,w,13,5,"tr",34),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("ngForOf",e.items)}}function E(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",43),o["\u0275\u0275elementStart"](1,"button",44),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().addService()})),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.btn2)}}function D(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",44),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().addService()})),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.btn3)}}const I=function(e){return{service_center:e}};let T=(()=>{class e{constructor(e,t,n,i,a,o){this.api=e,this.common=t,this.date=n,this.user=i,this.modalService=a,this.activeModal=o,this.title="",this.btn1="",this.btn2="",this.btn3="Submit",this.isFormSubmit=!1,this.vehicleId=null,this.regno=null,this.serviceType=[],this.serviceId=null,this.typeId=null,this.isItem=0,this.isChecks={},this.serviceDetails={lastServiceDate:null,invoiceNo:null,serviceCategory:"1",scheduleServices:"true",lastServiceKm:null,nextServiceDate:null,nextServiceKm:null,serviceCenter:null,serviceLocation:null,amount:0,totalAmount:0,tax:0,labourCost:null,remark:null},this.services=[],this.items=[{name:null,quantity:null,amount:null},{name:null,quantity:null,amount:null}],this.edit=0,this.serviceCenters=[],this.title=this.common.params.title||"Vehicle Job Card",this.btn1=this.common.params.btn1||"Cancel",this.btn2=this.common.params.btn2||"Add",this.vehicleId=this.common.params.vehicleId,this.regno=this.common.params.regno,this.serviceMaintenanceType(),this.getServiceCenters()}ngOnInit(){}closeModal(e){this.activeModal.close({response:e})}serviceMaintenanceType(){this.common.loading++,this.api.get("VehicleMaintenance/getHeadMaster").subscribe(e=>{this.common.loading--,this.serviceType=e.data,console.log("Maintenance Type",this.serviceType)},e=>{this.common.loading--,console.log(e)})}getServiceCenters(){this.common.loading++,this.api.get("VehicleMaintenance/getServiceCenters").subscribe(e=>{this.common.loading--,this.serviceCenters=e.data,console.log("servicecenters",this.serviceCenters)},e=>{this.common.loading--,console.log(e)})}addService(){let e={id:this.serviceId?this.serviceId:null,vId:this.vehicleId,regno:this.regno,invoiceNo:this.serviceDetails.invoiceNo,isScheduledService:this.serviceDetails.scheduleServices,serviceCategory:this.serviceDetails.serviceCategory,lastServiceDate:this.common.dateFormatter(this.serviceDetails.lastServiceDate),lastServiceKm:this.serviceDetails.lastServiceKm,nextServiceDays:null,nextServiceKm:null,serviceCenter:this.serviceDetails.serviceCenter,serviceLocation:this.serviceDetails.serviceLocation,amount:this.serviceDetails.amount,tax:this.serviceDetails.tax,labourCost:this.serviceDetails.labourCost,remark:this.serviceDetails.remark,items:JSON.stringify(this.items),services:this.arrayToString(this.services)};console.log("Params:",e),this.common.loading++,this.api.post("VehicleMaintenance/add",e).subscribe(e=>{this.common.loading--,console.log("response:",e),e.data[0].r_id>0?(this.common.showToast("Sucessfully Added",1e4),this.closeModal(!0)):this.common.showError(e.data[0].r_msg)},e=>{this.common.loading--,console.log(e)})}arrayToString(e){let t="";return e.forEach(e=>{t+=e+","}),t=""==t?"":t.substr(0,t.length-1),t}addMoreItems(e){console.log("addmore items on ",e),this.items.push({name:null,quantity:null,amount:null})}addType(e,t){t?this.services=this.common.unionArrays(this.services,[e]):this.services.splice(this.services.findIndex(t=>t==e),1)}calculateAmount(){this.serviceDetails.totalAmount=this.serviceDetails.amount+this.serviceDetails.tax}selectServiceCenter(e){e=e.service_center.split("-"),this.serviceDetails.serviceCenter=e[0],this.serviceDetails.serviceLocation=e[1]}setServiceCenter(){this.serviceDetails.serviceCenter=this.serviceDetails.serviceCenter?this.serviceDetails.serviceCenter:document.getElementById("service_center").value}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](b.a),o["\u0275\u0275directiveInject"](f.r),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["add-maintenance"]],decls:103,vars:28,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-3"],["type","text","placeholder","Invoice No","name","invoiceNo",1,"form-control",3,"ngModel","ngModelChange"],[3,"isTime","dateTimeValue","onChanged"],["type","number","placeholder","Km","name","lastServiceKm","maxlength","8",1,"form-control",3,"ngModel","ngModelChange"],["display","service_center","placeholder","Service Center","inputId","service_center",3,"data","preSelected","onSelected","focusout"],["type","text","placeholder","Location","name","serviceLocation",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["class","col-md-3",4,"ngIf"],["type","number","placeholder","Amount","name","amount",1,"form-control",3,"ngModel","ngModelChange","change"],["type","number","placeholder","Tax","name","tax",1,"form-control",3,"ngModel","ngModelChange","change"],["type","text","placeholder","Remark","name","amount",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-9","checkbox-flex"],["class","inside-checkbox",4,"ngFor","ngForOf"],[3,"value"],["class","table table-bordered",4,"ngIf"],[1,"modal-footer"],["class","col text-right",4,"ngIf","ngIfElse"],["update",""],[1,"col"],["type","button","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],["value","1"],["value","2"],[1,"inside-checkbox"],["type","checkbox",3,"ngModel","ngModelChange","change"],["type","number","placeholder","Labour Cost","name","labourCost",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["type","text","placeholder"," Item Name",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Quantity",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Amount",1,"form-control",2,"width","70%","display","inline-block","margin-right","5px",3,"ngModel","ngModelChange"],[2,"padding","0px"],["class","fa fa-plus add","style","padding: 1px;\n                color: green;",3,"click",4,"ngIf"],["class","fa fa-minus minus","style","padding: 1px;\n              color: red;",3,"click",4,"ngIf"],[1,"fa","fa-plus","add",2,"padding","1px","color","green",3,"click"],[1,"fa","fa-minus","minus",2,"padding","1px","color","red",3,"click"],[1,"col","text-right"],["form","service-form","type","submit","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",(function(){return t.closeModal(!1)})),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"label"),o["\u0275\u0275text"](10," Vehicle Number "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",6),o["\u0275\u0275elementStart"](12,"span"),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",6),o["\u0275\u0275elementStart"](15,"label"),o["\u0275\u0275text"](16,"Invoice No."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",6),o["\u0275\u0275elementStart"](18,"input",7),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.invoiceNo=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",5),o["\u0275\u0275elementStart"](20,"div",6),o["\u0275\u0275elementStart"](21,"label"),o["\u0275\u0275text"](22,"Service Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",6),o["\u0275\u0275elementStart"](24,"uj-date-time-picker",8),o["\u0275\u0275listener"]("onChanged",(function(e){return t.serviceDetails.lastServiceDate=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",6),o["\u0275\u0275elementStart"](26,"label"),o["\u0275\u0275text"](27,"Odometer"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",6),o["\u0275\u0275elementStart"](29,"input",9),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.lastServiceKm=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",5),o["\u0275\u0275elementStart"](31,"div",6),o["\u0275\u0275elementStart"](32,"label"),o["\u0275\u0275text"](33,"Service Center"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"div",6),o["\u0275\u0275elementStart"](35,"auto-suggestion",10),o["\u0275\u0275listener"]("onSelected",(function(e){return t.selectServiceCenter(e)}))("focusout",(function(){return t.setServiceCenter()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"div",6),o["\u0275\u0275elementStart"](37,"label"),o["\u0275\u0275text"](38,"Service Location"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"div",6),o["\u0275\u0275elementStart"](40,"input",11),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.serviceLocation=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](41,"div",5),o["\u0275\u0275elementStart"](42,"div",6),o["\u0275\u0275elementStart"](43,"label"),o["\u0275\u0275text"](44,"Scheduled Service"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](45,"div",6),o["\u0275\u0275elementStart"](46,"select",12),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.scheduleServices=e})),o["\u0275\u0275elementStart"](47,"option",13),o["\u0275\u0275text"](48,"Yes"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"option",14),o["\u0275\u0275text"](50,"No"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](51,C,3,0,"div",15),o["\u0275\u0275template"](52,_,6,1,"div",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"div",5),o["\u0275\u0275elementStart"](54,"div",6),o["\u0275\u0275elementStart"](55,"label"),o["\u0275\u0275text"](56,"Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](57,"div",6),o["\u0275\u0275elementStart"](58,"input",16),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.amount=e}))("change",(function(){return t.calculateAmount()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](59,"div",6),o["\u0275\u0275elementStart"](60,"label"),o["\u0275\u0275text"](61,"Tax"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"div",6),o["\u0275\u0275elementStart"](63,"input",17),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.tax=e}))("change",(function(){return t.calculateAmount()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](64,"div",5),o["\u0275\u0275elementStart"](65,"div",6),o["\u0275\u0275elementStart"](66,"label"),o["\u0275\u0275text"](67,"Total Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](68,"div",6),o["\u0275\u0275elementStart"](69,"label"),o["\u0275\u0275text"](70),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](71,"div",6),o["\u0275\u0275elementStart"](72,"label"),o["\u0275\u0275text"](73,"Remark"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](74,"div",6),o["\u0275\u0275elementStart"](75,"input",18),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.serviceDetails.remark=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](76,"div",5),o["\u0275\u0275elementStart"](77,"div",6),o["\u0275\u0275elementStart"](78,"label"),o["\u0275\u0275text"](79,"Service Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](80,"div",19),o["\u0275\u0275template"](81,M,3,2,"label",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](82,"div",5),o["\u0275\u0275elementStart"](83,"div",6),o["\u0275\u0275elementStart"](84,"label"),o["\u0275\u0275text"](85,"Any Items"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](86,"div",6),o["\u0275\u0275elementStart"](87,"select",12),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isItem=e})),o["\u0275\u0275elementStart"](88,"option",21),o["\u0275\u0275text"](89,"Yes"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](90,"option",21),o["\u0275\u0275text"](91,"No"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](92,S,3,0,"div",15),o["\u0275\u0275template"](93,y,2,1,"div",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](94,k,11,1,"table",22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](95,"div",23),o["\u0275\u0275elementStart"](96,"div",5),o["\u0275\u0275template"](97,E,3,1,"div",24),o["\u0275\u0275template"](98,D,2,1,"ng-template",null,25,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](100,"div",26),o["\u0275\u0275elementStart"](101,"button",27),o["\u0275\u0275listener"]("click",(function(){return t.closeModal(!1)})),o["\u0275\u0275text"](102),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](99);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.title),o["\u0275\u0275advance"](11),o["\u0275\u0275textInterpolate"](t.regno),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.serviceDetails.invoiceNo),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.serviceDetails.lastServiceDate),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.serviceDetails.lastServiceKm),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("data",t.serviceCenters)("preSelected",o["\u0275\u0275pureFunction1"](26,I,t.serviceDetails.serviceCenter)),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.serviceDetails.serviceLocation),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.serviceDetails.scheduleServices),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf","true"==t.serviceDetails.scheduleServices),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","true"==t.serviceDetails.scheduleServices),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.serviceDetails.amount),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.serviceDetails.tax),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](t.serviceDetails.totalAmount),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.serviceDetails.remark),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngForOf",t.serviceType),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.isItem),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("value",1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",1==t.isItem),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",1==t.isItem),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",1==t.isItem),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",0==t.edit)("ngIfElse",e),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](t.btn1)}},directives:[u.d,u.r,u.u,x.a,u.x,u.m,v.a,u.D,u.w,u.G,i.u,i.t,u.a],styles:["label[_ngcontent-%COMP%]{font-weight:500}.row[_ngcontent-%COMP%]{margin-bottom:15px}.add-remove-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px;display:inline-block;font-size:13px;margin:10px 1px 1px}.checkbox-flex[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.inside-checkbox[_ngcontent-%COMP%]{width:33%;margin:0;text-align:left;line-height:normal}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();function z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.data[2*e+1]?t.data[2*e+1].head+":":"")}}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.data[2*e+1]?t.data[2*e+1].value:""," ")}}function F(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275elementStart"](1,"div",8),o["\u0275\u0275elementStart"](2,"label"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",9),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,z,3,1,"div",10),o["\u0275\u0275template"](7,V,2,1,"div",11),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](n.data[2*e].head+":"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",n.data[2*e].value," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.data[2*e+1]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.data[2*e+1])}}function j(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n+1),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.Item),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.Quantity),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.Amount)}}function A(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h5"),o["\u0275\u0275text"](2,"Item Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"table",12),o["\u0275\u0275elementStart"](4,"thead"),o["\u0275\u0275elementStart"](5,"th"),o["\u0275\u0275text"](6,"#"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"th"),o["\u0275\u0275text"](8,"Item"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th"),o["\u0275\u0275text"](10,"Quantity"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"tbody"),o["\u0275\u0275template"](14,j,9,4,"tr",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](14),o["\u0275\u0275property"]("ngForOf",e.items)}}let R=(()=>{class e{constructor(e,t,n,i,a,o){this.api=e,this.common=t,this.date=n,this.user=i,this.modalService=a,this.activeModal=o,this.jobId=null,this.vehicleId=null,this.numbers=[],this.data=[],this.items=null,this.jobId=this.common.params.jobId,this.vehicleId=this.common.params.vehicleId,this.serviceMaintenanceType()}ngOnInit(){}serviceMaintenanceType(){this.common.loading++,this.api.get("VehicleMaintenance/viewDetailed?jobId="+this.jobId+"&vehicleId="+this.vehicleId).subscribe(e=>{this.common.loading--,console.log("res['data'][0]",e.data[0]);let t=Object.keys(e.data[0]);console.log("headings",t);for(let n=0;n<t.length;n++){const i=t[n],a=e.data[0][i];!i.startsWith("_")&&a&&this.data.push({head:i,value:a})}this.items=e.data[0]._itemsdetails;for(let n=0;n<Math.ceil(this.data.length/2);n++)this.numbers.push(n);console.log("Data Details",this.data)},e=>{this.common.loading--,console.log(e)})}closeModal(e){this.activeModal.close({response:e})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](b.a),o["\u0275\u0275directiveInject"](f.r),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["view-maintenance"]],decls:9,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row"],[1,"col-md-2","head"],[1,"col-md-4","value"],["class","col-md-2 head",4,"ngIf"],["class","col-md-4 value",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2,"Maintenance Details"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",(function(){return t.closeModal(!1)})),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,F,8,4,"div",5),o["\u0275\u0275template"](8,A,15,1,"div",6),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",t.numbers),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.items))},directives:[i.t,i.u],styles:["label[_ngcontent-%COMP%]{font-weight:500}.row[_ngcontent-%COMP%]{margin-bottom:15px}.add-remove-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px;display:inline-block;font-size:13px;margin:10px 1px 1px}.checkbox-flex[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.inside-checkbox[_ngcontent-%COMP%]{width:33%;margin:0;text-align:left;line-height:normal}.value[_ngcontent-%COMP%]{padding:0 0 0 3px;font-size:medium}.head[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();var N=n("WKxc"),K=n("wD9S");function L(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",10),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().addMaintenance()})),o["\u0275\u0275text"](1," Add Maintenance "),o["\u0275\u0275elementEnd"]()}}function G(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"span",16),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().common.getPDFFromTableId("maintenance")})),o["\u0275\u0275element"](2,"i",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",18),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().common.getCSVFromTableId("maintenance")})),o["\u0275\u0275element"](4,"i",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function $(e,t){if(1&e&&o["\u0275\u0275element"](0,"smart-table",20),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let H=(()=>{class e{constructor(e,t,n,i,a){this.datePipe=e,this.api=t,this.common=n,this.user=i,this.modalService=a,this.suggestionData=[],this.selectedVehicle=null,this.vehicleRegno=null,this.startTime=new Date((new Date).setMonth((new Date).getMonth()-1)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={}}ngOnInit(){}getvehicleData(e){console.log("Data::",e),this.selectedVehicle=e.id,this.vehicleRegno=e.regno,console.log("Vehicle Data: ",this.selectedVehicle)}refreshAuto(){let e=document.getElementsByName("suggestion")[0].value;""!=e&&null!=e||(this.vehicleRegno=null,this.selectedVehicle=null)}vehicleMaintenanceData(){let e={vId:this.selectedVehicle,fromDate:this.common.dateFormatter1(this.startTime),toDate:this.common.dateFormatter1(this.endTime)};this.data=[],this.common.loading++,this.api.post("VehicleMaintenance/view",e).subscribe(e=>{this.common.loading--,console.log("Data :",e),this.data=e.data||[];let t=this.data[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns()},e=>{this.common.loading--,console.log(e)})}getTableColumns(){let e={title:this.formatTitle("Action"),placeholder:this.formatTitle("Action")};this.table.data.headings.Action=e;let t=[];return console.log("Data=",this.data),this.data.map(e=>{this.valobj={};for(let t=0;t<this.headings.length;t++)console.log("doc index value:",e[this.headings[t]]),this.valobj[this.headings[t]]={value:e[this.headings[t]],class:"black",action:""};this.valobj.Action={icons:[{class:"fa fa-cog mr-3",action:this.viewDetails.bind(this,e)},this.user.permission.delete&&{class:"fa fa-trash",action:this.deleteMaintenance.bind(this,e)}],action:null},t.push(this.valobj)}),t}viewDetails(e){this.common.params={vehicleId:e._vid,jobId:e._jobid},this.modalService.open(R,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}addMaintenance(){if(!this.selectedVehicle||-1==this.selectedVehicle)return this.common.showError("Please select Vehicle Number"),!1;this.common.params={title:"Add Maintenance",vehicleId:this.selectedVehicle,regno:this.vehicleRegno},this.modalService.open(T,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&(this.vehicleMaintenanceData(),this.getTableColumns())})}addAdvanceMaintenance(){if(!this.selectedVehicle||-1==this.selectedVehicle)return this.common.showError("Please select Vehicle Number"),!1;this.common.params={title:"Add Maintenance",vehicleId:this.selectedVehicle,regno:this.vehicleRegno},this.modalService.open(N.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&(this.vehicleMaintenanceData(),this.getTableColumns())})}editMaintenance(e){if(!this.selectedVehicle)return this.common.showError("Please select Vehicle Number"),!1;this.common.params={title:"Edit Maintenance",vehicleId:this.selectedVehicle,regno:this.vehicleRegno,row:e},this.modalService.open(T,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&(this.vehicleMaintenanceData(),this.getTableColumns())})}resetData(e){this.selectedVehicle=-1,console.log(e)}deleteMaintenance(e){if(!confirm("Are you sure you want to delete?"))return;console.log("delete Maintenance",e);let t={vehicleId:e._vid,jobId:e._jobid};this.common.loading++,this.api.post("VehicleMaintenance/deleteMaintenance",t).subscribe(e=>{this.common.loading--,console.log("Data :",e),e.data[0].r_id>0?(this.vehicleMaintenanceData(),this.common.showToast("Maintenance Deleted Successfully")):this.common.showError(e.data[0].r_msg)},e=>{this.common.loading--,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.f),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](f.r))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["add-vehicle-maintenance"]],decls:20,vars:9,consts:[[2,"margin","0px","padding-top","0px","border","0px","height","100%"],[2,"padding-bottom","0px"],[1,"container"],[1,"row"],[1,"w-100"],[1,"col-md-2","pr-0"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected","change"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-1","offset-md-08"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],[1,"col-md-2","offset-md-08"],["type","submit","class","btn btn-primary m-0",3,"click",4,"ngIf"],["class","col-12 text-right",4,"ngIf"],["class","maintenance-details","id","maintenance",3,"data","settings",4,"ngIf"],[1,"col-12","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","maintenance",1,"maintenance-details",3,"data","settings"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card",0),o["\u0275\u0275elementStart"](1,"nb-card-body",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"form",4),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"auto-suggestion",6),o["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e)}))("change",(function(e){return t.resetData(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"uj-date-time-picker",7),o["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",5),o["\u0275\u0275elementStart"](11,"uj-date-time-picker",8),o["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",9),o["\u0275\u0275elementStart"](13,"button",10),o["\u0275\u0275listener"]("click",(function(){return t.vehicleMaintenanceData()})),o["\u0275\u0275text"](14," View "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",11),o["\u0275\u0275template"](16,L,2,0,"button",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",11),o["\u0275\u0275template"](18,G,5,0,"div",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](19,$,1,2,"smart-table",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("isTime",!1)("isStart",!1)("isStart",!1)("dateTimeValue",t.endTime),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",t.user.permission.add),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.data.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.data&&t.data.length>0))},directives:[l.s,l.r,u.H,u.s,u.t,v.a,x.a,i.u,K.a],styles:['.row[_ngcontent-%COMP%]{margin-bottom:15px}.btn[_ngcontent-%COMP%]{text-transform:capitalize;margin:0}[_nghost-%COMP%]     .fa-cog{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-cog span{position:absolute;display:none;padding:15px 46px;font-weight:400;font-size:11px;left:-54px;top:-37px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-cog span:before{content:"Maintenance Details";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-cog span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-cog:hover span{display:block}[_nghost-%COMP%]     .fa-trash{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-32px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}.pdf-icon[_ngcontent-%COMP%]{font-size:24px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:24px;color:#217346}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();function B(e,t){if(1&e&&o["\u0275\u0275element"](0,"smart-table",12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let U=(()=>{class e{constructor(e,t,n,i,a,o){this.api=e,this.datePipe=t,this.common=n,this.user=i,this.modalService=a,this.activeModal=o,this.title="",this.data=[],this.fodata=[],this.reportData={id:null,status:""},this.selectedVehicle=null,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.handleModalSize("class","modal-lg","1200"),this.title=this.common.params.title,this.reportData.status=this.common.params.status,console.info("report data",this.reportData),this.getReport()}ngOnInit(){}closeModal(e){this.activeModal.close({response:e})}printPDF(e){}getTableColumns(){let e=[];return console.log("Data=",this.data),this.data.map(t=>{console.log("Doc Data:",t),this.valobj={};for(let e=0;e<this.headings.length;e++)console.log("doc index value:",t[this.headings[e]]),this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};e.push(this.valobj)}),e}getReport(){let e={id:this.common.params.docReoprt.maintenance_type_id,reportType:this.reportData.status};this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("VehicleMaintenance/getMaintenanceSummaryReports",{reportType:e.reportType,maintTypeId:e.id}).subscribe(e=>{this.common.loading--,this.data=e.data;let t=this.data[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns()},e=>{this.common.loading--,console.log(e)})}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}checkForPdf(e){var t=e.split(".");return"pdf"==t[t.length-1]}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](i.f),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](f.r),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["maintenance-report"]],features:[o["\u0275\u0275ProvidersFeature"]([i.f])],decls:14,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[2,"margin-left","15px"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["src","assets/images/elogist.png","alt","logo","id","img-logo",2,"display","none"],["id","doc_report",3,"data","settings",4,"ngIf"],["id","doc_report",3,"data","settings"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementStart"](3,"span",2),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275listener"]("click",(function(){return t.printPDF("doc_report")})),o["\u0275\u0275element"](5,"i",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"span",5),o["\u0275\u0275listener"]("click",(function(){return t.common.getCSVFromTableId("doc_report")})),o["\u0275\u0275element"](7,"i",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",7),o["\u0275\u0275listener"]("click",(function(){return t.closeModal(!1)})),o["\u0275\u0275elementStart"](9,"span",8),o["\u0275\u0275text"](10,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",9),o["\u0275\u0275element"](12,"img",10),o["\u0275\u0275template"](13,B,1,2,"smart-table",11),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",t.title," "),o["\u0275\u0275advance"](11),o["\u0275\u0275property"]("ngIf",t.data.length))},directives:[i.u,K.a],styles:[".data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black, [_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#0bff0b;color:#000}[_nghost-%COMP%]    .default{background:transparent;border:transparent}[_nghost-%COMP%]    .icon, [_nghost-%COMP%]    .image{color:#0e0e3a;font-size:18px}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238!important}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:-10px -1rem -1rem auto;outline:none;font-size:28px}.exel-icon[_ngcontent-%COMP%], .pdf-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}"]}),e})();function W(e,t){if(1&e&&o["\u0275\u0275element"](0,"smart-table",6),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let q=(()=>{class e{constructor(e,t,n,i,a,o){this.api=e,this.common=t,this.date=n,this.user=i,this.modalService=a,this.activeModal=o,this.vehicleRegNo=null,this.headings=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.jobId=null,this.vehicleId=null,this.numbers=[],this.details=[],this.items=null,this.jobId=this.common.params.jobId,this.vehicleId=this.common.params.vId,this.vehicleRegNo=this.common.params.vehicleRegNo,this.getDocumentData()}ngOnInit(){}getDocumentData(){this.common.loading++,this.api.get("VehicleMaintenance/viewSummaryDetails?jobId="+this.jobId+"&vehicleId="+this.vehicleId).subscribe(e=>{this.common.loading--,this.details=e.data,this.setTable(e.data)},e=>{this.common.loading--,console.log(e)})}getTableColumns(e){let t=[];return e.map(e=>{let n={},i={maintenance_type_id:0};for(var a=0;a<this.headings.length;a++){let t=e[this.headings[a]],o="",r=0;if(t&&(t+"").indexOf("_")>0){let e=t.split("_");o=e[0],r=e[1]}else r=t;i.maintenance_type_id=e._type_id,n[this.headings[a]]={value:r}}t.push(n)}),t}setTable(e){console.log("data Count",e.length),this.headings=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},console.info("dashbord Data",e);let t=e[0];for(var n in this.table.data.headings={},t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns(e)}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}closeModal(e){this.activeModal.close({response:e})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](b.a),o["\u0275\u0275directiveInject"](f.r),o["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["view-summary-details"]],decls:8,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","tblsummary",3,"data","settings",4,"ngIf"],["id","tblsummary",3,"data","settings"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",(function(){return t.closeModal(!1)})),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,W,1,2,"smart-table",5),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("Maintenance Details : ",t.vehicleRegNo,""),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",t.details&&t.details.length))},directives:[i.u,K.a],styles:["label[_ngcontent-%COMP%]{font-weight:500}.row[_ngcontent-%COMP%]{margin-bottom:15px}.add-remove-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px;display:inline-block;font-size:13px;margin:10px 1px 1px}.checkbox-flex[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.inside-checkbox[_ngcontent-%COMP%]{width:33%;margin:0;text-align:left;line-height:normal}.value[_ngcontent-%COMP%]{padding:0 0 0 3px;font-size:medium}.head[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),e})();function J(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",14),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function Z(e,t){if(1&e&&o["\u0275\u0275element"](0,"smart-table",15),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let Q=(()=>{class e{constructor(e,t,n,i){this.api=e,this.common=t,this.user=n,this.modalService=i,this.maintenanceData=[],this.headings=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.types=[{id:0,name:"All"},{id:1,name:"Expired"},{id:2,name:"Expiring in 30 days"}],this.typeId="0",this.getDocumentData(),this.common.refresh=this.refresh.bind(this),console.log("foid:",this.user._customer.id)}ngOnInit(){}formatTitle(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}refresh(){console.log("Refresh"),this.getDocumentData()}getDocumentData(){this.common.loading++,this.api.post("VehicleMaintenance/getMaintenanceSummary",{}).subscribe(e=>{this.common.loading--,this.maintenanceData=e.data,this.setTable(e.data)},e=>{this.common.loading--,console.log(e)})}getTableColumns(e){let t=[];return e.map(e=>{let n={},i={maintenance_type_id:0};for(var a=0;a<this.headings.length;a++){let t=e[this.headings[a]],o="",r=0;if(t&&(t+"").indexOf("_")>0){let e=t.split("_");o=e[0],r=e[1]}else r=t;i.maintenance_type_id=e._type_id,n[this.headings[a]]={value:r}}n.details={value:"Details",class:"blue",action:this.viewSummaryDetails.bind(this,e._jobid,e._vid,e.Vehicle)},t.push(n)}),t}viewSummaryDetails(e,t,n){console.log("JobId",e,"Vid",t),e&&t?(this.common.params={jobId:e,vId:t,vehicleRegNo:n},this.modalService.open(q,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.refresh()})):this.common.showError("Failed")}openData(e,t){console.log("report",e,t),this.common.params={docReoprt:e,status:t,title:"Maintenance Report"},this.modalService.open(U,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&(this.getDocumentData(),window.location.reload())})}getSum(e){let t=0;return this.maintenanceData.map(n=>{t+=n[e]}),t}printPDF(e){this.common.loading++;let t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe(t=>{this.common.loading--,this.common.getPDFFromTableId(e,t.data.name,"Document Summary",null,"")},e=>{this.common.loading--,console.log(e)})}typeSelected(){switch(console.log("type",this.typeId),parseInt(this.typeId)){case-1:this.setTable(this.maintenanceData);break;case 0:case 1:case 2:this.setTable(this.maintenanceData.filter(e=>e._statusid==this.typeId))}}setTable(e){console.log("data Count",e.length),this.headings=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},console.info("dashbord Data",e);let t=e[0];for(var n in this.table.data.headings={},t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}console.log("hdgs:"),console.log(this.headings),console.log(this.table.data.headings),this.table.data.headings.details={title:"Details",placeholder:"Details"},this.table.data.columns=this.getTableColumns(e)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](f.r))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["maintenance-summary"]],decls:19,vars:3,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],[2,"display","block"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],[2,"padding-top","0px"],[1,"col-md-2"],["name","type",1,"form-control","mb-3",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","tblsummary",3,"data","settings",4,"ngIf"],[3,"value"],["id","tblsummary",3,"data","settings"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card",0),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"h5"),o["\u0275\u0275text"](5,"Maintenance Summary"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"span",4),o["\u0275\u0275elementStart"](8,"span",5),o["\u0275\u0275listener"]("click",(function(){return t.printPDF("tblsummary")})),o["\u0275\u0275element"](9,"i",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"span",7),o["\u0275\u0275listener"]("click",(function(){return t.common.getCSVFromTableId("tblsummary")})),o["\u0275\u0275element"](11,"i",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"nb-card-body",9),o["\u0275\u0275elementStart"](13,"div",1),o["\u0275\u0275elementStart"](14,"div",10),o["\u0275\u0275elementStart"](15,"select",11),o["\u0275\u0275listener"]("change",(function(){return t.typeSelected()}))("ngModelChange",(function(e){return t.typeId=e})),o["\u0275\u0275template"](16,J,2,2,"option",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](17,Z,1,2,"smart-table",13),o["\u0275\u0275element"](18,"br"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](15),o["\u0275\u0275property"]("ngModel",t.typeId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.types),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.maintenanceData&&t.maintenanceData.length))},directives:[l.s,l.v,l.r,u.D,u.r,u.u,i.t,i.u,u.w,u.G,K.a],styles:[".red[_ngcontent-%COMP%]{background:red;color:#fff}.pink[_ngcontent-%COMP%]{background:pink;color:#000}.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .black{color:#000}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     #tblsummary .tableFixHead{overflow:auto;height:auto!important;max-height:calc(100vh - 230px)!important}"]}),e})();var Y=n("nGd9"),X=n("6Jfz"),ee=n("tUv6"),te=n("LvDl"),ne=n("I3j9"),ie=n("5pkc"),ae=n("skNO"),oe=n("VJ3l"),re=n("Mfh5"),se=n("urU0"),le=n("1i8C"),ce=n("M5JG"),de=n("3a3o"),pe=n("wd/R"),me=n("INKT"),he=n("ZyeE"),ge=n("jjvj"),be=n("iJpb"),fe=n("d/uI"),ue=n("yotz"),xe=n("z+eI");const ve=function(e){return{"background-color":e}};function Ce(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](3).choosePrimarySubStatus(n)})),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",29),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](3,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",e.name," (",e.length,") ")}}function _e(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",30),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"titlecase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](6,3,e.name)," (",n.pdfData.secondary.kpiGroups[e.name].length,") ")}}function Me(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",20),o["\u0275\u0275elementStart"](1,"div",21),o["\u0275\u0275elementStart"](2,"div",22),o["\u0275\u0275elementStart"](3,"div",12),o["\u0275\u0275elementStart"](4,"div",13),o["\u0275\u0275elementStart"](5,"span"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",23),o["\u0275\u0275element"](8,"chart",24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",14),o["\u0275\u0275elementStart"](10,"div",25),o["\u0275\u0275template"](11,Ce,6,5,"nb-card",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",21),o["\u0275\u0275elementStart"](13,"div",11),o["\u0275\u0275elementStart"](14,"div",12),o["\u0275\u0275elementStart"](15,"div",13),o["\u0275\u0275elementStart"](16,"span"),o["\u0275\u0275text"](17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",23),o["\u0275\u0275element"](19,"chart",24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",14),o["\u0275\u0275elementStart"](21,"div",25),o["\u0275\u0275template"](22,_e,7,7,"nb-card",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](23,"div"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",e.isMapView),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](e.pdfData.primary.name),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("data",e.pdfData.primary.chartData)("options",e.pdfData.primary.chartOptions),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.pdfData.primary.list),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",e.isMapView),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](e.pdfData.secondary.name),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("data",e.pdfData.secondary.chartData)("options",e.pdfData.secondary.chartOptions),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.pdfData.secondary.list)}}function Se(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).filterData(n.name)})),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"titlecase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](6,3,e.name)," (",n.pdfData.tripStart.kpiGroups[e.name].length,") ")}}function ye(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).filterData(n.name)})),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"titlecase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](6,3,e.name)," (",n.pdfData.tripEnd.kpiGroups[e.name].length,") ")}}function Oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body"),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275element"](3,"smart-table",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("id","print-table-"+n),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("data",e.data)("settings",e.settings)}}const Pe=function(e){return{width:e}},we=function(){return{bottom:!1,right:!0,top:!1,left:!1}};function ke(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",3),o["\u0275\u0275elementStart"](3,"h4"),o["\u0275\u0275text"](4,"Trip dashboard"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,Me,24,10,"div",4),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275element"](8,"i",7),o["\u0275\u0275element"](9,"i",8),o["\u0275\u0275element"](10,"hr"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",9),o["\u0275\u0275elementStart"](12,"div",10),o["\u0275\u0275elementStart"](13,"div",11),o["\u0275\u0275elementStart"](14,"div",12),o["\u0275\u0275elementStart"](15,"div",13),o["\u0275\u0275elementStart"](16,"span"),o["\u0275\u0275text"](17,"Top 5 Trip Start"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",14),o["\u0275\u0275elementStart"](19,"div",15),o["\u0275\u0275template"](20,Se,7,7,"nb-card",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](21,"div",17),o["\u0275\u0275elementStart"](22,"div",18),o["\u0275\u0275elementStart"](23,"div",11),o["\u0275\u0275elementStart"](24,"div",12),o["\u0275\u0275elementStart"](25,"div",13),o["\u0275\u0275elementStart"](26,"span"),o["\u0275\u0275text"](27,"Top 5 Trip End"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",14),o["\u0275\u0275elementStart"](29,"div",15),o["\u0275\u0275template"](30,ye,7,7,"nb-card",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",19),o["\u0275\u0275listener"]("resizeEnd",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onResizeEnd(t,"smartTable")})),o["\u0275\u0275template"](32,Oe,4,3,"nb-card",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",e.pdfData.primary.list.length),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("hidden",e.isMapView),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",e.pdfData.tripStart.list),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("hidden",e.isMapView),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",e.pdfData.tripEnd.list),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",o["\u0275\u0275pureFunction1"](9,Pe,e.isMapView?e.widths.smartTable:"100%"))("resizeEdges",o["\u0275\u0275pureFunction0"](11,we)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.pdfData.tables)}}function Ee(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",39),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](5).selectSubStatus(n.kpis)})),o["\u0275\u0275element"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function De(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",52),o["\u0275\u0275elementStart"](1,"ul"),o["\u0275\u0275template"](2,Ee,3,1,"li",53),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.primarySubStatus)}}function Ie(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](3).choosePrimarySubStatus(n)})),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",41),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"titlecase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",45),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,De,3,1,"div",51),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](6,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,e.name)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.length," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.activePrimaryStatus==e.name)}}function Te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,Ie,10,8,"nb-card",16),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.primaryStatus)}}function ze(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](3).filterData(n.name)})),o["\u0275\u0275elementStart"](2,"div",27),o["\u0275\u0275element"](3,"div",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",41),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"titlecase"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",45),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](5,ve,e.bgColor)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,3,e.name)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",n.kpiGroups[e.name].length," ")}}function Ve(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,ze,9,7,"nb-card",16),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.kpiGroupsKeys)}}const Fe=function(e){return{transform:e}};function je(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",54),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"div",19),o["\u0275\u0275listener"]("resizeEnd",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](2).onResizeEnd(t,"smartTable")})),o["\u0275\u0275elementStart"](3,"div",55),o["\u0275\u0275element"](4,"smart-table",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",56),o["\u0275\u0275element"](6,"div",57),o["\u0275\u0275elementStart"](7,"div",58),o["\u0275\u0275element"](8,"img",59),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngClass",e.isMapView?"col-sm-12 p-0":"col-sm-9 p-0"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",o["\u0275\u0275pureFunction1"](9,Pe,e.isMapView?e.widths.smartTable:"100%"))("resizeEdges",o["\u0275\u0275pureFunction0"](11,we)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",!e.isMapView)("ngStyle",o["\u0275\u0275pureFunction1"](12,Pe,"calc(100% - "+e.widths.smartTable+")")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngStyle",o["\u0275\u0275pureFunction1"](14,Fe,e.rotate))}}function Ae(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card",34),o["\u0275\u0275elementStart"](1,"nb-card-body",35),o["\u0275\u0275elementStart"](2,"div",36),o["\u0275\u0275elementStart"](3,"div",37),o["\u0275\u0275elementStart"](4,"div",12),o["\u0275\u0275elementStart"](5,"div",38),o["\u0275\u0275elementStart"](6,"span",39),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().changeOptions("reverse")})),o["\u0275\u0275element"](7,"i",40),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",41),o["\u0275\u0275elementStart"](9,"span"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",38),o["\u0275\u0275elementStart"](12,"span",39),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().changeOptions("forward")})),o["\u0275\u0275element"](13,"i",42),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div"),o["\u0275\u0275element"](15,"chart",24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",43),o["\u0275\u0275elementStart"](17,"nb-card"),o["\u0275\u0275elementStart"](18,"nb-card-body",26),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().allData()})),o["\u0275\u0275elementStart"](19,"div",27),o["\u0275\u0275element"](20,"div",44),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",41),o["\u0275\u0275text"](22," All Data "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",45),o["\u0275\u0275text"](24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](25,Te,2,1,"div",0),o["\u0275\u0275template"](26,Ve,2,1,"div",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"button",46),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().generatePDF()})),o["\u0275\u0275element"](28,"i",47),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"span",48),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().common.getCSVFromTableId("print-section")})),o["\u0275\u0275element"](30,"i",49),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](31,je,9,16,"div",50),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("hidden",e.isMapView),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](e.viewName),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("data",e.chartData)("options",e.chartOptions),o["\u0275\u0275advance"](9),o["\u0275\u0275textInterpolate1"](" ",e.allKpis.length," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","showprim_status"==e.viewType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","showprim_status"!==e.viewType),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",e.table)}}let Re=(()=>{class e{constructor(e,t,n,i,a,o,r,s){this.api=e,this.common=t,this.user=n,this.formBuilder=i,this.modalService=a,this.mapService=o,this.dateService=r,this.pdfService=s,this.testingDate=this.common.dateFormatter(new Date,"",!1),this.submitted=!1,this.kpis=[],this.allKpis=[],this.searchTxt="",this.filters=[],this.viewType="showprim_status",this.viewName="Primary Status",this.left_heading="",this.center_heading="",this.kpiGroups=null,this.kpiGroupsKeys=[],this.keyGroups=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.viewIndex=0,this.viewOtions=[{name:"Primary Status",key:"showprim_status"},{name:"Secondary Status",key:"showsec_status"},{name:"Trip Start",key:"x_showtripstart"},{name:"Trip End",key:"x_showtripend"}],this.selectedFilterKey="",this.table=null,this.primaryStatus=[],this.subPrimaryStatus={},this.secondaryStatus=[],this.activePrimaryStatus="",this.primarySubStatus=[],this.widths={smartTable:"40%",map:"60%"},this.isMapView=!1,this.infoWindow=null,this.infoStart=null,this.isZoomed=!1,this.lastRefreshTime=new Date,this.pdfData={primary:{name:"Primary",chartData:null,chartOptions:null,list:[],key:"showprim_status"},secondary:{name:"Secondary",chartData:null,chartOptions:null,list:[],key:"showsec_status",kpiGroups:null},tripStart:{name:"Trip Start",chartData:null,chartOptions:null,list:[],key:"x_showtripstart",kpiGroups:null},tripEnd:{name:"Trip End",chartData:null,chartOptions:null,list:[],key:"x_showtripend",kpiGroups:null},tables:[]},this.rotate="",this.getKPIS(),this.common.currentPage="",this.common.refresh=this.refresh.bind(this)}ngOnInit(){this.registerForm=this.formBuilder.group({firstName:["",u.F.required],lastName:["",u.F.required],search:["",u.F.required]})}ngAfterViewInit(){this.common.stopScroll()}ngOnDestroy(){this.mapService.map=null,this.common.continuoueScroll()}get f(){return this.registerForm.controls}onSubmit(){this.submitted=!0,this.registerForm.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.registerForm.value))}refresh(){console.log("Refresh"),this.getKPIS()}getKPIS(e){this.lastRefreshTime=new Date,!e&&this.common.loading++,this.api.get("VehicleKpis").subscribe(t=>{!e&&this.common.loading--,console.log("KPIS:",t),1==t.code&&(t.data=t.data.filter(e=>-1!==[301,311,321].indexOf(e.x_sec_status)),this.allKpis=t.data,localStorage.setItem("KPI_DATA",JSON.stringify(this.allKpis)),this.kpis=t.data,this.grouping(this.viewType),this.table=this.setTable(),this.handlePdfPrint())},t=>{!e&&this.common.loading--})}getTableColumns(e){let t=[];return(e||this.kpis).map((e,n)=>{t.push({vechile:{value:e.x_showveh,action:this.getZoomAndaddShortTarget.bind(this,e),colActions:{dblclick:this.showDetails.bind(this,e),click:this.addShortTarget.bind(this,e),mouseover:this.rotateBounce.bind(this,e,n),mouseout:this.mapService.toggleBounceMF.bind(this.mapService,n,2)}},status:{value:e.showprim_status,action:this.showDetails.bind(this,e)},location:{value:e.Address,action:this.showLocation.bind(this,e)},hrs:{value:e.x_hrssince,action:""},Idle_Time:{value:this.common.changeTimeformat(e.x_idle_time),action:""},trip:{value:this.common.getTripStatusHTML(e.trip_status_type,e.x_showtripstart,e.x_showtripend,e.x_p_placement_type,e.x_p_loc_name),action:this.getUpadte.bind(this,e),isHTML:!0},kmp:{value:e.x_kmph,action:""},action:{value:"",isHTML:!1,action:null,icons:this.actionIcons(e)},rowActions:{click:"selectRow"}})}),t}getViewType(){this.table.data.columns=this.getTableColumns(),this.grouping(this.viewType)}grouping(e){this.kpis=this.allKpis,this.kpiGroups=te.groupBy(this.allKpis,e),this.kpiGroupsKeys=Object.keys(this.kpiGroups),this.keyGroups=[],"showprim_status"==e?(this.primaryStatusGrouping(),this.primaryStatus.map(e=>{const t=Math.floor(359*Math.random()+1);this.keyGroups.push({name:e.name,bgColor:`hsl(${t}, 100%, 75%)`,textColor:`hsl(${t}, 100%, 25%)`}),e.bgColor=`hsl(${t}, 100%, 75%)`,e.textColor=`hsl(${t}, 100%, 25%)`})):this.kpiGroupsKeys.map(e=>{const t=Math.floor(359*Math.random()+1);this.keyGroups.push({name:e,bgColor:`hsl(${t}, 100%, 75%)`,textColor:`hsl(${t}, 100%, 25%)`})}),this.sortData(e)}primaryStatusGrouping(){this.primaryStatus=[],this.allKpis.map(e=>{let t=e.showprim_status.split(","),n=t.splice(0,1)[0].trim(),i=t.join(",").trim(),a=!1;"No Data 12 Hr"==n?(n="Issue",i="12 Hr +"):"Undetected"==n?(n="Issue",i="Undetected"):"No GPS Data"==n&&(n="Issue",i="No GPS Data"),this.primaryStatus.map(t=>{t.name==n&&(a=!0,t.length++,t.subStatus[i]?t.subStatus[i].push(e):t.subStatus[i]=[e])}),a||(this.primaryStatus.push({name:n,length:1,subStatus:{}}),this.primaryStatus[this.primaryStatus.length-1].subStatus[i]=[e])})}sortData(e){let t=[];this.chartColors=[];let n=[],i=[];"showprim_status"==e?(console.log("---------------------"),this.primaryStatus=te.sortBy(this.primaryStatus,["length"]).reverse(),this.primaryStatus.map(e=>{this.chartColors.push(e.bgColor),n.push(e.name),i.push(e.length)})):(this.keyGroups.map(e=>{t.push({group:e,length:this.kpiGroups[e.name].length})}),this.kpiGroupsKeys=[],te.sortBy(t,["length"]).reverse().map(e=>{this.kpiGroupsKeys.push(e.group)}),this.kpiGroupsKeys.map(e=>{this.chartColors.push(e.bgColor),n.push(e.name),i.push(this.kpiGroups[e.name].length)}));let a=this.common.pieChart(n,i,this.chartColors);this.chartData=a.chartData,this.chartOptions=a.chartOptions,console.log("Chart Data:",this.chartData),this.selectedFilterKey&&this.filterData(this.selectedFilterKey,e)}filterData(e,t){if("showprim_status"==this.viewType||"showprim_status"==t){if(this.kpis=[],"All"==e)this.primaryStatus.map(e=>{Object.keys(e.subStatus).map(t=>{e.subStatus[t].map(e=>{this.kpis.push(e)})})});else for(let t=0;t<this.primaryStatus.length;t++)if(this.primaryStatus[t].name==e){Object.keys(this.primaryStatus[t].subStatus).map(e=>{this.primaryStatus[t].subStatus[e].map(e=>{this.kpis.push(e)})});break}}else"All"==e?this.kpis=this.allKpis:(this.selectedFilterKey=e,this.kpis=this.allKpis.filter(t=>t[this.viewType]==e));this.table=this.setTable()}showLocation(e){e.x_tlat?(this.common.params={location:{lat:e.x_tlat,lng:e.x_tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(X.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}findVehicle(){this.kpis=this.searchTxt?this.allKpis.filter(e=>e.x_showveh.toUpperCase().includes(this.searchTxt.toUpperCase())):this.allKpis}findFilters(){this.filters=["all"],this.allKpis.map(e=>{-1==this.filters.indexOf(e.showprim_status)&&this.filters.push(e.showprim_status)})}showDetails(e){this.common.params={kpi:e},this.modalService.open(Y.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="kpisDetails"}getLR(e){this.common.loading++,this.api.post("FoDetails/getLorryDetails",{x_lr_id:e.x_lr_id}).subscribe(e=>{this.common.loading--,this.showLR(e.data[0])},e=>{this.common.loading--})}showLR(e){this.common.params={images:[{name:"Lr",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other_Image",image:e.other_image}],title:"LR Details"},this.modalService.open(ee.a,{size:"lg",container:"nb-layout"})}changeOptions(e){"forward"===e?(++this.viewIndex,this.viewIndex>this.viewOtions.length-1&&(this.viewIndex=0)):(--this.viewIndex,this.viewIndex<0&&(this.viewIndex=this.viewOtions.length-1)),this.viewType=this.viewOtions[this.viewIndex].key,this.viewName=this.viewOtions[this.viewIndex].name,this.grouping(this.viewType)}allData(){this.selectedFilterKey="",this.filterData("All")}reportIssue(e){this.common.params={refPage:"db"},this.modalService.open(ne.a,{size:"sm",container:"nb-layout"}).result.then(t=>t.status&&this.common.reportAnIssue(t.issue,e.x_vehicle_id))}setTable(e){return{data:{headings:{vechile:{title:"Vehicle Number",placeholder:"Vehicle No"},status:{title:"Status",placeholder:"Status"},location:{title:"Location",placeholder:"Location"},hrs:{title:"Hrs",placeholder:"Hrs "},Idle_Time:{title:"Idle Time",placeholder:"Idle Time"},trip:{title:"Trip",placeholder:"Trip"},kmp:{title:"Kmp",placeholder:"KMP"},action:{title:"Action",placeholder:"",hideSearch:!0}},columns:this.getTableColumns(e)},settings:{hideHeader:!0,count:{icon:"fa fa-map",action:this.handleMapView.bind(this)},tableHeight:"87vh"}}}choosePrimarySubStatus(e){if(e.name==this.activePrimaryStatus)return this.activePrimaryStatus="",void(this.primarySubStatus=[]);if(1==Object.keys(e.subStatus).length)return this.kpis=e.subStatus[Object.keys(e.subStatus)[0]],this.table=this.setTable(),this.primarySubStatus=[],void(this.activePrimaryStatus="");let t=[];Object.keys(e.subStatus).map((n,i)=>{0==i&&t.push({id:0,name:"All",kpis:[]}),e.subStatus[n].map(e=>t[0].kpis.push(Object.assign({},e))),t.push({id:i+1,name:(n||e.name)+" : "+e.subStatus[n].length,kpis:e.subStatus[n]})}),t[0].name+=" : "+t[0].kpis.length,this.primarySubStatus=t,this.activePrimaryStatus=e.name}selectSubStatus(e){this.kpis=e,this.table=this.setTable()}vehicleReport(e){this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,ref_page:"consView"},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(ae.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"myCustomModalClass"})}openRouteMapper(e){let t,n,i;t=new Date,n=e.x_showstarttime?this.common.dateFormatter(e.x_showstarttime):new Date(t.setDate(t.getDate()-2)),i=this.common.dateFormatter(n);let a=this.common.dateFormatter(i),o=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,fromTime:a,toTime:o},console.log("open Route Mapper modal",this.common.params),this.modalService.open(oe.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}openTripDetails(e){let t,n,i;t=new Date,n=new Date(t.setMonth(t.getMonth()-2)),i=this.common.dateFormatter(n);let a=this.common.dateFormatter(i),o=this.common.dateFormatter(new Date);this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,fromTime:a,toTime:o},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(re.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}vehicleOnMap(){this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicles:this.kpis},this.modalService.open(ie.a,{size:"lg",container:"nb-layout"})}onResizeEnd(e,t){this.widths[t]=e.rectangle.width+"px"}initialiseMap(){this.mapService.map&&"concise-view-map"==this.mapService.map.__gm.Z.id?this.mapService.map.__gm.Z=document.getElementById("concise-view-map"):this.mapService.mapIntialize("concise-view-map"),this.mapService.clearAll();for(let e=0;e<this.kpis.length;e++)this.kpis[e].color="No Data 12 Hr"==this.kpis[e].showprim_status||"Undetected"==this.kpis[e].showprim_status||"No GPS Data"==this.kpis[e].showprim_status?"ff0000":this.kpis[e].x_idle_time/60>0?"ffff00":"00ff00";setTimeout(()=>{this.mapService.setMapType(0),this.mapService.createMarkers(this.kpis),this.mapService.addListerner(this.mapService.map,"center_changed",()=>{this.setMarkerLabels()}),this.mapService.addListerner(this.mapService.map,"zoom_changed",()=>{this.setMarkerLabels()});let e=0;for(const t of this.mapService.markers){let n=this.kpis[e];this.mapService.addListerner(t,"mouseover",()=>this.setEventInfo(n)),this.mapService.addListerner(t,"mouseout",()=>this.unsetEventInfo()),e++}},1e3)}setMarkerLabels(){if(0!=this.mapService.markers.length)for(const e of this.mapService.markers)e.setLabel("");if(this.mapService.map.getZoom()>=9)for(let e=0;e<this.mapService.markers.length;e++)this.mapService.markers[e].setLabel(this.kpis[e].x_showveh)}setEventInfo(e){this.infoStart=(new Date).getTime(),this.infoWindow&&this.infoWindow.close(),this.infoWindow=this.mapService.createInfoWindow(),this.infoWindow.opened=!1,this.infoWindow.setContent(`\n       <b>Vehicle:</b>${e.x_showveh} <br>\n       <span><b>Trip:</b>${this.common.getTripStatusHTML(e.trip_status_type,e.x_showtripstart,e.x_showtripend,e.x_p_placement_type,e.x_p_loc_name)}</span> <br>\n       <b>Status:</b>${e.showprim_status} <br>\n       <b>Location:</b>${e.Address} <br>\n       `),this.rotateBounce(e,null,!1),this.infoWindow.setPosition(this.mapService.createLatLng(e.x_tlat,e.x_tlong)),this.infoWindow.open(this.mapService.map),this.mapService.getMapBounds()}unsetEventInfo(){(new Date).getTime()-this.infoStart>500&&(this.infoWindow.close(),this.infoWindow.opened=!1)}handleMapView(){if(this.isZoomed)return this.isZoomed=!1,this.mapService.setMapType(0),void this.mapService.resetBounds();this.isMapView=!this.isMapView,setTimeout(()=>{this.initialiseMap()},1e3)}rotateBounce(e,t,n=!0){this.rotate="rotate("+e.x_angle+"deg)",n&&this.mapService.toggleBounceMF(t)}getUpadte(e){this.common.params={tripDetils:{vehicleId:e.x_vehicle_id,siteId:e.x_hl_site_id},ref_page:"kpi"},this.modalService.open(ce.a,{size:"lg",container:"nb-layout",backdrop:"static"})}getZoomAndaddShortTarget(e){this.isMapView?this.getZoom(e):this.addShortTarget(e)}getZoom(e){if(e){let t=this.mapService.getLatLngValue(e),n=this.mapService.createLatLng(t.lat,t.lng);this.mapService.zoomAt(n),this.isZoomed=!0}}actionIcons(e){let t=[{class:" icon fa fa-chart-pie",action:this.openChangeStatusModal.bind(this,e)},{class:"icon fa fa-star",action:this.vehicleReport.bind(this,e)},{class:" icon fa fa-route",action:this.openRouteMapper.bind(this,e)},{class:" icon fa fa-truck",action:this.openTripDetails.bind(this,e)},{class:"icon fa fa-globe",action:this.openVehicleStates.bind(this,e)},{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,e)},{class:"icon fa fa-user-secret",action:this.openStations.bind(this,e)},{class:"icon fas fa-tachometer-alt",action:this.openOdoMeter.bind(this,e)},{class:"icon fas fa-flag-checkered",action:this.openentityFlag.bind(this,e)}];return"admin"!=this.user._loggedInBy&&t.shift(),t}openChangeStatusModal(e){let t=new Date,n=this.common.dateFormatter(new Date),i=new Date(t.setHours(t.getHours()-48)),a=this.common.dateFormatter(i),o={id:e.id,vehicle_id:e.x_vehicle_id,tTime:n,suggest:null,latch_time:a,status:2,remark:e.remark};this.common.ref_page="tsfl",this.common.params=o,this.modalService.open(de.a,{size:"lg",container:"nb-layout"}).result.then(e=>{})}openVehicleStates(e){console.log("values",e),this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,lat:e.x_tlat,long:e.x_tlong,vregno:e.x_empname},this.modalService.open(se.a,{size:"lg",container:"nb-layout"})}onMouseMove(e){let t=pe(new Date),n=pe(this.lastRefreshTime);pe.duration(t.diff(n)).asMinutes()>=5&&this.getKPIS(!0)}addShortTarget(e){this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh},this.modalService.open(me.a,{size:"sm",container:"nb-layout"})}openStations(e){console.log("kpi-------------",e),this.common.params={lat:e.x_tlat,long:e.x_tlong},this.modalService.open(he.a,{size:"lg",container:"nb-layout"})}openOdoMeter(e){console.log("kpi data",e),this.common.params={vehicleId:e.x_vehicle_id,regno:e.x_showveh},console.log("Param",this.common.params),this.modalService.open(ge.a,{size:"lg",container:"nb-layout",backdrop:"static"})}openentityFlag(e){this.common.handleModalSize("class","modal-lg","800"),console.log("kpi data",e),this.common.params={title:"Entity Flag ",vehicleId:e.x_vehicle_id,regno:e.x_showveh},this.modalService.open(fe.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{})}getPdf(){this.common.downloadPdf("Content1")}handlePdfPrint(){let e={key:this.viewType,name:this.viewName};["primary","secondary","tripStart","tripEnd"].map(e=>{console.log(e,this.pdfData),console.log("this.pdfData[status]",this.pdfData[e]),this.viewType=this.pdfData[e].key,this.grouping(this.viewType),console.log("this.pdfData[status]",this.pdfData[e]),console.log("Chafrt:::::::",JSON.stringify(this.chartData)),this.pdfData[e].chartData=Object.assign({},this.chartData),this.pdfData[e].chartOptions=Object.assign({},this.chartOptions),"primary"==e?this.pdfData[e].list=this.primaryStatus:(this.pdfData[e].list=this.kpiGroupsKeys,this.pdfData[e].kpiGroups=this.kpiGroups)}),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),console.log("PDF Data: ",this.pdfData),this.viewType=e.key,this.viewName=e.name,this.grouping(this.viewType)}generatePDF(){this.common.loading++;let e=this.user._customer.id;"customer"==this.user._loggedInBy&&(e=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:e}).subscribe(e=>{this.common.loading--,this.left_heading=e.data.name,this.center_heading="Trip Feedback Logs",console.log("center heading1",this.left_heading,this.center_heading)},e=>{this.common.loading--,console.log(e)}),setTimeout(()=>{this.common.loading++,this.pdfData.tables=[],console.log("helooo");let e=this.pdfData.primary.list;console.log("list123------------------",e),console.log("KPIS:",this.primaryStatus),this.primaryStatus.map(e=>{let t=[];Object.keys(e.subStatus).map(n=>{t.push(...e.subStatus[n])}),console.log("----------------------------PDF Tables:",t),this.pdfData.tables.push(this.setTable(t))});const t=[];this.pdfData.tables.map((e,n)=>{t.push("print-table-"+n)}),console.log("tableId",t),console.log("----------------------------PDF Tables:",this.pdfData),console.log("ids3",this.left_heading,this.center_heading),this.pdfService.tableWithImages("page-1",t,e,this.left_heading,this.center_heading)},2e3),this.common.loading--}cookPdfData(){let e={key:this.viewType,name:this.viewName};["primary","secondary","tripStart","tripEnd"].map(e=>{console.log(e,this.pdfData),console.log("this.pdfData[status]",this.pdfData[e]),this.viewType=this.pdfData[e].key,this.grouping(this.viewType),console.log("this.pdfData[status]",this.pdfData[e]),console.log("Chafrt:::::::",JSON.stringify(this.chartData)),this.pdfData[e].chartData=Object.assign({},this.chartData),this.pdfData[e].chartOptions=Object.assign({},this.chartOptions),"primary"==e?this.pdfData[e].list=this.primaryStatus:(this.pdfData[e].list=this.kpiGroupsKeys,this.pdfData[e].kpiGroups=this.kpiGroups)}),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),console.log("PDF Data: ",this.pdfData),this.viewType=e.key,this.viewName=e.name,this.grouping(this.viewType)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](u.g),o["\u0275\u0275directiveInject"](f.r),o["\u0275\u0275directiveInject"](le.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](be.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["concise"]],hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("mousemove",(function(e){return t.onMouseMove(e)}),!1,o["\u0275\u0275resolveDocument"])},decls:2,vars:2,consts:[[4,"ngIf"],["class","nb_card_box","style","border: 0px; height: 100%;",4,"ngIf"],["id","page-1",1,"status-print-view","pt-0"],[1,"status-print-title","text-center",2,"padding","20px 0px"],["class","row",4,"ngIf"],[1,"truck-route"],[1,"truck_road"],[1,"fas","fa-truck-moving","left-truck"],[1,"fas","fa-truck-moving","right-truck"],["id","page-2",1,"row"],[1,"col-sm-3","pl-5"],[1,"",2,"overflow","hidden",3,"hidden"],[1,"row",2,"font-size","16px","margin","0px","text-align","center","padding","8px 0px","background","linear-gradient(45deg,#30ccff 0,#5a9cff 100%)","color","#fff","border-radius","5px","margin-bottom","10px"],[1,"col-sm-12"],[1,"status_box"],[1,""],[4,"ngFor","ngForOf"],[1,"col-6"],[1,"col-sm-3","pr-5"],["mwlResizable","",1,"map-table-container",3,"enableGhostResize","ngStyle","resizeEdges","resizeEnd"],[1,"row"],[1,"col-sm-6"],[2,"overflow","hidden",3,"hidden"],[1,"chartbox"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[1,"graph-data"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-sm-9"],[2,"cursor","pointer"],[1,"col-sm-11","pr-0"],[3,"id"],[1,"home-page-tabel",2,"width","100%",3,"data","settings"],[1,"nb_card_box",2,"border","0px","height","100%"],[2,"padding","5px 5px 0px"],[1,"row","m-0"],[1,"col-sm-3","pl-0","pr-2",2,"height","90vh","overflow","hidden",3,"hidden"],[1,"col-sm-2"],[3,"click"],[1,"icon","ion-ios-rewind"],[1,"col-sm-8"],[1,"icon","ion-ios-fastforward"],[1,"status_box",2,"overflow","auto","height","calc(90vh - 250px)","max-height","calc(90vh - 250px)"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-3"],["type","button","pdf","",1,"btn","btn-primary","pdf-print",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer",3,"click"],[1,"fas","fa-file-excel"],["class","",3,"ngClass",4,"ngIf"],["class","select_option",4,"ngIf"],[1,"select_option"],[3,"click",4,"ngFor","ngForOf"],[1,"",3,"ngClass"],["id","print-section"],[2,"padding","0px","min-width","300px","display","inline-block","position","relative",3,"hidden","ngStyle"],["id","concise-view-map",2,"width","100%","height","87vh"],[1,"tracker_img",3,"ngStyle"],["src","./assets/images/arrow-top.png","alt","image"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,ke,33,12,"div",0),o["\u0275\u0275template"](1,Ae,32,8,"nb-card",1)),2&e&&(o["\u0275\u0275property"]("ngIf",t.allKpis.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.allKpis.length))},directives:[i.u,i.t,ue.a,i.x,xe.ChartComponent,l.s,l.r,K.a,i.r],pipes:[i.G],styles:['.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .icon{margin-right:5px;cursor:pointer}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#96ec11;color:#000}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0!important;border:none!important;border-top:1px solid #d7dee4!important}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:14px 10px;font-weight:700}.select_option[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:10px;margin-left:10px;margin-bottom:10px;margin-right:10px;-webkit-box-shadow:rgba(0,0,0,.2) 0 3px 10px 0;box-shadow:0 3px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:100%;margin-right:5px;display:inline-block;vertical-align:middle;-webkit-box-shadow:0 5px 10px 0 rgba(0,0,0,.2);box-shadow:0 5px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{background-color:#96ec11}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{background-color:#dc3545}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{background-color:#ff5200}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4)   span[_ngcontent-%COMP%]{background-color:#2196f3}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5)   span[_ngcontent-%COMP%]{background-color:#009688}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6)   span[_ngcontent-%COMP%]{background-color:#607d8b}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7)   span[_ngcontent-%COMP%]{background-color:#9c27b0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:10px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}mwlResizable[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box}.map-table-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;border-right:5px solid #fff}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:70px}[_nghost-%COMP%]     th:nth-child(3){width:70px}[_nghost-%COMP%]     th:nth-child(4){width:70px}[_nghost-%COMP%]     th:nth-child(5){width:42px}[_nghost-%COMP%]     th:nth-child(6){width:42px}[_nghost-%COMP%]     th:nth-child(7){width:110px}[_nghost-%COMP%]     th:nth-child(8){width:44px}[_nghost-%COMP%]     th:nth-child(9){width:90px}[_nghost-%COMP%]     th{position:relative;z-index:999}[_nghost-%COMP%]     th .sort-container{width:15px;display:none}[_nghost-%COMP%]     th .filter-input-container{width:auto}[_nghost-%COMP%]     th:hover .sort-container{display:inline-block}[_nghost-%COMP%]     th:hover .filter-input-container{width:calc(100% - 17px)}[_nghost-%COMP%]     td .icon.fa-chart-pie{color:#04a9f5}[_nghost-%COMP%]     td .icon.fa-chart-pie span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-chart-pie span:before{content:"Change Vehicle Status";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-star{color:#8518d5}[_nghost-%COMP%]     td .icon.fa-star span{position:absolute;display:none;padding:10px 44px;font-weight:400;font-size:11px;left:-36px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-star span:before{content:"Vehicle Event";display:block;position:absolute;top:0;left:0;background-color:#8518d5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8518d5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-star:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-route{color:#ff8091}[_nghost-%COMP%]     td .icon.fa-route span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-route span:before{content:"Route Tracker";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-route:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-truck{color:#5cd050}[_nghost-%COMP%]     td .icon.fa-truck span{position:absolute;display:none;padding:10px 23px;font-size:11px;font-weight:400;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-truck span:before{content:"Trips";display:block;position:absolute;top:0;left:0;background-color:#5cd050;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-truck span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #5cd050;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-truck:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-globe{color:#d51818}[_nghost-%COMP%]     td .icon.fa-globe span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-globe span:before{content:"Vehicle States";display:block;position:absolute;top:0;left:0;background-color:#d51818;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-globe span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d51818;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     td .icon.fa-globe:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle{color:#b150d0}[_nghost-%COMP%]     td .icon.fa-question-circle span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-62px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-question-circle span:before{content:"Report Issue";display:block;position:absolute;top:0;left:0;background-color:#b150d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #b150d0;position:absolute;bottom:-5px;right:10px}[_nghost-%COMP%]     td .icon.fa-user-secret{color:#50a1d0}[_nghost-%COMP%]     td .icon.fa-user-secret span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-user-secret span:before{content:"Station";display:block;position:absolute;top:0;left:0;background-color:#50a1d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-user-secret span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #50a1d0;position:absolute;bottom:-5px;right:22px}[_nghost-%COMP%]     td .icon.fa-user-secret:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-tachometer-alt{color:#ff8099}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:before{content:"Odometer";display:block;position:absolute;top:0;left:0;background-color:#ff8099;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8099;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-tachometer-alt:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-flag-checkered{color:#d84a11}[_nghost-%COMP%]     td .icon.fa-flag-checkered span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:before{content:"Entity flag";display:block;position:absolute;top:0;left:0;background-color:#d84a11;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d84a11;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-flag-checkered:hover span{display:block}[_nghost-%COMP%]     .loading{color:green}[_nghost-%COMP%]     .unloading{color:red}[_nghost-%COMP%]     .others{color:teal}.tracker_img[_ngcontent-%COMP%]{position:absolute;bottom:10px;z-index:999;width:40px;left:12px}.tracker_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 80px)}[_nghost-%COMP%]     .no-search{background:#fff;color:#000}.exel-icon[_ngcontent-%COMP%]{right:30px;background-color:#4fa9ff;font-size:16px;border-radius:100px;width:40px;height:40px;text-align:center;line-height:40px;color:#fff;-webkit-box-shadow:5px 4px 24px rgba(0,0,0,.4);box-shadow:5px 4px 24px rgba(0,0,0,.4)}.exel-icon[_ngcontent-%COMP%], .pdf-print[_ngcontent-%COMP%]{bottom:35px;position:absolute}.pdf-print[_ngcontent-%COMP%]{width:40px!important;height:40px!important;text-align:center!important;line-height:40px!important;border-radius:100%!important;padding:0;font-size:16px!important;margin-top:0!important;left:0;background-color:red!important;cursor:pointer!important}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}','.nb_card_box[_ngcontent-%COMP%]{position:absolute;top:70px;z-index:998}.status-print-view2[_ngcontent-%COMP%]{width:210mm;height:297mm;margin:auto}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{width:33%;display:inline-block;padding:0;font-size:14px;font-weight:700}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:15px 10px;display:block}.status-print-view[_ngcontent-%COMP%]{padding:15px;height:310mm;font-size:24px}.all_data[_ngcontent-%COMP%]{font-size:12px}.status-print-view[_ngcontent-%COMP%]   .dashboard_chart[_ngcontent-%COMP%]{width:60%;margin:16px auto 15px}.truck-route[_ngcontent-%COMP%]{position:relative;width:80%;margin:20px auto 40px}.truck_road[_ngcontent-%COMP%]{display:block;width:100%}.truck_road[_ngcontent-%COMP%]:before{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;bottom:-3px}.truck_road[_ngcontent-%COMP%]:after{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;right:0;bottom:-3px}.truck_road[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{background-color:#000;height:2px;margin:0}.left-truck[_ngcontent-%COMP%]{margin-left:15px}.right-truck[_ngcontent-%COMP%]{float:right;margin-right:15px}.truck_road[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font-size:40px;color:#f87003}#page-2[_ngcontent-%COMP%]   .status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]:first-child{border-top:0!important}.status-print-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;color:#55a1ff;font-size:28px;margin:0}']}),e})();var Ne=n("UTcu"),Ke=n("mNmA");const Le=[{path:"",component:c,children:[{path:"home",component:Re,canActivate:[Ne.a,Ke.b]},{path:"add-vehicle-maintenance",component:H,canActivate:[Ne.a,Ke.b]},{path:"maintenance-summary",component:Q,canActivate:[Ne.a,Ke.b]},{path:"view-modal-service",component:d.a,canActivate:[Ne.a,Ke.b]},{path:"view-sub-modal-service",component:p.a,canActivate:[Ne.a,Ke.b]}]}];let Ge=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.g.forChild(Le)],r.g]}),e})();var $e=n("vTDv"),He=n("FUS3");let Be=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[$e.a,He.a]]}),e})();var Ue=n("d2mR");let We=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[i.f],imports:[[Ge,$e.a,Be,He.a,Ue.a,xe.ChartModule,ue.b]]}),e})()}}]);