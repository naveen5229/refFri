!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=n(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(c)throw i}}}}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jkDv:function(n,a,r){"use strict";r.r(a),r.d(a,"AdminModule",(function(){return Kr}));var l=r("iInd"),c=r("H+bZ"),s=r("OlR4"),d=r("NTD5"),m=r("Nfpe"),g=r("8Y7J"),p=r("G0yt"),u=r("tKwJ"),h=r("SVse"),f=r("wD9S");function b(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",3),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var v,S=((v=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.escalationMatrix=null,this.matrixList=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.Matrixdata()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.Matrixdata()}},{key:"Matrixdata",value:function(){var e=this;this.common.loading++,this.api.post("FoTicketEscalation/getEscalationMatrix",{}).subscribe((function(t){e.common.loading--,console.log("res: "+t.msg),e.matrixList=t.msg;var n=e.matrixList[0],a={};for(var o in n)if("_"!=o.charAt(0)){e.headings.push(o);var r={title:e.formatTitle(o),placeholder:e.formatTitle(o)};a[o]=r}e.table.data={headings:a,columns:e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.matrixList),this.matrixList.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.Action={class:"",icons:e.actionIcons(n)},t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[];return t.push({class:"fa fa-edit",action:this.openAddIssueModel.bind(this,e)}),console.log("details-------:",e),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"openAddIssueModel",value:function(e){var t=this,n=e._issue_type_id,a=e["Issue Name"];console.log("foid is:",e),e&&(this.common.params={issueType:n,issueTypeValue:a}),this.modalService.open(m.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.Matrixdata()}))}}]),e}()).\u0275fac=function(e){return new(e||v)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},v.\u0275cmp=g["\u0275\u0275defineComponent"]({type:v,selectors:[["escalation-matrix"]],decls:7,vars:1,consts:[[1,"col-sm-4"],[2,"min-height","580px"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h2"),g["\u0275\u0275text"](4,"Escalation Matrix"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body",1),g["\u0275\u0275template"](6,b,1,2,"smart-table",2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.matrixList&&t.matrixList.length))},directives:[u.s,u.v,u.r,h.u,f.a],styles:["button[_ngcontent-%COMP%]{background-color:#ffebcd}.search[_ngcontent-%COMP%]{width:220px;margin-left:20px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),v),x=r("s7LF"),y=r("0zba");function C(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"i",31),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).removeField("groupFlag",e.gid,"gid")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.gid),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.gname)}}function M(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"table",28),g["\u0275\u0275elementStart"](1,"tr"),g["\u0275\u0275elementStart"](2,"th"),g["\u0275\u0275text"](3,"S.No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"gId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"gName"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275elementStart"](11,"i",29),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().groupFlag=!1})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](12,C,9,3,"tr",30),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",a.getUserGroups)}}function k(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"i",31),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).removeField("groupFlag",e.fid,"fid")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.fid),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.fname)}}function E(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"table",32),g["\u0275\u0275elementStart"](1,"tr"),g["\u0275\u0275elementStart"](2,"th"),g["\u0275\u0275text"](3,"S.No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"fId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"fName"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275elementStart"](11,"i",29),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().userFlag=!1})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](12,k,9,3,"tr",30),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",a.getGroupUsers)}}function _(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",6),g["\u0275\u0275elementStart"](1,"auto-suggestion",33),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().searchVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("preSelected",null))}function w(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"input",34),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().addVehicleGroupAss.csv=e}))("change",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().handleFileSelection(e)})),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngModel",a.addVehicleGroupAss.csv)}}function P(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"i",31),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).removeField("vehicleFlag",e.vid,"vid")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.vid),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.vregno)}}function O(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"table",28),g["\u0275\u0275elementStart"](1,"tr"),g["\u0275\u0275elementStart"](2,"th"),g["\u0275\u0275text"](3,"S.No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"vId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"vRegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275elementStart"](11,"i",29),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().vehicleFlag=!1})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](12,P,9,3,"tr",30),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",a.getVehicles)}}function D(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"i",31),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).removeField("vehicleFlag",e.gid,"gid")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.gid),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.gname)}}function I(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"table",32),g["\u0275\u0275elementStart"](1,"tr"),g["\u0275\u0275elementStart"](2,"th"),g["\u0275\u0275text"](3,"S.No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"gId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"gName"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275elementStart"](11,"i",29),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().vehicleGroupFlag=!1})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](12,D,9,3,"tr",30),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",a.getVehicleGroups)}}var T,A=function(){return["foaname","foname"]},F=((T=function(){function e(t,n,a,r){o(this,e),this.modalService=t,this.api=n,this.common=a,this.user=r,this.groupFlag=!1,this.userFlag=!1,this.vehicleFlag=!1,this.vehicleGroupFlag=!1,this.getGroupUsers=[],this.getUserGroups=[],this.getVehicles=[],this.getVehicleGroups=[],this.addGroupDetails={foid:"",groupName:""},this.addUserGroupAss={grpid:"",fid:""},this.addVehicleGroupAss={grpid:"",vid:null,csv:null},this.selectOption="single",this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"searchUserId",value:function(e){this.addGroupDetails.foid=e.id}},{key:"addGroup",value:function(){var e=this,t={foid:this.addGroupDetails.foid,groupName:this.addGroupDetails.groupName};console.log("foid: ",this.addGroupDetails.foid),console.log("groupName: ",this.addGroupDetails.groupName),this.common.loading++,this.api.post("GroupManagment/insertGroup",t).subscribe((function(t){e.common.loading--,console.log("res: "+t),console.log("success: "+t.success),"true"==t.success&&e.common.showToast("Group Created")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"searchGroupId",value:function(e){this.addUserGroupAss.fid=e.foaid}},{key:"searchGroup",value:function(e){this.addUserGroupAss.grpid=e.id}},{key:"addUserGroup",value:function(){var e=this,t={fid:this.addUserGroupAss.fid,grpid:this.addUserGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/insertGroupUserAssoc",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),"true"==t.success&&e.common.showToast("User Created")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"showGroups",value:function(){var e=this;this.groupFlag=!0,console.log("groupFlag",this.groupFlag);var t={user_id:this.addUserGroupAss.fid};this.common.loading++,this.api.post("GroupManagment/getUsersGroups",t).subscribe((function(t){e.common.loading--,e.getUserGroups=t.data,console.log("res: ",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"showUsers",value:function(){var e=this;this.userFlag=!0,console.log("userFlag",this.userFlag);var t={gid:this.addUserGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/getGroupsUsers",t).subscribe((function(t){e.common.loading--,e.getGroupUsers=t.data,console.log("res: ",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"searchVGroup",value:function(e){this.addVehicleGroupAss.grpid=e.id}},{key:"searchVehicle",value:function(e){this.addVehicleGroupAss.vid=e.id}},{key:"addVehicleGroup",value:function(){var e=this,t={vid:this.addVehicleGroupAss.vid,grpid:this.addVehicleGroupAss.grpid,csv:this.addVehicleGroupAss.csv};console.log("result:",t),this.common.loading++,this.api.post("GroupManagment/insertGroupVehicleAssoc",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data);var n=t.msg.split(":")[1];e.common.showToast(n||t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"showVehicles",value:function(){var e=this;this.vehicleFlag=!0;var t={gid:this.addVehicleGroupAss.grpid};this.common.loading++,this.api.post("GroupManagment/getGroupsVehicles",t).subscribe((function(t){e.common.loading--,e.getVehicles=t.data,console.log("res: ",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"showvehicleGroups",value:function(){var e=this;this.vehicleGroupFlag=!0;var t={vId:this.addVehicleGroupAss.vid};this.common.loading++,this.api.post("GroupManagment/getVehiclesGroups",t).subscribe((function(t){e.common.loading--,e.getVehicleGroups=t.data,console.log("res: ",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"removeField",value:function(e,t,n){var a,o=this;console.log("selectFlag",e),"groupFlag"==e&&(a="gid"==n?{gId:t,uId:this.addUserGroupAss.fid}:{gId:this.addUserGroupAss.grpid,uId:t},console.log("params: ",a),this.common.loading++,this.api.post("GroupManagment/deleteGroupsUsers",a).subscribe((function(e){o.common.loading--,o.showUsers(),console.log("res: "+e.data)}),(function(e){o.common.loading--,o.common.showError()}))),"vehicleFlag"==e&&(a="gid"==n?{gId:t,vId:this.addVehicleGroupAss.vid}:{gId:this.addVehicleGroupAss.grpid,vId:t},console.log("params: ",a),this.common.loading++,this.api.post("GroupManagment/deleteGroupsVehicles",a).subscribe((function(e){o.common.loading--,o.showVehicles(),console.log("res: "+e.data)}),(function(e){o.common.loading--,o.common.showError()})))}},{key:"handleFileSelection",value:function(e){var t=this;this.common.loading++,this.common.getBase64(e.target.files[0]).then((function(n){t.common.loading--;var a=e.target.files[0];if(console.log("Type",a.type),"application/vnd.ms-excel"!=a.type)return alert("valid Format Are : csv"),!1;n=n.toString().replace("vnd.ms-excel","csv"),console.log("Base 64: ",n),t.addVehicleGroupAss.csv=n}),(function(e){t.common.loading--,console.error("Base Err: ",e)}))}}]),e}()).\u0275fac=function(e){return new(e||T)(g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a))},T.\u0275cmp=g["\u0275\u0275defineComponent"]({type:T,selectors:[["group-managements"]],decls:68,vars:14,consts:[[1,"model-header",2,"margin-left","10px"],["id","model-basic-title",1,"model-title"],[1,"model-body-1",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-1-tile",2,"margin-left","50px","margin-top","10px"],[1,"row",2,"margin-top","20px","margin-bottom","20px"],[1,"col-2"],[1,"col-3"],["type","text","placeholder","group name","name","groupName",1,"form-control",3,"ngModel","ngModelChange"],["type","button","outline","","id","add",1,"btn","btn-primary",3,"click"],[1,"model-body-2",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-2-tile",2,"margin-left","50px","margin-top","10px"],[1,"col-1"],[1,"col-3",2,"text-align","center"],["seperator","-","url","Suggestion/getAllFoAdminListwithCustomer?isFo=true","placeholder","user ID",3,"display","preSelected","onSelected"],["url","suggestion/getGroups","display","description","placeholder","Group ID",3,"preSelected","onSelected"],[1,"row",2,"margin-bottom","10px"],["type","button","outline","",1,"btn-group",2,"cursor","pointer","background-color","darkcyan","color","white","border","2px solid darkgray","border-radius","2px","font-size","10px",3,"click"],[1,"col-4"],[1,"row"],[1,"col-6"],["class","table show-group",4,"ngIf"],["class","table show-users",4,"ngIf"],[1,"model-body-3",2,"border","1px Solid darkcyan","margin-top","10px","margin-left","10px","margin-right","10px","text-align","left"],[1,"body-3-tile",2,"margin-left","50px","margin-top","10px"],["type","radio","value","single","name","radio",3,"ngModel","ngModelChange","input"],["type","radio","value","csv","name","radio",3,"ngModel","ngModelChange","input"],["class","col-3",4,"ngIf","ngIfElse"],["csv",""],[1,"table","show-group"],[1,"fa","fa-hand-o-left",2,"cursor","pointer",3,"click"],[4,"ngFor","ngForOf"],["aria-label","Delete",1,"fa","fa-trash",3,"click"],[1,"table","show-users"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle ID",3,"preSelected","onSelected"],["type","file","name","csv",3,"ngModel","ngModelChange","change"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"h4",1),g["\u0275\u0275text"](2,"Group Managements"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"div",3),g["\u0275\u0275text"](5,"Groups"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275element"](7,"div",5),g["\u0275\u0275elementStart"](8,"div",6),g["\u0275\u0275elementStart"](9,"input",7),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.addGroupDetails.groupName=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](10,"div",5),g["\u0275\u0275elementStart"](11,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.addGroup()})),g["\u0275\u0275text"](12,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",9),g["\u0275\u0275elementStart"](14,"div",10),g["\u0275\u0275text"](15,"Group Users"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",4),g["\u0275\u0275element"](17,"div",11),g["\u0275\u0275elementStart"](18,"div",12),g["\u0275\u0275elementStart"](19,"auto-suggestion",13),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchGroupId(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](20,"div",5),g["\u0275\u0275elementStart"](21,"div",6),g["\u0275\u0275elementStart"](22,"auto-suggestion",14),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchGroup(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](23,"div",11),g["\u0275\u0275elementStart"](24,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.addUserGroup()})),g["\u0275\u0275text"](25,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"div",15),g["\u0275\u0275element"](27,"div",5),g["\u0275\u0275elementStart"](28,"button",16),g["\u0275\u0275listener"]("click",(function(){return t.showGroups()})),g["\u0275\u0275text"](29,"See Groups"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](30,"div",17),g["\u0275\u0275elementStart"](31,"button",16),g["\u0275\u0275listener"]("click",(function(){return t.showUsers()})),g["\u0275\u0275text"](32,"See Users"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"div",18),g["\u0275\u0275elementStart"](34,"div",19),g["\u0275\u0275template"](35,M,13,1,"table",20),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",19),g["\u0275\u0275template"](37,E,13,1,"table",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"div",22),g["\u0275\u0275elementStart"](39,"div",23),g["\u0275\u0275text"](40,"Group Vehicle"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"div",4),g["\u0275\u0275element"](42,"div",11),g["\u0275\u0275elementStart"](43,"div",12),g["\u0275\u0275elementStart"](44,"auto-suggestion",14),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVGroup(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"div",5),g["\u0275\u0275elementStart"](46,"input",24),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectOption=e}))("input",(function(){return t.addVehicleGroupAss.csv=null})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](47,"single "),g["\u0275\u0275elementStart"](48,"input",25),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectOption=e}))("input",(function(){return t.addVehicleGroupAss.vid=null})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](49,"csv "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](50,_,2,1,"div",26),g["\u0275\u0275template"](51,w,1,1,"ng-template",null,27,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275element"](53,"div",11),g["\u0275\u0275elementStart"](54,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.addVehicleGroup()})),g["\u0275\u0275text"](55,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](56,"div",15),g["\u0275\u0275element"](57,"div",5),g["\u0275\u0275elementStart"](58,"button",16),g["\u0275\u0275listener"]("click",(function(){return t.showVehicles()})),g["\u0275\u0275text"](59,"See Vehicles"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](60,"div",17),g["\u0275\u0275elementStart"](61,"button",16),g["\u0275\u0275listener"]("click",(function(){return t.showvehicleGroups()})),g["\u0275\u0275text"](62,"See Groups"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](63,"div",18),g["\u0275\u0275elementStart"](64,"div",19),g["\u0275\u0275template"](65,O,13,1,"table",20),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](66,"div",19),g["\u0275\u0275template"](67,I,13,1,"table",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275reference"](52);g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("ngModel",t.addGroupDetails.groupName),g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("display",g["\u0275\u0275pureFunction0"](13,A))("preSelected",null),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](13),g["\u0275\u0275property"]("ngIf",t.groupFlag),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.userFlag),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.selectOption),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.selectOption),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf","single"==t.selectOption)("ngIfElse",n),g["\u0275\u0275advance"](15),g["\u0275\u0275property"]("ngIf",t.vehicleFlag),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.vehicleGroupFlag)}},directives:[x.d,x.r,x.u,y.a,h.u,x.z,h.t],styles:["td[_ngcontent-%COMP%]{background-color:#fff}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),T),L=r("crgt"),V=r("ia/1");function z(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",4),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var N,j=((N=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.ticketProperties=[],this.checkFlag=!1,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.refresh()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getFoProperties()}},{key:"getFoProperties",value:function(){var e=this;this.common.loading++,this.api.post("FoTicketProperties/getFoProperties",{}).subscribe((function(t){if(e.common.loading--,e.ticketProperties=[],e.ticketProperties=t.data,null==e.ticketProperties)return e.ticketProperties=[];var n=e.ticketProperties[0],a={};for(var o in n)if("_"!=o.charAt(0)){e.headings.push(o);var r={title:e.formatTitle(o),placeholder:e.formatTitle(o)};a[o]=r}e.table.data={headings:a,columns:e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.ticketProperties.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.Action={class:"",icons:e.actionIcons(n)},t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[];return t.push({class:"fas fa-pencil-alt",action:this.addNewProperties.bind(this,e)},{class:"fa fa-trash ml-2",action:this.deleteProperties.bind(this,e)}),e._row_id&&t.push({class:"fa fa-edit ml-2",action:this.openUpdatePropertiesModel.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"openUpdatePropertiesModel",value:function(e){var t=this;this.common.params={values:e,flag:"Edit"},this.modalService.open(L.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getFoProperties()}))}},{key:"addNewProperties",value:function(e){var t=this;this.common.params={values:e,flag:"Add"},this.modalService.open(L.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getFoProperties()}))}},{key:"deleteProperties",value:function(e){var t=this,n={id:e._row_id};e._row_id&&(this.common.params={title:"Delete Property ",description:"<b>&nbsp;Are You Sure To Delete This Record<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("FoTicketProperties/deleteFoProperties ",n).subscribe((function(e){t.common.loading--,"1"==e.code&&t.common.showToast([e][0].msg),t.getFoProperties()}),(function(e){t.common.loading--,t.common.showError()})))})))}}]),e}()).\u0275fac=function(e){return new(e||N)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},N.\u0275cmp=g["\u0275\u0275defineComponent"]({type:N,selectors:[["ticket-properties"]],decls:8,vars:1,consts:[[1,"col-sm-4"],[2,"min-height","580px"],[1,"row","mt-2"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h2"),g["\u0275\u0275text"](4,"Ticket Properties"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body",1),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275template"](7,z,1,2,"smart-table",3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.ticketProperties&&t.ticketProperties.length))},directives:[u.s,u.v,u.r,h.u,f.a],styles:['.search[_ngcontent-%COMP%]{width:220px;margin-left:20px}[_nghost-%COMP%]     .fa-trash{color:red;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-alt{color:#00f;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-pencil-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-17px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-alt span:before{content:"Add";display:block;position:absolute;top:0;left:0;background-color:#00f;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-pencil-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #00f;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-pencil-alt:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:green;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-13px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),N),R=r("qfBg"),H=r("flj8"),U=r("IAMq");function B(e,t){if(1&e&&g["\u0275\u0275element"](0,"nb-menu",3),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("items",n.user._menu.admin)}}var G,$=((G=function(){function e(t,n,a,r,i){o(this,e),this.common=t,this.user=n,this.api=a,this.router=r,this.accountService=i,console.log(n._menu.admin),"customer"!=this.user._loggedInBy?this.accountService.branches.length||this.getBranches():this.router.navigate(["/pages"])}return i(e,[{key:"getBranches",value:function(){var e=this;this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){console.log("Branches :",t.data),e.accountService.branches=t.data}),(function(e){console.log("Error: ",e)}))}}]),e}()).\u0275fac=function(e){return new(e||G)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](H.a))},G.\u0275cmp=g["\u0275\u0275defineComponent"]({type:G,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[1,"admin"],["autoCollapse","true",3,"items",4,"ngIf"],[1,"admin-dot"],["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"ngx-sample-layout",0),g["\u0275\u0275template"](1,B,1,1,"nb-menu",1),g["\u0275\u0275element"](2,"router-outlet",2),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.user._menu.admin.length))},directives:[U.a,h.u,l.h,u.W],styles:[""]}),G),Y=r("suYr"),W=r("3a3o");function K(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",5),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Z(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",6),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var q,J,X=((q=function(){function e(t,n,a){o(this,e),this.api=t,this.common=n,this.modalService=a,this.issues=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getIssueAlerts(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getIssueAlerts()}},{key:"getIssueAlerts",value:function(){var e=this;++this.common.loading,this.api.get("IssueDetection/getIssueAlerts?").subscribe((function(t){--e.common.loading,console.log("Res: ",t.data),e.issues=t.data,e.issues.length?e.setTable():e.resetTable()}),(function(t){--e.common.loading,console.error(t),e.common.showError()}))}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"setTable",value:function(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}},{key:"generateHeadings",value:function(){var e={};for(var t in this.issues[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.issues.map((function(n){var a={};for(var o in e.generateHeadings())a[o]="Action"==o?{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}:{value:n[o],class:"black",action:""};t.push(a)})),t}},{key:"actionIcons",value:function(e){return[{class:"fa fa-question-circle mr-3",action:this.goToTrail.bind(this,e)},{class:"fa fa-check-circle mr-3",action:this.issueComplete.bind(this,e)}]}},{key:"goToSiteFencing",value:function(){window.open("http://dev.elogist.in/dost/#/admin/site-fencing")}},{key:"goToTrail",value:function(e){if(e._site_id)this.goToSiteFencing();else{var t=new Date(e.addtime),n=new Date(t.setHours(t.getHours()-48)),a=this.common.dateFormatter(n),o={vehicle_id:e._referid,tTime:e.addtime,suggest:11,latch_time:a};console.log("VehicleStatusData",o),this.common.params=o,this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}}},{key:"issueComplete",value:function(e){var t=this;console.log("issue",e),this.common.loading++;var n={alertId:e._id,status:1};console.log(n),this.api.post("IssueDetection/issueStatusUpdate?",n).subscribe((function(e){t.common.loading--,t.getIssueAlerts()}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||q)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r))},q.\u0275cmp=g["\u0275\u0275defineComponent"]({type:q,selectors:[["issue-alerts"]],decls:12,vars:3,consts:[[1,"col-sm-4"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","20px"],[3,"data","settings"],[1,"no-data"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h2"),g["\u0275\u0275text"](4,"Issues Status Changes"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body"),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275template"](7,K,1,2,"smart-table",2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](8,Z,2,0,"div",3),g["\u0275\u0275elementStart"](9,"div",4),g["\u0275\u0275elementStart"](10,"b"),g["\u0275\u0275text"](11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.issues&&t.issues.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.issues.length),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",t.issues.length,""))},directives:[u.s,u.v,u.r,h.u,f.a],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),q),Q=r("Xy1B"),ee=r("TC5E"),te=r("Q5eR"),ne=r("i+lE"),ae=((J=function(){function e(t,n,a,r){o(this,e),this.router=t,this.modalservice=n,this.common=a,this.api=r,this.Distance=null,this.listtype="",this.diagnostics={vechileno:null,endDate:this.common.dateFormatter(new Date),startTime:this.common.dateFormatter(new Date)},this.selectedVehicleId=null,this.Trails={vechileno:null,startTime:this.common.dateFormatter(new Date),endDate:this.common.dateFormatter(new Date)},this.VehicleStatusData={vehicle_id:null,latch_time:null},this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"getDate",value:function(e){var t=this;this.modalservice.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.diagnostics[e]=t.common.dateFormatter(n.time).split(" ")[0],console.log("Date:",t.diagnostics[e])}))}},{key:"calculateDistance",value:function(){var e=this,t={vehicleId:this.selectedVehicleId,fromTime:this.common.dateFormatter(this.diagnostics.startTime),tTime:this.common.dateFormatter(this.diagnostics.endDate)};console.log("params :",t),this.common.loading++,this.api.post("Vehicles/getVehDistanceBwTime",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.Distance=t.data?parseInt(""+t.data/1e3)+" KM":"Not Available"}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getvehicleData",value:function(e,t){console.log("Vehicle Data:+++++ ",e,t),"trails"==t&&(this.Trails.vechileno=e.id),"distance"==t&&(this.diagnostics.vechileno=e.regno),"Status"==t&&(this.VehicleStatusData.vehicle_id=e.id)}},{key:"getVehicleTrails",value:function(){var e=this,t={vehicleId:this.selectedVehicleId,fromTime:this.common.dateFormatter(this.Trails.startTime),toTime:this.common.dateFormatter(this.Trails.endDate),suggestId:1,status:0};console.log("param",t),this.common.loading++,this.api.post("VehicleStatusChange/getVehicleTrail",t).subscribe((function(t){e.common.loading--,t.data.length>0?(e.common.params=t.data,console.log("res: ",e.common.params),e.modalservice.open(ee.a,{size:"lg",container:"nb-layout"})):alert("Vehicle Trails are not present for this time period")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getChangeVehicleStatusChange",value:function(){var e=this,t={vehicleId:this.selectedVehicleId,fromTime:this.VehicleStatusData.latch_time,suggestId:1};console.log("param",t),this.common.loading++,this.api.post("VehicleStatusChange/getVehicleTrail",t).subscribe((function(t){e.common.loading--,t.data.length>0?(e.common.params=t.data,console.log("res: ",e.common.params),e.modalservice.open(W.a,{size:"lg",container:"nb-layout"})):alert("Vehicle Trails are not present for this time period")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"selectVehicle",value:function(e){console.log("Vehicle Data:+++ ",this.selectedVehicleId),this.selectedVehicleId=e.id,console.log("vehicle=",e)}},{key:"topRecord",value:function(){var e=this;console.log("type :",this.listtype),console.log("Vehicle Data: ",this.selectedVehicleId);var t={vehicleId:this.selectedVehicleId,tableName:this.listtype};console.log("params :",t),this.common.loading++,this.api.post("MasterDetails/getDataAccordingVehicle",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),t.data.length>0?(e.common.params=t.data,console.log("res: ",e.common.params),e.modalservice.open(te.a,{size:"lg",container:"nb-layout"})):alert("No Vehicle Data are  Available ")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"vehicleRecord",value:function(){}},{key:"ChangeVehicleStatusChange",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||J)(g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a))},J.\u0275cmp=g["\u0275\u0275defineComponent"]({type:J,selectors:[["diagnostics"]],decls:80,vars:20,consts:[[1,"row"],[1,"col-4"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["name","list",1,"form-control",3,"ngModel","ngModelChange"],["value","halts",1,"form-control"],["value","vehicle_placements",1,"form-control"],["value","lorry_receipts",1,"form-control"],["value","master_vehicle_temp1",1,"form-control"],[1,"btn","btn-primary","mt-4","p-1",3,"click"],[1,"form-group"],[1,"divActivities",2,"border","2px solid  blue"],[1,"col-3"],[1,"col-2"],["url","Vehicles/getVehiclesFromRedis?","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["placeholder","Start Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["placeholder","End Time","autocomplete","off","name","date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date",""],[1,"btn","btn-primary",3,"click"],["type","text","placeholder","Distance","name","distance","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["placeholder","Start time","autocomplete","off","name","date2",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date2",""],["placeholder","End Time","autocomplete","off","name","date3",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date3",""],["placeholder","Start Time","autocomplete","off","name","date4",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date4",""]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Diagnostics "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"label"),g["\u0275\u0275text"](7,"Vehicle No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",1),g["\u0275\u0275elementStart"](10,"label"),g["\u0275\u0275text"](11,"Table Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.listtype=e})),g["\u0275\u0275elementStart"](13,"option",4),g["\u0275\u0275text"](14,"Halts"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"option",5),g["\u0275\u0275text"](16,"Vehicle_Placement"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"option",6),g["\u0275\u0275text"](18,"lorry_Receipts"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"option",7),g["\u0275\u0275text"](20,"Master_Vehicle_Temp"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",1),g["\u0275\u0275elementStart"](22,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.topRecord()})),g["\u0275\u0275text"](23,"Top Latest Record"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"form",9),g["\u0275\u0275elementStart"](25,"div",10),g["\u0275\u0275elementStart"](26,"div",0),g["\u0275\u0275elementStart"](27,"div",11),g["\u0275\u0275elementStart"](28,"label"),g["\u0275\u0275text"](29,"Distance Travelled In A Time Range"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",0),g["\u0275\u0275elementStart"](31,"div",12),g["\u0275\u0275elementStart"](32,"auto-suggestion",13),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"div",11),g["\u0275\u0275elementStart"](34,"input",14),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.diagnostics.startTime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](35,"owl-date-time",null,15),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](37,"div",11),g["\u0275\u0275elementStart"](38,"input",16),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.diagnostics.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](39,"owl-date-time",null,17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"div",12),g["\u0275\u0275elementStart"](42,"button",18),g["\u0275\u0275listener"]("click",(function(){return t.calculateDistance()})),g["\u0275\u0275text"](43,"Calculate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](44,"div",12),g["\u0275\u0275elementStart"](45,"input",19),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Distance=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](46,"div",10),g["\u0275\u0275elementStart"](47,"div",0),g["\u0275\u0275elementStart"](48,"div",11),g["\u0275\u0275elementStart"](49,"label"),g["\u0275\u0275text"](50,"Vechile Trails In A Time Range"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](51,"div",0),g["\u0275\u0275elementStart"](52,"div",12),g["\u0275\u0275elementStart"](53,"auto-suggestion",20),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e,"trails")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"div",11),g["\u0275\u0275elementStart"](55,"input",21),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Trails.startTime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](56,"owl-date-time",null,22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](58,"div",11),g["\u0275\u0275elementStart"](59,"input",23),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Trails.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](60,"owl-date-time",null,24),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](62,"div",12),g["\u0275\u0275elementStart"](63,"button",18),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleTrails()})),g["\u0275\u0275text"](64,"Calculate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](65,"div",10),g["\u0275\u0275elementStart"](66,"div",0),g["\u0275\u0275elementStart"](67,"div",11),g["\u0275\u0275elementStart"](68,"label"),g["\u0275\u0275text"](69,"Change Vehicle Status"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](70,"div",0),g["\u0275\u0275elementStart"](71,"div",12),g["\u0275\u0275elementStart"](72,"auto-suggestion",20),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e,"Status")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](73,"div",11),g["\u0275\u0275elementStart"](74,"input",25),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.VehicleStatusData.latch_time=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](75,"owl-date-time",null,26),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](77,"div",12),g["\u0275\u0275elementStart"](78,"button",18),g["\u0275\u0275listener"]("click",(function(){return t.ChangeVehicleStatusChange()})),g["\u0275\u0275text"](79,"Vehicle History"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275reference"](36),a=g["\u0275\u0275reference"](40),o=g["\u0275\u0275reference"](57),r=g["\u0275\u0275reference"](61),i=g["\u0275\u0275reference"](76);g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngModel",t.listtype),g["\u0275\u0275advance"](20),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.diagnostics.startTime)("owlDateTime",n)("owlDateTimeTrigger",n),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.diagnostics.endDate)("owlDateTime",a)("owlDateTimeTrigger",a),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",t.Distance),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.Trails.startTime)("owlDateTime",o)("owlDateTimeTrigger",o),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.Trails.endDate)("owlDateTime",r)("owlDateTimeTrigger",r),g["\u0275\u0275advance"](13),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.VehicleStatusData.latch_time)("owlDateTime",i)("owlDateTimeTrigger",i)}},directives:[u.s,u.v,u.r,y.a,x.D,x.r,x.u,x.w,x.G,x.H,x.s,x.t,x.d,ne.b,ne.d,ne.a],styles:[".divActivities[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin-bottom:15px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),J),oe=r("tUv6"),re=r("F9Xm"),ie=r("i7b3"),le=r("ec4X");function ce(e,t){}function se(e,t){1&e&&g["\u0275\u0275template"](0,ce,0,0,"ng-template")}function de(e,t){}function me(e,t){1&e&&g["\u0275\u0275template"](0,de,0,0,"ng-template")}function ge(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",23),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"]().revertLrDetails(e)})),g["\u0275\u0275text"](1,"Revert"),g["\u0275\u0275elementEnd"]()}}function pe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",23),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"](),t=e.$implicit,a=e.index;return g["\u0275\u0275nextContext"]().modalOpenHandling(t,a)})),g["\u0275\u0275text"](1,"Edit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"button",23),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"]().openGenerateLr(e)})),g["\u0275\u0275text"](3,"New Edit"),g["\u0275\u0275elementEnd"]()}}function ue(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td",19),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().getImage(e)})),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"th"),g["\u0275\u0275text"](6),g["\u0275\u0275pipe"](7,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"td"),g["\u0275\u0275text"](9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"td"),g["\u0275\u0275text"](11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"td"),g["\u0275\u0275text"](13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"td"),g["\u0275\u0275text"](15),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"td"),g["\u0275\u0275text"](17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"td"),g["\u0275\u0275text"](19),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275text"](21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"td"),g["\u0275\u0275text"](23),g["\u0275\u0275pipe"](24,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"td"),g["\u0275\u0275template"](26,se,1,0,void 0,20),g["\u0275\u0275template"](27,me,1,0,void 0,20),g["\u0275\u0275template"](28,ge,2,0,"ng-template",null,21,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](30,pe,4,0,"ng-template",null,22,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=g["\u0275\u0275reference"](29),r=g["\u0275\u0275reference"](31);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.receipt_no),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind2"](7,15,a.lr_date,"dd MMM")),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](a.consigner_name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.consignee_name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.vehicle_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.source),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.destination),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.current_user),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind2"](24,18,a.addtime,"dd MMM HH:mm")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngIf",0==a.status)("ngIfThen",r),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",1==a.status)("ngIfThen",o)}}function he(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"h6"),g["\u0275\u0275text"](2,"Transport Agent Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]())}function fe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"div",43),g["\u0275\u0275elementStart"](2,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.option=e}))("change",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).changeStatusType("first")})),g["\u0275\u0275elementStart"](3,"option",44),g["\u0275\u0275text"](4,"Accept"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"option",45),g["\u0275\u0275text"](6,"Reject"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.option)}}var be=function(e){return{regno:e}},ve=function(e){return{name:e}};function Se(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",46),g["\u0275\u0275elementStart"](1,"input",47),g["\u0275\u0275listener"]("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).openNextModal()}))("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.receipt_no=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"input",48),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.source=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"input",49),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.destination=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"auto-suggestion",50),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchVehicle(e,"first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"input",51),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.remark=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",8),g["\u0275\u0275elementStart"](7,"div",52),g["\u0275\u0275elementStart"](8,"auto-suggestion",53),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchTaName(e,"first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",46),g["\u0275\u0275elementStart"](10,"button",54),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).addAgentName("first")})),g["\u0275\u0275text"](11,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",55),g["\u0275\u0275elementStart"](13,"div",41),g["\u0275\u0275elementStart"](14,"auto-suggestion",56),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchName(e,"Consigner","first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",46),g["\u0275\u0275elementStart"](16,"button",57),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).add("first")})),g["\u0275\u0275text"](17,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",8),g["\u0275\u0275elementStart"](19,"div",52),g["\u0275\u0275elementStart"](20,"auto-suggestion",58),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchName(e,"Consignee","first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",46),g["\u0275\u0275elementStart"](22,"button",59),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).add("first")})),g["\u0275\u0275text"](23,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",8),g["\u0275\u0275elementStart"](25,"div",60),g["\u0275\u0275elementStart"](26,"input",61),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.lrDate=e}))("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).checkDateFormat("first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",2),g["\u0275\u0275elementStart"](28,"span",62),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectDate("first")})),g["\u0275\u0275element"](29,"i",63),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",64),g["\u0275\u0275elementStart"](31,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.payType=e}))("change",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).changePayType("first")})),g["\u0275\u0275elementStart"](32,"option",5),g["\u0275\u0275text"](33,"ToPay"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"option",65),g["\u0275\u0275text"](35,"Advance"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"option",66),g["\u0275\u0275text"](37,"NA"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"input",67),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.rate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"input",68),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.amount=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](40,"div",69),g["\u0275\u0275elementStart"](41,"div",70),g["\u0275\u0275elementStart"](42,"auto-suggestion",71),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchMaterialType(e,"first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",1),g["\u0275\u0275elementStart"](44,"input",72),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.LrData.weight=e}))("focus",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).getMaterialName("first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"div",73),g["\u0275\u0275elementStart"](46,"div",74),g["\u0275\u0275elementStart"](47,"Button",75),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).resetValues("first")})),g["\u0275\u0275text"](48,"Reset"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](49,"div",74),g["\u0275\u0275elementStart"](50,"Button",76),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).insertLrDetails("first")})),g["\u0275\u0275text"](51,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.receipt_no),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.source),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.destination),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](15,be,a.modal.first.data.regno)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.remark),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](17,ve,a.modal.first.data.taName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](19,ve,a.modal.first.data.consignerName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](21,ve,a.modal.first.data.consineeName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngModel",a.modal.first.data.lrDate),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.first.data.payType),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.rate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.amount),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("inputId","material_input")("preSelected",g["\u0275\u0275pureFunction1"](23,ve,a.modal.first.data.materialName)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.LrData.weight)}}function xe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",77),g["\u0275\u0275elementStart"](1,"div",8),g["\u0275\u0275elementStart"](2,"div",74),g["\u0275\u0275elementStart"](3,"input",78),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.pan=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",74),g["\u0275\u0275elementStart"](5,"input",79),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.name=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",8),g["\u0275\u0275elementStart"](7,"div",74),g["\u0275\u0275elementStart"](8,"input",80),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.city=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",74),g["\u0275\u0275elementStart"](10,"input",81),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.gstin=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"h6"),g["\u0275\u0275text"](12,"Sub Admin 1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",8),g["\u0275\u0275elementStart"](14,"div",74),g["\u0275\u0275elementStart"](15,"input",79),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname1=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",74),g["\u0275\u0275elementStart"](17,"input",82),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile1=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"h6"),g["\u0275\u0275text"](19,"Sub Admin 2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div",8),g["\u0275\u0275elementStart"](21,"div",74),g["\u0275\u0275elementStart"](22,"input",79),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname2=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"div",74),g["\u0275\u0275elementStart"](24,"input",82),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile2=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"h6"),g["\u0275\u0275text"](26,"Sub Admin 3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",8),g["\u0275\u0275elementStart"](28,"div",74),g["\u0275\u0275elementStart"](29,"input",79),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbname3=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",74),g["\u0275\u0275elementStart"](31,"input",82),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.transportAgentDetails.sbmobile3=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",83),g["\u0275\u0275elementStart"](33,"div",74),g["\u0275\u0275elementStart"](34,"Button",76),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).insertAgentInfo("first")})),g["\u0275\u0275text"](35,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",74),g["\u0275\u0275elementStart"](37,"Button",84),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).resetView("first")})),g["\u0275\u0275text"](38,"Close"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.pan),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.name),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.city),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.gstin),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbname1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbmobile1),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbname2),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbmobile2),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbname3),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.first.data.transportAgentDetails.sbmobile3)}}function ye(e,t){if(1&e&&g["\u0275\u0275element"](0,"jrx-image-viewer",85),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("images",n.modal.first.data.images)("idContainer","idOnHTMLFirst")("loadOnInit",!0)}}function Ce(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",24),g["\u0275\u0275elementStart"](1,"div",25),g["\u0275\u0275elementStart"](2,"div",26),g["\u0275\u0275elementStart"](3,"button",27),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().closeModal("first")})),g["\u0275\u0275elementStart"](4,"span",28),g["\u0275\u0275text"](5,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",29),g["\u0275\u0275elementStart"](7,"table",30),g["\u0275\u0275elementStart"](8,"thead",15),g["\u0275\u0275elementStart"](9,"tr"),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"VehicleRegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"VehicleId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"LRId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"addUserId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"tbody"),g["\u0275\u0275elementStart"](19,"tr"),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275text"](21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"td"),g["\u0275\u0275text"](23),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"td"),g["\u0275\u0275text"](25),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"td"),g["\u0275\u0275text"](27),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](28,"div",31),g["\u0275\u0275elementStart"](29,"div",32),g["\u0275\u0275elementStart"](30,"div",8),g["\u0275\u0275template"](31,he,3,0,"div",33),g["\u0275\u0275template"](32,fe,7,1,"div",33),g["\u0275\u0275elementStart"](33,"div",2),g["\u0275\u0275elementStart"](34,"button",34),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("LR","first")})),g["\u0275\u0275text"](35,"Lorry Receipt"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",2),g["\u0275\u0275elementStart"](37,"button",35),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("Invoice","first")})),g["\u0275\u0275text"](38,"Invoice"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"div",36),g["\u0275\u0275elementStart"](40,"button",37),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("Other","first")})),g["\u0275\u0275text"](41,"Others"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](42,"div",38),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().removeLrDetails("first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",8),g["\u0275\u0275template"](44,Se,52,25,"div",39),g["\u0275\u0275template"](45,xe,39,10,"div",40),g["\u0275\u0275elementStart"](46,"div",41),g["\u0275\u0275template"](47,ye,1,3,"jrx-image-viewer",42),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngClass",a.modal.first.class),g["\u0275\u0275advance"](21),g["\u0275\u0275textInterpolate"](a.modal.first.data.LrData.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.first.data.LrData.vehicle_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.first.data.LrData.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.first.data.LrData.aduserid),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.showAgentLayout),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.showMain),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngIf",a.modal.first.data.showMain),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.showAgentLayout),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.first.data.images.length)}}function Me(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"h6"),g["\u0275\u0275text"](2,"Transport Agent Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]())}function ke(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"div",43),g["\u0275\u0275elementStart"](2,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.option=e}))("change",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).changeStatusType("second")})),g["\u0275\u0275elementStart"](3,"option",44),g["\u0275\u0275text"](4,"Accept"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"option",45),g["\u0275\u0275text"](6,"Reject"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.option)}}function Ee(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",46),g["\u0275\u0275elementStart"](1,"input",86),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.receipt_no=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"input",87),g["\u0275\u0275listener"]("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).openNextModal()}))("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.source=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"input",88),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.destination=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"auto-suggestion",50),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchVehicle(e,"second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"input",89),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.remark=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",8),g["\u0275\u0275elementStart"](7,"div",52),g["\u0275\u0275elementStart"](8,"auto-suggestion",53),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchTaName(e,"second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",46),g["\u0275\u0275elementStart"](10,"button",54),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).addAgentName("second")})),g["\u0275\u0275text"](11,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",55),g["\u0275\u0275elementStart"](13,"div",41),g["\u0275\u0275elementStart"](14,"auto-suggestion",56),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchName(e,"Consigner","second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",46),g["\u0275\u0275elementStart"](16,"button",57),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).add("second")})),g["\u0275\u0275text"](17,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",8),g["\u0275\u0275elementStart"](19,"div",52),g["\u0275\u0275elementStart"](20,"auto-suggestion",58),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchName(e,"Consignee","second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",46),g["\u0275\u0275elementStart"](22,"button",59),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).add("second")})),g["\u0275\u0275text"](23,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",8),g["\u0275\u0275elementStart"](25,"div",60),g["\u0275\u0275elementStart"](26,"input",90),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.lrDate=e}))("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).checkDateFormat("second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",2),g["\u0275\u0275elementStart"](28,"span",62),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectDate("second")})),g["\u0275\u0275element"](29,"i",63),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",64),g["\u0275\u0275elementStart"](31,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.payType=e}))("change",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).changePayType("second")})),g["\u0275\u0275elementStart"](32,"option",5),g["\u0275\u0275text"](33,"ToPay"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"option",65),g["\u0275\u0275text"](35,"Advance"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"option",66),g["\u0275\u0275text"](37,"NA"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"input",91),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.rate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"input",92),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.amount=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](40,"div",93),g["\u0275\u0275elementStart"](41,"div",70),g["\u0275\u0275elementStart"](42,"auto-suggestion",71),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).searchMaterialType(e,"second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",1),g["\u0275\u0275elementStart"](44,"input",94),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.LrData.weight=e}))("focus",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).getMaterialName("second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"div",73),g["\u0275\u0275elementStart"](46,"div",74),g["\u0275\u0275elementStart"](47,"Button",75),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).resetValues("second")})),g["\u0275\u0275text"](48,"Reset"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](49,"div",74),g["\u0275\u0275elementStart"](50,"Button",76),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).insertLrDetails("second")})),g["\u0275\u0275text"](51,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.receipt_no),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.source),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.destination),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](15,be,a.modal.second.data.regno)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.remark),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](17,ve,a.modal.second.data.taName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](19,ve,a.modal.second.data.consignerName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("preSelected",g["\u0275\u0275pureFunction1"](21,ve,a.modal.second.data.consineeName)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngModel",a.modal.second.data.lrDate),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.second.data.payType),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.rate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.amount),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("inputId","second-material_input")("preSelected",g["\u0275\u0275pureFunction1"](23,ve,a.modal.second.data.materialName)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.LrData.weight)}}function _e(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",77),g["\u0275\u0275elementStart"](1,"div",8),g["\u0275\u0275elementStart"](2,"div",74),g["\u0275\u0275elementStart"](3,"input",95),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.pan=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",74),g["\u0275\u0275elementStart"](5,"input",96),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.name=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",8),g["\u0275\u0275elementStart"](7,"div",74),g["\u0275\u0275elementStart"](8,"input",97),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.city=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",74),g["\u0275\u0275elementStart"](10,"input",98),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.gstin=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"h6"),g["\u0275\u0275text"](12,"Sub Admin 1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",8),g["\u0275\u0275elementStart"](14,"div",74),g["\u0275\u0275elementStart"](15,"input",96),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname1=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",74),g["\u0275\u0275elementStart"](17,"input",99),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile1=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"h6"),g["\u0275\u0275text"](19,"Sub Admin 2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div",8),g["\u0275\u0275elementStart"](21,"div",74),g["\u0275\u0275elementStart"](22,"input",96),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname2=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"div",74),g["\u0275\u0275elementStart"](24,"input",99),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile2=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"h6"),g["\u0275\u0275text"](26,"Sub Admin 3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",8),g["\u0275\u0275elementStart"](28,"div",74),g["\u0275\u0275elementStart"](29,"input",96),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbname3=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",74),g["\u0275\u0275elementStart"](31,"input",99),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.transportAgentDetails.sbmobile3=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",83),g["\u0275\u0275elementStart"](33,"div",74),g["\u0275\u0275elementStart"](34,"Button",76),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).insertAgentInfo("second")})),g["\u0275\u0275text"](35,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",74),g["\u0275\u0275elementStart"](37,"Button",84),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).resetView("second")})),g["\u0275\u0275text"](38,"Close"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.pan),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.name),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.city),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.gstin),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbname1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbmobile1),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbname2),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbmobile2),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbname3),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",a.modal.second.data.transportAgentDetails.sbmobile3)}}function we(e,t){if(1&e&&g["\u0275\u0275element"](0,"jrx-image-viewer",85),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("images",n.modal.second.data.images)("idContainer","idOnHTMLSecond")("loadOnInit",!0)}}function Pe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",24),g["\u0275\u0275elementStart"](1,"div",25),g["\u0275\u0275elementStart"](2,"div",26),g["\u0275\u0275elementStart"](3,"button",27),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().closeModal("second")})),g["\u0275\u0275elementStart"](4,"span",28),g["\u0275\u0275text"](5,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",29),g["\u0275\u0275elementStart"](7,"table",30),g["\u0275\u0275elementStart"](8,"thead",15),g["\u0275\u0275elementStart"](9,"tr"),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"VehicleRegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"VehicleId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"LRId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"addUserId"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"tbody"),g["\u0275\u0275elementStart"](19,"tr"),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275text"](21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"td"),g["\u0275\u0275text"](23),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"td"),g["\u0275\u0275text"](25),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"td"),g["\u0275\u0275text"](27),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](28,"div",31),g["\u0275\u0275elementStart"](29,"div",32),g["\u0275\u0275elementStart"](30,"div",8),g["\u0275\u0275template"](31,Me,3,0,"div",33),g["\u0275\u0275template"](32,ke,7,1,"div",33),g["\u0275\u0275elementStart"](33,"div",2),g["\u0275\u0275elementStart"](34,"button",34),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("LR","second")})),g["\u0275\u0275text"](35,"Lorry Receipt"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",2),g["\u0275\u0275elementStart"](37,"button",35),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("Invoice","second")})),g["\u0275\u0275text"](38,"Invoice"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"div",36),g["\u0275\u0275elementStart"](40,"button",37),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadImage("Other","second")})),g["\u0275\u0275text"](41,"Others"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](42,"div",38),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().removeLrDetails("second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",8),g["\u0275\u0275template"](44,Ee,52,25,"div",39),g["\u0275\u0275template"](45,_e,39,10,"div",40),g["\u0275\u0275elementStart"](46,"div",41),g["\u0275\u0275template"](47,we,1,3,"jrx-image-viewer",42),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngClass",a.modal.second.class),g["\u0275\u0275advance"](21),g["\u0275\u0275textInterpolate"](a.modal.second.data.LrData.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.second.data.LrData.vehicle_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.second.data.LrData.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.second.data.LrData.aduserid),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.second.data.showAgentLayout),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.showMain),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngIf",a.modal.second.data.showMain),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.showAgentLayout),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.second.data.images.length)}}var Oe,De=((Oe=function(){function e(t,n,a,r,i){var l;o(this,e),this.api=t,this.common=n,this.user=a,this.zone=r,this.modalService=i,this.pendinglr=[],this.fromDate="",this.endDate="",this.lrType="0",this.modal={active:"",first:{show:!1,class:"",data:this.setModalData()},second:{show:!1,class:"",data:this.setModalData()}},this.activeLrIndex=-1,l=new Date,this.endDate=this.common.dateFormatter(l),this.fromDate=this.common.dateFormatter(new Date(l.setDate(l.getDate()-6))),console.log("dates start and end",this.endDate,this.fromDate),this.getPendingLr(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getPendingLr()}},{key:"setModalData",value:function(){return{showMain:!0,showAgentLayout:!1,images:[],tonnage:"",LrData:null,vehId:"",lrDate:null,payType:"toPay",regno:"",taName:"",consignerName:"",materialName:"",consineeName:"",isUpdated:!1,option:"accept",tempDate:null,status:1,transportAgentDetails:{gstin:"",name:"",pan:"",city:"",sbname1:"",sbmobile1:"",sbname2:"",sbmobile2:"",sbname3:"",sbmobile3:""}}}},{key:"getPendingLr",value:function(){var e=this,t={startDate:this.fromDate,endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59",foId:this.foid,status:this.lrType};this.common.loading++,this.api.post("LorryReceiptsOperation/getPendingLr",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.pendinglr=t.data}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"openEditLorryDetailsModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first";this.common.params={details:Object.assign({},e)};var n=this.modal[t].data;n.LrData=this.common.params.details,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.taName=n.LrData.ta_name,n.consignerName=n.LrData.consigner_name,n.consineeName=n.LrData.consignee_name,n.materialName=n.LrData.material_name,n.payType=n.LrData.pay_type,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.images[0]=n.LrData.lr_image,null!=n.LrData.lr_date&&(n.lrDate=n.LrData.lr_date,n.lrDate=this.common.dateFormatter1(n.lrDate))}},{key:"modalOpenHandling",value:function(e,t){this.activeLrIndex=t,console.log("Handler Start: ",this.modal.active),this.modal.active?"first"==this.modal.active?(this.modal.second.class="custom-passive-modal",this.modal.second.show=!0,this.handleModalData("second",e),this.modal.active="first"):"second"==this.modal.active&&(this.modal.first.class="custom-passive-modal",this.modal.first.show=!0,this.handleModalData("first",e),this.modal.active="second"):(this.modal.first.class="custom-active-modal",this.modal.first.show=!0,this.handleModalData("first",e),this.modal.active="first"),console.log("Handler End: ",this.modal.active),setTimeout(this.autoSuggestion.bind(this,this.modal.active+"-source",this.modal.active),300),setTimeout(this.autoSuggestion.bind(this,this.modal.active+"-destination",this.modal.active),300)}},{key:"handleModalData",value:function(e,t){this.common.params={details:Object.assign({},t)};var n=this.modal[e].data;n.LrData=this.common.params.details,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.taName=n.LrData.ta_name,n.consignerName=n.LrData.consigner_name,n.consineeName=n.LrData.consignee_name,n.materialName=n.LrData.material_name,n.payType=n.LrData.pay_type,n.regno=n.LrData.regno,n.vehId=n.LrData.vehicle_id,n.images[0]=n.LrData.lr_image,null!=n.LrData.lr_date&&(n.lrDate=n.LrData.lr_date,n.lrDate=this.common.dateFormatter1(n.lrDate))}},{key:"enterTicket",value:function(e){var t,n=this,a={tblRefId:6,tblRowId:e.id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",a).subscribe((function(a){if(n.common.loading--,t=a,console.log(t),!t.success)return!1;n.modalOpenHandling(e,n.activeLrIndex)}),(function(e){n.common.loading--,console.log(e)}))}},{key:"exitTicket",value:function(e){var t,n=this,a={tblRefId:6,tblRowId:e.id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",a).subscribe((function(e){return n.common.loading--,t=e,console.log(t),!!t.sucess}),(function(e){n.common.loading--,console.log(e)}))}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"lrDetails"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.fromDate="",t.fromDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("fromDate",t.fromDate)):(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"revertLrDetails",value:function(e){var t=this,n={lr_id:e.id};this.common.loading++,this.api.post("LorryReceiptsOperation/revertLrDetails",n).subscribe((function(e){t.common.loading--,console.log("res: ",e.data),t.common.showToast(e.msg),"Success"==e.msg&&t.getPendingLr()}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getFolist",value:function(e){this.foid=e.id}},{key:"getImage",value:function(e){console.log(e);var t=[{name:"LR",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other Image",image:e.other_image}];console.log("images:",t),this.common.params={images:t,title:"LR Details"},this.modalService.open(oe.a,{size:"lg",container:"nb-layout"})}},{key:"searchVehicle",value:function(e,t){var n=this.modal[t].data;return console.log("vehiclelist: ",e),n.vehId=e.id,console.log("id:",n.vehId),n.vehId}},{key:"loadImage",value:function(e,t){var n=this.modal[t].data;"LR"==e?(n.images[0]=n.LrData.lr_image,console.log("LR",n.images[0])):"Invoice"==e?n.LrData.invoice_image?(n.images[0]=n.LrData.invoice_image,console.log("Invoice",n.images[0])):this.common.showError("Image not present!!"):"Other"==e&&(n.LrData.other?(n.images[0]=n.LrData.other,console.log("Invoice",n.images[0])):this.common.showError("Image not present!!"))}},{key:"closeModal",value:function(e){this.modal.first.show&&this.modal.second.show?"first"==e?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[e].show=!1,this.modal[e].class="",this.modal[e].data=this.setModalData()),this.getPendingLr()}},{key:"dismiss",value:function(e){this.modal.first.show&&this.modal.second.show?"first"==e?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[e].show=!1,this.modal[e].class="",this.modal[e].data=this.setModalData()),this.exitTicket(this.modal[e].data.LrData),this.getPendingLr()}},{key:"selectDate",value:function(e){var t=this,n=this.modal[e].data;this.common.params={ref_page:"lrDetails"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.date&&(n.lrDate=t.common.dateFormatter(e.date,"ddMMYYYY").split(" ")[0],console.log("lrdate: by getDate "+n.lrDate))}))}},{key:"add",value:function(e){this.modalService.open(re.a,{size:"sm",container:"nb-layout",backdrop:"static",windowClass:"drag-box"})}},{key:"addAgentName",value:function(e){var t=this.modal[e].data;t.showMain=!1,t.showAgentLayout=!0,this.common.handleModalSize("class","modal-lg","1300")}},{key:"searchName",value:function(e,t,n){var a=this.modal[n].data;return"Consignee"==t?(a.LrData.consignee_id=e.id,a.LrData.consignee_name=e.name,a.LrData.consignee_id):(a.LrData.consigner_id=e.id,a.LrData.consigner_name=e.name,a.LrData.consigner_id)}},{key:"searchTaName",value:function(e,t){var n=this.modal[t].data;return console.log("list",e),n.LrData.ta_id=e.id,n.LrData.ta_name=e.name,n.LrData.ta_id}},{key:"insertAgentInfo",value:function(e){var t=this,n=this.modal[e].data,a={gstin:n.transportAgentDetails.gstin,name:n.transportAgentDetails.name,pan:n.transportAgentDetails.pan,city:n.transportAgentDetails.city,sbname1:n.transportAgentDetails.sbname1,sbmobile1:n.transportAgentDetails.sbmobile1,sbname2:n.transportAgentDetails.sbname2,sbmobile2:n.transportAgentDetails.sbmobile2,sbname3:n.transportAgentDetails.sbname3,sbmobile3:n.transportAgentDetails.sbmobile3};console.log("params agent info",a),this.common.loading++,this.api.post("LorryReceiptsOperation/InsertTransportAgent",a).subscribe((function(e){t.common.loading--,console.log("res: "+e.data),t.common.showToast("Success !!"),n.showAgentLayout=!1,t.common.handleModalSize("class","modal-lg","1000"),n.showMain=!0}),(function(e){t.common.loading--,t.common.showError(),n.showAgentLayout=!1,t.common.handleModalSize("class","modal-lg","1000"),n.showMain=!0}))}},{key:"changePayType",value:function(e){var t=this.modal[e].data;t.LrData.pay_type=t.payType,console.log("paytype to change",t.LrData.pay_type)}},{key:"resetView",value:function(e){var t=this.modal[e].data;t.showAgentLayout=!1,this.common.handleModalSize("class","modal-lg","1000"),t.showMain=!0}},{key:"searchMaterialType",value:function(e,t){var n=this.modal[t].data;return n.LrData.material=e.id,n.LrData.material_name=e.name,n.LrData.material}},{key:"insertLrDetails",value:function(e){var t,n=this,a=this.modal[e].data;"reject"==a.option?(a.tempDate=null,console.log("if block"),t={sourceLat:a.LrData.source_lat?a.LrData.source_lat:"",sourceLng:a.LrData.source_long?a.LrData.source_long:"",source:a.LrData.source?a.LrData.source:"",dest:a.LrData.destination?a.LrData.destination:"",destLat:a.LrData.destination_lat?a.LrData.destination_lat:"",destLng:a.LrData.destination_long?a.LrData.destination_long:"",vehId:a.vehId?a.vehId:"",remark:a.LrData.remark?a.LrData.remark:"",id:a.LrData.id?a.LrData.id:"",receiptNo:a.LrData.receipt_no?a.LrData.receipt_no:"",status:a.status,taId:a.LrData.ta_id?a.LrData.ta_id:"",taName:a.LrData.ta_name?a.LrData.ta_name:"",consignerId:a.LrData.consigner_id?a.LrData.consigner_id:"",tonnage:a.LrData.weight?a.LrData.weight:"",consignerName:a.LrData.consigner_name?a.LrData.consigner_name:"",consigneeId:a.LrData.consignee_id?a.LrData.consignee_id:"",consigneeName:a.LrData.consignee_name?a.LrData.consignee_name:"",lrDate:a.lrDate?a.lrDate:"",payType:a.LrData.pay_type?a.LrData.pay_type:"",rate:a.LrData.rate?a.LrData.rate:"",amount:a.LrData.amount?a.LrData.amount:"",material:a.LrData.material_name?a.LrData.material_name:"",materialId:a.LrData.material?a.LrData.material:""}):(console.log("else block"),a.tempDate=this.common.dateFormatter(a.lrDate,"ddMMYYYY",!1,"/"),a.lrDate=this.common.dateFormatter1(new Date(a.lrDate)),console.log("tempDate",a.tempDate),t={sourceLat:a.LrData.source_lat,sourceLng:a.LrData.source_long,source:a.LrData.source,dest:a.LrData.destination,destLat:a.LrData.destination_lat,destLng:a.LrData.destination_long,vehId:a.vehId,remark:a.LrData.remark,id:a.LrData.id,receiptNo:a.LrData.receipt_no,status:a.status,taId:a.LrData.ta_id,taName:a.LrData.ta_name,consignerId:a.LrData.consigner_id,tonnage:a.LrData.weight,consignerName:a.LrData.consigner_name,consigneeId:a.LrData.consignee_id,consigneeName:a.LrData.consignee_name,lrDate:a.lrDate,payType:a.LrData.pay_type,rate:a.LrData.rate,amount:a.LrData.amount,material:a.LrData.material_name,materialId:a.LrData.material}),console.log("params to Insert: ",t),this.common.loading++,this.api.post("LorryReceiptsOperation/updateLorryReceiptsDetails",t).subscribe((function(t){n.common.loading--,console.log("res: ",t.msg),t.success?(n.common.showToast("Success !!"),a.isUpdated=!0,n.closeModal(e)):(n.common.showToast("Not Success !!"),null!=a.tempDate&&(a.lrDate=a.tempDate,console.log("lrDate",a.lrDate)))}),(function(e){n.common.loading--,n.common.showError()}))}},{key:"ngAfterViewInit",value:function(){}},{key:"autoSuggestion",value:function(e,t){var n=document.getElementById(e),a=new google.maps.places.Autocomplete(n,{types:["(cities)"],componentRestrictions:{country:"in"}});google.maps.event.addListener(a,"place_changed",this.updateLocation.bind(this,e,a,t))}},{key:"updateLocation",value:function(e,t,n){console.log("tets");var a=t.getPlace(),o=a.geometry.location.lat(),r=a.geometry.location.lng();a=t.getPlace().formatted_address.split(",")[0],this.setLocations(e,a,o,r,n)}},{key:"setLocations",value:function(e,t,n,a,o){var r=this.modal[o].data;this.zone.run((function(){e.includes("source")?(r.LrData.source=t,console.log("LrData",r.LrData),r.LrData.source_lat=n,r.LrData.source_long=a):e.includes("destination")&&(r.LrData.destination=t,r.LrData.destination_lat=n,r.LrData.destination_long=a),console.log("elementId",e,"place",t,"lat",n,"lng",a,"modalRef",r)}))}},{key:"removeLrDetails",value:function(e){var t=this,n=this.modal[e].data;if(null==n.images[0])return console.log("image to delete",n.images[0]),void this.common.showToast("Load LR To Delete !!");var a={lr_id:n.LrData.id,image_url:n.images[0]};console.log("params: ",a),this.common.loading++,this.api.post("LorryReceiptsOperation/deleteLr",a).subscribe((function(a){t.common.loading--,console.log("res: ",a.msg),a.success?(t.common.showToast("Success !!"),n.isUpdated=!0,t.closeModal(e)):t.common.showToast("something went wrong")}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getMaterialName",value:function(e){var t=this.modal[e].data;t.LrData.material_name=document.getElementById("material_input").value,console.log("getMaterialName",t.LrData.material_name)}},{key:"checkDateFormat",value:function(e){var t=this.modal[e].data;if(t.lrDate){var n=t.lrDate;if(console.log("this.lrdate",t.lrDate),!(n.length<8)){var a=n[0]+n[1],o=n[2]+n[3],r=n.substring(4,8);t.lrDate=r+"-"+o+"-"+a,console.log("Date: ",t.lrDate)}}}},{key:"resetValues",value:function(e){var t=this.modal[e].data;t.LrData.receipt_no=null,t.LrData.source=null,t.LrData.source_lat=null,t.LrData.source_long=null,t.LrData.destination=null,t.LrData.destination_lat=null,t.LrData.destination_long=null,t.LrData.remark=null,t.LrData.ta_name=null,t.LrData.ta_id=null,t.LrData.consigner_name=null,t.LrData.consigner_id=null,t.LrData.consignee_name=null,t.LrData.pay_type=null,t.LrData.weight=null,t.LrData.amount=null,t.LrData.material=null,t.LrData.material_id=null,t.LrData.rate=null,t.vehId=null,t.LrData.lr_date=null}},{key:"changeStatusType",value:function(e){var t=this.modal[e].data;t.status="reject"==t.option?-1:1}},{key:"openNextModal",value:function(){if(!(this.modal.first.show&&this.modal.second.show||this.activeLrIndex==this.pendinglr.length-1)){this.activeLrIndex++;var e=Object.assign({},this.pendinglr[this.activeLrIndex]);console.log("---------------------------------------------"),console.log("Details:",e),console.log("---------------------------------------------"),this.modalOpenHandling(e,this.activeLrIndex)}}},{key:"openGenerateLr",value:function(e){var t=this;this.common.params={lrData:{lrId:e.id}},this.modalService.open(ie.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),t.getPendingLr()}))}}]),e}()).\u0275fac=function(e){return new(e||Oe)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](g.NgZone),g["\u0275\u0275directiveInject"](p.r))},Oe.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Oe,selectors:[["lorry-receipt-details"]],decls:58,vars:13,consts:[[1,"row",2,"margin-left","10px"],[1,"col-sm-6"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","-1"],[1,"model-body"],[1,"row"],[1,"col-sm-3",2,"margin-top","10px"],["url","suggestion/getFoUsersList","display","name","placeholder","Search",3,"preSelected","onSelected"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"table","table-bordered",2,"margin-left","5px","margin-top","10px","margin-right","5px"],[1,"thead"],["id","heading-row"],[4,"ngFor","ngForOf"],["class","custom-modal",3,"ngClass",4,"ngIf"],[2,"color","blue",3,"click"],[4,"ngIf","ngIfThen"],["showRevert",""],["showEdit",""],[1,"btn",3,"click"],[1,"custom-modal",3,"ngClass"],[1,"custom-modal-body"],[1,"model-header",2,"margin-top","10px","height","20px","margin-left","10px","margin-right","10px"],["type","button","aria-label","Close",1,"close",2,"background-color","white","height","30px","margin-left","15px","margin-top","-10px",3,"click"],["aria-hidden","true"],[1,"row",2,"margin-left","20px","margin-right","20px"],[1,"table","table-bordered"],[1,"border",2,"height","2px","color","brown","margin-top","10px","margin-bottom","20px"],[1,"model-body",2,"margin-left","10px","margin-right","10px","margin-bottom","10px"],["class","col-sm-3",4,"ngIf"],["type","button",1,"btn-loadLr",2,"width","150px",3,"click"],["type","button",1,"btn-loadInvoice",2,"width","150px",3,"click"],[1,"col-sm-2"],["type","button",1,"btn-loadOther",2,"width","150px",3,"click"],[1,"fa","fa-trash","remove",2,"width","50px","height","40px","color","red","margin-left","30px",3,"click"],["class","col-3",4,"ngIf"],["class","col-3","style","margin-bottom:10px",4,"ngIf"],[1,"col-9"],[3,"images","idContainer","loadOnInit",4,"ngIf"],[1,"from-group"],["value","accept"],["value","reject"],[1,"col-3"],["type","text","name","first-RNo.","placeholder","Receipt No.","autocomplete","off",1,"form-control",3,"ngModel","focusout","ngModelChange"],["type","text","id","first-source","name","first-source","placeholder","Source",1,"from-control",3,"ngModel","ngModelChange"],["type","text","id","first-destination","name","first-destination","placeholder","Destination",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],["type","text","name","first-remark","placeholder","Remark",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],[1,"col-9",2,"margin-bottom","10px"],["url","Suggestion/GetTransportAgent","display","name","placeholder","Transport Agent Name",3,"preSelected","onSelected"],["type","button",1,"btn-agentName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],[1,"row",2,"margin-bottom","10px"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","Consigner Name",3,"preSelected","onSelected"],["type","button",1,"btn-consignerName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","Consignee Name",3,"preSelected","onSelected"],["type","button",1,"btn-consigneeName",2,"background-color","transparent","margin-top","5px","height","30px","margin-left","-10px","color","darkcyan","border","2px solid darkcyan",3,"click"],[1,"col-sm-9"],["type","text","name","first-lr-date","placeholder","DD/MM/YYYY",1,"form-control",3,"ngModel","ngModelChange","focusout"],[2,"cursor","pointer","font-size","23px","margin-top","8px",3,"click"],[1,"icon","fa","fa-calendar",2,"margin-top","10px","margin-left","-5px"],[1,"from-group",2,"margin-top","10px"],["value","2"],["value","3"],["type","text","name","first-rate","placeholder","Rate",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-amount","placeholder","Amount",1,"form-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["id","first-ton-material",1,"row"],[1,"col-sm-6",2,"margin-top","10px"],["url","Suggestion/GetMaterialTypes","display","name","placeholder","Material Name",3,"inputId","preSelected","onSelected"],["type","text","name","first-tonnage","placeholder","Tonnage",1,"form-control",3,"ngModel","ngModelChange","focus"],[1,"row",2,"margin-top","10px"],[1,"col-6"],["type","reset",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-3",2,"margin-bottom","10px"],["type","text","name","first-pan","placeholder","Pan No.",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-city","placeholder","City",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-gst","placeholder","Gstin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","first-mobile","placeholder","Mobile",1,"form-control",3,"ngModel","ngModelChange"],[1,"row",2,"margin-top","10px","margin-left","10px"],["type","button",1,"btn","btn-danger",3,"click"],[3,"images","idContainer","loadOnInit"],["type","text","name","second-RNo.","placeholder","Receipt No.","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","second-source","name","second-source","placeholder","Source",1,"from-control",3,"ngModel","focusout","ngModelChange"],["type","text","id","second-destination","name","second-destination","placeholder","Destination",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["type","text","name","second-remark","placeholder","Remark",1,"from-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["type","text","name","second-lr-date","placeholder","DD/MM/YYYY",1,"form-control",3,"ngModel","ngModelChange","focusout"],["type","text","name","second-rate","placeholder","Rate",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-amount","placeholder","Amount",1,"form-control",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["id","second-ton-material",1,"row"],["type","text","name","second-tonnage","placeholder","Tonnage",1,"form-control",3,"ngModel","ngModelChange","focus"],["type","text","name","second-pan","placeholder","Pan No.",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-city","placeholder","City",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-gst","placeholder","Gstin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","second-mobile","placeholder","Mobile",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275text"](4," Lorry Receipt Details "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"div",2),g["\u0275\u0275elementStart"](6,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lrType=e}))("change",(function(){return t.getPendingLr()})),g["\u0275\u0275elementStart"](7,"option",4),g["\u0275\u0275text"](8,"Pending"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"option",5),g["\u0275\u0275text"](10,"Complete"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"option",6),g["\u0275\u0275text"](12,"Rejected"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"nb-card-body"),g["\u0275\u0275elementStart"](14,"div",7),g["\u0275\u0275elementStart"](15,"div",8),g["\u0275\u0275elementStart"](16,"div",9),g["\u0275\u0275elementStart"](17,"auto-suggestion",10),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFolist(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",2),g["\u0275\u0275elementStart"](19,"input",11),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](20,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",2),g["\u0275\u0275elementStart"](22,"input",12),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](23,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",2),g["\u0275\u0275elementStart"](25,"button",13),g["\u0275\u0275listener"]("click",(function(){return t.getPendingLr()})),g["\u0275\u0275text"](26,"submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"table",14),g["\u0275\u0275elementStart"](28,"thead",15),g["\u0275\u0275elementStart"](29,"tr",16),g["\u0275\u0275elementStart"](30,"th"),g["\u0275\u0275text"](31,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"th"),g["\u0275\u0275text"](33,"LRNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"th"),g["\u0275\u0275text"](35,"LR Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"th"),g["\u0275\u0275text"](37,"Consignor"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"th"),g["\u0275\u0275text"](39,"Consignee"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](40,"th"),g["\u0275\u0275text"](41,"Vehicle RegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](42,"th"),g["\u0275\u0275text"](43,"Vehicle Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](44,"th"),g["\u0275\u0275text"](45,"Source"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](46,"th"),g["\u0275\u0275text"](47,"Destination"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](48,"th"),g["\u0275\u0275text"](49,"User"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](50,"th"),g["\u0275\u0275text"](51,"Add Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](52,"th"),g["\u0275\u0275text"](53,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"tbody"),g["\u0275\u0275template"](55,ue,32,21,"tr",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](56,Ce,48,10,"div",18),g["\u0275\u0275template"](57,Pe,48,10,"div",18)),2&e&&(g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngModel",t.lrType),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](20,7,t.fromDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](23,10,t.endDate,"dd MMM yyyy")),g["\u0275\u0275advance"](33),g["\u0275\u0275property"]("ngForOf",t.pendinglr),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.modal.first.show),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.modal.second.show))},directives:[u.s,u.v,x.D,x.r,x.u,x.w,x.G,u.r,y.a,h.t,h.u,h.r,x.d,le.a],pipes:[h.f],styles:[".heading-row[_ngcontent-%COMP%]{font-size:12px}.custom-modal[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding:20px;background:transparent;overflow:auto;height:100%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238!important}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:-10px -1rem -1rem auto;outline:none}.custom-modal-body[_ngcontent-%COMP%]{background:#fff}.custom-active-modal[_ngcontent-%COMP%]{z-index:1050;background:rgba(0,0,0,.5)}.custom-passive-modal[_ngcontent-%COMP%]{z-index:1049}button[_ngcontent-%COMP%]{background-color:#008b8b;border:2px solid #ffebcd;color:#fff;font-size:12px;border-radius:4px}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.close[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none}.suggestion[_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:12px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px 5px;border-bottom:1px solid #ccc}.iv-large-image[_ngcontent-%COMP%]{max-width:1000px!important;max-height:1000px!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Oe),Ie=r("1j6Q"),Te=r("1i8C");function Ae(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",22),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n.id),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](n.description)}}function Fe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td",19),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td",19),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td",23),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=g["\u0275\u0275nextContext"]();return a.selectedSite=e.id,a.gotoSingle()})),g["\u0275\u0275text"](10,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.hotcnt||"0")}}var Le,Ve,ze=function(e,t){return{grey:e,active:t}},Ne=((Ve=function(){function e(t,n,a,r){o(this,e),this.mapService=t,this.apiService=n,this.router=a,this.commonService=r,this.isContruct=!1,this.mergeSiteId=null,this.typeIds=[],this.typeId=1,this.moveLoc="",this.siteLoc="",this.isHeatAble=!1,this.selectedSite=null,this.siteName=null,this.remainingList=[],this.siteLocLatLng={lat:0,lng:0},this.siteLatLng={lat:0,lng:90},this.isUpdate=!1,this.minZoom=12,this.tempData=[],this.getTypeIds(),this.getRemainingTable(),this.commonService.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getTypeIds(),this.getRemainingTable()}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("moveLoc",(function(t,n,a){e.mapService.zoomAt({lat:n,lng:a},13),e.clearAll(),e.loadMarkers()})),this.mapService.autoSuggestion("siteLoc",(function(t,n,a){e.siteLoc=t,e.siteLocLatLng={lat:n,lng:a}})),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}},{key:"toggleConstruction",value:function(){(0!=this.isContruct||confirm("Are you sure, you want to switch to contruction mode??"))&&(this.isContruct=!this.isContruct,this.clearAll())}},{key:"mergeSite",value:function(){var e=this;this.mergeSiteId?this.selectedSite?this.apiService.post("SiteFencing/mergeSite",{oldId:this.mergeSiteId,newId:this.selectedSite}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast(t.msg)}),(function(t){console.error(t),e.commonService.showError()})):this.commonService.showToast("Select New Site!!"):this.commonService.showToast("Select Old Site!!")}},{key:"getTypeIds",value:function(){var e=this;this.apiService.post("SiteFencing/getSiteTypes",{}).subscribe((function(t){console.log("Res: ",t.data),e.typeIds=t.data,e.typeIds.push({id:0,description:"All"})}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"gotoSingle",value:function(){var e=this;this.commonService.loading++;var t=this.selectedSite;this.apiService.post("Site/getSingleSite",{siteId:this.selectedSite}).subscribe((function(n){if(n.success){var a=n.data;console.log("Res: ",a),e.clearAll(!1),e.tempData=a,e.siteLatLng={lat:parseFloat(a[0].lat),lng:parseFloat(a[0].long)},e.typeId=a[0].type_id,e.selectedSite=a[0].id,e.siteLoc=a[0].loc_name,e.siteName=a[0].name,e.selectedSite=t,e.getRemainingTable(),e.apiService.post("SiteFencing/getSiteFences",{siteId:e.selectedSite}).subscribe((function(t){e.commonService.loading++;var n=t.data,a=Object.keys(n).length;if(console.log("Res: ",t.data),n[e.selectedSite]?(e.tempData[0].color="f00",e.isUpdate=!0):e.isUpdate=!1,e.mapService.createMarkers(e.tempData),1==a)e.mapService.createPolygon(n[Object.keys(n)[0]].latLngs),console.log("Single",n[Object.keys(n)[0]]);else if(a>1){var o=[],r=!1,i=1e5,l=-1;for(var c in n)if(r=!1,n.hasOwnProperty(c)){var s=n[c];c==e.selectedSite?r=!0:i>s.dis&&(e.mergeSiteId=c,r=!1,i=s.dis,l=o.length),o.push({data:s.latLngs,isMain:r,isSec:!1,show:"\n                  Id: ".concat(c,"<br>\n                  Name:").concat(s.name,"<br>\n                  Location:").concat(s.loc_name,"<br>\n                  ")})}-1!=l&&(o[l].isSec=!0),e.mapService.createPolygons(o)}else console.log("Else");e.mapService.zoomMap(18.5),e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}else e.commonService.showError(n.msg)}),(function(t){console.error(t),e.commonService.showError()})),this.commonService.loading--}},{key:"clearAll",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.exitTicket(),this.mapService.isDrawAllow=!1,this.siteName=null,this.siteLoc=null,this.selectedSite=null,this.isUpdate=!1,e&&(this.typeId=1,this.getRemainingTable()),this.mapService.clearAll()}},{key:"submitPolygon",value:function(){var e=this;if(this.submitValidity())if(this.mapService.polygonPath){var t="(",n=this.mapService.polygonPath.getPath().getArray();if(n.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var a=0;a<n.length;a++)t+=n[a].lat()+" "+n[a].lng()+",";t=(t+=n[0].lat()+" "+n[0].lng()+",").substr(0,t.length-1);var o={polygon:t+=")",siteId:this.selectedSite,siteName:this.siteName,siteLoc:this.siteLoc,typeId:this.typeId,isContruct:this.isContruct};!this.isUpdate||this.isContruct?this.apiService.post("SiteFencing/insertSiteFence",o).subscribe((function(t){if(!t.success)return e.commonService.showError(t.msg),void(e.mapService.isDrawAllow=!0);e.selectedSite=t.data,console.log("Res: ",e.selectedSite),e.commonService.showToast("Created"),e.gotoSingle(),e.getRemainingTable(),e.clearAll(!1)}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0})):this.apiService.post("SiteFencing/updateSiteFence",o).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Updated"),e.getRemainingTable(),e.gotoSingle(),e.clearAll(!1)}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0}))}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}},{key:"getRemainingTable",value:function(){var e=this;this.apiService.post("SiteFencing/getRemainingSites",{type:this.typeId}).subscribe((function(t){var n=t.data;console.log("Res: ",t.data),e.remainingList=n}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"submitValidity",value:function(){return!!(!this.selectedSite&&this.isContruct||this.selectedSite&&!this.isContruct)&&!!("unknown"!=this.siteName&&this.siteName||this.isContruct)}},{key:"loadMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(t=t||this.isContruct)||this.mapService.zoomMap(15);var n=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:n.lat1,lng1:n.lng1,lat2:n.lat2,lng2:n.lng2,typeId:t?null:this.typeId}).subscribe((function(n){var a=n.data;console.log("Res: ",n.data),t||e.clearAll(),e.mapService.createMarkers(a,!1,!1,["id","name"])}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"updateLocName",value:function(){var e=this;if(null!=this.selectedSite&&null!=this.siteLoc){var t=this.commonService.distanceFromAToB(this.siteLatLng.lat,this.siteLatLng.lng,this.siteLocLatLng.lat,this.siteLocLatLng.lng,"Mt"),n=0==parseInt(t+"")?0:parseInt(t+"");if(console.log("distance:",n,this.siteLatLng,this.siteLocLatLng),n>2e4)return void this.commonService.showToast("site is far away from loc");var a={siteId:this.selectedSite,siteLoc:this.siteLoc,siteName:this.siteName,siteTypeId:this.typeId,type:2};console.log("Param",a),this.commonService.loading++,this.apiService.post("SiteFencing/updateSiteDetails",a).subscribe((function(t){e.commonService.loading--,e.commonService.showToast(t.msg)}),(function(t){e.commonService.loading--,console.log(t)}))}else this.commonService.showToast("Enter Site Name or Select Site ")}},{key:"updateSiteName",value:function(){var e=this;if(null==this.selectedSite||0==this.typeId||null==this.siteName||(this.siteName+"").toLowerCase().includes("unknown"))this.commonService.showToast("Select Site,Type,Name(not unknown)");else{var t={siteId:this.selectedSite,siteLoc:this.siteLoc,siteName:this.siteName,siteTypeId:this.typeId,type:1};console.log("Param",t),this.commonService.loading++,this.apiService.post("SiteFencing/updateSiteDetails",t).subscribe((function(t){e.commonService.loading--,e.commonService.showToast(t.msg)}),(function(t){e.commonService.loading--,console.log(t)}))}}},{key:"enterTicket",value:function(){var e=this;if(!this.selectedSite&&this.isContruct||this.selectedSite&&!this.isContruct){if(!this.mapService.isDrawAllow){var t={tblRefId:2,tblRowId:this.selectedSite?this.selectedSite:-1};this.commonService.loading++,this.loadMarkers(!0),this.apiService.post("TicketActivityManagment/insertTicketActivity",t).subscribe((function(t){e.commonService.loading--,t.success?(e.mapService.isDrawAllow=!0,e.isUpdate&&e.commonService.showToast("Already Exists")):e.commonService.showToast(t.msg)}),(function(t){e.commonService.loading--,console.log(t)}))}this.mapService.isDrawAllow&&this.submitPolygon()}else this.commonService.showToast("Select site or switch to contruction mode..")}},{key:"exitTicket",value:function(){var e,t=this,n={tblRefId:2,tblRowId:this.selectedSite?this.selectedSite:-1};return console.log("params",n),this.commonService.loading++,this.apiService.post("TicketActivityManagment/updateActivityEndTime",n).subscribe((function(n){return t.commonService.loading--,e=n,console.log(e),!!e.sucess}),(function(e){t.commonService.loading--,console.log(e)})),!1}},{key:"ignoreSite",value:function(){var e=this;this.selectedSite?(this.commonService.loading++,this.apiService.post("SiteFencing/ignoreSite",{siteId:this.selectedSite}).subscribe((function(t){e.commonService.loading--,e.commonService.showToast(t.msg)}),(function(t){e.commonService.loading--,console.log(t)})),this.clearAll()):alert("Select Site First!!!")}},{key:"showHeat",value:function(){var e=this;if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<this.minZoom)return void this.commonService.showToast("bounds are huge");var t=this.mapService.getMapBounds();console.log("Bounds",t);var n={lat:(t.lat1+t.lat2)/2,long:(t.lng2+t.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+n.lat+"&long="+n.long).subscribe((function(t){console.log("Res: ",t.data),e.mapService.createHeatMap(t.data),e.isHeatAble=!0,e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}}},{key:"loadLatLong",value:function(){if(console.log("moveLoc",this.moveLoc),new RegExp(/[0-9]*,[0-9]*/i).test(this.moveLoc)){var e=parseFloat(this.moveLoc.split(",")[0]),t=parseFloat(this.moveLoc.split(",")[1]);this.mapService.zoomAt({lat:e,lng:t},13),this.clearAll(),this.loadMarkers()}else this.commonService.showError("Pattern is Lat,Long")}}]),e}()).\u0275fac=function(e){return new(e||Ve)(g["\u0275\u0275directiveInject"](Te.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](s.a))},Ve.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ve,selectors:[["site-fencing"]],decls:78,vars:14,consts:[[1,"row"],[1,"col-6","table"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["placeholder","Old Site Id",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",2,"display","inline-block","margin-right","5px",3,"click"],[1,"fa","fa-pencil-ruler","fa-2x","construct",3,"ngClass","click"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Site Id",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],[1,"btn","btn-primary",3,"click"],["routerLink","/admin/halt-density",1,"btn","btn-primary","ml-1"],[1,"btn","btn-primary","mr-1",3,"click"],["placeholder","Site Name..",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[4,"ngFor","ngForOf"],["id","map",1,"map","col-6"],[3,"value"],[3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"table"),g["\u0275\u0275elementStart"](5,"tbody"),g["\u0275\u0275elementStart"](6,"tr"),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"input",2),g["\u0275\u0275listener"]("keydown.enter",(function(){return t.loadLatLong()}))("ngModelChange",(function(e){return t.moveLoc=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275elementStart"](10,"input",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.mergeSiteId=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275elementStart"](12,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.mergeSite()})),g["\u0275\u0275text"](13,"Merge"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"i",5),g["\u0275\u0275listener"]("click",(function(){return t.toggleConstruction()})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"tr"),g["\u0275\u0275elementStart"](16,"td"),g["\u0275\u0275elementStart"](17,"select",6),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.typeId=e}))("change",(function(){return t.getRemainingTable()})),g["\u0275\u0275template"](18,Ae,2,2,"option",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"td"),g["\u0275\u0275elementStart"](20,"input",8),g["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.selectedSite=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"td"),g["\u0275\u0275elementStart"](22,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.ignoreSite()})),g["\u0275\u0275text"](23,"Ignore"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"button",10),g["\u0275\u0275text"](25,"Buff"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"tr"),g["\u0275\u0275elementStart"](27,"td"),g["\u0275\u0275elementStart"](28,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),g["\u0275\u0275text"](29,"Clear"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),g["\u0275\u0275text"](31),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"td"),g["\u0275\u0275elementStart"](33,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),g["\u0275\u0275text"](34,"Load Marker"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.updateSiteName()})),g["\u0275\u0275text"](36,"U.S"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](37,"td"),g["\u0275\u0275elementStart"](38,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),g["\u0275\u0275text"](39),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](40,"tr"),g["\u0275\u0275elementStart"](41,"td"),g["\u0275\u0275elementStart"](42,"input",12),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.siteName=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"td"),g["\u0275\u0275elementStart"](44,"input",13),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.siteLoc=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"td"),g["\u0275\u0275elementStart"](46,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.updateLocName()})),g["\u0275\u0275text"](47,"Update Loction"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](48,"tr"),g["\u0275\u0275elementStart"](49,"td",14),g["\u0275\u0275elementStart"](50,"div",15),g["\u0275\u0275elementStart"](51,"span"),g["\u0275\u0275elementStart"](52,"span",16),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),g["\u0275\u0275text"](53,"1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"span",16),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),g["\u0275\u0275text"](55,"2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](56,"span",16),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),g["\u0275\u0275text"](57,"3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](58,"span",16),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),g["\u0275\u0275text"](59,"4"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](60,"span",16),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),g["\u0275\u0275text"](61,"5"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](62,"table",17),g["\u0275\u0275elementStart"](63,"thead",18),g["\u0275\u0275elementStart"](64,"tr"),g["\u0275\u0275elementStart"](65,"th",19),g["\u0275\u0275text"](66,"S.No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](67,"th",19),g["\u0275\u0275text"](68,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](69,"th"),g["\u0275\u0275text"](70,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](71,"th"),g["\u0275\u0275text"](72,"Hot Count"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](73,"th"),g["\u0275\u0275text"](74,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](75,"tbody"),g["\u0275\u0275template"](76,Fe,11,4,"tr",20),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](77,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngModel",t.moveLoc),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.mergeSiteId),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction2"](11,ze,!t.isContruct,t.isContruct)),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.typeId),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.typeIds),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.selectedSite),g["\u0275\u0275advance"](11),g["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),g["\u0275\u0275advance"](8),g["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.siteName),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.siteLoc),g["\u0275\u0275advance"](32),g["\u0275\u0275property"]("ngForOf",t.remainingList))},directives:[u.s,u.r,x.d,x.r,x.u,h.r,x.D,h.t,l.d,x.w,x.G],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:150px!important;max-width:inherit!important}.construct[_ngcontent-%COMP%]{float:right;margin-top:4px}.grey[_ngcontent-%COMP%]{color:red}.active[_ngcontent-%COMP%]{color:green}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ve),je=((Le=function(){function e(t,n,a){o(this,e),this.mapService=t,this.apiService=n,this.commonService=a,this.isUpdate=!1,this.selectedArea={lat:null,long:null,id:null,loc_name:null},this.locName=null,this.locLatLng={lat:0,lng:0},this.tempData=[],this.commonService.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("siteLoc",(function(t,n,a,o){e.commonService.loading++,e.mapService.zoomAt({lat:n,lng:a},10),e.clearAll(),e.locLatLng={lat:n,lng:a};var r=o.split(",");console.log("PlaceT",r,"pLACE",o),e.locName=r[0]+"("+r[1].substr(0,3)+")",e.gotoSingle(!1),e.commonService.loading--})),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}},{key:"gotoSingle",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.commonService.loading++,this.apiService.post("SiteFencing/getTransportationAreaFences",{lat:this.locLatLng.lat,lng:this.locLatLng.lng}).subscribe((function(n){var a=n.data;if(!a)return e.isUpdate=!1,void e.commonService.loading--;e.isUpdate=!!a[e.locName];var o=Object.keys(a).length;if(console.log("Res: ",n.data),1==o){t&&e.clearAll();var r=[{data:a[Object.keys(a)[0]].latLngs,isMain:e.isUpdate,isSec:!e.isUpdate,show:Object.keys(a)[0]}];e.mapService.createPolygons(r),console.log("Single",a[Object.keys(a)[0]])}else if(o>1){var i=[],l=!1,c=1e5,s=-1;for(var d in a)if(l=!1,a.hasOwnProperty(d)){var m=a[d];d==e.locName?l=!0:c>m.dis&&(l=!1,c=m.dis,s=i.length),i.push({data:m.latLngs,isMain:l,isSec:!1,show:d}),console.log("Multi",d)}-1!=s&&(i[s].isSec=!0),t&&e.clearAll(),e.mapService.createPolygons(i)}e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}},{key:"selectArea",value:function(e){console.log("Srearch",e),this.commonService.loading++,this.clearAll(),this.isUpdate=!0,this.locName=e.loc_name,e.lat=parseFloat(e.lat),e.long=parseFloat(e.long),this.locLatLng={lat:e.lat,lng:e.long},this.mapService.zoomAt(this.locLatLng,10),this.gotoSingle(!1),this.selectedArea=e,this.commonService.loading--}},{key:"clearAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.exitTicket(),this.mapService.isDrawAllow=!1,this.locName=null,this.locLatLng=null,this.isUpdate=!1,this.selectedArea=null,e?this.mapService.clearAll():this.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!0})}},{key:"submitPolygon",value:function(){var e=this;if(this.submitValidity())if(this.mapService.polygonPath){var t="(",n=this.mapService.polygonPath.getPath().getArray();if(n.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var a=0;a<n.length;a++)t+=n[a].lat()+" "+n[a].lng()+",";t=(t+=n[0].lat()+" "+n[0].lng()+",").substr(0,t.length-1),t+=")",this.isUpdate?this.apiService.post("SiteFencing/updateTA",{polygon:t,locName:this.selectedArea.loc_name,lat:this.selectedArea.lat,long:this.selectedArea.long}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Updated"),e.gotoSingle()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0})):this.apiService.post("SiteFencing/insertTransportAreaFence",{polygon:t,locName:this.locName,lat:this.locLatLng.lat,long:this.locLatLng.lng}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Created"),e.gotoSingle()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0}))}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}},{key:"DeleteArea",value:function(){var e=this;console.log("Selected  Area",this.selectedArea),this.selectedArea.loc_name?this.apiService.post("SiteFencing/deleteArea",{locName:this.selectedArea.loc_name}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Deleted"),e.clearAll()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0})):this.commonService.showError("Load Area!!")}},{key:"submitValidity",value:function(){return!!this.locName}},{key:"loadMarkers",value:function(){var e=this,t=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:t.lat1,lng1:t.lng1,lat2:t.lat2,lng2:t.lng2,typeId:1}).subscribe((function(t){var n=t.data;console.log("Res: ",t.data),e.mapService.clearAll(!0,!0,{marker:!0,polygons:!1,polypath:!1}),e.mapService.createMarkers(n)}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"enterTicket",value:function(){this.locName?this.mapService.isDrawAllow?this.submitPolygon():this.mapService.isDrawAllow=!0:this.commonService.showToast("Select Location First..")}},{key:"exitTicket",value:function(){return console.log("params",{tblRefId:9,tblRowId:this.locName}),!1}}]),e}()).\u0275fac=function(e){return new(e||Le)(g["\u0275\u0275directiveInject"](Te.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a))},Le.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Le,selectors:[["transport-area"]],decls:39,vars:3,consts:[[1,"row"],[1,"col-6","table"],["name","selected-area","url","Suggestion/getTransArea","display","loc_name","placeholder","Location Name...",3,"preSelected","onSelected"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],["id","map",1,"map","col-6"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"table"),g["\u0275\u0275elementStart"](5,"tbody"),g["\u0275\u0275elementStart"](6,"tr"),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectArea(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275elementStart"](10,"input",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.locName=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275elementStart"](12,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),g["\u0275\u0275text"](13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"tr"),g["\u0275\u0275elementStart"](15,"td"),g["\u0275\u0275elementStart"](16,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.clearAll(!0)})),g["\u0275\u0275text"](17,"Clear All"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"td"),g["\u0275\u0275elementStart"](19,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),g["\u0275\u0275text"](20,"Load Marker"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"td"),g["\u0275\u0275elementStart"](22,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.DeleteArea()})),g["\u0275\u0275text"](23,"Delete Loc"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"tr"),g["\u0275\u0275elementStart"](25,"td",5),g["\u0275\u0275elementStart"](26,"div",6),g["\u0275\u0275elementStart"](27,"span"),g["\u0275\u0275elementStart"](28,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),g["\u0275\u0275text"](29,"1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),g["\u0275\u0275text"](31,"2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),g["\u0275\u0275text"](33,"3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),g["\u0275\u0275text"](35,"4"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),g["\u0275\u0275text"](37,"5"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](38,"div",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.locName),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"))},directives:[u.s,u.r,y.a,x.d,x.r,x.u],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Le),Re=r("27xo");function He(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275elementStart"](12,"button",2),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().updateSiteDetail(e)})),g["\u0275\u0275text"](13,"Edit Row"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.site_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.site_name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.lat),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.lng),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.sh_cnt)}}var Ue,Be=((Ue=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.siteDetails=[],this.getsiteDetails(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getsiteDetails()}},{key:"getsiteDetails",value:function(){var e=this;++this.common.loading,this.api.post("Site/getSiteDetails",{}).subscribe((function(t){--e.common.loading,console.log("Res:",t.data),e.siteDetails=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"updateSiteDetail",value:function(e){var t=this;console.log(e),this.common.params={site:e},this.common.handleModalSize("class","modal-lg","1200"),this.modalService.open(Re.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getsiteDetails()}))}}]),e}()).\u0275fac=function(e){return new(e||Ue)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},Ue.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ue,selectors:[["site-details"]],decls:26,vars:1,consts:[["frame","box",2,"width","100%"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primery",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"h2"),g["\u0275\u0275text"](1,"SiteDetails"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](2,"br"),g["\u0275\u0275element"](3,"br"),g["\u0275\u0275elementStart"](4,"table",0),g["\u0275\u0275elementStart"](5,"thead"),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275elementStart"](7,"b"),g["\u0275\u0275text"](8,"SiteID"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"th"),g["\u0275\u0275elementStart"](10,"b"),g["\u0275\u0275text"](11,"SiteName"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275elementStart"](13,"b"),g["\u0275\u0275text"](14,"Lat"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"th"),g["\u0275\u0275elementStart"](16,"b"),g["\u0275\u0275text"](17,"Long"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"th"),g["\u0275\u0275elementStart"](19,"b"),g["\u0275\u0275text"](20,"Sh_Cnt"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"th"),g["\u0275\u0275elementStart"](22,"b"),g["\u0275\u0275text"](23,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"tbody"),g["\u0275\u0275template"](25,He,14,5,"tr",1),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](25),g["\u0275\u0275property"]("ngForOf",t.siteDetails))},directives:[h.t],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%]{background-color:#737373;color:#fff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;text-align:left;padding:8px}td[_ngcontent-%COMP%]{color:#000}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#005aff;color:#fff;border:none;padding:10px;border-radius:5px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:100px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#eaeaea}"]}),Ue),Ge=r("V5lr"),$e=r("LvDl"),Ye=r("mNmA");function We(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",3),g["\u0275\u0275elementStart"](1,"label"),g["\u0275\u0275text"](2," Select Parent"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"auto-suggestion",31),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().selectParent(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("data",a.parentPages)("preSelected",null)}}function Ke(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",32),g["\u0275\u0275elementStart"](1,"button",33),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().updatePreferences()})),g["\u0275\u0275text"](2,"Save"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function Ze(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",45),g["\u0275\u0275elementStart"](1,"input",46),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](4).checkOrUnCheckAll(e,"page")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](2),g["\u0275\u0275elementStart"](3,"div",47),g["\u0275\u0275elementStart"](4,"div",48),g["\u0275\u0275elementStart"](5,"input",49),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isadd=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"label"),g["\u0275\u0275text"](7,"A"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",48),g["\u0275\u0275elementStart"](9,"input",50),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isedit=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"label"),g["\u0275\u0275text"](11,"E"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",48),g["\u0275\u0275elementStart"](13,"input",51),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isdeleted=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"label"),g["\u0275\u0275text"](15,"D"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("name","page-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",a.title," "),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("hidden",!a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("hidden",!a.has_add),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isadd),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("hidden",!a.has_edit),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isedit),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("hidden",!a.has_delete),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isdeleted)}}function qe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",40),g["\u0275\u0275elementStart"](1,"div",41),g["\u0275\u0275elementStart"](2,"input",37),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](3).checkOrUnCheckAll(e,"group")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](3),g["\u0275\u0275elementStart"](4,"span",42),g["\u0275\u0275text"](5,"All Functionality"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"input",43),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isAll=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=g["\u0275\u0275nextContext"]().index;return g["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(e,a,e.isAll)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](7,Ze,16,10,"div",44),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","group-box")("name","group-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",a.name," "),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.isAll),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",a.pages)}}function Je(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"div",36),g["\u0275\u0275elementStart"](2,"input",37),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).checkOrUnCheckAll(e,"module")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"span",38),g["\u0275\u0275text"](4),g["\u0275\u0275pipe"](5,"uppercase"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](6,qe,8,6,"div",39),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","module-box")("name","section-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind1"](5,5,a.name)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",a.groups)}}function Xe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",34),g["\u0275\u0275elementStart"](1,"h4"),g["\u0275\u0275text"](2,"DashBoard"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,Je,7,7,"div",35),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngForOf",n.formattedData)}}function Qe(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",45),g["\u0275\u0275elementStart"](1,"input",46),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](4).checkOrUnCheckAll(e,"page")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](2),g["\u0275\u0275elementStart"](3,"div",47),g["\u0275\u0275elementStart"](4,"div",48),g["\u0275\u0275elementStart"](5,"input",49),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isadd=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"label"),g["\u0275\u0275text"](7,"A"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",48),g["\u0275\u0275elementStart"](9,"input",50),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isedit=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"label"),g["\u0275\u0275text"](11,"E"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",48),g["\u0275\u0275elementStart"](13,"input",51),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isdeleted=e}))("click",(function(e){g["\u0275\u0275restoreView"](n);var a=t.$implicit;return g["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"label"),g["\u0275\u0275text"](15,"D"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("name","page-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",a.title," "),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("hidden",!a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("hidden",!a.has_add),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isadd),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("hidden",!a.has_edit),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isedit),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("hidden",!a.has_delete),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",a.isdeleted)}}function et(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",40),g["\u0275\u0275elementStart"](1,"div",41),g["\u0275\u0275elementStart"](2,"input",37),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](3).checkOrUnCheckAll(e,"group")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](3),g["\u0275\u0275elementStart"](4,"span",42),g["\u0275\u0275text"](5,"All Functionality"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"input",43),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isAll=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=g["\u0275\u0275nextContext"]().index;return g["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(e,a,e.isAll)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](7,Qe,16,10,"div",44),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","group-box")("name","group-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",a.name," "),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.isAll),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",a.pages)}}function tt(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"div",36),g["\u0275\u0275elementStart"](2,"input",37),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).checkOrUnCheckAll(e,"module")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"span",38),g["\u0275\u0275text"](4),g["\u0275\u0275pipe"](5,"uppercase"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](6,et,8,6,"div",39),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngClass","module-box")("name","section-"+o)("ngModel",a.isSelected),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind1"](5,5,a.name)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",a.groups)}}function nt(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",52),g["\u0275\u0275elementStart"](1,"h4"),g["\u0275\u0275text"](2,"Mobile App"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,tt,7,7,"div",35),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngForOf",n.formattedDataApp)}}var at,ot=((at=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.route=i,this.data=[],this.dashBoardPages=[],this.appPages=[],this.parentPages=[],this.selectedUser={details:null,oldPreferences:[]},this.formattedData=[],this.formattedDataApp=[],this.pageGroup=[],this.newPage={module:null,group:null,title:null,url:null,parentId:null,type:"Dashboard",addType:1,add:0,edit:0,delete:0},this.getUsersList=[],this.istaskOpertion=!1,this.functionalityFlag=[],this.common.isComponentActive=!1,this.common.refresh=this.refresh.bind(this),this.getAllUserList(),this.getPages()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"ngDestroy",value:function(){}},{key:"changePermissionType",value:function(e,t){var n;n=t.target.checked,this.newPage[e]=n?1:0}},{key:"canDeactivate",value:function(){var e=this;return console.log("activity Start",this.common.isComponentActive),this.common.isComponentActive?(this.common.params={title:"Confirmation ",description:"<b>&nbsp;Are Sure To Leave This Page WithOut Save<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&(e.common.isComponentActive=!1,console.log("no, you wont navigate anywhere"))})),!1):(console.log("you are going away, goodby"),!0)}},{key:"refresh",value:function(){this.data=[],this.selectedUser={details:null,oldPreferences:[]},document.getElementById("employeename").value="",this.common.isComponentActive=!1,this.formattedData=[],this.formattedDataApp=[]}},{key:"createNewPage",value:function(){var e=this,t={moduleName:this.newPage.module,groupName:this.newPage.group,title:this.newPage.title,route:this.newPage.url,type:this.newPage.type,add_type:this.newPage.addType,hasAdd:this.newPage.add,hasEdit:this.newPage.edit,hasDelete:this.newPage.delete,parentId:this.newPage.parentId};console.log("params",t),this.common.loading++,this.api.post("UserRoles/insertNewPageDetails",t).subscribe((function(t){e.common.loading--,e.common.showToast(t.msg)}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"checkOrUnCheckAll",value:function(e,t){this.common.isComponentActive=!0,"group"===t?e.pages.map((function(t){t.isSelected=e.isSelected})):"module"===t&&e.groups.map((function(t){t.isSelected=e.isSelected,t.pages.map((function(t){return t.isSelected=e.isSelected}))})),e.isSelected||"page"!=t||(e.isSelected=e.isSelected,e.isadd=!1,e.isedit=!1,e.isdeleted=!1,e.isOp=!0)}},{key:"changePagePermission",value:function(e,t,n){if(this.istaskOpertion=!0,this.istaskOpertion)return e.isOp=!0}},{key:"getAllUserList",value:function(){var e=this;this.common.loading++,this.api.get("UserRoles/getActiveAdminUsers?").subscribe((function(t){e.common.loading--,e.getUsersList=t.data}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"getUserPages",value:function(e){var t=this;console.log(e),this.appPages=[],this.dashBoardPages=[],this.formattedData=[],this.selectedUser.details=e;var n={userId:e.id,userType:1,iswallet:localStorage.getItem("iswallet")||"0"};this.common.loading++,this.api.post("UserRoles/getAllPages",n).subscribe((function(e){t.common.loading--,t.data=e.data,t.selectedUser.oldPreferences=e.data,t.data.map((function(e){"Dashboard"==e.type?t.dashBoardPages.push(e):"App"==e.type&&t.appPages.push(e)})),console.log("dashboardPages",t.dashBoardPages),console.log("app pages",t.appPages),t.managedata(),t.manageAppData()}),(function(e){t.common.loading--,console.log("Error: ",e)}))}},{key:"getPages",value:function(){var e=this;this.common.loading++,this.api.get("UserRoles/getPages").subscribe((function(t){e.common.loading--,e.parentPages=t.data?t.data:[]}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"managedata",value:function(){this.formattedData=[],console.log("this.dashBoardPages",this.dashBoardPages);var e=$e.groupBy(this.dashBoardPages,"module");console.log("firstGroup",e),console.log("firstGroupkeys",Object.keys(e)),this.formattedData=Object.keys(e).map((function(t){return{name:t,groups:e[t],isSelected:!1,isOp:!1}})),console.log("formattedData",this.formattedData),this.formattedData.map((function(e){var t=!0,n=$e.groupBy(e.groups,"group_name");e.groups=Object.keys(n).map((function(e){var a=!0,o=n[e].map((function(e){return e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e}));return t&&(t=a),{name:e,pages:o,isSelected:a}})),e.isSelected=t})),this.formattedData=$e.sortBy(this.formattedData,["name"],["asc"]).map((function(e){return e.groups=$e.sortBy(e.groups,["name"],["asc"]).map((function(e){return e.pages=$e.sortBy(e.pages,["title"],["asc"]),e})),e}))}},{key:"manageAppData",value:function(){this.formattedDataApp=[];var e=$e.groupBy(this.appPages,"module");console.log("firstGroup",e),console.log("firstGroupkeys",Object.keys(e)),console.log("this.formattedDataApp",this.formattedDataApp),this.formattedDataApp=Object.keys(e).map((function(t){return{name:t,groups:e[t],isSelected:!1,isOp:!1}})),console.log("formattedData1",this.formattedDataApp),this.formattedDataApp.map((function(e){var t=!0,n=$e.groupBy(e.groups,"group_name");e.groups=Object.keys(n).map((function(e){var a=!0,o=n[e].map((function(e){return e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e}));return t&&(t=a),{name:e,pages:o,isSelected:a}})),e.isSelected=t})),this.formattedDataApp=$e.sortBy(this.formattedDataApp,["name"],["asc"]).map((function(e){return e.groups=$e.sortBy(e.groups,["name"],["asc"]).map((function(e){return e.pages=$e.sortBy(e.pages,["title"],["asc"]),e})),e}))}},{key:"updatePreferences",value:function(){var e=this,t={pages:this.findSelectedPages(),userId:this.selectedUser.details.id,userType:1};console.log("Param:",t),this.common.loading++,this.api.post("UserRoles/setPagesWrtUser",t).subscribe((function(t){console.log(t),e.common.loading--,e.common.showToast(t.msg),e.refresh()}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"findSelectedPages",value:function(){var e=[];return console.log("formattedData: ",this.formattedData),this.formattedData.map((function(t){t.groups.map((function(t){t.pages.map((function(t){e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})}))}))})),this.formattedDataApp.map((function(t){t.groups.map((function(t){t.pages.map((function(t){e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})}))}))})),e}},{key:"checkOrUnCheckfunctionality",value:function(e,t,n){if(console.log(e,t,n),n)for(var a=0;a<e.pages.length;a++)console.log(e.pages[a]),e.pages[a].isSelected=!0,e.pages[a].isadd=!0,e.pages[a].isedit=!0,e.pages[a].isdeleted=!0,e.pages[a].isOp=!0;else for(var o=0;o<e.pages.length;o++)e.pages[o].isSelected=!1,e.pages[o].isadd=!1,e.pages[o].isedit=!1,e.pages[o].isdeleted=!1,e.pages[o].isOp=!1}},{key:"selectParent",value:function(e){this.newPage.parentId=e.id}}]),e}()).\u0275fac=function(e){return new(e||at)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](Ye.b))},at.\u0275cmp=g["\u0275\u0275defineComponent"]({type:at,selectors:[["user-preferences"]],decls:65,vars:18,consts:[[1,"row"],[1,"col-8"],[2,"min-height","580px"],[1,"col-2"],["type","text","id","module","name","module",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","group","name","group",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-3"],["type","text","id","url","name","url",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","Dashboard"],["value","App"],[1,"row","mt-3"],["class","col-2",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","-1"],[1,"col-7"],[1,"row",2,"float","right"],[1,"col-12"],["type","checkbox","name","addPermission","id","addPermission",3,"ngModel","value","ngModelChange","change"],["type","checkbox","name","editPermission","id","editPermission",3,"ngModel","value","ngModelChange","change"],["type","checkbox","name","deletePermission","id","deletePermission",3,"ngModel","value","ngModelChange","change"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[1,"row","mt-2"],[1,"search","mt-2"],["display","employeename","placeholder","Employee","inputId","employeename",3,"data","preSelected","onSelected"],["class","col text-left mt-4",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["display","title","placeholder","Parent page","inputId","parentPage",3,"data","preSelected","onSelected"],[1,"col","text-left","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"container"],[4,"ngFor","ngForOf"],[1,"module-container"],["type","checkbox",3,"ngClass","name","ngModel","ngModelChange","change"],[1,"module-name"],["class","group-container",4,"ngFor","ngForOf"],[1,"group-container"],[1,"group-head"],[2,"font-size","14px","margin-left","40px"],["type","checkbox",1,"group-box",3,"ngModel","ngModelChange","change"],["class","col-2 page-container",4,"ngFor","ngForOf"],[1,"col-2","page-container"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","click"],[1,"row","permission-type",3,"hidden"],[1,"col-4",2,"padding","0px!important",3,"hidden"],["type","checkbox","name","add",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","edit",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","delete",1,"page-box-type",3,"ngModel","ngModelChange","click"],[1,"container","mt-4"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275text"](4," User Role "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body",2),g["\u0275\u0275elementStart"](6,"div",0),g["\u0275\u0275elementStart"](7,"div",3),g["\u0275\u0275elementStart"](8,"label"),g["\u0275\u0275text"](9,"Module"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"input",4),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.module=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",3),g["\u0275\u0275elementStart"](12,"label"),g["\u0275\u0275text"](13,"Group"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"input",5),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.group=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",3),g["\u0275\u0275elementStart"](16,"label"),g["\u0275\u0275text"](17,"Page Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"input",6),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.title=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",7),g["\u0275\u0275elementStart"](20,"label"),g["\u0275\u0275text"](21,"Url"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"input",8),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.url=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"div",3),g["\u0275\u0275elementStart"](24,"label"),g["\u0275\u0275text"](25,"Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"select",9),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.type=e}))("change",(function(){return t.newPage.parentId=null})),g["\u0275\u0275elementStart"](27,"option",10),g["\u0275\u0275text"](28,"Dashboard"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"option",11),g["\u0275\u0275text"](30,"App"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](31,"div",12),g["\u0275\u0275template"](32,We,4,2,"div",13),g["\u0275\u0275elementStart"](33,"div",3),g["\u0275\u0275elementStart"](34,"label"),g["\u0275\u0275text"](35,"Add Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"select",14),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.addType=e})),g["\u0275\u0275elementStart"](37,"option",15),g["\u0275\u0275text"](38,"Admin"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"option",16),g["\u0275\u0275text"](40,"FoAdmin"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"option",17),g["\u0275\u0275text"](42,"Both"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",18),g["\u0275\u0275elementStart"](44,"div",19),g["\u0275\u0275elementStart"](45,"div",20),g["\u0275\u0275elementStart"](46,"input",21),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.add=e}))("change",(function(e){return t.changePermissionType("add",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](47,"label"),g["\u0275\u0275text"](48,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](49,"input",22),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.edit=e}))("change",(function(e){return t.changePermissionType("edit",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](50,"label"),g["\u0275\u0275text"](51,"Edit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](52,"input",23),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.newPage.delete=e}))("change",(function(e){return t.changePermissionType("delete",e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](53,"label"),g["\u0275\u0275text"](54,"Delete"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](55,"button",24),g["\u0275\u0275listener"]("click",(function(){return t.createNewPage()})),g["\u0275\u0275text"](56,"Add New Page"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](57,"div",25),g["\u0275\u0275elementStart"](58,"div",26),g["\u0275\u0275elementStart"](59,"label"),g["\u0275\u0275text"](60," Select Employee Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](61,"auto-suggestion",27),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getUserPages(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](62,Ke,3,0,"div",28),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](63,Xe,4,1,"div",29),g["\u0275\u0275template"](64,nt,4,1,"div",30),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngModel",t.newPage.module),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.newPage.group),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.newPage.title),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.newPage.url),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.newPage.type),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf","App"==t.newPage.type),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.newPage.addType),g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngModel",t.newPage.add)("value",1),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.newPage.edit)("value",1),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.newPage.delete)("value",1),g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("data",t.getUsersList)("preSelected",null),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.selectedUser.details),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.formattedData.length>0),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.formattedDataApp.length>0))},directives:[u.s,u.v,u.r,x.d,x.r,x.u,x.D,x.w,x.G,h.u,x.a,y.a,h.t,h.r],pipes:[h.I],styles:[".row.col-2[_ngcontent-%COMP%]{margin:2px}.search[_ngcontent-%COMP%]{width:180px;margin-left:20px}.container[_ngcontent-%COMP%]{color:#000;border:2px solid grey}h4[_ngcontent-%COMP%]{text-align:center}.module-container[_ngcontent-%COMP%]{background:#ffd7d7;padding:5px 16px;font-weight:700;text-transform:capitalize;font-size:22px;margin-top:10px}.module-name[_ngcontent-%COMP%]{color:#01203c}.group-container[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:500;padding:5px 30px;font-size:18px;color:initial}.group-head[_ngcontent-%COMP%]{color:#161617;background:#d0e4f5;padding:4px}.page-container[_ngcontent-%COMP%]{font-size:14px!important;color:#00008b;margin-left:25px;padding:0;display:inline-table}input.group-box[_ngcontent-%COMP%], input.module-box[_ngcontent-%COMP%], input.page-box[_ngcontent-%COMP%]{width:16px;height:16px!important;cursor:pointer}.permission-type[_ngcontent-%COMP%]{margin:2px;border:1px solid;width:94%}.permission-type.col-4[_ngcontent-%COMP%]{padding:0;margin:0}.permission-type[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-right:10px}input.page-box-type[_ngcontent-%COMP%]{width:12px;height:12px!important;margin-left:8px;cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),at),rt=r("csNM");function it(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",13),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n.aduserid),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](n.aduserid)}}var lt=function(e){return{highlight:e}};function ct(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr",18),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td"),g["\u0275\u0275text"](14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"td"),g["\u0275\u0275text"](16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275elementStart"](18,"button",19),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).openVSCModel(e)})),g["\u0275\u0275text"](19," Take Action "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction1"](9,lt,a.isHighlight)),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.fo_name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.vehicle_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.prim_status),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.sec_status),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.suggest),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.alert_time),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.hold_by)}}function st(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",14),g["\u0275\u0275elementStart"](1,"table",15),g["\u0275\u0275elementStart"](2,"thead",16),g["\u0275\u0275elementStart"](3,"tr"),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"Fo Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"Vehicle RegNo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"Vehicle Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"Primary Status"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"Secondry Status"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"Suggestion"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"Alert Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"th"),g["\u0275\u0275text"](19,"Hold User"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"th"),g["\u0275\u0275text"](21,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"tbody"),g["\u0275\u0275template"](23,ct,20,11,"tr",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](23),g["\u0275\u0275property"]("ngForOf",n.VehicleStatusAlerts)}}function dt(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",20),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var mt,gt=((mt=function(){function e(t,n,a){o(this,e),this.common=t,this.api=n,this.modalService=a,this.startDate=new Date,this.element="",this.endDate=new Date,this.reportUserWise=[],this.reportVehicleWise=[],this.vehicleId=null,this.adminId=null,this.ticketAccordingTo="vehicle",this.aduserId=null,this.VehicleStatusAlerts=[],this.aduserIds=[],this.getAduserIds(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getAduserIds()}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id}},{key:"searchUser",value:function(e){this.adminId=e.id}},{key:"getAduserIds",value:function(){var e=this;this.api.get("HaltOperations/getAutoAduserid").subscribe((function(t){console.log("Res: ",t.data),e.aduserIds=t.data}),(function(t){console.error(t),e.common.showError()}))}},{key:"openVSCModel",value:function(e){var t=this.VehicleStatusAlerts.findIndex((function(t){return t.vehicle_id==e.vehicle_id&&t.addtime==e.addtime}));this.VehicleStatusAlerts[t].isHighlight=!0;var n={vehicle_id:e.vehicle_id,tTime:e.ttime,suggest:11,latch_time:e.latch_time};console.log("VehicleStatusData",n),this.common.params=n,this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}},{key:"goToTrail",value:function(){var e={vehicle_id:this.vehicleId,tTime:this.common.dateFormatter(this.endDate),suggest:11,latch_time:this.common.dateFormatter(this.startDate)};console.log("VehicleStatusData",e),this.common.params=e,this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}},{key:"getChallenged",value:function(){var e=this,t={startTime:this.common.dateFormatter(this.startDate),endTime:this.common.dateFormatter(this.endDate),aduserId:this.aduserId};this.common.loading++,this.api.post("HaltOperations/getChallenged",t).subscribe((function(t){e.common.loading--,console.log("Res: ",t.data),e.VehicleStatusAlerts=t.data}),(function(t){console.error(t),e.common.loading--,e.common.showError()}))}},{key:"viewAll",value:function(){var e=this,t="aduserId="+this.aduserId;this.common.loading++,console.log("params ",t),this.api.get("HaltOperations/getVehicleStatusAduserViseAlerts?"+t).subscribe((function(t){e.common.loading--,console.log("Res: ",t.data),e.VehicleStatusAlerts=t.data}),(function(t){console.error(t),e.common.loading--,e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||mt)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](p.r))},mt.\u0275cmp=g["\u0275\u0275defineComponent"]({type:mt,selectors:[["vscticket-audit"]],decls:31,vars:11,consts:[[1,"model-body"],[1,"row"],[1,"col-sm-2"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"col-sm-1"],["name","aduserid",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateTimeValue","isTime","onChanged"],[3,"isStart","dateTimeValue","isTime","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],[2,"margin-top","10px"],["class","tableFixHead",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"value"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"click"],[1,"no-data"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h5"),g["\u0275\u0275text"](3,"Vehicle Status Change Cleared Tickets"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"nb-card-body"),g["\u0275\u0275elementStart"](5,"div",0),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"div",2),g["\u0275\u0275elementStart"](8,"auto-suggestion",3),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",4),g["\u0275\u0275elementStart"](10,"select",5),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.aduserId=e})),g["\u0275\u0275template"](11,it,2,2,"option",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",2),g["\u0275\u0275elementStart"](13,"uj-date-time-picker",7),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",2),g["\u0275\u0275elementStart"](15,"uj-date-time-picker",8),g["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",4),g["\u0275\u0275elementStart"](17,"Button",9),g["\u0275\u0275listener"]("click",(function(){return t.goToTrail()})),g["\u0275\u0275text"](18,"vsc"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",2),g["\u0275\u0275elementStart"](20,"Button",9),g["\u0275\u0275listener"]("click",(function(){return t.viewAll()})),g["\u0275\u0275text"](21,"View All Vsc "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"div",2),g["\u0275\u0275elementStart"](23,"Button",9),g["\u0275\u0275listener"]("click",(function(){return t.getChallenged()})),g["\u0275\u0275text"](24,"View Challenged"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",10),g["\u0275\u0275template"](26,st,24,1,"div",11),g["\u0275\u0275template"](27,dt,2,0,"div",12),g["\u0275\u0275elementStart"](28,"div",10),g["\u0275\u0275elementStart"](29,"b"),g["\u0275\u0275text"](30),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.aduserId),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.aduserIds),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate)("isTime",!1),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("ngIf",t.VehicleStatusAlerts&&t.VehicleStatusAlerts.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.VehicleStatusAlerts||!t.VehicleStatusAlerts.length),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](t.VehicleStatusAlerts&&"Number Of Alerts : "+t.VehicleStatusAlerts.length))},directives:[u.s,u.v,u.r,y.a,x.D,x.r,x.u,h.t,rt.a,h.u,x.w,x.G,h.r],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{outline:none;padding:8px 15px;margin:0;text-transform:capitalize;border-radius:5px;border:0;cursor:pointer}.highlight[_ngcontent-%COMP%]{background-color:#ff0}"]}),mt);function pt(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",9),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ut,ht,ft=((ut=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.modalService=a,this.user=r,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-30)),this.missingIndusrtyData=[],this.ticketsData=[],this.missing=0,this.backlog=0,this.tickets=1,this.foid=null,this.isFo="true",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.foid=this.user._customer.id,console.log("foId",this.foid),this.ticket()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.ticket()}},{key:"ticket",value:function(){var e=this,t="startDate="+this.common.dateFormatter(this.startDate)+"&endDate="+this.common.dateFormatter(this.endDate)+"&isFo="+this.isFo;this.common.loading++,this.api.get("MissingIndustry?"+t).subscribe((function(t){e.common.loading--,console.log(t),e.ticketsData=t.data||[],e.ticketsData.length?e.setTable():e.resetTable(),console.log("data:",e.ticketsData),e.ticketsData&&(e.tickets=1,e.backlog=0)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"setTable",value:function(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}},{key:"generateHeadings",value:function(){var e={};for(var t in this.ticketsData[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.ticketsData.map((function(n){var a={};for(var o in e.generateHeadings())a[o]="Action"==o?{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}:{value:n[o],class:"black",action:""};t.push(a)})),t}},{key:"actionIcons",value:function(e){return[{class:"fa fa-pencil-alt mr-3",action:this.enterTicket.bind(this,e)}]}},{key:"enterTicket",value:function(e){var t,n=this;console.log("Issue :",e);var a={tblRefId:7,tblRowId:e._vid};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",a).subscribe((function(a){if(n.common.loading--,t=a,console.log(t),!t.success)return n.common.showToast(a.msg),!1;n.openChangeStatusModal(e)}),(function(e){n.common.loading--,console.log(e)}))}},{key:"openChangeStatusModal",value:function(e){var n=this,a=new Date(e.addtime),o=new Date(a.setHours(a.getHours()-48)),r=(this.common.dateFormatter(o),{id:e._id,vehicle_id:e._vid,tTime:e._ttime,suggest:null,latch_time:e._ltime,status:2,remark:e.remark});console.log("missing open data ",r),this.common.ref_page="ari",this.common.params=r,this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(a){console.log("after data chnage "),n.foid||n.ticket();var o,i=[],l=t(n.ticketsData);try{for(l.s();!(o=l.n()).done;){var c=o.value;c._id!=e._id&&i.push(c)}}catch(s){l.e(s)}finally{l.f()}n.ticketsData=i,n.resetTable(),n.setTable(),n.exitTicket(r)}))}},{key:"exitTicket",value:function(e){var t,n=this,a={tblRefId:7,tblRowId:e.vehicle_id};console.log("params",a),this.api.post("TicketActivityManagment/updateActivityEndTime",a).subscribe((function(e){return t=e,console.log(t),!!t.sucess}),(function(e){n.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||ut)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](R.a))},ut.\u0275cmp=g["\u0275\u0275defineComponent"]({type:ut,selectors:[["alert-related-issue"]],decls:22,vars:7,consts:[[1,"col-sm-4"],[1,"col-sm-8","text-right"],[1,"row"],[1,"col-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"isStart","dateTimeValue","isTime","onChanged"],[1,"btn","btn-dark",3,"click"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h5"),g["\u0275\u0275text"](4,"Alert Related Issues"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"label"),g["\u0275\u0275text"](7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"nb-card-body"),g["\u0275\u0275elementStart"](9,"div",2),g["\u0275\u0275elementStart"](10,"div",3),g["\u0275\u0275elementStart"](11,"uj-date-time-picker",4),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",3),g["\u0275\u0275elementStart"](13,"uj-date-time-picker",5),g["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",3),g["\u0275\u0275elementStart"](15,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.isFo="true",t.ticket()})),g["\u0275\u0275text"](16,"Fo Issue"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"div",3),g["\u0275\u0275elementStart"](18,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.isFo="false",t.ticket()})),g["\u0275\u0275text"](19,"All Issue"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div",7),g["\u0275\u0275template"](21,pt,1,2,"smart-table",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275textInterpolate1"]("",t.ticketsData.length," Records"),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate)("isTime",!1),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",t.ticketsData&&t.ticketsData.length))},directives:[u.s,u.v,u.r,rt.a,h.u,f.a],styles:[".remove[_ngcontent-%COMP%]{font-size:20px;color:red}.missingIndustry[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.backLogs[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.ticket[_ngcontent-%COMP%]:focus{background:coral;border-radius:5px}.class1[_ngcontent-%COMP%]:active{background:coral;border-radius:5px}.backLogs[_ngcontent-%COMP%], .missingIndustry[_ngcontent-%COMP%], .ticket[_ngcontent-%COMP%]{padding:11px;border-radius:15px}.tableFixHead[_ngcontent-%COMP%]{overflow-y:auto;height:200vh}.tableFixHead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background:#677078}.btn-design[_ngcontent-%COMP%]{border-radius:5px;background-color:#1a8bbf;border:0;color:#fff;margin-left:5px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 240px)}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),ut),bt=r("DzYX"),vt=((ht=function(){function e(t,n,a,r){o(this,e),this.common=t,this.api=n,this.user=a,this.modalService=r,this.supplierData={param1:"",param2:"",param3:"",param4:""},this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"insertSupplierDetails",value:function(){this.modalService.open(bt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getFoList",value:function(e){}},{key:"getSupplierList",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||ht)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},ht.\u0275cmp=g["\u0275\u0275defineComponent"]({type:ht,selectors:[["gps-supplier-mapping"]],decls:21,vars:6,consts:[[1,"model-body",2,"margin-left","20px","margin-right","20px","margin-top","20px","text-align","center"],[1,"row"],[1,"col-sm-6"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Supplier",3,"preSelected","onSelected"],[1,"row",2,"margin-top","40px"],[1,"col-sm-3"],["type","text","name","input1","placeholder","Input 1",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input2","placeholder","Input 2",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input3","placeholder","Input 3",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","input4","placeholder","Input 4",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",2,"margin-top","40px",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Fo GPS Mapping "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"auto-suggestion",3),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",2),g["\u0275\u0275elementStart"](9,"auto-suggestion",4),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getSupplierList(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",5),g["\u0275\u0275elementStart"](11,"div",6),g["\u0275\u0275elementStart"](12,"input",7),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param1=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",6),g["\u0275\u0275elementStart"](14,"input",8),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param2=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",6),g["\u0275\u0275elementStart"](16,"input",9),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param3=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"div",6),g["\u0275\u0275elementStart"](18,"input",10),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.supplierData.param4=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"Button",11),g["\u0275\u0275listener"]("click",(function(){return t.insertSupplierDetails()})),g["\u0275\u0275text"](20,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.supplierData.param1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.supplierData.param2),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.supplierData.param3),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.supplierData.param4))},directives:[u.s,u.v,u.r,y.a,x.d,x.r,x.u],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),ht);function St(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275elementStart"](6,"select",10),g["\u0275\u0275listener"]("ngModelChange",(function(e){g["\u0275\u0275restoreView"](n);var a=t.index;return g["\u0275\u0275nextContext"](2).is_ncv[a]=e}))("change",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return g["\u0275\u0275nextContext"](2).changeNcvValue(e.id,a)})),g["\u0275\u0275elementStart"](7,"option",11),g["\u0275\u0275text"](8,"Long haul "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"option",12),g["\u0275\u0275text"](10,"Short haul with GPS"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"option",13),g["\u0275\u0275text"](12,"Short haul without GPS"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,r=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",r.is_ncv[o])}}function xt(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"table",7),g["\u0275\u0275elementStart"](1,"thead",8),g["\u0275\u0275elementStart"](2,"tr"),g["\u0275\u0275elementStart"](3,"th"),g["\u0275\u0275text"](4,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"th"),g["\u0275\u0275text"](6,"Vehicle RegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"th"),g["\u0275\u0275text"](8,"Category"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"tbody"),g["\u0275\u0275template"](10,St,13,3,"tr",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngForOf",n.vehicleViewDetails)}}var yt,Ct=((yt=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.activeModal=i,this.foid="",this.vehicleViewDetails=[],this.showtable=!1,this.is_ncv=[],this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"getFoList",value:function(e){this.foid=e.id,this.getVehiclesView()}},{key:"getVehiclesView",value:function(){var e=this,t="foid="+this.foid;console.log("params",t),this.common.loading++,this.api.getToTranstruckNew("Vehicles/getVehicleWrtFo.json",t).subscribe((function(t){e.common.loading--,console.log("res: "+t.data),e.vehicleViewDetails=t.data,e.vehicleViewDetails.forEach((function(t){e.is_ncv.push("0"==t.is_ncv?0:"1"==t.is_ncv?1:"2"==t.is_ncv?2:0),e.showtable=!0}))}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"changeNcvValue",value:function(e,t){var n=this,a={id:e,is_ncv:this.is_ncv[t]};this.common.loading++,this.api.postToTranstrucknew("Vehicles/updateVehicleCvStatus.json",a).subscribe((function(e){n.common.loading--,console.log("responsecode: ",e.responsecode),n.common.showToast("1"==e.responsecode?"Success!!":"Not Success!!"),n.getVehiclesView()}),(function(e){n.common.loading--,n.common.showError()}))}},{key:"closeModal",value:function(){this.activeModal.close()}}]),e}()).\u0275fac=function(e){return new(e||yt)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](p.b))},yt.\u0275cmp=g["\u0275\u0275defineComponent"]({type:yt,selectors:[["vehicles-view"]],decls:10,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["class","table table-bordered mt-3",4,"ngIf"],[1,"table","table-bordered","mt-3"],[1,"thead",2,"background-color","cadetblue","color","white"],[4,"ngFor","ngForOf"],[1,"form-control",2,"border","2px solid darkcyan","font-size","15px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"h5",1),g["\u0275\u0275text"](2," Update Vehicles Category"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),g["\u0275\u0275elementStart"](4,"span",3),g["\u0275\u0275text"](5,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275elementStart"](7,"div"),g["\u0275\u0275elementStart"](8,"auto-suggestion",5),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](9,xt,11,1,"table",6),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.showtable))},directives:[y.a,h.u,h.t,x.D,x.r,x.u,x.w,x.G],styles:[""]}),yt),Mt=r("KtXj");function kt(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"button",5),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().updateCompanyDetails(e)})),g["\u0275\u0275text"](8,"Update"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.pan)}}var Et,_t=((Et=function(){function e(t,n,a){o(this,e),this.api=t,this.common=n,this.modalService=a,this.companies=null,this.getCompanies(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getCompanies()}},{key:"getCompanies",value:function(){var e=this;++this.common.loading,this.api.get("company/getCompanies").subscribe((function(t){--e.common.loading,console.log("response",t),e.companies=t.data,console.log("this.companies:",e.companies)}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"updateCompanyDetails",value:function(e){var t=this;console.log("company",e),this.common.params={company:e},this.modalService.open(Mt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getCompanies()}))}}]),e}()).\u0275fac=function(e){return new(e||Et)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r))},Et.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Et,selectors:[["company-details"]],decls:20,vars:1,consts:[[1,"col-sm-4"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h2"),g["\u0275\u0275text"](4,"Company Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body"),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"table",2),g["\u0275\u0275elementStart"](8,"thead",3),g["\u0275\u0275elementStart"](9,"tr"),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"PAN "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"tbody"),g["\u0275\u0275template"](19,kt,9,3,"tr",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](19),g["\u0275\u0275property"]("ngForOf",t.companies))},directives:[u.s,u.v,u.r,h.t],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Et),wt=r("9oc7");function Pt(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"button",5),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().updateTranportAgent(e)})),g["\u0275\u0275text"](14,"Update"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.name),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.pan),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.gstin),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.city),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.state)}}var Ot,Dt=((Ot=function(){function e(t,n,a){o(this,e),this.api=t,this.common=n,this.modalService=a,this.transportAgents=null,this.getTransportAgent(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getTransportAgent()}},{key:"getTransportAgent",value:function(){var e=this;++this.common.loading,this.api.get("company/getTransportAgents").subscribe((function(t){--e.common.loading,console.log("response",t),e.transportAgents=t.data,console.log("this.transportAgents:",e.transportAgents)}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"updateTranportAgent",value:function(e){var t=this;console.log("transportAgent",e),this.common.params={transportAgent:e},this.modalService.open(wt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getTransportAgent()}))}}]),e}()).\u0275fac=function(e){return new(e||Ot)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r))},Ot.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ot,selectors:[["transport-agents"]],decls:26,vars:1,consts:[[1,"col-sm-4"],[1,"tableFixHead"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"h2"),g["\u0275\u0275text"](4,"Transport Agents"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body"),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"table",2),g["\u0275\u0275elementStart"](8,"thead",3),g["\u0275\u0275elementStart"](9,"tr"),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"PAN "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"GSTIN "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"th"),g["\u0275\u0275text"](19,"City"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"th"),g["\u0275\u0275text"](21,"State"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"th"),g["\u0275\u0275text"](23,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"tbody"),g["\u0275\u0275template"](25,Pt,15,6,"tr",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](25),g["\u0275\u0275property"]("ngForOf",t.transportAgents))},directives:[u.s,u.v,u.r,h.t],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ot),It=r("cSOp");function Tt(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",13),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var At,Ft=((At=function(){function e(t,n,a,r,i,l){o(this,e),this.api=t,this.common=n,this.theme=a,this.user=r,this.datepipe=i,this.modalService=l,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.vId="",this.gpsTrail=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"searchVehicle",value:function(e){this.vId=e.id}},{key:"result",value:function(e){var t=this,n=this.common.dateFormatter(this.startDate),a=this.common.dateFormatter(this.endDate),o="",r={vehicleId:this.vId,startTime:n,toTime:a};switch(e){case 1:o="VehicleTrail/getVehicleTrailAll";break;case 2:o="VehicleTrail/showVehicleTrail";break;case 3:o="AutoHalts/getSingleVehicleHalts"}console.log("params: ",r),this.common.loading++,this.api.post(o,r).subscribe((function(e){t.common.loading--,t.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},t.headings=[],console.log("res: ",e.data),t.gpsTrail=e.data,console.log("Length",e.data.length);var n=t.gpsTrail[0];for(var a in n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:t.formatTitle(a),placeholder:t.formatTitle(a)};t.table.data.headings[a]=o}t.table.data.columns=t.getTableColumns()}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.gpsTrail),this.gpsTrail.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}}]),e}()).\u0275fac=function(e){return new(e||At)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](u.Kb),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](p.r))},At.\u0275cmp=g["\u0275\u0275defineComponent"]({type:At,selectors:[["vehicle-gps-trail"]],decls:24,vars:5,consts:[[2,"margin","0px","padding-top","0px","border","0px"],[2,"padding-bottom","0px","min-height","450px"],[1,"gps-tril-form"],[1,"row"],[1,"col-md-2","pr-0"],["url","suggestion/getVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"col-md-4","pr-0"],[3,"dateTimeValue","onChanged"],[3,"isStart","dateTimeValue","onChanged"],[1,"row","mt-3"],[1,"col-md-2","offset-md-08"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h5"),g["\u0275\u0275text"](3,"Vehicle Gps Trail"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"nb-card-body",1),g["\u0275\u0275elementStart"](5,"div",2),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"div",4),g["\u0275\u0275elementStart"](8,"auto-suggestion",5),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",6),g["\u0275\u0275elementStart"](10,"uj-date-time-picker",7),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",6),g["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),g["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",9),g["\u0275\u0275elementStart"](14,"div",10),g["\u0275\u0275elementStart"](15,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.result(1)})),g["\u0275\u0275text"](16,"VehicleGpsTrail"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"div",10),g["\u0275\u0275elementStart"](18,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.result(2)})),g["\u0275\u0275text"](19,"VehicleTrail"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div",10),g["\u0275\u0275elementStart"](21,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.result(3)})),g["\u0275\u0275text"](22,"VehicleHalts"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](23,Tt,1,2,"smart-table",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("dateTimeValue",t.startDate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("isStart",!1)("dateTimeValue",t.endDate),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("ngIf",t.gpsTrail&&t.gpsTrail.length))},directives:[u.s,u.v,u.r,y.a,rt.a,h.u,f.a],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;margin-top:10px;border:2px solid #008b8b;border-radius:4px}.h5[_ngcontent-%COMP%]{color:#008b8b}[_nghost-%COMP%]    .black{color:#000}.gps-tril-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize!important;width:100%;margin:0!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),At),Lt=r("hit9");function Vt(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",10),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n.id),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](n.description)}}function zt(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr",15),g["\u0275\u0275listener"]("mouseover",(function(){g["\u0275\u0275restoreView"](n);var e=t.index;return g["\u0275\u0275nextContext"](2).rotateBounce(e,1)}))("mouseout",(function(){g["\u0275\u0275restoreView"](n);var e=t.index;return g["\u0275\u0275nextContext"](2).rotateBounce(e,2)})),g["\u0275\u0275elementStart"](1,"td",13),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td",13),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.subsite_type)}}function Nt(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"table",11),g["\u0275\u0275elementStart"](1,"thead",12),g["\u0275\u0275elementStart"](2,"tr"),g["\u0275\u0275elementStart"](3,"th",13),g["\u0275\u0275text"](4,"S.No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"th",13),g["\u0275\u0275text"](6,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"th"),g["\u0275\u0275text"](8,"SubSite Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"tbody"),g["\u0275\u0275template"](10,zt,7,3,"tr",14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngForOf",n.subSites)}}var jt,Rt=function(){return["name","sd_loc_name"]},Ht=function(e,t){return{name:e,sd_loc_name:t}},Ut=((jt=function(){function n(e,t,a){o(this,n),this.common=e,this.api=t,this.mapService=a,this.siteId=null,this.siteName=null,this.siteLoc=null,this.subSites=null,this.subSiteName=null,this.btn="Create Fencing",this.typeIds=[],this.typeId=null,this.subSiteId=null,this.subSiteLatLng=null,this.sitepoly=null,this.subsitepolys=[],this.tempData=[],this.common.refresh=this.refresh.bind(this),this.getTypeIds()}return i(n,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTypeIds(),console.log("refresh")}},{key:"selectSite",value:function(e){this.siteId=e.id,this.getFencing()}},{key:"getTypeIds",value:function(){var e=this;this.api.get("Suggestion/getTypeMaster?typeId=5").subscribe((function(t){console.log("Res: ",t.data),e.typeIds=t.data,e.typeIds.push({id:0,description:"All"})}),(function(t){console.error(t),e.common.showError()}))}},{key:"createFinishFencing",value:function(){this.mapService.isDrawAllow=!this.mapService.isDrawAllow,this.mapService.isDrawAllow||this.submitPolygon()}},{key:"getSubSites",value:function(){var e=this,t="siteId="+this.siteId;this.common.loading++,this.api.get("SubSiteOperation/getSubSites?"+t).subscribe((function(t){e.common.loading--,console.log("res: ",t),e.subSites=t.data.markers,e.mapService.clearAll(),e.markerCreate();var n=t.data.fences;console.log("Res: ",t.data),e.createFences(n),e.getFencing(!1)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getFencing",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={strictSelected:!0,siteId:this.siteId};t&&this.mapService.clearAll(),this.common.loading++,this.api.post("SiteFencing/getSiteFences",n).subscribe((function(t){e.common.loading--;var n=t.data;console.log("Res: ",t.data),e.mapService.createMarkers([n[Object.keys(n)[0]].marker],!1,!0,["id","name"]);var a={paths:n[Object.keys(n)[0]].latLngs,strokeColor:"#D2691E",strokeOpacity:.8,strokeWeight:2,clickable:!1,fillColor:"#b5651d",fillOpacity:.35};e.sitepoly&&e.sitepoly.setMap(null),e.sitepoly=e.mapService.createPolygon(n[Object.keys(n)[0]].latLngs,a),e.mapService.setPolyBounds(e.mapService.polygon.getPath(),!0)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"ngAfterViewInit",value:function(){this.mapService.mapIntialize("map"),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}},{key:"markerCreate",value:function(){this.mapService.createMarkers(this.subSites);var e,n=t(this.mapService.markers);try{for(n.s();!(e=n.n()).done;)e.value}catch(a){n.e(a)}finally{n.f()}}},{key:"rotateBounce",value:function(e,t){console.log("index",e),this.mapService.toggleBounceMF(e,t)}},{key:"submitValidity",value:function(){return!(!this.subSiteName||!this.siteId)}},{key:"submitPolygon",value:function(){var e=this;if(this.submitValidity())if(this.mapService.polygonPath){var t="(",n=this.mapService.polygonPath.getPath().getArray();if(n.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var a=0;a<n.length;a++)t+=n[a].lat()+" "+n[a].lng()+",";t=(t+=n[0].lat()+" "+n[0].lng()+",").substr(0,t.length-1),this.api.post(this.subSiteId?"SubSiteOperation/updateSiteFence":"SubSiteOperation/insertSiteFence",{polygon:t+=")",siteId:this.siteId,subSiteName:this.subSiteName,typeId:this.typeId,subSiteId:this.subSiteId}).subscribe((function(t){if(!t.success)return e.common.showError(t.msg),void(e.mapService.isDrawAllow=!0);e.subSiteId=t.data,e.common.showToast("Created subsite"),e.gotoSingle()}),(function(t){console.error(t),e.common.showError(),e.mapService.isDrawAllow=!0}))}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}},{key:"clearAll",value:function(){this.mapService.isDrawAllow=!1,this.subSiteName=null,this.siteId=null,this.siteName=null,this.siteLoc=null,this.subSiteId=null,this.typeId=null,this.subsitepolys.length>0&&(this.subsitepolys.forEach((function(e){e.setMap(null)})),this.subsitepolys=[]),this.sitepoly&&this.sitepoly.setMap(null),this.mapService.clearAll()}},{key:"gotoSingle",value:function(){var e=this;this.common.loading++,this.api.post("SubSiteOperation/getSubSite",{subSiteId:this.subSiteId}).subscribe((function(t){if(t.success){var n=t.data;console.log("Res: ",n),e.clearAll(),e.tempData=n,e.subSiteLatLng={lat:parseFloat(n[0].lat),lng:parseFloat(n[0].long)},e.typeId=n[0].type_id,e.subSiteId=n[0].id,e.subSiteName=n[0].name,e.siteId=n[0].site_id,e.siteName=n[0].sname,e.siteLoc=n[0].slname,e.getFencing(),e.api.post("SubSiteOperation/getSubSiteFences",{subSiteId:e.subSiteId}).subscribe((function(t){e.common.loading++;var n=t.data;Object.keys(n),console.log("Res: ",t.data),e.createFences(n),e.common.loading--}),(function(t){console.error(t),e.common.showError(),e.common.loading--}))}else e.common.showError(t.msg)}),(function(t){console.error(t),e.common.showError()})),this.common.loading--}},{key:"createFences",value:function(t){this.subsitepolys.length>0&&(this.subsitepolys.forEach((function(e){e.setMap(null)})),this.subsitepolys=[]);var n=Object.keys(t).length;if(t[this.subSiteId]&&(this.tempData[0].color="f00"),this.mapService.createMarkers(this.tempData),1==n)this.subsitepolys.push(this.mapService.createPolygon(t[Object.keys(t)[0]].latLngs)),console.log("Single",t[Object.keys(t)[0]]);else if(n>1){var a,o=[],r=!1,i=1e5,l=-1;for(var c in t)if(r=!1,t.hasOwnProperty(c)){var s=t[c];c==this.subSiteId?r=!0:i>s.dis&&(r=!1,i=s.dis,l=o.length),o.push({data:s.latLngs,isMain:r,isSec:!1,show:"\n          Id: ".concat(c,"<br>\n          Name:").concat(s.name,"<br>\n          Location:").concat(s.loc_name,"<br>\n          ")})}-1!=l&&(o[l].isSec=!0),(a=this.subsitepolys).push.apply(a,e(this.mapService.createPolygons(o)))}else console.log("Else")}}]),n}()).\u0275fac=function(e){return new(e||jt)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](Te.a))},jt.\u0275cmp=g["\u0275\u0275defineComponent"]({type:jt,selectors:[["sub-sites"]],decls:28,vars:13,consts:[[1,"row"],[1,"col-6"],["url","Suggestion/getSites?typeId=1","seperator","-","placeholder","Search Site",3,"ngModel","display","preSelected","onSelected","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[1,"btn",3,"click"],["placeholder","Sub Site Id",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["class","tbl table table-bordered table-hover",4,"ngIf"],["id","map",1,"map","col-6"],[3,"value"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[3,"mouseover","mouseout",4,"ngFor","ngForOf"],[3,"mouseover","mouseout"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"table"),g["\u0275\u0275elementStart"](5,"tr"),g["\u0275\u0275elementStart"](6,"td"),g["\u0275\u0275elementStart"](7,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectSite(e)}))("ngModelChange",(function(e){return t.siteId=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"td"),g["\u0275\u0275elementStart"](9,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.typeId=e})),g["\u0275\u0275template"](10,Vt,2,2,"option",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275elementStart"](12,"input",5),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.subSiteName=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"tr"),g["\u0275\u0275elementStart"](14,"td"),g["\u0275\u0275elementStart"](15,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.createFinishFencing()})),g["\u0275\u0275text"](16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275elementStart"](18,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.getSubSites()})),g["\u0275\u0275text"](19,"Get SubSites"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275elementStart"](21,"input",7),g["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.subSiteId=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"tr"),g["\u0275\u0275elementStart"](23,"td"),g["\u0275\u0275elementStart"](24,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),g["\u0275\u0275text"](25,"Clear All"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](26,Nt,11,1,"table",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](27,"div",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",t.siteId)("display",g["\u0275\u0275pureFunction0"](9,Rt))("preSelected",g["\u0275\u0275pureFunction2"](10,Ht,t.siteName,t.siteLoc)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.typeId),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.typeIds),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.subSiteName),g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngModel",t.subSiteId),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",t.subSites))},directives:[u.s,u.r,y.a,x.r,x.u,x.D,h.t,x.d,h.u,x.w,x.G],styles:[".map[_ngcontent-%COMP%]{width:90%;height:90vh}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),jt),Bt=r("JYbL");function Gt(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",10),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var $t,Yt=(($t=function(){function e(t,n,a,r,i,l){var c;o(this,e),this.api=t,this.common=n,this.theme=a,this.user=r,this.datepipe=i,this.modalService=l,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},c=new Date,this.endDate=this.common.dateFormatter(c).split(" ")[0],this.startDate=this.common.dateFormatter(c).split(" ")[0],console.log("dates ",this.endDate,this.startDate),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getSummary()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trip status feedback"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0]):(t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getSummary",value:function(){var e=this;this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var t="startDate="+this.startDate+"&endDate="+this.endDate+" 23:59:59";console.log("params: ",t),this.common.loading++,this.api.get("FoDetails/getFoActivitySummary?"+t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.activitySummary=t.data,console.log("activitySummary",e.activitySummary);var n=e.activitySummary[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.activitySummary.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.activitySummary[t][this.headings[n]],class:"black",action:this.openUserData.bind(this,this.activitySummary[t])};e.push(this.valobj)}return e}},{key:"openUserData",value:function(e){this.common.params={foid:e._idfo},this.common.openType="modal",this.modalService.open(Bt.a,{size:"lg",container:"nb-layout",windowClass:"mycustomModalClass",backdrop:"static"})}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}]),e}()).\u0275fac=function(e){return new(e||$t)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](u.Kb),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](p.r))},$t.\u0275cmp=g["\u0275\u0275defineComponent"]({type:$t,selectors:[["activity-summary"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-4","text-right"],[1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Activity Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"div",1),g["\u0275\u0275elementStart"](8,"div",4),g["\u0275\u0275elementStart"](9,"input",5),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](10,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",4),g["\u0275\u0275elementStart"](12,"input",6),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](13,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",7),g["\u0275\u0275elementStart"](15,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.getSummary()})),g["\u0275\u0275text"](16," submit "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"nb-card-body"),g["\u0275\u0275elementStart"](18,"div"),g["\u0275\u0275template"](19,Gt,1,2,"smart-table",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](10,3,t.startDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](13,6,t.endDate,"dd MMM yyyy")),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.activitySummary&&t.activitySummary.length))},directives:[u.s,u.v,u.r,h.u,f.a],pipes:[h.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}nb-card-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:7px 15px;text-transform:capitalize;width:100%;border-radius:5px;border:0}[_nghost-%COMP%]   [_ngcontent-%COMP%]::nb-deep   .tableFixHead[_ngcontent-%COMP%]{height:auto!important;max-height:calc(100vh - 170px)}"]}),$t);function Wt(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"th"),g["\u0275\u0275text"](8),g["\u0275\u0275pipe"](9,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"td"),g["\u0275\u0275text"](11),g["\u0275\u0275pipe"](12,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.regno),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.apiprovider),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind2"](9,5,n.lastcalldt,"dd MMM HH:mm")),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind2"](12,8,n.dttime,"dd MMM HH:mm"))}}var Kt,Zt=((Kt=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.gpsDtails=[],this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleGpsDetail()}},{key:"getFoList",value:function(e){this.foid=e.id,console.log("foid: ",this.foid),this.getVehicleGpsDetail()}},{key:"getVehicleGpsDetail",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getVehicleGpsDetail?foid="+this.foid).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.gpsDtails=t.data}),(function(t){e.common.loading--,e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Kt)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},Kt.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Kt,selectors:[["vehicle-gps-detail"]],decls:22,vars:2,consts:[[1,"model-body"],[1,"row",2,"margin-left","10px"],["url","suggestion/getFoUsersList","display","name","placeholder","Search",3,"preSelected","onSelected"],[1,"table","table-bordered",2,"margin-left","5px","margin-top","10px","margin-right","5px"],[1,"thead"],["id","heading-row"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Vehicle Gps Detail "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoList(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"table",3),g["\u0275\u0275elementStart"](8,"thead",4),g["\u0275\u0275elementStart"](9,"tr",5),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"Vehicle RegNo."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"Api Provider"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"Last Call"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"th"),g["\u0275\u0275text"](19,"Date Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"tbody"),g["\u0275\u0275template"](21,Wt,13,11,"tr",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](15),g["\u0275\u0275property"]("ngForOf",t.gpsDtails))},directives:[u.s,u.v,u.r,y.a,h.t],pipes:[h.f],styles:[""]}),Kt),qt=r("9zuT"),Jt=r("pSdM");function Xt(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",14),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Qt(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",15),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var en,tn=function(){return["name","sd_loc_name"]},nn=((en=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.data=[],this.ruleType=[{id:11,name:"Loading"},{id:21,name:"UnLoading"},{id:31,name:"Loading & Unloading"}],this.bodyType=[{id:11,name:"3axle"},{id:21,name:"4axle"},{id:31,name:"6axle"}],this.materialType="",this.siteId=null,this.vehicle={id:null,regno:null},this.table=null,this.common.refresh=this.refresh.bind(this),this.getSiteData()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getSiteData(),this.vehicle.id=null,this.siteId=null}},{key:"addsite",value:function(){var e=this;this.common.params={},this.modalService.open(Jt.a,{container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getSiteData()}))}},{key:"getSiteData",value:function(){var e=this;this.common.loading++,this.api.get("TripSiteRule").subscribe((function(n){e.common.loading--,console.log("Res:",n.data),e.data=n.data?n.data:[];var a,o=0,r=t(e.data);try{for(r.s();!(a=r.n()).done;){var i=a.value,l=e.bodyType.find((function(t){return t.id==e.data[o].bodytype_id}));e.data[o].bodyName=l?l.name:"N.A";var c=e.ruleType.find((function(t){return t.id==e.data[o].ruletype_id}));e.data[o].ruleName=c?c.name:"N.A",e.data[o].preSiteType=i.pre_site_name?i.pre_site_name:"N.A",e.data[o].materialType=i.mt_name?i.mt_name:"N.A",o++}}catch(s){r.e(s)}finally{r.f()}e.table=e.setTable()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{foName:{title:"Fo Name",placeholder:"Fo Name"},preSiteName:{title:"Pre Site Name ",placeholder:"Pre Site Name"},currentSiteName:{title:"Current Site Name ",placeholder:"Current Site Name"},materialName:{title:"Material Name ",placeholder:"Material Name"},bodyType:{title:"Body Type ",placeholder:"Body Type"},ruleType:{title:"Rule Type",placeholder:"Rule Type"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={foName:{value:n.f_name},preSiteName:{value:n.preSiteType},currentSiteName:{value:n.curr_site_name},materialName:{value:n.materialType},bodyType:{value:n.bodyName},ruleType:{value:n.ruleName},action:{value:"",isHTML:!1,action:null,icons:[{class:"fas fa-edit  edit-btn",action:e.editRule.bind(e,n)},{class:" fa fa-trash remove",action:e.deleteRule.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"editRule",value:function(e){var t=this;console.log("row",e),this.common.params={title:"Edit Site Rule",row:e},this.modalService.open(Jt.a,{container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getSiteData()}))}},{key:"deleteRule",value:function(e){var t=this;if(window.confirm("Are You Want Delete Record")){var n={foid:e.foid,currSiteId:e.current_siteid,preSiteId:e.pre_siteid};this.common.loading++,this.api.post("TripSiteRule/delete",n).subscribe((function(e){t.common.loading--;var n=e.data;console.log("data:"),console.log(n),t.common.showToast(e.msg),t.getSiteData()}),(function(e){t.common.loading--,console.log(e)}))}}},{key:"getAllSiteData",value:function(){var e=this;this.common.loading++,this.api.get("TripSiteRule?vehicleId="+this.vehicle.id+"&siteId="+this.siteId).subscribe((function(n){e.common.loading--,console.log("Res:",n.data),e.data=n.data;var a,o=0,r=t(e.data);try{for(r.s();!(a=r.n()).done;){var i=a.value,l=e.bodyType.find((function(t){return t.id==e.data[o].bodytype_id}));e.data[o].bodyName=l?l.name:"N.A";var c=e.ruleType.find((function(t){return t.id==e.data[o].ruletype_id}));e.data[o].ruleName=c?c.name:"N.A",e.data[o].preSiteType=i.pre_site_name?i.pre_site_name:"N.A",e.data[o].materialType=i.mt_name?i.mt_name:"N.A",o++}}catch(s){r.e(s)}finally{r.f()}e.table=null,e.table=e.setTable()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"selectVehicle",value:function(e){this.vehicle.id=e.id}},{key:"selectSite",value:function(e){this.siteId=e.id}}]),e}()).\u0275fac=function(e){return new(e||en)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},en.\u0275cmp=g["\u0275\u0275defineComponent"]({type:en,selectors:[["trip-site-rule"]],decls:23,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[1,"row","mb-3"],[1,"col-3"],["url","suggestion/getVehicleList","display","regno","placeholder","Regno",3,"ngModel","preSelected","onSelected","ngModelChange"],[1,"suggestions","ng-star-inserted"],["url","Suggestion/getSites?typeId=1","seperator","-","placeholder","Search Site",3,"ngModel","display","preSelected","onSelected","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Trip Site Rule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.addsite()})),g["\u0275\u0275text"](8,"Add Rule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"nb-card-body",5),g["\u0275\u0275elementStart"](10,"div",6),g["\u0275\u0275elementStart"](11,"div",7),g["\u0275\u0275elementStart"](12,"auto-suggestion",8),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)}))("ngModelChange",(function(e){return t.vehicle.id=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](13,"div",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",7),g["\u0275\u0275elementStart"](15,"auto-suggestion",10),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectSite(e)}))("ngModelChange",(function(e){return t.siteId=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](16,"div",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"div",7),g["\u0275\u0275elementStart"](18,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.getAllSiteData()})),g["\u0275\u0275text"](19,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div"),g["\u0275\u0275template"](21,Xt,1,2,"smart-table",12),g["\u0275\u0275template"](22,Qt,2,0,"div",13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngModel",t.vehicle.id)("preSelected",null),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.siteId)("display",g["\u0275\u0275pureFunction0"](7,tn))("preSelected",null),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.data.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[u.s,u.v,u.r,y.a,x.r,x.u,h.u,f.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),en),an=r("M5JG");function on(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",16),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var rn,ln=((rn=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.tripLogs=[],this.startDate=null,this.endDate=null,this.status="-1",this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var i=new Date;this.startDate=this.common.dateFormatter(i).split(" ")[0],this.endDate=this.common.dateFormatter(new Date(i.setDate(i.getDate()+1))).split(" ")[0],console.log("dates ",this.endDate,this.startDate),this.getTripLogs(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getTripLogs()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trip status feedback log"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){if(n.date)if("start"==e){t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0];var a=new Date(n.date);console.log("fromDate",t.startDate),t.endDate=t.common.dateFormatter(new Date(a.setDate(a.getDate()+1))).split(" ")[0]}else t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)}))}},{key:"getTripLogs",value:function(){var e=this;this.tripLogs=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++;var t="startDate="+this.startDate+"&endDate="+this.endDate+"&status="+this.status;console.log("params",t),this.api.get("TripsOperation/tripDetailsVerificationLogs?"+t).subscribe((function(t){e.common.loading--,e.tripLogs=t.data?t.data:[],console.log("Trips Logs",e.tripLogs);var n=e.tripLogs[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.tripLogs.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Vehicle"==this.headings[n]?{value:this.tripLogs[t][this.headings[n]],class:"black",action:this.openChangeStatusModal.bind(this,this.tripLogs[t])}:"New Destination"==this.headings[n]?{value:this.tripLogs[t][this.headings[n]],class:"blue",action:this.openPlacementModal.bind(this,this.tripLogs[t])}:"Action"==this.headings[n]?0==this.tripLogs[t][this.headings[n]]?{value:"Action Required",class:"red",action:this.changeTripFeedbackAction.bind(this,this.tripLogs[t])}:{value:"Done",class:"green"}:{value:this.tripLogs[t][this.headings[n]],class:"black",action:""};e.push(this.valobj)}return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"openChangeStatusModal",value:function(e){console.log("missing open data +++",e);var t=new Date,n=this.common.dateFormatter(new Date),a=new Date(t.setHours(t.getHours()-48)),o=this.common.dateFormatter(a),r={id:e.id,vehicle_id:e._vid,tTime:n,suggest:null,latch_time:o,status:2,remark:e.remark};this.common.ref_page="tsfl",this.common.params=r,console.log("missing open data --",this.common.params),this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(e){console.log("after data chnage ")}))}},{key:"getVerifiedButton",value:function(){return'\n    <button class="btn btn-primary m-0" (click)="checked();">Get Details</button>\n    '}},{key:"openPlacementModal",value:function(e){this.common.params={tripDetils:{vehicleId:e._vid,siteId:-1},ref_page:"trip status feedback logs"},this.modalService.open(an.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"changeTripFeedbackAction",value:function(e){var t=this,n={tripFeedbackId:e._id};this.common.loading++,this.api.post("TripsOperation/changeTripFeedbackAction",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),1==e.code&&t.getTripLogs()}),(function(e){t.common.loading--,t.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||rn)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},rn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:rn,selectors:[["trip-status-feedback-logs"]],decls:30,vars:7,consts:[[1,"row"],[1,"col-sm-8"],[1,"col-sm-4",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"form-control",3,"ngModel","name","ngModelChange"],["value","-1"],["value","1"],["value","2"],[1,"col-sm-2"],[1,"btn","btn-primary","m-0",3,"click"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"h4"),g["\u0275\u0275text"](5,"Trip FeedBack Logs"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"span",3),g["\u0275\u0275listener"]("click",(function(){return t.common.getPDFFromTableId("tbldocs")})),g["\u0275\u0275element"](8,"i",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"span",5),g["\u0275\u0275listener"]("click",(function(){return t.common.getCSVFromTableId("tbldocs")})),g["\u0275\u0275element"](10,"i",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"nb-card-body"),g["\u0275\u0275elementStart"](12,"div",0),g["\u0275\u0275elementStart"](13,"div",7),g["\u0275\u0275elementStart"](14,"input",8),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](15,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",7),g["\u0275\u0275elementStart"](17,"select",9),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),g["\u0275\u0275elementStart"](18,"option",10),g["\u0275\u0275text"](19,"All"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"option",11),g["\u0275\u0275text"](21,"Verify"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"option",12),g["\u0275\u0275text"](23,"Change"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",13),g["\u0275\u0275elementStart"](25,"button",14),g["\u0275\u0275listener"]("click",(function(){return t.getTripLogs()})),g["\u0275\u0275text"](26,"Get Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div"),g["\u0275\u0275template"](28,on,1,2,"smart-table",15),g["\u0275\u0275element"](29,"br"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](14),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](15,4,t.startDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",t.status)("name",t.status),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("ngIf",t.tripLogs&&t.tripLogs.length))},directives:[u.s,u.v,u.r,x.D,x.r,x.u,x.w,x.G,h.u,f.a],pipes:[h.f],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}[_nghost-%COMP%]    .green{background-color:#0eec0e}[_nghost-%COMP%]    .red{background-color:#9f0001}[_nghost-%COMP%]    .blue{color:#1801e9}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),rn),cn=r("ahTD"),sn=r("vjOA"),dn=r("X67o");function mn(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",6),g["\u0275\u0275elementStart"](1,"auto-suggestion",17),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().getFolist(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("preSelected",null))}function gn(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",6),g["\u0275\u0275elementStart"](1,"auto-suggestion",18),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().getGroup(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("preSelected",null))}function pn(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",19),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.vscEntry)("settings",n.table.settings)}}var un,hn,fn=((un=function(){function e(t,n,a,r,i,l){o(this,e),this.modalService=t,this.api=n,this.common=a,this.datePipe=r,this.user=i,this.activeModal=l,this.ticketSubscribe={refType:"1",refId:"",isActive:!1,isOld:!1},this.table=null,this.vscEntry=[],this.getVscEntry(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getVscEntry()}},{key:"subscribe",value:function(){var e=this;if(this.ticketSubscribe.refId){var t={ref_type:parseInt(this.ticketSubscribe.refType),ref_id:this.ticketSubscribe.refId,is_active:this.ticketSubscribe.isActive?1:0,is_old:this.ticketSubscribe.isOld?1:0};console.log("params to insert",t),this.common.loading++,this.api.post("FoTicketSubscribe/insertVscEntry",t).subscribe((function(t){e.common.loading--,console.log(t.data),t.success&&(e.common.showToast(t.msg),e.getVscEntry())}),(function(t){e.common.loading--,e.common.showError()}))}else this.common.showToast("Fo/Group Is Missing")}},{key:"getFolist",value:function(e){this.ticketSubscribe.refId=e.id}},{key:"getGroup",value:function(e){this.ticketSubscribe.refId=e.id}},{key:"getVscEntry",value:function(){var e=this;this.common.loading++,this.api.get("FoTicketSubscribe/getVscEntry").subscribe((function(t){e.common.loading--,console.log("res",t.data),e.vscEntry=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{vscEntry:{headings:{Type:{title:"Type",placeholder:"Type"},isActive:{title:"isActive",placeholder:"isActive"},isOld:{title:"isOld",placeholder:"isOld"},Name:{title:"Name",placeholder:"Name"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.vscEntry.map((function(n){var a={Type:{value:n.type},isActive:{value:n.is_active},isOld:{value:n.is_old},Name:{value:n.name},action:{value:"",isHTML:!1,action:null,icons:[{class:"fas fa-edit  edit-btn",action:e.editTicketSubscribe.bind(e,n)}]}};t.push(a)})),t}},{key:"closeModal",value:function(){this.activeModal.close()}},{key:"editTicketSubscribe",value:function(e){var t=this;this.common.params=e,console.log("Param",this.common.params),this.modalService.open(dn.a,{size:"sm",container:"nb-layout"}).result.then((function(e){e.update&&t.getVscEntry()}))}}]),e}()).\u0275fac=function(e){return new(e||un)(g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.b))},un.\u0275cmp=g["\u0275\u0275defineComponent"]({type:un,selectors:[["ticket-subscribe"]],decls:26,vars:6,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px","height","20px",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["class","col-sm-3",4,"ngIf"],[1,"col-sm-3",2,"height","20px"],["type","checkbox","name","isnotify","value","check",3,"ngModel","ngModelChange"],["type","checkbox","name","isold","value","check",2,"margin-left","20px",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"row",2,"margin-top","20px"],["id","tblvscEntry",3,"data","settings",4,"ngIf"],["url","suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","suggestion/getGroups","display","description","placeholder","Search Group",3,"preSelected","onSelected"],["id","tblvscEntry",3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"h5",1),g["\u0275\u0275text"](2,"Fo Ticket Subscribe"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),g["\u0275\u0275elementStart"](4,"span",3),g["\u0275\u0275text"](5,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275elementStart"](7,"div",5),g["\u0275\u0275elementStart"](8,"div",6),g["\u0275\u0275elementStart"](9,"select",7),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.refType=e})),g["\u0275\u0275elementStart"](10,"option",8),g["\u0275\u0275text"](11,"Fo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"option",9),g["\u0275\u0275text"](13,"Group"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](14,mn,2,1,"div",10),g["\u0275\u0275template"](15,gn,2,1,"div",10),g["\u0275\u0275elementStart"](16,"div",11),g["\u0275\u0275elementStart"](17,"input",12),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.isActive=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](18," isActive "),g["\u0275\u0275elementStart"](19,"input",13),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ticketSubscribe.isOld=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](20,"isOld "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",6),g["\u0275\u0275elementStart"](22,"button",14),g["\u0275\u0275listener"]("click",(function(){return t.subscribe()})),g["\u0275\u0275text"](23,"Save"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",15),g["\u0275\u0275template"](25,pn,1,2,"smart-table",16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("ngModel",t.ticketSubscribe.refType),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf","1"==t.ticketSubscribe.refType),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf","2"==t.ticketSubscribe.refType),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.ticketSubscribe.isActive),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.ticketSubscribe.isOld),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.table))},directives:[x.D,x.r,x.u,x.w,x.G,h.u,x.a,y.a,f.a],styles:["[_nghost-%COMP%]     .tag .no-search span{color:#000}"]}),un),bn=r("rMv4"),vn=r("2v/f"),Sn=r("HXSw"),xn=r("1Qjg"),yn=r("bEhG"),Cn=r("K8iq"),Mn=r("ciOb"),kn=r("GVT9"),En=r("cQKx"),_n=r("xxZ6"),wn=r("8BUE"),Pn=r("lc8v"),On=((hn=function(){function e(t,n,a){o(this,e),this.modalService=t,this.common=n,this.api=a,this.foid=null,this.location={grade:"",location:"",lat:"",lng:""},this.data=[],this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"refresh",value:function(){console.log("Refresh")}},{key:"ngOnInit",value:function(){}},{key:"addVehicle",value:function(){this.modalService.open(Cn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"addFoAdminUser",value:function(){this.modalService.open(vn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"submitted1",value:function(){this.modalService.open(xn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"locationSelection",value:function(){var e=this;this.common.params={placeholder:"selectLocation",title:"SelectLocation"},this.modalService.open(Sn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("response",t),t.location&&(e.location={grade:"",location:t.location.name,lat:t.location.lat,lng:t.location.lng})}))}},{key:"submitted2",value:function(){this.modalService.open(yn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"typeMaster",value:function(){this.modalService.open(kn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getUserBank",value:function(){this.modalService.open(En.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"vehiclesview",value:function(){this.modalService.open(Ct,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"VSCSubscribe",value:function(){this.modalService.open(fn,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"GpsDetail",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getGpsInfoWrtFo").subscribe((function(t){e.common.loading--,console.log(t),e.data=t.data,console.log("pa",e.data),e.data&&(e.common.params=e.data,e.modalService.open(Mn.a,{size:"lg",container:"nb-layout",backdrop:"static"}))}),(function(t){e.common.loading--,console.error(t),e.common.showError()}))}},{key:"bulkCompanyAssociation",value:function(){this.modalService.open(_n.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"addMultiVehicleHalt",value:function(){this.modalService.open(wn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"addSingleVehicleHalt",value:function(){this.modalService.open(Pn.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||hn)(g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a))},hn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:hn,selectors:[["add-customer"]],decls:45,vars:0,consts:[[1,"container"],[1,"row",2,"margin-bottom","10px"],[1,"col-4"],["id","button",1,"btn","btn-primary","w-100",3,"click"],[1,"row",2,"margin-top","10px"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," ADD CUSTOMER "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.submitted1()})),g["\u0275\u0275text"](8,"Add Fo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",2),g["\u0275\u0275elementStart"](10,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.addFoAdminUser()})),g["\u0275\u0275text"](11,"Fo AdminUser"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",2),g["\u0275\u0275elementStart"](13,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.addVehicle()})),g["\u0275\u0275text"](14,"Add Vehicles"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",4),g["\u0275\u0275elementStart"](16,"div",2),g["\u0275\u0275elementStart"](17,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.submitted2()})),g["\u0275\u0275text"](18,"GPS History"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",2),g["\u0275\u0275elementStart"](20,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.vehiclesview()})),g["\u0275\u0275text"](21,"Vehicles Category"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"div",2),g["\u0275\u0275elementStart"](23,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.VSCSubscribe()})),g["\u0275\u0275text"](24,"VSC_Subscribe "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",4),g["\u0275\u0275elementStart"](26,"div",2),g["\u0275\u0275elementStart"](27,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.GpsDetail()})),g["\u0275\u0275text"](28,"GPS Enable/Disable"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"div",2),g["\u0275\u0275elementStart"](30,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.typeMaster()})),g["\u0275\u0275text"](31,"Type Master"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",2),g["\u0275\u0275elementStart"](33,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.getUserBank()})),g["\u0275\u0275text"](34,"User Bank Info"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"div",4),g["\u0275\u0275elementStart"](36,"div",2),g["\u0275\u0275elementStart"](37,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.bulkCompanyAssociation()})),g["\u0275\u0275text"](38,"Bulk company Association"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"div",2),g["\u0275\u0275elementStart"](40,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.addMultiVehicleHalt()})),g["\u0275\u0275text"](41,"Add Multivehicle Halt"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](42,"div",2),g["\u0275\u0275elementStart"](43,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.addSingleVehicleHalt()})),g["\u0275\u0275text"](44,"Add Single Vehicle Data"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]())},directives:[u.s,u.v,u.r],styles:["button[_ngcontent-%COMP%]{text-transform:capitalize}"]}),hn),Dn=r("kZSg");function In(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",8),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Tn(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",9),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var An,Fn,Ln=((Fn=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.table=null,this.fuelNorms=[],this.common.refresh=this.refresh.bind(this),this.getFuelNorms()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getFuelNorms()}},{key:"addFuelRule",value:function(){var e=this;this.common.params={},this.modalService.open(Dn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getFuelNorms()}))}},{key:"getFuelNorms",value:function(){var e=this;this.fuelNorms=[],this.common.loading++,this.api.get("Fuel/getFuelFullNorms").subscribe((function(t){e.common.loading--,console.log("res",t.data),e.fuelNorms=t.data||[],e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{FoName:{title:"Fo Name",placeholder:"Fo Name"},RuleType:{title:"Rule Type ",placeholder:"Rule Type"},Name:{title:"Name ",placeholder:"Name"},AngleFrom:{title:"Angle From ",placeholder:"Angle From"},AngleTo:{title:"Angle To ",placeholder:"Angle To"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.fuelNorms.map((function(n){var a={FoName:{value:n.fo_name},RuleType:{value:n.type},Name:{value:n.name},AngleFrom:{value:n.angle_from},AngleTo:{value:n.angle_to},action:{value:"",isHTML:!1,action:null,icons:[{class:"fas fa-edit  edit-btn",action:e.updateRule.bind(e,n)},{class:" fa fa-trash remove",action:e.deleteRule.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"updateRule",value:function(e){var t=this;console.log("rule",e),this.common.params={title:"Edit fuel Rule",rule:e},this.modalService.open(Dn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getFuelNorms()}))}},{key:"deleteRule",value:function(e){var t=this;if(window.confirm("Are You Want Delete Record")){var n={rowid:e.id};console.log("params",n),this.common.loading++,this.api.post("Fuel/deleteRule",n).subscribe((function(e){t.common.loading--;var n=e.data;console.log("data:"),console.log(n),t.common.showToast(e.msg),t.getFuelNorms()}),(function(e){t.common.loading--,console.log(e)}))}}}]),e}()).\u0275fac=function(e){return new(e||Fn)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Fn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Fn,selectors:[["fuel-rules"]],decls:13,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Fuel Rules"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.addFuelRule()})),g["\u0275\u0275text"](8,"Add Rule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"nb-card-body",5),g["\u0275\u0275elementStart"](10,"div"),g["\u0275\u0275template"](11,In,1,2,"smart-table",6),g["\u0275\u0275template"](12,Tn,2,0,"div",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("ngIf",t.fuelNorms&&t.fuelNorms.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.fuelNorms.length))},directives:[u.s,u.v,u.r,h.u,f.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),Fn),Vn=((An=function(){function e(t,n,a){o(this,e),this.mapService=t,this.apiService=n,this.commonService=a,this.isUpdate=!1,this.selectedArea={lat:null,long:null,id:null,loc_name:null},this.locName=null,this.locLatLng={lat:0,lng:0},this.commonService.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("siteLoc",(function(t,n,a,o){e.commonService.loading++,e.mapService.zoomAt({lat:n,lng:a},10),e.clearAll(),e.locLatLng={lat:n,lng:a};var r=o.split(",");console.log("PlaceT",r,"pLACE",o),e.locName=r[0]+"("+r[1].substr(0,3)+")",e.gotoSingle(!1),e.commonService.loading--})),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"})}},{key:"gotoSingle",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.commonService.loading++,this.apiService.post("SiteFencing/getPumpStationArea",{lat:this.locLatLng.lat,lng:this.locLatLng.lng}).subscribe((function(n){var a=n.data;if(!a)return e.isUpdate=!1,void e.commonService.loading--;e.isUpdate=!!a[e.locName];var o=Object.keys(a).length;if(console.log("Res: ",n.data),1==o){t&&e.clearAll();var r=[{data:a[Object.keys(a)[0]].latLngs,isMain:e.isUpdate,isSec:!e.isUpdate,show:Object.keys(a)[0]}];e.mapService.createPolygons(r),console.log("Single",a[Object.keys(a)[0]])}else if(o>1){var i=[],l=!1,c=1e5,s=-1;for(var d in a)if(l=!1,a.hasOwnProperty(d)){var m=a[d];d==e.locName?l=!0:c>m.dis&&(l=!1,c=m.dis,s=i.length),i.push({data:m.latLngs,isMain:l,isSec:!1,show:d}),console.log("Multi",d)}-1!=s&&(i[s].isSec=!0),t&&e.clearAll(),e.mapService.createPolygons(i)}e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}},{key:"selectArea",value:function(e){console.log("Srearch",e),this.commonService.loading++,this.clearAll(),this.isUpdate=!0,this.locName=e.loc_name,e.lat=parseFloat(e.lat),e.long=parseFloat(e.long),this.locLatLng={lat:e.lat,lng:e.long},this.mapService.zoomAt(this.locLatLng,10),this.gotoSingle(!1),this.selectedArea=e,console.log("slectedArea",this.selectArea),this.commonService.loading--}},{key:"clearAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.exitTicket(),this.mapService.isDrawAllow=!1,this.locName=null,this.locLatLng=null,this.isUpdate=!1,this.selectedArea=null,e?this.mapService.clearAll():this.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!0})}},{key:"submitPolygon",value:function(){var e=this;if(this.submitValidity())if(this.mapService.polygonPath){var t="(",n=this.mapService.polygonPath.getPath().getArray();if(n.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var a=0;a<n.length;a++)t+=n[a].lat()+" "+n[a].lng()+",";t=(t+=n[0].lat()+" "+n[0].lng()+",").substr(0,t.length-1),t+=")",this.isUpdate?this.apiService.post("SiteFencing/updatePumpStationArea",{polygon:t,locName:this.selectedArea.loc_name,lat:this.selectedArea.lat,long:this.selectedArea.long,angle_from:this.angleFrom,angle_to:this.angleTo}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Updated"),e.gotoSingle()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0})):this.apiService.post("SiteFencing/insertPumpStationAreaFence",{polygon:t,locName:this.locName,lat:this.locLatLng.lat,long:this.locLatLng.lng,angle_from:this.angleFrom,angle_to:this.angleTo}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Created"),e.gotoSingle()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0}))}else alert("No polyLine Was Drawn.."),this.mapService.isDrawAllow=!0;else alert("Please Enter Fields with Valid Name And Not Keep Them Null... "),this.mapService.isDrawAllow=!0}},{key:"DeleteArea",value:function(){var e=this;console.log("Selected  Area",this.selectedArea),this.selectedArea.loc_name?this.apiService.post("SiteFencing/deletePumpStationArea",{locName:this.selectedArea.loc_name}).subscribe((function(t){console.log("Res: ",t.data),e.commonService.showToast("Deleted"),e.clearAll()}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0})):this.commonService.showError("Load Area!!")}},{key:"submitValidity",value:function(){return!!this.locName}},{key:"loadMarkers",value:function(){var e=this,t=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:t.lat1,lng1:t.lng1,lat2:t.lat2,lng2:t.lng2,typeId:1}).subscribe((function(t){var n=t.data;console.log("Res: ",t.data),e.mapService.clearAll(!0,!0,{marker:!0,polygons:!1,polypath:!1}),e.mapService.createMarkers(n)}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"enterTicket",value:function(){this.locName?this.mapService.isDrawAllow?this.submitPolygon():this.mapService.isDrawAllow=!0:this.commonService.showToast("Select Location First..")}},{key:"exitTicket",value:function(){return console.log("params",{tblRefId:9,tblRowId:this.locName}),!1}}]),e}()).\u0275fac=function(e){return new(e||An)(g["\u0275\u0275directiveInject"](Te.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a))},An.\u0275cmp=g["\u0275\u0275defineComponent"]({type:An,selectors:[["pump-station-area"]],decls:44,vars:5,consts:[[1,"row"],[1,"col-6","table"],["type","text","name","anglefrom","placeholder","Angle from",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","angleTo","placeholder","Angle To",1,"form-control",3,"ngModel","ngModelChange"],["rowspan","2"],[1,"btn","btn-primary",2,"margin-top","30px",3,"click"],["name","selected-area","url","Suggestion/getPumpStationArea","display","loc_name","placeholder","Station Name...",3,"preSelected","onSelected"],["placeholder","Site LocName..","id","siteLoc",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["colspan","3"],[2,"text-align","center"],[1,"zoom-btn",3,"click"],["id","map",1,"map","col-6"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"table"),g["\u0275\u0275elementStart"](5,"tbody"),g["\u0275\u0275elementStart"](6,"tr"),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"input",2),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.angleFrom=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275elementStart"](10,"input",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.angleTo=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td",4),g["\u0275\u0275elementStart"](12,"button",5),g["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),g["\u0275\u0275text"](13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"tr"),g["\u0275\u0275elementStart"](15,"td"),g["\u0275\u0275elementStart"](16,"auto-suggestion",6),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectArea(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275elementStart"](18,"input",7),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.locName=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"tr"),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275elementStart"](21,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.clearAll(!0)})),g["\u0275\u0275text"](22,"Clear All"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"td"),g["\u0275\u0275elementStart"](24,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),g["\u0275\u0275text"](25,"Load Marker"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"td"),g["\u0275\u0275elementStart"](27,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.DeleteArea()})),g["\u0275\u0275text"](28,"Delete Loc"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"tr"),g["\u0275\u0275elementStart"](30,"td",9),g["\u0275\u0275elementStart"](31,"div",10),g["\u0275\u0275elementStart"](32,"span"),g["\u0275\u0275elementStart"](33,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),g["\u0275\u0275text"](34,"1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),g["\u0275\u0275text"](36,"2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](37,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),g["\u0275\u0275text"](38,"3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),g["\u0275\u0275text"](40,"4"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),g["\u0275\u0275text"](42,"5"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](43,"div",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngModel",t.angleFrom),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.angleTo),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Fencing":"Create Fencing"),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.locName))},directives:[u.s,u.r,x.d,x.r,x.u,y.a],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),An);function zn(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",14),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Nn,jn,Rn=((jn=function(){function e(t,n,a,r,i){o(this,e),this.router=t,this.modalservice=n,this.common=a,this.api=r,this.user=i,this.table=null,this.dates={startTime:this.common.dateFormatter(new Date),endTime:this.common.dateFormatter(new Date)},this.data=[],this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.gettollTransactionSummary()}},{key:"getDate",value:function(e){var t=this;this.modalservice.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.dates[e]=t.common.dateFormatter(n.time).split("")[0],console.log("Date:",t.dates[e])}))}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Vehicle Number",placeholder:"Vehicle Number"},transtime:{title:"transit Time ",placeholder:"Transit Time "},amount:{title:"amount",placeholder:"Amount"},plaza_name:{title:"plaza  ",placeholder:"Plaza "},txnid:{title:"transaction id",placeholder:"Transaction id"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={regno:{value:n.regno},transtime:{value:null==n.transtime?"-":e.common.changeDateformat(n.transtime)},amount:{value:null==n.amount?"-":n.amount},plaza_name:{value:null==n.plaza_name?"-":n.plaza_name},txnid:{value:null==n.txnid?"-":n.txnid},rowActions:{}};t.push(a)})),t}},{key:"gettollTransactionSummary",value:function(){var e=this,t={startTime:this.dates.startTime,endTime:this.dates.endTime};this.common.loading++,this.api.post("Toll/getTollTxn",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Toll Transaction Summary",null,"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCSV",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,n.data.name,"Toll Transaction Summary",null,"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||jn)(g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](R.a))},jn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:jn,selectors:[["toll-transaction-summary"]],decls:25,vars:7,consts:[[1,"row","m-0","p-0"],[1,"col-3"],["placeholder","Start Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["placeholder","End Time","autocomplete","off","name","date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date",""],["type","button",1,"btn","btn-primary","submit-btn",3,"click"],[1,"col-md-12","text-right","margin-top-15","margin-left-220"],[2,"margin-bottom","10px","display","block"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],["id","toll-summary",3,"data","settings",4,"ngIf"],["id","toll-summary",3,"data","settings"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h2"),g["\u0275\u0275text"](3,"Toll Transaction Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"input",2),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.dates.startTime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](7,"owl-date-time",null,3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",1),g["\u0275\u0275elementStart"](10,"input",4),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.dates.endTime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](11,"owl-date-time",null,5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",1),g["\u0275\u0275elementStart"](14,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),g["\u0275\u0275text"](15,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",0),g["\u0275\u0275elementStart"](17,"div",7),g["\u0275\u0275elementStart"](18,"span",8),g["\u0275\u0275elementStart"](19,"span",9),g["\u0275\u0275listener"]("click",(function(){return t.printPDF("toll-summary")})),g["\u0275\u0275element"](20,"i",10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"span",11),g["\u0275\u0275listener"]("click",(function(){return t.printCSV("toll-summary")})),g["\u0275\u0275element"](22,"i",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"nb-card-body"),g["\u0275\u0275template"](24,zn,1,2,"smart-table",13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275reference"](8),a=g["\u0275\u0275reference"](12);g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngModel",t.dates.startTime)("owlDateTime",n)("owlDateTimeTrigger",n),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.dates.endTime)("owlDateTime",a)("owlDateTimeTrigger",a),g["\u0275\u0275advance"](14),g["\u0275\u0275property"]("ngIf",t.data&&t.data.length)}},directives:[u.s,u.v,x.d,ne.b,x.r,x.u,ne.d,ne.a,u.r,h.u,f.a],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.submit-btn[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:8px 15px;text-transform:capitalize}"]}),jn),Hn=((Nn=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.transitTime={transactiontime:this.common.dateFormatter(new Date)},this.regno=null,this.plazaName=null,this.amount=null,this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.gettollTransactionSummary()}},{key:"selectVehicle",value:function(e){this.regno=e.id}},{key:"SelectPlaza",value:function(e){this.plazaName=e.plaza_name}},{key:"getDate",value:function(e){var t=this;this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.transitTime[e]=t.common.dateFormatter(n.time).split(" ")[0],console.log("Date:",t.transitTime[e])}))}},{key:"gettollTransactionSummary",value:function(){var e=this,t={vehicle_id:this.regno,transtime:this.transitTime.transactiontime,amount:this.amount,plaza_name:this.plazaName};this.common.loading++,this.api.post("Toll/manualTollPlazaEntry",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data)}),(function(t){e.common.loading--,console.log(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Nn)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Nn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Nn,selectors:[["manual-toll-transaction-summary"]],decls:33,vars:4,consts:[[1,"row",2,"margin","10px"],[1,"col-3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["url","Toll/getTollPlazaName","display","plaza_name","placeholder","Enter Toll",2,"width","60%",3,"onSelected"],["placeholder","Transaction Time","autocomplete","off","name","date1",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["date1",""],["type","number","placeholder","Amount","id","amount","name","amount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","text-center","margin-top-15"],["type","submit","id","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Manual Toll Transaction Summary "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"label"),g["\u0275\u0275text"](7,"Vehicle No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",1),g["\u0275\u0275elementStart"](9,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",0),g["\u0275\u0275elementStart"](11,"div",1),g["\u0275\u0275elementStart"](12,"label"),g["\u0275\u0275text"](13,"Enter Toll"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",1),g["\u0275\u0275elementStart"](15,"auto-suggestion",3),g["\u0275\u0275listener"]("onSelected",(function(e){return t.SelectPlaza(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",0),g["\u0275\u0275elementStart"](17,"div",1),g["\u0275\u0275elementStart"](18,"label"),g["\u0275\u0275text"](19,"Transit Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"div",1),g["\u0275\u0275elementStart"](21,"input",4),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.transitTime.transactiontime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](22,"owl-date-time",null,5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",0),g["\u0275\u0275elementStart"](25,"div",1),g["\u0275\u0275elementStart"](26,"label"),g["\u0275\u0275text"](27,"Amount"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](28,"div",1),g["\u0275\u0275elementStart"](29,"input",6),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.amount=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",7),g["\u0275\u0275elementStart"](31,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),g["\u0275\u0275text"](32,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275reference"](23);g["\u0275\u0275advance"](21),g["\u0275\u0275property"]("ngModel",t.transitTime.transactiontime)("owlDateTime",n)("owlDateTimeTrigger",n),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngModel",t.amount)}},directives:[u.s,u.v,u.r,y.a,x.d,ne.b,x.r,x.u,ne.d,ne.a,x.x,x.C],styles:[""]}),Nn);function Un(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",12),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Bn,Gn=((Bn=function(){function e(t,n,a,r,i){o(this,e),this.router=t,this.modalservice=n,this.common=a,this.api=r,this.user=i,this.dates={start:this.common.dateFormatter(new Date),end:this.common.dateFormatter(new Date)},this.vehicle_id=null,this.data=[],this.table=null,this.gettollTransactionSummary(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.gettollTransactionSummary()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"card usage"},this.modalservice.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.dates[e]=t.common.dateFormatter(n.date).split(" ")[0],console.log("Date:",t.dates)}))}},{key:"selectVehicle",value:function(e){this.vehicle_id=e.id}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"vehicle Wise Toll Transaction Summary",null,"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCSV",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,n.data.name,"vehicle Wise Toll Transaction Summary",null,"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"gettollTransactionSummary",value:function(){var e=this,t={vehicle_id:this.vehicle_id,startDate:this.dates.start,endDate:this.dates.end};this.common.loading++,this.api.post("Toll/getVehicleWiseTollTxn",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"setTable",value:function(){return{data:{headings:{transtime:{title:"Transaction Time",placeholder:"Transaction Time"},plaza_name:{title:"TOll Plaza",placeholder:"\tToll Plaza"},amount:{title:"amount",placeholder:"Amount"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={transtime:{value:null==n.transtime?"-":e.common.changeDateformat(n.transtime)},plaza_name:{value:n.plaza_name},amount:{value:null==n.amount?"-":n.amount}};t.push(a)})),t}}]),e}()).\u0275fac=function(e){return new(e||Bn)(g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](R.a))},Bn.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Bn,selectors:[["vehiclewise-tolltransaction"]],decls:25,vars:9,consts:[[1,"row","m-0","p-0"],[1,"col-3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","button",1,"btn","btn-primary","submit-btn",3,"click"],[1,"col-md-12","text-right","margin-top-15","margin-left-220"],[2,"margin-bottom","10px","display","block"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","5px",3,"click"],[1,"fas","fa-file-excel"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h2"),g["\u0275\u0275text"](3,"Toll Transaction Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",1),g["\u0275\u0275elementStart"](8,"input",3),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](9,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",1),g["\u0275\u0275elementStart"](11,"input",3),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](12,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",1),g["\u0275\u0275elementStart"](14,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.gettollTransactionSummary()})),g["\u0275\u0275text"](15,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",0),g["\u0275\u0275elementStart"](17,"div",5),g["\u0275\u0275elementStart"](18,"span",6),g["\u0275\u0275elementStart"](19,"span",7),g["\u0275\u0275listener"]("click",(function(){return t.printPDF("toll-summary")})),g["\u0275\u0275element"](20,"i",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"span",9),g["\u0275\u0275listener"]("click",(function(){return t.printCSV("toll-summary")})),g["\u0275\u0275element"](22,"i",10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"nb-card-body"),g["\u0275\u0275template"](24,Un,1,2,"smart-table",11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](9,3,t.dates.start,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](12,6,t.dates.end,"dd MMM yyyy")),g["\u0275\u0275advance"](13),g["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[u.s,u.v,y.a,u.r,h.u,f.a],pipes:[h.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.submit-btn[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:8px 15px;text-transform:capitalize}"]}),Bn);function $n(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"th",14),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",a.formatTitle(n)," ")}}function Yn(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td"),g["\u0275\u0275elementStart"](1,"span"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a[n])}}function Wn(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr",12),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,Yn,3,1,"td",11),g["\u0275\u0275elementStart"](4,"td",7),g["\u0275\u0275elementStart"](5,"button",16),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"](2).showDetails(e,"-1")})),g["\u0275\u0275element"](6,"i",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.index,o=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a+1),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",o.columns)}}function Kn(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275template"](1,Wn,7,2,"tr",15),g["\u0275\u0275elementContainerEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",n.data)}}function Zn(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"th"),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](a.formatTitle(n))}}function qn(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td"),g["\u0275\u0275elementStart"](1,"span",18),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a[n])}}function Jn(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,qn,3,1,"td",11),g["\u0275\u0275elementEnd"]()),2&e){var n=t.index,a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n+1),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",a.columns2)}}function Xn(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275template"](1,Jn,4,2,"tr",11),g["\u0275\u0275elementContainerEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",n.workList)}}function Qn(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.id)}}function ea(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span",48),g["\u0275\u0275elementStart"](1,"a",49),g["\u0275\u0275text"](2,"RC Image"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](3);g["\u0275\u0275advance"](1),g["\u0275\u0275propertyInterpolate"]("href",n.modal.first.data.document.rcImage,g["\u0275\u0275sanitizeUrl"])}}function ta(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,ea,3,1,"span",47),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.id),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.modal.first.data.document.rcImage)}}function na(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.regno)}}function aa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.newRegno)}}function oa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.document_type)}}var ra=function(e){return{name:e}};function ia(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"auto-suggestion",51),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectBrandType(e,"first")}))("keyup",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).isValidDocument(e,"first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("data",a.modal.first.data.docTypes)("preSelected",g["\u0275\u0275pureFunction1"](2,ra,a.modal.first.data.document.document_type))}}function la(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.first.data.document.document_type)}}function ca(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",55),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function sa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"input",52),g["\u0275\u0275listener"]("change",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectModelType(e,"first")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"datalist",53),g["\u0275\u0275template"](3,ca,2,1,"option",54),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngForOf",a.modelType)}}function da(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",55),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ma(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",57),g["\u0275\u0275listener"]("change",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).onbodyType(e,"first")}))("focusout",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"](2);return e.openNextModal("second",e.modal.first.data.document.id)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"datalist",58),g["\u0275\u0275template"](5,da,2,1,"option",54),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngForOf",a.bodyType)}}function ga(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",59),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.document.engineNo=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.first.data.document.engineNo)}}function pa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",60),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.document.chasisNo=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.first.data.document.chasisNo)}}function ua(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",64),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n," ")}}function ha(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",61),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.document._bscode=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"datalist",62),g["\u0275\u0275template"](5,ua,2,2,"option",63),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.first.data.document._bscode),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",a.emissionStandard)}}function fa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275pipe"](3,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind2"](3,1,n.getDateInDisplayFormat(n.modal.first.data.document.wef_date),"dd-MM-yyyy"),"")}}function ba(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"input",65,66),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.first.data.document.wef_date=e}))("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).checkDateFormat("first","wef_date")})),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("ngModel",a.modal.first.data.document.wef_date)("value",a.modal.first.data.document.wef_date)}}function va(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"span",67),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).getDate("wef_date","first")})),g["\u0275\u0275element"](1,"i",68),g["\u0275\u0275elementEnd"]()}}function Sa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",69),g["\u0275\u0275elementStart"](1,"button",70),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).updateVehicle("first")})),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.first.data.btn1)}}function xa(e,t){if(1&e&&g["\u0275\u0275element"](0,"jrx-image-viewer",71),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("images",n.modal.first.data.images)("idContainer","first-"+n.modal.first.data.imageViewerId)("loadOnInit",!0)}}function ya(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"No Image Exists"),g["\u0275\u0275elementEnd"]())}function Ca(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",19),g["\u0275\u0275elementStart"](1,"div",20),g["\u0275\u0275elementStart"](2,"div",21),g["\u0275\u0275elementStart"](3,"h5",22),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"button",23),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().closeModal(!1,"first")})),g["\u0275\u0275elementStart"](6,"span",24),g["\u0275\u0275text"](7,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",25),g["\u0275\u0275elementStart"](9,"form",26,27),g["\u0275\u0275elementStart"](11,"div",2),g["\u0275\u0275elementStart"](12,"div",28),g["\u0275\u0275elementStart"](13,"div",29),g["\u0275\u0275elementStart"](14,"label",30),g["\u0275\u0275text"](15,"Vehicle ID"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](16,Qn,3,1,"div",31),g["\u0275\u0275template"](17,ta,4,2,"div",31),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",29),g["\u0275\u0275elementStart"](19,"label",32),g["\u0275\u0275text"](20,"Vehicle No."),g["\u0275\u0275elementStart"](21,"span",33),g["\u0275\u0275text"](22,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](23,na,3,1,"div",34),g["\u0275\u0275template"](24,aa,3,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",29),g["\u0275\u0275elementStart"](26,"label",36),g["\u0275\u0275text"](27,"Brand Type"),g["\u0275\u0275elementStart"](28,"span",33),g["\u0275\u0275text"](29,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](30,oa,3,1,"div",31),g["\u0275\u0275template"](31,ia,2,4,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",29),g["\u0275\u0275elementStart"](33,"label",36),g["\u0275\u0275text"](34,"Model Type"),g["\u0275\u0275elementStart"](35,"span",33),g["\u0275\u0275text"](36,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](37,la,3,1,"div",31),g["\u0275\u0275template"](38,sa,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"div",29),g["\u0275\u0275elementStart"](40,"label",36),g["\u0275\u0275text"](41,"Body Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](42,ma,6,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",29),g["\u0275\u0275elementStart"](44,"label",36),g["\u0275\u0275text"](45,"Engine No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](46,ga,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](47,"div",29),g["\u0275\u0275elementStart"](48,"label",36),g["\u0275\u0275text"](49,"chasis No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](50,pa,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](51,"div",29),g["\u0275\u0275elementStart"](52,"label",36),g["\u0275\u0275text"](53,"Emission Standard"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](54,ha,6,2,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](55,"div",29),g["\u0275\u0275elementStart"](56,"label",37),g["\u0275\u0275text"](57,"manufaturing Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](58,fa,4,4,"div",34),g["\u0275\u0275elementStart"](59,"div",38),g["\u0275\u0275template"](60,ba,2,2,"input",39),g["\u0275\u0275template"](61,va,2,0,"span",40),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](62,"div",41),g["\u0275\u0275template"](63,Sa,3,1,"div",42),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](64,"div",43),g["\u0275\u0275template"](65,xa,1,3,"jrx-image-viewer",44),g["\u0275\u0275template"](66,ya,2,0,"div",8),g["\u0275\u0275element"](67,"div",45),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngClass",a.modal.first.class),g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate"](a.modal.first.data.title),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.canUpdate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",1===a.modal.first.data.canUpdate&&"admin"==a.user._loggedInBy),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.first.data.document.img_url&&!a.modal.first.data.doc_not_img),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!a.modal.first.data.document.img_url)}}function Ma(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.id)}}function ka(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span",48),g["\u0275\u0275elementStart"](1,"a",49),g["\u0275\u0275text"](2,"RC Image"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](3);g["\u0275\u0275advance"](1),g["\u0275\u0275propertyInterpolate"]("href",n.modal.second.data.document.rcImage,g["\u0275\u0275sanitizeUrl"])}}function Ea(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](3,ka,3,1,"span",47),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.id),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.modal.second.data.document.rcImage)}}function _a(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.regno)}}function wa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.newRegno)}}function Pa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.document_type)}}function Oa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"auto-suggestion",51),g["\u0275\u0275listener"]("onSelected",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectBrandType(e,"second")}))("keyup",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).isValidDocument(e,"second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("data",a.modal.second.data.docTypes)("preSelected",g["\u0275\u0275pureFunction1"](2,ra,a.modal.second.data.document.document_type))}}function Da(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",43),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal.second.data.document.document_type)}}function Ia(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",55),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Ta(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"input",82),g["\u0275\u0275listener"]("change",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).selectModelType(e,"second")})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"datalist",83),g["\u0275\u0275template"](3,Ia,2,1,"option",54),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngForOf",a.modelType)}}function Aa(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",55),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Fa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",84),g["\u0275\u0275listener"]("change",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).onbodyType(e,"second")}))("focusout",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"](2);return e.openNextModal("second",e.modal.second.data.document.id)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"datalist",85),g["\u0275\u0275template"](5,Aa,2,1,"option",54),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngForOf",a.bodyType)}}function La(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",64),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n," ")}}function Va(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",86),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.document._bscode=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"datalist",87),g["\u0275\u0275template"](5,La,2,2,"option",63),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.second.data.document._bscode),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",a.emissionStandard)}}function za(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",59),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.document.engineNo=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.second.data.document.engineNo)}}function Na(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",56),g["\u0275\u0275elementStart"](3,"input",60),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.document.chasisNo=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngModel",a.modal.second.data.document.chasisNo)}}function ja(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",88),g["\u0275\u0275elementStart"](1,"label",46),g["\u0275\u0275text"](2),g["\u0275\u0275pipe"](3,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind2"](3,1,n.getDateInDisplayFormat(n.modal.second.data.document.wef_date),"dd-MM-yyyy"),"")}}function Ra(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"input",89,90),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).modal.second.data.document.wef_date=e}))("focusout",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).checkDateFormat("second","wef_date")})),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("ngModel",a.modal.second.data.document.wef_date)("value",a.modal.second.data.document.wef_date)}}function Ha(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"span",67),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).getDate("wef_date","second")})),g["\u0275\u0275element"](1,"i",68),g["\u0275\u0275elementEnd"]()}}function Ua(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",69),g["\u0275\u0275elementStart"](1,"button",91),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).updateVehicle("second")})),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.modal.second.data.btn1)}}function Ba(e,t){if(1&e&&g["\u0275\u0275element"](0,"jrx-image-viewer",71),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("images",n.modal.second.data.images)("idContainer","second-"+n.modal.second.imageViewerId)("loadOnInit",!0)}}function Ga(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"No Image Exists"),g["\u0275\u0275elementEnd"]())}function $a(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",19),g["\u0275\u0275elementStart"](1,"div",20),g["\u0275\u0275elementStart"](2,"div",21),g["\u0275\u0275elementStart"](3,"h5",72),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"button",23),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().closeModal(!1,"second")})),g["\u0275\u0275elementStart"](6,"span",24),g["\u0275\u0275text"](7,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",25),g["\u0275\u0275elementStart"](9,"form",73,74),g["\u0275\u0275elementStart"](11,"div",2),g["\u0275\u0275elementStart"](12,"div",28),g["\u0275\u0275elementStart"](13,"div",29),g["\u0275\u0275elementStart"](14,"label",75),g["\u0275\u0275text"](15,"Vehicle ID"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](16,Ma,3,1,"div",31),g["\u0275\u0275template"](17,Ea,4,2,"div",31),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",29),g["\u0275\u0275elementStart"](19,"label",76),g["\u0275\u0275text"](20,"Vehicle No."),g["\u0275\u0275elementStart"](21,"span",33),g["\u0275\u0275text"](22,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](23,_a,3,1,"div",34),g["\u0275\u0275template"](24,wa,3,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",29),g["\u0275\u0275elementStart"](26,"label",77),g["\u0275\u0275text"](27,"Brand Type"),g["\u0275\u0275elementStart"](28,"span",33),g["\u0275\u0275text"](29,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](30,Pa,3,1,"div",31),g["\u0275\u0275template"](31,Oa,2,4,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",29),g["\u0275\u0275elementStart"](33,"label",77),g["\u0275\u0275text"](34,"Model Type"),g["\u0275\u0275elementStart"](35,"span",33),g["\u0275\u0275text"](36,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](37,Da,3,1,"div",31),g["\u0275\u0275template"](38,Ta,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"div",29),g["\u0275\u0275elementStart"](40,"label",77),g["\u0275\u0275text"](41,"Body Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](42,Fa,6,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](43,"div",29),g["\u0275\u0275elementStart"](44,"label",77),g["\u0275\u0275text"](45,"Emission Standard "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](46,Va,6,2,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](47,"div",29),g["\u0275\u0275elementStart"](48,"label",36),g["\u0275\u0275text"](49,"Engine No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](50,za,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](51,"div",29),g["\u0275\u0275elementStart"](52,"label",36),g["\u0275\u0275text"](53,"chasis No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](54,Na,4,1,"div",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](55,"div",29),g["\u0275\u0275elementStart"](56,"label",78),g["\u0275\u0275text"](57,"manufaturing Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](58,ja,4,4,"div",79),g["\u0275\u0275elementStart"](59,"div",38),g["\u0275\u0275template"](60,Ra,2,2,"input",80),g["\u0275\u0275template"](61,Ha,2,0,"span",40),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](62,"div",41),g["\u0275\u0275template"](63,Ua,3,1,"div",42),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](64,"div",43),g["\u0275\u0275template"](65,Ba,1,3,"jrx-image-viewer",44),g["\u0275\u0275template"](66,Ga,2,0,"div",8),g["\u0275\u0275element"](67,"div",81),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngClass",a.modal.second.class),g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate"](a.modal.second.data.title),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",a.modal.first.data.canUpdate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.canUpdate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",a.modal.second.data.canUpdate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",1===a.modal.second.data.canUpdate&&"admin"==a.user._loggedInBy),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",a.modal.second.data.document.img_url&&!a.modal.second.data.doc_not_img),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!a.modal.second.data.document.img_url)}}var Ya,Wa=((Ya=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.workList=[],this.columns2=[],this.data=[],this.columns=[],this.modal={active:"",first:{show:!1,class:"",data:this.setModalData()},second:{show:!1,class:"",data:this.setModalData()}},this.documentTypes=[],this.modelType=[],this.vehicleId=-1,this.bodyType=[],this.emissionStandard=[],this.getPendingDetailsVehicle(),this.getAllTypesOfBrand(),this.getAllBodyType(),this.getUserWorkList(),this.common.refresh=this.refresh.bind(this),this.emissionStandard=["BS 1","BS 2","BS 3","BS 4","BS 6"]}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.columns=[],this.getPendingDetailsVehicle(),this.getAllTypesOfBrand(),this.getAllBodyType(),this.getUserWorkList()}},{key:"getPendingDetailsVehicle",value:function(){var e=this,t="&vehicleId="+this.vehicleId;this.common.loading++,this.api.get("vehicles/getPendingFoVehicleBrands?"+t).subscribe((function(t){if(e.common.loading--,console.log("data",t),e.data=t.data,null==e.data)return e.data=[],void alert("Data Not  Available");if(e.data.length){for(var n in e.data[0])"_"!=n.charAt(0)&&e.columns.push(n);console.log("columns"),console.log(e.columns)}}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getAllTypesOfBrand",value:function(){var e=this;this.api.get("vehicles/getVehicleBrandsMaster").subscribe((function(t){e.documentTypes=t.data,console.log("All Type Docs: ",e.documentTypes)}),(function(e){console.log(e)}))}},{key:"getAllBodyType",value:function(){var e=this;this.api.get("Vehicles/getVehicleBodyTypes").subscribe((function(t){e.bodyType=t.data,console.log("All Type Body: ",e.bodyType)}),(function(e){console.log(e)}))}},{key:"getAllTypesOfModel",value:function(e,t){var n=this;this.api.get("vehicles/getVehicleModelsMaster?brandId="+e).subscribe((function(e){n.modelType=e.data,n.modal[t].data.modelType=n.modelType?n.modelType:null,console.log("All Type Model: ",n.modelType)}),(function(e){console.log(e)}))}},{key:"showDetails",value:function(e,t){this.modalOpenHandling({rowData:{vehicle_id:e._vid},title:"Update Vehicle",canUpdate:1},t)}},{key:"modalOpenHandling",value:function(e,t){this.modal.active?"first"==this.modal.active?(this.modal.second.class="custom-passive-modal",this.modal.second.show=!0,this.handleModalData("second",e,t),this.modal.active="first"):"second"==this.modal.active&&(this.modal.first.class="custom-passive-modal",this.modal.first.show=!0,this.handleModalData("first",e,t),this.modal.active="second"):(this.modal.first.class="custom-active-modal",this.modal.first.show=!0,this.handleModalData("first",e,t),this.modal.active="first"),console.log("Handler End: ",this.modal.active)}},{key:"handleModalData",value:function(e,t,n){this.modal[e].data.title=t.title,this.modal[e].data.btn1=t.btn1||"Update",this.modal[e].data.btn2=t.btn2||"Discard Image",t.canUpdate||(this.modal[e].data.canUpdate=0,this.modal[e].data.canreadonly=!0),this.modal[e].data.document=t.rowData,this.modal[e].data.vehicleId=t.rowData.vehicle_id,this.modal[e].data.document.wef_date&&(this.modal[e].data.document.wef_date=this.common.dateFormatter(this.modal[e].data.document.wef_date,"ddMMYYYY").split(" ")[0]),this.modal[e].data.vehicleId=this.modal[e].data.document.vehicle_id,this.modal[e].data.imgs=[],"undefined"!=this.modal[e].data.document.img_url&&this.modal[e].data.document.img_url&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url),"undefined"!=this.modal[e].data.document.img_url2&&this.modal[e].data.document.img_url2&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url2),"undefined"!=this.modal[e].data.document.img_url3&&this.modal[e].data.document.img_url3&&this.modal[e].data.imgs.push(this.modal[e].data.document.img_url3),console.log("-------------------------Images:",this.modal[e].data),this.modal[e].data.images=this.modal[e].data.imgs,console.log("Handle Next::",n),this.getvehiclePending(e,n),this.modal[e].data.docTypes=this.documentTypes,this.modal[e].data.modelType=this.modelType,this.modal[e].data.bodyType=this.bodyType}},{key:"getvehiclePending",value:function(e,t){var n=this;console.log("Modal data: ",this.modal[e].data);var a="vehicleId="+this.modal[e].data.vehicleId;-1!=t&&(a+="&forNext=1"),console.log("Params: ",a),this.api.get(" vehicles/getPendingFoVehicleBrands?"+a).subscribe((function(t){console.log("pending detalis:",t);var a=t.data[0];n.modal[e].data.document.id=t.data[0]._vid,n.modal[e].data.document.newRegno=t.data[0].Vehicle,n.modal[e].data.document.document_type_id=t.data[0]._brandid,n.modal[e].data.document.document_type=t.data[0].Brand,n.modal[e].data.document.wef_date=a._manfdate?a._manfdate.split("-").slice(0,2).reverse().join("/"):"",n.modal[e].data.document.img_url=t.data[0]._rcimage,n.modal[e].data.document.img_url2=t.data[0]._rcimage2,n.modal[e].data.document.img_url3=t.data[0]._rcimage3,n.modal[e].data.document._bscode=t.data[0]._bscode,n.modal[e].data.document.bodyTypeId=t.data[0]._bodytypeid,n.modal[e].data.document.chasisNo=t.data[0].chasisNo,n.modal[e].data.document.engineNo=t.data[0].engineNo,n.modal[e].data.images=[],"undefined"!=n.modal[e].data.document.img_url&&n.modal[e].data.document.img_url&&n.modal[e].data.images.push(n.modal[e].data.document.img_url),"undefined"!=n.modal[e].data.document.img_url2&&n.modal[e].data.document.img_url2&&n.modal[e].data.images.push(n.modal[e].data.document.img_url2),"undefined"!=n.modal[e].data.document.img_url3&&n.modal[e].data.document.img_url3&&n.modal[e].data.images.push(n.modal[e].data.document.img_url3),console.log("-------------------------Images:",n.modal[e].data),n.getAllTypesOfModel(n.modal[e].data.document.document_type_id),n.modal[e].data.document.bodyTypeId&&n.getAllBodyType(),"success"!=t.msg&&(alert(t.msg),n.closeModal(!0,e),console.log("sucess......"))}),(function(e){console.log(e)}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"closeModal",value:function(e,t){this.modal.first.show&&this.modal.second.show?"first"==t?(this.modal.first.show=!1,this.modal.second.class="custom-active-modal",this.modal.first.data=this.setModalData(),this.modal.active="second"):(this.modal.second.show=!1,this.modal.first.class="custom-active-modal",this.modal.second.data=this.setModalData(),this.modal.active="first"):(this.modal.active="",this.modal[t].show=!1,this.modal[t].class="",this.modal[t].data=this.setModalData())}},{key:"markAgentSelected",value:function(e,t){document.getElementById("doc_agent-"+t),console.log("option:"+e)}},{key:"checkDatePattern",value:function(e){return!!/^((0[1-9])|(1[0-2]))\/(\d{4})$/.test(e)}},{key:"checkExpiryDateValidity",value:function(e){var t=this.modal[e].data.document,n=1;"undefined"!=t.wef_date&&"undefined"!=t.expiry_date&&t.wef_date&&t.expiry_date&&(n=this.checkExpiryDateValidityByValue(t.wef_date,t.expiry_date,e)),n||this.common.showError("Please check the Expiry Date validity")}},{key:"updateVehicle",value:function(e,t,n){var a=this;if("admin"==this.user._loggedInBy&&1==this.modal[e].data.canUpdate){var o=this.modal[e].data.document,r=o.wef_date.split("/").reverse().join("-")+"-01",i={vehicleId:o.id,brandId:o.document_type_id,modelId:o.modalTypeId?o.modalTypeId:null,manufacturingDate:r,emsId:o._bscode,bodyTypeId:o.bodyTypeId,chasisNo:o.chasisNo,engineNo:o.engineNo};if(console.log("Params is",i),!o.document_type_id)return this.common.showError("Please enter Brand Type"),!1;if(o.wef_date&&!this.checkDatePattern(o.wef_date))return this.common.showError("Invalid manufacturing Date. Date must be in MM/YYYY format"),!1;if(!o.modalTypeId)return this.common.showError("Please enter Model Type"),!1;var l=1;return"undefined"!=o.wef_date&&"undefined"!=o.expiry_date&&o.wef_date&&o.expiry_date&&(l=this.checkExpiryDateValidityByValue(o.wef_date,o.expiry_date,e)),this.modal[e].data.spnexpdt=l?0:1,this.modal[e].data.spnexpdt?(this.common.showError("Please check the Expiry Date validity"),!1):(this.common.loading++,void this.api.post("Vehicles/updateVehicleModal",i).subscribe((function(t){a.common.loading--,console.log("api result",t),1==t.success&&(alert("Success"),a.closeModal(!0,e)),0==t.success&&alert(t.data)}),(function(e){a.common.loading--,console.log(e)})))}}},{key:"openConrirmationAlert",value:function(e,t){var n=this;console.log("Data ",e),console.log("params :",t),this.common.params={title:"Confirmation ",description:e.msg},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&(console.log("modal active:",n.modal.active),n.updateVehicle(n.modal.active,t,1))}))}},{key:"getDate",value:function(e,t){var n=this;this.common.params={ref_page:"pending-vehicle"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(a){a.date&&(n.modal[t].data.document[e]=n.common.dateFormatter(a.date,"ddMMYYYY").split(" ")[0],n.modal[t].data.document[e]=n.modal[t].data.document[e].split("-").slice(0,2).reverse().join("/"),console.log("Date:",n.modal[t].data.document[e]))}))}},{key:"setDate",value:function(e,t){console.log("fetch Date",e),console.log("Date:",this.modal[t].data.document[e])}},{key:"checkExpiryDateValidityByValue",value:function(e,t,n){var a=e.split("/").reverse().join("-"),o=t.split("/").reverse().join("-");e=this.common.dateFormatter(a).split(" ")[0],t=this.common.dateFormatter(o).split(" ")[0],console.log("comparing "+e+"-"+t);var r=new Date(e),i=new Date(t);return isNaN(r.getTime())||isNaN(i.getTime())?(this.common.showError("Invalid Date. Date formats should be dd/mm/yyyy"),0):r>i?(this.modal[n].data.spnexpdt=1,0):1}},{key:"findDocumentType",value:function(e,t){for(var n=0;n<this.modal[t].data.docTypes.length;n++)if(console.log("val:"+this.modal[t].data.docTypes[n]),this.modal[t].data.docTypes[n].id==e)return this.modal[t].data.docTypes[n].document_type}},{key:"selectBrandType",value:function(e,t){this.modelType=[],this.modal[t].data.document.modalTypeId=null,this.modal[t].data.document.document_type_id=e.id,console.log("brandType id: ",e.id),this.getAllTypesOfModel(e.id,t)}},{key:"selectModelType",value:function(e,t){console.log("select model",e.target.value);var n=e.target.value,a=this.modelType.filter((function(e){return e.name===n}))[0];this.modal[t].data.document.modalTypeId=a.id,console.log("Modal Type:",this.modal[t].data.document.modalTypeId)}},{key:"isValidDocument",value:function(e,t){}},{key:"getDateInDisplayFormat",value:function(e){return e?e.split("-").reverse().join("/"):e}},{key:"setModalData",value:function(){return{title:"",btn1:"",btn2:"",imageViewerId:(new Date).getTime(),agents:[],docTypes:[],vehicleId:0,agentId:"",canUpdate:1,canreadonly:!1,spnexpdt:0,current_date:new Date,images:[],imgs:[],doc_not_img:0,document:{agent:null,agent_id:null,amount:null,doc_no:null,document_type:null,document_type_id:null,modelTypeId:null,id:null,img_url:null,img_url2:null,img_url3:null,regno:null,newRegno:null,vehicle_id:null,wef_date:null,_bscode:null,bodyType:null,bodyTypeId:null}}}},{key:"openNextModal",value:function(e,t){console.log("Handle Next: Open Next Modal"),this.showDetails({_vid:t},!0)}},{key:"checkDateFormat",value:function(e,t){var n=this.modal[e].data.document[t];if(!(n.length<6)){var a=n[0]+n[1],o=n.substring(2,6);this.modal[e].data.document[t]=a+"/"+o,console.log("Date: ",this.modal[e].data.document[t])}}},{key:"onbodyType",value:function(e,t){var n=e.target.value,a=this.bodyType.filter((function(e){return e.name===n}))[0];this.modal[t].data.document.bodyTypeId=a.id}},{key:"getUserWorkList",value:function(){var e=this;this.workList=[],this.columns2=[],this.common.loading++,this.api.get("Vehicles/getVehiclesUserWorkSummary").subscribe((function(t){if(e.common.loading--,console.log("data",t),e.workList=t.data,null==e.workList)return e.workList=[],void e.common.showError("Work List No Data Record Available");if(e.workList.length)for(var n in e.workList[0])"_"!=n.charAt(0)&&e.columns2.push(n)}),(function(t){e.common.loading--,console.log(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ya)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Ya.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ya,selectors:[["pending-vehicle"]],decls:29,vars:6,consts:[[2,"margin","0px","border","0px","padding-top","0px"],[1,"container"],[1,"row"],[1,"list_table"],["id","tblpending",1,"table","table-bordered","table-hover","table-scroll"],[1,"thead"],["class","text-center",4,"ngFor","ngForOf"],[1,"del"],[4,"ngIf"],[1,"work-table"],[1,"table","table-bordered","table-hover","table-scroll"],[4,"ngFor","ngForOf"],[1,""],["class","custom-modal-1",3,"ngClass",4,"ngIf"],[1,"text-center"],["class","",4,"ngFor","ngForOf"],["title","Edit Vehicle",1,"btn","btn-dark","pl-3","pr-3",3,"click"],[1,"icon","ion-md-create"],[1,"col-sm-1",2,"min-width","100px"],[1,"custom-modal-1",3,"ngClass"],[1,"custom-modal-body"],[1,"modal-header"],["id","modal-basic-title-first",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","vert-mdl-pdg"],["id","document-form-first","name","document-form-first"],["documentFormFirst","ngForm"],[1,"col-sm-4"],[1,"row","form-field","clear"],["for","document_id-first",1,"col-sm-4","mgn-vert"],["class","col-sm-8 ",4,"ngIf"],["for","veh_no-first",1,"col-sm-4","mgn-vert"],[1,"mandatory"],["class","col-sm-8",4,"ngIf"],["class","col-sm-8 frm-fld mgn-vert sug-fld",4,"ngIf"],["for","doc_type-first",1,"col-sm-4","mgn-vert"],["for","wef_date-first",1,"col-sm-4","mgn-vert"],[1,"col-8",2,"padding-left","7px"],["id","wef_date-first","name","wef_date-first","type","text","class","col-sm-10 form-control frm-fld mgn-vert","placeholder","MM/YYYY",3,"ngModel","value","ngModelChange","focusout",4,"ngIf"],["class","col-sm-2","style","cursor:pointer; font-size: 18px; padding: 5px 10px; color: #263238;",3,"click",4,"ngIf"],[1,"row","mt-3","mb-3"],["class","col-12 text-center",4,"ngIf"],[1,"col-sm-8"],[3,"images","idContainer","loadOnInit",4,"ngIf"],["id","imgzoom-first"],[2,"font-size","16px"],["class","rc-image",4,"ngIf"],[1,"rc-image"],["target","_blank","title","View Vehicle",3,"href"],[1,"col-sm-8","frm-fld","mgn-vert","sug-fld"],["url","","display","name","placeholder","Enter Brand Type",1,"documentType",2,"width","60% !important",3,"data","preSelected","onSelected","keyup"],["type","text","list","modelType","name","modeltype","placeholder","Enter Model Type",1,"form-control","mt-1",3,"change"],["id","modelType"],["class","form-contol",4,"ngFor","ngForOf"],[1,"form-contol"],[1,"col-8"],["type","text","list","document_type1","name","bodytype",1,"form-control","mt-1",3,"change","focusout"],["id","document_type1"],["type","text","name","engineNo",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["type","text","name","chasisNo",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["type","text","list","emission1","name","emissiontype",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["id","emission1"],["class","form-contol",3,"value",4,"ngFor","ngForOf"],[1,"form-contol",3,"value"],["id","wef_date-first","name","wef_date-first","type","text","placeholder","MM/YYYY",1,"col-sm-10","form-control","frm-fld","mgn-vert",3,"ngModel","value","ngModelChange","focusout"],["wefdate_first",""],[1,"col-sm-2",2,"cursor","pointer","font-size","18px","padding","5px 10px","color","#263238",3,"click"],[1,"icon","fa","fa-calendar"],[1,"col-12","text-center"],["form","document-form","type","button","outline","","id","submit-first",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"images","idContainer","loadOnInit"],["id","modal-basic-title-second",1,"modal-title"],["id","document-form-second","name","document-form-second"],["documentFormSecond","ngForm"],["for","document_id-second",1,"col-sm-4","mgn-vert"],["for","veh_no-second",1,"col-sm-4","mgn-vert"],["for","doc_type-second",1,"col-sm-4","mgn-vert"],["for","wef_date-second",1,"col-sm-4","mgn-vert"],["class","col-sm-8","style","padding-left:7px;",4,"ngIf"],["id","wef_date-second","name","wef_date-second","type","text","class","col-sm-10 form-control frm-fld mgn-vert","placeholder","MM/YYYY",3,"ngModel","value","ngModelChange","focusout",4,"ngIf"],["id","imgzoom-second"],["type","text","list","modelType2","name","modeltype2","placeholder","Enter Model Type",1,"form-control","mt-1",3,"change"],["id","modelType2"],["type","text","list","document_type2","name","body2",1,"form-control","mt-1",3,"change","focusout"],["id","document_type2"],["type","text","list","emission2","name","emissiontype2",1,"form-control","mt-1",3,"ngModel","ngModelChange"],["id","emission2"],[1,"col-sm-8",2,"padding-left","7px"],["id","wef_date-second","name","wef_date-second","type","text","placeholder","MM/YYYY",1,"col-sm-10","form-control","frm-fld","mgn-vert",3,"ngModel","value","ngModelChange","focusout"],["wefdate_second",""],["form","document-form","type","submit","outline","","id","submit-second",1,"btn","btn-primary",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"div",3),g["\u0275\u0275elementStart"](5,"table",4),g["\u0275\u0275elementStart"](6,"thead",5),g["\u0275\u0275elementStart"](7,"tr"),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"SrNo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](10,$n,2,1,"th",6),g["\u0275\u0275elementStart"](11,"th",7),g["\u0275\u0275text"](12,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"tbody"),g["\u0275\u0275template"](14,Kn,2,1,"ng-container",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",2),g["\u0275\u0275elementStart"](16,"h6"),g["\u0275\u0275text"](17,"Work List"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",9),g["\u0275\u0275elementStart"](19,"table",10),g["\u0275\u0275elementStart"](20,"thead",5),g["\u0275\u0275elementStart"](21,"tr"),g["\u0275\u0275elementStart"](22,"th"),g["\u0275\u0275text"](23,"SrNo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](24,Zn,2,1,"th",11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"tbody",12),g["\u0275\u0275template"](26,Xn,2,1,"ng-container",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](27,Ca,68,20,"div",13),g["\u0275\u0275template"](28,$a,68,20,"div",13)),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngForOf",t.columns),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",t.data.length),g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngForOf",t.columns2),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.workList.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.modal.first.show),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.modal.second.show))},directives:[u.s,u.r,h.t,h.u,h.r,x.H,x.s,x.t,y.a,x.w,x.G,x.d,x.r,x.u,le.a],pipes:[h.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.rc-image[_ngcontent-%COMP%]{margin-left:0;padding:10%;display:inline}.rc-image[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#03036b;padding:0;cursor:pointer}.row[_ngcontent-%COMP%]{margin-top:4px}.modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}.btn[_ngcontent-%COMP%]{padding:5px 15px;border-radius:3px;text-transform:capitalize}.btn-danger[_ngcontent-%COMP%]{background-color:#d61414!important}.modal-footer[_ngcontent-%COMP%]{padding:0}.dropdown[_ngcontent-%COMP%]{position:relative}select[_ngcontent-%COMP%]{padding-top:1%}.agent[_ngcontent-%COMP%]{width:90%}.documentType[_ngcontent-%COMP%], .suggestions[_ngcontent-%COMP%]   ng-star-inserted[_ngcontent-%COMP%], auto-suggestion[_ngcontent-%COMP%]{overflow:auto!important;max-height:150px!important}.custom-input-1[_ngcontent-%COMP%], .suggestion-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:60%!important}.mgn-vert[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px}.doc-img[_ngcontent-%COMP%]{max-width:760px;max-height:800px}.clear[_ngcontent-%COMP%]{clear:both}.sug-fld[_ngcontent-%COMP%]{padding-left:6px;padding-right:19px}.vert-mdl-pdg[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.mdl-sel-agt[_ngcontent-%COMP%]{width:100%!important;margin:0!important;height:auto!important}.mgn[_ngcontent-%COMP%]{padding-left:8%}.custom-modal-1[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding:20px;background:transparent;overflow:auto;height:100%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238!important}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:-10px -1rem -1rem auto;outline:none}.custom-modal-body[_ngcontent-%COMP%]{background:#fff}.custom-active-modal[_ngcontent-%COMP%]{z-index:1050;background:rgba(0,0,0,.5)}.custom-passive-modal[_ngcontent-%COMP%]{z-index:1049}table[_ngcontent-%COMP%]{margin:0;border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{background-color:#1de9b6}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#fff;padding:5px 8px;border-radius:3px;display:inline-block;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background-color:#f44236}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}.list_table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 140px)}h6[_ngcontent-%COMP%]{margin:15px 0 10px}.table-scroll[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .table-scroll[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}"]}),Ya),Ka=r("I2Ol"),Za=function(e){return{highlight:e}};function qa(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr",14),g["\u0275\u0275elementStart"](1,"td",15),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td",15),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().zoomAt(e.lat,e.long)})),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().createSite(e)})),g["\u0275\u0275text"](14,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction1"](7,Za,a.isHighLight)),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.halt_id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.lat),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.long),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.cnt),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.cntl)}}var Ja,Xa=((Ja=function(){function e(t,n,a,r,i){o(this,e),this.mapService=t,this.apiService=n,this.router=a,this.modalService=r,this.commonService=i,this.startTime=new Date((new Date).setMonth((new Date).getMonth()-1)),this.endTime=new Date,this.foid=null,this.minZoom=12,this.createSiteMarker=null,this.buffers=[],this.typeId=-1,this.typeIds=[],this.data=null,this.isHeatAble=!1,this.commonService.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map"),this.mapService.autoSuggestion("moveLoc",(function(t,n,a){return e.mapService.zoomAt({lat:n,lng:a},e.minZoom)})),this.mapService.map.setOptions({draggableCursor:"crosshair"}),this.getTypeIds()}},{key:"createTable",value:function(){var e=this;this.startTime||this.commonService.showToast("Enter Start Time"),this.commonService.loading++,this.mapService.getMapBounds(),this.apiService.get("SiteFencing/getBufferZoneCandidates?lat=-1&long=-1&startTime="+this.commonService.dateFormatter(this.startTime)).subscribe((function(t){e.commonService.loading--,e.mapService.clearAll(),console.log("Res: ",t.data),e.buffers=t.data,e.mapService.createMarkers(e.buffers)}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"submit",value:function(e){var t=this;if(this.mapService.clearAll(),this.mapService.map.getZoom()<this.minZoom)this.commonService.showToast("bounds are huge");else{var n=this.mapService.getMapBounds();console.log("Bounds",n);var a={foid:this.foid,startTime:this.commonService.dateFormatter(this.startTime),endTime:this.commonService.dateFormatter(this.endTime),lat1:n.lat1,lat2:n.lat2,lng1:n.lng1,lng2:n.lng2};this.apiService.post("HaltOperations/getAllHaltsBtw",a).subscribe((function(n){console.log("Res: ",n.data),t.mapService.options={circle:{scale:1}},e?t.mapService.createHeatMap(n.data,!1):t.mapService.createMarkers(n.data,!1,!1)}),(function(e){console.error(e),t.commonService.showError()}))}}},{key:"loadMarkers",value:function(){var e=this,t=this.mapService.getMapBounds();this.apiService.post("VehicleStatusChange/getSiteAndSubSite",{lat1:t.lat1,lng1:t.lng1,lat2:t.lat2,lng2:t.lng2,typeId:null}).subscribe((function(t){var n=t.data;console.log("Res: ",t.data),e.mapService.createMarkers(n,!1,!1,["id","name"],(function(t){e.apiService.post("Site/getSingleSite",{siteId:t.id}).subscribe((function(n){e.mapService.options={clearHeat:!1},e.mapService.clearAll(!0,!0,{marker:!1,polygons:!0,polypath:!1}),e.apiService.post("SiteFencing/getSiteFences",{siteId:t.id}).subscribe((function(n){e.commonService.loading++;var a=n.data,o=Object.keys(a).length;if(console.log("Res: ",n.data),1==o)e.mapService.createPolygon(a[Object.keys(a)[0]].latLngs),console.log("Single",a[Object.keys(a)[0]]);else if(o>1){var r=[],i=!1,l=1e5,c=-1;for(var s in a)if(i=!1,a.hasOwnProperty(s)){var d=a[s];s==t.id?i=!0:l>d.dis&&(i=!1,l=d.dis,c=r.length),r.push({data:d.latLngs,isMain:i,isSec:!1,show:"\n                  Id: ".concat(s,"<br>\n                  Name:").concat(d.name,"<br>\n                  Location:").concat(d.loc_name,"<br>\n                  ")})}-1!=c&&(r[c].isSec=!0),e.mapService.createPolygons(r)}else console.log("Else");e.mapService.zoomAt(e.mapService.createLatLng(t.lat,t.long),16),e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}),(function(t){console.error(t),e.commonService.showError()}))}))}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"createSite",value:function(e){var t=this;this.data=e,this.modalService.open(Ka.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){e?t.apiService.post("SitesOperation/createBufferZone",{type:e.response,lat:t.data.lat,long:t.data.long}).subscribe((function(e){if(e.success){t.commonService.showToast("Success");var n=t.buffers.findIndex((function(e){return e.halt_id==t.data.halt_id}));t.buffers.splice(n,1),t.typeId=401}else t.commonService.showError(e.msg)}),(function(e){console.error(e),t.commonService.showError()})):t.commonService.showToast("No Site Type Selected")}))}},{key:"zoomAt",value:function(e,t){this.buffers.forEach((function(n){n.isHighLight=n.lat==e&&n.long==t})),this.createSiteMarker?(this.createSiteMarker.setPosition(this.mapService.createLatLng(e,t)),this.createSiteMarker.setMap(this.mapService.map)):this.createSiteMarker=this.mapService.createMarkers([{lat:e,lng:t,subType:"marker"}],!1,!1)[0],this.mapService.zoomAt(this.mapService.createLatLng(parseFloat(e),parseFloat(t)))}},{key:"getTypeIds",value:function(){var e=this;this.apiService.post("SiteFencing/getSiteTypes",{}).subscribe((function(t){console.log("Res: ",t.data),e.typeIds=t.data}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"showHeat",value:function(){var e=this;if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<this.minZoom)return void this.commonService.showToast("bounds are huge");var t=this.mapService.getMapBounds();console.log("Bounds",t);var n={lat:(t.lat1+t.lat2)/2,long:(t.lng2+t.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+n.lat+"&long="+n.long).subscribe((function(t){console.log("Res: ",t.data),e.mapService.createHeatMap(t.data,!1),e.isHeatAble=!0,e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}}}]),e}()).\u0275fac=function(e){return new(e||Ja)(g["\u0275\u0275directiveInject"](Te.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a))},Ja.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ja,selectors:[["halt-density"]],decls:37,vars:3,consts:[[1,"row"],[1,"col-2"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[1,"col-1"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"col-6"],[1,"tbl","table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[3,"ngClass",4,"ngFor","ngForOf"],["id","map",1,"col-6","map"],[3,"ngClass"],[2,"width","40px",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275element"](2,"input",2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"uj-date-time-picker",4),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](5,"div",3),g["\u0275\u0275elementStart"](6,"div",5),g["\u0275\u0275elementStart"](7,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",5),g["\u0275\u0275elementStart"](10,"button",7),g["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),g["\u0275\u0275text"](11," Load Marker... "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",5),g["\u0275\u0275elementStart"](13,"button",7),g["\u0275\u0275listener"]("click",(function(){return t.createTable()})),g["\u0275\u0275text"](14," Get Buffers... "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",0),g["\u0275\u0275elementStart"](16,"div",8),g["\u0275\u0275elementStart"](17,"table",9),g["\u0275\u0275elementStart"](18,"thead",10),g["\u0275\u0275elementStart"](19,"tr"),g["\u0275\u0275elementStart"](20,"th",11),g["\u0275\u0275text"](21,"S.No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"th",11),g["\u0275\u0275text"](23,"Halt Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"th"),g["\u0275\u0275text"](25,"Lat"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"th"),g["\u0275\u0275text"](27,"Lng"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](28,"th"),g["\u0275\u0275text"](29,"Cnt"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"th"),g["\u0275\u0275text"](31,"CntL"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"th"),g["\u0275\u0275text"](33,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"tbody"),g["\u0275\u0275template"](35,qa,15,9,"tr",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](36,"div",13),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("dateTimeValue",t.startTime),g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),g["\u0275\u0275advance"](27),g["\u0275\u0275property"]("ngForOf",t.buffers))},directives:[rt.a,h.t,h.r],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%;height:80vh}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:200px!important;max-width:inherit!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:150px!important;max-width:inherit!important}.highlight[_ngcontent-%COMP%]{background-color:#ff0}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ja),Qa=r("lq42");function eo(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",8),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function to(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",9),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var no,ao=((no=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.data=[],this.ruleType=[{id:11,name:"Loading"},{id:21,name:"UnLoading"},{id:31,name:"Loading & Unloading"}],this.siteId=null,this.vehicle={id:null,regno:null},this.table=null,this.common.refresh=this.refresh.bind(this),this.getSiteData()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getSiteData(),this.vehicle.id=null,this.siteId=null}},{key:"addsite",value:function(){var e=this;this.common.params={},this.modalService.open(Qa.a,{container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getSiteData()}))}},{key:"getSiteData",value:function(){var e=this;this.common.loading++,this.api.get("PlacementSiteRule/index").subscribe((function(n){e.common.loading--,console.log("Res:",n.data),e.data=n.data;var a,o=0,r=t(e.data);try{for(r.s();!(a=r.n()).done;){var i=a.value,l=e.ruleType.find((function(t){return t.id==e.data[o].ruletype_id}));e.data[o].ruleName=l?l.name:"N.A",e.data[o].preSiteType=i.next_site_name?i.next_site_name:"N.A",o++}}catch(c){r.e(c)}finally{r.f()}e.table=e.setTable()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{foName:{title:"Fo Name",placeholder:"Fo Name"},currentSiteName:{title:"Current Site Name ",placeholder:"Current Site Name"},nextSiteName:{title:"Next Site Name ",placeholder:"Next Site Name"},ruleType:{title:"Rule Type",placeholder:"Rule Type"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={foName:{value:n.f_name},currentSiteName:{value:n.curr_site_name},nextSiteName:{value:n.preSiteType},ruleType:{value:n.ruleName},action:{value:"",isHTML:!1,action:null,icons:[{class:"fas fa-edit  edit-btn",action:e.editRule.bind(e,n)},{class:" fa fa-trash remove",action:e.deleteRule.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"editRule",value:function(e){var t=this;console.log("row",e),this.common.params={title:"Edit Site Rule",row:e},this.modalService.open(Qa.a,{container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getSiteData()}))}},{key:"deleteRule",value:function(e){var t=this;if(console.log("doc:",e),window.confirm("Are You Want Delete Record")){var n={foid:e.foid,currSiteId:e.current_siteid,nextSiteId:e.next_siteid};this.common.loading++,this.api.post("PlacementSiteRule/delete",n).subscribe((function(e){t.common.loading--;var n=e.data;console.log("data:"),console.log(n),t.common.showToast(e.msg),t.getSiteData()}),(function(e){t.common.loading--,console.log(e)}))}}},{key:"getAllSiteData",value:function(){var e=this;this.common.loading++,this.api.get("TripSiteRule?vehicleId="+this.vehicle.id+"&siteId="+this.siteId).subscribe((function(n){e.common.loading--,console.log("Res:",n.data),e.data=n.data;var a,o=0,r=t(e.data);try{for(r.s();!(a=r.n()).done;){var i=a.value,l=e.ruleType.find((function(t){return t.id==e.data[o].ruletype_id}));e.data[o].ruleName=l?l.name:"N.A",e.data[o].preSiteType=i.next_site_name?i.next_site_name:"N.A",e.data[o].materialType=i.mt_name?i.mt_name:"N.A",o++}}catch(c){r.e(c)}finally{r.f()}e.table=null,e.table=e.setTable()}),(function(t){e.common.loading--,console.log("Error: ",t),e.common.showError()}))}},{key:"selectVehicle",value:function(e){this.vehicle.id=e.id}},{key:"selectSite",value:function(e){this.siteId=e.id}}]),e}()).\u0275fac=function(e){return new(e||no)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](d.a),g["\u0275\u0275directiveInject"](p.r))},no.\u0275cmp=g["\u0275\u0275defineComponent"]({type:no,selectors:[["placement-site-rule"]],decls:12,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","submit","name","add",1,"btn","btn-primary","m-0",3,"click"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Placement Site Rule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",3),g["\u0275\u0275elementStart"](7,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.addsite()})),g["\u0275\u0275text"](8,"Add Rule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"nb-card-body",5),g["\u0275\u0275template"](10,eo,1,2,"smart-table",6),g["\u0275\u0275template"](11,to,2,0,"div",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("ngIf",t.data&&t.data.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[u.s,u.v,u.r,h.u,f.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),no),oo=r("BuQh");function ro(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",6),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function io(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",7),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var lo,co,so=((lo=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=r,this.modalService=i,this.table=null,this.fuelAvgIssues=[],this.getFuelAvgIssues(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getFuelAvgIssues()}},{key:"getFuelAvgIssues",value:function(){var e=this;this.common.loading++,this.api.get("FuelDetails/getFuelAvgIssues").subscribe((function(t){e.common.loading--,console.log(t.data),e.fuelAvgIssues=t.data,e.common.showToast(t.msg),e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Reg No.",placeholder:"Reg No."},startDate:{title:"Start Date ",placeholder:"Start Date"},endDate:{title:"End Date ",placeholder:"End Date"},litre:{title:"Litre",placeholder:"Litre"},amount:{title:"Amount ",placeholder:"Amount"},avg:{title:"Avg ",placeholder:"Avg"},totalDistance:{title:"Total Distance",placeholder:"Total Distance"},loadingDistance:{title:"Loading Distance",placeholder:"Loading Distance"},unloadingDistance:{title:"Unloading Distance",placeholder:"Unloading Distance"},startLoc:{title:"StartLoc",placeholder:"StartLoc"},endLoc:{title:"EndLoc",placeholder:"EndLoc"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.fuelAvgIssues.map((function(n){var a={regno:{value:n.regno,class:"blue",action:e.vehicleFFdateWise.bind(e,n)},startDate:{value:e.datePipe.transform(n.start_time,"dd MMM yyyy")},endDate:{value:e.datePipe.transform(n.end_time,"dd MMM yyyy")},litre:{value:n.litre},amount:{value:n.amount},avg:{value:n.avg},totalDistance:{value:n.total_distance},loadingDistance:{value:n.loading_distance},unloadingDistance:{value:n.unloading_distance},startLoc:{value:n.startloc},endLoc:{value:n.endloc},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"vehicleFFdateWise",value:function(e){this.common.params={value:e},this.modalService.open(oo.a,{size:"lg",container:"nb-layout"})}}]),e}()).\u0275fac=function(e){return new(e||lo)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},lo.\u0275cmp=g["\u0275\u0275defineComponent"]({type:lo,selectors:[["fuel-average-issues"]],decls:10,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[2,"padding-bottom","0px","min-height","450px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Fuel Average Issues"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"nb-card-body",3),g["\u0275\u0275elementStart"](7,"div"),g["\u0275\u0275template"](8,ro,1,2,"smart-table",4),g["\u0275\u0275template"](9,io,2,0,"div",5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",t.fuelAvgIssues&&t.fuelAvgIssues.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.fuelAvgIssues.length))},directives:[u.s,u.v,u.r,h.u,f.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}"]}),lo),mo=r("kSDO"),go=r("Adb+"),po=r("M5eX"),uo=r("elYE"),ho=((co=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.datePipe=n,this.common=a,this.user=r,this.modalService=i,this.startDate="",this.endDate="",this.data=[],this.endDate=this.common.dateFormatter(new Date),this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"populateFilling",value:function(){var e=this,t={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/populateFillingStationEntriesWrtFo",t).subscribe((function(t){e.common.loading--,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"fuel-analysis"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e&&(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("fromDate",t.startDate)),"end"==e&&(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"mappingFE",value:function(){var e=this,t={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/FSEMapiingWrtFo",t).subscribe((function(t){e.common.loading--,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"mappingIsFull",value:function(){var e=this,t={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/UpdateIsFullWrtFF",t).subscribe((function(t){e.common.loading--,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"populateFAL",value:function(){var e=this,t={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("Fuel/populateFALogsAndUpdateWrtFo",t).subscribe((function(t){e.common.loading--,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"modalWiseFuel",value:function(){this.modalService.open(uo.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getreport",value:function(){var e=this,t="start_time="+this.startDate+"&end_time="+this.endDate;console.log("params",t),this.common.loading++,this.api.get("Fuel/getPumpWiseTotalFilling?"+t).subscribe((function(t){e.common.loading--,e.data=t.data,e.data&&(e.common.params=e.data,console.log("response",e.common.params),e.modalService.open(po.a,{size:"lg",container:"nb-layout"})),console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"vechilewiseFuel",value:function(){var e=this,t="start_time="+this.startDate+"&end_time="+this.endDate;console.log("params",t),this.common.loading++,this.api.get("Fuel/getVehWiseTotalFilling?"+t).subscribe((function(t){e.common.loading--,e.data=t.data,e.data&&(e.common.params=e.data,e.modalService.open(go.a,{size:"lg",container:"nb-layout"}).result.then((function(t){t.response&&e.vechilewiseFuel()}))),console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||co)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},co.\u0275cmp=g["\u0275\u0275defineComponent"]({type:co,selectors:[["fuel-analysis"]],decls:33,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-8"],[1,"mt-1"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"col-sm-3",2,"margin-left","10px"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"row","mt-4"],[1,"col-2"],[1,"btn","btn-primary","primay_btn",3,"click"],[1,"col-md-10","buttons",2,"margin-top","20px"],["id","populatefilling","name","populate-filling",1,"btn","btn-primary",2,"margin","0px","margin-right","5px","cursor","pointer",3,"click"],["id","mappingFE","name","mapping-fe",1,"btn","btn-primary",2,"margin","0px","cursor","pointer",3,"click"],["id","mappingIsFull","name","mapping-isfull",1,"btn","btn-primary",2,"margin","0px","margin-left","10px","cursor","pointer",3,"click"],["id","populateFAL","name","populate-fal",1,"btn","btn-primary",2,"margin","0px","margin-left","15px","cursor","pointer",3,"click"],["id","populateFAL","name","modal-wise-fuelAvg",1,"btn","btn-primary",2,"margin","0px","margin-left","15px","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5",3),g["\u0275\u0275text"](5,"Fuel Diagnosis"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"nb-card-body"),g["\u0275\u0275elementStart"](7,"div",1),g["\u0275\u0275elementStart"](8,"div",4),g["\u0275\u0275elementStart"](9,"input",5),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](10,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",6),g["\u0275\u0275elementStart"](12,"input",7),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](13,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",8),g["\u0275\u0275elementStart"](15,"div",9),g["\u0275\u0275elementStart"](16,"button",10),g["\u0275\u0275listener"]("click",(function(){return t.vechilewiseFuel()})),g["\u0275\u0275text"](17,"VehicleWiseFuel"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",9),g["\u0275\u0275elementStart"](19,"button",10),g["\u0275\u0275listener"]("click",(function(){return t.getreport()})),g["\u0275\u0275text"](20,"PumpFuelFilling"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",1),g["\u0275\u0275elementStart"](22,"div",11),g["\u0275\u0275elementStart"](23,"button",12),g["\u0275\u0275listener"]("click",(function(){return t.populateFilling()})),g["\u0275\u0275text"](24,"Filling Entries"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"button",13),g["\u0275\u0275listener"]("click",(function(){return t.mappingFE()})),g["\u0275\u0275text"](26,"Mapping Filling Entries"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"button",14),g["\u0275\u0275listener"]("click",(function(){return t.mappingIsFull()})),g["\u0275\u0275text"](28,"Mapping Is Full"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"button",15),g["\u0275\u0275listener"]("click",(function(){return t.populateFAL()})),g["\u0275\u0275text"](30,"Populate Fuel Average Logs"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](31,"button",16),g["\u0275\u0275listener"]("click",(function(){return t.modalWiseFuel()})),g["\u0275\u0275text"](32,"Modal Wise Fuel Avg"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](10,2,t.startDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](13,5,t.endDate,"dd MMM yyyy")))},directives:[u.s,u.v,u.r],pipes:[h.f],styles:["nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .primay_btn[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize;border-radius:3px;cursor:pointer!important;padding:8px}.primay_btn[_ngcontent-%COMP%]{width:100%}"]}),co),fo=r("Ig2y");function bo(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",10),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function vo(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",11),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var So,xo,yo,Co=((xo=function(){function e(t,n,a,r,i,l){o(this,e),this.common=t,this.api=n,this.modalService=a,this.activeModal=r,this.dateService=i,this.datePipe=l,this.table=null,this.foFsMapping=[],this.fsid=null,this.foid=null,this.getFoFsMapping(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getFoFsMapping()}},{key:"getFoFsMapping",value:function(){var e=this;this.common.loading++,this.api.get("Fuel/getFoFsMapping").subscribe((function(t){e.common.loading--,console.log("res",t.data),e.foFsMapping=t.data||[],e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"addFoFsMapping",value:function(){var e=this;if(this.foid)if(this.fsid){var t={foid:this.foid,fsid:this.fsid};this.common.loading++,this.api.post("Fuel/insertFoFsMapping",t).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.common.showToast(t.msg),t.success&&e.getFoFsMapping()}),(function(t){e.common.loading--,e.common.showError()}))}else this.common.showToast("Fuel Station Is Missing");else this.common.showToast("Fo Is Missing")}},{key:"getFo",value:function(e){this.foid=e.id}},{key:"getFs",value:function(e){this.fsid=e.id}},{key:"setTable",value:function(){return{data:{headings:{StationName:{title:"Station Name",placeholder:"Station Name"},SiteName:{title:"Site Name",placeholder:"Site Name"},Location:{title:"Location",placeholder:"Location"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.foFsMapping.map((function(n){var a={StationName:{value:n.station_name},SiteName:{value:n.site_name},Location:{value:n.location},action:{value:"",isHTML:!1,action:null,icons:[{class:" fa fa-trash remove",action:e.deleteMapping.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"deleteMapping",value:function(e){var t=this,n={rowid:e.id};console.log("rowid",n),this.common.loading++,this.api.post("Fuel/deleteFoFsMapping",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),e.success&&t.getFoFsMapping()}),(function(e){t.common.loading--,t.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||xo)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](p.b),g["\u0275\u0275directiveInject"](fo.a),g["\u0275\u0275directiveInject"](h.f))},xo.\u0275cmp=g["\u0275\u0275defineComponent"]({type:xo,selectors:[["fo-fs-mapping"]],decls:19,vars:4,consts:[[1,"row"],[1,"col-sm-6"],[1,"col-sm-3"],["url","Suggestion/getFoUsersList","display","name","placeholder","Search Fo",3,"preSelected","onSelected"],["url","Suggestion/GetFuelStation","display","name","placeholder","Search Fuel Station",3,"preSelected","onSelected"],[1,"col-sm-2"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"row",2,"margin-top","15px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Fo Fs Mapping"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"nb-card-body"),g["\u0275\u0275elementStart"](7,"div",0),g["\u0275\u0275elementStart"](8,"div",2),g["\u0275\u0275elementStart"](9,"auto-suggestion",3),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFo(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",2),g["\u0275\u0275elementStart"](11,"auto-suggestion",4),g["\u0275\u0275listener"]("onSelected",(function(e){return t.getFs(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](12,"div",2),g["\u0275\u0275elementStart"](13,"div",5),g["\u0275\u0275elementStart"](14,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.addFoFsMapping()})),g["\u0275\u0275text"](15,"Add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",7),g["\u0275\u0275template"](17,bo,1,2,"smart-table",8),g["\u0275\u0275template"](18,vo,2,0,"div",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.foFsMapping.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.foFsMapping.length))},directives:[u.s,u.v,u.r,y.a,h.u,f.a],styles:[".alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000}[_nghost-%COMP%]     .edit-btn{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .remove{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px 10px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}"]}),xo),Mo=((So=function(){function e(t,n,a,r,i,l){o(this,e),this.api=t,this.common=n,this.theme=a,this.user=r,this.datepipe=i,this.modalService=l,this.startDate="",this.endDate="",this.endDate=this.common.dateFormatter(new Date).split(" ")[0],this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)).split(" ")[0],this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh")}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trip-analysis"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("startDate",t.startDate)):(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getTripAnalysis",value:function(){var e=this,t={startDate:this.startDate,endDate:this.endDate};this.common.loading++,this.api.post("TripsOperation/regenerateVehicleTrips",t).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.common.showToast(t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||So)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](u.Kb),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](p.r))},So.\u0275cmp=g["\u0275\u0275defineComponent"]({type:So,selectors:[["trip-analysis"]],decls:15,vars:8,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Trip Diagnosis "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body",1),g["\u0275\u0275elementStart"](4,"div",2),g["\u0275\u0275elementStart"](5,"div",3),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275elementStart"](7,"input",5),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](8,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",4),g["\u0275\u0275elementStart"](10,"input",6),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](11,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",4),g["\u0275\u0275elementStart"](13,"button",7),g["\u0275\u0275listener"]("click",(function(){return t.getTripAnalysis()})),g["\u0275\u0275text"](14,"Regenerate Trips"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](8,2,t.startDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](11,5,t.endDate,"dd MMM yyyy")))},directives:[u.s,u.v,u.r],pipes:[h.f],styles:[""]}),So),ko=r("axIL"),Eo=r("IGDu"),_o=r("7qtK"),wo=r("QVK/"),Po=r("0pSD"),Oo=r("sfyk"),Do=((yo=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.router=n,this.modalService=a,this.common=r,this.user=i,this.data=[],this.dates={start:null,end:this.common.dateFormatter(new Date)};var l=new Date;this.dates.start=this.common.dateFormatter1(new Date(l.setDate(l.getDate()-4))),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"card usage"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.dates[e]=t.common.dateFormatter(n.date).split(" ")[0],console.log("Date:",t.dates)}))}},{key:"getDiagnostics",value:function(){var e=this;this.common.loading++,this.api.get("LorryReceiptsOperation/getUnmappedLr").subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,e.data&&(e.common.params=e.data,e.modalService.open(Eo.a,{size:"lg",container:"nb-layout",backdrop:"static"}))}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getmapedLr",value:function(){var e=this,t={start_time:this.dates.start,end_time:this.dates.end};this.common.loading++,this.api.post("LorryReceiptsOperation/getMappedLr",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data,e.data&&(e.common.params=e.data,e.modalService.open(_o.a,{size:"lg",container:"nb-layout",backdrop:"static"}))}),(function(t){e.common.loading--,console.log(t)}))}},{key:"mergeLrState",value:function(){var e=this;this.common.loading++,this.api.get("LorryReceiptsOperation/mergeLrState").subscribe((function(t){e.common.loading--,console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"addFoField",value:function(){this.modalService.open(wo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e)}))}},{key:"lrInvoice",value:function(){this.modalService.open(Po.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"freightRateRules",value:function(){this.modalService.open(Oo.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}}]),e}()).\u0275fac=function(e){return new(e||yo)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](p.r),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a))},yo.\u0275cmp=g["\u0275\u0275defineComponent"]({type:yo,selectors:[["lr-diagnostics"]],decls:40,vars:8,consts:[[1,"row",2,"margin-bottom","10px"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-2"],[1,"row"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","end Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-md-2"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h2"),g["\u0275\u0275text"](3,"LR Diagnostics"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"nb-card-body"),g["\u0275\u0275elementStart"](5,"div",0),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"label"),g["\u0275\u0275text"](8,"Unmaped LR:"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",1),g["\u0275\u0275elementStart"](10,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.getDiagnostics()})),g["\u0275\u0275text"](11,"Unmaped LR"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",3),g["\u0275\u0275elementStart"](13,"label"),g["\u0275\u0275text"](14,"Merge LR State:"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",3),g["\u0275\u0275elementStart"](16,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.mergeLrState()})),g["\u0275\u0275text"](17,"Merge LR State"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",4),g["\u0275\u0275elementStart"](19,"div",1),g["\u0275\u0275elementStart"](20,"label"),g["\u0275\u0275text"](21,"Mapped LR"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"div",1),g["\u0275\u0275elementStart"](23,"input",5),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](24,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",1),g["\u0275\u0275elementStart"](26,"input",6),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](27,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](28,"div",1),g["\u0275\u0275elementStart"](29,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.getmapedLr()})),g["\u0275\u0275text"](30,"Mapped LR"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](31,"div",7),g["\u0275\u0275elementStart"](32,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.addFoField()})),g["\u0275\u0275text"](33,"Add-Columns"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"div",7),g["\u0275\u0275elementStart"](35,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.lrInvoice()})),g["\u0275\u0275text"](36,"Assign-Columns"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](37,"div",7),g["\u0275\u0275elementStart"](38,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.freightRateRules()})),g["\u0275\u0275text"](39,"Freight Rate Rules"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](23),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](24,2,t.dates.start,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](27,5,t.dates.end,"dd MMM yyyy")))},directives:[u.s,u.v,u.r],pipes:[h.f],styles:[""]}),yo),Io=r("AsEy");function To(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",14),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Ao(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",15),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var Fo,Lo=((Fo=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.datePipe=n,this.common=a,this.user=r,this.modalService=i,this.showTable=!1,this.startDate="",this.endDate="",this.siteRule=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.endDate=this.common.dateFormatter(new Date),this.startDate=this.common.dateFormatter((new Date).setDate((new Date).getDate()-15)),this.getSiteRule(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"refresh",value:function(){console.log("Refresh"),this.getSiteRule()}},{key:"ngOnInit",value:function(){}},{key:"getSiteRule",value:function(){var e=this;this.siteRule=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var t={start_time:this.startDate,end_time:this.endDate};this.common.loading++,this.api.post("HaltOperations/getSiteRule",t).subscribe((function(t){if(e.common.loading--,console.log("res",t.data),e.siteRule=t.data||[],null==e.siteRule)e.common.showToast("Record Empty!!");else{e.common.showToast(t.msg);var n=e.siteRule[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"fuel-analysis"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e&&(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("fromDate",t.startDate)),"end"==e&&(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.siteRule.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.siteRule[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.siteRule[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"ShowData",value:function(){var e=this;this.common.loading++,this.api.get("VehicleKpi/createMaster").subscribe((function(t){e.common.loading--,e.common.showToast(t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"autoReview",value:function(){var e=this;this.common.loading++,this.api.get("AutoHalts/runAutoReviewScheduledActivity").subscribe((function(t){e.common.loading--,e.common.showToast(t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"removeSandwitchHalts",value:function(){var e=this;this.common.loading++,this.api.get("AutoHalts/runSandwitchHalts").subscribe((function(t){e.common.loading--,e.common.showToast(t.msg)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getfoSiteDetails",value:function(){this.modalService.open(Io.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||Fo)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Fo.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Fo,selectors:[["vsc-diagnosis"]],decls:33,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"mt-1"],[1,"btn","btn-primary",3,"click"],[1,"col-3"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],[1,"col-sm-3",2,"margin-left","10px"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","primay_btn",3,"click"],[2,"margin-top","10px"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5",3),g["\u0275\u0275text"](5,"VSC Diagnosis"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.ShowData()})),g["\u0275\u0275text"](8,"M1 M2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",5),g["\u0275\u0275elementStart"](10,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.autoReview()})),g["\u0275\u0275text"](11,"Auto Review Scheduled "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",5),g["\u0275\u0275elementStart"](13,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.removeSandwitchHalts()})),g["\u0275\u0275text"](14,"Remove Sandwitch Halts"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",2),g["\u0275\u0275elementStart"](16,"button",4),g["\u0275\u0275listener"]("click",(function(){return t.getfoSiteDetails()})),g["\u0275\u0275text"](17,"Fo Site Count"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"nb-card-body"),g["\u0275\u0275elementStart"](19,"div",1),g["\u0275\u0275elementStart"](20,"div",6),g["\u0275\u0275elementStart"](21,"input",7),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](22,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"div",8),g["\u0275\u0275elementStart"](24,"input",9),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](25,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"div",6),g["\u0275\u0275elementStart"](27,"button",10),g["\u0275\u0275listener"]("click",(function(){return t.getSiteRule()})),g["\u0275\u0275text"](28,"getSiteRule"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"div",11),g["\u0275\u0275elementStart"](30,"div"),g["\u0275\u0275template"](31,To,1,2,"smart-table",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](32,Ao,2,0,"div",13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](21),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](22,4,t.startDate,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](25,7,t.endDate,"dd MMM yyyy")),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.siteRule&&t.siteRule.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",null==t.siteRule))},directives:[u.s,u.v,u.r,h.u,f.a],pipes:[h.f],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     smart-table{max-height:calc(100vh - 220px)}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 230px)!important}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;border:2px solid #008b8b;border-radius:4px}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Fo),Vo=r("6ugN"),zo=r("IarD"),No=r("VKYg");function jo(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td",18),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td",18),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td",21),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=g["\u0275\u0275nextContext"]();return a.routeId=e.id,a.gotoSingle()})),g["\u0275\u0275text"](10,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](o+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.id),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.lat),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a.long)}}var Ro,Ho=((Ro=function(){function e(t,n,a,r,i){o(this,e),this.mapService=t,this.apiService=n,this.router=a,this.commonService=r,this.modalService=i,this.remainingList=[],this.circle=null,this.routeId=null,this.siteLatLng={lat:0,lng:90},this.typeId=1,this.siteLoc="",this.siteName=null,this.tempData=[],this.isUpdate=!1,this.mergeSiteId=null,this.position=null,this.final=null,this.meterRadius=20,this.currentCenter=null,this.lat=null,this.long=null,this.isHeatAble=!1,this.kmsShow=null,this.commonService.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){this.getRemainingTable()}},{key:"refresh",value:function(){console.log("Refresh"),this.getRemainingTable()}},{key:"calKms",value:function(){var e,t,n=0;if(this.mapService.polygonPath)for(var a=this.mapService.polygonPath.getPath().getArray(),o=0;o<a.length;o++)0!=o&&(n+=this.commonService.distanceFromAToB(e,t,a[o].lat(),a[o].lng(),"Mt")),e=a[o].lat(),t=a[o].lng();this.kmsShow=(n/1e3).toFixed(2)}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map"),this.mapService.zoomAt({lat:26.928826486644528,lng:75.74931625366207},14),this.mapService.autoSuggestion("moveLoc",(function(t,n,a){return e.mapService.zoomAt({lat:n,lng:a},14)})),this.mapService.createPolygonPath(),this.mapService.map.setOptions({draggableCursor:"crosshair"}),this.mapService.addListerner(this.mapService.map,"click",(function(t){if(e.mapService.isDrawAllow){console.log("Event",t),e.currentCenter=t.latLng,e.circle&&(e.circle.setMap(null),e.circle=null),e.circle=e.mapService.createCirclesOnPostion(t.latLng,e.meterRadius);var n=t.latLng.lat()+","+t.latLng.lng();e.position=n,e.search(!1),e.calKms()}}))}},{key:"getRemainingTable",value:function(){var e=this;this.commonService.loading++,this.apiService.get("Buffer/getBufferRemaining").subscribe((function(t){var n=t.data;e.commonService.loading--,console.log("Res: ",t.data),e.remainingList=n}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"loadMarkers",value:function(){var e=this,t=this.mapService.getMapBounds(),n={lat1:t.lat1,lng1:t.lng1,lat2:t.lat2,lng2:t.lng2,typeId:-2};this.commonService.loading++,this.apiService.post("VehicleStatusChange/getSiteAndSubSite",n).subscribe((function(t){e.commonService.loading--;var n=t.data;console.log("Res: ",t.data),e.clearAll(),e.mapService.createMarkers(n,!1,!0,["id","name"])}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"clearAll",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.exitTicket(),this.mapService.isDrawAllow=!1,this.siteName=null,this.siteLoc=null,this.routeId=null,e&&this.getRemainingTable(),this.circle&&this.circle.setMap(null),this.mapService.clearAll(),this.mapService.resetPolyPaths()}},{key:"undo",value:function(){if(this.mapService.isDrawAllow&&(this.mapService.undoPolyPath(),this.calKms(),console.log("Here",this.mapService.polygonPath),this.circle)){var e=this.mapService.polygonPath.getPath().getArray();this.circle.setCenter(e[e.length-1])}}},{key:"enterTicket",value:function(){var e=this;if(!this.mapService.isDrawAllow){var t={tblRefId:8,tblRowId:this.routeId};this.routeId?(this.commonService.loading++,this.apiService.post("TicketActivityManagment/insertTicketActivity",t).subscribe((function(t){e.commonService.loading--,t.success?(e.mapService.isDrawAllow=!0,e.isUpdate&&e.commonService.showToast("Already Exists")):e.commonService.showToast(t.msg)}),(function(t){e.commonService.loading--,console.log(t)}))):(this.mapService.isDrawAllow=!0,this.isUpdate&&this.commonService.showToast("Already Exists"))}this.mapService.isDrawAllow&&this.submitPolygon()}},{key:"submitPolygon",value:function(){var e,t=this;if(this.mapService.createCirclesOnPostion(a,this.meterRadius),this.mapService.polygonPath){var n="(",a=this.mapService.polygonPath.getPath().getArray();if(a.length<4)return alert("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var o=0;o<a.length;o++)o==Math.floor(a.length/2)&&(this.lat=a[o].lat()),this.long=a[o].lng(),n+=a[o].lat()+" "+a[o].lng()+",";n=n.substr(0,n.length-1);var r={bufferString:n+=")",routeId:this.routeId,roadDist:this.meterRadius,lat:this.lat,long:this.long};this.commonService.loading++,e=this.routeId?"Buffer/updateBufferLines":"Buffer/insertBufferLines",this.apiService.post(e,r).subscribe((function(e){t.commonService.loading--,t.commonService.showToast("Save"),t.getRemainingTable();var n=t.lat+","+t.long;t.clearAll(),t.position=n,t.search()}),(function(e){console.error(e),t.commonService.showError(),t.mapService.isDrawAllow=!0}))}}},{key:"mapGetCenterAndBound",value:function(){var e=this.mapService.getMapBounds();return{lat:(e.lat1+e.lat2)/2,long:(e.lng1+e.lng2)/2,bound:Math.max(Math.abs(e.lat1-e.lat2)/2,Math.abs(e.lng1-e.lng2)/2)}}},{key:"boundSearch",value:function(){var e=this,t=this.mapGetCenterAndBound();this.commonService.loading++,this.apiService.post("Buffer/getBuffer",t).subscribe((function(t){e.commonService.loading--;var n=t.data;t.success?(e.mapService.resetPolyPaths(),e.mapService.createPolyPathsManual(n,(function(t,n){e.remove(t.id)}))):e.commonService.showError(t.msg)}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0}))}},{key:"search",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("position1",this.position),this.final=this.position.split(","),console.log("array",this.final[0],this.final[1]),t&&this.mapService.zoomAt(this.mapService.createLatLng(this.final[0],this.final[1]),15);var n={lat:this.final[0],long:this.final[1]};this.commonService.loading++,this.apiService.post("Buffer/getBuffer",n).subscribe((function(t){e.commonService.loading--;var n=t.data;console.log("Res: ",t.data),e.mapService.resetPolyPaths(),e.mapService.createPolyPathsManual(n,(function(t,n){console.log("Poly",t),e.remove(t.id)}))}),(function(t){console.error(t),e.commonService.showError(),e.mapService.isDrawAllow=!0}))}},{key:"gotoSingle",value:function(){var e=this;this.commonService.loading++;var t=this.routeId;this.apiService.post("Buffer/getSingleBuffer",{id:this.routeId}).subscribe((function(n){e.commonService.loading--;var a=n.data;e.clearAll(),e.tempData=a,e.typeId=a[0].type_id,e.routeId=a[0].id,e.siteLoc=a[0].loc_name,e.siteName=a[0].name,e.routeId=t,e.lat=a[0].lat,e.long=a[0].long,e.getRemainingTable(),e.commonService.loading++,e.apiService.post("Buffer/getBuffer",{lat:e.lat,long:e.long}).subscribe((function(t){e.commonService.loading--;var n=t.data;e.mapService.resetPolyPaths(),e.mapService.createPolyPathsManual(n,(function(t,n){console.log("Poly",t),e.remove(t.id)})),e.mapService.createMarkers(e.tempData),e.mapService.setMapType(1)}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}),(function(t){console.error(t),e.commonService.showError()}))}},{key:"remove",value:function(e){var t=this;console.log("row",e);var n={id:e};e&&(console.log("id",e._id),this.commonService.params={title:"Delete Polyline ",description:"<b>&nbsp;Are Sure To Delete This Polyline<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.commonService.loading++,t.apiService.post("Buffer/bufferDelete",n).subscribe((function(e){t.commonService.loading--,t.commonService.showToast(e.msg);var n=t.mapGetCenterAndBound(),a=n.lat+","+n.long;t.clearAll(),t.position=a,t.search()}),(function(e){t.commonService.loading--,console.log("Error: ",e)})))})))}},{key:"showHeat",value:function(){var e=this;if(this.isHeatAble)this.mapService.resetHeatMap(),this.isHeatAble=!1;else{if(this.mapService.map.getZoom()<12)return void this.commonService.showToast("bounds are huge");var t=this.mapService.getMapBounds();console.log("Bounds",t);var n={lat:(t.lat1+t.lat2)/2,long:(t.lng2+t.lng2)/2};this.commonService.loading++,this.apiService.get("SiteFencing/getBufferZoneCandidates?lat="+n.lat+"&long="+n.long).subscribe((function(t){console.log("Res: ",t.data),e.mapService.createHeatMap(t.data,!1),e.isHeatAble=!0,e.commonService.loading--}),(function(t){console.error(t),e.commonService.showError(),e.commonService.loading--}))}}},{key:"ignoreSite",value:function(){var e=this;this.routeId?(this.commonService.loading++,this.apiService.post("Buffer/ignore",{routeId:this.routeId}).subscribe((function(t){e.commonService.loading--,e.commonService.showToast(t.msg),e.getRemainingTable()}),(function(t){e.commonService.loading--,console.log(t)})),this.clearAll()):alert("Select Buffer First!!!")}},{key:"exitTicket",value:function(){var e=this;if(this.routeId){var t,n={tblRefId:8,tblRowId:this.routeId};return console.log("params",n),this.commonService.loading++,this.apiService.post("TicketActivityManagment/updateActivityEndTime",n).subscribe((function(n){return e.commonService.loading--,t=n,console.log(t),!!t.sucess}),(function(t){e.commonService.loading--,console.log(t)})),!1}}}]),e}()).\u0275fac=function(e){return new(e||Ro)(g["\u0275\u0275directiveInject"](Te.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](l.c),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r))},Ro.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ro,selectors:[["buffer-polyline"]],decls:75,vars:7,consts:[[1,"row"],[1,"col-6","table"],[1,"buffer"],["name","name","id","name","autocomplete","off","placeholder","Lat&Long",1,"fill-elt","form-control","w-100",3,"ngModel","keydown.enter","ngModelChange"],["placeholder","Route Id",1,"form-control","w-100",3,"ngModel","keydown.enter","ngModelChange"],["type","text","placeholder","Move to..","id","moveLoc",1,"form-control","w-100"],["type","number","name","meterRadius","id","meterRadius",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","w-100",3,"click"],["name","undo","id","undo",1,"btn","btn-primary","w-60",3,"click"],[1,"btn","btn-primary",3,"click"],["id","ignore","name","ignore",1,"btn","btn-primary","w-60",3,"click"],[1,"btn","btn-primary",2,"display","inline-block","margin-right","5px",3,"click"],["type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["colspan","3"],[1,"zoom-btn",3,"click"],[1,"tbl"],[1,"table","table-bordered","table-hover"],[1,"thead"],[2,"width","40px"],[4,"ngFor","ngForOf"],["id","map",1,"map","col-6"],[3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"table",2),g["\u0275\u0275elementStart"](5,"tbody"),g["\u0275\u0275elementStart"](6,"tr"),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275elementStart"](8,"input",3),g["\u0275\u0275listener"]("keydown.enter",(function(){return t.search()}))("ngModelChange",(function(e){return t.position=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275elementStart"](10,"input",4),g["\u0275\u0275listener"]("keydown.enter",(function(){return t.gotoSingle()}))("ngModelChange",(function(e){return t.routeId=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275element"](12,"input",5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td"),g["\u0275\u0275elementStart"](14,"input",6),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.meterRadius=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](15,"Meter "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"tr"),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275elementStart"](18,"button",7),g["\u0275\u0275listener"]("click",(function(){return t.clearAll()})),g["\u0275\u0275text"](19,"Clear"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"td"),g["\u0275\u0275elementStart"](21,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.undo()})),g["\u0275\u0275text"](22,"Undo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"td"),g["\u0275\u0275elementStart"](24,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.loadMarkers()})),g["\u0275\u0275text"](25,"Load Marker"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"td"),g["\u0275\u0275elementStart"](27,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.enterTicket()})),g["\u0275\u0275text"](28),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"tr"),g["\u0275\u0275elementStart"](30,"td"),g["\u0275\u0275elementStart"](31,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.refresh()})),g["\u0275\u0275text"](32,"Refresh"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"td"),g["\u0275\u0275elementStart"](34,"button",10),g["\u0275\u0275listener"]("click",(function(){return t.ignoreSite()})),g["\u0275\u0275text"](35,"Ignore"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"td"),g["\u0275\u0275elementStart"](37,"button",11),g["\u0275\u0275listener"]("click",(function(){return t.boundSearch()})),g["\u0275\u0275text"](38,"Load P"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](39,"button",9),g["\u0275\u0275listener"]("click",(function(){return t.showHeat()})),g["\u0275\u0275text"](40),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](41,"td"),g["\u0275\u0275elementStart"](42,"input",12),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.kmsShow=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](43,"KiloMeters "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](44,"tr"),g["\u0275\u0275elementStart"](45,"td",13),g["\u0275\u0275elementStart"](46,"div"),g["\u0275\u0275elementStart"](47,"span"),g["\u0275\u0275elementStart"](48,"span",14),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(6)})),g["\u0275\u0275text"](49,"1"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](50,"span",14),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(9)})),g["\u0275\u0275text"](51,"2"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](52,"span",14),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(12)})),g["\u0275\u0275text"](53,"3"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"span",14),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(15)})),g["\u0275\u0275text"](55,"4"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](56,"span",14),g["\u0275\u0275listener"]("click",(function(){return t.mapService.zoomMap(18)})),g["\u0275\u0275text"](57,"5"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](58,"div",15),g["\u0275\u0275elementStart"](59,"table",16),g["\u0275\u0275elementStart"](60,"thead",17),g["\u0275\u0275elementStart"](61,"tr"),g["\u0275\u0275elementStart"](62,"th",18),g["\u0275\u0275text"](63,"S.No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](64,"th",18),g["\u0275\u0275text"](65,"Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](66,"th"),g["\u0275\u0275text"](67,"Lat"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](68,"th"),g["\u0275\u0275text"](69,"Long"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](70,"th"),g["\u0275\u0275text"](71,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](72,"tbody"),g["\u0275\u0275template"](73,jo,11,4,"tr",19),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](74,"div",20),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngModel",t.position),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.routeId),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngModel",t.meterRadius),g["\u0275\u0275advance"](14),g["\u0275\u0275textInterpolate"](t.mapService.isDrawAllow?"Finish Polyline":"Create Polyline"),g["\u0275\u0275advance"](12),g["\u0275\u0275textInterpolate"](t.isHeatAble?"HH":"SH"),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.kmsShow),g["\u0275\u0275advance"](31),g["\u0275\u0275property"]("ngForOf",t.remainingList))},directives:[u.s,u.r,x.d,x.r,x.u,x.x,h.t],styles:[".row[_ngcontent-%COMP%]{width:100%}.map[_ngcontent-%COMP%]{width:90%}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.tbl[_ngcontent-%COMP%]{overflow:auto;height:350px}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 5px;width:100%;height:auto;margin:0;max-width:100%;font-size:12px}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px;margin:0;text-transform:capitalize;width:auto}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:200px!important;max-width:inherit!important}table.buffer[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:150px!important;max-width:inherit!important}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ro),Uo=r("svlw"),Bo=r("eHBT"),Go=r("6Jfz"),$o=r("TB/t");function Yo(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",7),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Wo,Ko=((Wo=function(){function e(t,n,a,r,i){o(this,e),this.activeModal=t,this.common=n,this.commonService=a,this.api=r,this.modalService=i,this.location=null,this.data=[],this.table=null,this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("refresh")}},{key:"saveLocation",value:function(){var e=this;this.data=[],this.table=null;var t="search="+this.location;this.common.loading++,this.api.get("Suggestion/getLocations?"+t).subscribe((function(t){e.common.loading--,e.data=t.data,null==e.data&&(e.data=[],e.table=null),e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{name:{title:"name",placeholder:"name"},district:{title:"district",placeholder:"district"},state:{title:"state",placeholder:"state"},latitude:{title:"latitude",placeholder:"latitude"},longitude:{title:"longitude",placeholder:"longitude"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={name:{value:n.name,action:e.Maplocation.bind(e,n)},district:{value:n.district},state:{value:n.state},latitude:{value:null==n.latitude?"-":n.latitude},longitude:{value:null==n.longitude?"-":n.longitude},action:{value:"",isHTML:!1,action:null,icons:[{class:"fa fa-trash",action:e.deleteLocation.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"ADD",value:function(){var e=this;this.common.params={title:"Location Selection"},this.modalService.open(Sn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){e.saveLocation()}))}},{key:"OpenFoAlias",value:function(){var e=this;this.modalService.open($o.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){e.saveLocation()}))}},{key:"Maplocation",value:function(e){var t={lng:e.longitude,lat:e.latitude};console.log("location:",t),this.common.params={location:t,title:"Location"},this.modalService.open(Go.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"deleteLocation",value:function(e){var t=this,n={locationId:e._id};e._id&&(this.common.params={title:"Delete Location ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("sitesOperation/deleteLocationDetails",n).subscribe((function(e){console.log("data",e),t.common.loading--,e.data[0].r_id>0?(t.common.showToast("Success"),t.saveLocation()):t.common.showToast(e.data.r_msg)}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}}]),e}()).\u0275fac=function(e){return new(e||Wo)(g["\u0275\u0275directiveInject"](p.b),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](p.r))},Wo.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Wo,selectors:[["locations"]],decls:16,vars:2,consts:[[1,"container"],[1,"row",2,"margin-bottom","10px"],[1,"col-3"],["type","text","name","location",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],[1,"btn","btn-primary","mr-3",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," Location "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"input",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.location=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",4),g["\u0275\u0275elementStart"](9,"button",5),g["\u0275\u0275listener"]("click",(function(){return t.saveLocation()})),g["\u0275\u0275text"](10,"Search Location"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"button",5),g["\u0275\u0275listener"]("click",(function(){return t.ADD()})),g["\u0275\u0275text"](12,"ADD"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"button",5),g["\u0275\u0275listener"]("click",(function(){return t.OpenFoAlias()})),g["\u0275\u0275text"](14,"Fo-Alias"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](15,Yo,1,2,"smart-table",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",t.location),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",t.data.length))},directives:[u.s,u.v,u.r,x.d,x.r,x.u,h.u,f.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:5px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span{position:absolute;display:none;padding:10px 20px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-tasks:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash{color:red}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span{position:absolute;display:none;padding:10px 30px;font-size:11px;font-weight:400;left:-24px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span:before{content:"Remove";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr .fa-trash:hover span{display:block}']}),Wo),Zo=r("Opnw"),qo=r("WBJn"),Jo=r("pc3W"),Xo=r("JU80");function Qo(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",8),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("value",n.id),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.name," ")}}var er,tr=((er=function(){function e(t,n,a){o(this,e),this.common=t,this.api=n,this.modalService=a,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.voucherSummaries=[],this.startDate=new Date,this.endDate=new Date,this.voucher=[{name:"pending",id:"1"},{name:"voucherPending",id:"2"},{name:"completed",id:"3"}],this.voucherID=1,this.getVouchersSummary(),this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-30)),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVouchersSummary()}},{key:"getVouchersSummary",value:function(){var e=this,t="startDate="+this.common.dateFormatter1(this.startDate)+"&endDate="+this.common.dateFormatter1(this.endDate)+"&statusType="+this.voucherID;this.common.loading++,this.api.get("UploadedVouchers/getUploadedVoucherSummary?"+t).subscribe((function(t){e.common.loading--,e.voucherSummaries=t.data||[],e.voucherSummaries.length?e.setTable():e.resetTable()}),(function(t){e.common.loading--,console.log("Api Error:",t),e.common.showError()}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.voucherSummaries[0]),columns:this.getTableColumns(this.voucherSummaries,this.voucherSummaries[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var r in n.generateHeadings(t))o[r]="Action"==r?{value:"",action:null,icons:n.getIcons(e)}:{value:e[r],class:"black",action:""};a.push(o)})),a}},{key:"getIcons",value:function(e){console.log("vouchar",e);var t=[];return t.push(e._vehicle_id?{class:"fas fa-user-shield",action:this.voucherTypeGet.bind(this,e)}:{class:"fa fa-user",action:this.voucherTypeGet.bind(this,e)}),e._ref_id&&e._ref_type&&t.push({class:"fa fa-list",action:this.openFreightExpense.bind(this,e)}),t}},{key:"resetTable",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"voucherTypeGet",value:function(e){var t=this,n=2;e._type_id&&(n=1),this.common.params={voucher:e,modalType:n},this.modalService.open(qo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getVouchersSummary()}))}},{key:"openFreightExpense",value:function(e){var t={id:null,refId:e._ref_id,refernceType:e._ref_type,remarks:null};"-152"==e._type_id?(this.common.params={expenseData:t},this.modalService.open(Jo.a,{size:"lg",container:"nb-layout",backdrop:"static"})):"-153"==e._type_id&&(this.common.params={revenueData:t},this.modalService.open(Xo.a,{size:"lg",container:"nb-layout",backdrop:"static"}))}}]),e}()).\u0275fac=function(e){return new(e||er)(g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](p.r))},er.\u0275cmp=g["\u0275\u0275defineComponent"]({type:er,selectors:[["vouchers-summary"]],decls:23,vars:9,consts:[[1,"row"],[1,"col-2"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"",3,"dateTimeValue","isStart","isTime","onChanged"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"data","settings"],[3,"value"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"h2"),g["\u0275\u0275text"](3,"Vouchers Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"nb-card-body"),g["\u0275\u0275elementStart"](5,"div",0),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"label"),g["\u0275\u0275text"](8,"Start Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",1),g["\u0275\u0275elementStart"](10,"uj-date-time-picker",2),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",1),g["\u0275\u0275elementStart"](12,"label"),g["\u0275\u0275text"](13,"End Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",1),g["\u0275\u0275elementStart"](15,"uj-date-time-picker",3),g["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",1),g["\u0275\u0275elementStart"](17,"select",4),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucherID=e})),g["\u0275\u0275template"](18,Qo,2,2,"option",5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",1),g["\u0275\u0275elementStart"](20,"button",6),g["\u0275\u0275listener"]("click",(function(){return t.getVouchersSummary()})),g["\u0275\u0275text"](21,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](22,"smart-table",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1)("isTime",!1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.voucherID),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.voucher),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[u.s,u.v,u.r,rt.a,x.D,x.r,x.u,h.t,f.a,x.w,x.G],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{margin-right:10px;font-size:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user{color:#04a9f5;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span{position:absolute;display:none;padding:10px 45px;font-size:11px;font-weight:400;left:-40px;top:-25px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span:before{content:"Apply voucher";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield{color:#000;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span{position:absolute;display:none;padding:10px 45px;font-size:11px;font-weight:400;left:-40px;top:-25px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span:before{content:"voucher";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr td:last-child .fa-user-shield:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr .fa-list{color:red;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span{position:absolute;display:none;padding:10px 20px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr .fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tr .fa-list:hover span{display:block}']}),er),nr=r("D0ZN"),ar=r("tEc5"),or=r("uk+R"),rr=r("lkmy");function ir(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",13),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().addAndEdit("Add",null)})),g["\u0275\u0275text"](1,"Add"),g["\u0275\u0275elementEnd"]()}}function lr(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",14),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var cr,sr=((cr=function(){function e(t,n,a,r,i,l){o(this,e),this.activeModal=t,this.common=n,this.commonService=a,this.api=r,this.user=i,this.modalService=l,this.title="",this.showTable=!1,this.views=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.templateType="LR_PRT",this.isFoid=!1,this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getUserViews(!1)}},{key:"getUserViews",value:function(e){var t=this;this.isFoid=e;var n="type="+this.templateType+"&isFoid="+this.isFoid;this.common.loading++,this.api.get("userTemplate/view?"+n).subscribe((function(e){t.common.loading--,console.log("res:",e),t.views=e.data||[],t.views.length?t.setTable():t.resetTable()}),(function(e){t.common.loading--,console.log(e)}))}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"setTable",value:function(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}},{key:"generateHeadings",value:function(){var e={};for(var t in this.views[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.views.map((function(n){var a={};for(var o in e.generateHeadings())a[o]="Action"==o?{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}:{value:n[o],class:"black",action:""};t.push(a)})),t}},{key:"actionIcons",value:function(e){var t=[{class:"far fa-eye",action:this.templatePreview.bind(this,"Preview",e)},{class:"fas fa-user",action:this.assign.bind(this,"Edit",e)}];return this.user.permission.edit&&t.push({class:"far fa-edit",action:this.addAndEdit.bind(this,"Edit",e)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteUserTemplate.bind(this,e)}),t}},{key:"addAndEdit",value:function(e,t){var n=this;this.common.params={title:e,userTemplate:t},this.modalService.open(nr.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(t){"Add"==e&&n.getUserViews(n.isFoid)}))}},{key:"templatePreview",value:function(e,t){this.common.params={previewData:{title:e,previewId:t._id,refId:t._lrId,refType:t._ref_type}},this.modalService.open(or.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){}))}},{key:"templateDevView",value:function(e,t){this.common.params={title:e,userTemplate:t},this.modalService.open(rr.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){}))}},{key:"deleteUserTemplate",value:function(e){var t=this;console.log("row:",e);var n={rowId:e._id};e._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("UserTemplate/delete",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),t.getUserViews(t.isFoid)}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"assign",value:function(e,t){var n;console.log("view",t),n=t?{type:t.Type,refType:t._ref_type,name:t.Name,id:t._id}:{},this.common.params={title:e,preAssignUserTemplate:n},this.modalService.open(ar.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||cr)(g["\u0275\u0275directiveInject"](p.b),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},cr.\u0275cmp=g["\u0275\u0275defineComponent"]({type:cr,selectors:[["user-templates"]],decls:29,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-2"],["name","templateType",1,"form-control",3,"ngModel","ngModelChange"],["value","LR_PRT"],["value","FRINV"],["value","DSPOD_PRT"],["value","ALL"],[1,"btn","btn-primary",3,"click"],[1,"col-2","text-right"],["class","btn btn-primary mr-3",3,"click",4,"ngIf"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"click"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2," User Template "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"nb-card-body"),g["\u0275\u0275elementStart"](4,"div",0),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"select",3),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.templateType=e})),g["\u0275\u0275elementStart"](8,"option",4),g["\u0275\u0275text"](9,"Lr"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"option",5),g["\u0275\u0275text"](11,"Invoice"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"option",6),g["\u0275\u0275text"](13,"Print Distpatch Order"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"option",7),g["\u0275\u0275text"](15,"All"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",2),g["\u0275\u0275elementStart"](17,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.getUserViews(!1)})),g["\u0275\u0275text"](18,"Get All Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",2),g["\u0275\u0275elementStart"](20,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.getUserViews(!0)})),g["\u0275\u0275text"](21,"Get Fo Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"div",2),g["\u0275\u0275elementStart"](23,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.getUserViews(null)})),g["\u0275\u0275text"](24,"Get Unassign Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",9),g["\u0275\u0275template"](26,ir,2,0,"button",10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",11),g["\u0275\u0275template"](28,lr,1,2,"smart-table",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngModel",t.templateType),g["\u0275\u0275advance"](19),g["\u0275\u0275property"]("ngIf",t.user.permission.add),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.views.length))},directives:[u.s,u.v,u.r,x.D,x.r,x.u,x.w,x.G,h.u,f.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td:last-child i{width:30px;text-align:center}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span{position:absolute;display:none;padding:10px 34px;font-weight:400;font-size:11px;left:-32px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span:before{content:"Preview";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user{color:#006400;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:before{content:"Assign";display:block;position:absolute;top:0;left:0;background-color:#006400;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #006400;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child i.fa-user:hover span{display:block}']}),cr),dr=r("4zcd"),mr=r("Wvez"),gr=r("1MnW");function pr(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"option",14),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275property"]("ngValue",n),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"]("",n.name," ")}}function ur(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275pipe"](9,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](a+1),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",n.brand,""),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.modal),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind2"](9,4,n.adddate,"dd-MMM-yyyy hh:mm a"))}}function hr(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",15),g["\u0275\u0275text"](1," No Data available ! "),g["\u0275\u0275elementEnd"]())}var fr,br=((fr=function(){function e(t,n,a){o(this,e),this.api=t,this.common=n,this.modalService=a,this.modals=[],this.items=[],this.selectedModal={id:0,name:""},this.common.refresh=this.refresh.bind(this),this.getModals()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getModals()}},{key:"getModals",value:function(){var e=this;console.log("params ","typeId=-2"),this.api.get("Stock/getModals?typeId=-2").subscribe((function(t){e.modals=t.data,console.log("getbatteryModals",e.selectedModal.id=e.modals[0].name,e.modals)}),(function(t){console.error(t),e.common.showError()}))}},{key:"modalSelected",value:function(){console.log("selectedModal ",this.selectedModal,this.selectedModal.id,this.selectedModal.name),this.getStockItems()}},{key:"getStockItems",value:function(){var e=this,t="typeId=-2&stockSubTypeId="+this.selectedModal.id;console.log("params ",t),this.api.get("Stock/getStockItems?"+t).subscribe((function(t){e.items=t.data,console.log("getItems",e.items)}),(function(t){console.error(t),e.common.showError()}))}},{key:"openStockItemModal",value:function(e){var t=this;console.log("stockitem",e),this.common.params=e||{stocktype_name:"battery",stocktype_id:-2,stoctsubtypename:this.selectedModal.name,stocksubtype_id:this.selectedModal.id},console.log("this.common.params",this.common.params),this.modalService.open(mr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(n){if(n.response){if(e)return void t.updateStockItem(e.id,n.stockitem);t.addStockItem(n.stockItem)}}))}},{key:"addStockItem",value:function(e){var t=this;console.log(e);var n={name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: ",n),this.common.loading++,this.api.post("Stock/InsertStockItem",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.getStockItems()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateStockItem",value:function(e,t){var n=this;console.log(t);var a={name:t.name,code:t.code,stocksubtypeid:t.stockSubType.id,sales:t.sales,purchase:t.purchase,minlimit:t.minlimit,maxlimit:t.maxlimit,isactive:t.isactive,inventary:t.inventary,stockunit:t.unit.id,stockItemid:e};console.log("paramsans: ",a),this.common.loading++,this.api.post("Stock/UpdateStockItem",a).subscribe((function(e){n.common.loading--,console.log("res: ",e),n.getStockItems()}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}},{key:"openStockSubTypeModal",value:function(e){var t=this;this.common.params=e||{stocktypename:"battery",stocktype_id:-2},this.modalService.open(gr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){if(n.response){if(e)return void t.updateStockSubType(e.id,n.stockSubType);t.addStockSubType(n.stockSubType)}}))}},{key:"addStockSubType",value:function(e){var t=this,n={name:e.name,code:e.code,stockid:e.stockType.id};this.common.loading++,this.api.post("Stock/InsertStocksubType",n).subscribe((function(e){t.common.loading--,console.log("res: ",e);var n=e.data[0].save_stocksubtype;""==n?(t.common.showToast(" Stock SubType Add"),t.getModals()):t.common.showToast(n)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError()}))}},{key:"updateStockSubType",value:function(e,t){var n=this;console.log("test"),console.log(t);var a={name:t.name,code:t.code,stockid:t.stockType.id,id:e};this.common.loading++,this.api.post("Stock/updateStocksubType",a).subscribe((function(e){n.common.loading--,console.log("res: ",e);var t=e.data[0].save_stocksubtype;n.common.showToast(""==t?" Stock SubType Update":t)}),(function(e){n.common.loading--,console.log("Error: ",e),n.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||fr)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](p.r))},fr.\u0275cmp=g["\u0275\u0275defineComponent"]({type:fr,selectors:[["battery-modals"]],decls:34,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[1,"col-sm-1"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"col-sm-2","text-right"],[1,"col-sm-2"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[2,"padding","10px 15px"],[1,"table","table-bordered","table-hover","mb-0"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert-danger mt-3",4,"ngIf"],[3,"ngValue"],[1,"no-data","alert-danger","mt-3"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Battery Models"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",2),g["\u0275\u0275elementStart"](7,"button",3),g["\u0275\u0275listener"]("click",(function(){return t.openStockSubTypeModal()})),g["\u0275\u0275text"](8,"Add Brand"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",4),g["\u0275\u0275elementStart"](10,"span"),g["\u0275\u0275text"](11," Brand Name : "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",5),g["\u0275\u0275elementStart"](13,"select",6),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedModal=e}))("change",(function(){return t.modalSelected()})),g["\u0275\u0275template"](14,pr,2,2,"option",7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",5),g["\u0275\u0275elementStart"](16,"button",8),g["\u0275\u0275listener"]("click",(function(){return t.openStockItemModal()})),g["\u0275\u0275text"](17,"Add Modal"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"nb-card-body",9),g["\u0275\u0275elementStart"](19,"div"),g["\u0275\u0275elementStart"](20,"table",10),g["\u0275\u0275elementStart"](21,"thead",11),g["\u0275\u0275elementStart"](22,"tr"),g["\u0275\u0275elementStart"](23,"th"),g["\u0275\u0275text"](24,"# "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"th"),g["\u0275\u0275text"](26,"Code"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"th"),g["\u0275\u0275text"](28,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"th"),g["\u0275\u0275text"](30,"Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](31,"tbody"),g["\u0275\u0275template"](32,ur,10,7,"tr",12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](33,hr,2,0,"div",13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](13),g["\u0275\u0275property"]("ngModel",t.selectedModal),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",t.modals),g["\u0275\u0275advance"](18),g["\u0275\u0275property"]("ngForOf",t.items),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==t.modals.length))},directives:[u.s,u.v,x.D,x.r,x.u,h.t,u.r,h.u,x.w,x.G],pipes:[h.f],styles:[""]}),fr),vr=r("mdFJ"),Sr=r("baNc"),xr=r("g/MX");function yr(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",3),g["\u0275\u0275elementStart"](1,"div"),g["\u0275\u0275element"](2,"img",4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"div"),g["\u0275\u0275elementStart"](4,"input",5),g["\u0275\u0275listener"]("ngModelChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.txt=e}))("keyup.enter",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return g["\u0275\u0275nextContext"]().captchaValidator(e,a)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"div"),g["\u0275\u0275elementStart"](6,"button",6),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return g["\u0275\u0275nextContext"]().captchaValidator(e,a)})),g["\u0275\u0275text"](7,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;g["\u0275\u0275property"]("hidden",0!==o),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("src",a.url,g["\u0275\u0275sanitizeUrl"]),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("name","captcha-"+o)("id","captcha-"+o)("ngModel",a.txt)}}var Cr,Mr=((Cr=function(){function e(t,n){o(this,e),this.api=t,this.common=n,this.count=0,this.captchas=[],this.common.refresh=this.refresh.bind(this),this.getCaptchas()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"refresh",value:function(){this.getCaptchas()}},{key:"getCaptchas",value:function(){var e=this;this.api.get("Captchas/getPendingCaptchasInfo").subscribe((function(t){console.log("Res:",t),e.captchas=t.data.map((function(e){return e.txt="",e})),setTimeout((function(){e.captchas.length&&document.getElementById("captcha-0").focus()}),300)}),(function(t){console.log("Error: ",t),e.common.showError()}))}},{key:"captchaValidator",value:function(e,t){e.txt?this.sendCaptchaTxt(e,t):this.common.showError("Please enter valid captcha")}},{key:"sendCaptchaTxt",value:function(e,t){var n=this;console.log("index:",t),this.captchas.splice(t,1),this.api.post("Captchas/updateCaptcha",{text:e.txt,captchaId:e.id}).subscribe((function(e){console.log("Res: ",e),e.success&&n.count++,n.getCaptchas()}),(function(e){console.log("Error: ",e)}))}}]),e}()).\u0275fac=function(e){return new(e||Cr)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a))},Cr.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Cr,selectors:[["captcha"]],decls:8,vars:2,consts:[[2,"min-height","580px"],[1,"container"],["class","captcha-container",3,"hidden",4,"ngFor","ngForOf"],[1,"captcha-container",3,"hidden"],["alt","Captcha",3,"src"],["type","text","placeholder","Enter Captcha","autofocus","",1,"form-control",3,"name","id","ngModel","ngModelChange","keyup.enter"],["type","submit","name","submitCaptcha",1,"btn","btn-primary","m-0",3,"click"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275text"](2,"Captcha : "),g["\u0275\u0275elementStart"](3,"span"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"nb-card-body",0),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275template"](7,yr,8,5,"div",2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate1"]("0",t.count,""),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngForOf",t.captchas))},directives:[u.s,u.v,u.r,h.t,x.d,x.r,x.u],styles:[".btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff}.captcha-container[_ngcontent-%COMP%]{width:450px;margin:auto;padding:10px 25px;border:2px solid #e2e2e2;text-align:center}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:20px!important;text-align:center!important}.captcha-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:20px;height:50px;width:100%}"]}),Cr),kr=r("iJpb");function Er(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td"),g["\u0275\u0275text"](14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"td"),g["\u0275\u0275text"](16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"td"),g["\u0275\u0275text"](18),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.vehid),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.addtime),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.transtime),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.remark),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.amount_credit),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.amount_debit),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.entry_type),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.balance),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n.txn_id)}}var _r,wr=function(){return["name","mobileno"]},Pr=((_r=function(){function e(t,n,a,r,i){o(this,e),this.api=t,this.pdfService=n,this.common=a,this.user=r,this.modalService=i,this.dates={currentdate:this.common.dateFormatter1(new Date),start:null,end:this.common.dateFormatter1(new Date)},this.fo={id:null,name:null,mobileNo:null},this.result=[],this.data=[],this.openingBalance=0,this.closingBalance=0,this.creditAmount=0,this.debitAmount=0,this.vehid=this.user._details.vehid,this.mobileno=this.user._details.mobileno,this.foAgents=[],this.typedKey="",this.common.refresh=this.refresh.bind(this),this.dates.start=this.common.dateFormatter1(new Date((new Date).setDate((new Date).getDate()-15)))}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getaddTimeFinancialTollReport()}},{key:"calculateAmount",value:function(e){var t=e[0].balance,n=e[0].amount;this.openingBalance="usage"!=e[0].entry_type.toLowerCase?parseInt(t)+n:parseInt(t)-n,this.closingBalance=e[e.length-1].balance}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"card usage"},this.modalService.open(Q.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){t.dates[e]=t.common.dateFormatter(n.date).split(" ")[0],console.log("Date:",t.dates)}))}},{key:"getaddTimeFinancialTollReport",value:function(){var e=this;if(this.openingBalance=0,this.closingBalance=0,this.data=[],this.fo.mobileNo){var t="&startDate="+this.dates.start+"&endDate="+this.dates.end+"&mobileno="+this.fo.mobileNo;this.common.loading++,this.api.walle8Get("FinancialAccountSummary/getFinancialAccountSummaryAddTime.json?"+t).subscribe((function(t){e.common.loading--,console.log("Res:",t),t&&t.data&&t.data.length>0?(e.result=t.data,e.data=t.data,e.calculateAmount(e.data)):e.common.showError("data not found")}),(function(t){e.common.loading--,console.log(t)}))}else alert("Please select customer")}},{key:"selectFo",value:function(e){this.fo.id=e.foid,this.fo.name=e.name,this.fo.mobileNo=e.mobileno}},{key:"getFoAgents",value:function(){var e=this,t=document.getElementById("agentFo").value;console.log("searvh ",t),this.api.walle8Get("Suggestion/getFoAgents.json?search="+t).subscribe((function(t){console.log("res",t),e.foAgents=t.data,console.log("-0-0-0",e.foAgents)}),(function(e){console.log(e)}))}},{key:"filterData",value:function(e){var t=this;console.log("typedKey",this.typedKey),this.data=this.result.filter((function(e){return!t.typedKey||(console.log("ele",e),!!e.vehid&&e.vehid.toLowerCase().includes(t.typedKey))})),console.log("data",this.data)}}]),e}()).\u0275fac=function(e){return new(e||_r)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](kr.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},_r.\u0275cmp=g["\u0275\u0275defineComponent"]({type:_r,selectors:[["financial-account-summary"]],decls:135,vars:21,consts:[[1,"row","doNotPrint"],[1,"col-2"],["placeholder","Enter Customer","seperator","-","inputId","agentFo",2,"width","60%",3,"data","display","onSelected","onChange"],["type","text","autocomplete","off","placeholder","Start Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","End Date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-3"],["type","text","autocomplete","off","placeholder","Enter Vehicle",1,"form-control",3,"ngModel","keyup","ngModelChange"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["id","financialaccount"],[2,"height","40px"],[1,"row"],[1,"col-6"],["src","http://elogist.in/transtruck/admindashboard/assets/images/left-logo.png",2,"width","150px","height","120px"],[1,"row",2,"margin-top","10px"],[1,"table","table-bordered"],["colspan","2",1,"thead"],[1,"col-12"],["colspan","4",1,"thead"],["colspan","9",1,"thead"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card"),g["\u0275\u0275elementStart"](1,"nb-card-body"),g["\u0275\u0275elementStart"](2,"div",0),g["\u0275\u0275elementStart"](3,"div",1),g["\u0275\u0275elementStart"](4,"auto-suggestion",2),g["\u0275\u0275listener"]("onSelected",(function(e){return t.selectFo(e)}))("onChange",(function(){return t.getFoAgents()})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"div",1),g["\u0275\u0275elementStart"](6,"input",3),g["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),g["\u0275\u0275pipe"](7,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"div",1),g["\u0275\u0275elementStart"](9,"input",4),g["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),g["\u0275\u0275pipe"](10,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",1),g["\u0275\u0275elementStart"](12,"button",5),g["\u0275\u0275listener"]("click",(function(){return t.getaddTimeFinancialTollReport()})),g["\u0275\u0275text"](13,"Submit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",6),g["\u0275\u0275elementStart"](15,"input",7),g["\u0275\u0275listener"]("keyup",(function(e){return t.filterData(e)}))("ngModelChange",(function(e){return t.typedKey=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",8),g["\u0275\u0275elementStart"](17,"span",9),g["\u0275\u0275listener"]("click",(function(){return t.common.downloadPdf("financialaccount")})),g["\u0275\u0275element"](18,"i",10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",11),g["\u0275\u0275element"](20,"div",12),g["\u0275\u0275elementStart"](21,"div",13),g["\u0275\u0275elementStart"](22,"div",14),g["\u0275\u0275elementStart"](23,"b"),g["\u0275\u0275text"](24,"eLogist Solutions Pvt. Ltd."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](25,"br"),g["\u0275\u0275text"](26," Address: 605-21, Jaipur Electronic Market,"),g["\u0275\u0275element"](27,"br"),g["\u0275\u0275text"](28," Riddhi Siddhi Circle, Gopalpura Bypass, Jaipur, Rajasthan - 302018"),g["\u0275\u0275element"](29,"br"),g["\u0275\u0275text"](30," Support: 8081604455"),g["\u0275\u0275element"](31,"br"),g["\u0275\u0275text"](32," Website: www.walle8.com "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](33,"div",6),g["\u0275\u0275elementStart"](34,"div",6),g["\u0275\u0275element"](35,"img",15),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"div",16),g["\u0275\u0275elementStart"](37,"div",14),g["\u0275\u0275elementStart"](38,"table",17),g["\u0275\u0275elementStart"](39,"tr"),g["\u0275\u0275elementStart"](40,"th",18),g["\u0275\u0275text"](41,"Provider Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](42,"tr"),g["\u0275\u0275elementStart"](43,"td"),g["\u0275\u0275text"](44,"Provider Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"td"),g["\u0275\u0275text"](46,"eLogist"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](47,"tr"),g["\u0275\u0275elementStart"](48,"td"),g["\u0275\u0275text"](49,"Provider Address"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](50,"td"),g["\u0275\u0275text"](51,"Jaipur"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](52,"tr"),g["\u0275\u0275elementStart"](53,"td"),g["\u0275\u0275text"](54,"GSTIN"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](55,"td"),g["\u0275\u0275text"](56,"08AAECE3933F1ZS"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](57,"tr"),g["\u0275\u0275elementStart"](58,"td"),g["\u0275\u0275text"](59,"Place Of Supply"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](60,"td"),g["\u0275\u0275text"](61,"Rajasthan"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](62,"div",14),g["\u0275\u0275elementStart"](63,"table",17),g["\u0275\u0275elementStart"](64,"tr"),g["\u0275\u0275elementStart"](65,"th",18),g["\u0275\u0275text"](66,"Customer Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](67,"tr"),g["\u0275\u0275elementStart"](68,"td"),g["\u0275\u0275text"](69,"Customer Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](70,"td"),g["\u0275\u0275text"](71),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](72,"tr"),g["\u0275\u0275elementStart"](73,"td"),g["\u0275\u0275text"](74,"Mobile No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](75,"td"),g["\u0275\u0275text"](76),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](77,"tr"),g["\u0275\u0275elementStart"](78,"td"),g["\u0275\u0275text"](79,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](80,"td"),g["\u0275\u0275text"](81),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](82,"tr"),g["\u0275\u0275elementStart"](83,"td"),g["\u0275\u0275text"](84,"Statement Date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](85,"td"),g["\u0275\u0275text"](86),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](87,"tr"),g["\u0275\u0275elementStart"](88,"td"),g["\u0275\u0275text"](89,"Statement Period"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](90,"td"),g["\u0275\u0275text"](91),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](92,"div",13),g["\u0275\u0275elementStart"](93,"div",19),g["\u0275\u0275elementStart"](94,"table",17),g["\u0275\u0275elementStart"](95,"tr"),g["\u0275\u0275elementStart"](96,"th",20),g["\u0275\u0275text"](97,"Account Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](98,"tr"),g["\u0275\u0275elementStart"](99,"td"),g["\u0275\u0275text"](100,"Opening Balance(Rs.)"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](101,"td"),g["\u0275\u0275text"](102,"Closing Balance(Rs.)"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](103,"tr"),g["\u0275\u0275elementStart"](104,"td"),g["\u0275\u0275text"](105),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](106,"td"),g["\u0275\u0275text"](107),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](108,"div",13),g["\u0275\u0275elementStart"](109,"div",19),g["\u0275\u0275elementStart"](110,"table",17),g["\u0275\u0275elementStart"](111,"tr"),g["\u0275\u0275elementStart"](112,"th",21),g["\u0275\u0275text"](113,"Transaction Details"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](114,"tr"),g["\u0275\u0275elementStart"](115,"th"),g["\u0275\u0275text"](116,"Vehicle"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](117,"th"),g["\u0275\u0275text"](118,"Accounting Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](119,"th"),g["\u0275\u0275text"](120,"Transaction Time"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](121,"th"),g["\u0275\u0275text"](122,"Toll Plaza"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](123,"th"),g["\u0275\u0275text"](124,"Amount(CR)"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](125,"th"),g["\u0275\u0275text"](126,"Amount(DR)"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](127,"th"),g["\u0275\u0275text"](128,"Transaction Type"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](129,"th"),g["\u0275\u0275text"](130,"Balance"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](131,"th"),g["\u0275\u0275text"](132,"Transaction Id"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](133,"tbody"),g["\u0275\u0275template"](134,Er,19,9,"tr",22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("data",t.foAgents)("display",g["\u0275\u0275pureFunction0"](20,wr)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](7,14,t.dates.start,"dd MMM yyyy")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind2"](10,17,t.dates.end,"dd MMM yyyy")),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngModel",t.typedKey),g["\u0275\u0275advance"](56),g["\u0275\u0275textInterpolate"](t.fo.id),g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate"](t.fo.mobileNo),g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate"](t.fo.name),g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate"](t.dates.currentdate),g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate2"]("",t.dates.start," - ",t.dates.end,""),g["\u0275\u0275advance"](14),g["\u0275\u0275textInterpolate"](t.openingBalance),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](t.closingBalance),g["\u0275\u0275advance"](27),g["\u0275\u0275property"]("ngForOf",t.data))},directives:[u.s,u.r,y.a,x.d,x.r,x.u,h.t],pipes:[h.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}@media print{.doNotPrint[_ngcontent-%COMP%]{display:none!important}}"]}),_r),Or=r("JyC3");function Dr(e,t){if(1&e&&g["\u0275\u0275element"](0,"smart-table",19),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ir,Tr,Ar,Fr,Lr,Vr=[{path:"",component:$,children:[{path:"dashboard",component:Y.a,canActivate:[Ye.b]},{path:"load-intelligence",loadChildren:function(){return Promise.resolve().then(r.bind(null,"u1rS")).then((function(e){return e.LoadIntelligenceModule}))},canActivate:[Ye.b]},{path:"beehive",component:bn.a,canActivate:[Ye.b]},{path:"vehiclestatuschange",component:Y.a,canActivate:[Ye.b]},{path:"tripverification",component:(Tr=function(){function e(t,n,a,r,i){var l;o(this,e),this.datePipe=t,this.api=n,this.common=a,this.user=r,this.modalService=i,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.status=0,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},l=new Date,this.endDate=new Date(l),this.startDate=new Date(l.setDate(l.getDate()-5)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(),this.common.refresh=this.refresh.bind(this)}return i(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleTrips()}},{key:"getVehicleTrips",value:function(){var e=this;this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",t,n);var a="vehicleId="+this.vehicleId+"&startDate="+t+"&endDate="+n+"&status="+this.status;console.log("params",a),++this.common.loading,this.api.get("TripsOperation/getTrips?"+a).subscribe((function(t){--e.common.loading,console.log("Res:",t.data),e.vehicleTrips=t.data,null!=e.vehicleTrips?(console.log("vehicleTrips",e.vehicleTrips),e.gettingTableHeader(e.vehicleTrips)):e.common.showToast("No Record Found !!")}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"gettingTableHeader",value:function(e){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=e[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);var a={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=a}this.table.data.headings.km={title:"KM",placeholder:"KM"},this.table.data.headings.googlekm={title:"Google KM",placeholder:"Google KM"},this.table.data.headings.hiskm={title:"Historic KM (Avg)",placeholder:"Historic KM (Avg)"},-2==this.status&&(this.table.data.headings.status={title:"Status",placeholder:"Status"},this.table.data.headings.remark={title:"Remark",placeholder:"Remark"}),this.table.data.headings.stampedby={title:"Stamped By",placeholder:"Stamped By"},this.table.data.headings.action={title:"Action",placeholder:"Action"},this.table.data.columns=this.getTableColumns(),this.table.data.columns=this.getTableColumns()}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleTrips.length;t++){this.valobj={},this.valobj={class:"xyz"};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[t]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[t][this.headings[n]],class:"black",action:""},this.valobj.km={value:this.vehicleTrips[t]._km,class:"blue",action:this.openTripKmRepair.bind(this,this.vehicleTrips[t])},this.valobj.googlekm={value:this.vehicleTrips[t]._googlekm,isHTML:!0,action:null},this.valobj.hiskm={value:this.vehicleTrips[t]._hiskm,isHTML:!0,action:null},this.valobj.remark={value:this.vehicleTrips[t]._remark,isHTML:!0,action:null},this.valobj.status={value:this.vehicleTrips[t]._statusname,isHTML:!0,action:null},this.valobj.stampedby={value:this.vehicleTrips[t]._actionby,isHTML:!0,action:null},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[t],t)};this.vehicleTrips[t]._class&&(console.log("seleed"),this.valobj.class="selected"),e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"openTripKmRepair",value:function(e){e._km?(this.common.params={tripId:e["Trip Id"]},console.log("tripData",this.common.params),this.modalService.open(Or.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))):this.common.showError("No Data")}},{key:"actionIcons",value:function(e,t){return[{class:"fa fa-chart-pie change-status",action:this.openChangeStatusModal.bind(this,e,t)}]}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}},{key:"openChangeStatusModal",value:function(e,t){var n,a,o;this.vehicleTrips[t]._class="selected",console.log("this.VehicleStatusAlerts[index]['_class']",this.vehicleTrips[t]),this.gettingTableHeader(this.vehicleTrips),console.log("trip====",e),n=new Date,a=new Date(n.setDate(n.getDate()-2)),o=this.common.dateFormatter(a);var r=this.common.dateFormatter(o),i=this.common.dateFormatter(new Date),l={vehicle_id:e._vid,regno:e.Vehicle,suggest:11,latch_time:e._startdate||r,tTime:e._enddate||i,tripId:e._tripid,ref_page:"tv",verifystatus:e._statustype,tripName:this.common.getJSONTripStatusHTML(e)};console.log("VehicleStatusData",l),this.common.params=l,this.modalService.open(W.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}}]),e}(),Tr.\u0275fac=function(e){return new(e||Tr)(g["\u0275\u0275directiveInject"](h.f),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Tr.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Tr,selectors:[["trip-verification"]],decls:32,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[3,"ngModel","ngModelChange"],["value","0"],["value","-2"],["value","-1"],["value","1"],["value","2"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Trips Verification"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"nb-card-body"),g["\u0275\u0275elementStart"](7,"div",3),g["\u0275\u0275elementStart"](8,"div",4),g["\u0275\u0275elementStart"](9,"div",5),g["\u0275\u0275elementStart"](10,"auto-suggestion",6),g["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",7),g["\u0275\u0275elementStart"](12,"uj-date-time-picker",8),g["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",7),g["\u0275\u0275elementStart"](14,"uj-date-time-picker",9),g["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",7),g["\u0275\u0275elementStart"](16,"select",10),g["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),g["\u0275\u0275elementStart"](17,"option",11),g["\u0275\u0275text"](18,"Pending"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"option",12),g["\u0275\u0275text"](20,"Objections"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"option",13),g["\u0275\u0275text"](22,"Can't Say"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](23,"option",14),g["\u0275\u0275text"](24,"Highly Confident"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"option",15),g["\u0275\u0275text"](26,"Stamped"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",16),g["\u0275\u0275elementStart"](28,"button",17),g["\u0275\u0275listener"]("click",(function(){return t.getVehicleTrips()})),g["\u0275\u0275text"](29,"OK"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](30,Dr,1,2,"smart-table",18),g["\u0275\u0275element"](31,"br"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](10),g["\u0275\u0275property"]("preSelected",null),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("dateTimeValue",t.startDate),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngModel",t.status),g["\u0275\u0275advance"](14),g["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[u.s,u.v,u.r,y.a,rt.a,x.D,x.r,x.u,x.w,x.G,h.u,f.a],styles:['[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .selected{background-color:#ff0!important}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}']}),Tr),canActivate:[Ye.b]},{path:"vscticketaudit",component:gt},{path:"issue-alerts",component:X,canActivate:[Ye.b]},{path:"escalation-matrix",component:S,canActivate:[Ye.b]},{path:"generate-lr",component:Ie.a},{path:"group-managements",component:F,canActivate:[Ye.b]},{path:"ticket-properties",component:j,canActivate:[Ye.b]},{path:"ticket-subscribe",component:fn,canActivate:[Ye.b]},{path:"lorry-receipt-details",component:De,canActivate:[Ye.b]},{path:"site-fencing",component:Ne,canActivate:[Ye.b]},{path:"transport-area",component:je,canActivate:[Ye.b]},{path:"diagnostics",component:ae,canActivate:[Ye.b]},{path:"site-details",component:Be,canActivate:[Ye.b]},{path:"pending-documents",component:Ge.a,canActivate:[Ye.b]},{path:"user-preferences",component:ot,canActivate:[Ye.b],canDeactivate:[Ye.a]},{path:"alert-related-issue",component:ft,canActivate:[Ye.b]},{path:"gps-supplier-mapping",component:vt,canActivate:[Ye.b]},{path:"vehicles-view",component:Ct,canActivate:[Ye.b]},{path:"company-details",component:_t,canActivate:[Ye.b]},{path:"transport-agents",component:Dt,canActivate:[Ye.b]},{path:"driver-list",component:It.a,canActivate:[Ye.b]},{path:"vehicle-gps-trail",component:Ft,canActivate:[Ye.b]},{path:"sub-sites",component:Ut,canActivate:[Ye.b]},{path:"vehicle-distance",component:qt.a,canActivate:[Ye.b]},{path:"activity-summary",component:Yt,canActivate:[Ye.b]},{path:"vehicle-gps-detail",component:Zt},{path:"trip-status-feedback-logs",component:ln,canActivate:[Ye.b]},{path:"fuel-fillings",component:Lt.a,canActivate:[Ye.b]},{path:"fo-fs-mapping",component:Co,canActivate:[Ye.b]},{path:"fuel-rules",component:Ln,canActivate:[Ye.b]},{path:"pump-station-area",component:Vn,canActivate:[Ye.b]},{path:"trip-site-rule",component:nn,canActivate:[Ye.b]},{path:"fuel-average-analysis",component:cn.a,canActivate:[Ye.b]},{path:"fuel-average-issues",component:so,canActivate:[Ye.b]},{path:"consolidate-fuel-average",component:mo.a,canActivate:[Ye.b]},{path:"fuel-analysis",component:ho,canActivate:[Ye.b]},{path:"remaining-fuel",component:sn.a,canActivate:[Ye.b]},{path:"add-customer",component:On,canActivate:[Ye.b]},{path:"toll-transaction-summary",component:Rn,canActivate:[Ye.b]},{path:"manual-toll-transaction-summary",component:Hn,canActivate:[Ye.b]},{path:"vehiclewise-tolltransaction",component:Gn,canActivate:[Ye.b]},{path:"pending-vehicle",component:Wa,canActivate:[Ye.b]},{path:"halt-density",component:Xa,canActivate:[Ye.b]},{path:"placement-site-rule",component:ao,canActivate:[Ye.b]},{path:"trip-analysis",component:Mo},{path:"vehicles",component:ko.a,canActivate:[Ye.b]},{path:"lr-diagnostics",component:Do,canActivate:[Ye.b]},{path:"vsc-diagnosis",component:Lo,canActivate:[Ye.b]},{path:"view-modal-service",component:Vo.a,canActivate:[Ye.b]},{path:"view-sub-modal-service",component:zo.a,canActivate:[Ye.b]},{path:"via-routes",component:No.a,canActivate:[Ye.b]},{path:"buffer-polyline",component:Ho,canActivate:[Ye.b]},{path:"pod-dashboard",component:Uo.a,canActivate:[Ye.b]},{path:"nearby-pods",component:Bo.a,canActivate:[Ye.b]},{path:"locations",component:Ko,canActivate:[Ye.b]},{path:"web-activity-summary",component:Zo.a,canActivate:[Ye.b]},{path:"vouchers-summary",component:tr,canActivate:[Ye.b]},{path:"fuel-mileage-with-odo",component:dr.a,canActivate:[Ye.b]},{path:"user-templates",component:sr,canActivate:[Ye.b]},{path:"fo-fuel-average",component:vr.a,canActivate:[Ye.b]},{path:"battery-modals",component:br,canActivate:[Ye.b]},{path:"captcha",component:Mr,canActivate:[Ye.b]},{path:"challan-payment-request",component:Sr.a,canActivate:[Ye.b]},{path:"mv-gps-api-req",component:xr.a,canActivate:[Ye.b]},{path:"financial-account-summary",component:Pr,canActivate:[Ye.b]},{path:"vehdocmismatch",component:(Ir=function(){function e(t,n,a,r){o(this,e),this.api=t,this.common=n,this.user=a,this.modalService=r,this.vehdocmismatch=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.vehDocMismatchSummary()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"vehDocMismatchSummary",value:function(){var e=this;++this.common.loading,this.api.get("Documents/vahenDocumentMismatchSummary").subscribe((function(t){--e.common.loading,console.log("Res:",t.data),e.vehdocmismatch=t.data,e.vehdocmismatch.length?e.setTable():e.resetTable()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"setTable",value:function(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"generateHeadings",value:function(){var e={};for(var t in this.vehdocmismatch[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.vehdocmismatch.map((function(n){var a={};for(var o in e.generateHeadings())a[o]="Action"==o?{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}:{value:n[o],class:"black",action:""};t.push(a)})),t}},{key:"actionIcons",value:function(e){return[{txt:"Reject EL",class:"txtstyle",action:this.rejectEL.bind(this,e)},{txt:"Reject GOVT",class:"txtstyle1",action:this.updateGOVT.bind(this,e)},{class:"fa fa-eye",action:this.vehicleDetail.bind(this,e)}]}},{key:"updateGOVT",value:function(e){var t=this,n={prdId:e._id,docTypeId:e._doctypeid,isReject:1};e._id&&(this.common.params={title:"Reject GOVT ",description:"<b>&nbsp;Are you sure want to reject<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("Documents/insertDocumentVahenLogs",n).subscribe((function(e){t.common.loading--,console.log("res",e.data),t.common.showToast(e.msg),t.vehDocMismatchSummary()}),(function(e){t.common.loading--,t.common.showError()})))})))}},{key:"rejectEL",value:function(e){var t=this,n={docId:e._docid,docTypeId:e._doctypeid,isVerified:0};e._docid&&(this.common.params={title:"Reject EL ",description:"<b>&nbsp;Are you sure want to reject<b>"},this.modalService.open(V.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("Documents/updateVehicleDocumentVerifyFlag",n).subscribe((function(e){t.common.loading--,console.log("res",e.data),t.common.showToast(e.msg),t.vehDocMismatchSummary()}),(function(e){t.common.loading--,t.common.showError()})))})))}},{key:"vehicleDetail",value:function(e){console.log("VehicleDetail:",e),this.common.params={images:[{name:"image",image:e._img_url},{name:"image",image:e._img_url2},{name:"image",image:e._img_url3}],title:"Image"},this.common.handleModalSize("class","modal-lg","1024"),this.modalService.open(oe.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}(),Ir.\u0275fac=function(e){return new(e||Ir)(g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](p.r))},Ir.\u0275cmp=g["\u0275\u0275defineComponent"]({type:Ir,selectors:[["vehdocmismatch"]],decls:8,vars:2,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[3,"data","settings"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"nb-card",0),g["\u0275\u0275elementStart"](1,"nb-card-header"),g["\u0275\u0275elementStart"](2,"div",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5,"Vehicle Document Mismatch Summary"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"nb-card-body"),g["\u0275\u0275element"](7,"smart-table",3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[u.s,u.v,u.r,f.a],styles:["[_nghost-%COMP%]     .txtstyle, [_nghost-%COMP%]     .txtstyle1{padding:3px 8px;color:#000;font-size:12px}[_nghost-%COMP%]     .txtstyle, [_nghost-%COMP%]     .txtstyle1, [_nghost-%COMP%]     .txtstyle2{margin-top:4px!important;font-style:normal;border-radius:3px;cursor:pointer;margin-right:7px;font-weight:500;-webkit-box-shadow:inset 0 0 3px 1px;box-shadow:inset 0 0 3px 1px}[_nghost-%COMP%]     .txtstyle2{padding:2px 2px 1px;color:#ff4500;font-size:10px}"]}),Ir),canActivate:[Ye.b]}]}],zr=((Ar=function e(){o(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:Ar}),Ar.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Ar)},imports:[[l.g.forChild(Vr)],l.g]}),Ar),Nr=r("vTDv"),jr=((Fr=function e(){o(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:Fr}),Fr.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Fr)},imports:[[Nr.a]]}),Fr),Rr=r("FUS3"),Hr=r("X0Jz"),Ur=r("dImq"),Br=r("qfjS"),Gr=r("d2mR"),$r=r("z+eI"),Yr=r("Kkpf"),Wr=r("hOtG"),Kr=((Lr=function e(){o(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:Lr}),Lr.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Lr)},imports:[[zr,Nr.a,jr,Rr.a,ne.c,ne.e,Hr.DocumentsModule,Ur.LorryReceiptModule,Br.DriverModule,Gr.a,$r.ChartModule,Yr.BatteryModule,Wr.ChallanModule]]}),Lr)}}])}();