!function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"j/I3":function(t,a,o){"use strict";o.r(a),o.d(a,"BidSystemModule",(function(){return vt}));var r,i=o("qfBg"),l=o("8Y7J"),s=o("iInd"),d=o("IAMq"),c=o("tKwJ"),h=((r=function t(e,a){n(this,t),this.user=e,this.router=a}).\u0275fac=function(t){return new(t||r)(l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](s.c))},r.\u0275cmp=l["\u0275\u0275defineComponent"]({type:r,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[["autoCollapse","true",3,"items"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"ngx-sample-layout"),l["\u0275\u0275element"](1,"nb-menu",0),l["\u0275\u0275element"](2,"router-outlet"),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("items",e.user._menu.bidSystem))},directives:[d.a,c.W,s.h],encapsulation:2}),r),p=o("kb7L"),m=o("OlR4"),g=o("H+bZ"),u=o("xyRm"),f=o("ia/1"),b=o("qgD7"),v=o("LvDl"),y=o("G0yt"),_=o("csNM"),x=o("SVse"),O=o("z+eI"),C=o("wD9S"),S=function(t){return{"background-color":t}};function k(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-body",15),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).filterData(t.name)})),l["\u0275\u0275elementStart"](2,"div",16),l["\u0275\u0275element"](3,"div",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",18),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"titlecase"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",19),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngStyle",l["\u0275\u0275pureFunction1"](5,S,a.bgColor)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,3,a.name)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",o.stateGroups[a.name].length," ")}}function w(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",5),l["\u0275\u0275element"](1,"chart",14),l["\u0275\u0275elementStart"](2,"nb-card"),l["\u0275\u0275elementStart"](3,"nb-card-body",15),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().allData()})),l["\u0275\u0275elementStart"](4,"div",16),l["\u0275\u0275element"](5,"div",17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",18),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275text"](8," All Data "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",19),l["\u0275\u0275elementStart"](10,"span"),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](12,k,9,7,"nb-card",20),l["\u0275\u0275elementEnd"]()}if(2&t){var a=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("data",a.chartData)("options",a.chartOptions),l["\u0275\u0275advance"](10),l["\u0275\u0275textInterpolate"](a.orderStatesData.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",a.keyGroups)}}function E(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",24),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function M(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",22),l["\u0275\u0275template"](1,E,1,2,"smart-table",23),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.data&&n.data.length)}}function P(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",25),l["\u0275\u0275elementStart"](1,"h4",26),l["\u0275\u0275text"](2,"No Record Found"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}var T,D=((T=function(){function t(e,a,o,r){n(this,t),this.modalService=e,this.common=a,this.user=o,this.api=r,this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-1)),this.routeData=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(),this.common.refresh=this.refresh.bind(this)}return e(t,[{key:"refresh",value:function(){this.getOrders()}},{key:"ngOnInit",value:function(){}},{key:"resetData",value:function(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[]}},{key:"getOrders",value:function(){var t=this;this.resetData(),this.common.loading++;var e={x_id:null,loadby_id:null,loadby_type:null,status:null,startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.api.post("Bidding/GetOrder",e).subscribe((function(e){t.common.loading--,console.log("test"),t.data=[],e.data&&(t.data=e.data,t.orderStatesData=e.data,t.routeData=e.data,t.grouping("Order Status"),t.generateTable())}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"generateTable",value:function(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getHeadings",value:function(){var t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}},{key:"formatTitle",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"getTableColumns",value:function(){var t=this,e=[];return console.log("heading",this.headings.length),this.data.map((function(n){for(var a in console.log("doc",n),t.valobj={},t.getHeadings())"Action"==a?(console.log("action",a),t.valobj[a]={value:"",action:null,html:!0,icons:t.actionIcons(n)}):"Bids - Proposals"==a?(console.log("action",a),t.valobj[a]={value:n[a],html:!0,action:t.showBidData.bind(t,n),class:"blue"}):t.valobj[a]={value:n[a],class:"black",action:""},n._is_seen&&(console.log("HELLO"),t.valobj.class="makeMeYellow");e.push(t.valobj)})),e}},{key:"actionIcons",value:function(t){var e=[];return t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:"icon fa fa-trash red",action:this.deleteOrder.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isComplete&&e.push({class:" icon fa fa-check gray",action:this.openConfirmModal.bind(this,t,1)}),t.Action.isCancel&&e.push({class:" icon fa fa-times red",action:this.openConfirmModal.bind(this,t,-1)}),e}},{key:"grouping",value:function(t){var e=this;console.log("viewType",t),this.stateGroups=v.groupBy(this.routeData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map((function(t){var n=Math.floor(359*Math.random()+1);e.keyGroups.push({name:t,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")})})),this.sortData(t)}},{key:"sortData",value:function(t){var e=this,n=[];this.chartColors=[];var a=[],o=[];this.keyGroups.map((function(t){console.log("group",t,"this.stateGroups",e.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",e.stateGroups[t.name]),n.push({group:t,length:e.stateGroups[t.name]?e.stateGroups[t.name].length:0})})),this.stateGroupsKeys=[],v.sortBy(n,["length"]).reverse().map((function(t){e.stateGroupsKeys.push(t.group)})),this.stateGroupsKeys.map((function(t){console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",e.stateGroups,"this.stateGroups[keyGroup.name]=",e.stateGroups[t.name]),e.chartColors.push(t.bgColor),a.push(t.name),o.push(e.stateGroups[t.name].length)}));var r=this.common.pieChart(a,o,this.chartColors);this.chartData=r.chartData,this.chartOptions=r.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}},{key:"allData",value:function(){this.selectedFilterKey="",this.filterData("All")}},{key:"filterData",value:function(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter((function(e){return e["Order Status"]==t}))),console.log("this.orderStatesData ",this.data),this.generateTable()}},{key:"openConfirmModal",value:function(t,e){var n=this,a="";1==e?a="complete":-1==e&&(a="Cancel");var o={orderId:t._id,status:e};confirm("Do you want "+a+" this Order ?")&&(this.common.loading++,this.api.post("Bidding/AcceptBid",o).subscribe((function(t){n.common.loading--,console.log("response:",t),t.data[0].y_id>0?(n.common.showToast("Action Sucessfully completed",1e4),n.getOrders()):n.common.showError(t.data[0].y_msg)}),(function(t){n.common.loading--,console.log(t)})))}},{key:"viewOrder",value:function(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(b.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response)}))}},{key:"openAddOrder",value:function(t){var e=this;this.common.params={order:{id:t?t._id:null,title:t&&t._id?"Update Order":"Add Order"}},this.modalService.open(p.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),t.response&&e.getOrders()}))}},{key:"showBidData",value:function(t){var e=this;this.common.params={order:{id:t?t._id:null,orderType:t._order_type}},this.modalService.open(u.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),t.response&&e.getOrders()}))}},{key:"deleteOrder",value:function(t){var e=this,n={entityId:t._id,entityType:"order"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Order<b>"},this.modalService.open(f.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&(e.common.loading++,e.api.post("Bidding/deleteEntity",n).subscribe((function(t){e.common.loading--,t.data[0].y_id>0?(e.common.showToast("Successfully Deleted."),e.getOrders()):e.common.showError(t.data[0].y_msg),console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()})))})))}}]),t}()).\u0275fac=function(t){return new(t||T)(l["\u0275\u0275directiveInject"](y.r),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](g.a))},T.\u0275cmp=l["\u0275\u0275defineComponent"]({type:T,selectors:[["dashboard"]],decls:26,vars:8,consts:[[1,"row"],[1,"col-sm-10"],[1,"col-sm-1"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"col-1"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],[2,"padding","10px 15px"],["class","col-3",4,"ngIf"],["class","col-9",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Orders"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",2),l["\u0275\u0275elementStart"](7,"button",3),l["\u0275\u0275listener"]("click",(function(){return e.openAddOrder()})),l["\u0275\u0275text"](8,"Add Order"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",0),l["\u0275\u0275elementStart"](10,"div",4),l["\u0275\u0275text"](11,"From :"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),l["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",4),l["\u0275\u0275text"](15,"To :"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",5),l["\u0275\u0275elementStart"](17,"uj-date-time-picker",7),l["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"div",8),l["\u0275\u0275elementStart"](19,"button",9),l["\u0275\u0275listener"]("click",(function(){return e.getOrders()})),l["\u0275\u0275text"](20,"Submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"nb-card-body",10),l["\u0275\u0275elementStart"](22,"div",0),l["\u0275\u0275template"](23,w,13,4,"div",11),l["\u0275\u0275template"](24,M,2,1,"div",12),l["\u0275\u0275template"](25,P,3,0,"div",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",e.orderStatesData.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.data&&e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[c.s,c.v,_.a,c.r,x.u,O.ChartComponent,x.t,x.x,C.a],pipes:[x.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:6px}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}.chart-table[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4500;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#0074d9;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4136;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#2ecc40;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#39cccc;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#01ff70;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#85144b;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#f012be;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#3d9970;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#111;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{color:#00f}']}),T),I=o("ixn6"),G=o("0DOj"),A=function(t){return{"background-color":t}};function j(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-body",13),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).filterData(t.name)})),l["\u0275\u0275elementStart"](2,"div",14),l["\u0275\u0275element"](3,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",16),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"titlecase"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",17),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngStyle",l["\u0275\u0275pureFunction1"](5,A,a.bgColor)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,3,a.name)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",o.stateGroups[a.name].length," ")}}function F(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275element"](1,"chart",12),l["\u0275\u0275elementStart"](2,"nb-card"),l["\u0275\u0275elementStart"](3,"nb-card-body",13),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().allData()})),l["\u0275\u0275elementStart"](4,"div",14),l["\u0275\u0275element"](5,"div",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",16),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275text"](8," All Data "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",17),l["\u0275\u0275elementStart"](10,"span"),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](12,j,9,7,"nb-card",18),l["\u0275\u0275elementEnd"]()}if(2&t){var a=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("data",a.chartData)("options",a.chartOptions),l["\u0275\u0275advance"](10),l["\u0275\u0275textInterpolate"](a.orderStatesData.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",a.keyGroups)}}function B(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",21),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function K(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275template"](1,B,1,2,"smart-table",20),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275classMap"]("bid"==n.orderType?"col-9":"col-12"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.data&&n.data.length)}}function z(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",22),l["\u0275\u0275elementStart"](1,"h4",23),l["\u0275\u0275text"](2,"No Record Found"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}var V,H=((V=function(){function t(e,a,o,r){n(this,t),this.modalService=e,this.common=a,this.user=o,this.api=r,this.data=[],this.orderStatesData=[],this.stateGroups=[],this.bidData=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.orderType="open",this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(this.orderType),this.common.refresh=this.refresh.bind(this)}return e(t,[{key:"refresh",value:function(){this.getOrders(this.orderType)}},{key:"ngOnInit",value:function(){}},{key:"resetData",value:function(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.bidData=[]}},{key:"getOrders",value:function(t){var e=this;this.resetData();var n="type=open_orders";"bid"==t&&(n="type=your_bids"),this.common.loading++,this.api.get("Bidding/GetOpenOrder?"+n).subscribe((function(t){e.common.loading--,console.log("test"),e.data=[],t.data&&(e.data=t.data,e.orderStatesData=t.data,e.bidData=t.data,e.grouping("Bid Status"),e.generateTable())}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"generateTable",value:function(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getHeadings",value:function(){var t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}},{key:"getTableColumns",value:function(){var t=this,e=[];return console.log("heading",this.headings.length),this.data.map((function(n){for(var a in console.log("doc",n),t.valobj={},t.getHeadings())"Action"==a?(console.log("action",a),t.valobj[a]={value:"",action:null,html:!0,icons:t.actionIcons(n)}):t.valobj[a]={value:n[a],class:"black",action:""},n._is_seen&&(console.log("HELLO"),t.valobj.class="makeMeYellow");e.push(t.valobj)})),e}},{key:"actionIcons",value:function(t){var e=[];return t.Action.isAdd&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:" icon fa fa-trash red",action:this.deleteBid.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isProposalView&&(console.log("data._bp_status",t._bp_status),e.push({class:1==t._bp_status?"icon fa fa-file green":-1==t._bp_status?"icon fa fa-file red":"icon fa fa-file gray",action:this.proposalLogs.bind(this,t)})),e}},{key:"formatTitle",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"grouping",value:function(t){var e=this;console.log("viewType",t),this.stateGroups=v.groupBy(this.bidData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map((function(t){var n=Math.floor(359*Math.random()+1);e.keyGroups.push({name:t,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")})})),this.sortData(t)}},{key:"sortData",value:function(t){var e=this,n=[];this.chartColors=[];var a=[],o=[];this.keyGroups.map((function(t){console.log("group",t,"this.stateGroups",e.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",e.stateGroups[t.name]),n.push({group:t,length:e.stateGroups[t.name]?e.stateGroups[t.name].length:0})})),this.stateGroupsKeys=[],v.sortBy(n,["length"]).reverse().map((function(t){e.stateGroupsKeys.push(t.group)})),this.stateGroupsKeys.map((function(t){console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",e.stateGroups,"this.stateGroups[keyGroup.name]=",e.stateGroups[t.name]),e.chartColors.push(t.bgColor),a.push(t.name),o.push(e.stateGroups[t.name].length)}));var r=this.common.pieChart(a,o,this.chartColors);this.chartData=r.chartData,this.chartOptions=r.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}},{key:"allData",value:function(){this.selectedFilterKey="",this.filterData("All")}},{key:"filterData",value:function(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter((function(e){return e["Bid Status"]==t}))),console.log("this.orderStatesData ",this.data),this.generateTable()}},{key:"viewOrder",value:function(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(b.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response)}))}},{key:"openAddOrder",value:function(t){var e=this;console.log("dataggg",t),this.common.params={order:{id:t._id?t._id:null,bidId:t._bid_id?t._bid_id:null,type:"bid"==this.orderType?"update":"new",rate:t._bid_rate,remarks:t._bid_remarks,vehicleId:t._vid,vehicleRegNo:t._regno,weight:t._bid_weight,bidExpDate:t._bid_expdate,orderType:t._order_type}},this.modalService.open(I.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),t.response&&e.getOrders(e.orderType)}))}},{key:"deleteBid",value:function(t){var e=this,n={entityId:t._bid_id,entityType:"bid"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Bid<b>"},this.modalService.open(f.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&(e.common.loading++,e.api.post("Bidding/deleteEntity",n).subscribe((function(t){e.common.loading--,t.data[0].y_id>0?(e.common.showToast("Successfully Deleted."),e.refresh()):e.common.showError(t.data[0].y_msg),console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()})))})))}},{key:"proposalLogs",value:function(t){var e=this;console.log("dataggg",t);var n={id:t._bid_id,orderId:t._id,orderType:t._order_type,proposalId:t._bp_id};console.log("open orders proposalLogs",n),this.common.params={bidData:n},this.modalService.open(G.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),e.getOrders(e.orderType)}))}}]),t}()).\u0275fac=function(t){return new(t||V)(l["\u0275\u0275directiveInject"](y.r),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](g.a))},V.\u0275cmp=l["\u0275\u0275defineComponent"]({type:V,selectors:[["open-orders"]],decls:18,vars:5,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[1,"row","mt-3"],["class","col-3",4,"ngIf"],[3,"class",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],[1,"col-3"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Open Orders"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body",2),l["\u0275\u0275elementStart"](7,"div",0),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275elementStart"](9,"ul",4),l["\u0275\u0275elementStart"](10,"li",5),l["\u0275\u0275listener"]("click",(function(){return e.orderType="open",e.getOrders("open")})),l["\u0275\u0275text"](11," Open Orders "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"li",6),l["\u0275\u0275listener"]("click",(function(){return e.orderType="bid",e.getOrders("bid")})),l["\u0275\u0275text"](13," Your Bids "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",7),l["\u0275\u0275template"](15,F,13,4,"div",8),l["\u0275\u0275template"](16,K,2,3,"div",9),l["\u0275\u0275template"](17,z,3,0,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngClass","open"==e.orderType?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass","bid"==e.orderType?"active":""),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","bid"==e.orderType&&e.orderStatesData.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.data&&e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[c.s,c.v,c.r,x.r,x.u,O.ChartComponent,x.t,x.x,C.a],pipes:[x.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),V);function R(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.hours),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.orders),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.bids),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.bids_avg),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.placement)}}function L(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",9),l["\u0275\u0275elementStart"](1,"table",10),l["\u0275\u0275elementStart"](2,"thead",11),l["\u0275\u0275elementStart"](3,"th"),l["\u0275\u0275text"](4,"Last Hours"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Orders"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Bids"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Avg. Bids"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Placements"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"tbody",12),l["\u0275\u0275template"](14,R,11,5,"tr",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](14),l["\u0275\u0275property"]("ngForOf",n.orders)}}function $(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.bidder),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.t_weight),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.p_weight),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.r_weight)}}function Y(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",15),l["\u0275\u0275elementStart"](1,"div",16),l["\u0275\u0275elementStart"](2,"b"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](4,"br"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",17),l["\u0275\u0275elementStart"](7,"table",10),l["\u0275\u0275elementStart"](8,"thead",11),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Bidder"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Total Weight"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"th"),l["\u0275\u0275text"](14,"Picked Weight"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"th"),l["\u0275\u0275text"](16,"Remaining Weight"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"tbody",12),l["\u0275\u0275template"](18,$,9,4,"tr",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](n.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" (",n.tot_weight,") "),l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("ngForOf",n.bids)}}function J(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-body"),l["\u0275\u0275template"](2,Y,19,3,"div",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",n.bulkOrders)}}var U,N=((U=function(){function t(e,a,o,r){n(this,t),this.modalService=e,this.common=a,this.user=o,this.api=r,this.orders=[],this.bulkOrders=[],this.orderType="bulk",this.getOrderDetails()}return e(t,[{key:"ngOnInit",value:function(){}},{key:"getOrderDetails",value:function(){var t=this;this.common.loading++,this.api.get("Bidding/getOrderSummary",{}).subscribe((function(e){t.common.loading--,console.log("test"),t.orders=e.data,t.bulkOrders=[{name:"Jaipur To Agra",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]},{name:"delhi To Agra",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]},{name:"delhi To mumbai",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]}]}),(function(e){t.common.loading--,t.common.showError()}))}}]),t}()).\u0275fac=function(t){return new(t||U)(l["\u0275\u0275directiveInject"](y.r),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](g.a))},U.\u0275cmp=l["\u0275\u0275defineComponent"]({type:U,selectors:[["order-boards"]],decls:16,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","mt-3",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],["class","row mt-2","style","border: 1px solid rgb(58, 24, 24);",4,"ngFor","ngForOf"],[1,"row","mt-2",2,"border","1px solid rgb(58, 24, 24)"],[1,"col-4"],[1,"col-8"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Order - Bid Status"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body",2),l["\u0275\u0275elementStart"](7,"div",0),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275elementStart"](9,"ul",4),l["\u0275\u0275elementStart"](10,"li",5),l["\u0275\u0275listener"]("click",(function(){return e.orderType="bulk"})),l["\u0275\u0275text"](11," Bulk "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"li",6),l["\u0275\u0275listener"]("click",(function(){return e.orderType="ftl"})),l["\u0275\u0275text"](13," FTL/LTL "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](14,L,15,1,"div",7),l["\u0275\u0275template"](15,J,3,1,"nb-card",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngClass","bulk"==e.orderType?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass","ftl"==e.orderType?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf","ftl"==e.orderType),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","bulk"==e.orderType))},directives:[c.s,c.v,c.r,x.r,x.u,x.t],styles:['.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),U),q=o("0zba");function W(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275elementStart"](12,"i",13),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).placedVehicle(t,!1)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Pickup Point"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Drop Point"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a.Material),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Body Type"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Vehicles Placed"])}}function Z(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",8),l["\u0275\u0275elementStart"](1,"table",9),l["\u0275\u0275elementStart"](2,"thead",10),l["\u0275\u0275elementStart"](3,"th"),l["\u0275\u0275text"](4,"Pickup Point"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Drop Point"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Material"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Body Type"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Placed Vehicle"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"th"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"tbody",11),l["\u0275\u0275template"](15,W,13,5,"tr",12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](15),l["\u0275\u0275property"]("ngForOf",n.placed)}}var Q=function(t){return{regno:t}};function X(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275elementStart"](10,"auto-suggestion",14),l["\u0275\u0275listener"]("onSelected",(function(t){l["\u0275\u0275restoreView"](n);var a=e.index,o=e.$implicit;return l["\u0275\u0275nextContext"](2).selectVehicle(t,a,o._is_multi_select)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"td"),l["\u0275\u0275elementStart"](12,"i",15),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).placedVehicle(t,!0)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Pickup Point"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Drop Point"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a.Material),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](a["Body Type"]),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("isMultiSelect",a._is_multi_select)("preSelected",l["\u0275\u0275pureFunction1"](6,Q,a._regno))}}function tt(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",8),l["\u0275\u0275elementStart"](1,"table",9),l["\u0275\u0275elementStart"](2,"thead",10),l["\u0275\u0275elementStart"](3,"th"),l["\u0275\u0275text"](4,"Pickup Point"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Drop Point"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Material"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th"),l["\u0275\u0275text"](10,"Body Type"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th"),l["\u0275\u0275text"](12,"Vehicle"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"th"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"tbody",11),l["\u0275\u0275template"](15,X,13,8,"tr",12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](15),l["\u0275\u0275property"]("ngForOf",n.pendingPlacement)}}var et,nt=((et=function(){function t(e,a,o,r){n(this,t),this.modalService=e,this.common=a,this.user=o,this.api=r,this.placed=[],this.placementStatus="unplaced",this.pendingPlacement=[],this.orderType="pending",this.vehicles=[],this.vehicleIds=[],this.vehId=null,this.common.refresh=this.refresh.bind(this),this.getOrderDetails()}return e(t,[{key:"refresh",value:function(){this.getOrderDetails()}},{key:"ngOnInit",value:function(){}},{key:"getOrderDetails",value:function(){var t=this;this.common.loading++,this.api.get("Bidding/GetWonOrder?type="+this.placementStatus).subscribe((function(e){t.common.loading--,console.log("test"),"placed"==t.placementStatus?t.placed=e.data:"unplaced"==t.placementStatus&&(t.pendingPlacement=e.data)}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"selectVehicle",value:function(t,e,n){this.vehId=null,n?this.vehicles=t:this.vehId=t.id,console.log("_is_multi_select",n,"this.vehId",this.vehId)}},{key:"placedVehicle",value:function(t,e){var n=this,a=[];this.vehicles.length>0?a=this.vehicles.map((function(t){return console.log("veh",t),t.id})):a.push(e?this.vehId:t._vids_placed),console.log("vehIds",a),this.common.loading++;var o={orderId:t._id,bidId:t._bid_id,vIds:JSON.stringify(a),isPlace:e};this.api.post("Bidding/placeUnplaceOrder",o).subscribe((function(t){n.common.loading--,console.log("res: ",t.data),t.data[0].y_id>0?(n.common.showToast("Successfully Done"),n.getOrderDetails()):n.common.showError(t.data[0].y_msg)}),(function(t){n.common.loading--,n.common.showError()}))}}]),t}()).\u0275fac=function(t){return new(t||et)(l["\u0275\u0275directiveInject"](y.r),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](g.a))},et.\u0275cmp=l["\u0275\u0275defineComponent"]({type:et,selectors:[["orders-won"]],decls:16,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"fa","fa-close",2,"color","red",3,"click"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"isMultiSelect","preSelected","onSelected"],[1,"fa","fa-check-circle",3,"click"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Orders Won"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body",2),l["\u0275\u0275elementStart"](7,"div",0),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275elementStart"](9,"ul",4),l["\u0275\u0275elementStart"](10,"li",5),l["\u0275\u0275listener"]("click",(function(){return e.placementStatus="unplaced",e.getOrderDetails()})),l["\u0275\u0275text"](11," Pending Placement "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"li",6),l["\u0275\u0275listener"]("click",(function(){return e.placementStatus="placed",e.getOrderDetails()})),l["\u0275\u0275text"](13," Placed Vehicle "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](14,Z,16,1,"div",7),l["\u0275\u0275template"](15,tt,16,1,"div",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngClass","unplaced"==e.placementStatus?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass","placed"==e.placementStatus?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf","placed"==e.placementStatus),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","unplaced"==e.placementStatus))},directives:[c.s,c.v,c.r,x.r,x.u,x.t,q.a],styles:['.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),et),at=o("VJ3l"),ot=function(t){return{"background-color":t}};function rt(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-body",13),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).filterData(t.name)})),l["\u0275\u0275elementStart"](2,"div",14),l["\u0275\u0275element"](3,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",16),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"titlecase"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",17),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngStyle",l["\u0275\u0275pureFunction1"](5,ot,a.bgColor)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,3,a.name)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",o.stateGroups[a.name].length," ")}}function it(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275element"](1,"chart",12),l["\u0275\u0275elementStart"](2,"nb-card"),l["\u0275\u0275elementStart"](3,"nb-card-body",13),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().allData()})),l["\u0275\u0275elementStart"](4,"div",14),l["\u0275\u0275element"](5,"div",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",16),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275text"](8," All Data "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",17),l["\u0275\u0275elementStart"](10,"span"),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](12,rt,9,7,"nb-card",18),l["\u0275\u0275elementEnd"]()}if(2&t){var a=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("data",a.chartData)("options",a.chartOptions),l["\u0275\u0275advance"](10),l["\u0275\u0275textInterpolate"](a.orderStatesData.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",a.keyGroups)}}function lt(t,e){if(1&t&&l["\u0275\u0275element"](0,"smart-table",22),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function st(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",20),l["\u0275\u0275template"](1,lt,1,2,"smart-table",21),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.data&&n.data.length)}}function dt(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",23),l["\u0275\u0275elementStart"](1,"h4",24),l["\u0275\u0275text"](2,"No Record Found"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}var ct,ht,pt,mt=[{path:"",component:h,children:[{path:"",component:D},{path:"dashboard",component:D},{path:"open-orders",component:H},{path:"order-boards",component:N},{path:"orders-won",component:nt},{path:"order-trip-management",component:(ct=function(){function t(e,a,o,r){n(this,t),this.modalService=e,this.common=a,this.user=o,this.api=r,this.orderType="ftl",this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.routeData=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(),this.common.refresh=this.refresh.bind(this)}return e(t,[{key:"refresh",value:function(){this.getOrders()}},{key:"ngOnInit",value:function(){}},{key:"resetData",value:function(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[]}},{key:"getOrders",value:function(){var t=this;this.resetData(),this.common.loading++,this.api.get("Bidding/GetAcceptedOrders?orderType="+this.orderType).subscribe((function(e){t.common.loading--,console.log("test"),t.data=[],e.data&&(t.data=e.data,t.orderStatesData=e.data,t.routeData=e.data,t.grouping("Order Status"),t.generateTable())}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"generateTable",value:function(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getHeadings",value:function(){var t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}},{key:"formatTitle",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"getTableColumns",value:function(){var t=this,e=[];return console.log("heading",this.headings.length),this.data.map((function(n){for(var a in console.log("doc",n),t.valobj={},t.getHeadings())"Action"==a?(console.log("action",a),t.valobj[a]={value:"",action:null,html:!0,icons:t.actionIcons(n)}):t.valobj[a]={value:n[a],class:"black",action:""};e.push(t.valobj)})),e}},{key:"grouping",value:function(t){var e=this;console.log("viewType",t),this.stateGroups=v.groupBy(this.routeData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map((function(t){var n=Math.floor(359*Math.random()+1);e.keyGroups.push({name:t,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")})})),this.sortData(t)}},{key:"sortData",value:function(t){var e=this,n=[];this.chartColors=[];var a=[],o=[];this.keyGroups.map((function(t){console.log("group",t,"this.stateGroups",e.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",e.stateGroups[t.name]),n.push({group:t,length:e.stateGroups[t.name]?e.stateGroups[t.name].length:0})})),this.stateGroupsKeys=[],v.sortBy(n,["length"]).reverse().map((function(t){e.stateGroupsKeys.push(t.group)})),this.stateGroupsKeys.map((function(t){console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",e.stateGroups,"this.stateGroups[keyGroup.name]=",e.stateGroups[t.name]),e.chartColors.push(t.bgColor),a.push(t.name),o.push(e.stateGroups[t.name].length)}));var r=this.common.pieChart(a,o,this.chartColors);this.chartData=r.chartData,this.chartOptions=r.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}},{key:"allData",value:function(){this.selectedFilterKey="",this.filterData("All")}},{key:"filterData",value:function(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter((function(e){return e["Order Status"]==t}))),console.log("this.orderStatesData ",this.data),this.generateTable()}},{key:"actionIcons",value:function(t){var e=[];return t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:"icon fa fa-trash red",action:this.deleteOrder.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isComplete&&e.push({class:" icon fa fa-check gray",action:this.openConfirmModal.bind(this,t,1)}),t.Action.isCancel&&e.push({class:" icon fa fa-times red",action:this.openConfirmModal.bind(this,t,-1)}),t.Action.isRouteTracker&&e.push({class:" icon fa fa-route",action:this.openRouteTracker.bind(this,t)}),e}},{key:"openConfirmModal",value:function(t,e){var n=this,a="";1==e?a="complete":-1==e&&(a="Cancel");var o={orderId:t._id,status:e};confirm("Do you want "+a+" this Order ?")&&(this.common.loading++,this.api.post("Bidding/AcceptBid",o).subscribe((function(t){n.common.loading--,console.log("response:",t),t.data[0].y_id>0?(n.common.showToast("Action Sucessfully completed",1e4),n.getOrders()):n.common.showError(t.data[0].y_msg)}),(function(t){n.common.loading--,console.log(t)})))}},{key:"viewOrder",value:function(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(b.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response)}))}},{key:"openAddOrder",value:function(t){var e=this;this.common.params={order:{id:t?t._id:null,title:t&&t._id?"Update Order":"Add Order"}},this.modalService.open(p.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),t.response&&e.getOrders()}))}},{key:"openRouteTracker",value:function(t){this.common.params={orderId:t._id,orderType:this.orderType},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(at.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response)}))}},{key:"showBidData",value:function(t){var e=this;this.common.params={order:{id:t?t._id:null,orderType:t._order_type}},this.modalService.open(u.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t.response),t.response&&e.getOrders()}))}},{key:"deleteOrder",value:function(t){var e=this,n={entityId:t._id,entityType:"order"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Order<b>"},this.modalService.open(f.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&(e.common.loading++,e.api.post("Bidding/deleteEntity",n).subscribe((function(t){e.common.loading--,t.data[0].y_id>0?(e.common.showToast("Successfully Deleted."),e.getOrders()):e.common.showError(t.data[0].y_msg),console.log("res",t.data)}),(function(t){e.common.loading--,e.common.showError()})))})))}}]),t}(),ct.\u0275fac=function(t){return new(t||ct)(l["\u0275\u0275directiveInject"](y.r),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](g.a))},ct.\u0275cmp=l["\u0275\u0275defineComponent"]({type:ct,selectors:[["order-trip-management"]],decls:18,vars:5,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[1,"row","mt-3"],["class","col-3",4,"ngIf"],["class","col-9",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],[1,"col-3"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card"),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h5"),l["\u0275\u0275text"](5,"Trip Management"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body",2),l["\u0275\u0275elementStart"](7,"div",0),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275elementStart"](9,"ul",4),l["\u0275\u0275elementStart"](10,"li",5),l["\u0275\u0275listener"]("click",(function(){return e.orderType="bulk",e.getOrders()})),l["\u0275\u0275text"](11," Bulk "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"li",6),l["\u0275\u0275listener"]("click",(function(){return e.orderType="ftl",e.getOrders()})),l["\u0275\u0275text"](13," FTL/LTL "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",7),l["\u0275\u0275template"](15,it,13,4,"div",8),l["\u0275\u0275template"](16,st,2,1,"div",9),l["\u0275\u0275template"](17,dt,3,0,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngClass","bulk"==e.orderType?"active":""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngClass","ftl"==e.orderType?"active":""),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.orderStatesData.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.data&&e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[c.s,c.v,c.r,x.r,x.u,O.ChartComponent,x.t,x.x,C.a],pipes:[x.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:6px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),ct)}]}],gt=((ht=function t(){n(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:ht}),ht.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||ht)},imports:[[s.g.forChild(mt)],s.g]}),ht),ut=o("vTDv"),ft=o("d2mR"),bt=o("FUS3"),vt=((pt=function t(){n(this,t)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:pt}),pt.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||pt)},imports:[[ut.a,gt,ft.a,bt.a,O.ChartModule]]}),pt)}}])}();