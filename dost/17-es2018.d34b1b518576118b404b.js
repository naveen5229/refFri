(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"j/I3":function(t,e,n){"use strict";n.r(e),n.d(e,"BidSystemModule",(function(){return lt}));var o=n("qfBg"),a=n("8Y7J"),r=n("iInd"),i=n("IAMq"),s=n("tKwJ");let l=(()=>{class t{constructor(t,e){this.user=t,this.router=e}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](r.c))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[["autoCollapse","true",3,"items"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"ngx-sample-layout"),a["\u0275\u0275element"](1,"nb-menu",0),a["\u0275\u0275element"](2,"router-outlet"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("items",e.user._menu.bidSystem))},directives:[i.a,s.W,r.h],encapsulation:2}),t})();var d=n("kb7L"),c=n("OlR4"),h=n("H+bZ"),p=n("xyRm"),m=n("ia/1"),g=n("qgD7"),u=n("LvDl"),b=n("G0yt"),f=n("csNM"),y=n("SVse"),_=n("z+eI"),v=n("wD9S");const x=function(t){return{"background-color":t}};function O(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-body",15),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](t);const n=e.$implicit;return a["\u0275\u0275nextContext"](2).filterData(n.name)})),a["\u0275\u0275elementStart"](2,"div",16),a["\u0275\u0275element"](3,"div",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",18),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"titlecase"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",19),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,x,t.bgColor)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,3,t.name)," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",n.stateGroups[t.name].length," ")}}function C(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275element"](1,"chart",14),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-body",15),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](t),a["\u0275\u0275nextContext"]().allData()})),a["\u0275\u0275elementStart"](4,"div",16),a["\u0275\u0275element"](5,"div",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",18),a["\u0275\u0275elementStart"](7,"span"),a["\u0275\u0275text"](8," All Data "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",19),a["\u0275\u0275elementStart"](10,"span"),a["\u0275\u0275text"](11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,O,9,7,"nb-card",20),a["\u0275\u0275elementEnd"]()}if(2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("data",t.chartData)("options",t.chartOptions),a["\u0275\u0275advance"](10),a["\u0275\u0275textInterpolate"](t.orderStatesData.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.keyGroups)}}function S(t,e){if(1&t&&a["\u0275\u0275element"](0,"smart-table",24),2&t){const t=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function w(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275template"](1,S,1,2,"smart-table",23),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.data&&t.data.length)}}function E(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",25),a["\u0275\u0275elementStart"](1,"h4",26),a["\u0275\u0275text"](2,"No Record Found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}let M=(()=>{class t{constructor(t,e,n,o){this.modalService=t,this.common=e,this.user=n,this.api=o,this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-1)),this.routeData=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(),this.common.refresh=this.refresh.bind(this)}refresh(){this.getOrders()}ngOnInit(){}resetData(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[]}getOrders(){this.resetData(),this.common.loading++;let t={x_id:null,loadby_id:null,loadby_type:null,status:null,startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.api.post("Bidding/GetOrder",t).subscribe(t=>{this.common.loading--,console.log("test"),this.data=[],t.data&&(this.data=t.data,this.orderStatesData=t.data,this.routeData=t.data,this.grouping("Order Status"),this.generateTable())},t=>{this.common.loading--,this.common.showError()})}generateTable(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}getHeadings(){let t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("heading",this.headings.length),this.data.map(e=>{console.log("doc",e),this.valobj={};for(let t in this.getHeadings())"Action"==t?(console.log("action",t),this.valobj[t]={value:"",action:null,html:!0,icons:this.actionIcons(e)}):"Bids - Proposals"==t?(console.log("action",t),this.valobj[t]={value:e[t],html:!0,action:this.showBidData.bind(this,e),class:"blue"}):this.valobj[t]={value:e[t],class:"black",action:""},e._is_seen&&(console.log("HELLO"),this.valobj.class="makeMeYellow");t.push(this.valobj)}),t}actionIcons(t){let e=[];return t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:"icon fa fa-trash red",action:this.deleteOrder.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isComplete&&e.push({class:" icon fa fa-check gray",action:this.openConfirmModal.bind(this,t,1)}),t.Action.isCancel&&e.push({class:" icon fa fa-times red",action:this.openConfirmModal.bind(this,t,-1)}),e}grouping(t){console.log("viewType",t),this.stateGroups=u.groupBy(this.routeData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`})}),this.sortData(t)}sortData(t){let e=[];this.chartColors=[];let n=[],o=[];this.keyGroups.map(t=>{console.log("group",t,"this.stateGroups",this.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",this.stateGroups[t.name]),e.push({group:t,length:this.stateGroups[t.name]?this.stateGroups[t.name].length:0})}),this.stateGroupsKeys=[],u.sortBy(e,["length"]).reverse().map(t=>{this.stateGroupsKeys.push(t.group)}),this.stateGroupsKeys.map(t=>{console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",this.stateGroups,"this.stateGroups[keyGroup.name]=",this.stateGroups[t.name]),this.chartColors.push(t.bgColor),n.push(t.name),o.push(this.stateGroups[t.name].length)});let a=this.common.pieChart(n,o,this.chartColors);this.chartData=a.chartData,this.chartOptions=a.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}allData(){this.selectedFilterKey="",this.filterData("All")}filterData(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter(e=>e["Order Status"]==t)),console.log("this.orderStatesData ",this.data),this.generateTable()}openConfirmModal(t,e){let n="";1==e?n="complete":-1==e&&(n="Cancel");let o={orderId:t._id,status:e};confirm("Do you want "+n+" this Order ?")&&(this.common.loading++,this.api.post("Bidding/AcceptBid",o).subscribe(t=>{this.common.loading--,console.log("response:",t),t.data[0].y_id>0?(this.common.showToast("Action Sucessfully completed",1e4),this.getOrders()):this.common.showError(t.data[0].y_msg)},t=>{this.common.loading--,console.log(t)}))}viewOrder(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(g.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response)})}openAddOrder(t){this.common.params={order:{id:t?t._id:null,title:t&&t._id?"Update Order":"Add Order"}},this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),t.response&&this.getOrders()})}showBidData(t){this.common.params={order:{id:t?t._id:null,orderType:t._order_type}},this.modalService.open(p.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),t.response&&this.getOrders()})}deleteOrder(t){let e={entityId:t._id,entityType:"order"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Order<b>"},this.modalService.open(m.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("Bidding/deleteEntity",e).subscribe(t=>{this.common.loading--,t.data[0].y_id>0?(this.common.showToast("Successfully Deleted."),this.getOrders()):this.common.showError(t.data[0].y_msg),console.log("res",t.data)},t=>{this.common.loading--,this.common.showError()}))}))}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.r),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](h.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["dashboard"]],decls:26,vars:8,consts:[[1,"row"],[1,"col-sm-10"],[1,"col-sm-1"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"col-1"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],[2,"padding","10px 15px"],["class","col-3",4,"ngIf"],["class","col-9",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"h5"),a["\u0275\u0275text"](5,"Orders"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",2),a["\u0275\u0275elementStart"](7,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.openAddOrder()})),a["\u0275\u0275text"](8,"Add Order"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",0),a["\u0275\u0275elementStart"](10,"div",4),a["\u0275\u0275text"](11,"From :"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",5),a["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),a["\u0275\u0275listener"]("onChanged",(function(t){return e.startDate=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",4),a["\u0275\u0275text"](15,"To :"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",5),a["\u0275\u0275elementStart"](17,"uj-date-time-picker",7),a["\u0275\u0275listener"]("onChanged",(function(t){return e.endDate=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",8),a["\u0275\u0275elementStart"](19,"button",9),a["\u0275\u0275listener"]("click",(function(){return e.getOrders()})),a["\u0275\u0275text"](20,"Submit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"nb-card-body",10),a["\u0275\u0275elementStart"](22,"div",0),a["\u0275\u0275template"](23,C,13,4,"div",11),a["\u0275\u0275template"](24,w,2,1,"div",12),a["\u0275\u0275template"](25,E,3,0,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("dateTimeValue",e.startDate)("isTime",!1),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("dateTimeValue",e.endDate)("isTime",!1)("isStart",!1),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.orderStatesData.length>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.data&&e.data.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[s.s,s.v,f.a,s.r,y.u,_.ChartComponent,y.t,y.x,v.a],pipes:[y.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:6px}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}.chart-table[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .chart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4500;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#0074d9;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#ff4136;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#2ecc40;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#39cccc;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#01ff70;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#85144b;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#f012be;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#3d9970;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child{font-size:0}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10)   td[_ngcontent-%COMP%]:first-child:before{content:"";font-size:0;background-color:#111;border-radius:100%;height:20px;width:20px;padding:0;display:block}.chart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{color:#00f}']}),t})();var P=n("ixn6"),k=n("0DOj");const T=function(t){return{"background-color":t}};function D(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-body",13),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](t);const n=e.$implicit;return a["\u0275\u0275nextContext"](2).filterData(n.name)})),a["\u0275\u0275elementStart"](2,"div",14),a["\u0275\u0275element"](3,"div",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",16),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"titlecase"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",17),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,T,t.bgColor)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,3,t.name)," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",n.stateGroups[t.name].length," ")}}function I(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",11),a["\u0275\u0275element"](1,"chart",12),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-body",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](t),a["\u0275\u0275nextContext"]().allData()})),a["\u0275\u0275elementStart"](4,"div",14),a["\u0275\u0275element"](5,"div",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",16),a["\u0275\u0275elementStart"](7,"span"),a["\u0275\u0275text"](8," All Data "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",17),a["\u0275\u0275elementStart"](10,"span"),a["\u0275\u0275text"](11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,D,9,7,"nb-card",18),a["\u0275\u0275elementEnd"]()}if(2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("data",t.chartData)("options",t.chartOptions),a["\u0275\u0275advance"](10),a["\u0275\u0275textInterpolate"](t.orderStatesData.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.keyGroups)}}function G(t,e){if(1&t&&a["\u0275\u0275element"](0,"smart-table",21),2&t){const t=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function A(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,G,1,2,"smart-table",20),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275classMap"]("bid"==t.orderType?"col-9":"col-12"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.data&&t.data.length)}}function j(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"h4",23),a["\u0275\u0275text"](2,"No Record Found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}let F=(()=>{class t{constructor(t,e,n,o){this.modalService=t,this.common=e,this.user=n,this.api=o,this.data=[],this.orderStatesData=[],this.stateGroups=[],this.bidData=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.orderType="open",this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(this.orderType),this.common.refresh=this.refresh.bind(this)}refresh(){this.getOrders(this.orderType)}ngOnInit(){}resetData(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.bidData=[]}getOrders(t){this.resetData();let e="type=open_orders";"bid"==t&&(e="type=your_bids"),this.common.loading++,this.api.get("Bidding/GetOpenOrder?"+e).subscribe(t=>{this.common.loading--,console.log("test"),this.data=[],t.data&&(this.data=t.data,this.orderStatesData=t.data,this.bidData=t.data,this.grouping("Bid Status"),this.generateTable())},t=>{this.common.loading--,this.common.showError()})}generateTable(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}getHeadings(){let t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}getTableColumns(){let t=[];return console.log("heading",this.headings.length),this.data.map(e=>{console.log("doc",e),this.valobj={};for(let t in this.getHeadings())"Action"==t?(console.log("action",t),this.valobj[t]={value:"",action:null,html:!0,icons:this.actionIcons(e)}):this.valobj[t]={value:e[t],class:"black",action:""},e._is_seen&&(console.log("HELLO"),this.valobj.class="makeMeYellow");t.push(this.valobj)}),t}actionIcons(t){let e=[];return t.Action.isAdd&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:" icon fa fa-trash red",action:this.deleteBid.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isProposalView&&(console.log("data._bp_status",t._bp_status),e.push({class:1==t._bp_status?"icon fa fa-file green":-1==t._bp_status?"icon fa fa-file red":"icon fa fa-file gray",action:this.proposalLogs.bind(this,t)})),e}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}grouping(t){console.log("viewType",t),this.stateGroups=u.groupBy(this.bidData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`})}),this.sortData(t)}sortData(t){let e=[];this.chartColors=[];let n=[],o=[];this.keyGroups.map(t=>{console.log("group",t,"this.stateGroups",this.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",this.stateGroups[t.name]),e.push({group:t,length:this.stateGroups[t.name]?this.stateGroups[t.name].length:0})}),this.stateGroupsKeys=[],u.sortBy(e,["length"]).reverse().map(t=>{this.stateGroupsKeys.push(t.group)}),this.stateGroupsKeys.map(t=>{console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",this.stateGroups,"this.stateGroups[keyGroup.name]=",this.stateGroups[t.name]),this.chartColors.push(t.bgColor),n.push(t.name),o.push(this.stateGroups[t.name].length)});let a=this.common.pieChart(n,o,this.chartColors);this.chartData=a.chartData,this.chartOptions=a.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}allData(){this.selectedFilterKey="",this.filterData("All")}filterData(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter(e=>e["Bid Status"]==t)),console.log("this.orderStatesData ",this.data),this.generateTable()}viewOrder(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(g.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response)})}openAddOrder(t){console.log("dataggg",t),this.common.params={order:{id:t._id?t._id:null,bidId:t._bid_id?t._bid_id:null,type:"bid"==this.orderType?"update":"new",rate:t._bid_rate,remarks:t._bid_remarks,vehicleId:t._vid,vehicleRegNo:t._regno,weight:t._bid_weight,bidExpDate:t._bid_expdate,orderType:t._order_type}},this.modalService.open(P.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),t.response&&this.getOrders(this.orderType)})}deleteBid(t){let e={entityId:t._bid_id,entityType:"bid"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Bid<b>"},this.modalService.open(m.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("Bidding/deleteEntity",e).subscribe(t=>{this.common.loading--,t.data[0].y_id>0?(this.common.showToast("Successfully Deleted."),this.refresh()):this.common.showError(t.data[0].y_msg),console.log("res",t.data)},t=>{this.common.loading--,this.common.showError()}))}))}proposalLogs(t){console.log("dataggg",t);let e={id:t._bid_id,orderId:t._id,orderType:t._order_type,proposalId:t._bp_id};console.log("open orders proposalLogs",e),this.common.params={bidData:e},this.modalService.open(k.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),this.getOrders(this.orderType)})}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.r),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](h.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["open-orders"]],decls:18,vars:5,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[1,"row","mt-3"],["class","col-3",4,"ngIf"],[3,"class",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],[1,"col-3"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"h5"),a["\u0275\u0275text"](5,"Open Orders"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body",2),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"ul",4),a["\u0275\u0275elementStart"](10,"li",5),a["\u0275\u0275listener"]("click",(function(){return e.orderType="open",e.getOrders("open")})),a["\u0275\u0275text"](11," Open Orders "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"li",6),a["\u0275\u0275listener"]("click",(function(){return e.orderType="bid",e.getOrders("bid")})),a["\u0275\u0275text"](13," Your Bids "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",7),a["\u0275\u0275template"](15,I,13,4,"div",8),a["\u0275\u0275template"](16,A,2,3,"div",9),a["\u0275\u0275template"](17,j,3,0,"div",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngClass","open"==e.orderType?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass","bid"==e.orderType?"active":""),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf","bid"==e.orderType&&e.orderStatesData.length>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.data&&e.data.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[s.s,s.v,s.r,y.r,y.u,_.ChartComponent,y.t,y.x,v.a],pipes:[y.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),t})();function B(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"td"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.hours),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.orders),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.bids),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.bids_avg),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.placement)}}function K(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"table",10),a["\u0275\u0275elementStart"](2,"thead",11),a["\u0275\u0275elementStart"](3,"th"),a["\u0275\u0275text"](4,"Last Hours"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"th"),a["\u0275\u0275text"](6,"Orders"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"th"),a["\u0275\u0275text"](8,"Bids"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"th"),a["\u0275\u0275text"](10,"Avg. Bids"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Placements"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"tbody",12),a["\u0275\u0275template"](14,B,11,5,"tr",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](14),a["\u0275\u0275property"]("ngForOf",t.orders)}}function z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.bidder),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.t_weight),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.p_weight),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.r_weight)}}function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",15),a["\u0275\u0275elementStart"](1,"div",16),a["\u0275\u0275elementStart"](2,"b"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"br"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",17),a["\u0275\u0275elementStart"](7,"table",10),a["\u0275\u0275elementStart"](8,"thead",11),a["\u0275\u0275elementStart"](9,"th"),a["\u0275\u0275text"](10,"Bidder"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Total Weight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"th"),a["\u0275\u0275text"](14,"Picked Weight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"th"),a["\u0275\u0275text"](16,"Remaining Weight"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"tbody",12),a["\u0275\u0275template"](18,z,9,4,"tr",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.name),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" (",t.tot_weight,") "),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("ngForOf",t.bids)}}function H(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-body"),a["\u0275\u0275template"](2,V,19,3,"div",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.bulkOrders)}}let R=(()=>{class t{constructor(t,e,n,o){this.modalService=t,this.common=e,this.user=n,this.api=o,this.orders=[],this.bulkOrders=[],this.orderType="bulk",this.getOrderDetails()}ngOnInit(){}getOrderDetails(){this.common.loading++,this.api.get("Bidding/getOrderSummary",{}).subscribe(t=>{this.common.loading--,console.log("test"),this.orders=t.data,this.bulkOrders=[{name:"Jaipur To Agra",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]},{name:"delhi To Agra",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]},{name:"delhi To mumbai",tot_weight:"10000 ton",bids:[{bidder:"Shree Yadav",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"JRD",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Meera Roadways",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"Hari mohan",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"},{bidder:"R K ",t_weight:"2000 Ton",p_weight:"1200 Ton (60%)",r_weight:"800 Ton (40%)"}]}]},t=>{this.common.loading--,this.common.showError()})}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.r),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](h.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["order-boards"]],decls:16,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","mt-3",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],["class","row mt-2","style","border: 1px solid rgb(58, 24, 24);",4,"ngFor","ngForOf"],[1,"row","mt-2",2,"border","1px solid rgb(58, 24, 24)"],[1,"col-4"],[1,"col-8"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"h5"),a["\u0275\u0275text"](5,"Order - Bid Status"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body",2),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"ul",4),a["\u0275\u0275elementStart"](10,"li",5),a["\u0275\u0275listener"]("click",(function(){return e.orderType="bulk"})),a["\u0275\u0275text"](11," Bulk "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"li",6),a["\u0275\u0275listener"]("click",(function(){return e.orderType="ftl"})),a["\u0275\u0275text"](13," FTL/LTL "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,K,15,1,"div",7),a["\u0275\u0275template"](15,H,3,1,"nb-card",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngClass","bulk"==e.orderType?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass","ftl"==e.orderType?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf","ftl"==e.orderType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","bulk"==e.orderType))},directives:[s.s,s.v,s.r,y.r,y.u,y.t],styles:['.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),t})();var L=n("0zba");function $(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"td"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275elementStart"](12,"i",13),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](t);const n=e.$implicit;return a["\u0275\u0275nextContext"](2).placedVehicle(n,!1)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Pickup Point"]),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Drop Point"]),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.Material),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Body Type"]),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Vehicles Placed"])}}function Y(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275elementStart"](1,"table",9),a["\u0275\u0275elementStart"](2,"thead",10),a["\u0275\u0275elementStart"](3,"th"),a["\u0275\u0275text"](4,"Pickup Point"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"th"),a["\u0275\u0275text"](6,"Drop Point"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"th"),a["\u0275\u0275text"](8,"Material"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"th"),a["\u0275\u0275text"](10,"Body Type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Placed Vehicle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"th"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"tbody",11),a["\u0275\u0275template"](15,$,13,5,"tr",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](15),a["\u0275\u0275property"]("ngForOf",t.placed)}}const J=function(t){return{regno:t}};function U(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"td"),a["\u0275\u0275elementStart"](10,"auto-suggestion",14),a["\u0275\u0275listener"]("onSelected",(function(n){a["\u0275\u0275restoreView"](t);const o=e.index,r=e.$implicit;return a["\u0275\u0275nextContext"](2).selectVehicle(n,o,r._is_multi_select)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"td"),a["\u0275\u0275elementStart"](12,"i",15),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](t);const n=e.$implicit;return a["\u0275\u0275nextContext"](2).placedVehicle(n,!0)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Pickup Point"]),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Drop Point"]),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.Material),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t["Body Type"]),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("isMultiSelect",t._is_multi_select)("preSelected",a["\u0275\u0275pureFunction1"](6,J,t._regno))}}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275elementStart"](1,"table",9),a["\u0275\u0275elementStart"](2,"thead",10),a["\u0275\u0275elementStart"](3,"th"),a["\u0275\u0275text"](4,"Pickup Point"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"th"),a["\u0275\u0275text"](6,"Drop Point"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"th"),a["\u0275\u0275text"](8,"Material"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"th"),a["\u0275\u0275text"](10,"Body Type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"th"),a["\u0275\u0275text"](12,"Vehicle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"th"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"tbody",11),a["\u0275\u0275template"](15,U,13,8,"tr",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](15),a["\u0275\u0275property"]("ngForOf",t.pendingPlacement)}}let q=(()=>{class t{constructor(t,e,n,o){this.modalService=t,this.common=e,this.user=n,this.api=o,this.placed=[],this.placementStatus="unplaced",this.pendingPlacement=[],this.orderType="pending",this.vehicles=[],this.vehicleIds=[],this.vehId=null,this.common.refresh=this.refresh.bind(this),this.getOrderDetails()}refresh(){this.getOrderDetails()}ngOnInit(){}getOrderDetails(){this.common.loading++,this.api.get("Bidding/GetWonOrder?type="+this.placementStatus).subscribe(t=>{this.common.loading--,console.log("test"),"placed"==this.placementStatus?this.placed=t.data:"unplaced"==this.placementStatus&&(this.pendingPlacement=t.data)},t=>{this.common.loading--,this.common.showError()})}selectVehicle(t,e,n){this.vehId=null,n?this.vehicles=t:this.vehId=t.id,console.log("_is_multi_select",n,"this.vehId",this.vehId)}placedVehicle(t,e){let n=[];this.vehicles.length>0?n=this.vehicles.map(t=>(console.log("veh",t),t.id)):n.push(e?this.vehId:t._vids_placed),console.log("vehIds",n),this.common.loading++;let o={orderId:t._id,bidId:t._bid_id,vIds:JSON.stringify(n),isPlace:e};this.api.post("Bidding/placeUnplaceOrder",o).subscribe(t=>{this.common.loading--,console.log("res: ",t.data),t.data[0].y_id>0?(this.common.showToast("Successfully Done"),this.getOrderDetails()):this.common.showError(t.data[0].y_msg)},t=>{this.common.loading--,this.common.showError()})}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.r),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](h.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["orders-won"]],decls:16,vars:4,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"fa","fa-close",2,"color","red",3,"click"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"isMultiSelect","preSelected","onSelected"],[1,"fa","fa-check-circle",3,"click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"h5"),a["\u0275\u0275text"](5,"Orders Won"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body",2),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"ul",4),a["\u0275\u0275elementStart"](10,"li",5),a["\u0275\u0275listener"]("click",(function(){return e.placementStatus="unplaced",e.getOrderDetails()})),a["\u0275\u0275text"](11," Pending Placement "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"li",6),a["\u0275\u0275listener"]("click",(function(){return e.placementStatus="placed",e.getOrderDetails()})),a["\u0275\u0275text"](13," Placed Vehicle "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,Y,16,1,"div",7),a["\u0275\u0275template"](15,N,16,1,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngClass","unplaced"==e.placementStatus?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass","placed"==e.placementStatus?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf","placed"==e.placementStatus),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","unplaced"==e.placementStatus))},directives:[s.s,s.v,s.r,y.r,y.u,y.t,L.a],styles:['.thead[_ngcontent-%COMP%]{background-color:#000;color:#fff}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .makeMeYellow{background:#ecec9d!important}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .gray{color:grey;font-weight:700}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:8px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),t})();var W=n("VJ3l");const Z=function(t){return{"background-color":t}};function Q(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-body",13),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](t);const n=e.$implicit;return a["\u0275\u0275nextContext"](2).filterData(n.name)})),a["\u0275\u0275elementStart"](2,"div",14),a["\u0275\u0275element"](3,"div",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",16),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"titlecase"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",17),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,Z,t.bgColor)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,3,t.name)," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",n.stateGroups[t.name].length," ")}}function X(t,e){if(1&t){const t=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",11),a["\u0275\u0275element"](1,"chart",12),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-body",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](t),a["\u0275\u0275nextContext"]().allData()})),a["\u0275\u0275elementStart"](4,"div",14),a["\u0275\u0275element"](5,"div",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",16),a["\u0275\u0275elementStart"](7,"span"),a["\u0275\u0275text"](8," All Data "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",17),a["\u0275\u0275elementStart"](10,"span"),a["\u0275\u0275text"](11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,Q,9,7,"nb-card",18),a["\u0275\u0275elementEnd"]()}if(2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("data",t.chartData)("options",t.chartOptions),a["\u0275\u0275advance"](10),a["\u0275\u0275textInterpolate"](t.orderStatesData.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.keyGroups)}}function tt(t,e){if(1&t&&a["\u0275\u0275element"](0,"smart-table",22),2&t){const t=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings)}}function et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",20),a["\u0275\u0275template"](1,tt,1,2,"smart-table",21),a["\u0275\u0275elementEnd"]()),2&t){const t=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.data&&t.data.length)}}function nt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275elementStart"](1,"h4",24),a["\u0275\u0275text"](2,"No Record Found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}const ot=[{path:"",component:l,children:[{path:"",component:M},{path:"dashboard",component:M},{path:"open-orders",component:F},{path:"order-boards",component:R},{path:"orders-won",component:q},{path:"order-trip-management",component:(()=>{class t{constructor(t,e,n,o){this.modalService=t,this.common=e,this.user=n,this.api=o,this.orderType="ftl",this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=null,this.valobj={},this.routeData=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getOrders(),this.common.refresh=this.refresh.bind(this)}refresh(){this.getOrders()}ngOnInit(){}resetData(){this.data=[],this.orderStatesData=[],this.stateGroups=[],this.stateGroupsKeys=null,this.keyGroups=[]}getOrders(){this.resetData(),this.common.loading++,this.api.get("Bidding/GetAcceptedOrders?orderType="+this.orderType).subscribe(t=>{this.common.loading--,console.log("test"),this.data=[],t.data&&(this.data=t.data,this.orderStatesData=t.data,this.routeData=t.data,this.grouping("Order Status"),this.generateTable())},t=>{this.common.loading--,this.common.showError()})}generateTable(){this.headings=this.getHeadings(),this.table={data:{headings:this.getHeadings(),columns:this.getTableColumns()},settings:{hideHeader:!0}}}getHeadings(){let t={};for(var e in this.orderStatesData[0])"_"!=e.charAt(0)&&(t[e]={title:this.formatTitle(e),placeholder:this.formatTitle(e)});return t.Action={title:"Action",hideSearch:!0},t}formatTitle(t){return t.charAt(0).toUpperCase()+t.slice(1)}getTableColumns(){let t=[];return console.log("heading",this.headings.length),this.data.map(e=>{console.log("doc",e),this.valobj={};for(let t in this.getHeadings())"Action"==t?(console.log("action",t),this.valobj[t]={value:"",action:null,html:!0,icons:this.actionIcons(e)}):this.valobj[t]={value:e[t],class:"black",action:""};t.push(this.valobj)}),t}grouping(t){console.log("viewType",t),this.stateGroups=u.groupBy(this.routeData,t),this.stateGroupsKeys=Object.keys(this.stateGroups),this.keyGroups=[],this.stateGroupsKeys.map(t=>{const e=Math.floor(359*Math.random()+1);this.keyGroups.push({name:t,bgColor:`hsl(${e}, 100%, 75%)`,textColor:`hsl(${e}, 100%, 25%)`})}),this.sortData(t)}sortData(t){let e=[];this.chartColors=[];let n=[],o=[];this.keyGroups.map(t=>{console.log("group",t,"this.stateGroups",this.stateGroups,"group.name=",t.name,"this.stateGroups[group.name]=",this.stateGroups[t.name]),e.push({group:t,length:this.stateGroups[t.name]?this.stateGroups[t.name].length:0})}),this.stateGroupsKeys=[],u.sortBy(e,["length"]).reverse().map(t=>{this.stateGroupsKeys.push(t.group)}),this.stateGroupsKeys.map(t=>{console.log("keyGroup",t,"keyGroup.name",'"'+t.name+'"',"this.stateGroups=",this.stateGroups,"this.stateGroups[keyGroup.name]=",this.stateGroups[t.name]),this.chartColors.push(t.bgColor),n.push(t.name),o.push(this.stateGroups[t.name].length)});let a=this.common.pieChart(n,o,this.chartColors);this.chartData=a.chartData,this.chartOptions=a.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,t)}allData(){this.selectedFilterKey="",this.filterData("All")}filterData(t,e){"All"==t?this.data=this.orderStatesData:(this.selectedFilterKey=t,this.data=this.orderStatesData.filter(e=>e["Order Status"]==t)),console.log("this.orderStatesData ",this.data),this.generateTable()}actionIcons(t){let e=[];return t.Action.isEdit&&e.push({class:" icon fas fa-edit blue",action:this.openAddOrder.bind(this,t)}),t.Action.isDelete&&e.push({class:"icon fa fa-trash red",action:this.deleteOrder.bind(this,t)}),t.Action.isView&&e.push({class:" icon fa fa-eye gray",action:this.viewOrder.bind(this,t)}),t.Action.isComplete&&e.push({class:" icon fa fa-check gray",action:this.openConfirmModal.bind(this,t,1)}),t.Action.isCancel&&e.push({class:" icon fa fa-times red",action:this.openConfirmModal.bind(this,t,-1)}),t.Action.isRouteTracker&&e.push({class:" icon fa fa-route",action:this.openRouteTracker.bind(this,t)}),e}openConfirmModal(t,e){let n="";1==e?n="complete":-1==e&&(n="Cancel");let o={orderId:t._id,status:e};confirm("Do you want "+n+" this Order ?")&&(this.common.loading++,this.api.post("Bidding/AcceptBid",o).subscribe(t=>{this.common.loading--,console.log("response:",t),t.data[0].y_id>0?(this.common.showToast("Action Sucessfully completed",1e4),this.getOrders()):this.common.showError(t.data[0].y_msg)},t=>{this.common.loading--,console.log(t)}))}viewOrder(t){this.common.params={data:{apiURL:"Bidding/GetOrder",title:"Order Details",params:{x_id:-t._id}}},this.modalService.open(g.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response)})}openAddOrder(t){this.common.params={order:{id:t?t._id:null,title:t&&t._id?"Update Order":"Add Order"}},this.modalService.open(d.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),t.response&&this.getOrders()})}openRouteTracker(t){this.common.params={orderId:t._id,orderType:this.orderType},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(W.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response)})}showBidData(t){this.common.params={order:{id:t?t._id:null,orderType:t._order_type}},this.modalService.open(p.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(t=>{console.log("data",t.response),t.response&&this.getOrders()})}deleteOrder(t){let e={entityId:t._id,entityType:"order"};t._id&&(this.common.params={title:"Delete Record",description:"<b>&nbsp;Are Sure To Delete This Order<b>"},this.modalService.open(m.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&(this.common.loading++,this.api.post("Bidding/deleteEntity",e).subscribe(t=>{this.common.loading--,t.data[0].y_id>0?(this.common.showToast("Successfully Deleted."),this.getOrders()):this.common.showError(t.data[0].y_msg),console.log("res",t.data)},t=>{this.common.loading--,this.common.showError()}))}))}}return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.r),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](h.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["order-trip-management"]],decls:18,vars:5,consts:[[1,"row"],[1,"col-sm-5"],[2,"padding","10px 15px"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[1,"row","mt-3"],["class","col-3",4,"ngIf"],["class","col-9",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],[1,"col-3"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-8"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-9"],[3,"data","settings",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","col-12"],[1,"no-record"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"h5"),a["\u0275\u0275text"](5,"Trip Management"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"nb-card-body",2),a["\u0275\u0275elementStart"](7,"div",0),a["\u0275\u0275elementStart"](8,"div",3),a["\u0275\u0275elementStart"](9,"ul",4),a["\u0275\u0275elementStart"](10,"li",5),a["\u0275\u0275listener"]("click",(function(){return e.orderType="bulk",e.getOrders()})),a["\u0275\u0275text"](11," Bulk "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"li",6),a["\u0275\u0275listener"]("click",(function(){return e.orderType="ftl",e.getOrders()})),a["\u0275\u0275text"](13," FTL/LTL "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",7),a["\u0275\u0275template"](15,X,13,4,"div",8),a["\u0275\u0275template"](16,et,2,1,"div",9),a["\u0275\u0275template"](17,nt,3,0,"div",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngClass","bulk"==e.orderType?"active":""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass","ftl"==e.orderType?"active":""),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.orderStatesData.length>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.data&&e.data.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.data||!e.data.length))},directives:[s.s,s.v,s.r,y.r,y.u,_.ChartComponent,y.t,y.x,v.a],pipes:[y.G],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .red{color:red;font-weight:700}[_nghost-%COMP%]    .lightred{background-color:#e27a73;font-weight:700}[_nghost-%COMP%]    .lightgreen{background-color:#92e881;font-weight:700}[_nghost-%COMP%]    .icon{margin-left:6px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 16px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}']}),t})()}]}];let at=(()=>{class t{}return t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.g.forChild(ot)],r.g]}),t})();var rt=n("vTDv"),it=n("d2mR"),st=n("FUS3");let lt=(()=>{class t{}return t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[rt.a,at,it.a,st.a,_.ChartModule]]}),t})()}}]);