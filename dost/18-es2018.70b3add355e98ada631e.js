(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{CHJM:function(t,e,o){"use strict";o.r(e),o.d(e,"IntelligenceModule",(function(){return M}));const n=[{title:"Dashboard",icon:"nb-home",link:"/pages/dashboard",home:!0},{title:"Calculator",icon:"nb-home",link:"/intelligence/profit-calculator"}];var i=o("8Y7J"),s=o("IAMq"),a=o("tKwJ"),r=o("iInd");let l=(()=>{class t{constructor(){this.menu=n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"ngx-sample-layout"),i["\u0275\u0275element"](1,"nb-menu",0),i["\u0275\u0275element"](2,"router-outlet"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("items",e.menu))},directives:[s.a,a.W,r.h],encapsulation:2}),t})();var d=o("vTDv");let c=(()=>{class t{}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[d.a]]}),t})();var g=o("H+bZ"),u=o("OlR4"),m=o("EnSQ"),h=o("HXSw"),p=o("G0yt"),f=o("SVse"),x=o("s7LF");function v(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const e=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().deleteRoute("cost",e)})),i["\u0275\u0275elementEnd"]()}}function b(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275template"](1,v,1,0,"div",18),i["\u0275\u0275elementStart"](2,"div",19),i["\u0275\u0275elementStart"](3,"div",20),i["\u0275\u0275elementStart"](4,"input",21),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.origin.name=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"i",22),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=i["\u0275\u0275nextContext"]();return n.showLocation(o,n.cal="costPick")})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",23),i["\u0275\u0275elementStart"](7,"span",24),i["\u0275\u0275text"](8,"TO"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",20),i["\u0275\u0275elementStart"](10,"input",25),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.destination.name=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"i",22),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=i["\u0275\u0275nextContext"]();return n.showLocation(o,n.cal="costDrop")})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,o=e.index,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0!=o||n.editCost.route),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("name","cost_origin_"+o)("id","cost_origin_"+o)("ngModel",t.origin.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("name","cost_destination_"+o)("id","cost_destination_"+o)("ngModel",t.destination.name)}}function S(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2,"Complete Loop"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",27),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().selected.loop.cost=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.selected.loop.cost)}}function R(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const e=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().deleteRoute("profit",e)})),i["\u0275\u0275elementEnd"]()}}function y(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",47),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit;return i["\u0275\u0275nextContext"]().$implicit.brokerage=o})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("ngClass",o.brokerage==t?"active":""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t)}}function C(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",47),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit;return i["\u0275\u0275nextContext"]().$implicit.loading=o})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("ngClass",o.loading==t?"active":""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t)}}function k(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",47),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit;return i["\u0275\u0275nextContext"]().$implicit.unloading=o})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,o=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("ngClass",o.unloading==t?"active":""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t)}}function w(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",28),i["\u0275\u0275template"](1,R,1,0,"div",18),i["\u0275\u0275elementStart"](2,"div",29),i["\u0275\u0275elementStart"](3,"div",20),i["\u0275\u0275elementStart"](4,"input",30),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.origin.name=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"i",22),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=i["\u0275\u0275nextContext"]();return n.showLocation(o,n.cal="profitPickup")})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",23),i["\u0275\u0275elementStart"](7,"span",24),i["\u0275\u0275text"](8,"TO"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",20),i["\u0275\u0275elementStart"](10,"input",31),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.destination.name=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"i",22),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=i["\u0275\u0275nextContext"]();return n.showLocation(o,n.cal="profitDrop")})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"p",32),i["\u0275\u0275text"](13,"Loading Details"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",29),i["\u0275\u0275elementStart"](15,"div",33),i["\u0275\u0275elementStart"](16,"input",34),i["\u0275\u0275listener"]("input",(function(o){i["\u0275\u0275restoreView"](t);const n=e.index;return i["\u0275\u0275nextContext"]().getBrokerage(o.target.value,n)}))("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.rate=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",35),i["\u0275\u0275elementStart"](18,"button",36),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=e.index,s=i["\u0275\u0275nextContext"]();return o.rate=s.addRate(o.rate,1e3,"profit_rate_"+n)})),i["\u0275\u0275text"](19,"+1000"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"button",37),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=e.index,s=i["\u0275\u0275nextContext"]();return o.rate=s.addRate(o.rate,500,"profit_rate_"+n)})),i["\u0275\u0275text"](21,"+500"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",38),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=e.index,s=i["\u0275\u0275nextContext"]();return o.rate=s.addRate(o.rate,100,"profit_rate_"+n)})),i["\u0275\u0275text"](23,"+100"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"button",39),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](t);const o=e.$implicit,n=e.index,s=i["\u0275\u0275nextContext"]();return o.rate=s.addRate(o.rate,10,"profit_rate_"+n)})),i["\u0275\u0275text"](25,"+10"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",29),i["\u0275\u0275elementStart"](27,"div",33),i["\u0275\u0275elementStart"](28,"input",40),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.tonnage=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",35),i["\u0275\u0275elementStart"](30,"button",41),i["\u0275\u0275text"](31,"26"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"button",41),i["\u0275\u0275text"](33,"27"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"button",41),i["\u0275\u0275text"](35,"28"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"button",41),i["\u0275\u0275text"](37,"29"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",29),i["\u0275\u0275elementStart"](39,"div",33),i["\u0275\u0275elementStart"](40,"input",42),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.brokerage=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"div",35),i["\u0275\u0275template"](42,y,2,2,"button",43),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"div",29),i["\u0275\u0275elementStart"](44,"div",33),i["\u0275\u0275elementStart"](45,"input",44),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.loading=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"div",35),i["\u0275\u0275template"](47,C,2,2,"button",45),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"div",29),i["\u0275\u0275elementStart"](49,"div",33),i["\u0275\u0275elementStart"](50,"input",46),i["\u0275\u0275listener"]("ngModelChange",(function(o){return i["\u0275\u0275restoreView"](t),e.$implicit.unloading=o})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](51,"div",35),i["\u0275\u0275template"](52,k,2,2,"button",43),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,o=e.index,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0!=o||n.edit.route),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("name","profit_origin_"+o)("id","profit_origin_"+o)("ngModel",t.origin.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("name","profit_destination_"+o)("id","profit_destination_"+o)("ngModel",t.destination.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("name","profit_rate_"+o)("id","profit_rate_"+o)("ngModel",t.rate),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",1e3==t.tonnage?"active":""),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",500==t.tonnage?"active":""),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",100==t.tonnage?"active":""),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",10==t.tonnage?"active":""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("name","profit_tonnage_"+o)("id","profit_tonnage_"+o)("ngModel",t.tonnage),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("name","profit_brokerage_"+o)("id","profit_brokerage_"+o)("ngModel",t.brokerage),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.brokrageRates),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("name","profit_loading_"+o)("id","profit_loading_"+o)("ngModel",t.loading),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.loadingRates),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("name","profit_unloading_"+o)("id","profit_unloading_"+o)("ngModel",t.unloading),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.unloadingRates)}}function E(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2,"Complete Loop"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",27),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().selected.loop.profit=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.selected.loop.profit)}}let I=(()=>{class t{constructor(t,e,o,n,i,s){this.zone=t,this.api=e,this.common=o,this.data=n,this.router=i,this.modalService=s,this.selected={calculator:"profit",tonnage:0,brokerage:0,loading:0,unloading:0,loop:{profit:!1,cost:!1}},this.routes={cost:[{origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1}],profit:[{origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1,rate:null,tonnage:null,brokerage:null,loading:null,unloading:null,loadingRates:[20,30,40,50],unloadingRates:[20,30,40,50],brokrageRates:[1300,1200,1e3,800]}]},this.edit={route:null,index:-1},this.editCost={route:null,index:-1},this.loadingRates=[20,30,40,50],this.unloadingRates=[20,30,40,50],this.getLoadingUnloading("tonnage","","","","")}ngAfterViewInit(){setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_0",0,"origin"),3e3),setTimeout(this.autoSuggestion.bind(this,"cost","cost_destination_0",0,"destination"),3e3),setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_0",0,"origin"),3e3),setTimeout(this.autoSuggestion.bind(this,"profit","profit_destination_0",0,"destination"),3e3)}autoSuggestion(t,e,o,n){let i=document.getElementById(e),s=new google.maps.places.Autocomplete(i,{types:["(cities)"],componentRestrictions:{country:"in"}});google.maps.event.addListener(s,"place_changed",this.getLocation.bind(this,s,t,o,n))}getLocation(t,e,o,n){let i=t.getPlace();this.zone.run(()=>{this.routes[e][o][n].lat=i.geometry.location.lat(),this.routes[e][o][n].lng=i.geometry.location.lng(),this.routes[e][o][n].name=i.formatted_address,this.routes[e][o].origin.lat&&this.routes[e][o].destination.lat&&"cost"==e&&(this.routes[e][o].status=!0),"profit"===e&&this.getLoadingUnloading("origin"===n?"loading":"unloading",i.formatted_address,i.geometry.location.lat(),i.geometry.location.lng(),o)})}addCostRoute(){console.log("afterAddClick"),this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,this.editCost.index=-1,this.editCost.route=null):this.routes.cost[this.routes.cost.length-1]&&(this.routes.cost[this.routes.cost.length-1].status=!0),this.routes.cost.push({origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1});let t="cost_destination_"+(this.routes.cost.length-1);setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_"+(this.routes.cost.length-1),this.routes.cost.length-1,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"cost",t,this.routes.cost.length-1,"destination"),500)}addProfitRoute(){this.routes.profit.push({origin:{name:"",lat:"",lng:"",marker:null},destination:{name:"",lat:"",lng:"",marker:null},status:!1,rate:null,tonnage:null,brokerage:null,loading:null,unloading:null,loadingRates:[20,30,40,50],unloadingRates:[20,30,40,50],brokrageRates:[1300,1200,1e3,800]});let t="profit_destination_"+(this.routes.profit.length-1);setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_"+(this.routes.profit.length-1),this.routes.profit.length-1,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"profit",t,this.routes.profit.length-1,"destination"),500)}deleteRoute(t,e){return this.removeDummyRoutes(t),"profit"==t&&this.edit.route?(this.routes.profit[this.edit.index].status=!0,void this.clearData()):"cost"==t&&this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,void(this.editCost={index:-1,route:null})):(this.routes[t].length&&this.routes[t][e]&&(this.routes[t][e].origin.marker&&(this.routes[t][e].origin.marker.setMap(null),this.routes[t][e].destination.marker.setMap(null)),this.routes[t].splice(e,1)),void(this.routes[t].length||"cost"!==t?this.routes[t].length||"profit"!==t||this.addProfitRoute():this.addCostRoute()))}removeDummyRoutes(t){this.routes[t]=this.routes[t].filter(t=>!(!t.origin.lat||!t.destination.lat))}mapViewer(t){this.common.searchId=null,"profit"==t&&this.edit.route?(this.routes.profit[this.edit.index].status=!0,this.clearData()):"profit"!=t||this.checkRouteStatus("profit",this.routes.profit.length-1)?"profit"==t?this.removeDummyRoutes("profit"):"cost"==t&&this.editCost.route?(this.routes.cost[this.editCost.index].status=!0,this.editCost={index:-1,route:null}):"cost"!=t||this.checkRouteStatus("cost",this.routes.cost.length-1)?"cost"==t&&this.removeDummyRoutes("cost"):this.routes.cost[this.routes.cost.length-1].status=!0:this.routes.profit[this.routes.profit.length-1].status=!0,this.data.routes[t]=this.routes[t]}calculateBrokerage(t,e){this.routes.profit[t].brokerage=this.routes.profit[t].rate*this.routes.profit[t].tonnage/100*e}brokerageOptions(t){return t.rate>=2e3?[1500,1300,1200,1e3]:t.rate<1e3&&t.rate>1?[1e3,800,500,300]:[1300,1200,1e3,800]}checkRouteStatus(t,e){let o=this.routes[t][e];return!("profit"==t&&o.origin.lat&&o.destination.lat&&o.rate&&o.tonnage&&o.brokerage&&o.loading&&o.unloading||"cost"==t&&o.origin.lat&&o.destination.lat)}editRoute(t,e){this.removeDummyRoutes("profit"),console.log("Route:",t),this.edit.route&&(this.routes.profit[this.edit.index].status=!0),this.edit={route:Object.assign({},t),index:e},console.log("Index:",e),this.routes.profit[e].status=!1,setTimeout(this.autoSuggestion.bind(this,"profit","profit_origin_"+e,0,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"profit","profit_destination_"+e,0,"destination"),500)}editCostRoute(t,e){this.removeDummyRoutes("cost"),this.edit.route&&(this.routes.cost[this.edit.index].status=!0),this.editCost={route:Object.assign({},t),index:e},this.routes.cost[e].status=!1,setTimeout(this.autoSuggestion.bind(this,"cost","cost_origin_"+e,0,"origin"),500),setTimeout(this.autoSuggestion.bind(this,"cost","cost_destination_"+e,0,"destination"),500)}resetData(t){this.edit.route?(this.routes.profit[this.edit.index]=Object.assign({},this.edit.route),this.edit={route:null,index:-1}):(console.log("Index",t),this.deleteRoute("profit",t))}clearData(){this.edit={route:null,index:-1}}getLoadingUnloading(t,e,o,n,i,s=0){const a={type:t,place:e,lat:o,lng:n,rate:s};console.log(a),this.api.post("inputSuggestion",a).subscribe(e=>{if(console.log(e),!this.common.handleApiResponce(e))return this.common.showToast(e.msg),void localStorage.clear();"tonnage"!=t?(console.log(i),console.log(this.routes.profit[i]),this.routes.profit[i][t+"Rates"]=e.data.values):this.tonnageRates=e.data.values},t=>{})}checkAddProfitRoute(){this.edit.route?(this.routes.profit[this.edit.index].status=!0,this.clearData()):this.routes.profit[this.routes.profit.length-1].status=!0,this.addProfitRoute()}logout(){this.common.loading++,this.api.post("login",{type:"logout"}).subscribe(t=>{console.log(t),this.common.loading--,this.common.showToast(t.msg),localStorage.clear()},t=>{console.log(t),this.common.loading--})}isShowLoopOption(t){return this.routes[t].length<2?(this.selected.loop[t]=!1,!1):this.routes[t][0].origin.name!=this.routes[t][this.routes[t].length-1].destination.name||(this.selected.loop[t]=!1,!1)}showLocation(t,e){console.log("text==",this.common.params),this.common.params={location,title:"Vehicle Pickup Point"},this.modalService.open(h.a,{size:"lg",container:"nb-layout"}).result.then(o=>{console.log("Location name: ",o.location.name),"costPick"==e&&(t.origin.name=o.location.name),"costDrop"==e&&(t.destination.name=o.location.name),"profitPickup"==e&&(t.origin.name=o.location.name,console.log("profitPick inthis")),"profitDrop"==e&&(t.destination.name=o.location.name,console.log("profitDrop inthis"))})}getBrokerage(t,e){t.length>=3&&this.getLoadingUnloading("brokrage","","","",e,t)}addRate(t,e,o){return setTimeout(this.removeEffetc.bind(this,o),500),console.log(t),console.log(e),null==t?e:("string"==typeof t||console.log(typeof(parseInt(t)+parseInt(e))),parseInt(t)+parseInt(e))}removeEffetc(t){}goToPage(t){this.router.navigate(["/intelligence/path-viewer"])}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](r.c),i["\u0275\u0275directiveInject"](p.r))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["profit-calculator"]],decls:37,vars:6,consts:[[2,"border","none"],[2,"font-size","20px"],["tabTitle","Cost Calculator",3,"ngClass","click"],[1,"row-cal",2,"margin","20px 0"],["id","cost-calculator",1,"col-md-12","routes"],["class","input-position",4,"ngFor","ngForOf"],[1,"route-options",2,"margin","20px 0"],["block","",1,"btn","btn-success",2,"margin-right","15px","font-size","12px","padding","7px",3,"click"],["name","add-circle"],[4,"ngIf"],["tabTitle","Profit Calculator",3,"ngClass","click"],["id","profit-calculator",1,"routes"],["class","input-position","style","position:relative",4,"ngFor","ngForOf"],[1,"cal-btn"],[1,"btn","btn-success",2,"margin-right","15px","font-size","12px","padding","7px",3,"click"],[1,"row-btn"],["mini","",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"click"],[1,"input-position"],["name","close","class","delete-route","style","top:0px; background: #607D8B; color: #fff; border-radius: 50% 0% 50% 50%;",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-5",2,"padding-left","4px","margin-top","15px"],["type","text","placeholder","Enter pickup point",1,"location-input","form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-map-marker",2,"bottom","32px","right","10px","font-size","20px","float","right","position","relative",3,"click"],["col-1","",2,"padding","30px 10px 0 0px"],[1,"route-to"],["type","text","placeholder","Enter drop point",1,"location-input","form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["name","close",1,"delete-route",2,"top","0px","background","#607D8B","color","#fff","border-radius","50% 0% 50% 50%",3,"click"],["checked","false","name","loop",3,"ngModel","ngModelChange"],[1,"input-position",2,"position","relative"],[1,"row",2,"margin","20px 0"],["type","text","placeholder","Enter pickup point",1,"form-control",2,"padding","10px","font-size","12px",3,"name","id","ngModel","ngModelChange"],["type","text","placeholder","Enter drop point",1,"form-control",3,"name","id","ngModel","ngModelChange"],[1,"section",2,"margin-top","15px"],[1,"col-md-4",2,"padding-left","4px","margin-top","15px"],["type","number","placeholder","Rate/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","input","ngModelChange"],[1,"col-md-8",2,"padding-top","16px"],["id","bnt-1000",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-500",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-100",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["id","bnt-10",1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"],["type","number","placeholder","Tonnage",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],[1,"btn","btn-success","btn-xs",2,"margin-right","15px"],["type","number","placeholder","Brokerage",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],["style","margin-right:15px;","class","btn btn-success btn-xs",3,"ngClass","click",4,"ngFor","ngForOf"],["type","number","placeholder","Loading/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],["class","btn btn-success btn-xs","style","margin-right:15px;",3,"ngClass","click",4,"ngFor","ngForOf"],["type","number","placeholder","Unloading/Tonne",1,"form-control",2,"padding","7px","font-size","10px",3,"name","id","ngModel","ngModelChange"],[1,"btn","btn-success","btn-xs",2,"margin-right","15px",3,"ngClass","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"nb-card",0),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3,"Calculator"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"nb-card-body"),i["\u0275\u0275elementStart"](5,"nb-tabset"),i["\u0275\u0275elementStart"](6,"nb-tab",2),i["\u0275\u0275listener"]("click",(function(){return e.selected.calculator="cost"})),i["\u0275\u0275elementStart"](7,"div",3),i["\u0275\u0275elementStart"](8,"div",4),i["\u0275\u0275template"](9,b,12,7,"div",5),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275elementStart"](11,"button",7),i["\u0275\u0275listener"]("click",(function(){return e.addCostRoute()})),i["\u0275\u0275element"](12,"div",8),i["\u0275\u0275text"](13," \xa0Add Route "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"button",7),i["\u0275\u0275listener"]("click",(function(){return e.mapViewer("cost")})),i["\u0275\u0275text"](15," Calculate Cost "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,S,4,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"nb-tab",10),i["\u0275\u0275listener"]("click",(function(){return e.selected.calculator="profit"})),i["\u0275\u0275elementStart"](18,"div"),i["\u0275\u0275elementStart"](19,"div",11),i["\u0275\u0275template"](20,w,53,29,"div",12),i["\u0275\u0275elementStart"](21,"div",13),i["\u0275\u0275elementStart"](22,"button",7),i["\u0275\u0275listener"]("click",(function(){return e.checkAddProfitRoute()})),i["\u0275\u0275element"](23,"div",8),i["\u0275\u0275text"](24," \xa0Add Route "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"button",14),i["\u0275\u0275listener"]("click",(function(){return e.goToPage("page")})),i["\u0275\u0275text"](26," Calculate Profit "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](27,E,4,1,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"div",15),i["\u0275\u0275elementStart"](29,"button",16),i["\u0275\u0275listener"]("click",(function(){return e.logout()})),i["\u0275\u0275text"](30," Logout "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"button",16),i["\u0275\u0275listener"]("click",(function(){return e.goToPage("BoosterPage")})),i["\u0275\u0275text"](32," Booster Page "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"button",16),i["\u0275\u0275listener"]("click",(function(){return e.goToPage("VehiclesPage")})),i["\u0275\u0275text"](34," Vehicle Page "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"button",16),i["\u0275\u0275listener"]("click",(function(){return e.goToPage("BoostedPage")})),i["\u0275\u0275text"](36," Boosted Page "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngClass","cost"==e.selected.calculator?"active":"in-active"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.routes.cost),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",e.isShowLoopOption("cost")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass","profit"==e.selected.calculator?"active":"in-active"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.routes.profit),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",e.isShowLoopOption("profit")))},directives:[a.s,a.v,a.r,a.Hb,a.Gb,f.r,f.t,f.u,x.d,x.r,x.u,x.x],styles:[""]}),t})();const L=["map"],P=[{path:"",component:l,children:[{path:"dashboard",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["dashboard"]],decls:6,vars:0,consts:[[1,"row"],[1,"ion-arrow-return-left"],[1,"icon","ion-md-exit"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"nb-card"),i["\u0275\u0275elementStart"](2,"nb-card-body"),i["\u0275\u0275element"](3,"i",1),i["\u0275\u0275element"](4,"i",2),i["\u0275\u0275text"](5," Hello from ngx-admin sandbox project."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},directives:[a.s,a.r],styles:[""]}),t})()},{path:"profit-calculator",component:I},{path:"path-viewer",component:(()=>{class t{constructor(t,e,o,n){this.zone=t,this.api=e,this.common=o,this.data=n,this.routes=[],this.costRoutes=[],this.costRoutesCopy=[],this.routeLines=[],this.linkLines=[],this.showLines=[],this.routeType="",this.loadedRoutes=[],this.total={profit:0,cost:0,revenue:0},this.viewType="map",this.connect=!1,this.selected={suggestion:[]},this.geocoder=null,this.showInfo=-1,this.hideInfo=-1,this.runningPolyline1=null,this.runningPolyline2=null,this.runningPolyline3=null,this.isRunPolyline=!1,this.bounds=null,this.common.params.routes&&(localStorage.setItem("ROUTES",JSON.stringify(this.common.params.routes)),localStorage.setItem("ROUTE_TYPE",this.common.params.routeType),this.connect=this.common.params.connect),this.routeType=localStorage.getItem("ROUTE_TYPE"),this.routes=JSON.parse(localStorage.getItem("ROUTES")),"cost"==this.routeType?this.getCostRoutesFromAPI():"profit"==this.routeType&&this.getProfitRoutesFromAPI()}ngAfterViewInit(){console.log("ionViewDidLoad PathViewerPage"),this.loadMap()}loadMap(t=26.9124336,e=75.78727090000007){let o={center:new google.maps.LatLng(t,e),zoom:5,disableDefaultUI:!0,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.mapElement.nativeElement,o),this.geocoder=new google.maps.Geocoder}getCostRoutesFromAPI(t=!1){this.removeDummyRoutes();let e=[];this.routes.map(t=>{e.push({origin:{name:t.origin.name,lat:t.origin.lat,lng:t.origin.lng},destination:{name:t.destination.name,lat:t.destination.lat,lng:t.destination.lng}})}),console.log(e),console.log(e);const o={routes:e,searchId:this.common.searchId||-1,connect:this.connect};console.log(o),this.api.postJava("info",o).subscribe(e=>(console.log("Res:",e),this.common.handleApiResponce(e)?(localStorage.setItem("COSTROUTES",JSON.stringify(e)),e.success?(t||(this.common.searchId=e.data.searchId),localStorage.setItem("COSTROUTES",JSON.stringify(e.data.routes)),void this.handleCostRoutes(e.data.routes)):void this.common.showToast(e.msg)):(this.common.showToast(e.msg),void localStorage.clear())),t=>{console.error("Error",t)})}getProfitRoutesFromAPI(t=!1){this.removeDummyRoutes();let e=[];this.routes.map(t=>{e.push({origin:{name:t.origin.name,lat:t.origin.lat,lng:t.origin.lng},destination:{name:t.destination.name,lat:t.destination.lat,lng:t.destination.lng},rate:t.rate,tonnage:t.tonnage,brokerage:t.brokerage,loading:t.loading,unloading:t.unloading})}),console.log(e);const o={routes:e,searchId:this.common.searchId||-1,connect:this.connect};console.log(o),this.api.post("infoprofit",o).subscribe(e=>(console.log("Res:",e),this.common.handleApiResponce(e)?e.success?(t||(this.common.searchId=e.data.searchId,localStorage.setItem("SEARCH_ID",e.data.searchId)),localStorage.setItem("COSTROUTES",JSON.stringify(e.data.routes)),console.log("Test: ",JSON.parse(localStorage.getItem("COSTROUTES"))),this.handleCostRoutes(e.data.routes),void this.initializeSelectedSuggestion()):void this.common.showToast(e.msg):(this.common.showToast(e.msg),void localStorage.clear())),t=>{console.error("Error",t)})}removeDummyRoutes(){this.routes=this.routes.filter(t=>!(!t.origin.lat||!t.destination.lat))}handleCostRoutes(t,e="search"){this.data.costRoutes=t,this.costRoutes=t,"search"==e&&(this.costRoutesCopy=Object.assign({},this.costRoutes),this.loadedRoutes=[],t.map((t,e)=>{t.isLoaded&&this.loadedRoutes.push({index:e,route:t})})),this.calulateTotalCost(),"profit"==this.routeType&&(console.log("Calculate Profit"),this.calculateProfit());let o=0,n=0;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=0;this.costRoutes.map((t,e)=>{t.latLng.length&&t.isLoaded&&(this.routes[o].origin.lat=t.latLng[0].lat,this.routes[o].origin.lng=t.latLng[0].lng,console.log(this.routes[o].origin.lat,this.routes[o].origin.lng,o),this.routes[o].destination.lat=t.latLng[t.latLng.length-1].lat,this.routes[o].destination.lng=t.latLng[t.latLng.length-1].lng,this.setMarker(o,"origin",i[s++%i.length]),this.setMarker(o,"destination",i[s++%i.length]),this.drawRoute2(e,"routeLines",t.isLoaded,o),console.log("Routes: ",this.routes,t,t.latLng[0].lat,t.latLng[0].lng),o++)}),this.costRoutes.map((t,e)=>{t.latLng.length&&(t.isLoaded||(this.drawRoute2(e,"linkLines",t.isLoaded,n),n++))}),this.getRoutes2(),this.initializeRunPolyline()}calulateTotalCost(){this.costRoutes.map(t=>{t.cost.totalCost.value=t.cost.fuel.value+t.cost.border.value+t.cost.toll.value+t.cost.loading.value+t.cost.unloading.value,t.cost.brokerage&&(t.cost.totalCost.value+=t.cost.brokerage.value),console.log("Total Cost:",t.cost.totalCost)})}setMarker(t,e,o="0"){let n=new google.maps.LatLng(this.routes[t][e].lat,this.routes[t][e].lng);this.routes[t][e].marker?this.routes[t][e].marker.setPosition(n):(this.routes[t][e].marker=new google.maps.Marker({position:{lat:this.routes[t][e].lat,lng:this.routes[t][e].lng},map:this.map,draggable:!0,animation:google.maps.Animation.DROP,title:this.routes[t][e].name,label:o}),google.maps.event.addListener(this.routes[t][e].marker,"dragend",this.markerPositionChangd.bind(this,t,e)),this.createInfoWindow(t,e),this.routes[t][e].marker.addListener("click",this.showInfoWindow.bind(this,t,e))),localStorage.getItem("MARKER_MOVED")||this.bounceMarker()}createInfoWindow(t,e){var o=new google.maps.InfoWindow({content:`\n      <h4 style="margin:0px; font-size: 14px;">${this.routes[t][e].name}</h4>\n      `});this.routes[t][e].infowindow=o}showInfoWindow(t,e){console.log(e,t),this.routes[t][e].infowindow.open(this.map,this.routes[t][e].marker)}drawRoute2(t,e,o,n){if(console.log("polylines",this[e]),this[e][n])for(var i=0;i<this[e][n].length;i++)this[e][n][i].setMap(null);this[e][n]=[];let s=o?"black":"red",a=null;a=o?new google.maps.Polyline({map:this.map,strokeColor:s,strokeOpacity:1,strokeWeight:2.5,geodesic:!0}):new google.maps.Polyline({map:this.map,strokeColor:s,strokeOpacity:1,strokeWeight:1.5,geodesic:!0}),this[e][n].push(a),console.log("CostIndex:",t),console.log("Cost:",this.costRoutes[t]),"string"==typeof this.costRoutes[t].latLng&&(this.costRoutes[t].latLng=JSON.parse(this.costRoutes[t].latLng)),console.log("Cost:",this.costRoutes[t]),this.costRoutes[t].latLng.map((t,e)=>{a.getPath().push(new google.maps.LatLng(t.lat,t.lng))}),a.setMap(this.map),console.log(this[e]),this.map.setCenter({lat:this.costRoutes[t].latLng[0].lat,lng:this.costRoutes[t].latLng[0].lng})}getRoutes2(){this.removeDummyRoutes();for(let t=0;t<this.routes.length;t++)this.routes[t].origin.lat&&this.routes[t].destination.lat&&(this.setMarker(t,"origin"),this.setMarker(t,"destination"))}markerPositionChangd(t,e){localStorage.setItem("MARKER_MOVED","YES"),this.routes[t][e].lat=this.routes[t][e].marker.getPosition().lat(),this.routes[t][e].lng=this.routes[t][e].marker.getPosition().lng(),this.geocoder.geocode({location:{lat:this.routes[t][e].lat,lng:this.routes[t][e].lng}},this.getAddress.bind(this,t,e))}bounceMarker(){localStorage.getItem("MARKER_MOVED")||(null!==this.routes[0].origin.marker.getAnimation()?this.routes[0].origin.marker.setAnimation(null):this.routes[0].origin.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(this.bounceMarker.bind(this),500))}viewDetails(){this.isRunPolyline=!1}goBack(){this.isRunPolyline=!1}routeShower(){}clearShowLines(){}calculateProfit(){this.total={profit:0,cost:0,revenue:0},this.costRoutes.map(t=>{this.total.profit+=t.cost.profit.value,this.total.cost+=t.cost.totalCost.value,this.total.revenue+=t.cost.revenue.value}),console.log("Total:",this.total)}handleZoom(t){let e=this.map.getZoom();this.map.setZoom(t?e+1:e-1)}getAddress(t,e,o,n){console.log(o),console.log(n),o[0]&&(console.log(o[0].formatted_address),this.routes[t][e].name=o[0].formatted_address),this.isRunPolyline=!1,"cost"==this.routeType?this.getCostRoutesFromAPI(!0):"profit"==this.routeType&&this.getProfitRoutesFromAPI(!0)}viewSuggestion(){console.log("Tets")}initializeSelectedSuggestion(){this.selected.suggestion=[];for(let t=0;t<this.loadedRoutes.length;t++)this.selected.suggestion[t]=-1}selectSuggestion(t,e,o,n,i){console.log("Route: ",n),console.log("Suggestion: ",i),this.selected.suggestion[e]="route"==t?-1:o;let s={routeId:n.id,index:"route"==t?-1:i.index,suggestionId:"route"==t?n.route.id:i.id,preId:0!=e?this.loadedRoutes[e-1].route.id:-1,nextId:e!=this.loadedRoutes.length-1?this.loadedRoutes[e+1].route.id:this.connect?this.loadedRoutes[0].route.id:-1,data:{rate:-1,tonnage:-1,brokrage:-1,loading:-1,unloading:-1}};console.log("Suggetion Data: ",s,e),this.getSuggestData(s,e,n.route.id)}getSuggestData(t,e,o){this.isRunPolyline=!1,this.api.post("segmentSuggestion",t).subscribe(t=>{if(console.log("RES: ",t),!this.common.handleApiResponce(t))return this.common.showToast(t.msg),void localStorage.clear();this.handleSuggestionUpdate(t.data.routes,e,o)},t=>{console.log(t)})}handleSuggestionUpdate(t,e,o){let n=this.loadedRoutes[e].index;this.costRoutes[n]=t[1],"string"==typeof this.costRoutes[n].latLng&&(this.costRoutes[n].latLng=JSON.parse(this.costRoutes[n].latLng)),t[0]&&(this.costRoutes[n-1]=t[0],"string"==typeof this.costRoutes[n-1].latLng&&(this.costRoutes[n-1].latLng=JSON.parse(this.costRoutes[n-1].latLng))),t[2]&&(this.costRoutes[n+1]=t[2],"string"==typeof this.costRoutes[n+1].latLng&&(this.costRoutes[n+1].latLng=JSON.parse(this.costRoutes[n+1].latLng))),console.log(this.costRoutes),this.handleCostRoutes(this.costRoutes,"suggestion")}showSuggestion(){document.getElementById("suggestion").className="suggestion suggestion-show animated slideInUp"}hideSuggestion(){document.getElementById("suggestion").className="suggestion suggestion-show animated slideOutDown",setTimeout(()=>{document.getElementById("suggestion").className="suggestion animated slideOutDown"},500)}editLoadDetails(t,e,o,n,i){null.onDidDismiss(s=>{if(console.log(s),!s.status)return;this.hideInfo=this.showInfo,this.showInfo=-1,this.selected.suggestion[e]="route"==t?-1:o;let a={index:"route"==t?-1:i.index,suggestionId:"route"==t?n.route.id:i.id,preId:0!=e?this.loadedRoutes[e-1].route.id:-1,nextId:e!=this.loadedRoutes.length-1?this.loadedRoutes[e+1].route.id:this.connect?this.loadedRoutes[0].route.id:-1,data:{rate:s.load.rate!=i.rate?s.load.rate:-1,tonnage:s.load.tonnage!=i.tonnage?s.load.tonnage:-1,brokrage:s.load.brokrage!=i.brokrage?s.load.brokrage:-1,loading:s.load.loading!=i.loading?s.load.loading:-1,unloading:s.load.unloading!=i.unloading?s.load.unloading!=i.unloading:-1}};this.loadedRoutes[e].route.suggestions[o].rate=s.load.rate,this.loadedRoutes[e].route.suggestions[o].tonnage=s.load.tonnage,this.loadedRoutes[e].route.suggestions[o].brokrage=s.load.brokrage,this.loadedRoutes[e].route.suggestions[o].loading=s.load.loading,this.loadedRoutes[e].route.suggestions[o].unloading=s.load.unloading,console.log("Suggetion Data: ",a,e),this.getSuggestData(a,e,n.route.id)}),null.present()}showHideInfo(t){this.hideInfo=this.showInfo,this.showInfo=this.showInfo!=t?t:-1,console.log("Id:",t),console.log("hideInfo:",this.hideInfo),console.log("showInfo:",this.showInfo)}initializeRunPolyline(){let t=[];this.costRoutes.map(e=>{e.latLng.map(e=>t.push(e))}),this.setBounds(),this.isRunPolyline=!0,this.setRunPolyline(t,"1")}setRunPolyline(t,e="1"){this["runningPolyline"+e]&&this["runningPolyline"+e].setMap(null),this["runningPolyline"+e]=new google.maps.Polyline({map:this.map,strokeColor:"#f2f2f2",strokeOpacity:1,strokeWeight:2.5,geodesic:!0}),this.runPolyline(t,0,e)}runPolyline(t,e,o){for(let n=0;n<=10;n++){if(e+n<t.length-1){let i=new google.maps.LatLng(t[e+n].lat,t[e+n].lng);this["runningPolyline"+o].getPath().push(i)}this["runningPolyline"+o].getPath().length>100&&this["runningPolyline"+o].getPath().removeAt(n)}e+10<t.length-1&&this.isRunPolyline?setTimeout(this.runPolyline.bind(this,t,e+10,o),1):(this["runningPolyline"+o].setMap(this.map),this.isRunPolyline&&setTimeout(this.setRunPolyline.bind(this,t,o),1))}setBounds(){this.bounds=new google.maps.LatLngBounds,this.costRoutes.map(t=>{this.bounds.extend(new google.maps.LatLng(t.latLng[0].lat,t.latLng[0].lng)),this.map.fitBounds(this.bounds),this.bounds.extend(new google.maps.LatLng(t.latLng[t.latLng.length-1].lat,t.latLng[t.latLng.length-1].lng)),this.map.fitBounds(this.bounds)})}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["path-viewer"]],viewQuery:function(t,e){var o;1&t&&i["\u0275\u0275viewQuery"](L,!0),2&t&&i["\u0275\u0275queryRefresh"](o=i["\u0275\u0275loadQuery"]())&&(e.mapElement=o.first)},decls:2,vars:0,template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"p"),i["\u0275\u0275text"](1," path-viewer works!\n"),i["\u0275\u0275elementEnd"]())},encapsulation:2}),t})()}]}];let _=(()=>{class t{}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.g.forChild(P)],r.g]}),t})(),M=(()=>{class t{}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[_,d.a,c]]}),t})()}}]);