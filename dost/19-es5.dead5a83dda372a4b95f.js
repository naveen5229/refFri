!function(){function e(e,t,n,a,o,i,r){try{var l=e[i](r),s=l.value}catch(d){return void n(d)}l.done?t(s):Promise.resolve(s).then(a,o)}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw r}}}}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{dgmN:function(a,o,r){"use strict";r.r(o),r.d(o,"PagesModule",(function(){return jc}));var s=r("H+bZ"),d=r("flj8"),c=r("qfBg"),m=r("8Y7J"),p=r("tKwJ"),h=r("iInd"),g=r("IAMq"),u=r("SVse");function f(e,t){if(1&e&&m["\u0275\u0275element"](0,"nb-menu",1),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("items",n.user._menu.pages)}}var b,v,x=((b=function(){function e(t,n,a,o,r){i(this,e),this.menuService=t,this.api=n,this.accountService=a,this.user=o,this.router=r,this.accountService.branches.length||(this.getBranches(),this.getFinancial()),"admin"!=this.user._loggedInBy||this.user._customer.id||(alert("Select Fo Admin First"),this.router.navigate(["/admin"]))}return l(e,[{key:"ngAfterViewInit",value:function(){var e=this;document.getElementsByTagName("nb-sidebar")[0].onclick=function(t){var n=t.srcElement;"menu-title"===n.className&&"SPAN"===n.tagName&&e.handleMenuClick(n.parentElement.text,n.parentElement.hash.replace(/#\//,""))}}},{key:"handleMenuClick",value:function(e,t){if("Vehicle Tracking"===e){var n="http://fvts.in/#/auth/checkloginandredirect/?token="+localStorage.getItem("DOST_axesToken")+"&frompage="+window.location.href;window.location.href=n}}},{key:"getBranches",value:function(){var e=this;this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){console.log("Branches :",t.data),e.accountService.branches=t.data}),(function(e){console.log("Error: ",e)}))}},{key:"getFinancial",value:function(){var e=this;this.api.post("Suggestion/GetFinancialYear",{search:123}).subscribe((function(t){console.log("financial :",t.data),e.accountService.financialYears=t.data,e.accountService.financialYears.map((function(t){t.name.split("-")[0]==(new Date).getFullYear()&&(e.accountService.selected.financialYear=t)}))}),(function(e){console.log("Error: ",e)}))}}]),e}()).\u0275fac=function(e){return new(e||b)(m["\u0275\u0275directiveInject"](p.Z),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](h.c))},b.\u0275cmp=m["\u0275\u0275defineComponent"]({type:b,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[["autoCollapse","true",3,"items",4,"ngIf"],["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ngx-sample-layout"),m["\u0275\u0275template"](1,f,1,1,"nb-menu",0),m["\u0275\u0275element"](2,"router-outlet"),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.user._menu.pages.length))},directives:[g.a,u.u,h.h,p.W],styles:['.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),b),y=r("vTDv"),C=((v=function e(){i(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[y.a]]}),v),_=r("mNmA"),S=r("UTcu"),M=r("OlR4"),k=r("nGd9"),w=r("6Jfz"),O=r("tUv6"),P=r("G0yt"),E=r("wD9S");function T(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",1),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var D,I=((D=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.kpis=[],this.allKpis=[],this.searchTxt="",this.filters=[],this.table={data:{headings:{vehicle:{title:"Vehicle",placeholder:"Vehicle"},status:{title:"Status",placeholder:"Status"},hrs:{title:"Hrs",placeholder:"Hrs"},trip:{title:"Trip",placeholder:"Trip"},kmp:{title:"Kmp",placeholder:"Kmp"},location:{title:"location",placeholder:"Location"}},columns:[]},settings:{hideHeader:!0}},this.getKPIS(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){console.log("ionViewDidLoad DriverKpisPage")}},{key:"refresh",value:function(){console.log("Refresh"),this.getKPIS()}},{key:"getKPIS",value:function(){var e=this;this.common.loading++,this.api.get("VehicleKpis").subscribe((function(t){e.common.loading--,console.log(t),e.allKpis=t.data,e.kpis=t.data,e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"showLocation",value:function(e){if(e.x_tlat){var t={lat:e.x_tlat,lng:e.x_tlong,name:"",time:""};console.log("Location: ",t),this.common.params={location:t,title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})}else this.common.showToast("Vehicle location not available!")}},{key:"findVehicle",value:function(){var e=this;this.kpis=this.searchTxt?this.allKpis.filter((function(t){return t.x_showveh.toUpperCase().includes(e.searchTxt.toUpperCase())})):this.allKpis}},{key:"findFilters",value:function(){var e=this;this.filters=["all"],this.allKpis.map((function(t){-1==e.filters.indexOf(t.showprim_status)&&e.filters.push(t.showprim_status)}))}},{key:"showDetails",value:function(e){this.common.params={kpi:e},this.modalService.open(k.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="kpisDetails"}},{key:"getLR",value:function(e){var t=this;this.common.loading++,this.api.post("FoDetails/getLorryDetails",{x_lr_id:e.x_lr_id}).subscribe((function(e){t.common.loading--,t.showLR(e.data[0]),console.log("data",e)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"showLR",value:function(e){var t=[{name:"Lr",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other_Image",image:e.other_image}];console.log("image",t),this.common.params={images:t,title:"LR Details"},this.modalService.open(O.a,{size:"lg",container:"nb-layout"})}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.allKpis.map((function(n){t.push({vehicle:{value:n.x_showveh,action:e.showDetails.bind(e,n)},status:{value:n.showprim_status+(n.showsec_status?","+n.showsec_status:""),action:e.showDetails.bind(e,n)},hrs:{value:n.x_hrssince,class:n.x_hrssince>=24?"red":"",action:e.showDetails.bind(e,n)},trip:{value:e.getTripStatusHTML(n),action:e.showDetails.bind(e,n),isHTML:!0},kmp:{value:n.x_kmph,class:n.x_kmph<20?"pink":"",action:e.showDetails.bind(e,n)},location:{value:n.Address,action:e.showLocation.bind(e,n)},rowActions:{click:e.showDetails.bind(e,n)}})})),t}},{key:"getTripStatusHTML",value:function(e){var t="<div>";return(t+=0==e.trip_status_type?'\n      \x3c!-- Heading --\x3e\n        <i class="fa fa-arrow-circle-right complete"></i>\n        <span class="circle">'.concat(e.x_showtripstart,'</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>').concat(e.x_showtripend,"</span>\n      "):1==e.trip_status_type?'\n      \x3c!-- Loading --\x3e\n        <span class="circle">'.concat(e.x_showtripstart,'</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>').concat(e.x_showtripend,"</span>\n      "):2==e.trip_status_type?"\n      \x3c!-- Onward --\x3e\n        <span>".concat(e.x_showtripstart,'</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>').concat(e.x_showtripend,"</span>\n      "):3==e.trip_status_type?"\n        \x3c!-- Unloading --\x3e\n          <span>".concat(e.x_showtripstart,'</span>\n          <i class="icon ion-md-arrow-round-forward"></i>\n          <span class="circle">').concat(e.x_showtripend,"</span>\n        "):4==e.trip_status_type?"\n      \x3c!-- Complete --\x3e\n        <span>".concat(e.x_showtripstart,'</span>\n        <i class="icon ion-md-arrow-round-forward"></i>\n        <span>').concat(e.x_showtripend,'</span>\n        <i class="fa fa-check-circle complete"></i>\n      '):"\n      \x3c!-- Ambigous --\x3e\n        <span>".concat(e.x_showtripstart,'</span>\n        <span class="icon ion-md-route-arrow">-</span>\n        <span>').concat(e.x_showtripend,"</span>\n      "))+"</div>"}}]),e}()).\u0275fac=function(e){return new(e||D)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},D.\u0275cmp=m["\u0275\u0275defineComponent"]({type:D,selectors:[["vehicle-kpis"]],decls:7,vars:1,consts:[[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h2"),m["\u0275\u0275text"](3,"Vehicle KPIs"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275template"](5,T,1,2,"smart-table",0),m["\u0275\u0275element"](6,"br"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.allKpis&&t.allKpis.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:[".headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]     .pink{background:pink}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),D),F=r("LEqX"),A=r("xZ18");function V(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td",11),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td"),m["\u0275\u0275elementStart"](10,"span",12),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).updateNotificationStatus(e.ticket_id,2,e.msg,e.fo_ticket_allocation_id)})),m["\u0275\u0275text"](11,"Accept"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"span",13),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).updateNotificationStatus(e.ticket_id,-2,e.msg,e.fo_ticket_allocation_id)})),m["\u0275\u0275text"](13,"Deny"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.msg),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.common.findRemainingTime(a.remaining_time))}}function L(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"table",7),m["\u0275\u0275elementStart"](2,"thead",8),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Message"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Remaining Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Action"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"tbody"),m["\u0275\u0275template"](15,V,14,4,"tr",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](16,L,2,0,"div",10),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",n.newTickets),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.status&&!n.newTickets.length&&n.showMsg)}}function j(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr",16),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).showDetails(e)})),m["\u0275\u0275elementStart"](1,"td",11),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td"),m["\u0275\u0275elementStart"](10,"span"),m["\u0275\u0275elementStart"](11,"u",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).oprnInfoModel(e)})),m["\u0275\u0275text"](12,"info"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.msg),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.common.findRemainingTime(a.remaining_time))}}function R(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"table",7),m["\u0275\u0275elementStart"](2,"thead",8),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Message"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Remaining Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Action"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"tbody"),m["\u0275\u0275template"](15,j,13,4,"tr",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](16,R,2,0,"div",10),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",n.openTickets),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.status&&!n.openTickets.length&&n.showMsg)}}function N(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td",11),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275pipe"](9,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td",19),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).showTrailList(e)})),m["\u0275\u0275text"](11,"show"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"td"),m["\u0275\u0275elementStart"](13,"span",19),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).claimTicket(e)})),m["\u0275\u0275text"](14,"Claim"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.msg),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](9,4,a.addtime,"dd MMM HH:mm"))}}function U(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function G(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"table",18),m["\u0275\u0275elementStart"](2,"thead",8),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Message"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Add Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Trails"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"th"),m["\u0275\u0275text"](15,"Claim"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"tbody"),m["\u0275\u0275template"](17,N,15,7,"tr",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](18,U,2,0,"div",10),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("ngForOf",n.tickets),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.status&&!n.tickets.length&&n.showMsg)}}var B,W=((B=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this.notifications=[],this.status=0,this.newTickets=[],this.openTickets=[],this.showMsg=!1,this.tickets=[],this.countDownFlag=!1,this.claimTicketGroups=[],this.claimDrivers=[],this.dis_all="new",this.status=localStorage.getItem("STATUS")?parseInt(localStorage.getItem("STATUS")):0,console.log("Status:",this.status),localStorage.removeItem("STATUS"),this.getNotifications(),this.getClaimTickets(),this.countDownFlag=!0,this.common.refresh=this.refresh.bind(this),setTimeout(this.countDown.bind(this),3e4)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getNotifications(),this.getClaimTickets()}},{key:"getNotifications",value:function(){var e=this;this.newTickets=[],++this.common.loading,this.api.get("FoTickets/getPendingTicketList?aduserid="+this.user._details.id,{}).subscribe((function(t){--e.common.loading,console.log(t),e.notifications=t.data||[],e.showMsg=!0,e.newTickets=[],e.openTickets=[],e.notifications.map((function(t){0==t.status?e.newTickets.push(t):2==t.status&&e.openTickets.push(t)})),e.setTab()}),(function(t){--e.common.loading,console.error(t)}))}},{key:"getClaimTickets",value:function(){var e=this;++this.common.loading,this.api.get("FoTickets/getClaimTickets?aduserid="+this.user._details.id,{}).subscribe((function(t){--e.common.loading,console.log(t),t.success&&(e.tickets=t.data?t.data:[],e.setTab())}),(function(t){--e.common.loading,console.error(t)}))}},{key:"setTab",value:function(){this.dis_all=this.newTickets.length>0?"new":this.tickets.length>0?"claim":this.openTickets.length>0?"open":"new"}},{key:"claimTicket",value:function(e){confirm("Are you sure to claim this ticket?")&&this.sendClaimRequest(e)}},{key:"sendClaimRequest",value:function(e){var t=this,n={ticket_id:e.ticket_id,msg:e.msg,aduserid:this.user._details.id};console.log("Params",n),this.common.loading++,this.api.post("FoTickets/setClaimInfo",n).subscribe((function(e){--t.common.loading,console.log(e),t.getNotifications(),t.getClaimTickets()}),(function(e){--t.common.loading,console.error(e),t.common.showError()}))}},{key:"updateNotificationStatus",value:function(e,t,n,a){var o=this,i={ticket_id:e,fo_ticket_allocation_id:a,status:t,aduserid:this.user._details.id,remark:"",msg:n};++this.common.loading,console.log("Params:",i),this.api.post("FoTickets/updateTicketStatus",i).subscribe((function(e){console.log(e),o.common.showToast(e.msg),--o.common.loading,o.getNotifications()}),(function(e){console.log(e),o.common.showError(),--o.common.loading}))}},{key:"countDown",value:function(){if(this.countDownFlag){var e=[];this.notifications.map((function(t,n){t.remaining_time<60&&(t.cc="red"),t.remaining_time<0&&e.push(n)})),e.map((function(e){})),setTimeout(this.countDown.bind(this),3e4)}}},{key:"ticketCount",value:function(e){var t=0;return this.notifications.map((function(n){n.status===e&&t++})),t}},{key:"showTrailList",value:function(e){var t=this;++this.common.loading,this.api.get("FoTickets/getTrailLists?ticket_id="+e.ticket_id).subscribe((function(e){console.log(e),--t.common.loading;var n=e.data;n?(console.log("DataTrail:",e.data),t.common.params={trailList:n,headers:["#","Employee Name","Spent Time","Status"],type:"trail"},t.modalService.open(F.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="Trails"):t.common.showError("No record found for this search criteria.")}),(function(e){--t.common.loading,console.log(e),t.common.showError()}))}},{key:"showDetails",value:function(e){console.log(e)}},{key:"oprnInfoModel",value:function(e){var t=this;console.log("ticket",e),this.common.params={ticket:{id:e.ticket_id,priType:e.pri_type}},this.modalService.open(A.a,{size:"lg",container:"nb-layout"}).result.then((function(e){console.log("data",e),e.response&&t.refresh()}))}}]),e}()).\u0275fac=function(e){return new(e||B)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a))},B.\u0275cmp=m["\u0275\u0275defineComponent"]({type:B,selectors:[["tickets"]],decls:17,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[4,"ngIf"],[1,"table","table-hover","tblnew"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[1,"text-primary","accept",3,"click"],[1,"text-danger","deny",3,"click"],["role","alert",1,"no-data","alert","alert-danger"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[2,"color","blue","cursor","pointer",3,"click"],[1,"table","table-hover","tblclaim"],[2,"cursor","pointer","color","blue",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Tickets"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"ul",3),m["\u0275\u0275elementStart"](8,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="new"})),m["\u0275\u0275text"](9," New "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"li",5),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="open"})),m["\u0275\u0275text"](11," Open "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"li",5),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="claim"})),m["\u0275\u0275text"](13," Claim "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](14,z,17,2,"div",6),m["\u0275\u0275template"](15,H,17,2,"div",6),m["\u0275\u0275template"](16,G,19,2,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngClass","new"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","open"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","claim"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","new"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","open"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","claim"==t.dis_all))},directives:[p.s,p.v,p.r,u.r,u.u,u.t],pipes:[u.f],styles:['.accept[_ngcontent-%COMP%], .deny[_ngcontent-%COMP%]{cursor:pointer}.deny[_ngcontent-%COMP%]{margin-left:8px}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:180px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 250px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:180px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:40%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:15%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:40%!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:15%!important;padding-left:15px!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:15%!important;padding-left:20px!important}.tblclaim[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:15%!important;padding-left:20px!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:50%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:50%!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:15%!important;padding-left:20px!important}.tblnew[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:15%!important;padding-left:20px!important}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),B),K=r("LvDl");function $(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"th",9),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",10),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).showTrailList(e)})),m["\u0275\u0275elementStart"](10,"span",11),m["\u0275\u0275text"](11,"show"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.msg),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.common.findRemainingTime(a.remaining_time))}}function q(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function J(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"table",4),m["\u0275\u0275elementStart"](2,"thead",5),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Message"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Remaining Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Trails"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"tbody",6),m["\u0275\u0275listener"]("scroll",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().test(e)})),m["\u0275\u0275template"](15,$,12,4,"tr",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](16,q,2,0,"div",8),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",a.allOpenTickets),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==a.status&&!a.allOpenTickets.length&&a.showMsg)}}function Y(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"th",9),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",10),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).showTrailList(e)})),m["\u0275\u0275elementStart"](10,"span",11),m["\u0275\u0275text"](11,"show"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.msg),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.addtime)}}function Z(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function Q(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"table",4),m["\u0275\u0275elementStart"](2,"thead",5),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Message"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Add Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Trails"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"tbody"),m["\u0275\u0275template"](15,Y,12,4,"tr",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](16,Z,2,0,"div",8),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",n.allClaimTickets),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.status&&!n.allClaimDrivers.length&&n.showMsg)}}var X,ee=((X=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.status=0,this.showMsg=!1,this.allClaimTickets=[],this.allClaimTicketGroups=[],this.allClaimDrivers=[],this.allOpenTickets=[],this.allOpenTicketGroups=[],this.allOpenDrivers=[],this.getAllOpenTickets(),this.getAllClaimTickets(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getAllOpenTickets(),this.getAllClaimTickets()}},{key:"getAllClaimTickets",value:function(){var e=this;++this.common.loading,this.api.get("FoTickets/getAllClaimTickets?aduserid="+this.user._details.id,{}).subscribe((function(t){--e.common.loading,console.log(t),e.allClaimTickets=t.data,e.allClaimTicketGroups=K.groupBy(t.data,"regno"),console.log("allClaimTicketGroups",e.allClaimTicketGroups),e.allClaimDrivers=Object.keys(e.allClaimTicketGroups),console.log("keys",e.allClaimDrivers)}),(function(t){--e.common.loading,console.error(t)}))}},{key:"getAllOpenTickets",value:function(){var e=this;++this.common.loading,this.api.get("FoTickets/getAllOpenTickets?aduserid="+this.user._details.id,{}).subscribe((function(t){--e.common.loading,console.log(t),e.allOpenTickets=t.data,e.allOpenTicketGroups=K.groupBy(t.data,"regno"),console.log("allOpenTicketGroups",e.allOpenTicketGroups),e.allOpenDrivers=Object.keys(e.allOpenTicketGroups),console.log("keys",e.allOpenDrivers),e.showMsg=!0}),(function(t){--e.common.loading,console.error(t)}))}},{key:"showTrailList",value:function(e){var t=this;++this.common.loading,this.api.get("FoTickets/getTrailLists?ticket_id="+e.ticket_id).subscribe((function(e){console.log(e),--t.common.loading;var n=[];e.data.map((function(e,t){n.push([t,e.employeename,e.spent_time,e.status])})),t.common.params={title:"Trail List",headings:["#","Employee Name","Spent Time","Status"],data:n},t.modalService.open(F.a,{size:"lg",container:"nb-layout"})}),(function(e){--t.common.loading,console.log(e),t.common.showError()}))}},{key:"forwardClaimTickets",value:function(e){console.log("Get Data");var t=[];this.allClaimTicketGroups[e].map((function(e){t.push({ticketId:e.ticket_id,msg:e.msg})}))}},{key:"test",value:function(e){console.log("Event",e)}}]),e}()).\u0275fac=function(e){return new(e||X)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},X.\u0275cmp=m["\u0275\u0275defineComponent"]({type:X,selectors:[["tickets-all"]],decls:10,vars:2,consts:[[2,"border","0px"],["tabTitle","All open Tickets"],[4,"ngIf"],["tabTitle","Parked Tickets"],[1,"table","table-bordered","table-hover"],[1,"thead"],[3,"scroll"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[3,"click"],[1,"btn","btn-success"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"All Tickets"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"nb-tabset"),m["\u0275\u0275elementStart"](6,"nb-tab",1),m["\u0275\u0275template"](7,J,17,2,"div",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"nb-tab",3),m["\u0275\u0275template"](9,Q,17,2,"div",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",0==t.status),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0==t.status))},directives:[p.s,p.v,p.r,p.Hb,p.Gb,u.u,u.t],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 5px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tabset{border-bottom:2px solid #26a69a!important;margin-bottom:15px!important}[_nghost-%COMP%]     .tabset li a{background-color:#26a69a;color:#fff!important;font-weight:400!important;border-radius:5px 5px 0 0;margin-right:8px;border:2px solid #26a69a;padding:5px 10px!important;position:relative;font-size:14px}[_nghost-%COMP%]     .tabset li a:before{content:none!important;display:none!important}[_nghost-%COMP%]     .tabset .active a{background-color:#fff;color:#26a69a!important}[_nghost-%COMP%]     .tabset .active a:after{content:""!important;position:absolute;background:#fff;width:100%;height:6px;bottom:-5px;left:0;border-radius:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:270px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 218px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:270px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 15px;height:auto;color:#fff;text-transform:capitalize;margin:0;border-radius:3px;border:0;-webkit-box-shadow:0 5px 10px 0 rgba(0,0,0,.2);box-shadow:0 5px 10px 0 rgba(0,0,0,.2);cursor:pointer;font-weight:400;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),X),te=r("i7b3"),ne=r("kmV6"),ae=r("1hw/"),oe=r("pc3W"),ie=r("JU80"),re=r("oCQm"),le=r("Dx+k"),se=r("JOfS"),de=r("uk+R"),ce=r("s7LF"),me=r("csNM");function pe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",33),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openGenerateLr(!1)})),m["\u0275\u0275text"](1,"LR Generate"),m["\u0275\u0275elementEnd"]()}}function he(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",34),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.receipts)("settings",n.table.settings)}}function ge(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",35),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var ue,fe=((ue=function(){function e(t,n,a,o,r,l,s){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.route=r,this.modalService=l,this.renderer=s,this.receipts=[],this.table=null,this.viewImages=null,this.activeImage="lr_image",this.viewType="allLR",this.lrType="2",this.lrCategory=-1,this.vehicleType=-1,this.searchValue=null,this.searchString=null,this.endDate=new Date,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.getLorryReceipts(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getLorryReceipts()}},{key:"getLorryReceipts",value:function(){var e=this;if(this.endDate<this.startDate)return this.common.showError("End Date Should be greater than Start Date"),0;var t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate),type:this.viewType,status:this.lrType,lrCategory:this.lrCategory,vehicleType:this.vehicleType,searchValue:this.searchValue,searchString:this.searchString};console.log("api params Data:",t),this.table=null,this.receipts=[],++this.common.loading,this.api.post("FoDetails/getLorryStatus",t).subscribe((function(t){--e.common.loading,console.log("Res000000:",t),t.data?(e.receipts=t.data,console.log("Receipt",e.receipts),e.table=e.setTable()):e.receipts=[]}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getImage",value:function(e){console.log(e);var t=[{name:"LR",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other Image",image:e.other_image}];console.log("images:",t),this.common.params={images:t,title:"LR Details"},this.modalService.open(O.a,{size:"lg",container:"nb-layout"})}},{key:"getPodImage",value:function(e){console.log("val===",e),this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:e.pod_docid},title:"docImage"},this.modalService.open(O.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}},{key:"RefData",value:function(){this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:""},title:"docImage"},this.modalService.open(O.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})}},{key:"printLr",value:function(e){this.common.params={previewData:{title:"Lorry Receipt",previewId:null,refId:e.lr_id,refType:"LR_PRT",autoPrint:!0}},console.log("receipts",e),this.modalService.open(de.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"addReceipts",value:function(){this.modalService.open(le.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){})).catch((function(e){return console.log("Error:",e)}))}},{key:"addTransportAgent",value:function(){this.modalService.open(se.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){})).catch((function(e){return console.log("Error:",e)}))}},{key:"setTable",value:function(){return{receipts:{headings:{LRNo:{title:"LR No",placeholder:"LR No"},LRDate:{title:"LR Date",placeholder:"LR Date",type:"date"},VehiceNo:{title:"Vehicle No",placeholder:"Vehicle No"},Consigner:{title:"Consigner",placeholder:"Consigner"},Consignee:{title:"Consignee",placeholder:"Consignee"},TA:{title:"TA",placeholder:"TA"},Supplier:{title:"Supplier",placeholder:"Supplier"},Source:{title:"Source",placeholder:"Source"},Destination:{title:"Destination",placeholder:"Destination"},AddTime:{title:"AddTime",placeholder:"AddTime",type:"date"},Revenue:{title:"Revenue",placeholder:"Revenue"},Expense:{title:"Expense",placeholder:"Expense"},LRImage:{title:"LRImage",placeholder:"LRImage"},AddedBy:{title:"AddedBy",placeholder:"AddedBy"},details:{title:"POD",placeholder:"POD"},Action:{title:"Action",placeholder:"Action"},Invoice:{title:"Invoice",placeholder:"Invoice"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.receipts.map((function(n){var a={LRId:{value:n.lr_id},VehiceNo:{value:n.regno},LRNo:{value:n.lr_no},LRDate:{value:n.lr_date},Consigner:{value:n.lr_consigner_name},Consignee:{value:n.lr_consignee_name},TA:{value:n.lr_ta_name},Supplier:{value:n.lr_supplier_name},Source:{value:n.lr_source},Destination:{value:n.lr_destination},AddTime:{value:e.datePipe.transform(n.addtime,"dd MMM HH:mm ")},Revenue:n.revenue_amount>0?{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr icon i-green",action:e.lrRates.bind(e,n,0)},{class:"fa fa-check icon i-green ml-2",action:e.openRevenueModal.bind(e,n,0)}]}:{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr i-red-cross",action:e.lrRates.bind(e,n,0)},{class:"fa fa-times-circle i-red-cross ml-2",action:e.openRevenueModal.bind(e,n,0)}]},Expense:n.expense_amount>0?{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr icon i-green",action:e.lrRates.bind(e,n,1)},{class:"fa fa-check icon i-green ml-2",action:e.openExpenseModal.bind(e,n,1)}]}:{value:"",class:"text-center",isHTML:!1,icons:[{class:"fa fa-inr i-red-cross",action:e.lrRates.bind(e,n,1)},{class:"fa fa-times-circle i-red-cross ml-2",action:e.openExpenseModal.bind(e,n,1)}]},LRImage:n.lr_image?{value:"",class:"text-center",isHTML:!1,action:null,icons:[{class:"fa fa-eye icon",action:e.getImage.bind(e,n)}]}:{value:"",class:"text-center",isHTML:!1,action:null,icons:[{class:"fa fa-times-circle i-red-cross"}]},AddedBy:{value:n.name},details:{value:"",action:null,isHTML:!1,icons:[{class:n.pod_docid?"far fa-image i-green icon mr-1":"far fa-image i-red-cross mr-1",action:n.pod_docid?e.getPodImage.bind(e,n):null},{class:n.poddetails?"fa fa-list icon i-green mr-1":"fa fa-list i-red-cross mr-1",action:e.openPodDeatilsModal.bind(e,n)},{class:n.podreceived?"fa fa-check icon i-green":"fa fa-check   i-red-cross",action:null}]},Action:{value:"",isHTML:!0,action:null,icons:e.actionIcons(n)},Invoice:{value:"",isHTML:!0,action:null,icons:[{class:n._frinvid?"fa fa-print icon":n.revenue_amount>0?"fa fa-pencil-square-o icon edit ":"",action:n._frinvid>0?e.invoice.bind(e,n):n.revenue_amount>0?e.invoiceFromLr.bind(e,n):""}]}};t.push(a)})),t}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-print icon",action:this.printLr.bind(this,e)},{class:"fa fa-handshake-o  icon",action:this.tripSettlement.bind(this,e)}];return this.user.permission.edit&&t.push({class:e.is_locked?"":"fa fa-pencil-square-o icon edit",action:this.openGenerateLr.bind(this,e)}),this.user.permission.delete&&t.push({class:e.is_locked?"":"fa fa-trash icon",action:this.deleteLr.bind(this,e)}),t}},{key:"deleteLr",value:function(e){var t=this;console.log("Lr dddd",e),confirm("Are You Sure you want to delete LR?")&&(this.common.loading++,this.api.post("LorryReceiptsOperation/deleteGeneratedLr",{lrId:e.lr_id,vehicleId:e.vid}).subscribe((function(e){t.common.loading--,console.log("response:",e),e.data[0].r_id>0&&(t.common.showToast("Sucessfully Deleted",1e4),t.getLorryReceipts())}),(function(e){t.common.loading--,console.log(e)})))}},{key:"tripSettlement",value:function(e){console.log("======",e),this.common.params={refData:{refId:e.lr_id,refType:11}},this.modalService.open(ae.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"openGenerateLr",value:function(e){var t=this;this.common.params={lrData:{lrId:e.lr_id}},this.modalService.open(te.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),t.getLorryReceipts()}))}},{key:"lrRates",value:function(e,t){var n=this,a=!0;(1==t&&e.is_adv_expense>0||0==t&&e.is_adv_revenue>0)&&(a=!1),this.common.params={rate:{lrId:e.lr_id,rateType:t,generalModal:a}},this.modalService.open(ne.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),n.getLorryReceipts()}))}},{key:"openExpenseModal",value:function(e){var t=this,n={refernceType:11,refId:e.lr_id};console.log("openExpenseModal ",n),this.common.params={expenseData:n},this.modalService.open(oe.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),t.getLorryReceipts()}))}},{key:"openRevenueModal",value:function(e){var t=this,n={refernceType:11,refId:e.lr_id};console.log("openExpenseModal ",n),this.common.params={revenueData:n},this.modalService.open(ie.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getLorryReceipts()}))}},{key:"openPodDeatilsModal",value:function(e){var t=this;console.log("====lr=====",e);var n={podId:e._podid,lrId:e.lr_id};console.log("====podDetails=====",n),this.common.params={podDetails:n},this.modalService.open(re.a,{size:"lg",container:"nb-layout",windowClass:"lrpoddetail"}).result.then((function(e){t.getLorryReceipts()}))}},{key:"invoiceFromLr",value:function(e){var t=this;this.api.post("FrieghtRate/invoiceFromLr",{lrId:e.lr_id}).subscribe((function(e){if(console.log("result",e.data[0]),e.data&&e.data[0].r_id>0){var n={_frinvid:e.data[0].r_id};t.common.showToast(e.data[0].r_msg),t.invoice(n)}else e.data&&t.common.showError(e.data[0].r_msg)}),(function(e){console.log(e)}))}},{key:"invoice",value:function(e,t){this.common.params={previewData:{title:"Invoice",previewId:null,refId:e._frinvid,refType:"FRINV"}},console.log("invoice",e),this.modalService.open(de.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))}}]),e}()).\u0275fac=function(e){return new(e||ue)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](m.Renderer2))},ue.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ue,selectors:[["lorry-reccipts"]],decls:95,vars:14,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"col-sm-1"],[1,"fa","fa-file-pdf",3,"click"],[1,"col-sm-2","text-right"],["class","btn btn-primary",3,"click",4,"ngIf"],[2,"width","100%"],["name","viewType",1,"form-control",3,"ngModel","ngModelChange"],["value","allLR"],["value","myLr"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],["value","2"],["value","3"],["value","veh"],["value","lr"],["value","consigner"],["value","consignee"],["value","ta"],["value","source"],["value","dest"],["value","supplier"],["type","text","autocomplete","off","name","searchValue",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","m-0","p-0","w-100","text-capitalize",3,"click"],["id","lr-table"],["id","tblLorryReceipt",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"col-sm-4",2,"text-align","right"],[1,"btn","btn-primary",3,"click"],["id","tblLorryReceipt",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Lorry Receipts"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"i",4),m["\u0275\u0275listener"]("click",(function(){return t.common.getPDFFromTableId("tblLorryReceipt")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",5),m["\u0275\u0275template"](9,pe,2,0,"button",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"nb-card-body"),m["\u0275\u0275elementStart"](11,"table",7),m["\u0275\u0275elementStart"](12,"tr"),m["\u0275\u0275elementStart"](13,"td"),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"Gen._By"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"select",8),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.viewType=e})),m["\u0275\u0275elementStart"](17,"option",9),m["\u0275\u0275text"](18,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"option",10),m["\u0275\u0275text"](20,"Self"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"td"),m["\u0275\u0275elementStart"](22,"label"),m["\u0275\u0275text"](23,"Category"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"select",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lrCategory=e})),m["\u0275\u0275elementStart"](25,"option",12),m["\u0275\u0275text"](26,"FTL"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"option",13),m["\u0275\u0275text"](28,"LTL"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"option",14),m["\u0275\u0275text"](30,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"td"),m["\u0275\u0275elementStart"](32,"label"),m["\u0275\u0275text"](33,"From :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"uj-date-time-picker",15),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"td"),m["\u0275\u0275elementStart"](36,"label"),m["\u0275\u0275text"](37,"To :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](38,"uj-date-time-picker",16),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"td"),m["\u0275\u0275elementStart"](40,"label"),m["\u0275\u0275text"](41,"LR Status"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"select",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lrType=e})),m["\u0275\u0275elementStart"](43,"option",12),m["\u0275\u0275text"](44,"Pending"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](45,"option",13),m["\u0275\u0275text"](46,"Complete"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"option",14),m["\u0275\u0275text"](48,"Rejected"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](49,"option",17),m["\u0275\u0275text"](50,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](51,"td"),m["\u0275\u0275elementStart"](52,"label"),m["\u0275\u0275text"](53,"Veh_Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](54,"select",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vehicleType=e})),m["\u0275\u0275elementStart"](55,"option",14),m["\u0275\u0275text"](56,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](57,"option",13),m["\u0275\u0275text"](58,"Own"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](59,"option",17),m["\u0275\u0275text"](60,"Group"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](61,"option",18),m["\u0275\u0275text"](62,"Market"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](63,"td"),m["\u0275\u0275elementStart"](64,"label"),m["\u0275\u0275text"](65,"Search_String"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](66,"select",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchString=e})),m["\u0275\u0275elementStart"](67,"option",19),m["\u0275\u0275text"](68,"Vehicle"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](69,"option",20),m["\u0275\u0275text"](70,"LR No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](71,"option",21),m["\u0275\u0275text"](72,"Consigner"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](73,"option",22),m["\u0275\u0275text"](74,"Consignee"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](75,"option",23),m["\u0275\u0275text"](76,"TA"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](77,"option",24),m["\u0275\u0275text"](78,"Source"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](79,"option",25),m["\u0275\u0275text"](80,"Destination"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](81,"option",26),m["\u0275\u0275text"](82,"Supplier"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](83,"td"),m["\u0275\u0275elementStart"](84,"label"),m["\u0275\u0275text"](85,"Search Value"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](86,"input",27),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchValue=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](87,"td"),m["\u0275\u0275elementStart"](88,"button",28),m["\u0275\u0275listener"]("click",(function(){return t.getLorryReceipts()})),m["\u0275\u0275text"](89,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](90,"div",29),m["\u0275\u0275template"](91,he,1,2,"smart-table",30),m["\u0275\u0275template"](92,ge,2,0,"div",31),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](93,"div",32),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](94,"router-outlet")),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngModel",t.viewType),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngModel",t.lrCategory),m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngModel",t.lrType),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngModel",t.vehicleType),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngModel",t.searchString),m["\u0275\u0275advance"](20),m["\u0275\u0275property"]("ngModel",t.searchValue),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.receipts&&t.receipts.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.receipts.length))},directives:[p.s,p.v,u.u,p.r,ce.D,ce.r,ce.u,ce.w,ce.G,me.a,ce.d,h.h,E.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px}.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000;background:#fff8dc}[_nghost-%COMP%]    .red{background:red;color:#fff;margin-left:5px}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#0bff0b;color:#000}[_nghost-%COMP%]    .default{background:transparent;border:transparent}[_nghost-%COMP%]    .icon{width:20px;text-align:center;background-color:#ccc;border-radius:3px;height:20px;line-height:22px;margin:3px}[_nghost-%COMP%]    .image{color:#0e0e3a;font-size:18px}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.modal-dialog[_ngcontent-%COMP%]{width:100%!important}.modal-lg[_ngcontent-%COMP%]{max-width:1200px!important}smart-table[_ngcontent-%COMP%]   .tableFixHead[_ngcontent-%COMP%]{height:74vh!important}.close[_ngcontent-%COMP%]{font-size:36px;padding:8px 16px}.model-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px}input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:13px;border:1px solid #324148;border-radius:3px}.display-none[_ngcontent-%COMP%]{display:none}.display-block[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 202px);height:auto!important}[_nghost-%COMP%]     td .zoom{background:linear-gradient(-135deg,#1de9b6,#1dc4e9);display:inline-block;padding:3px 8px;border-radius:3px;color:#fff}[_nghost-%COMP%]     .i-red-cross{color:red;font-size:18px}[_nghost-%COMP%]     .i-green{color:green;font-size:18px}[_nghost-%COMP%]     .fa-image span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-image span:before{content:"Image";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-image span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-image:hover span{display:block}[_nghost-%COMP%]     .fa-check span{position:absolute;display:none;top:-28px;padding:10px 32px;font-weight:400;font-size:11px;left:-27px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-check span:before{content:"Receipt";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-check span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-check:hover span{display:block}[_nghost-%COMP%]     .fa-list span{position:absolute;display:none;padding:10px 30px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-list span:before{content:"Details";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-list:hover span{display:block}[_nghost-%COMP%]     .fa-check.i-red-cross span:before, [_nghost-%COMP%]     .fa-image.i-red-cross span:before, [_nghost-%COMP%]     .fa-list.i-red-cross span:before{background-color:red}[_nghost-%COMP%]     .fa-check.i-red-cross span:after, [_nghost-%COMP%]     .fa-image.i-red-cross span:after, [_nghost-%COMP%]     .fa-list.i-red-cross span:after{border-top:5px solid red}[_nghost-%COMP%]     .fa-check.i-green span:before, [_nghost-%COMP%]     .fa-image.i-green span:before, [_nghost-%COMP%]     .fa-list.i-green span:before{background-color:green}[_nghost-%COMP%]     .fa-check.i-green span:after, [_nghost-%COMP%]     .fa-image.i-green span:after, [_nghost-%COMP%]     .fa-list.i-green span:after{border-top:5px solid green}[_nghost-%COMP%]     .fa-print{background-color:green;color:#fff}[_nghost-%COMP%]     .fa-print span{position:absolute;display:none;padding:12px 30px;font-weight:400;font-size:11px;left:-18px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:green;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid green;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-print:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-square-o{background-color:#04a9f5;color:#fff}[_nghost-%COMP%]     .fa-pencil-square-o span{position:absolute;display:none;padding:12px 46px;font-weight:400;font-size:11px;left:-50px;top:-34px;line-height:15px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-square-o span:before{content:"Generate";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     .fa-trash{background-color:red;color:#fff}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:12px 33px;font-weight:400;font-size:11px;left:-24px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete LR";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-handshake-o{background-color:#1dddc6;color:#fff}[_nghost-%COMP%]     .fa-handshake-o span{position:absolute;display:none;padding:11px 32px;font-weight:400;font-size:10px;left:-23px;top:-33px;line-height:14px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-handshake-o span:before{content:"TripSettlement";display:block;position:absolute;top:0;left:0;background-color:#1dddc6;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1dddc6;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-handshake-o:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),ue);function be(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Name"),m["\u0275\u0275elementEnd"]())}function ve(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.name)}}function xe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"th",12),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,ve,2,1,"td",9),m["\u0275\u0275elementStart"](8,"td"),m["\u0275\u0275elementStart"](9,"span",13),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"]().getImage(e)})),m["\u0275\u0275text"](10,"view"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td"),m["\u0275\u0275text"](12),m["\u0275\u0275pipe"](13,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.statusName),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","allLR"==i.viewType),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](13,5,a.addtime,"dd MMM HH:mm a"))}}function ye(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var Ce,_e=((Ce=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.expenses=[],this.viewImages=null,this.activeImage="exp_sheet1",this.viewType="allExp",this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){this.getExpenditure()}},{key:"refresh",value:function(){this.getExpenditure()}},{key:"getExpenditure",value:function(){var e=this;++this.common.loading,this.api.post("FoDetails/getExpenditureSheet",{type:this.viewType}).subscribe((function(t){--e.common.loading,console.log("Res:",t),e.expenses=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getImage",value:function(e){console.log(e);var t=[{name:"Sheet-1",image:e.exp_sheets[0]}];console.log("images:",t),this.common.params={images:t,title:"LR Details"},this.modalService.open(O.a,{size:"lg",container:"nb-layout"})}}]),e}()).\u0275fac=function(e){return new(e||Ce)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Ce.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ce,selectors:[["expenses"]],decls:31,vars:4,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-10"],[1,"col-sm-2"],["name","viewType",1,"form-control",3,"ngModel","change","ngModelChange"],["value","allExp"],["value","myExp"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["scope","row"],[2,"text-decoration","underline","color","blue","cursor","pointer",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Expenses"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"select",4),m["\u0275\u0275listener"]("change",(function(){return t.getExpenditure()}))("ngModelChange",(function(e){return t.viewType=e})),m["\u0275\u0275elementStart"](8,"option",5),m["\u0275\u0275text"](9,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",6),m["\u0275\u0275text"](11,"My"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"nb-card-body"),m["\u0275\u0275elementStart"](13,"div"),m["\u0275\u0275elementStart"](14,"table",7),m["\u0275\u0275elementStart"](15,"thead",8),m["\u0275\u0275elementStart"](16,"tr"),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"th"),m["\u0275\u0275text"](22,"Status Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](23,be,2,0,"th",9),m["\u0275\u0275elementStart"](24,"th"),m["\u0275\u0275text"](25,"view"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"th"),m["\u0275\u0275text"](27,"Add Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"tbody"),m["\u0275\u0275template"](29,xe,14,8,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](30,ye,2,0,"div",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngModel",t.viewType),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngIf","allLR"==t.viewType),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngForOf",t.expenses),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.expenses.length))},directives:[p.s,p.v,ce.D,ce.r,ce.u,ce.w,ce.G,p.r,u.u,u.t],pipes:[u.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 210px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:250px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ce),Se=r("I3j9"),Me=r("5pkc"),ke=r("skNO"),we=r("VJ3l"),Oe=r("Mfh5"),Pe=r("urU0"),Ee=r("1i8C"),Te=r("M5JG"),De=r("3a3o"),Ie=r("wd/R"),Fe=r("INKT"),Ae=r("Ig2y"),Ve=r("ZyeE"),Le=r("jjvj"),ze=r("iJpb"),je=r("d/uI"),Re=r("fofb"),He=r("0BXs"),Ne=r("1+iI"),Ue=r("cUpR"),Ge=r("syhs"),Be=r("yotz"),We=r("z+eI");function Ke(e,t){1&e&&m["\u0275\u0275element"](0,"tmg")}var $e=function(e){return{"background-color":e}};function qe(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](4).choosePrimarySubStatus(e)})),m["\u0275\u0275elementStart"](2,"div",28),m["\u0275\u0275element"](3,"div",29),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",30),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](3,$e,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"](" ",a.name," (",a.length,") ")}}function Je(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",20),m["\u0275\u0275element"](1,"div",21),m["\u0275\u0275elementStart"](2,"div",22),m["\u0275\u0275elementStart"](3,"div",23),m["\u0275\u0275elementStart"](4,"div",12),m["\u0275\u0275elementStart"](5,"div",13),m["\u0275\u0275elementStart"](6,"span"),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",24),m["\u0275\u0275element"](9,"chart",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",14),m["\u0275\u0275elementStart"](11,"div",26),m["\u0275\u0275template"](12,qe,6,5,"nb-card",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](13,"div",21),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",n.isMapView),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](n.pdfData.primary.name),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("data",n.pdfData.primary.chartData)("options",n.pdfData.primary.chartOptions),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",n.pdfData.primary.list)}}function Ye(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](3).filterData(e.name)})),m["\u0275\u0275elementStart"](2,"div",28),m["\u0275\u0275element"](3,"div",29),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",31),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"titlecase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](5,$e,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"](" ",m["\u0275\u0275pipeBind1"](6,3,a.name)," (",o.pdfData.tripStart.kpiGroups[a.name].length,") ")}}function Ze(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](3).filterData(e.name)})),m["\u0275\u0275elementStart"](2,"div",28),m["\u0275\u0275element"](3,"div",29),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",31),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"titlecase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](5,$e,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"](" ",m["\u0275\u0275pipeBind1"](6,3,a.name)," (",o.pdfData.tripEnd.kpiGroups[a.name].length,") ")}}function Qe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",32),m["\u0275\u0275element"](3,"smart-table",33),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("id","print-table-"+a),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("data",n.data)("settings",n.settings)}}var Xe=function(e){return{width:e}},et=function(){return{bottom:!1,right:!0,top:!1,left:!1}};function tt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",2),m["\u0275\u0275elementStart"](2,"div",3),m["\u0275\u0275elementStart"](3,"h4"),m["\u0275\u0275text"](4,"Trip dashboard"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](5,Je,14,5,"div",4),m["\u0275\u0275elementStart"](6,"div",5),m["\u0275\u0275elementStart"](7,"div",6),m["\u0275\u0275element"](8,"i",7),m["\u0275\u0275element"](9,"i",8),m["\u0275\u0275element"](10,"hr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",9),m["\u0275\u0275elementStart"](12,"div",10),m["\u0275\u0275elementStart"](13,"div",11),m["\u0275\u0275elementStart"](14,"div",12),m["\u0275\u0275elementStart"](15,"div",13),m["\u0275\u0275elementStart"](16,"span"),m["\u0275\u0275text"](17,"Top 5 Trip Start"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",14),m["\u0275\u0275elementStart"](19,"div",15),m["\u0275\u0275template"](20,Ye,7,7,"nb-card",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](21,"div",17),m["\u0275\u0275elementStart"](22,"div",18),m["\u0275\u0275elementStart"](23,"div",11),m["\u0275\u0275elementStart"](24,"div",12),m["\u0275\u0275elementStart"](25,"div",13),m["\u0275\u0275elementStart"](26,"span"),m["\u0275\u0275text"](27,"Top 5 Trip End"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"div",14),m["\u0275\u0275elementStart"](29,"div",15),m["\u0275\u0275template"](30,Ze,7,7,"nb-card",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"div",19),m["\u0275\u0275listener"]("resizeEnd",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).onResizeEnd(e,"smartTable")})),m["\u0275\u0275template"](32,Qe,4,3,"nb-card",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",a.pdfData.primary.list.length),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("hidden",a.isMapView),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngForOf",a.pdfData.tripStart.list),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",a.isMapView),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngForOf",a.pdfData.tripEnd.list),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",m["\u0275\u0275pureFunction1"](9,Xe,a.isMapView?a.widths.smartTable:"100%"))("resizeEdges",m["\u0275\u0275pureFunction0"](11,et)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",a.pdfData.tables)}}function nt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"li",39),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](6).selectSubStatus(e.kpis)})),m["\u0275\u0275element"](1,"span"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",a.name," ")}}function at(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",51),m["\u0275\u0275elementStart"](1,"ul"),m["\u0275\u0275template"](2,nt,3,1,"li",52),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](5);m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.primarySubStatus)}}function ot(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](4).choosePrimarySubStatus(e)})),m["\u0275\u0275elementStart"](2,"div",28),m["\u0275\u0275element"](3,"div",29),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",41),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"titlecase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",21),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](9,at,3,1,"div",50),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](6,$e,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](6,4,a.name)," "),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",a.length," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o.activePrimaryStatus==a.name)}}function it(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,ot,10,8,"nb-card",16),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.primaryStatus)}}function rt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"li",39),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](6).selectSubStatus(e.kpi)})),m["\u0275\u0275element"](1,"span"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"](" ",a.name," : ",a.kpi.length," ")}}function lt(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",51),m["\u0275\u0275elementStart"](1,"ul"),m["\u0275\u0275template"](2,rt,3,2,"li",52),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](5);m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.subGroup.data)}}function st(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](4).filterSubStatus(e.name)})),m["\u0275\u0275elementStart"](2,"div",28),m["\u0275\u0275element"](3,"div",29),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",41),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"titlecase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",21),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](9,lt,3,1,"div",50),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](6,$e,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](6,4,a.name)," "),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",o.kpiGroups[a.name].length," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o.subGroup.name===a.name)}}function dt(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,st,10,8,"nb-card",16),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.kpiGroupsKeys)}}var ct=function(e){return{transform:e}};function mt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",53),m["\u0275\u0275elementStart"](1,"div"),m["\u0275\u0275elementStart"](2,"div",19),m["\u0275\u0275listener"]("resizeEnd",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).onResizeEnd(e,"smartTable")})),m["\u0275\u0275elementStart"](3,"div",54),m["\u0275\u0275elementStart"](4,"smart-table",55),m["\u0275\u0275listener"]("action",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).jrxActionHandler(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",56),m["\u0275\u0275element"](6,"div",57),m["\u0275\u0275elementStart"](7,"div",58),m["\u0275\u0275element"](8,"img",59),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",60),m["\u0275\u0275elementStart"](10,"input",61),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).isCluster=e}))("change",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](3).createCluster()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"span",62),m["\u0275\u0275elementStart"](12,"b"),m["\u0275\u0275text"](13,"Cluster View?"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](3);m["\u0275\u0275property"]("ngClass",a.isMapView?"col-sm-12 p-0":"col-sm-9 p-0"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("enableGhostResize",!0)("ngStyle",m["\u0275\u0275pureFunction1"](10,Xe,a.isMapView?a.widths.smartTable:"100%"))("resizeEdges",m["\u0275\u0275pureFunction0"](12,et)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("data",a.table.data)("settings",a.table.settings),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!a.isMapView)("ngStyle",m["\u0275\u0275pureFunction1"](13,Xe,"calc(100% - "+a.widths.smartTable+")")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](15,ct,a.rotate)),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",a.isCluster)}}function pt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card",34),m["\u0275\u0275elementStart"](1,"nb-card-body",35),m["\u0275\u0275elementStart"](2,"div",36),m["\u0275\u0275elementStart"](3,"div",37),m["\u0275\u0275elementStart"](4,"div",12),m["\u0275\u0275elementStart"](5,"div",38),m["\u0275\u0275elementStart"](6,"span",39),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).changeOptions("reverse")})),m["\u0275\u0275element"](7,"i",40),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",41),m["\u0275\u0275elementStart"](9,"span"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",38),m["\u0275\u0275elementStart"](12,"span",39),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).changeOptions("forward")})),m["\u0275\u0275element"](13,"i",42),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div"),m["\u0275\u0275element"](15,"chart",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",43),m["\u0275\u0275elementStart"](17,"nb-card"),m["\u0275\u0275elementStart"](18,"nb-card-body",27),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).allData()})),m["\u0275\u0275elementStart"](19,"div",28),m["\u0275\u0275element"](20,"div",44),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",41),m["\u0275\u0275text"](22," All Data "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",21),m["\u0275\u0275text"](24),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](25,it,2,1,"div",0),m["\u0275\u0275template"](26,dt,2,1,"div",0),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"button",45),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).generatePDF()})),m["\u0275\u0275element"](28,"i",46),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"span",47),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).exportCsv("print-section")})),m["\u0275\u0275element"](30,"i",48),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](31,mt,14,17,"div",49),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",a.isMapView),m["\u0275\u0275advance"](7),m["\u0275\u0275textInterpolate"](a.viewName),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("data",a.chartData)("options",a.chartOptions),m["\u0275\u0275advance"](9),m["\u0275\u0275textInterpolate1"](" ",a.allKpis.length," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","showprim_status"==a.viewType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","showprim_status"!==a.viewType),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",a.table)}}function ht(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,tt,33,12,"div",0),m["\u0275\u0275template"](2,pt,32,8,"nb-card",1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.allKpis.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.allKpis.length)}}var gt,ut=((gt=function(){function e(t,n,a,o,r,l,s,d,c,m,p){i(this,e),this.api=t,this.common=n,this.user=a,this.formBuilder=o,this.modalService=r,this.mapService=l,this.datePipe=s,this.dateService=d,this._sanitizer=c,this.csvService=m,this.pdfService=p,this.testingDate=this.common.dateFormatter(new Date,"",!1),this.submitted=!1,this.kpis=[],this.allKpis=[],this.searchTxt="",this.filters=[],this.today=null,this.viewType="showprim_status",this.viewName="Primary Status",this.kpiGroups=null,this.kpiGroupsKeys=[],this.keyGroups=[],this.isCluster=!1,this.markers=null,this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.viewIndex=0,this.viewOtions=[{name:"Primary Status",key:"showprim_status"},{name:"Trip Start",key:"x_showtripstart"},{name:"Trip End",key:"x_showtripend"}],this.selectedFilterKey="",this.table=null,this.primaryStatus=[],this.subPrimaryStatus={},this.secondaryStatus=[],this.activePrimaryStatus="",this.primarySubStatus=[],this.widths={smartTable:"40%",map:"60%"},this.isMapView=!1,this.infoWindow=null,this.infoStart=null,this.isZoomed=!1,this.lastRefreshTime=new Date,this.pdfData={primary:{name:"Primary",chartData:null,chartOptions:null,list:[],key:"showprim_status"},tripStart:{name:"Trip Start",chartData:null,chartOptions:null,list:[],key:"x_showtripstart",kpiGroups:null},tripEnd:{name:"Trip End",chartData:null,chartOptions:null,list:[],key:"x_showtripend",kpiGroups:null},tables:[]},this.subGroup={name:void 0,data:[]},this.rotate="",console.log("this.user._customer",this.user._customer,"this.user._details",this.user._details),this.getKPIS(),this.common.currentPage="",this.common.refresh=this.refresh.bind(this),this.today=new Date}return l(e,[{key:"ngOnInit",value:function(){this.registerForm=this.formBuilder.group({firstName:["",ce.F.required],lastName:["",ce.F.required],search:["",ce.F.required]})}},{key:"ngAfterViewInit",value:function(){this.common.stopScroll()}},{key:"ngOnDestroy",value:function(){this.mapService.map=null,this.common.continuoueScroll()}},{key:"onSubmit",value:function(){this.submitted=!0,this.registerForm.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.registerForm.value))}},{key:"refresh",value:function(){this.getKPIS()}},{key:"getKPIS",value:function(e){var t=this;this.lastRefreshTime=new Date,!e&&this.common.loading++;var n=this.api.get("VehicleKpis").subscribe((function(a){!e&&t.common.loading--,1==a.code&&(t.allKpis=a.data,localStorage.setItem("KPI_DATA",JSON.stringify(t.allKpis)),t.kpis=a.data,t.grouping(t.viewType),t.table=t.setTable(),t.handlePdfPrint()),n.unsubscribe()}),(function(a){!e&&t.common.loading--,console.error("getKPIs:",a),n.unsubscribe()}))}},{key:"getTableColumns",value:function(e){var t=this,n=[];return(e||this.kpis).map((function(e,a){n.push({_id:e.x_showveh,vehicle:{value:e.x_showveh,action:"",colActions:{dblclick:"",click:"",mouseover:"",mouseout:""}},vehicleType:{value:e.x_vehicle_type,action:""},status:{value:e.showprim_status,action:""},location:{value:e.Address,action:""},hrs:{value:e.x_hrssince,action:""},Idle_Time:{value:t.common.changeTimeformat(e.x_idle_time),action:""},trail:{value:t.common.getTripStatusHTML(e.trip_status_type,e.x_showtripstart,e.x_showtripend,e.x_p_placement_type,e.x_p_loc_name),action:"",isHTML:!0},kmp:{value:e.x_kmph,action:""},action:{value:"",isHTML:!1,action:null,icons:t.actionIcons()}})})),n}},{key:"getViewType",value:function(){this.table.data.columns=this.getTableColumns(),this.grouping(this.viewType)}},{key:"grouping",value:function(e){var t=this;if(this.kpis=this.allKpis,this.kpiGroups=K.groupBy(this.allKpis,e),("x_showtripend"===this.viewType||"x_showtripstart"===this.viewType)&&this.kpiGroups[""]){var a={};this.kpiGroups[""].forEach((function(e){var t="";e.placements.length&&(t=e.placements[0].name),t in a?a[t].push(e):a[t]=[e]})),Object.keys(a).forEach((function(e){var o;e in t.kpiGroups?(o=t.kpiGroups[e]).push.apply(o,n(a[e])):t.kpiGroups[e]=a[e]}))}Object.keys(this.kpiGroups).forEach((function(e){if(e.includes("#")){var a,o=e.split("#")[0];o in t.kpiGroups?(a=t.kpiGroups[o]).push.apply(a,n(t.kpiGroups[e])):t.kpiGroups[o]=t.kpiGroups[e],delete t.kpiGroups[e]}})),this.kpiGroupsKeys=Object.keys(this.kpiGroups),this.keyGroups=[],"showprim_status"==e?(this.primaryStatusGrouping(),this.primaryStatus.map((function(e){var n=Math.floor(359*Math.random()+1);t.keyGroups.push({name:e.name,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")}),e.bgColor="hsl(".concat(n,", 100%, 75%)"),e.textColor="hsl(".concat(n,", 100%, 25%)")}))):this.kpiGroupsKeys.map((function(e){var n=Math.floor(359*Math.random()+1);t.keyGroups.push({name:e,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")})})),this.sortData(e)}},{key:"primaryStatusGrouping",value:function(){var e=this;this.primaryStatus=[],this.allKpis.map((function(t){var n=t.showprim_status.split(","),a=n.splice(0,1)[0].trim(),o=n.join(",").trim(),i=!1;"No Data 12 Hr"==a?(a="Issue",o="12 Hr +"):"Undetected"==a?(a="Issue",o="Undetected"):"No GPS Data"==a&&(a="Issue",o="No GPS Data"),e.primaryStatus.map((function(e){e.name==a&&(i=!0,e.length++,e.subStatus[o]?e.subStatus[o].push(t):e.subStatus[o]=[t])})),i||(e.primaryStatus.push({name:a,length:1,subStatus:{}}),e.primaryStatus[e.primaryStatus.length-1].subStatus[o]=[t])}))}},{key:"sortData",value:function(e){var t=this,n=[];this.chartColors=[];var a=[],o=[];"showprim_status"==e?(this.primaryStatus=K.sortBy(this.primaryStatus,["length"]).reverse(),this.primaryStatus.map((function(e){t.chartColors.push(e.bgColor),a.push(e.name),o.push(e.length)}))):(this.keyGroups.map((function(e){n.push({group:e,length:t.kpiGroups[e.name].length})})),this.kpiGroupsKeys=[],K.sortBy(n,["length"]).reverse().map((function(e){t.kpiGroupsKeys.push(e.group)})),this.kpiGroupsKeys.map((function(e){t.chartColors.push(e.bgColor),a.push(e.name),o.push(t.kpiGroups[e.name].length)})));var i=this.common.pieChart(a,o,this.chartColors);this.chartData=i.chartData,this.chartOptions=i.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,e)}},{key:"filterData",value:function(e,t){var a=this;if("showprim_status"==this.viewType||"showprim_status"==t)if(this.kpis=[],"All"==e)this.primaryStatus.map((function(e){Object.keys(e.subStatus).map((function(t){e.subStatus[t].map((function(e){a.kpis.push(e)}))}))}));else for(var o=function(t){if(a.primaryStatus[t].name==e)return Object.keys(a.primaryStatus[t].subStatus).map((function(e){a.primaryStatus[t].subStatus[e].map((function(e){a.kpis.push(e)}))})),"break"},i=0;i<this.primaryStatus.length&&"break"!==o(i);i++);else if("All"==e)this.kpis=this.allKpis;else if(this.selectedFilterKey=e,this.kpis=this.allKpis.filter((function(t){return t[a.viewType].split("-").map((function(e){return e.split("#")[0]})).join(" - ")==e})),"x_showtripend"===this.viewType&&""!=e){var r=K.groupBy(this.allKpis,this.viewType),l={};r[""].forEach((function(e){var t="";e.placements&&e.placements.length&&((t=e.placements[0].name)in l?l[t].push(e):l[t]=[e])})),Object.keys(l).forEach((function(t){var o;t===e&&(o=a.kpis).push.apply(o,n(l[t]))}))}this.table=this.setTable()}},{key:"filterSubStatus",value:function(e){var t=this;if(this.subGroup.name!=e){var a=this.allKpis.filter((function(n){return n[t.viewType].split("#")[0]==e})),o=this.allKpis.filter((function(e){return!e[t.viewType]})).filter((function(t){return!(!t.placements||!t.placements.length||t.placements[0].name!==e)}));if(a.push.apply(a,n(o)),a.length<2||""===e)return this.selectSubStatus(a),void(this.subGroup={name:void 0,data:[]});var i=K.groupBy(a,"x_showtripend"===this.viewType?"x_showtripstart":"x_showtripend");if(("x_showtripend"===this.viewType||"x_showtripstart"===this.viewType)&&i[""]){var r={};i[""].forEach((function(e){var t="";e.placements&&e.placements.length&&((t=e.placements[0].name)in r?r[t].push(e):r[t]=[e])})),Object.keys(r).forEach((function(e){var t;""===e?i[""]=r[e]:e in i?(t=i[e]).push.apply(t,n(r[e])):i[e]=r[e]}))}delete i[""];var l=[];if(Object.keys(i).forEach((function(e){var t,a=e.split("#")[0];a!==e&&(a in i?((t=i[a]).push.apply(t,n(i[e])),-1===l.indexOf(e)&&l.push(e)):(i[a]=i[e],l.push(e)))})),l.forEach((function(e){return delete i[e]})),Object.keys(i).length<=1)return this.selectSubStatus(a),void(this.subGroup={name:void 0,data:[]});i.All=a,this.subGroup.name=e,this.subGroup.data=Object.keys(i).map((function(e){return{name:e,kpi:i[e]}})).sort((function(e,t){return e.kpi.length<t.kpi.length?1:-1})).slice(0,6)}else this.subGroup={name:void 0,data:[]}}},{key:"showLocation",value:function(e){e.x_tlat?(this.common.params={location:{lat:e.x_tlat,lng:e.x_tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}},{key:"findVehicle",value:function(){var e=this;this.kpis=this.searchTxt?this.allKpis.filter((function(t){return t.x_showveh.toUpperCase().includes(e.searchTxt.toUpperCase())})):this.allKpis}},{key:"findFilters",value:function(){var e=this;this.filters=["all"],this.allKpis.map((function(t){-1==e.filters.indexOf(t.showprim_status)&&e.filters.push(t.showprim_status)}))}},{key:"showDetails",value:function(e){this.common.params={kpi:e},this.modalService.open(k.a,{size:"lg",container:"nb-layout"}).componentInstance.modalHeader="kpisDetails"}},{key:"getLR",value:function(e){var t=this;this.common.loading++;var n=this.api.post("FoDetails/getLorryDetails",{x_lr_id:e.x_lr_id}).subscribe((function(e){t.common.loading--,e.data&&e.data.length&&t.showLR(e.data[0]),n.unsubscribe()}),(function(e){t.common.loading--,console.error("getLR: ",e),n.unsubscribe()}))}},{key:"showLR",value:function(e){this.common.params={images:[{name:"Lr",image:e.lr_image},{name:"Invoice",image:e.invoice_image},{name:"Other_Image",image:e.other_image}],title:"LR Details"},this.modalService.open(O.a,{size:"lg",container:"nb-layout"})}},{key:"changeOptions",value:function(e){"forward"===e?(++this.viewIndex,this.viewIndex>this.viewOtions.length-1&&(this.viewIndex=0)):(--this.viewIndex,this.viewIndex<0&&(this.viewIndex=this.viewOtions.length-1)),this.viewType=this.viewOtions[this.viewIndex].key,this.viewName=this.viewOtions[this.viewIndex].name,this.grouping(this.viewType)}},{key:"allData",value:function(){this.selectedFilterKey="",this.filterData("All")}},{key:"reportIssue",value:function(e){var t=this;this.common.params={refPage:"db"},this.modalService.open(Se.a,{size:"sm",container:"nb-layout"}).result.then((function(n){return n.status&&t.common.reportAnIssue(n.issue,e.x_vehicle_id)}))}},{key:"setTable",value:function(e){return{data:{headings:{vehicle:{title:"Vehicle Number",placeholder:"Vehicle No"},vehicleType:{title:"Vehicle Type",placeholder:"Veh Type"},status:{title:"Status",placeholder:"Status"},location:{title:"Location",placeholder:"Location"},hrs:{title:"Hrs",placeholder:"Hrs "},Idle_Time:{title:"Idle Time",placeholder:"Idle Time"},trail:{title:"Trail",placeholder:"Trail"},kmp:{title:"Kmp",placeholder:"KMP"},action:{title:"Action",placeholder:"",hideSearch:!0}},columns:this.getTableColumns(e)},settings:{hideHeader:!0,count:{icon:"fa fa-map",action:this.handleMapView.bind(this)},pagination:!0,tableHeight:"87vh",oneAction:!0,selectRow:!0,selectMultiRow:!1}}}},{key:"choosePrimarySubStatus",value:function(e){if(e.name==this.activePrimaryStatus)return this.activePrimaryStatus="",void(this.primarySubStatus=[]);if(1==Object.keys(e.subStatus).length)return this.kpis=e.subStatus[Object.keys(e.subStatus)[0]],this.table=this.setTable(),this.primarySubStatus=[],void(this.activePrimaryStatus="");var t=[];Object.keys(e.subStatus).map((function(n,a){0==a&&t.push({id:0,name:"All",kpis:[]}),e.subStatus[n].map((function(e){return t[0].kpis.push(Object.assign({},e))})),t.push({id:a+1,name:(n||e.name)+" : "+e.subStatus[n].length,kpis:e.subStatus[n]})})),t[0].name+=" : "+t[0].kpis.length,this.primarySubStatus=t,this.activePrimaryStatus=e.name}},{key:"selectSubStatus",value:function(e){this.kpis=e,this.table=this.setTable()}},{key:"vehicleReport",value:function(e){this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,ref_page:"consView"},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(ke.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"myCustomModalClass"})}},{key:"openRouteMapper",value:function(e){var t,n,a;t=new Date,n=e.x_showstarttime?this.common.dateFormatter(e.x_showstarttime):new Date(t.setDate(t.getDate()-2)),a=this.common.dateFormatter(n);var o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,fromTime:o,toTime:i},this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}},{key:"openTripDetails",value:function(e){var t,n,a;t=new Date,n=new Date(t.setMonth(t.getMonth()-2)),a=this.common.dateFormatter(n);var o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,fromTime:o,toTime:i},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(Oe.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}},{key:"vehicleOnMap",value:function(){this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicles:this.kpis},this.modalService.open(Me.a,{size:"lg",container:"nb-layout"})}},{key:"onResizeEnd",value:function(e,t){this.widths[t]=e.rectangle.width+"px"}},{key:"initialiseMap",value:function(){var e=this;this.mapService.map&&"concise-view-map"==this.mapService.map.__gm.Z.id?this.mapService.map.__gm.Z=document.getElementById("concise-view-map"):this.mapService.mapIntialize("concise-view-map"),this.mapService.clearAll();for(var n=0;n<this.kpis.length;n++)this.kpis[n].color="No Data 12 Hr"==this.kpis[n].showprim_status||"Undetected"==this.kpis[n].showprim_status||"No GPS Data"==this.kpis[n].showprim_status?"ff0000":this.kpis[n].x_idle_time/60>0?"ffff00":"00ff00";setTimeout((function(){e.mapService.setMapType(0),e.markers=e.mapService.createMarkers(e.kpis),e.mapService.addListerner(e.mapService.map,"center_changed",(function(){})),e.mapService.addListerner(e.mapService.map,"zoom_changed",(function(){}));var n,a=0,o=t(e.mapService.markers);try{var i=function(){var t=n.value,o=e.kpis[a];e.mapService.addListerner(t,"mouseover",(function(){return e.setEventInfo(o)})),e.mapService.addListerner(t,"mouseout",(function(){return e.unsetEventInfo()})),a++};for(o.s();!(n=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}}),1e3)}},{key:"setMarkerLabels",value:function(){if(0!=this.mapService.markers.length){var e,n=t(this.mapService.markers);try{for(n.s();!(e=n.n()).done;)e.value.setLabel("")}catch(o){n.e(o)}finally{n.f()}}if(this.mapService.map.getZoom()>=9)for(var a=0;a<this.mapService.markers.length;a++)this.mapService.markers[a].setLabel(this.kpis[a].x_showveh)}},{key:"createCluster",value:function(){if(this.isCluster){for(var e=0;e<this.markers.length;e++)this.markers[e]&&(this.markers[e].title=this.kpis[e].x_showveh);this.mapService.createCluster(this.markers,!0)}else this.mapService.createCluster(this.markers,!1)}},{key:"setEventInfo",value:function(e){this.infoStart=(new Date).getTime(),this.infoWindow&&this.infoWindow.close(),this.infoWindow=this.mapService.createInfoWindow(),this.infoWindow.opened=!1,this.infoWindow.setContent("\n      <b>Vehicle:</b>".concat(e.x_showveh," <br>\n      <span><b>Trip:</b>").concat(this.common.getTripStatusHTML(e.trip_status_type,e.x_showtripstart,e.x_showtripend,e.x_p_placement_type,e.x_p_loc_name),"</span> <br>\n      <b>Status:</b>").concat(e.showprim_status," <br>\n      <b>Location:</b>").concat(e.Address," <br>\n      ")),this.rotateBounce(e,null,!1),this.infoWindow.setPosition(this.mapService.createLatLng(e.x_tlat,e.x_tlong)),this.infoWindow.open(this.mapService.map),this.mapService.getMapBounds()}},{key:"unsetEventInfo",value:function(){(new Date).getTime()-this.infoStart>500&&(this.infoWindow.close(),this.infoWindow.opened=!1)}},{key:"handleMapView",value:function(){var e=this;if(this.isZoomed)return this.isZoomed=!1,this.mapService.setMapType(0),void this.mapService.resetBounds();this.isMapView=!this.isMapView,setTimeout((function(){e.initialiseMap()}),1e3)}},{key:"rotateBounce",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.rotate="rotate("+e.x_angle+"deg)",n&&this.mapService.toggleBounceMF(t)}},{key:"getUpadte",value:function(e){this.common.params={tripDetils:{vehicleId:e.x_vehicle_id,siteId:e.x_hl_site_id},ref_page:"kpi"},this.modalService.open(Te.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getZoomAndaddShortTarget",value:function(e){this.isMapView?this.getZoom(e):this.addShortTarget(e)}},{key:"getZoom",value:function(e){if(e){var t=this.mapService.getLatLngValue(e),n=this.mapService.createLatLng(t.lat,t.lng);this.mapService.zoomAt(n),this.isZoomed=!0}}},{key:"actionIcons",value:function(){return[{class:"icon fa fa-chart-pie",action:""},{class:"icon fa fa-star",action:""},{class:"icon fa fa-route",action:""},{class:"icon fa fa-truck",action:""},{class:"icon fa fa-globe",action:""},{class:"icon fa fa-question-circle",action:""},{class:"icon fa fa-user-secret",action:""},{class:"icon fas fa-tachometer-alt",action:""},{class:"icon fas fa-flag-checkered",action:""},{class:"icon fa fa-gavel",action:""},{class:"icon fa fa-phone",action:""}]}},{key:"openChangeStatusModal",value:function(e){var t=new Date,n=this.common.dateFormatter(new Date),a=new Date(t.setHours(t.getHours()-48)),o=this.common.dateFormatter(a),i={id:e.id,vehicle_id:e.x_vehicle_id,tTime:n,suggest:null,latch_time:o,status:2,remark:e.remark,regno:e.x_showveh,tripName:this.common.getTripStatusHTML(e.trip_status_type,e.x_showtripstart,e.x_showtripend,e.x_p_placement_type,e.x_p_loc_name)};this.common.ref_page="tsfl",this.common.params=i,this.modalService.open("admin"!=this.user._loggedInBy?He.a:De.a,{size:"lg",container:"nb-layout"})}},{key:"openVehicleStates",value:function(e){this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh,lat:e.x_tlat,long:e.x_tlong,vregno:e.x_showveh},this.modalService.open(Pe.a,{size:"lg",container:"nb-layout"})}},{key:"onMouseMove",value:function(e){var t=Ie(new Date),n=Ie(this.lastRefreshTime);Ie.duration(t.diff(n)).asMinutes()>=5&&this.getKPIS(!0)}},{key:"addShortTarget",value:function(e){this.common.params={vehicleId:e.x_vehicle_id,vehicleRegNo:e.x_showveh},this.modalService.open(Fe.a,{size:"sm",container:"nb-layout"})}},{key:"openStations",value:function(e){this.common.params={lat:e.x_tlat,long:e.x_tlong},this.modalService.open(Ve.a,{size:"lg",container:"nb-layout"})}},{key:"openOdoMeter",value:function(e){this.common.params={vehicleId:e.x_vehicle_id,regno:e.x_showveh},this.modalService.open(Le.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"openentityFlag",value:function(e){this.common.handleModalSize("class","modal-lg","800"),this.common.params={title:"Entity Flag ",vehicleId:e.x_vehicle_id,regno:e.x_showveh},this.modalService.open(je.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"})}},{key:"openVehicleWiseOrders",value:function(e){this.common.params={vehicle:{id:e.x_vehicle_id,regno:e.x_showveh}},this.modalService.open(Re.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"callNotification",value:function(e){var t=this;if(e.x_mobileno){var n={mobileno:e.x_mobileno,callTime:this.common.dateFormatter(new Date)};this.common.loading++;var a=this.api.post("Notifications/sendCallSuggestionNotifications",n).subscribe((function(e){t.common.loading--,console.log("res",e),t.common.showToast(e.msg),a.unsubscribe()}),(function(e){t.common.loading--,t.common.showError(),console.error("callNotification:",e),a.unsubscribe()}))}else this.common.showError("Driver Mobile no. does not exist")}},{key:"getPdf",value:function(){this.common.downloadPdf("Content1")}},{key:"handlePdfPrint",value:function(){var e=this,t={key:this.viewType,name:this.viewName};["primary","tripStart","tripEnd"].map((function(t){e.viewType=e.pdfData[t].key,e.grouping(e.viewType),e.pdfData[t].chartData=Object.assign({},e.chartData),e.pdfData[t].chartOptions=Object.assign({},e.chartOptions),"primary"==t?e.pdfData[t].list=e.primaryStatus:(e.pdfData[t].list=e.kpiGroupsKeys,e.pdfData[t].kpiGroups=e.kpiGroups)})),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),this.viewType=t.key,this.viewName=t.name,this.grouping(this.viewType)}},{key:"generatePDF",value:function(){var e=this;this.common.loading++;var t=this.user._customer.id;"customer"==this.user._loggedInBy&&(t=this.user._details.id);var n=this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:t}).subscribe((function(t){e.common.loading--,e.printPDF(t.data.name),n.unsubscribe()}),(function(t){e.common.loading--,console.error("Error:",t),n.unsubscribe()}))}},{key:"printPDF",value:function(e){var t=this;this.pdfData.tables=[];var a=this.pdfData.primary.list,o=[];this.primaryStatus.map((function(e){var a=[];Object.keys(e.subStatus).map((function(t){a.push.apply(a,n(e.subStatus[t]))})),t.pdfData.tables.push(t.setTable(a))})),this.pdfData.tables.map((function(e,t){o.push("print-table-"+t)})),this.pdfService.tableWithImages("page-1",o,a,e,"Trip Feedback Logs")}},{key:"cookPdfData",value:function(){var e=this,t={key:this.viewType,name:this.viewName};["primary","tripStart","tripEnd"].map((function(t){e.viewType=e.pdfData[t].key,e.grouping(e.viewType),e.pdfData[t].chartData=Object.assign({},e.chartData),e.pdfData[t].chartOptions=Object.assign({},e.chartOptions),"primary"==t?e.pdfData[t].list=e.primaryStatus:(e.pdfData[t].list=e.kpiGroupsKeys,e.pdfData[t].kpiGroups=e.kpiGroups)})),this.pdfData.tripStart.list.splice(5,this.pdfData.tripStart.list.length-1),this.pdfData.tripEnd.list.splice(5,this.pdfData.tripEnd.list.length-1),this.viewType=t.key,this.viewName=t.name,this.grouping(this.viewType)}},{key:"exportCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id);var a=this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var o=[{customer:"Customer : "+n.data.name},{report:"Report : Dashboard Trips"},{time:"Time : "+t.datePipe.transform(t.today,"dd-MM-yyyy hh:mm:ss a")}];t.csvService.byMultiIds([e],"Dashboard",o),a.unsubscribe()}),(function(e){t.common.loading--,console.error("Err:",e),a.unsubscribe()}))}},{key:"jrxActionHandler",value:function(e){if(e.heading&&"icon"!==e.actionLevel)switch(e.heading){case"vehicle":"click"===e.actionType?this.addShortTarget(this.findKPI(e.column._id)):"dblclick"===e.actionType?this.showDetails(this.findKPI(e.column._id)):"mouseover"===e.actionType&&this.isMapView?this.rotateBounce.bind(this.findKPI(e.column._id),e.index):"mouseout"===e.actionType&&this.isMapView&&this.mapService.toggleBounceMF(e.index,2);break;case"status":this.showDetails(this.findKPI(e.column._id));break;case"location":this.showLocation(this.findKPI(e.column._id));break;case"trail":this.getUpadte(this.findKPI(e.column._id))}else if("icon"===e.actionLevel)switch(e.heading){case"icon fa fa-chart-pie":this.openChangeStatusModal(this.findKPI(e.column._id));break;case"icon fa fa-star":this.vehicleReport(this.findKPI(e.column._id));break;case"icon fa fa-route":this.openRouteMapper(this.findKPI(e.column._id));break;case"icon fa fa-truck":this.openTripDetails(this.findKPI(e.column._id));break;case"icon fa fa-globe":this.openVehicleStates(this.findKPI(e.column._id));break;case"icon fa fa-question-circle":this.reportIssue(this.findKPI(e.column._id));break;case"icon fa fa-user-secret":this.openStations(this.findKPI(e.column._id));break;case"icon fas fa-tachometer-alt":this.openOdoMeter(this.findKPI(e.column._id));break;case"icon fas fa-flag-checkered":this.openentityFlag(this.findKPI(e.column._id));break;case"icon fa fa-gavel":this.openVehicleWiseOrders(this.findKPI(e.column._id));break;case"icon fa fa-phone":this.callNotification(this.findKPI(e.column._id))}}},{key:"findKPI",value:function(e){return this.kpis.find((function(t){return t.x_showveh==e}))}},{key:"f",get:function(){return this.registerForm.controls}}]),e}()).\u0275fac=function(e){return new(e||gt)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](ce.g),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](Ee.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](Ae.a),m["\u0275\u0275directiveInject"](Ue.b),m["\u0275\u0275directiveInject"](Ne.a),m["\u0275\u0275directiveInject"](ze.a))},gt.\u0275cmp=m["\u0275\u0275defineComponent"]({type:gt,selectors:[["concise"]],hostBindings:function(e,t){1&e&&m["\u0275\u0275listener"]("mousemove",(function(e){return t.onMouseMove(e)}),!1,m["\u0275\u0275resolveDocument"])},decls:2,vars:2,consts:[[4,"ngIf"],["class","nb_card_box","style","border: 0px; height: 100%;",4,"ngIf"],["id","page-1",1,"status-print-view","pt-0"],[1,"status-print-title","text-center"],["class","row",4,"ngIf"],[1,"truck-route"],[1,"truck_road"],[1,"fas","fa-truck-moving","left-truck"],[1,"fas","fa-truck-moving","right-truck"],["id","page-2",1,"row"],[1,"col-sm-3","pl-5"],[1,"",2,"overflow","hidden",3,"hidden"],[1,"row",2,"font-size","16px","margin","0px","text-align","center","padding","8px 0px","background","linear-gradient(45deg,#30ccff 0,#5a9cff 100%)","color","#fff","border-radius","5px","margin-bottom","10px"],[1,"col-sm-12"],[1,"status_box"],[1,""],[4,"ngFor","ngForOf"],[1,"col-6"],[1,"col-sm-3","pr-5"],["mwlResizable","",1,"map-table-container",3,"enableGhostResize","ngStyle","resizeEdges","resizeEnd"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[2,"overflow","hidden",3,"hidden"],[1,"chartbox"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[1,"graph-data"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"],[1,"col-sm-9"],[1,"col-sm-11","pr-0"],[3,"id"],[1,"home-page-tabel",2,"width","100%",3,"data","settings"],[1,"nb_card_box",2,"border","0px","height","100%"],[2,"padding","5px 5px 0px"],[1,"row","m-0"],[1,"col-sm-3","pl-0","pr-2",2,"height","90vh","overflow","hidden",3,"hidden"],[1,"col-sm-2"],[3,"click"],[1,"icon","ion-ios-rewind"],[1,"col-sm-8"],[1,"icon","ion-ios-fastforward"],[1,"status_box",2,"overflow","auto","height","calc(90vh - 250px)","max-height","calc(90vh - 250px)"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],["type","button","pdf","",1,"btn","btn-primary","pdf-print",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer",3,"click"],[1,"fas","fa-file-excel"],["class","",3,"ngClass",4,"ngIf"],["class","select_option",4,"ngIf"],[1,"select_option"],[3,"click",4,"ngFor","ngForOf"],[1,"",3,"ngClass"],["id","print-section"],[1,"home-page-tabel",2,"width","100%",3,"data","settings","action"],[2,"padding","0px","min-width","300px","display","inline-block","position","relative",3,"hidden","ngStyle"],["id","concise-view-map",2,"width","100%","height","87vh"],[1,"tracker_img",3,"ngStyle"],["src","./assets/images/arrow-top.png","alt","image"],[1,"cluster-view"],["type","checkbox",2,"vertical-align","middle","margin-top","0",3,"ngModel","ngModelChange","change"],[2,"vertical-align","middle","margin-left","5px"]],template:function(e,t){1&e&&(m["\u0275\u0275template"](0,Ke,1,0,"tmg",0),m["\u0275\u0275template"](1,ht,3,2,"div",0)),2&e&&(m["\u0275\u0275property"]("ngIf",20632==t.user._customer.foid||20632==t.user._details.foid),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",20632!=t.user._customer.foid&&20632!=t.user._details.foid))},directives:[u.u,Ge.a,u.t,Be.a,u.x,We.ChartComponent,p.s,p.r,E.a,u.r,ce.a,ce.r,ce.u],pipes:[u.G],styles:['.headings[_ngcontent-%COMP%]{background:#e2e2e2;font-size:11px;font-weight:500}.data[_ngcontent-%COMP%]{font-size:10px;border-bottom:1px solid #e2e2e2;min-height:20%}.data[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .headings[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:3px;border-left:1px solid #f2f2f2}[_nghost-%COMP%]    .icon{margin-right:5px;cursor:pointer}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .red{background:red;color:#fff}[_nghost-%COMP%]    .pink{background:pink;color:#000}[_nghost-%COMP%]    .green{background:#96ec11;color:#000}.loc-icon[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:orange}[_nghost-%COMP%]     .circle{border:1px solid grey;border-radius:50%;padding:3px 4px}.route-arrow[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;margin:0 5px}[_nghost-%COMP%]     .complete{vertical-align:middle;color:green}.exit[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}.loaded[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]{background:#fff;font-size:13px;padding:6px 8px;border:1px solid #e2e2e2;border-radius:5px;vertical-align:middle;margin-left:10px;width:60%;letter-spacing:.3px;color:#000}table[_ngcontent-%COMP%]{cursor:pointer}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.status_box[_ngcontent-%COMP%]{width:100%}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0!important;border:none!important;border-top:1px solid #d7dee4!important}.status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:14px 10px;font-weight:700}.select_option[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:10px;margin-left:10px;margin-bottom:10px;margin-right:10px;-webkit-box-shadow:rgba(0,0,0,.2) 0 3px 10px 0;box-shadow:0 3px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:100%;margin-right:5px;display:inline-block;vertical-align:middle;-webkit-box-shadow:0 5px 10px 0 rgba(0,0,0,.2);box-shadow:0 5px 10px 0 rgba(0,0,0,.2)}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{background-color:#96ec11}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{background-color:#dc3545}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{background-color:#ff5200}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4)   span[_ngcontent-%COMP%]{background-color:#2196f3}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5)   span[_ngcontent-%COMP%]{background-color:#009688}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6)   span[_ngcontent-%COMP%]{background-color:#607d8b}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7)   span[_ngcontent-%COMP%]{background-color:#9c27b0}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:10px}.select_option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}mwlResizable[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box}.map-table-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;border-right:5px solid #fff}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:60px}[_nghost-%COMP%]     th:nth-child(3){width:50px}[_nghost-%COMP%]     th:nth-child(4){width:70px}[_nghost-%COMP%]     th:nth-child(5){width:70px}[_nghost-%COMP%]     th:nth-child(6){width:42px}[_nghost-%COMP%]     th:nth-child(7){width:42px}[_nghost-%COMP%]     th:nth-child(8){width:100px}[_nghost-%COMP%]     th:nth-child(9){width:44px}[_nghost-%COMP%]     th:nth-child(10){width:70px}[_nghost-%COMP%]     th{position:relative;z-index:999}[_nghost-%COMP%]     th .sort-container{width:15px;display:none}[_nghost-%COMP%]     th .filter-input-container{width:auto}[_nghost-%COMP%]     th:hover .sort-container{display:inline-block}[_nghost-%COMP%]     th:hover .filter-input-container{width:calc(100% - 17px)}[_nghost-%COMP%]     td .icon.fa-chart-pie{color:#04a9f5}[_nghost-%COMP%]     td .icon.fa-chart-pie span{position:absolute;display:none;padding:10px 65px;font-size:11px;font-weight:400;left:-56px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-chart-pie span:before{content:"Change Vehicle Status";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-star{color:#8518d5}[_nghost-%COMP%]     td .icon.fa-star span{position:absolute;display:none;padding:10px 44px;font-weight:400;font-size:11px;left:-36px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-star span:before{content:"Vehicle Event";display:block;position:absolute;top:0;left:0;background-color:#8518d5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8518d5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-star:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-route{color:#ff8091}[_nghost-%COMP%]     td .icon.fa-route span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-route span:before{content:"Route Tracker";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-route:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-truck{color:#5cd050}[_nghost-%COMP%]     td .icon.fa-truck span{position:absolute;display:none;padding:10px 23px;font-size:11px;font-weight:400;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-truck span:before{content:"Trips";display:block;position:absolute;top:0;left:0;background-color:#5cd050;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-truck span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #5cd050;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td .icon.fa-truck:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-globe{color:#d51818}[_nghost-%COMP%]     td .icon.fa-globe span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-globe span:before{content:"Vehicle States";display:block;position:absolute;top:0;left:0;background-color:#d51818;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-globe span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d51818;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     td .icon.fa-globe:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle{color:#b150d0}[_nghost-%COMP%]     td .icon.fa-question-circle span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-62px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-question-circle span:before{content:"Report Issue";display:block;position:absolute;top:0;left:0;background-color:#b150d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #b150d0;position:absolute;bottom:-5px;right:10px}[_nghost-%COMP%]     td .icon.fa-user-secret{color:#50a1d0}[_nghost-%COMP%]     td .icon.fa-user-secret span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-user-secret span:before{content:"Station";display:block;position:absolute;top:0;left:0;background-color:#50a1d0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-user-secret span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #50a1d0;position:absolute;bottom:-5px;right:22px}[_nghost-%COMP%]     td .icon.fa-user-secret:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-tachometer-alt{color:#ff8099}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:before{content:"Odometer";display:block;position:absolute;top:0;left:0;background-color:#ff8099;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8099;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-tachometer-alt:hover span{display:block}[_nghost-%COMP%]     td .icon.fa-flag-checkered{color:#d84a11}[_nghost-%COMP%]     td .icon.fa-flag-checkered span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-28px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:before{content:"Entity flag";display:block;position:absolute;top:0;left:0;background-color:#d84a11;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     td .icon.fa-flag-checkered span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d84a11;position:absolute;bottom:-5px;right:50%;-webkit-transform:translate(50%);transform:translate(50%)}[_nghost-%COMP%]     td .icon.fa-flag-checkered:hover span{display:block}[_nghost-%COMP%]     .icon.fa-gavel{color:#d51818}[_nghost-%COMP%]     .icon.fa-gavel span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .icon.fa-gavel span:before{content:"Vehicle Orders";display:block;position:absolute;top:0;left:0;background-color:#d51818;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .icon.fa-gavel span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #d51818;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     .icon.fa-gavel:hover span{display:block}[_nghost-%COMP%]     .icon.fa-phone span{position:absolute;display:none;padding:10px 46px;font-size:11px;font-weight:400;left:-70px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .icon.fa-phone span:before{content:"Call Driver";display:block;position:absolute;top:0;left:0;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .icon.fa-phone span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;position:absolute;bottom:-5px;right:9px}[_nghost-%COMP%]     .icon.fa-phone:hover span{display:block}[_nghost-%COMP%]     .loading{color:green}[_nghost-%COMP%]     .unloading{color:red}[_nghost-%COMP%]     .others{color:teal}.tracker_img[_ngcontent-%COMP%]{position:absolute;bottom:10px;z-index:999;width:40px;left:12px}.tracker_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 115px)}[_nghost-%COMP%]     .no-search{background:#fff;color:#000}.exel-icon[_ngcontent-%COMP%]{right:30px;background-color:#4fa9ff;font-size:16px;border-radius:100px;width:40px;height:40px;text-align:center;line-height:40px;color:#fff;-webkit-box-shadow:5px 4px 24px rgba(0,0,0,.4);box-shadow:5px 4px 24px rgba(0,0,0,.4)}.exel-icon[_ngcontent-%COMP%], .pdf-print[_ngcontent-%COMP%]{bottom:35px;position:absolute}.pdf-print[_ngcontent-%COMP%]{width:40px!important;height:40px!important;text-align:center!important;line-height:40px!important;border-radius:100%!important;padding:0;font-size:16px!important;margin-top:0!important;left:0;background-color:red!important;cursor:pointer!important}.cluster-view[_ngcontent-%COMP%]{background:#f2f2f2;position:absolute;z-index:999999;bottom:20px;padding:5px 10px;border-radius:5px;left:45%}.status-print-title[_ngcontent-%COMP%]{margin-top:-7px;padding-bottom:20px}.status-print-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{height:auto;margin:auto;z-index:999999;overflow:visible;border-radius:.17rem;padding:4px 20px;background-color:#c9c2de;border-bottom:1px solid #fff;-webkit-box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);box-shadow:0 16px 26px -10px rgba(63,106,216,.56),0 4px 25px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(63,106,216,.2);display:inline-block;color:#000;font-weight:600;font-size:1rem;text-align:center}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}','.nb_card_box[_ngcontent-%COMP%]{position:absolute;top:70px;z-index:998}.status-print-view2[_ngcontent-%COMP%]{width:210mm;height:297mm;margin:auto}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{width:33%;display:inline-block;padding:0;font-size:14px;font-weight:700}.graph-data[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:15px 6px;display:block}.status-print-view[_ngcontent-%COMP%]{padding:15px;height:310mm;font-size:24px}.all_data[_ngcontent-%COMP%]{font-size:12px}.status-print-view[_ngcontent-%COMP%]   .dashboard_chart[_ngcontent-%COMP%]{width:60%;margin:16px auto 15px}.truck-route[_ngcontent-%COMP%]{position:relative;width:80%;margin:20px auto 40px}.truck_road[_ngcontent-%COMP%]{display:block;width:100%}.truck_road[_ngcontent-%COMP%]:before{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;bottom:-3px}.truck_road[_ngcontent-%COMP%]:after{content:"";display:block;width:10px;height:10px;background-color:#000;border-radius:100%;position:absolute;right:0;bottom:-3px}.truck_road[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{background-color:#000;height:2px;margin:0}.left-truck[_ngcontent-%COMP%]{margin-left:15px}.right-truck[_ngcontent-%COMP%]{float:right;margin-right:15px}.truck_road[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font-size:40px;color:#f87003}#page-2[_ngcontent-%COMP%]   .status_box[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]:first-child{border-top:0!important}.status-print-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#000;font-weight:600;font-size:1rem;text-align:center}.status_box[_ngcontent-%COMP%]{margin-right:-90px!important}']}),gt),ft=r("QsjJ"),bt=r("aF+1"),vt=r("Ivxp"),xt=r("ZD20"),yt=r("61Pi");function Ct(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",1),m["\u0275\u0275elementStart"](1,"p",2),m["\u0275\u0275text"](2,"Ticket Actions"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"p",4),m["\u0275\u0275elementStart"](5,"span"),m["\u0275\u0275text"](6,"Time Remaining"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"i",5),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getExtraTime()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"span",6),m["\u0275\u0275text"](9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"p",7),m["\u0275\u0275elementStart"](11,"span"),m["\u0275\u0275text"](12,"Reminder"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"i",8),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().setReminder()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"p",7),m["\u0275\u0275elementStart"](15,"span"),m["\u0275\u0275text"](16,"Forward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"i",9),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().forwardTicket()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"p",10),m["\u0275\u0275elementStart"](19,"span"),m["\u0275\u0275text"](20,"Trail List"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"i",11),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getTrailList()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"p",10),m["\u0275\u0275elementStart"](23,"span"),m["\u0275\u0275text"](24,"Comments"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"i",5),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().commentPrompt()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"i",11),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getComments()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",12),m["\u0275\u0275elementStart"](28,"div",13),m["\u0275\u0275elementStart"](29,"div",14),m["\u0275\u0275elementStart"](30,"button",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getRemark(-5)})),m["\u0275\u0275elementStart"](31,"span",16),m["\u0275\u0275text"](32,"Can't Do"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"div",17),m["\u0275\u0275elementStart"](34,"button",18),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getRemark(5)})),m["\u0275\u0275elementStart"](35,"span",16),m["\u0275\u0275text"](36,"Mark as done"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](9),m["\u0275\u0275textInterpolate"](a.ticketInfo&&a.common.findRemainingTime(a.ticketInfo.exp_tkt_time))}}var _t,St=((_t=function(){function e(t,n,a,o,r){i(this,e),this.common=t,this.user=n,this.router=a,this.modalService=o,this.api=r}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getExtraTime",value:function(){this.common.params={ticketId:this.notification.fo_ticket_allocation_id},this.modalService.open(bt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"forwardTicket",value:function(){var e=this;this.common.params={title:"Forward Ticket",ticketId:this.notification.ticket_id,fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id,msg:this.ticketInfo.msg},this.modalService.open(yt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.router.navigate(["/pages/tickets"])}))}},{key:"getTrailList",value:function(){var e=this;this.common.loading++,this.api.get("FoTickets/getTrailLists?ticket_id="+this.notification.ticket_id).subscribe((function(t){console.log(t),e.common.loading--;var n=[];t.data.map((function(e,t){n.push([t,e.employeename,e.spent_time,e.status])})),e.showList("Trail List",["#","Employee Name","Spent Time","Status"],n)}),(function(t){e.common.loading--,console.log(t),e.common.showError()}))}},{key:"showList",value:function(e,t,n){this.common.params={title:e,headings:t,data:n},this.modalService.open(F.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"getComments",value:function(){var e=this;this.common.loading++,this.api.get("FoTickets/getTicketComments?ticket_id="+this.notification.ticket_id).subscribe((function(t){if(console.log(t),e.common.loading--,t.data.length){var n=[];t.data.map((function(e,t){n.push([t,e.employeename,e.status,e.comment,e.addtime])})),e.showList("Trail List",["#","Name","Status","Comment","Time"],n)}else e.common.showToast("No Comment Found!")}),(function(t){e.common.loading--,console.log(t),e.common.showError()}))}},{key:"getRemark",value:function(e){var t=this;this.common.params={title:"Remarks ",isMandatory:5!=e},this.modalService.open(xt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.response&&t.updateNotificationStatus(e,n.remark)}))}},{key:"updateNotificationStatus",value:function(e,t){var n=this,a={ticket_id:this.notification.ticket_id,fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id,status:e,aduserid:this.user._details.id,remark:t,msg:this.ticketInfo.msg};console.log(a),this.common.loading++,this.api.post("FoTickets/updateTicketStatus",a).subscribe((function(e){console.log(e),n.common.loading--,n.common.showToast(e.msg),n.router.navigate(["/pages/tickets"])}),(function(e){n.common.loading--,console.log(e),n.common.showError()}))}},{key:"commentPrompt",value:function(){var e=this;this.common.params={title:"Remarks "},this.modalService.open(xt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.addComment(t.remark)}))}},{key:"addComment",value:function(e){var t=this,n={ticket_id:this.notification.ticket_id,aduserid:this.user._details.id,comment:e,status:this.notification.status};console.log(n),this.common.loading++,this.api.post("FoTickets/setTicketComments",n).subscribe((function(e){console.log(e),t.common.loading--,t.common.showToast(e.msg)}),(function(e){t.common.loading--,console.log(e),t.common.showError()}))}},{key:"setReminder",value:function(){this.common.params={fo_ticket_allocation_id:this.notification.fo_ticket_allocation_id},this.modalService.open(vt.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||_t)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](h.c),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](s.a))},_t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:_t,selectors:[["ticket-actions"]],inputs:{ticketInfo:"ticketInfo",notification:"notification"},decls:1,vars:1,consts:[["class","main",4,"ngIf"],[1,"main"],[1,"section"],[1,"actions","action-text"],[1,"info","action-text"],[1,"action-icon","fa","fa-plus",3,"click"],[1,"remain-time"],[1,"forward","action-text"],[1,"action-icon","fa","fa-bell",3,"click"],[1,"action-icon","fa","fa-share",3,"click"],[1,"mark-done","action-text"],[1,"action-icon","fa","fa-info-circle",3,"click"],[1,"footer"],[1,"row"],[1,"col",2,"padding-left","5%"],[1,"btn","btn-default","btn-sm",3,"click"],[2,"margin-left","10px","text-transform","none","cursor","pointer"],[1,"col"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(e,t){1&e&&m["\u0275\u0275template"](0,Ct,37,1,"div",0),2&e&&m["\u0275\u0275property"]("ngIf",t.ticketInfo)},directives:[u.u],styles:[".main[_ngcontent-%COMP%]{height:auto;background:#fff;border:1px solid #dee2e6}.section[_ngcontent-%COMP%]{padding:15px 8px;font-weight:500;letter-spacing:.5px;font-family:Exo;color:#181818;font-size:28px}.action-text[_ngcontent-%COMP%]{padding:8px 0 5px 5px;margin-left:8px;margin-right:8px;font-weight:500;color:#000;width:95%;font-family:Roboto}i[_ngcontent-%COMP%]{cursor:pointer}.footer[_ngcontent-%COMP%]{margin-top:10px;border-top:1px solid #b1b0b0;padding-top:3%}.row[_ngcontent-%COMP%]{width:95%}.btn.btn-primary.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:-5%;background:#05276b;margin-bottom:3%}.action-icon[_ngcontent-%COMP%]{float:right;background:#f2f2f2;padding:5px 10px;margin-top:-10px;border-radius:2px;min-width:40px;text-align:center}.remain-time[_ngcontent-%COMP%]{float:right;border:1px solid orange;color:orange;padding:4px 5px;border-radius:20px;margin-top:-8px;margin-right:10px;font-size:10px}.ftr-btn[_ngcontent-%COMP%]{background:#fc4a1a;background:-webkit-gradient(linear,right top,left top,from(#f7b733),to(#fc4a1a));background:linear-gradient(270deg,#f7b733,#fc4a1a);color:#fff;font-weight:700;letter-spacing:.5px;width:100%}"]}),_t);function Mt(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1),m["\u0275\u0275element"](2,"a",11),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"]("",n.haltInfo.empname," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("href","tel:"+n.haltInfo.mobileno,m["\u0275\u0275sanitizeUrl"])}}function kt(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Unknown "),m["\u0275\u0275elementEnd"]())}function wt(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"date"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](2,1,n.haltInfo.entry_time,"dd MMM HH:mm"))}}function Ot(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"date"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](2,1,n.haltInfo.start_time,"dd MMM HH:mm"))}}function Pt(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.findRemainingTime(n.haltInfo.duration))}}function Et(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"th"),m["\u0275\u0275text"](2,"Reason"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](null==n.haltInfo?null:n.haltInfo.halt_type)}}function Tt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",15),m["\u0275\u0275elementStart"](1,"span",16),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2);return e.handleAction(e.secType1)})),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.common.secondaryType[a.secType1].btnTxt)}}function Dt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",15),m["\u0275\u0275elementStart"](1,"span",16),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2);return e.handleAction(e.secType2)})),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.common.secondaryType[a.secType2].btnTxt)}}function It(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275template"](2,Tt,3,1,"div",14),m["\u0275\u0275template"](3,Dt,3,1,"div",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",n.secType1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.secType2)}}var Ft,At=((Ft=function(){function e(t,n,a,o){i(this,e),this.api=t,this.router=n,this.modalService=a,this.common=o,this.haltInfo=null,this.ticketInfo=null,this.notification=null,this.title="",this.secType1="",this.secType2="",this.common.params&&localStorage.setItem("Params",JSON.stringify(this.common.params)),this.common.params=JSON.parse(localStorage.getItem("Params")),this.notification=this.common.params.data,this.title=this.common.params.title,this.secType1=this.common.params.secType1,this.secType2=this.common.params.secType2,console.log(this.title,this.secType1,this.secType2),this.getNotificationDetails(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getNotificationDetails()}},{key:"getNotificationDetails",value:function(){var e=this;this.common.loading++,this.api.get("FoTickets/getSingleTicketInfo?ticket_id="+this.notification.ticket_id+"&pri_type="+this.notification.pri_type,{}).subscribe((function(t){e.common.loading--,console.log(t),e.haltInfo=t.data.issue_info[0],e.ticketInfo=t.data.tkt_info[0]}),(function(t){e.common.loading--,console.error(t)}))}},{key:"showLocation",value:function(){if(this.haltInfo.lat){var e={lat:this.haltInfo.lat,lng:this.haltInfo.long,name:"",time:""};console.log("Location: ",e),this.common.params={location:e,title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})}else this.common.showToast("Location not available!")}},{key:"getHaltOptions",value:function(){var e=this;this.common.loading++;var t="type_id="+this.haltInfo.type_id+"&rowid="+this.haltInfo.id+"&regno="+this.haltInfo.regno+"&halt_type_id="+this.haltInfo.halt_type_id;console.log(t),this.api.get("FoTickets/getHaltDetails?"+t,{}).subscribe((function(t){e.common.loading--,console.log(t),e.changeHalt(t.data[0].title,t.data[0].description,t.data[0].option)}),(function(t){e.common.loading--,console.error(t)}))}},{key:"changeHalt",value:function(e,t,n){var a=this;this.common.params={title:e,description:t,options:n},this.modalService.open(ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data: ",e),e.response&&a.updateHalt(e.option)}))}},{key:"updateHalt",value:function(e){var t=this,n={type_id:this.haltInfo.type_id,rowid:this.haltInfo.id,regno:this.haltInfo.regno,halt_type_id:e.id,remark:e.name};console.log(n),this.common.loading++,this.api.post("FoTickets/updateHaltTypes",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),console.log(e),t.getNotificationDetails()}),(function(e){t.common.loading--,console.error(e),t.common.showError()}))}},{key:"findRemainingTime",value:function(e){var t=e%60,n=Math.floor(e/60);return n?n+" hours "+t+" minutes":t+" minutes "}},{key:"handleAction",value:function(e){201==e?this.getHaltOptions():202==e&&this.changeDriver()}},{key:"changeDriver",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ft)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](h.c),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a))},Ft.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ft,selectors:[["ticket-site-details"]],decls:49,vars:12,consts:[[2,"border","0px","padding","0 5px"],[1,"ticket_site_details",2,"padding","15px 0px","clear","both","overflow","hidden"],[1,"col-md-6","pr-0"],[1,"row"],[1,"col-sm-10"],[1,"table","table-bordered","table-hover"],[4,"ngIf"],[2,"color","blue","cursor","pointer",3,"click"],[1,"col-md-6"],[3,"ticketInfo","notification"],["class","card","style","margin-top: 10px; padding: 10px;",4,"ngIf"],[3,"href"],[1,"card",2,"margin-top","10px","padding","10px"],[1,"row",2,"margin-left","42%"],["class","col",4,"ngIf"],[1,"col"],[1,"btn","ftr-btn",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"nb-card"),m["\u0275\u0275elementStart"](4,"nb-card-header"),m["\u0275\u0275elementStart"](5,"div",3),m["\u0275\u0275elementStart"](6,"div",4),m["\u0275\u0275elementStart"](7,"h5"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"nb-card-body"),m["\u0275\u0275elementStart"](10,"div"),m["\u0275\u0275elementStart"](11,"table",5),m["\u0275\u0275elementStart"](12,"tbody"),m["\u0275\u0275elementStart"](13,"tr"),m["\u0275\u0275elementStart"](14,"th"),m["\u0275\u0275text"](15,"Vehicle"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"td"),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"tr"),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Driver"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"td"),m["\u0275\u0275template"](22,Mt,3,2,"div",6),m["\u0275\u0275template"](23,kt,2,0,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"tr"),m["\u0275\u0275elementStart"](25,"th"),m["\u0275\u0275text"](26,"Time Since"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"td"),m["\u0275\u0275template"](28,wt,3,4,"div",6),m["\u0275\u0275template"](29,Ot,3,4,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"tr"),m["\u0275\u0275elementStart"](31,"th"),m["\u0275\u0275text"](32,"Duration"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](33,Pt,2,1,"td",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"tr"),m["\u0275\u0275elementStart"](35,"th"),m["\u0275\u0275text"](36,"Location"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"td"),m["\u0275\u0275text"](38),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"tr"),m["\u0275\u0275elementStart"](40,"th"),m["\u0275\u0275text"](41,"Map View"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"td"),m["\u0275\u0275elementStart"](43,"span",7),m["\u0275\u0275listener"]("click",(function(){return t.showLocation()})),m["\u0275\u0275text"](44,"click here.."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](45,Et,5,1,"tr",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](46,"div",8),m["\u0275\u0275element"](47,"ticket-actions",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](48,It,4,2,"div",10),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275textInterpolate"](t.title||"Vehicle Halt"),m["\u0275\u0275advance"](9),m["\u0275\u0275textInterpolate"](null==t.haltInfo?null:t.haltInfo.regno),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",null==t.haltInfo?null:t.haltInfo.empname),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!(null!=t.haltInfo&&t.haltInfo.empname)),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",null==t.haltInfo?null:t.haltInfo.entry_time),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==t.haltInfo?null:t.haltInfo.start_time),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",null==t.haltInfo?null:t.haltInfo.duration),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"]((null==t.haltInfo?null:t.haltInfo.loc_name)||"Unknown"),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",300==(null==t.notification?null:t.notification.pri_type)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ticketInfo",t.ticketInfo)("notification",t.notification),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.secType1||t.secType2))},directives:[p.s,p.v,p.r,u.u,St],pipes:[u.f],styles:["nb-card-body[_ngcontent-%COMP%]{width:auto}.table[_ngcontent-%COMP%]{background:#fff;width:100%}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-size:1rem;line-height:1.25;font-weight:400}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#0d0e00}.gray-col[_ngcontent-%COMP%]{background:#e2e2e2;font-weight:500}.section[_ngcontent-%COMP%]{background:#f2f2f2;padding:5px 8px;font-weight:500;letter-spacing:.5px}.action-text[_ngcontent-%COMP%]{padding:0 0 3px;border-bottom:1px solid #f2f2f2;margin-left:8px;margin-right:8px;font-weight:500}.action-icon[_ngcontent-%COMP%]{float:right;background:#f2f2f2;padding:5px 10px;margin-top:-10px;border-radius:2px;min-width:40px;text-align:center}.remain-time[_ngcontent-%COMP%]{float:right;border:1px solid orange;color:orange;padding:4px 5px;border-radius:20px;margin-top:-8px;margin-right:10px;font-size:10px}.ftr-btn[_ngcontent-%COMP%]:hover{background:#343a40;color:#fff;font-weight:700;letter-spacing:.5px;cursor:pointer}.ticket_site_details[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%], [_nghost-%COMP%]     ticket-actions .section{padding:10px 15px;border-bottom:1px solid #ccc}[_nghost-%COMP%]     ticket-actions .section{font-size:1.25rem}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ft),Vt=r("ahTD"),Lt=r("TPVD"),zt=r("+lJe"),jt=r("YKH3"),Rt=r("Xy1B"),Ht=r("0zba");function Nt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275elementStart"](1,"button",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().closeModal()})),m["\u0275\u0275elementStart"](2,"span",16),m["\u0275\u0275text"](3,"\xd7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Ut(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275text"](1," No Data Available On That Time Period ! "),m["\u0275\u0275elementEnd"]())}function Gt(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",18),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Bt,Wt=function(e){return{regno:e}},Kt=((Bt=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.modalService=a,this.activeModal=o,this.vehicleId=null,this.startDate="",this.endDate="",this.openType=this.common.openType,this.vehicleNo="",this.tripstagesData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.common.openType="page",console.log("openType",this.openType);var r=new Date;this.endDate=this.common.dateFormatter(r).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(r.setDate(r.getDate()-1))).split(" ")[0],this.common.refresh=this.refresh.bind(this),"modal"==this.openType&&(console.log("console.log",this.common.params),this.startDate=this.common.params.fromTime?this.common.params.fromTime:this.startDate,this.endDate=this.common.params.toTime?this.common.params.toTime:this.endDate,this.vehicleId=this.common.params.vehicleId,this.vehicleNo=this.common.params.vehicleRegNo,this.getTripStages())}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.vehicleId=null,this.getTripStages()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"vehicle trip stages"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.startDate)):(t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getvehicleData",value:function(e){console.log("Vehicle Data: ",e),this.vehicleId=e.id}},{key:"getTripStages",value:function(){var e=this;this.tripstagesData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};var t={vehicleId:this.vehicleId?this.vehicleId:-1,startDate:this.common.dateFormatter1(this.startDate).split(" ")[0],endDate:this.common.dateFormatter1(this.endDate.split(" ")[0])};console.log("params:",t);var n="startDate="+t.startDate+"&endDate="+t.endDate+"&vehicleId="+t.vehicleId;this.common.loading++,this.api.get("TripsOperation/vehicleDynTripSummary?"+n).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.tripstagesData=t.data,console.log("tripstagesData",e.tripstagesData);var n=e.tripstagesData[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.tripstagesData.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.tripstagesData[t][this.headings[n]],class:this.tripstagesData[t][this.headings[n]]>0?"blue":"black",action:this.tripstagesData[t][this.headings[n]]>0?this.openRouteMapper.bind(this,this.tripstagesData[t]):""};e.push(this.valobj)}return e}},{key:"openRouteMapper",value:function(e){console.log("Data",e),this.common.handleModalHeightWidth("class","modal-lg","200","1500");var t=e._startdt.split("T")[0],n=e._startdt.split("T")[1],a=e._enddt.split("T")[0],o=e._enddt.split("T")[1];this.common.params={vehicleId:e._vid,vehicleRegNo:e._regno,fromTime:t+" "+n,toTime:a+" "+o},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"closeModal",value:function(){this.activeModal.close()}}]),e}()).\u0275fac=function(e){return new(e||Bt)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b))},Bt.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Bt,selectors:[["vehicle-trip-stages"]],decls:25,vars:14,consts:[[2,"border","0px"],[1,"row"],[1,"col-5"],[1,"col-7"],[1,"col-sm-3"],[1,"search_vehicle_input"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"preSelected","onSelected"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-2"],[1,"btn","btn-primary","m-0",3,"click"],["class","col-sm-1",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],[1,"col-sm-1"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Trip States"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"div",5),m["\u0275\u0275elementStart"](10,"auto-suggestion",6),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"input",7),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](13,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",4),m["\u0275\u0275elementStart"](15,"input",8),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](16,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",9),m["\u0275\u0275elementStart"](18,"button",10),m["\u0275\u0275listener"]("click",(function(){return t.getTripStages()})),m["\u0275\u0275text"](19,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](20,Nt,4,0,"div",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"nb-card-body"),m["\u0275\u0275template"](22,Ut,2,0,"div",12),m["\u0275\u0275elementStart"](23,"div"),m["\u0275\u0275template"](24,Gt,1,2,"smart-table",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("preSelected",m["\u0275\u0275pureFunction1"](12,Wt,t.vehicleNo)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](13,6,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](16,9,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf","modal"==t.openType),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0==t.tripstagesData.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.tripstagesData.length>0))},directives:[p.s,p.v,Ht.a,u.u,p.r,E.a],pipes:[u.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]    .black{color:#000}[_nghost-%COMP%]    .green{color:green;font-weight:700}[_nghost-%COMP%]    .red{color:red}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Bt);function $t(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"table",21),m["\u0275\u0275elementStart"](1,"thead",22),m["\u0275\u0275elementStart"](2,"tr",23),m["\u0275\u0275elementStart"](3,"th"),m["\u0275\u0275text"](4,"Avg. Speed"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"tr",23),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Avg. Speed Moving"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"tr",23),m["\u0275\u0275elementStart"](13,"th"),m["\u0275\u0275text"](14,"Time Taken"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td"),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"tr",23),m["\u0275\u0275elementStart"](18,"th"),m["\u0275\u0275text"](19,"Fuel Consuption"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"td"),m["\u0275\u0275text"](21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"tr",23),m["\u0275\u0275elementStart"](23,"th"),m["\u0275\u0275text"](24,"Total Distance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"td"),m["\u0275\u0275text"](26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"tr",23),m["\u0275\u0275elementStart"](28,"th"),m["\u0275\u0275text"](29,"Fuel Avg."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"td"),m["\u0275\u0275text"](31),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate1"]("",n.vehicleInfo.avgSpeed," "),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](n.vehicleInfo.avgSpeedMoving),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](n.vehicleInfo.timeTot),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](n.vehicleInfo.fuelCons),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](n.vehicleInfo.TotDis),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](n.vehicleInfo.fuelAvg)}}var qt,Jt=function(e){return{background:e}},Yt=function(e){return{regno:e}},Zt=function(){return{regno:""}},Qt=((qt=function(){function e(t,n,a,o){i(this,e),this.common=t,this.api=n,this.activeModal=a,this.mapService=o,this.vehicleInfo=null,this.vehicleId=-1,this.vehicleRegNo=null,this.tonnage=0,this.startDate=new Date,this.endDate=new Date,this.common.handleModalSize("class","modal-lg","1300","px",0),this.common.params&&this.common.params.refData&&(console.log(this.common.params.refData),this.vehicleId=this.common.params.refData._vid,this.vehicleRegNo=this.common.params.refData.Vehicle,this.startDate=new Date(this.common.params.refData["Start Date"]),this.endDate=new Date(this.common.params.refData["End Date"]))}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.mapService.mapIntialize("map"),this.mapService.setMapType(0),this.mapService.map.setOptions({draggableCursor:"cursor"})}},{key:"closeModal",value:function(){this.activeModal.close()}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}},{key:"getVehicleInfo",value:function(){var e=this;console.log(this.vehicleInfo),this.vehicleInfo=null,this.mapService.clearAll();var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",t,n);var a="vId="+this.vehicleId+"&fromTime="+t+"&toTime="+n+"&tonnage="+this.tonnage;console.log("params",a),++this.common.loading,this.api.get("Test/getVehicleAvgFuelConsumption?"+a).subscribe((function(t){--e.common.loading,console.log("Res:",t.data),e.vehicleInfo=t.data,e.vehicleInfo.path.forEach((function(t){e.mapService.createPolyPathManual(e.mapService.createLatLng(t.lat,t.long)),e.mapService.setBounds(e.mapService.createLatLng(t.lat,t.long))})),e.mapService.createMarkers([e.vehicleInfo.path[0],e.vehicleInfo.path[e.vehicleInfo.pathCount-1]],!1,!1)}))}}]),e}()).\u0275fac=function(e){return new(e||qt)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](Ee.a))},qt.\u0275cmp=m["\u0275\u0275defineComponent"]({type:qt,selectors:[["vehicle-info"]],decls:34,vars:13,consts:[[1,"modal-header",3,"ngStyle"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-6"],[1,"table","table-bordered","table-hover"],["colspan","2"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[2,"width","90px"],["type","number","placeholder","Tonnage",2,"width","90px",3,"ngModel","ngModelChange"],[1,"row","mr-0"],[1,"col-sm-12","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[1,"go_btn"],[1,"btn","btn-primary",2,"margin","0px","border","0px",3,"click"],["colspan","3"],["class","table table-bordered",4,"ngIf"],[1,"col-6","pl-0"],["id","map",2,"width","100%","height","68vh"],[1,"table","table-bordered"],[1,"thead"],[2,"text-align","center"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"h5",1),m["\u0275\u0275text"](2,"Historic Trip Cost Estimate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"button",2),m["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),m["\u0275\u0275elementStart"](4,"span",3),m["\u0275\u0275text"](5,"\xd7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",4),m["\u0275\u0275elementStart"](7,"div",5),m["\u0275\u0275elementStart"](8,"div",6),m["\u0275\u0275elementStart"](9,"table",7),m["\u0275\u0275elementStart"](10,"tbody"),m["\u0275\u0275elementStart"](11,"tr"),m["\u0275\u0275elementStart"](12,"td",8),m["\u0275\u0275elementStart"](13,"auto-suggestion",9),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"td",10),m["\u0275\u0275elementStart"](15,"input",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.tonnage=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"tr"),m["\u0275\u0275elementStart"](17,"td"),m["\u0275\u0275elementStart"](18,"div",12),m["\u0275\u0275elementStart"](19,"div",13),m["\u0275\u0275elementStart"](20,"uj-date-time-picker",14),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"td"),m["\u0275\u0275elementStart"](22,"div",12),m["\u0275\u0275elementStart"](23,"div",13),m["\u0275\u0275elementStart"](24,"uj-date-time-picker",14),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"td",15),m["\u0275\u0275elementStart"](26,"button",16),m["\u0275\u0275listener"]("click",(function(){return t.getVehicleInfo()})),m["\u0275\u0275text"](27,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"tr"),m["\u0275\u0275elementStart"](29,"td",17),m["\u0275\u0275template"](30,$t,32,6,"table",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](31,"tr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"div",19),m["\u0275\u0275element"](33,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](8,Jt,t.isLite?"#22b108":"#46a79a")),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("preSelected",t.vehicleId>0?m["\u0275\u0275pureFunction1"](10,Yt,t.vehicleRegNo):m["\u0275\u0275pureFunction0"](12,Zt)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.tonnage),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("isTime",!0)("dateTimeValue",t.startDate),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("isTime",!0)("dateTimeValue",t.endDate),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",null!=t.vehicleInfo))},directives:[u.x,Ht.a,ce.x,ce.d,ce.r,ce.u,me.a,u.u],styles:['.modal-header[_ngcontent-%COMP%]{padding:10px 15px!important}.tbl[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{margin:0}.tbl[_ngcontent-%COMP%]{overflow:auto;height:60vh;display:block;border:0}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.slide-bar[_ngcontent-%COMP%]{display:-moz-inline-stack;vertical-align:middle;display:inline-block;height:68px;border:2px solid #909090;position:relative;width:100%;margin-top:10px}.time-line-event[_ngcontent-%COMP%]{position:absolute;width:100%}.time-line-event[_ngcontent-%COMP%]   .time-line-scale[_ngcontent-%COMP%]{position:relative;width:98%;border-bottom:1px solid #000;top:4px}.time-line-event[_ngcontent-%COMP%]   .time-line-circle[_ngcontent-%COMP%]{position:absolute;height:10px;top:50%;background-color:#0ff}.slide-bar[_ngcontent-%COMP%]   .player_inner[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:auto;margin:0;padding:0 15px}.player_inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;background-color:#000;border:0;color:#fff;font-size:12px;padding:8px 10px;border-radius:5px;outline:none!important}.player_inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868686}.player_inner[_ngcontent-%COMP%]   .road[_ngcontent-%COMP%]{float:right;margin-top:5px}.player_inner[_ngcontent-%COMP%]   span.clock[_ngcontent-%COMP%]{display:block;text-align:right;margin-top:0}.player_inner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .tooltip[_ngcontent-%COMP%]{display:inline-block}.tooltip[_ngcontent-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{width:120px;background-color:#555;color:#fff;text-align:center;padding:5px 0;border-radius:6px;margin:0!important;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.btn-primary.form-control[_ngcontent-%COMP%]{border:0;color:#fff;padding:5px 0}.close[_ngcontent-%COMP%]{font-size:36px;padding:8px 16px;outline:none}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px!important;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;word-break:break-all}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .go_btn[_ngcontent-%COMP%]{width:50px!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.lite[_ngcontent-%COMP%]{margin-left:50vh!important;font-weight:1000;color:#8b008b}.star[_ngcontent-%COMP%]{font-size:16px;color:#000}']}),qt);function Xt(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",20),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openAddTripModal()})),m["\u0275\u0275text"](1,"Add Trip"),m["\u0275\u0275elementEnd"]()}}function en(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",21),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var tn,nn=((tn=function(){function e(t,n,a,o,r,l,s){var d;i(this,e),this.datePipe=t,this.api=n,this.common=a,this.dateService=o,this.user=r,this.map=l,this.modalService=s,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},d=new Date,this.endDate=new Date(d),this.startDate=new Date(d.setDate(d.getDate()-14)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleTrips()}},{key:"getVehicleTrips",value:function(){var e=this;this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",t,n);var a="vehicleId="+this.vehicleId+"&startDate="+t+"&endDate="+n;console.log("params",a),++this.common.loading,this.api.get("TripsOperation/getTrips?"+a).subscribe((function(t){if(--e.common.loading,console.log("Res:",t.data),e.vehicleTrips=t.data,null!=e.vehicleTrips){console.log("vehicleTrips",e.vehicleTrips);var n=e.vehicleTrips[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};"Start Date"!==a&&"End Date"!==a||(o.type="date"),e.table.data.headings[a]=o}e.table.data.headings.action={title:"Action",placeholder:"Action"},e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.common.showToast("No Record Found !!")}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleTrips.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[t]),isHTML:!0,class:"black"}:"Vehicle"==this.headings[n]?{value:this.vehicleTrips[t][this.headings[n]],action:this.openShowRoute.bind(this,this.vehicleTrips[t]),isHTML:!0,class:"blue"}:{value:this.vehicleTrips[t][this.headings[n]],class:"black",action:""},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[t])},"admin"==this.user._loggedInBy&&this.valobj.action.icons.push({class:"fa fa-chart-pie change-status",action:this.openChangeStatusModal.bind(this,this.vehicleTrips[t])});this.valobj.style={background:this.vehicleTrips[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-question-circle report-btn",action:this.reportIssue.bind(this,e)},{class:" fa fa-route route-mapper",action:this.openRouteMapper.bind(this,e)},{class:"fa fa-star  vehicle-report",action:this.vehicleReport.bind(this,e)},{class:"fa fa-chart-bar status",action:this.vehicleStates.bind(this,e)},{class:"fa fa-handshake-o trip-settlement",action:this.tripSettlement.bind(this,e)},{class:"fa fa-road route-view",action:this.vehicleInfo.bind(this,e)}];return this.user.permission.edit&&t.push({class:"fa fa-pencil-square-o  edit-btn",action:this.update.bind(this,e)}),this.user.permission.delete&&t.push({class:" fa fa-trash remove",action:this.deleteTrip.bind(this,e)}),t}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}},{key:"getUpadte",value:function(e){var t=this;e.endTime?this.common.showToast("This trip cannot be updated "):(this.common.params=e,console.log("vehicleTrip",e),this.modalService.open(Te.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("data",e.respone),t.getVehicleTrips()})))}},{key:"openRouteMapper",value:function(e){var t,n,a;console.log("----trip----",e),t=new Date,n=new Date(t.setDate(t.getDate()-2)),a=this.common.dateFormatter(n);var o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vid,vehicleRegNo:e.Vehicle,fromTime:e._startdate||o,toTime:e._enddate||i},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"openAddTripModal",value:function(){var e=this;this.common.params={vehId:-1},this.modalService.open(Lt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){e.getVehicleTrips()}))}},{key:"reportIssue",value:function(e){var t=this;this.common.params={refPage:"vt"},console.log("reportIssue",e),this.modalService.open(Se.a,{size:"sm",container:"nb-layout"}).result.then((function(n){return n.status&&t.common.reportAnIssue(n.issue,e.id)}))}},{key:"deleteTrip",value:function(e){var t=this;console.log("deleteTrip",e);var n={tripId:e._tripid};++this.common.loading,this.api.post("VehicleTrips/deleteVehicleTrip",n).subscribe((function(e){--t.common.loading,console.log("Res:",e),t.common.showToast(e.msg)}),(function(e){--t.common.loading,console.log("Err:",e)}))}},{key:"update",value:function(e){this.common.params={vehicleTrip:e},this.modalService.open(zt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"tripSettlement",value:function(e){var t=this;console.log("======",e),this.common.params={refData:{refId:e._tripid,refType:14}},this.modalService.open(ae.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getVehicleTrips()}))}},{key:"vehicleInfo",value:function(e){console.log(e),this.common.params={refData:e},this.modalService.open(Qt,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"openChangeDriverModal",value:function(e){this.common.params={vehicleId:e.vehicle_id,vehicleRegNo:e.regno},this.modalService.open(jt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("data",e.respone)}))}},{key:"vehicleReport",value:function(e){console.log("trip------",e);var t=e._startdate,n=e._enddate;console.log("trip------",t,n),this.common.params={vehicleId:e._vid,vehicleRegNo:e.Vehicle,fromTime:t,toTime:n},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(ke.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"mycustomModalClass"})}},{key:"vehicleStates",value:function(e){console.log("trip------",e);var t=e._startdate,n=e._enddate;console.log("trip------",t,n),this.common.params={vehicleId:e._vid,vehicleRegNo:e.Vehicle,fromTime:t,toTime:n},this.common.openType="modal",this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(Kt,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"mycustomModalClass"})}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Vehicle Trip",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"Customer Name::"+n.data.name,"Report Name::Vehicle Trip",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"openChangeStatusModal",value:function(e){var t,n,a;console.log("trip====",e),t=new Date,n=new Date(t.setDate(t.getDate()-2)),a=this.common.dateFormatter(n);var o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date),r={vehicle_id:e._vid,suggest:11,latch_time:e._startdate||o,tTime:e._enddate||i};console.log("VehicleStatusData",r),this.common.params=r,this.modalService.open(De.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))}},{key:"openShowRoute",value:function(e){var t;(t=e._viapoints).length>1?(window.open(this.map.getURL(t)),this.common.params.data={title:"Map Route"}):this.common.showError("Atleast Two Points required")}}]),e}()).\u0275fac=function(e){return new(e||tn)(m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](Ae.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](Ee.a),m["\u0275\u0275directiveInject"](P.r))},tn.\u0275cmp=m["\u0275\u0275defineComponent"]({type:tn,selectors:[["vehicle-trip"]],features:[m["\u0275\u0275ProvidersFeature"]([u.f])],decls:28,vars:6,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"col-sm-6","text-right"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],[1,"col-sm-3","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Trips"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275template"](7,Xt,2,0,"button",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"nb-card-body"),m["\u0275\u0275elementStart"](9,"div",5),m["\u0275\u0275elementStart"](10,"div",6),m["\u0275\u0275elementStart"](11,"div",7),m["\u0275\u0275elementStart"](12,"auto-suggestion",8),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",9),m["\u0275\u0275elementStart"](14,"uj-date-time-picker",10),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",9),m["\u0275\u0275elementStart"](16,"uj-date-time-picker",11),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",12),m["\u0275\u0275elementStart"](18,"button",13),m["\u0275\u0275listener"]("click",(function(){return t.getVehicleTrips()})),m["\u0275\u0275text"](19,"OK"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",14),m["\u0275\u0275elementStart"](21,"span"),m["\u0275\u0275elementStart"](22,"span",15),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("vehicleTrip")})),m["\u0275\u0275element"](23,"i",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"span",17),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("vehicleTrip")})),m["\u0275\u0275element"](25,"i",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](26,en,1,2,"smart-table",19),m["\u0275\u0275element"](27,"br"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.startDate),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1),m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[p.s,p.v,u.u,p.r,Ht.a,me.a,E.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 235px);height:auto!important}[_nghost-%COMP%]     td i.fa-pencil-square-o{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-pencil-square-o span{position:absolute;display:none;padding:11px 21px;left:-9px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-pencil-square-o span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-question-circle{background-color:#1de9b6;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Report";display:block;position:absolute;top:0;left:0;background-color:#1de9b6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1de9b6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash{background-color:#f44236;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-trash:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash span:before{content:"trash";display:block;position:absolute;top:0;left:0;background-color:#f44236;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f44236;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#ff8091;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-star{background-color:#8280ff;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-star:hover span{display:block}[_nghost-%COMP%]     td i.fa-star span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-star span:before{content:"Events";display:block;position:absolute;top:0;left:0;background-color:#8280ff;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8280ff;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-bar{background-color:#80f54f;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-bar:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-bar span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-bar span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#80f54f;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-bar span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #80f54f;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-handshake-o{background-color:#15986e;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-handshake-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-handshake-o span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-handshake-o span:before{content:"Settlement";display:block;position:absolute;top:0;left:0;background-color:#15986e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #15986e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-road{background-color:#ff0;color:#000;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-road:hover span{display:block}[_nghost-%COMP%]     .blue{text-decoration:underline;color:#00f}[_nghost-%COMP%]     td i.fa-road span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-road span:before{content:"Hist. Fuel Consumption";display:block;position:absolute;top:0;left:0;background-color:#ff0;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-road span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff0;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),tn),an=r("r+Tg");function on(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275elementStart"](1,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().period=e}))("change",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().changeTrendType()})),m["\u0275\u0275elementStart"](2,"option",8),m["\u0275\u0275text"](3,"Day"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"option",17),m["\u0275\u0275text"](5,"Week"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",18),m["\u0275\u0275text"](7,"Month"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.period)}}function rn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275elementStart"](1,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().week_month_number=e}))("change",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().changeTrendType("week_month")})),m["\u0275\u0275elementStart"](2,"option",19),m["\u0275\u0275text"](3,"4"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"option",20),m["\u0275\u0275text"](5,"5"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",21),m["\u0275\u0275text"](7,"6"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"option",22),m["\u0275\u0275text"](9,"7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",23),m["\u0275\u0275text"](11,"8"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",24),m["\u0275\u0275text"](13,"9"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"option",25),m["\u0275\u0275text"](15,"10"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.week_month_number)}}function ln(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",26),m["\u0275\u0275elementStart"](1,"input",27),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getDate("start")})),m["\u0275\u0275pipe"](2,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](2,1,a.fromDate,"dd MMM yyyy"))}}function sn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",26),m["\u0275\u0275elementStart"](1,"input",28),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getDate("end")})),m["\u0275\u0275pipe"](2,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](2,1,a.endDate,"dd MMM yyyy"))}}function dn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",26),m["\u0275\u0275elementStart"](1,"button",29),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getTrend()})),m["\u0275\u0275text"](2,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function cn(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Loading Hours"),m["\u0275\u0275elementEnd"]())}function mn(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Unloading Hours "),m["\u0275\u0275elementEnd"]())}function pn(e,t){}function hn(e,t){1&e&&m["\u0275\u0275template"](0,pn,0,0,"ng-template")}function gn(e,t){if(1&e&&m["\u0275\u0275text"](0),2&e){var n=m["\u0275\u0275nextContext"](3).$implicit;m["\u0275\u0275textInterpolate2"]("",n.sitename,"_",n.siteid,"")}}function un(e,t){if(1&e&&m["\u0275\u0275text"](0),2&e){var n=m["\u0275\u0275nextContext"](3).$implicit;m["\u0275\u0275textInterpolate"](n.sitename)}}function fn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",41),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit;return m["\u0275\u0275nextContext"](4).locationOnMap(e)})),m["\u0275\u0275template"](1,hn,1,0,void 0,42),m["\u0275\u0275template"](2,gn,1,2,"ng-template",null,43,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](4,un,1,1,"ng-template",null,44,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275reference"](3),o=m["\u0275\u0275reference"](5),i=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","unknown"==i.sitename.toLowerCase())("ngIfThen",a)("ngIfElse",o)}}function bn(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"td",45),m["\u0275\u0275text"](1,"No Site"),m["\u0275\u0275elementEnd"]())}function vn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275template"](1,fn,6,3,"td",39),m["\u0275\u0275template"](2,bn,2,0,"td",40),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",41),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](4).getPendingStatusDetails(e)})),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null!=a.sitename&&null!=a.siteid),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==a.sitename),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.loading_hrs),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.loading_count)}}function xn(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,vn,7,4,"tr",37),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",11==a.trendType&&0!=n.loading_count)}}function yn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275template"](1,xn,2,1,"ng-container",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.siteDetails)}}function Cn(e,t){}function _n(e,t){1&e&&m["\u0275\u0275template"](0,Cn,0,0,"ng-template")}function Sn(e,t){if(1&e&&m["\u0275\u0275text"](0),2&e){var n=m["\u0275\u0275nextContext"](3).$implicit;m["\u0275\u0275textInterpolate2"]("",n.sitename,"_",n.siteid,"")}}function Mn(e,t){if(1&e&&m["\u0275\u0275text"](0),2&e){var n=m["\u0275\u0275nextContext"](3).$implicit;m["\u0275\u0275textInterpolate"](n.sitename)}}function kn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",48),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit;return m["\u0275\u0275nextContext"](4).locationOnMap(e)})),m["\u0275\u0275template"](1,_n,1,0,void 0,42),m["\u0275\u0275template"](2,Sn,1,2,"ng-template",null,43,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](4,Mn,1,1,"ng-template",null,44,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275reference"](3),o=m["\u0275\u0275reference"](5),i=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","unknown"==i.sitename.toLowerCase())("ngIfThen",a)("ngIfElse",o)}}function wn(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"td",49),m["\u0275\u0275text"](1,"No Site"),m["\u0275\u0275elementEnd"]())}function On(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275template"](1,kn,6,3,"td",46),m["\u0275\u0275template"](2,wn,2,0,"td",47),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",48),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](4).getPendingStatusDetails(e)})),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null!=a.sitename&&null!=a.siteid),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==a.sitename),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.unloading_hrs),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.unloading_count)}}function Pn(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,On,7,4,"tr",37),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==a.trendType&&0!=n.unloading_count)}}function En(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275template"](1,Pn,2,1,"ng-container",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.siteUnloading)}}function Tn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",34),m["\u0275\u0275elementStart"](1,"table",35),m["\u0275\u0275elementStart"](2,"thead",36),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"Site Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](6,cn,2,0,"th",37),m["\u0275\u0275template"](7,mn,2,0,"th",37),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](10,yn,2,1,"tbody",37),m["\u0275\u0275template"](11,En,2,1,"tbody",37),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",11==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==n.trendType),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",11==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==n.trendType)}}function Dn(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Loading Hours"),m["\u0275\u0275elementEnd"]())}function In(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Unloading Hours "),m["\u0275\u0275elementEnd"]())}function Fn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.vehicle_id),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.loading_hrs),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.ldng_count)}}function An(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,Fn,7,3,"tr",37),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",11==a.trendType&&0!=n.ldng_count)}}function Vn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275template"](1,An,2,1,"ng-container",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.vehicleDetails)}}function Ln(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.vehicle_id),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.unloading_hrs),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.unldng_count)}}function zn(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,Ln,7,3,"tr",37),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](4);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==a.trendType&&0!=n.unldng_count)}}function jn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275template"](1,zn,2,1,"ng-container",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.vehicleUnloading)}}function Rn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",50),m["\u0275\u0275elementStart"](1,"table",35),m["\u0275\u0275elementStart"](2,"thead",36),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"Vehicle Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](6,Dn,2,0,"th",37),m["\u0275\u0275template"](7,In,2,0,"th",37),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](10,Vn,2,1,"tbody",37),m["\u0275\u0275template"](11,jn,2,1,"tbody",37),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",11==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==n.trendType),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",11==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",21==n.trendType)}}function Hn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](5,"td"),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.vehicle_id),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.onward)}}function Nn(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",51),m["\u0275\u0275elementStart"](1,"table",52),m["\u0275\u0275elementStart"](2,"thead",53),m["\u0275\u0275elementStart"](3,"tr"),m["\u0275\u0275elementStart"](4,"th"),m["\u0275\u0275text"](5,"Vehicle Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"th"),m["\u0275\u0275text"](7,"OnWard Hours"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"th"),m["\u0275\u0275text"](9,"Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"tbody"),m["\u0275\u0275template"](11,Hn,6,2,"tr",38),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("ngForOf",n.vehicleDetails)}}function Un(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",30),m["\u0275\u0275template"](1,Tn,12,4,"div",31),m["\u0275\u0275template"](2,Rn,12,4,"div",32),m["\u0275\u0275template"](3,Nn,12,1,"div",33),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!n.onWardFlag),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!n.onWardFlag),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.onWardFlag)}}var Gn,Bn=((Gn=function(){function e(t,n,a,o,r,l){i(this,e),this.api=t,this.common=n,this.theme=a,this.user=o,this.datepipe=r,this.modalService=l,this.Hours=[],this.dateDay=[],this.startDate="",this.endDate="",this.lastTrend="",this.showtrend=!1,this.showTables=!1,this.Details=[],this.siteDetails=[],this.vehicleDetails=[],this.kmpdDate=[],this.showPeriod=!0,this.dateStr=[],this.trendType="11",this.siteUnloading=[],this.vehicleUnloading=[],this.onWardDistance=[],this.week_month_number="4",this.period="0",this.url="",this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",this.onWardFlag=!1,this.fromDate="",this.lastDurationCategory="",this.element={},this.chartObject={type:"",data:{},options:{},elements:{},lables:[],yAxes:[],ticks:{},min:"",max:"",stepSize:""},this.getDefaultTrend(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getDefaultTrend()}},{key:"getDefaultTrend",value:function(){var e,t,n;e=new Date,t=new Date(e.setDate(e.getDate()-1)),this.endDate=this.common.dateFormatter(t),console.log("enddate for default",this.endDate),"0"==this.period?(n=new Date(e.setDate(e.getDate()-6)),this.fromDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.fromDate),console.log("zero period call"),this.getDayWiseTrends()):"1"==this.period?(this.startDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.startDate),this.getweeklyTrend()):"2"==this.period?(this.startDate=this.common.dateFormatter(n),console.log("endDate",this.endDate),console.log("startDate",n,this.startDate),this.getMonthlyTrends()):(n=new Date(e.setDate(e.getDate()-6)),this.fromDate=this.common.dateFormatter(n))}},{key:"showChart",value:function(){console.log("dateday:showChart",this.dateDay),console.log("kmpd:showChart",this.dateDay),console.log("Hours:showChart",this.Hours),this.chartObject.type="line","31"==this.trendType?(this.chartObject.data={labels:this.kmpdDate,datasets:[{data:this.Hours,borderColor:this.bgColor,fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chartObject.options={responsive:!0,maintainAspectRatio:!1,elements:this.element,legend:{display:!1},yAxes:[{ticks:{min:100,max:500,stepSize:100}}]}):(this.chartObject.data={labels:this.dateDay,datasets:[{data:this.Hours,borderColor:this.bgColor,fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chartObject.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},yAxes:[{ticks:{min:100,max:500,stepSize:100}}]}),console.log("lable",this.chartObject.lables)}},{key:"getSiteWise",value:function(){var e=this,t={startDate:this.common.dateFormatter(this.fromDate).split(" ")[0],endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsSiteWise",t).subscribe((function(t){e.common.loading--,e.siteDetails=t.data,console.log("siteDetails: ",e.siteDetails),e.siteUnloading=[],K.sortBy(e.siteDetails,["unloading_hrs"]).reverse().map((function(t){console.log("keydata",t),e.siteUnloading.push(t)}))}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getVehicleWise",value:function(){var e=this,t={startDate:this.common.dateFormatter(this.fromDate).split(" ")[0],endDate:this.common.dateFormatter(this.endDate).split(" ")[0]+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsVehicleWise",t).subscribe((function(t){e.common.loading--,e.vehicleDetails=t.data,console.log("vehicleDetails: ",e.vehicleDetails),e.vehicleUnloading=[],K.sortBy(e.vehicleDetails,["unloading_hrs"]).reverse().map((function(t){e.vehicleUnloading.push(t)}))}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"changeTrendType",value:function(e){"week_month"==e?"1"==this.period?this.getweeklyTrend():"2"==this.period&&this.getMonthlyTrends():"31"==this.trendType?(this.showTables=!1,this.showPeriod=!1,this.getOnwardDistance()):"0"==this.period?(this.showPeriod=!0,"DayWise"==this.lastDurationCategory?"kmpd"==this.lastTrend?this.getDayWiseTrends():this.getCategoryDayWise():this.getDayWiseTrends()):"1"==this.period?(this.showPeriod=!0,this.showTables=!1,"WeekWise"==this.lastDurationCategory?this.getCategoryWeekWise():this.getweeklyTrend()):(this.showPeriod=!0,this.showTables=!1,"MonthWise"==this.lastDurationCategory?this.getCategoryMonthWise():this.getMonthlyTrends()),this.lastTrend=this.trendType}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trends"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.fromDate="",t.fromDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("fromDate",t.fromDate)):(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getDayWiseTrends",value:function(){var e=this;this.lastTrend="",this.Details=[],console.log("getDayWiseTrends call"),this.dateDay=[],this.fromDate=this.common.dateFormatter(this.fromDate).split(" ")[0],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0];var t={startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getTrendsDayWise",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.Details=t.data,e.Details.forEach((function(t){e.showdate=e.datepipe.transform(t.date_day,"dd-MMM"),e.dateDay.push(e.showdate),console.log("dateDay: ",e.showdate)})),e.getCategoryDayWise()}),(function(t){e.common.loading--,e.common.showError()})),this.getSiteWise(),this.getVehicleWise()}},{key:"getCategoryDayWise",value:function(){var e=this;this.Hours=[],this.lastDurationCategory="DayWise",console.log("changeTrendType:","call"),this.Details.forEach((function(t){"11"==e.trendType?(e.Hours.push(t.loading_hrs),e.showTables=!0,e.flag="Loading",e.bgColor="#00695C",e.yScale="Hours",e.onWardFlag=!1,console.log("Hours: ",e.Hours)):"21"==e.trendType?(e.Hours.push(t.unloading_hrs),e.showTables=!0,e.flag="UnLoading",e.bgColor="#E91E63",e.yScale="Hours",e.onWardFlag=!1):"0"==e.trendType&&(e.Hours.push(t.onward),e.showTables=!0,e.flag="onWard",e.bgColor="#4CAF50",e.yScale="percent",e.onWardFlag=!0)})),this.showChart()}},{key:"getweeklyTrend",value:function(){var e,t,n=this;this.dateStr=[],this.Details=[],e=new Date,this.endDate=this.common.dateFormatter(new Date(e.setDate(e.getDate()-1))).split(" ")[0];var a=parseInt(this.week_month_number);console.log("converted number",a),t=new Date(e.setDate(e.getDate()-7*a)),this.startDate=this.common.dateFormatter(t.setDate(t.getDate()+1)).split(" ")[0],console.log("startDate:weekly",this.startDate);var o={startDate:this.startDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",o),this.common.loading++,this.api.post("Trends/getTrendsWeekWise",o).subscribe((function(e){n.common.loading--,console.log("res:weekWise",e.data),n.Details=e.data,n.Details.forEach((function(e){n.dateStr.push(e.date_day)})),n.getCategoryWeekWise()}),(function(e){n.common.loading--,n.common.showError()}))}},{key:"getCategoryWeekWise",value:function(){var e,t=this;this.dateDay=[],this.Hours=[],this.lastDurationCategory="WeekWise",parseInt(this.week_month_number),console.log("datestr length",this.dateStr.length);for(var n=0;n<this.dateStr.length;n++)if(e=this.datepipe.transform(this.dateStr[n],"dd-MMM")+" - ",this.dateStr[n+1]){var a=new Date(this.dateStr[n+1]);e+=this.datepipe.transform(this.common.dateFormatter(new Date(a.setDate(a.getDate())-1)),"dd-MMM"),this.dateDay.push(e)}else n+1==this.dateStr.length?(e+=this.datepipe.transform(this.endDate,"dd-MMM"),this.dateDay.push(e)):(e+=this.datepipe.transform(this.dateStr[n],"dd-MMM"),this.dateDay.push(e));this.Details.forEach((function(e){"11"==t.trendType?(t.Hours.push(e.loading_hrs),t.flag="Loading",t.bgColor="#00695C",t.yScale="Hours"):"21"==t.trendType?(t.Hours.push(e.unloading_hrs),t.flag="UnLoading",t.bgColor="#E91E63",t.yScale="Hours"):"0"==t.trendType&&(t.Hours.push(e.onward),t.flag="onWard",t.bgColor="#4CAF50",t.yScale="percent")})),this.showChart()}},{key:"getMonthlyTrends",value:function(){var e,t,n=this;this.showTables=!1,this.Details=[],this.dateStr=[],e=new Date,this.endDate=this.common.dateFormatter(new Date(e.setDate(e.getDate()-1))).split(" ")[0];var a=parseInt(this.week_month_number);console.log("converted number",a),t=new Date(e.setMonth(e.getMonth()-a)),this.startDate=this.common.dateFormatter(t.setDate(t.getDate()+1)).split(" ")[0],console.log("startDate:monthly",this.startDate);var o={startDate:this.startDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",o),this.common.loading++,this.api.post("Trends/getTrendsMonthWise",o).subscribe((function(e){n.common.loading--,n.Details=e.data,console.log("res:monthWise",e.data),n.Details.forEach((function(e){n.dateStr.push(e.date_day)})),n.getCategoryMonthWise()}),(function(e){n.common.loading--,n.common.showError()}))}},{key:"getCategoryMonthWise",value:function(){var e,t=this;this.dateDay=[],this.Hours=[],this.lastDurationCategory="MonthWise",parseInt(this.week_month_number);for(var n=0;n<this.dateStr.length;n++)if(e=this.datepipe.transform(this.dateStr[n],"dd-MMM")+" - ",this.dateStr[n+1]){var a=new Date(this.dateStr[n+1]);e+=this.datepipe.transform(this.common.dateFormatter(new Date(a.setDate(a.getDate())-1)),"dd-MMM"),this.dateDay.push(e)}else n+1==this.dateStr.length?(e+=this.datepipe.transform(this.endDate,"dd-MMM"),this.dateDay.push(e)):(e+=this.datepipe.transform(this.dateStr[n],"dd-MMM"),this.dateDay.push(e));console.log("dateDay:month ",this.dateDay),this.Details.forEach((function(e){"11"==t.trendType?(t.Hours.push(e.loading_hrs),t.flag="Loading",t.bgColor="#00695C",t.yScale="Hours",console.log("loading case:","call")):"21"==t.trendType?(t.Hours.push(e.unloading_hrs),t.flag="UnLoading",t.bgColor="#E91E63",t.yScale="Hours"):"0"==t.trendType&&(t.Hours.push(e.onward),t.flag="onWard",t.bgColor="#4CAF50",t.yScale="percent")})),this.showChart()}},{key:"getPendingStatusDetails",value:function(e){var t=this,n={siteId:e.siteid,startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};this.common.loading++,this.api.post("Trends/getSiteWiseVehicleList",n).subscribe((function(e){t.common.loading--,console.log(e);var n=[];e.data.map((function(e,a){"11"==t.trendType?11==e.halttypid&&n.push([e.regno,e.countevent]):21==e.halttypid&&n.push([e.regno,e.countevent])})),console.log(n),t.common.params={title:"SiteWise Vehicle List:",headings:["Vehicle_RegNo.","Count Event"],data:n},t.modalService.open(an.a,{size:"sm",container:"nb-layout"})}),(function(e){t.common.loading--,console.log(e)}))}},{key:"locationOnMap",value:function(e){if(e.lat){var t={lat:e.lat,lng:e.long,name:"",time:""};console.log("Location: ",t),this.common.params={location:t,title:"Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})}else this.common.showToast("Vehicle location not available!")}},{key:"getOnwardDistance",value:function(){var e=this;this.onWardDistance=[],this.kmpdDate=[],this.Hours=[],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0],this.fromDate=this.common.dateFormatter(this.fromDate).split(" ")[0];var t={startDate:this.fromDate,endDate:this.endDate+" 23:59:59"};console.log("params: ",t),this.common.loading++,this.api.post("Trends/getGroupOnwardDistance",t).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.onWardDistance=t.data,e.showTables=!1,e.showPeriod=!1,e.onWardDistance.forEach((function(t){e.showdate=e.datepipe.transform(t.DATE,"dd-MMM"),e.kmpdDate.push(e.showdate),e.Hours.push(t.KMPD),console.log("dateDay , Hours: ",e.kmpdDate,e.Hours),e.yScale="KMPD"})),e.element={line:{tension:0}},e.bgColor="#A0522D",e.showChart()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTrend",value:function(){"31"==this.trendType?(this.lastTrend="kmpd",this.getOnwardDistance()):this.getDayWiseTrends()}}]),e}()).\u0275fac=function(e){return new(e||Gn)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](p.Kb),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](P.r))},Gn.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Gn,selectors:[["trends"]],decls:27,vars:11,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange","change"],["value","11"],["value","21"],["value","0"],["value","31"],["class","col-sm-3",4,"ngIf"],["class","col-sm-2",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"col-sm-1","pr-0","text-right",2,"padding-top","50px"],[1,"col-sm-11"],[2,"margin-right","5px","min-height","200px",3,"type","data","options"],["class","row","style","margin-top: 10px",4,"ngIf"],["value","1"],["value","2"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],[1,"col-sm-2"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"row",2,"margin-top","10px"],["class","col-sm-6 pr-0",4,"ngIf"],["class","col-sm-6",4,"ngIf"],["class","col-sm-12","style","height:300px;overflow:auto;",4,"ngIf"],[1,"col-sm-6","pr-0"],[1,"table","table-bordered"],[1,"thead"],[4,"ngIf"],[4,"ngFor","ngForOf"],["style","color:#00695C;",3,"click",4,"ngIf"],["style","color:#00695C;",4,"ngIf"],[2,"color","#00695C",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["showid",""],["showname",""],[2,"color","#00695C"],["style","color:#E91E63;",3,"click",4,"ngIf"],["style","color:#E91E63;",4,"ngIf"],[2,"color","#E91E63",3,"click"],[2,"color","#E91E63"],[1,"col-sm-6"],[1,"col-sm-12",2,"height","300px","overflow","auto"],[1,"table","table-bordered",2,"margin-left","70px","margin-right","70px","text-align","center"],[1,"thead",2,"background-color","darkgrey"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.trendType=e}))("change",(function(){return t.changeTrendType()})),m["\u0275\u0275elementStart"](6,"option",6),m["\u0275\u0275text"](7,"Loading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"option",7),m["\u0275\u0275text"](9,"Unloading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",8),m["\u0275\u0275text"](11,"Onward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",9),m["\u0275\u0275text"](13,"Onward - KMPD"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](14,on,8,1,"div",10),m["\u0275\u0275template"](15,rn,16,1,"div",10),m["\u0275\u0275template"](16,ln,3,4,"div",11),m["\u0275\u0275template"](17,sn,3,4,"div",11),m["\u0275\u0275template"](18,dn,3,0,"div",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"div",12),m["\u0275\u0275elementStart"](20,"div",3),m["\u0275\u0275elementStart"](21,"div",13),m["\u0275\u0275elementStart"](22,"label"),m["\u0275\u0275text"](23),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",14),m["\u0275\u0275element"](25,"chart",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](26,Un,4,3,"div",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.trendType),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngIf",t.showPeriod),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",("1"==t.period||"2"==t.period)&&"31"!=t.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","0"==t.period||"31"==t.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","0"==t.period||"31"==t.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","0"==t.period||"31"==t.trendType),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.yScale),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("type",t.chartObject.type)("data",t.chartObject.data)("options",t.chartObject.options),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.showTables))},directives:[p.s,p.r,ce.D,ce.r,ce.u,ce.w,ce.G,u.u,We.ChartComponent,u.t],pipes:[u.f],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 405px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),Gn),Wn=r("1j6Q");function Kn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td"),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td",6),m["\u0275\u0275elementStart"](14,"button",7),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"]().openPlacementModal(e)})),m["\u0275\u0275text"](15,"ADD"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.x_showveh),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.x_showtripstart),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.x_showtripend),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.showprim_status),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.x_placement)}}function $n(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",8),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var qn,Jn=((qn=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.placements=[],this.getPlacement(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getPlacement()}},{key:"getPlacement",value:function(){var e=this;this.common.loading++,this.api.get("Placement/getFoPlacementRePort?").subscribe((function(t){e.common.loading--,console.log(t),e.placements=t.data}),(function(t){e.common.loading--,console.log(t)}))}},{key:"openPlacementModal",value:function(e){var t=this;console.log("openPlacementModal",e);var n={id:e.x_trip_id,startName:e.x_showtripstart,startTime:e.x_showstarttime,regno:e.x_showveh,vehicleId:e.x_vehicle_id,siteId:e.x_hl_site_id};this.common.params={tripDetils:n,ref_page:"placements"},console.log("vehicleTrip",n),this.modalService.open(Te.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getPlacement()}))}}]),e}()).\u0275fac=function(e){return new(e||qn)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},qn.\u0275cmp=m["\u0275\u0275defineComponent"]({type:qn,selectors:[["placements"]],decls:28,vars:2,consts:[[1,"row"],[1,"col-sm-10"],[1,"table","table-bordered","table-hover"],[1,"thead"],[4,"ngFor","ngForOf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[2,"text-align","center"],[1,"btn","btn-danger",2,"border-radius","8px",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h4"),m["\u0275\u0275text"](5,"Placements"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div"),m["\u0275\u0275elementStart"](8,"table",2),m["\u0275\u0275elementStart"](9,"thead",3),m["\u0275\u0275elementStart"](10,"tr"),m["\u0275\u0275elementStart"](11,"th"),m["\u0275\u0275text"](12,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"th"),m["\u0275\u0275text"](14,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"th"),m["\u0275\u0275text"](16,"Source"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18,"Destination"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Status"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"th"),m["\u0275\u0275text"](22,"Placements"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"th"),m["\u0275\u0275text"](24,"Action"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"tbody"),m["\u0275\u0275template"](26,Kn,16,6,"tr",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](27,$n,2,0,"div",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](26),m["\u0275\u0275property"]("ngForOf",t.placements),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.placements.length))},directives:[p.s,p.v,p.r,u.t,u.u],styles:["",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),qn),Yn=r("i+lE"),Zn=function(e){return{"background-color":e}};function Qn(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275elementStart"](1,"tr",28),m["\u0275\u0275listener"]("mouseover",(function(){m["\u0275\u0275restoreView"](n);var e=t.index;return m["\u0275\u0275nextContext"]().mapService.toggleBounceMF(e)}))("mouseover",(function(){m["\u0275\u0275restoreView"](n);var e=t.index;return m["\u0275\u0275nextContext"]().mapService.toggleBounceMF(e,2)})),m["\u0275\u0275elementStart"](2,"td"),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"td"),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"td"),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"td"),m["\u0275\u0275text"](9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("id","vehicleEvent-row-"+o)("ngStyle",m["\u0275\u0275pureFunction1"](7,Zn,"Trails"!=a.desc?"#"+a.color:"#fff")),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.halt_reason),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.loc_name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.commonService.changeDateformat2(a.start_time)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](i.commonService.changeDateformat2(a.end_time)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.duration)}}function Xn(e,t){1&e&&m["\u0275\u0275element"](0,"i",29)}function ea(e,t){1&e&&m["\u0275\u0275element"](0,"i",30)}var ta=function(e,t){return{background:e,left:t}};function na(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",31),m["\u0275\u0275listener"]("mouseover",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"]().setEventInfo(e)}))("mouseout",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().unsetEventInfo()})),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction2"](1,ta,"#"+a.color,a.position+"%"))}}var aa,oa=function(e){return{left:e}},ia=((aa=function(){function n(e,t,a,o){i(this,n),this.modalService=e,this.mapService=t,this.apiService=a,this.commonService=o,this.slideToolTipLeft=0,this.polypath=[{lat:null,lng:null,odo:null,time:null}],this.zoomLevel=7,this.maxOdo=0,this.startDate=null,this.endDate=null,this.vehicleSelected=null,this.vehicleEvents=[],this.timelineValue=1,this.isPlay=!1,this.breakPrevious=!1,this.eventInfo=null,this.infoWindow=null}var a,o;return l(n,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.mapService.mapIntialize("map"),this.mapService.setMapType(0)}},{key:"getHaltTrails",value:function(){var e=this;if(this.vehicleSelected&&this.startDate&&this.endDate){this.commonService.loading++;var n={vehicleId:this.vehicleSelected,startDate:this.commonService.dateFormatter(this.startDate),endDate:this.commonService.dateFormatter(this.endDate)};this.apiService.post("HaltOperations/getVehicleEvents",n).subscribe((function(n){e.commonService.loading--,console.log(n);var a=n.data,o={vehicleId:e.vehicleSelected,startTime:e.commonService.dateFormatter(e.startDate,"YYYYMMDD",!0,"-"),toTime:e.commonService.dateFormatter(e.endDate,"YYYYMMDD",!0,"-")};e.commonService.loading++,console.log(o),e.apiService.post("VehicleTrail/getVehicleTrailAll",o).subscribe((function(n){e.commonService.loading--,e.mapService.clearAll();var o,i=0,r=null,l=0,s=t(n.data);try{for(s.s();!(o=s.n()).done;){var d=o.value;0!=i?(l+=e.commonService.distanceFromAToB(d.lat,d.long,r.lat,r.long,"Mt"),e.polypath.push({lat:d.lat,lng:d.long,odo:l,time:d.time})):(e.polypath=[],e.polypath.push({lat:d.lat,lng:d.long,odo:0,time:d.time}));for(var c=0;c<a.length;c++)"Unloading"!=a[c].halt_reason&&"Loading"!=a[c].halt_reason||(a[c].subType="marker",a[c].color="Unloading"==a[c].halt_reason?"ff4d4d":"88ff4d");e.mapService.createPolyPathManual(e.mapService.createLatLng(d.lat,d.long)),e.mapService.setBounds(e.mapService.createLatLng(d.lat,d.long)),r=d,i++}}catch(u){s.e(u)}finally{s.f()}e.maxOdo=l,console.log("PolyLine",e.polypath),e.mapService.polygonPath.set("icons",[{icon:e.mapService.lineSymbol,offset:"0%"}]),console.log("VehicleEvents",a),a=a.reverse(),e.vehicleEvents=a,e.mapService.createMarkers(e.vehicleEvents,!1,!1);var m,p=0,h=t(e.mapService.markers);try{var g=function(){var t=m.value,n=e.vehicleEvents[p];e.mapService.addListerner(t,"mouseover",(function(){return e.setEventInfo(n)})),e.mapService.addListerner(t,"mouseout",(function(){return e.unsetEventInfo()})),p++};for(h.s();!(m=h.n()).done;)g()}catch(u){h.e(u)}finally{h.f()}}),(function(t){e.commonService.loading--,console.log(t)}))}),(function(t){e.commonService.loading--,console.log(t)}))}else this.commonService.showError("Fill All Params")}},{key:"setSliderPoint",value:function(){this.breakPrevious=!0,this.isPlay=!1,this.slideToolTipLeft=document.getElementById("myRange").offsetWidth/100*this.timelineValue,console.log("Point",this.timelineValue,"width: ",this.slideToolTipLeft),this.mapService.polygonPath.set("icons",[{icon:this.mapService.lineSymbol,offset:this.timelineValue+"%"}]),this.zoomOnArrow(!1)}},{key:"runLineSymbol",value:(a=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlay){e.next=19;break}this.breakPrevious=!1,t=this.timelineValue;case 3:if(e.t0=t<=100,!e.t0){e.next=12;break}return e.next=7,this.sleep(100);case 7:this.mapService.polygonPath.set("icons",[{icon:this.mapService.lineSymbol,offset:t+"%"}]),this.slideToolTipLeft=document.getElementById("myRange").offsetWidth/100*t,this.zoomOnArrow(!1),this.timelineValue=t,e.t0=!this.breakPrevious;case 12:if(!e.t0){e.next=17;break}case 14:t++,e.next=3;break;case 17:e.next=20;break;case 19:this.breakPrevious=!0;case 20:case"end":return e.stop()}}),e,this)})),o=function(){var t=this,n=arguments;return new Promise((function(o,i){var r=a.apply(t,n);function l(t){e(r,o,i,l,s,"next",t)}function s(t){e(r,o,i,l,s,"throw",t)}l(void 0)}))},function(){return o.apply(this,arguments)})},{key:"zoomOnArrow",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.mapService.getMapBounds();!e&&t.lat1+.001<=this.timeLinePoly.lat&&t.lat2-.001>=this.timeLinePoly.lat&&t.lng1+.001<=this.timeLinePoly.lng&&t.lng2-.001>=this.timeLinePoly.lng||this.mapService.zoomAt({lat:this.timeLinePoly.lat,lng:this.timeLinePoly.lng},this.zoomLevel)}},{key:"setEventInfo",value:function(e){this.infoWindow=this.mapService.createInfoWindow(),this.infoWindow.opened=!1,this.infoWindow.setContent("\n      <b> Reason: </b>".concat(e.halt_reason," <br>\n      <b>Loc: </b>").concat(e.loc_name," <br>\n      <b>Start Time:</b> ").concat(e.start_time," <br>\n      <b>End Time:</b>").concat(e.end_time," <br>\n      <b>Duration:</b>").concat(e.duration," <br>\n      ")),this.infoWindow.setPosition(this.mapService.createLatLng(e.lat,e.long)),this.infoWindow.open(this.mapService.map),this.mapService.getMapBounds()}},{key:"unsetEventInfo",value:function(){this.infoWindow.close(),this.infoWindow.opened=!1}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"timeLinePoly",get:function(){var e=this.maxOdo*(this.timelineValue/100);if(1==this.timelineValue)return{time:this.startDate,lat:this.polypath[0].lat,lng:this.polypath[0].lng};var n,a=t(this.polypath);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.odo>=e)return o}}catch(i){a.e(i)}finally{a.f()}return{time:null,lat:null,lng:null}}}]),n}()).\u0275fac=function(e){return new(e||aa)(m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](Ee.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a))},aa.\u0275cmp=m["\u0275\u0275defineComponent"]({type:aa,selectors:[["route-mapper"]],decls:52,vars:15,consts:[[1,"row"],[1,"col-5"],[1,"table","table-bordered","table-hover"],["colspan","3"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],["placeholder","Start Time","autocomplete","off","name","s-date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["sDate",""],["placeholder","End Time","autocomplete","off","name","e-date",1,"form-control",3,"ngModel","owlDateTime","owlDateTimeTrigger","ngModelChange"],["eDate",""],[1,"btn","btn-primary","form-control",3,"click"],[1,"tbl","table","table-bordered","table-hover",2,"border","1px gray solid"],[2,"width","40px"],[4,"ngFor","ngForOf"],[1,"col-7"],["id","map",2,"width","100%","height","75%"],[1,"slide-bar"],[1,"row","player_inner"],[1,"col-1","p-0"],[3,"click"],["class","fa fa-pause",4,"ngIf"],["class","fa fa-play",4,"ngIf"],[1,"col-11","pr-0","tooltip"],["type","range","min","1","max","100","name","slider-name","id","myRange",1,"slider",3,"ngModel","input","ngModelChange"],[1,"tooltiptext",3,"ngStyle"],["type","range","min","7","max","13","name","zoomSlider",3,"ngModel","ngModelChange","input"],[1,"time-line-event"],[1,"time-line-scale"],["class","time-line-circle",3,"ngStyle","mouseover","mouseout",4,"ngFor","ngForOf"],["cdkDrag","",3,"id","ngStyle","mouseover"],[1,"fa","fa-pause"],[1,"fa","fa-play"],[1,"time-line-circle",3,"ngStyle","mouseover","mouseout"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"table",2),m["\u0275\u0275elementStart"](5,"tbody"),m["\u0275\u0275elementStart"](6,"tr"),m["\u0275\u0275elementStart"](7,"td",3),m["\u0275\u0275elementStart"](8,"auto-suggestion",4),m["\u0275\u0275listener"]("onSelected",(function(e){return t.vehicleSelected=e.id})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"tr"),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275elementStart"](11,"input",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](12,"owl-date-time",null,6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"td"),m["\u0275\u0275elementStart"](15,"input",7),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](16,"owl-date-time",null,8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"td"),m["\u0275\u0275elementStart"](19,"button",9),m["\u0275\u0275listener"]("click",(function(){return t.getHaltTrails()})),m["\u0275\u0275text"](20,"Go"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"tr"),m["\u0275\u0275elementStart"](22,"td",3),m["\u0275\u0275elementStart"](23,"table",10),m["\u0275\u0275elementStart"](24,"thead"),m["\u0275\u0275elementStart"](25,"th",11),m["\u0275\u0275text"](26,"Reason"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"th"),m["\u0275\u0275text"](28,"Place"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"th"),m["\u0275\u0275text"](30,"Start"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"th"),m["\u0275\u0275text"](32,"End"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"th"),m["\u0275\u0275text"](34,"Duration"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](35,Qn,12,9,"tbody",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](36,"tr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"div",13),m["\u0275\u0275element"](38,"div",14),m["\u0275\u0275elementStart"](39,"div",15),m["\u0275\u0275elementStart"](40,"div",16),m["\u0275\u0275elementStart"](41,"div",17),m["\u0275\u0275elementStart"](42,"button",18),m["\u0275\u0275listener"]("click",(function(){return t.isPlay=!t.isPlay,t.runLineSymbol()})),m["\u0275\u0275template"](43,Xn,1,0,"i",19),m["\u0275\u0275template"](44,ea,1,0,"i",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](45,"div",21),m["\u0275\u0275elementStart"](46,"input",22),m["\u0275\u0275listener"]("input",(function(){return t.setSliderPoint()}))("ngModelChange",(function(e){return t.timelineValue=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"div",23),m["\u0275\u0275elementStart"](48,"input",24),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.zoomLevel=e}))("input",(function(){return t.zoomOnArrow()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](49,"div",25),m["\u0275\u0275element"](50,"div",26),m["\u0275\u0275template"](51,na,1,4,"div",27),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](13),a=m["\u0275\u0275reference"](17);m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("ngModel",t.startDate)("owlDateTime",n)("owlDateTimeTrigger",n),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngModel",t.endDate)("owlDateTime",a)("owlDateTimeTrigger",a),m["\u0275\u0275advance"](20),m["\u0275\u0275property"]("ngForOf",t.vehicleEvents),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.isPlay),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.isPlay),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.timelineValue),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](13,oa,"calc( "+t.slideToolTipLeft+"px - "+(45+.1*t.timelineValue)+"px)")),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",t.zoomLevel),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",t.vehicleEvents)}},directives:[p.s,p.r,Ht.a,ce.d,Yn.b,ce.r,ce.u,Yn.d,Yn.a,u.t,u.u,ce.A,u.x],styles:['.row[_ngcontent-%COMP%]{height:85vh}.tbl[_ngcontent-%COMP%]{overflow:auto;height:440px;display:block}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:100%;width:100%;max-width:160px}.slide-bar[_ngcontent-%COMP%]{display:-moz-inline-stack;vertical-align:middle;display:inline-block;height:10%;border:4px solid #000;position:relative;width:100%}.time-line-event[_ngcontent-%COMP%]{position:absolute;width:100%}.time-line-event[_ngcontent-%COMP%]   .time-line-scale[_ngcontent-%COMP%]{position:relative;width:98%;border-bottom:1px solid #000;top:4px}.time-line-event[_ngcontent-%COMP%]   .time-line-circle[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;border-radius:100%;top:50%;background-color:#0ff}.slide-bar[_ngcontent-%COMP%]   .player_inner[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:auto;margin:0;padding:0 15px}.player_inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;background-color:#000;border:0;color:#fff;font-size:14px;padding:7px 0;border-radius:5px;width:100%}.player_inner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block}.player_inner[_ngcontent-%COMP%]   .col-11[_ngcontent-%COMP%]{padding-top:6px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{width:120px;background-color:#555;color:#fff;text-align:center;padding:5px 0;border-radius:6px;margin:0!important;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border:5px solid transparent;border-top-color:#555}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}']}),aa),ra=r("lxmq");function la(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var sa,da=((sa=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.callLogs=[],this.foAdminUserId=[],this.currentDay=null,this.nextDay=null,this.table=null;var r=new Date(this.common.dateFormatter1(new Date).split(" ")[0]);this.currentDay=this.common.dateFormatter1(r),this.nextDay=this.common.dateFormatter1(new Date(r.setDate(r.getDate()+1))).split(" ")[0],console.log("currentDay:",this.currentDay,this.nextDay)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getDate",value:function(){var e=this;this.common.params={ref_page:"call-logs"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){var n=new Date(e.common.dateFormatter1(t.date).split(" ")[0]);e.currentDay=e.common.dateFormatter1(n),e.nextDay=e.common.dateFormatter1(new Date(n.setDate(n.getDate()+1))).split(" ")[0],console.log("currentDay:",e.currentDay,e.nextDay)}))}},{key:"getFoAdmin",value:function(e){console.log("foAdmin",e),this.foAdminUserId=e.id}},{key:"getCallDetails",value:function(){var e=this,t={foAdminUserId:this.foAdminUserId,currentDay:this.common.dateFormatter1(this.currentDay),nextDay:this.common.dateFormatter1(this.nextDay)};console.log("params:",t),++this.common.loading,this.api.post("FoDetails/getDriverCallLogs",t).subscribe((function(t){--e.common.loading,console.log("Res:",t),e.callLogs=t.data,e.table=e.setTable()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"setTable",value:function(){return{data:{headings:{vehicleNumber:{title:"Vehicle Number",placeholder:"Vehicle No"},driverName:{title:"Driver Name",placeholder:"Driver Name"},mobileNo:{title:"Mobile Number",placeholder:"Mobile Number"},incoming:{title:"Incoming ",placeholder:"Incoming"},outgoing:{title:"Outgoing",placeholder:"Outgoing"},total:{title:"Total",placeholder:"Total"},unanswered:{title:"Unanswered",placeholder:"Unanswered"},missed:{title:"Missed",placeholder:"Missed"}},columns:this.getTableColumns()},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.callLogs.map((function(n){var a={vehicleNumber:{value:n.y_vehiclename},driverName:{value:n.y_drivername},mobileNo:{value:n.y_mobileno},incoming:{value:n.y_incomming},outgoing:{value:n.y_outgoing},total:{value:'<div style="color: black;" class="'.concat(n.y_total?"blue":"black",'"><span>').concat(n.y_total||"-","</span></div>"),action:e.openHistoryModel.bind(e,n),isHTML:!0},unanswered:{value:n.y_unanswered},missed:{value:n.y_missed}};t.push(a)})),t}},{key:"openHistoryModel",value:function(e){var t={vehicleId:e.y_vehicle_id,foAdminUserId:this.foAdminUserId,currentDay:this.common.dateFormatter1(this.currentDay),nextDay:this.common.dateFormatter1(this.nextDay)};this.common.params={callData:t},this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(ra.a,{size:"lg",container:"nb-layout"}).result.then((function(e){return console.log("data",e)}))}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Call Logs",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Call Logs",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||sa)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},sa.\u0275cmp=m["\u0275\u0275defineComponent"]({type:sa,selectors:[["call-logs"]],decls:26,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5"],[1,"col-sm-4"],["type","text","autocomplete","off","placeholder","Select Date","name","date","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-4"],[1,"search_vehicle_input"],["url","Suggestion/getFoAdminList?foid=","display","employeename","placeholder","Fo",1,"auto-suggest",2,"width","100%",3,"onSelected"],[1,"btn","btn-primary","m-0",3,"click"],["id","call-logs",3,"data","settings",4,"ngIf"],["id","call-logs",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Call Logs"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",4),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("call-logs")})),m["\u0275\u0275element"](9,"i",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span",6),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("call-logs")})),m["\u0275\u0275element"](11,"i",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",8),m["\u0275\u0275elementStart"](13,"div",1),m["\u0275\u0275elementStart"](14,"div",9),m["\u0275\u0275elementStart"](15,"input",10),m["\u0275\u0275listener"]("click",(function(){return t.getDate()})),m["\u0275\u0275pipe"](16,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",11),m["\u0275\u0275elementStart"](18,"div",12),m["\u0275\u0275elementStart"](19,"auto-suggestion",13),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getFoAdmin(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",9),m["\u0275\u0275elementStart"](21,"button",14),m["\u0275\u0275listener"]("click",(function(){return t.getCallDetails()})),m["\u0275\u0275text"](22,"Get Details"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"nb-card-body"),m["\u0275\u0275elementStart"](24,"div"),m["\u0275\u0275template"](25,la,1,2,"smart-table",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](16,2,t.currentDay,"dd MMM yyyy")),m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("ngIf",t.callLogs&&t.callLogs.length))},directives:[p.s,p.v,Ht.a,p.r,u.u,E.a],pipes:[u.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     .blue, total-clr[_ngcontent-%COMP%]{color:#00f}.btn-primary[_ngcontent-%COMP%]{text-transform:capitalize;padding:12px 14px;margin:0;height:auto}[_nghost-%COMP%]     .tableFixHead{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 170px);height:auto!important}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),sa);function ca(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",10),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ma,pa=((ma=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.fromDate=this.common.dateFormatter1(new Date),this.endDate=this.common.dateFormatter1(new Date),this.title="",this.showTable=!1,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},console.log(this.fromDate),console.log(this.endDate),this.getCallSummary(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getCallSummary()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"user-call-summary"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&(console.log("data date:"),console.log(n.date),"startdate"==e?(t.fromDate=t.common.dateFormatter1(n.date).split(" ")[0],console.log("Date:",t.fromDate)):(t.endDate=t.common.dateFormatter1(n.date).split(" ")[0],console.log("Date:",t.endDate)))}))}},{key:"getCallSummary",value:function(){var e=this;this.common.loading++,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.api.post("Drivers/getUserCallSummary",{x_start_date:this.fromDate,x_end_date:this.endDate+" 23:59:00"}).subscribe((function(t){if(e.common.loading--,e.data=t.data,console.log("data:"),console.log(e.data),null!=e.data){var n=e.data[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.data=[]}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.data.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]=0!=n&&"User Name"!=this.headings[n]?this.data[t][this.headings[n]]?{value:'<div style="color: black;" class="'.concat(this.data[t][this.headings[n]]?"blue":"black",'"><span>').concat(this.data[t][this.headings[n]]||"","</span></div>"),action:this.openHistoryModel.bind(this,this.data[t],this.headings[n]),isHTML:!0}:{value:'<div style="color: black;" class="'.concat(this.data[t][this.headings[n]]?"blue":"black",'"><span>').concat(this.data[t][this.headings[n]]||"","</span></div>"),isHTML:!0}:{value:this.data[t][this.headings[n]],class:"black",action:""};e.push(this.valobj)}return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"openHistoryModel",value:function(e,t){var n=this.endDate+" 23:59:00";console.log("data------------------/",n);var a={vehicleId:0,foAdminUserId:e._foadmusr_id,currentDay:this.common.dateFormatter1(this.fromDate),nextDay:this.common.dateFormatter(n),type:t};this.common.params={callData:a},console.log("calldatas =",this.common.params.callData),this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.modalService.open(ra.a,{size:"lg",container:"nb-layout"}).result.then((function(e){return console.log("data",e)}))}}]),e}()).\u0275fac=function(e){return new(e||ma)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},ma.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ma,selectors:[["user-call-summary"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-6"],[1,"col-sm-4"],["type","text","autocomplete","off","placeholder","Select Start Date","name","startdate","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-sm-5"],["type","text","autocomplete","off","placeholder","Select End Date","name","enddate","readonly","",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"col-sm-3"],["type","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"User Call Summary"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",3),m["\u0275\u0275elementStart"](9,"input",4),m["\u0275\u0275listener"]("click",(function(){return t.getDate("startdate")})),m["\u0275\u0275pipe"](10,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",5),m["\u0275\u0275elementStart"](12,"input",6),m["\u0275\u0275listener"]("click",(function(){return t.getDate("enddate")})),m["\u0275\u0275pipe"](13,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",7),m["\u0275\u0275elementStart"](15,"button",8),m["\u0275\u0275listener"]("click",(function(){return t.getCallSummary()})),m["\u0275\u0275text"](16,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"nb-card-body"),m["\u0275\u0275elementStart"](18,"div"),m["\u0275\u0275template"](19,ca,1,2,"smart-table",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](10,3,t.fromDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](13,6,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,u.u,E.a],pipes:[u.f],styles:["[_nghost-%COMP%]     .blue{color:#00f}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{text-transform:capitalize;padding:8px 15px;margin:0;height:auto;border-radius:5px;border:0;width:100%}[_nghost-%COMP%]     .tableFixHead{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 170px);height:auto!important}"]}),ma),ha=r("4mMb");function ga(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",13),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table.placements)("settings",n.table.settings)}}function ua(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",11),m["\u0275\u0275template"](1,ga,1,2,"smart-table",12),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.placements&&n.placements.length)}}function fa(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",15),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table1.data)("settings",n.table1.settings)}}function ba(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",3),m["\u0275\u0275template"](1,fa,1,2,"smart-table",14),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.filteredVehiclePlacements&&n.filteredVehiclePlacements.length)}}var va,xa=((va=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.placements=[],this.vehiclePlacements=[],this.filteredVehiclePlacements=[],this.table=null,this.table1={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.dis_all=0,this.headings=[],this.showTable=!1,this.valobj=null,this.getPlacements(),this.getVehiclePlacement(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getPlacements()}},{key:"getPlacements",value:function(){var e=this;console.log("api hit"),this.common.loading++,this.api.get("Placement/getFOAdminPlacementRePort").subscribe((function(t){e.common.loading--,console.log("data====",t.data),e.placements=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.placements.map((function(n){var a={siteName:{value:n.r_sitename,action:e.siteTripModal.bind(e,n,"site")},onward:{value:n.r_todayonwards,action:e.siteTripModal.bind(e,n,"onward")},loading:{value:n.r_loadings,action:e.siteTripModal.bind(e,n,"loading")},towards:{value:n.r_intransits,action:e.siteTripModal.bind(e,n,"towards")},waiting:{value:n.r_waitingtime}};t.push(a)})),t}},{key:"setTable",value:function(){return{placements:{headings:{siteName:{title:"Site Name",placeholder:"Site Name"},onward:{title:"Onward 24 Hrs",placeholder:"Onward 24 Hrs"},loading:{title:"At Loading",placeholder:"At Loading"},towards:{title:"Towards",placeholder:"Towards"},waiting:{title:"Waiting Time",placeholder:"Waiting Time"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getVehiclePlacement",value:function(){var e=this;this.common.loading++,this.api.get("Placement/getFoPlacementRePort?").subscribe((function(t){e.common.loading--,e.vehiclePlacements=t.data,console.log("vehicle placement",e.vehiclePlacements),e.displayList(0)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"displayList",value:function(e){var t=this;console.log("display Type=",e,"vehiclePlacements=",this.vehiclePlacements),1==e?(this.filteredVehiclePlacements=[],this.vehiclePlacements.forEach((function(e){e._placementid>0&&t.filteredVehiclePlacements.push(e)}))):-1==e?(this.filteredVehiclePlacements=[],this.vehiclePlacements.forEach((function(e){e._placementid<=0&&t.filteredVehiclePlacements.push(e)}))):(this.filteredVehiclePlacements=[],this.filteredVehiclePlacements=this.vehiclePlacements),this.smartTableWithHeadings()}},{key:"smartTableWithHeadings",value:function(){if(console.log("smart table with heading"),this.table1={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.filteredVehiclePlacements){console.log("filteredVehiclePlacements",this.filteredVehiclePlacements);var e=this.filteredVehiclePlacements[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);var n={title:t,placeholder:this.formatTitle(t)};"Trip Start"==t&&(n.type="date"),this.table1.data.headings[t]=n}this.table1.data.columns=this.getTableColumns2(),console.log("table:"),console.log(this.table1),this.showTable=!0}else this.common.showToast("No Record Found !!")}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns2",value:function(){for(var e=[],t=0;t<this.filteredVehiclePlacements.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)"Trip"==this.headings[n]?(console.log("htmll------",this.common.getJSONTripStatusHTML(this.filteredVehiclePlacements[t])),this.valobj[this.headings[n]]={value:this.common.getJSONTripStatusHTML(this.filteredVehiclePlacements[t]),isHTML:!0,class:"black",action:""}):this.valobj[this.headings[n]]="Action"==this.headings[n]?this.user.permission.edit&&{value:'<i class="fa fa-pencil-alt"></i>',isHTML:!0,action:this.openPlacementModal.bind(this,this.filteredVehiclePlacements[t]),class:"icon text-center del"}:"Current Loc"==this.headings[n]?{value:this.filteredVehiclePlacements[t][this.headings[n]],class:"black",action:this.showLocation.bind(this,this.filteredVehiclePlacements[t])}:{value:this.filteredVehiclePlacements[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.filteredVehiclePlacements[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"openPlacementModal",value:function(e){var t=this;console.log("openPlacementModal",e);var n={vehicleId:e._vid,siteId:e._site_id};this.common.params={tripDetils:n,ref_page:"placements"},console.log("vehicleTrip",n),this.modalService.open(Te.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getVehiclePlacement()}))}},{key:"siteTripModal",value:function(e,t){console.log("siteTripModal",e);var n={userId:e.r_uid,siteId:e.r_siteid,status:"site"==t?"null":t};this.common.params={dataForView:n,ref_page:"placements"},console.log("dataForView",n),this.modalService.open(ha.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"showLocation",value:function(e){e._tlat?(this.common.params={location:{lat:e._tlat,lng:e._tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}}]),e}()).\u0275fac=function(e){return new(e||va)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},va.\u0275cmp=m["\u0275\u0275defineComponent"]({type:va,selectors:[["placements-dash-board"]],decls:18,vars:5,consts:[[2,"border","0px"],[2,"padding-bottom","0px"],[1,"row"],[1,"col-sm-6"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["id","dis-pen",3,"ngClass","click"],[2,"padding-bottom","0px","padding-top","10px"],["class","col-sm-6 pr-0",4,"ngIf"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6","pr-0"],["id","tblVehDocs",3,"data","settings",4,"ngIf"],["id","tblVehDocs",3,"data","settings"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Placements DashBoard"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"ul",4),m["\u0275\u0275elementStart"](8,"li",5),m["\u0275\u0275listener"]("click",(function(){return t.displayList(0),t.dis_all=0})),m["\u0275\u0275text"](9," All "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"li",6),m["\u0275\u0275listener"]("click",(function(){return t.displayList(1),t.dis_all=1})),m["\u0275\u0275text"](11," Placements Assigned "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"li",7),m["\u0275\u0275listener"]("click",(function(){return t.displayList(-1),t.dis_all=-1})),m["\u0275\u0275text"](13," Placement Pending "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"nb-card-body",8),m["\u0275\u0275elementStart"](15,"div",2),m["\u0275\u0275template"](16,ua,2,1,"div",9),m["\u0275\u0275template"](17,ba,2,1,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngClass",0==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",1==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",-1==t.dis_all?"active":""),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",t.placements&&t.placements.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.filteredVehiclePlacements&&t.filteredVehiclePlacements.length))},directives:[p.s,p.v,u.r,p.r,u.u,E.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:10px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 20px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 162px)}[_nghost-%COMP%]     td i.fa-pencil-alt{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),va);function ya(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"td",13),m["\u0275\u0275elementStart"](8,"td",14),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).showLocation(e)})),m["\u0275\u0275text"](9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275text"](11),m["\u0275\u0275elementStart"](12,"button",15),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return m["\u0275\u0275nextContext"](2).tripVerified(e,"true",a)})),m["\u0275\u0275text"](13,"Verified"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"td"),m["\u0275\u0275text"](15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"td"),m["\u0275\u0275elementStart"](17,"span",16),m["\u0275\u0275elementStart"](18,"input",17),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.origin=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"input",18),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.destination=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"select",19),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.status=e})),m["\u0275\u0275elementStart"](21,"option",20),m["\u0275\u0275text"](22,"Select Status"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"option",21),m["\u0275\u0275text"](24,"Loading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"option",22),m["\u0275\u0275text"](26,"Unloading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"option",23),m["\u0275\u0275text"](28,"Onward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"option",24),m["\u0275\u0275text"](30,"Available"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"span",16),m["\u0275\u0275elementStart"](32,"input",25),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.remark=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"button",26),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return m["\u0275\u0275nextContext"](2).tripVerified(e,"false",a)})),m["\u0275\u0275text"](34,"Change"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.r_regno),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.r_driver),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("innerHTML",i.common.getTripStatusHTML(a.r_trip._trip_status_type,a.r_trip._showtripstart,a.r_trip._showtripend,a.r_trip._p_placement_type,a.r_trip._p_loc_name),m["\u0275\u0275sanitizeHtml"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.r_location),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",a.r_tripstatus," "),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](a.r_tripstartdate),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",a.origin),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.destination),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.status)("name","trip-status-"+o),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngModel",a.remark)}}function Ca(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275template"](1,ya,35,12,"tr",12),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.trips)}}function _a(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",27),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var Sa,Ma=((Sa=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.trips=[],this.getTrips(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTrips()}},{key:"getTrips",value:function(){var e=this;this.common.loading++,this.api.get("TripsOperation/tripDetailsForVerification").subscribe((function(t){e.common.loading--,e.trips=t.data;for(var n=0;n<e.trips.length;n++)e.trips[n].status="";console.log("Trips",e.trips)}),(function(t){e.common.loading--,console.log(t)}))}},{key:"tripVerified",value:function(e,t,n){console.log("action",t),"true"==t||"false"==t&&(e.status>0||e.origin||e.destination)?this.changeVerification(e,t,n):this.common.showError("One Input Field is Mandatory")}},{key:"changeVerification",value:function(e,t,n){var a=this,o={vehicleId:e.r_vid,verifyFlag:t,oldOrigin:e.r_origin,oldDestination:e.r_destination,oldState:e.r_state_id,newOrigin:e.origin?e.origin:"",newDestination:e.destination?e.destination:"",newState:e.status,location:e.r_location,remark:e.remark};console.log("params",o),this.trips.splice(n,1),this.api.post("TripsOperation/tripVerification",o).subscribe((function(e){console.log("response",e.data[0].rtn_id),e.data[0].rtn_id>0?a.common.showToast("Successfully Verified"):a.common.showError(e.data[0].rtn_msg)}),(function(e){console.log(e)}))}},{key:"showLocation",value:function(e){e.r_lat?(this.common.params={location:{lat:e.r_lat,lng:e.r_lng,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Trip Status FeedBack",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"Customer Name::"+n.data.name,"Report Name::Trip Status FeedBack",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||Sa)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Sa.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Sa,selectors:[["trip-status-feedback"]],decls:34,vars:2,consts:[[1,"row"],[1,"col-sm-8"],[1,"col-sm-4",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","trip-feedback",1,"table","table-bordered","table-hover","m-0"],[1,"thead"],[2,"text-align","center"],[4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[2,"color","blue","cursor","pointer",3,"click"],[1,"btn","btn-success",3,"click"],[2,"display","inline-flex"],["type","text","placeholder","Origin",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Destination",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","name","ngModelChange"],["value","","selected",""],["value","11"],["value","12"],["value","51"],["value","21"],["type","remark","placeholder","Remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Trip Status FeedBack"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"span",3),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("trip-feedback")})),m["\u0275\u0275element"](8,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("trip-feedback")})),m["\u0275\u0275element"](10,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"nb-card-body"),m["\u0275\u0275elementStart"](12,"div"),m["\u0275\u0275elementStart"](13,"table",7),m["\u0275\u0275elementStart"](14,"thead",8),m["\u0275\u0275elementStart"](15,"tr",9),m["\u0275\u0275elementStart"](16,"th"),m["\u0275\u0275text"](17,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"th"),m["\u0275\u0275text"](19,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"th"),m["\u0275\u0275text"](21,"Driver"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"th"),m["\u0275\u0275text"](23,"Trip"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"th"),m["\u0275\u0275text"](25,"Location"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"th"),m["\u0275\u0275text"](27,"Trip Status"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"th"),m["\u0275\u0275text"](29,"Trip_Start Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"th"),m["\u0275\u0275text"](31,"Verification"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](32,Ca,2,1,"tbody",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](33,_a,2,0,"div",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](32),m["\u0275\u0275property"]("ngIf",0!=t.trips.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.trips.length))},directives:[p.s,p.v,p.r,u.u,u.t,ce.d,ce.r,ce.u,ce.D,ce.w,ce.G],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:24px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:24px;color:#9f0001}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:100px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:90px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:150px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{font-size:12px;text-transform:capitalize;padding:7px 6px;height:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 220px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:90px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto;text-align:left}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100px;text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px;width:100px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:30px!important;padding:3px!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2px;text-transform:capitalize}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Sa),ka=r("JYbL");function wa(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",4),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Oa,Pa=((Oa=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.showTable=!1,this.delayFaults=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getDelayFaults(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getDelayFaults()}},{key:"getDelayFaults",value:function(){var e=this;this.delayFaults=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/placementDelayFaults?").subscribe((function(t){if(e.common.loading--,e.delayFaults=JSON.parse(t.data[0].fn_placements_getfaults),null!=e.delayFaults){console.log("delayFaults",e.delayFaults);var n=e.delayFaults[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table),e.showTable=!0}else e.common.showToast("No Record Found !!")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.delayFaults.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)"endpt"==this.headings[n]?(console.log("headings[j]",this.headings[n]),this.valobj[this.headings[n]]={value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.openPlacementModal.bind(this,this.delayFaults[t])}):"%Dist"==this.headings[n]?(console.log("headings[j]",this.headings[n]),this.valobj[this.headings[n]]={value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.delayFaults[t])}):"vehicle"==this.headings[n]?(console.log("headings[j]",this.headings[n]),this.valobj[this.headings[n]]={value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.delayFaults[t])}):this.valobj[this.headings[n]]={value:this.delayFaults[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.delayFaults[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"openPlacementModal",value:function(e){console.log("openPlacementModal",e);var t={vehicleId:e._vid,siteId:e._site_id?e._site_id:-1};this.common.params={tripDetils:t,ref_page:"placements"},console.log("vehicleTrip",t),this.modalService.open(Te.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){}))}},{key:"openRouteMapper",value:function(e){console.log("defaultFault",e);var t=this.common.dateFormatter(e._start_time),n=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vid,vehicleRegNo:e.vehicle,fromTime:t,toTime:n},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"addShortTarget",value:function(e){this.common.params={vehicleId:e._vid,vehicleRegNo:e.vehicle},this.modalService.open(Fe.a,{size:"sm",container:"nb-layout"})}}]),e}()).\u0275fac=function(e){return new(e||Oa)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},Oa.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Oa,selectors:[["placement-delay-faults"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-4"],[1,"model-body"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Placement Delay Faults"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275template"](8,wa,1,2,"smart-table",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.delayFaults&&t.delayFaults.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}"]}),Oa);function Ea(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",18),m["\u0275\u0275elementStart"](3,"label",19),m["\u0275\u0275text"](4,"KM/Day:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",20),m["\u0275\u0275elementStart"](6,"input",21),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().kmpdval=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",22),m["\u0275\u0275elementStart"](8,"button",23),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.getReportdata(e.dis_all)})),m["\u0275\u0275text"](9,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",a.kmpdval)}}function Ta(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",24),m["\u0275\u0275elementStart"](3,"select",25),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().hoursType=e})),m["\u0275\u0275elementStart"](4,"option",26),m["\u0275\u0275text"](5,"Hours"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",27),m["\u0275\u0275text"](7,"Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",28),m["\u0275\u0275elementStart"](9,"input",29),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().hours=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",22),m["\u0275\u0275elementStart"](11,"button",23),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.getReportdata(e.dis_all)})),m["\u0275\u0275text"](12,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",a.hoursType),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",a.hours)}}function Da(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",31),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Ia(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,Da,1,2,"smart-table",30),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.driverData.length)}}function Fa(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",33),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table2.data)("settings",n.table2.settings)}}function Aa(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,Fa,1,2,"smart-table",32),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.onwardDelayData.length)}}function Va(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",35),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table3.data)("settings",n.table3.settings)}}function La(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,Va,1,2,"smart-table",34),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.delayFaults.length)}}function za(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",37),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table4.data)("settings",n.table4.settings)}}function ja(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,za,1,2,"smart-table",36),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.shortTarget.length)}}function Ra(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",39),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table5.data)("settings",n.table5.settings)}}function Ha(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,Ra,1,2,"smart-table",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.longUnLoading&&n.longLoading.length)}}function Na(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",41),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table6.data)("settings",n.table6.settings)}}function Ua(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275template"](1,Na,1,2,"smart-table",40),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.longUnLoading&&n.longUnLoading.length)}}var Ga,Ba=((Ga=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.CountSummary=[],this.onwardTotal=null,this.onwardDelay=null,this.loadingTotal=null,this.loadingDelay=null,this.unloadingTotal=null,this.unloadingDelay=null,this.driverData=[],this.headings=[],this.kmpdval=300,this.runhourval=10,this.distance=0,this.strcurdate="",this.stryesterday="",this.dis_all="dcs",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.showTable=!1,this.onwardDelayData=[],this.valobj2={},this.table2={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.delayFaults=[],this.valobj3={},this.table3={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.shortTarget=[],this.valobj4={},this.table4={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.longLoading=[],this.hoursType="hrs",this.hours=10,this.valobj5={},this.table5={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.longUnLoading=[],this.valobj6={},this.table6={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getCountSummary();var r=new Date;this.strcurdate=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),r.setDate(r.getDate()-1),this.stryesterday=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),this.getReport(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getReport()}},{key:"getReportdata",value:function(e){console.log("dis_all",e),"11"==e?this.getLongLoading(e):"21"==e?this.getLongUnloading(e):"51"==e?this.getOnwardDelayData(e):"dcs"==e?this.fetchReport():"pdf"==e?this.getDelayFaults():"st"==e&&this.getShortTarget()}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"fetchReport",value:function(){if(null==this.kmpdval||!this.kmpdval)return this.common.showError("Please provide Km per day"),!1;this.getReport()}},{key:"openDistance",value:function(e){var t=this;this.common.loading++;var n=new Date,a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();n.setDate(n.getDate()-1);var o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();this.api.post("Vehicles/getVehDistanceBwTime",{vehicleId:e,fromTime:o,tTime:a}).subscribe((function(n){t.common.loading--;var a=n.data;a>0&&(t.distance=Math.round(a/1e3*100)/100),t.common.handleModalHeightWidth("class","modal-lg","200","1500"),t.openRouteMapper(e)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"getReport",value:function(){var e,t=this;this.common.loading++,this.headings=[],e=0==this.kmpdval||null==this.kmpdval?null:this.kmpdval,0==this.runhourval||null==this.runhourval||this.runhourval;var n=this.user._details.id;"admin"==this.user._loggedInBy&&(n=this.user._customer.id),"string"==typeof e&&(e=parseInt(e)),this.api.post("Drivers/getDriverCallSuggestion",{x_user_id:n,x_kmpd:e}).subscribe((function(e){t.common.loading--,t.resetDisplayTable(),t.driverData=e.data,null!=t.driverData&&null!=e.data||(console.log("resetting table"),t.driverData=[],t.resetDisplayTable()),console.info("driver Data",t.driverData);var n=t.driverData[0];for(var a in t.table.data.headings={},n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:t.formatTitle(a),placeholder:t.formatTitle(a)};"Trip Start Time"===a&&(o.type="date"),t.table.data.headings[a]=o}console.log("hdgs:"),console.log(t.headings),console.log(t.table.data.headings),t.table.data.columns=t.getTableColumns()}),(function(e){t.common.loading--,console.log(e)}))}},{key:"resetDisplayTable",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.driverData.length;t++){for(var n={},a=0;a<this.headings.length;a++){var o=this.driverData[t][this.headings[a]];n[this.headings[a]]="Dist Covered"==this.headings[a]&&this.driverData[t]._starttime?{value:o,class:"blue",action:this.openRouteMapper.bind(this,this.driverData[t])}:"Driver"==this.headings[a]?{value:o,class:"blue",action:this.openChangeDriverModal.bind(this,this.driverData[t])}:"Vehicle"==this.headings[a]?{value:o,class:"blue",action:this.addShortTarget.bind(this,this.driverData[t])}:"Mobile"==this.headings[a]?{value:o,class:"blue",action:this.callNotification.bind(this,this.driverData[t])}:"Trip"==this.headings[a]?{value:this.common.getJSONTripStatusHTML(this.driverData[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.driverData[t])}:"Current Loc"==this.headings[a]?{value:o,class:"blue",action:this.showLocation.bind(this,this.driverData[t])}:"Last 24Hr KM"==this.headings[a]&&this.driverData[t]._last24starttime?{value:o,class:"blue",action:this.openRouteMapper.bind(this,this.driverData[t],"Last 24Hr KM")}:"Act"==this.headings[a]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.driverData[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.driverData[t])},{class:"icon fa fa-route route-mapper",action:this.openRouteMapper.bind(this,this.driverData[t])}]}:{value:o,class:"black",action:""}}e.push(n)}return console.log("datalength:"),console.log(this.driverData.length),e}},{key:"getOnwardDelayData",value:function(e){var t=this,n=this.hours;"days"==this.hoursType&&(n=24*this.hours),this.onwardDelayData=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?type="+e+"&hours="+n).subscribe((function(e){t.common.loading--,console.log("result",e.data),t.onwardDelayData=e.data,t.smartTableWithHeadings()}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getCountSummary",value:function(){var e=this;this.CountSummary=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?type=0&hours=10").subscribe((function(t){e.common.loading--,console.log("getCountSummary",t.data[0]),e.CountSummary=t.data[0],e.onwardTotal=e.CountSummary.totalonward,e.onwardDelay=e.CountSummary.tenhronwarddelaycount,e.loadingTotal=e.CountSummary.totalloading,e.loadingDelay=e.CountSummary.tenhrloadingdelaycount,e.unloadingTotal=e.CountSummary.totalunloading,e.unloadingDelay=e.CountSummary.tenhrunloadingdelaycount}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"smartTableWithHeadings",value:function(){if(this.table2={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.onwardDelayData){console.log("onwardDelayData",this.onwardDelayData);var e=this.onwardDelayData[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);var n={title:t,placeholder:this.formatTitle(t)};"ETOA"!==t&&"Start Time"!==t&&"Target Time"!==t||(n.type="date"),this.table2.data.headings[t]=n}this.table2.data.columns=this.getTableColumns2(),console.log("table:2"),console.log(this.table2),this.showTable=!0}else this.common.showToast("No Record Found !!")}},{key:"getTableColumns2",value:function(){for(var e=[],t=0;t<this.onwardDelayData.length;t++){this.valobj2={};for(var n=0;n<this.headings.length;n++)console.log("header",this.headings[n]),this.valobj2[this.headings[n]]="Vehicle"==this.headings[n]?{value:this.onwardDelayData[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.onwardDelayData[t])}:"Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.onwardDelayData[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.onwardDelayData[t])}:"Current Loc"==this.headings[n]?{value:this.onwardDelayData[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.onwardDelayData[t])}:"%Dist"==this.headings[n]?{value:this.onwardDelayData[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.onwardDelayData[t])}:"Mobile"==this.headings[n]?{value:this.onwardDelayData[t][this.headings[n]],class:"blue",action:this.openChangeDriverModal.bind(this,this.onwardDelayData[t])}:"Act"==this.headings[n]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.onwardDelayData[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.onwardDelayData[t])}]}:{value:this.onwardDelayData[t][this.headings[n]],class:"black",action:""};this.valobj2.style={background:this.onwardDelayData[t]._rowcolor},e.push(this.valobj2)}return console.log("Columns:",e),e}},{key:"getDelayFaults",value:function(){var e=this;this.delayFaults=[],this.table3={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/placementDelayFaults?").subscribe((function(t){if(e.common.loading--,e.delayFaults=t.data,null==e.delayFaults)return e.common.showToast("No Record Found !!"),void(e.delayFaults=[]);console.log("delayFaults",e.delayFaults);var n=e.delayFaults[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table3.data.headings[a]=o}e.table3.data.columns=e.getTableColumns3(),console.log("table:"),console.log(e.table),e.showTable=!0}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns3",value:function(){for(var e=[],t=0;t<this.delayFaults.length;t++){this.valobj3={};for(var n=0;n<this.headings.length;n++)this.valobj3[this.headings[n]]="mobileno"==this.headings[n]?{value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.openChangeDriverModal.bind(this,this.delayFaults[t])}:"%Dist"==this.headings[n]?{value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.delayFaults[t])}:"vehicle"==this.headings[n]?{value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.delayFaults[t])}:"Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.delayFaults[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.delayFaults[t])}:"Current Loc"==this.headings[n]?{value:this.delayFaults[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.delayFaults[t])}:"Act"==this.headings[n]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.delayFaults[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.delayFaults[t])}]}:{value:this.delayFaults[t][this.headings[n]],class:"black",action:""};this.valobj3.style={background:this.delayFaults[t]._rowcolor},e.push(this.valobj3)}return console.log("Columns:",e),e}},{key:"getShortTarget",value:function(){var e=this;this.shortTarget=[],this.table4={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/getShortTarget").subscribe((function(t){if(e.common.loading--,e.shortTarget=t.data,null==e.shortTarget)return e.common.showToast("No Record Found !!"),void(e.shortTarget=[]);console.log("shortTarget",e.shortTarget);var n=e.shortTarget[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table4.data.headings[a]=o}e.table4.data.columns=e.getTableColumns4(),console.log("table:"),console.log(e.table4),e.showTable=!0}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns4",value:function(){for(var e=[],t=0;t<this.shortTarget.length;t++){this.valobj4={};for(var n=0;n<this.headings.length;n++)console.log("header",this.headings[n]),this.valobj4[this.headings[n]]="Vehicle"==this.headings[n]?{value:this.shortTarget[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.shortTarget[t])}:"Current Loc"==this.headings[n]?{value:this.shortTarget[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.shortTarget[t])}:"Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.shortTarget[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.shortTarget[t])}:"Act"==this.headings[n]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.shortTarget[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.shortTarget[t])}]}:"remark"==this.headings[n]?{value:this.shortTarget[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.shortTarget[t])}:"Mobile"==this.headings[n]?{value:this.shortTarget[t][this.headings[n]],class:"blue",action:this.openChangeDriverModal.bind(this,this.shortTarget[t])}:{value:this.shortTarget[t][this.headings[n]],class:"black",action:""};this.valobj4.style={background:this.shortTarget[t]._rowcolor},e.push(this.valobj4)}return console.log("Columns:",e),e}},{key:"getLongLoading",value:function(e){var t=this,n=this.hours;this.longLoading=[],this.table5={data:{headings:{},columns:[]},settings:{hideHeader:!0}},"days"==this.hoursType&&(n=24*this.hours);var a="type="+e+"&hours="+n;console.log("params: ",a),this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?"+a).subscribe((function(e){if(t.common.loading--,t.longLoading=e.data,null==t.longLoading)return t.common.showToast("No Record Found !!"),void(t.longLoading=[]);console.log("shortTarget",t.longLoading);var n=t.longLoading[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:a,placeholder:t.formatTitle(a)};t.table5.data.headings[a]=o}t.table5.data.columns=t.getTableColumns5(),console.log("table:"),console.log(t.table5),t.showTable=!0}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getTableColumns5",value:function(){for(var e=[],t=0;t<this.longLoading.length;t++){this.valobj5={};for(var n=0;n<this.headings.length;n++)console.log("header",this.headings[n]),this.valobj5[this.headings[n]]="Vehicle"==this.headings[n]?{value:this.longLoading[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.longLoading[t])}:"Driver"==this.headings[n]?{value:this.longLoading[t][this.headings[n]],class:"blue",action:this.openChangeDriverModal.bind(this,this.longLoading[t])}:"Current Loc"==this.headings[n]?{value:this.longLoading[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.longLoading[t])}:"Act"==this.headings[n]?{value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.longLoading[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.longLoading[t])}]}:"Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.longLoading[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.longLoading[t])}:"%Dist"==this.headings[n]?{value:this.longLoading[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.longLoading[t])}:{value:this.longLoading[t][this.headings[n]],class:"black",action:""};this.valobj5.style={background:this.longLoading[t]._rowcolor},e.push(this.valobj5)}return console.log("Columns:",e),e}},{key:"getLongUnloading",value:function(e){var t=this;this.longUnLoading=[];var n=this.hours;this.table6={data:{headings:{},columns:[]},settings:{hideHeader:!0}},"days"==this.hoursType&&(n=24*this.hours);var a="type="+e+"&hours="+n;console.log("params: ",a),this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay?"+a).subscribe((function(e){if(t.common.loading--,t.longUnLoading=e.data,console.log("longunLoading",t.longUnLoading),null!=t.longUnLoading){var n=t.longUnLoading[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:a,placeholder:t.formatTitle(a)};t.table6.data.headings[a]=o}t.table6.data.columns=t.getTableColumns6(),console.log("table:"),console.log(t.table6),t.showTable=!0}else t.common.showToast("No Record Found !!")}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"getTableColumns6",value:function(){for(var e=[],t=0;t<this.longUnLoading.length;t++){console.log("longUnLoading",this.longUnLoading),this.valobj6={};for(var n=0;n<this.headings.length;n++)"Vehicle"==this.headings[n]?this.valobj6[this.headings[n]]={value:this.longUnLoading[t][this.headings[n]],class:"blue",action:this.addShortTarget.bind(this,this.longUnLoading[t])}:"Driver"==this.headings[n]?this.valobj6[this.headings[n]]={value:this.longUnLoading[t][this.headings[n]],class:"blue",action:this.openChangeDriverModal.bind(this,this.longUnLoading[t])}:"Current Loc"==this.headings[n]?this.valobj6[this.headings[n]]={value:this.longUnLoading[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.longUnLoading[t])}:"Act"==this.headings[n]?this.valobj6[this.headings[n]]={value:"",isHTML:!0,action:null,icons:[{class:"icon fa fa-question-circle",action:this.reportIssue.bind(this,this.longUnLoading[t])},this.user.permission.add&&{class:"icon fa fa-pencil-square-o",action:this.addShortTarget.bind(this,this.longUnLoading[t])}]}:"Trip"==this.headings[n]?this.valobj6[this.headings[n]]={value:this.common.getJSONTripStatusHTML(this.longUnLoading[t]),isHTML:!0,class:"black",action:this.openPlacementModal.bind(this,this.longUnLoading[t])}:"%Dist"==this.headings[n]?this.valobj6[this.headings[n]]={value:this.longUnLoading[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.longUnLoading[t])}:"Trip"==this.headings[n]?(console.log("htmll------",this.common.getJSONTripStatusHTML(this.longUnLoading[t])),this.valobj6[this.headings[n]]={value:this.common.getJSONTripStatusHTML(this.longUnLoading[t]),isHTML:!0,class:"black",action:""}):this.valobj6[this.headings[n]]={value:this.longUnLoading[t][this.headings[n]],class:"black",action:""};this.valobj6.style={background:this.longUnLoading[t]._rowcolor},e.push(this.valobj6)}return console.log("Columns:",e),e}},{key:"addShortTarget",value:function(e){console.log("target",e),this.common.params={vehicleId:e._vid||e._vehicleid,vehicleRegNo:e.vehicle||e.Vehicle||e.regno||e.v_regno},console.log("params=",this.common.params),this.modalService.open(Fe.a,{size:"sm",container:"nb-layout"})}},{key:"openChangeDriverModal",value:function(e){console.log("vehicleTrip",e);var t={vehicleId:e._vehicleid||e._vid,vehicleRegNo:e.Vehicle||e.regno||e.v_regno||e.vehicle};this.common.params={vehicleId:t.vehicleId,vehicleRegNo:t.vehicleRegNo},this.modalService.open(jt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("data",e.respone)}))}},{key:"openPlacementModal",value:function(e){console.log("openPlacementModal",e);var t={vehicleId:e._vehicleid||e._vid,siteId:e._siteid?e._siteid:-1};this.common.params={tripDetils:t,ref_page:"cs"},console.log("vehicleTrip",t),this.modalService.open(Te.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"showLocation",value:function(e){e._curlat||e._tlat?(this.common.params={location:{lat:e._curlat||e._tlat,lng:e._curlong||e._tlong,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}},{key:"openRouteMapper",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Trip Start",n=null;console.log("defaultFault",e),n=this.common.dateFormatter("Last 24Hr KM"==t?e._last24starttime:e._starttime);var a=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vehicleid||e._vid,vehicleRegNo:e.Vehicle||e.regno||e.v_regno||e.vehicle,fromTime:n,toTime:a},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"reportIssue",value:function(e){var t=this;this.common.params={refPage:"db"},this.modalService.open(Se.a,{size:"sm",container:"nb-layout"}).result.then((function(n){return n.status&&t.common.reportAnIssue(n.issue,e._vehicleid)}))}},{key:"callNotification",value:function(e){var t=this;console.log("driver",e);var n={mobileno:e.Mobile,callTime:this.common.dateFormatter(new Date)};console.log("params: ",n),this.common.loading++,this.api.post("Notifications/sendCallSuggestionNotifications",n).subscribe((function(e){t.common.loading--,console.log("res--",e),t.common.showToast(e.msg)}),(function(e){t.common.loading--,t.common.showError()}))}}]),e}()).\u0275fac=function(e){return new(e||Ga)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Ga.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ga,selectors:[["driver-call-suggestion"]],decls:79,vars:20,consts:[[2,"border","0px"],[1,"row"],[1,"col-8"],[1,"col-sm-4",2,"cursor","pointer",3,"click"],[1,"col-sm-12","divstyleOnboarding"],[2,"font-size","22px","text-align","center","font-weight","500","color","black","width","100%","padding-top","5px"],[1,"row",2,"padding-bottom","15px"],[1,"tablestyle"],[2,"color","black","font-size","18px","font-weight","500"],[1,"col-sm-12","divstyleLoading"],[1,"col-sm-12","divstyleUnloading"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","col-md-3",4,"ngIf"],[4,"ngIf"],[1,"col-md-3"],[1,"col-md-3","pr-0"],[2,"margin-top","8px"],[1,"col-md-5"],["type","text","id","txtkmpd","name","txtkmpd","placeholder","Kmpd","value","this.kmpdval","maxlength","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-4","pl-0"],["type","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[1,"col-md-4","pr-0"],[1,"w-100",3,"ngModel","ngModelChange"],["value","hrs"],["value","days"],[1,"col-md-4"],["type","text","id","txthrs","name","txthrs","placeholder","Hours","value","this.hours","maxlength","2",1,"form-control",3,"ngModel","ngModelChange"],["id","tblsuggestions",3,"data","settings",4,"ngIf"],["id","tblsuggestions",3,"data","settings"],["id","tblsuggestions2",3,"data","settings",4,"ngIf"],["id","tblsuggestions2",3,"data","settings"],["id","tblsuggestions3",3,"data","settings",4,"ngIf"],["id","tblsuggestions3",3,"data","settings"],["id","tblsuggestions4",3,"data","settings",4,"ngIf"],["id","tblsuggestions4",3,"data","settings"],["id","tblsuggestions5",3,"data","settings",4,"ngIf"],["id","tblsuggestions5",3,"data","settings"],["id","tblsuggestions6",3,"data","settings",4,"ngIf"],["id","tblsuggestions6",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Call Suggestion"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",3),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="51",t.getReportdata(t.dis_all)})),m["\u0275\u0275elementStart"](9,"div",4),m["\u0275\u0275elementStart"](10,"label",5),m["\u0275\u0275text"](11,"Onward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",6),m["\u0275\u0275elementStart"](13,"table",7),m["\u0275\u0275elementStart"](14,"tr"),m["\u0275\u0275elementStart"](15,"td",8),m["\u0275\u0275text"](16,"Total"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td",8),m["\u0275\u0275text"](18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"tr"),m["\u0275\u0275elementStart"](20,"td",8),m["\u0275\u0275text"](21,"Delay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"td",8),m["\u0275\u0275text"](23),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",3),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="11",t.getReportdata(t.dis_all)})),m["\u0275\u0275elementStart"](25,"div",9),m["\u0275\u0275elementStart"](26,"label",5),m["\u0275\u0275text"](27,"Loading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"div",6),m["\u0275\u0275elementStart"](29,"table",7),m["\u0275\u0275elementStart"](30,"tr"),m["\u0275\u0275elementStart"](31,"td",8),m["\u0275\u0275text"](32,"Total"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"td",8),m["\u0275\u0275text"](34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"tr"),m["\u0275\u0275elementStart"](36,"td",8),m["\u0275\u0275text"](37,"Delay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](38,"td",8),m["\u0275\u0275text"](39),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"div",3),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="21",t.getReportdata(t.dis_all)})),m["\u0275\u0275elementStart"](41,"div",10),m["\u0275\u0275elementStart"](42,"label",5),m["\u0275\u0275text"](43,"Unloading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](44,"div",6),m["\u0275\u0275elementStart"](45,"table",7),m["\u0275\u0275elementStart"](46,"tr"),m["\u0275\u0275elementStart"](47,"td",8),m["\u0275\u0275text"](48,"Total"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](49,"td",8),m["\u0275\u0275text"](50),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](51,"tr"),m["\u0275\u0275elementStart"](52,"td",8),m["\u0275\u0275text"](53,"Delay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](54,"td",8),m["\u0275\u0275text"](55),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"div",1),m["\u0275\u0275elementStart"](57,"div",11),m["\u0275\u0275elementStart"](58,"ul",12),m["\u0275\u0275elementStart"](59,"li",13),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="dcs",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](60," Driver Call Suggestion "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](61,"li",14),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="11",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](62," Long Loading "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](63,"li",14),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="51",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](64," Onward Trip Delay "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](65,"li",14),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="21",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](66," Long UnLoading "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"li",14),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="pdf",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](68," Placement Delay Faults "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](69,"li",14),m["\u0275\u0275listener"]("click",(function(){return t.dis_all="st",t.getReportdata(t.dis_all)})),m["\u0275\u0275text"](70," Short Target "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](71,Ea,10,1,"div",15),m["\u0275\u0275template"](72,Ta,13,2,"div",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](73,Ia,2,1,"div",16),m["\u0275\u0275template"](74,Aa,2,1,"div",16),m["\u0275\u0275template"](75,La,2,1,"div",16),m["\u0275\u0275template"](76,ja,2,1,"div",16),m["\u0275\u0275template"](77,Ha,2,1,"div",16),m["\u0275\u0275template"](78,Ua,2,1,"div",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](18),m["\u0275\u0275textInterpolate"](t.onwardTotal),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.onwardDelay),m["\u0275\u0275advance"](11),m["\u0275\u0275textInterpolate"](t.loadingTotal),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.loadingDelay),m["\u0275\u0275advance"](11),m["\u0275\u0275textInterpolate"](t.unloadingTotal),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](t.unloadingDelay),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngClass","dcs"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","11"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","51"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","21"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","pdf"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","st"==t.dis_all?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","dcs"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==t.dis_all||"21"==t.dis_all||"51"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","dcs"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","51"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","pdf"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","st"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==t.dis_all),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==t.dis_all))},directives:[p.s,p.v,p.r,u.r,u.u,ce.d,ce.m,ce.r,ce.u,ce.D,ce.w,ce.G,E.a],styles:['[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.btn.btn-primary[_ngcontent-%COMP%]{padding:8px 15px;text-transform:capitalize;border-radius:5px;border:0;width:100%}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 198px);height:auto!important}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}.icon[_ngcontent-%COMP%]{padding:4px;margin-left:2px}[_nghost-%COMP%]     .tableFixHead table td i{margin-right:5px}.divstyleOnboarding[_ngcontent-%COMP%]{background:#e3daff}.divstyleLoading[_ngcontent-%COMP%], .divstyleOnboarding[_ngcontent-%COMP%]{height:auto;margin-bottom:10px;padding-bottom:10px;border-radius:10px;border:9px double #fff}.divstyleLoading[_ngcontent-%COMP%]{background:#fccca9}.divstyleUnloading[_ngcontent-%COMP%]{height:auto;margin-bottom:10px;padding-bottom:10px;border-radius:10px;background:#dbf3fa;border:9px double #fff}.tablestyle[_ngcontent-%COMP%]{width:86%;margin-left:7%;border-radius:5px}.tablestyle[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px!important}']}),Ga);function Wa(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",9),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ka,$a=((Ka=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.modalService=r,this.gpsDtails=[],this.table=null,this.getVehicleGpsDetail(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleGpsDetail()}},{key:"getVehicleGpsDetail",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getVehicleGpsDetail").subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.gpsDtails=t.data,e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Vehicle regno",placeholder:"Vehicle regno"},apiProvider:{title:"Api Provider",placeholder:"Api Provider"},lastCall:{title:"last Call ",placeholder:"last Call"},time:{title:"Date Time ",placeholder:"Date Time "}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"75vh"}}}},{key:"getTableColumns",value:function(){var e=[];return this.gpsDtails.map((function(t){e.push({regno:{value:t.regno},apiProvider:{value:t.apiprovider},lastCall:{value:t.lastcalldt},time:{value:t.dttime}})})),e}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"GPS Details",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:GPS Details",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||Ka)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Ka.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ka,selectors:[["vehicle-gps-detail"]],features:[m["\u0275\u0275ProvidersFeature"]([u.f])],decls:15,vars:1,consts:[[1,"row"],[1,"col-sm-10"],[1,"col-sm-02"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"model-body"],["id","gpsDetails",3,"data","settings",4,"ngIf"],["id","gpsDetails",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Gps Details"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",3),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("gpsDetails")})),m["\u0275\u0275element"](9,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("gpsDetails")})),m["\u0275\u0275element"](11,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"nb-card-body"),m["\u0275\u0275elementStart"](13,"div",7),m["\u0275\u0275template"](14,Wa,1,2,"smart-table",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngIf",t.gpsDtails&&t.gpsDtails.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 145px)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),Ka),qa=r("0Qh/");function Ja(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ya,Za=((Ya=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.datePipe=n,this.common=a,this.modalService=o,this.user=r,this.showTable=!1,this.distanceData=[],this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.today=null,this.today=new Date,this.common.refresh=this.refresh.bind(this),this.getData()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.today=new Date,this.getData()}},{key:"getData",value:function(){var e=this;this.distanceData=[],this.common.loading++,this.api.get("Vehicles/foVehiclePerodicDistance").subscribe((function(t){e.common.loading--;var n=JSON.stringify(t.data);if(null==n)return e.data=[];console.log("re---",n);var a=JSON.parse(n);e.data=JSON.parse(n),console.log("response data ",a);var o=[];Object.keys(a).map((function(e){var t={_id:e,_lat:a[e].lat,_long:a[e].long,Regno:a[e].regno,Location:a[e].currLoc,LastSuccessDate:a[e].successdt,haltDur:a[e].haltDur,group:a[e].group};a[e].slots&&a[e].slots.map((function(e,n){t["Slot"+(n+1)]=e})),o.push(t)})),e.distanceData=o,e.smartTableWithHeadings()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"smartTableWithHeadings",value:function(){if(this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.distanceData){var e=this.distanceData[0];for(var t in e)if("_"!=t.charAt(0)){this.headings.push(t);var n={title:t,placeholder:this.formatTitle(t)};"LastSuccessDate"===t&&(n.type="date"),this.table.data.headings[t]=n}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.distanceData.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Location"==this.headings[n]?{value:this.distanceData[t][this.headings[n]],class:"black",action:this.showLocation.bind(this,this.distanceData[t])}:"LastSuccessDate"==this.headings[n]?{value:this.datePipe.transform(this.distanceData[t][this.headings[n]],"dd MMM HH:mm "),class:"black",action:""}:{value:this.distanceData[t][this.headings[n]],class:"black",action:""},this.valobj.style={background:this.distanceData[t]._rowcolor};e.push(this.valobj)}return e}},{key:"showLocation",value:function(e){if(e._lat){var t={lat:e._lat,lng:e._long,name:"",time:""};console.log("Location: ",t),this.common.params={location:t,title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})}else this.common.showToast("Vehicle location not available!")}},{key:"openCompactForm",value:function(){this.common.params={data:this.data},this.modalService.open(qa.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a=n.data.name,o=t.datePipe.transform(t.today,"dd-MM-yyyy hh:mm:ss a");t.common.getPDFFromTableId(e,a,"Vehicle Distance(24Hr)",null,o)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a="Customer Name:"+n.data.name,o="Report Generation Time:"+t.datePipe.transform(t.today,"dd-MM-yyyy hh:mm:ss a");t.common.getCSVFromTableId(e,a,"Report Name:Vehicle Distance(24Hr)",null,o)}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||Ya)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a))},Ya.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ya,selectors:[["vehicle-covered-distance"]],decls:21,vars:6,consts:[[1,"row"],[1,"col-sm-4"],[1,"col-sm-2"],[1,"btn","btn-primary","pt-1","pb-1","rounded-sm","text-capitalize",3,"click"],[1,"col-sm-2",2,"text-align","right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"model-body"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Distance(24Hr)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"p"),m["\u0275\u0275text"](8),m["\u0275\u0275pipe"](9,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",2),m["\u0275\u0275elementStart"](11,"button",3),m["\u0275\u0275listener"]("click",(function(){return t.openCompactForm()})),m["\u0275\u0275text"](12,"Compact"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",4),m["\u0275\u0275elementStart"](14,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("tbldocs")})),m["\u0275\u0275element"](15,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"span",7),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("tbldocs")})),m["\u0275\u0275element"](17,"i",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"nb-card-body"),m["\u0275\u0275elementStart"](19,"div",9),m["\u0275\u0275template"](20,Ja,1,2,"smart-table",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind3"](9,2,t.today,"dd-MM-yyyy hh:mm:ss a","+0530")),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngIf",t.distanceData&&t.distanceData.length))},directives:[p.s,p.v,p.r,u.u,E.a],pipes:[u.f],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:24px;color:#217346}.pdf-icon[_ngcontent-%COMP%]{font-size:24px;color:#9f0001}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),Ya);function Qa(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"span"),m["\u0275\u0275elementStart"](2,"span",13),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().printPDF("feedbackLogs")})),m["\u0275\u0275element"](3,"i",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"span",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().printCsv("feedbackLogs")})),m["\u0275\u0275element"](5,"i",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Xa(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",17),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var eo,to=((eo=function(){function e(t,n,a,o){var r;i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this.vehicleId=null,this.startDate="",this.endDate="",this.activitySummary=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},r=new Date,this.endDate=this.common.dateFormatter(r).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(r.setDate(r.getDate()-1))).split(" ")[0],this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.vehicleId=null,this.getFeedbackLogs()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"trip feedback logs"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.startDate)):(t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getvehicleData",value:function(e){console.log("Vehicle Data: ",e),this.vehicleId=e.id}},{key:"getFeedbackLogs",value:function(){var e=this;this.activitySummary=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};var t=new Date(this.common.dateFormatter1(this.endDate).split(" ")[0]),n={vehicleId:this.vehicleId?this.vehicleId:-1,startDate:this.common.dateFormatter1(this.startDate).split(" ")[0],endDate:this.common.dateFormatter1(t.setDate(t.getDate()+1)).split(" ")[0]};console.log("params:",n);var a="startDate="+n.startDate+"&endDate="+n.endDate+"&vehicleId="+n.vehicleId;this.common.loading++,this.api.get("tripsOperation/tripFeedbackLogs?"+a).subscribe((function(t){e.common.loading--,console.log("res: ",t.data),e.activitySummary=t.data,console.log("activitySummary",e.activitySummary);var n=e.activitySummary[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.activitySummary.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.activitySummary[t][this.headings[n]],class:"black",action:""};e.push(this.valobj)}return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Trip Feedback Logs",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Trip Feedback Logs",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||eo)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a))},eo.\u0275cmp=m["\u0275\u0275defineComponent"]({type:eo,selectors:[["tip-feedback-logs"]],decls:25,vars:10,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"col-3"],[4,"ngIf"],[1,"col-7"],[1,"col-sm-3"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"search_vehicle_input"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected"],[1,"btn","btn-primary","m-0",3,"click"],["id","feedbackLogs",3,"data","settings",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["id","feedbackLogs",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Trip Feedback Logs"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275template"](7,Qa,6,0,"div",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",5),m["\u0275\u0275elementStart"](9,"div",1),m["\u0275\u0275elementStart"](10,"div",6),m["\u0275\u0275elementStart"](11,"input",7),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](12,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",6),m["\u0275\u0275elementStart"](14,"input",8),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](15,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",6),m["\u0275\u0275elementStart"](17,"div",9),m["\u0275\u0275elementStart"](18,"auto-suggestion",10),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",6),m["\u0275\u0275elementStart"](20,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getFeedbackLogs()})),m["\u0275\u0275text"](21,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"nb-card-body"),m["\u0275\u0275elementStart"](23,"div"),m["\u0275\u0275template"](24,Xa,1,2,"smart-table",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.activitySummary.length),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](12,4,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](15,7,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("ngIf",t.activitySummary&&t.activitySummary.length))},directives:[p.s,p.v,u.u,Ht.a,p.r,E.a],pipes:[u.f],styles:["nb-card-header[_ngcontent-%COMP%]{border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]    .tableFixHead{height:auto!important;max-height:calc(100vh - 156px)}[_nghost-%COMP%]    .tableFixHead.paginaion_conditon{max-height:calc(100vh - 192px)!important}.btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;text-transform:capitalize;float:left;padding:8px 15px;width:100%}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),eo);function no(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",4),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ao,oo=((ao=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.showTable=!1,this.onwardDelayData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getData(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.onwardDelayData=[],this.common.loading++,this.api.get("TripsOperation/tripOnwardDelay").subscribe((function(t){e.common.loading--,console.log("result",t.data[0].fn_trips_onwarddelay),e.onwardDelayData=JSON.parse(t.data[0].fn_trips_onwarddelay),e.smartTableWithHeadings()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"smartTableWithHeadings",value:function(){if(this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},null!=this.onwardDelayData){console.log("onwardDelayData",this.onwardDelayData);var e=this.onwardDelayData[0];for(var t in console.log("first_Rec",e),e)if("_"!=t.charAt(0)){this.headings.push(t);var n={title:t,placeholder:this.formatTitle(t)};this.table.data.headings[t]=n}this.table.data.columns=this.getTableColumns(),console.log("table:"),console.log(this.table),this.showTable=!0}else this.common.showToast("No Record Found !!")}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.onwardDelayData.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.onwardDelayData[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.onwardDelayData[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}}]),e}()).\u0275fac=function(e){return new(e||ao)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},ao.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ao,selectors:[["trip-onward-delay"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-8"],[1,"model-body"],["id","tbldocs",3,"data","settings",4,"ngIf"],["id","tbldocs",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Onward Trip Delay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275template"](8,no,1,2,"smart-table",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.onwardDelayData&&t.onwardDelayData.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),ao),io=r("NTD5");function ro(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",4),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var lo,so=((lo=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.showTable=!1,this.shortTarget=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getOnwardKmpd(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getOnwardKmpd()}},{key:"getOnwardKmpd",value:function(){var e=this;this.shortTarget=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.loading++,this.api.get("Placement/getShortTarget").subscribe((function(t){if(e.common.loading--,e.shortTarget=JSON.parse(t.data[0].result),null!=e.shortTarget){console.log("shortTarget",e.shortTarget);var n=e.shortTarget[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table),e.showTable=!0}else e.common.showToast("No Record Found !!")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.shortTarget.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.shortTarget[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.shortTarget[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}]),e}()).\u0275fac=function(e){return new(e||lo)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](io.a),m["\u0275\u0275directiveInject"](P.r))},lo.\u0275cmp=m["\u0275\u0275defineComponent"]({type:lo,selectors:[["short-target"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-sm-4"],[1,"model-body"],[3,"data","settings",4,"ngIf"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Short Target"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275template"](8,ro,1,2,"smart-table",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.shortTarget&&t.shortTarget.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}"]}),lo);function co(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",14),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var mo,po=((mo=function(){function e(t,n,a,o){var r;i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.showTable=!1,this.onwardKmpd=[],this.headings=[],this.valobj={},this.startDate="",this.endDate="",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},r=new Date,this.startDate=this.common.dateFormatter(r.setDate(r.getDate()-6)),console.log("today startdate",r,this.startDate),r=new Date,this.endDate=this.common.dateFormatter(r.setDate(r.getDate()-1)),console.log("default date",this.startDate,this.endDate),this.getonwardKmpd(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getonwardKmpd()}},{key:"getonwardKmpd",value:function(){var e=this;this.startDate=this.common.dateFormatter(this.startDate).split(" ")[0],this.endDate=this.common.dateFormatter(this.endDate).split(" ")[0],this.onwardKmpd=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var t={startdate:this.startDate,enddate:this.endDate};console.log("params: ",t),this.common.loading++,this.api.post("VehicleTrips/getFleetOnwardsKmpd",t).subscribe((function(t){if(e.common.loading--,e.onwardKmpd=t.data,null!=e.onwardKmpd){var n=e.onwardKmpd[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table),e.showTable=!0}else e.common.showToast("No Record Found !!")}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.onwardKmpd.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="y_regno"==this.headings[n]?{value:this.onwardKmpd[t][this.headings[n]],class:"blue",action:this.showLocation.bind(this,this.onwardKmpd[t])}:"y_kms"==this.headings[n]?{value:this.onwardKmpd[t][this.headings[n]],class:"blue",action:this.openRouteMapper.bind(this,this.onwardKmpd[t])}:{value:this.onwardKmpd[t][this.headings[n]],class:"black",action:""};this.valobj.style={background:this.onwardKmpd[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"onward-kmpd"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("startDate",t.startDate)):(t.endDate="",t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"showLocation",value:function(e){e._lat?(this.common.params={location:{lat:e._lat,lng:e._long,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}},{key:"openRouteMapper",value:function(e){console.log("defaultFault",e);var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vid,vehicleRegNo:e.y_regno,fromTime:t,toTime:n},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Onward KMPD",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Onward KMPD",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||mo)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},mo.\u0275cmp=m["\u0275\u0275defineComponent"]({type:mo,selectors:[["onward-kmpd"]],decls:26,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-1"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary",3,"click"],[1,"model-body"],["id","onwardKmpd",3,"data","settings",4,"ngIf"],["id","onwardKmpd",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Onward KMPD"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",3),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("onwardKmpd")})),m["\u0275\u0275element"](9,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("onwardKmpd")})),m["\u0275\u0275element"](11,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",7),m["\u0275\u0275elementStart"](13,"div",0),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"input",9),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](16,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",8),m["\u0275\u0275elementStart"](18,"input",10),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](19,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",8),m["\u0275\u0275elementStart"](21,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getonwardKmpd()})),m["\u0275\u0275text"](22,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"nb-card-body"),m["\u0275\u0275elementStart"](24,"div",12),m["\u0275\u0275template"](25,co,1,2,"smart-table",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](16,3,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](19,6,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.onwardKmpd&&t.onwardKmpd.length))},directives:[p.s,p.v,p.r,u.u,E.a],pipes:[u.f],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:0 20px 15px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 145px)!important}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),mo),ho=r("hit9"),go=r("vjOA"),uo=r("bG9B"),fo=r("Zw/Q"),bo=r("pfN2"),vo=r("se9s"),xo=r("9zuT"),yo=r("ia/1");function Co(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",15),m["\u0275\u0275text"](1," No Data Available ! "),m["\u0275\u0275elementEnd"]())}function _o(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var So,Mo=((So=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.modalService=a,this.activeModal=o,this.user=r,this.verifyState=[],this.stateId=[],this.adduserId=[],this.isVerified=[],this.pendingStateType="0",this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"68vh"}},this.headings=[],this.valobj={},this.getPendingStates(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getPendingStates()}},{key:"getPendingStates",value:function(){var e=this;this.stateId=[],this.adduserId=[],this.isVerified=[],this.verifyState=[];var t="is_verified="+this.pendingStateType;console.log("params",t),this.common.loading++,this.api.get("vehicles/getPendingVehicleStates?"+t).subscribe((function(t){e.common.loading--,e.verifyState=t.data||[];for(var n=0;n<e.verifyState.length;n++)null!=e.verifyState[n]._id&&e.stateId.push(e.verifyState[n]._id),e.adduserId.push(e.verifyState[n]._aduserid),e.isVerified.push(e.verifyState[n]._isverified);console.log("adduserid",e.adduserId),console.log("stateid",e.stateId),console.log("isVerified",e.isVerified),console.log("verifyState",e.verifyState);var a=e.verifyState[0];for(var o in a)if("_"!=o.charAt(0)){e.headings.push(o);var i={title:e.formatTitle(o),placeholder:e.formatTitle(o)};"Start Date"===o&&(i.type="date"),e.table.data.headings[o]=i}var r={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action")};e.table.data.headings.action=r,e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.verifyState),this.verifyState.map((function(n,a){e.valobj={};for(var o=0;o<e.headings.length;o++)e.valobj[e.headings[o]]={value:n[e.headings[o]],class:"black",action:""},e.valobj.action={value:null,isHTML:!1,action:null,class:"",icons:e.actionIcons(n,a)};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e,t){var n=[];return 0==this.isVerified[t]&&n.push({class:" fa fa-check-circle",action:this.acceptOnTrip.bind(this,e)},{class:"fa fa-window-close",action:this.rejectOnTrip.bind(this,e)}),this.adduserId[t]>0&&n.push({class:"fa fa-trash remove",action:this.removeVehicleState.bind(this,t)}),n}},{key:"acceptOnTrip",value:function(e){var t=this,n={vehicleStateId:e._id,isVerified:1};e&&(console.log("details",e),this.common.params={title:"Accept Trip ",description:"<b>&nbsp;Are Sure To Accept This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Vehicles/ActionOnPendingVehicleStates",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),t.common.showToast(e.data[0].r_msg),t.getPendingStates()}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("Error!")})))})))}},{key:"rejectOnTrip",value:function(e){var t=this,n={vehicleStateId:e._id,isVerified:0,vehicleId:e._vid,lat:e._lat,long:e._lngt,vregno:e.Vehicle};console.log("Param:",n),e&&(console.log("details",e),this.common.params={title:"Reject Trip ",description:"<b>&nbsp;Are Sure To Reject This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(a){a.response&&(console.log("data",a),t.common.loading++,t.api.post("Vehicles/ActionOnPendingVehicleStates",n).subscribe((function(n){t.common.loading--,console.log("res: ",n),t.common.showToast(n.data[0].r_msg,"",1e4),t.common.params={vehicleStateId:e._id,isVerified:0,vehicleId:e._vid,lat:e._lat,long:e._lngt,vregno:e.Vehicle},t.modalService.open(Pe.a,{size:"lg",container:"nb-layout",backdrop:"static"})}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("Error!")})))})))}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Verify Trip States",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Verify Trip States",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"removeVehicleState",value:function(e){var t=this,n={stateid:this.stateId[e]};console.log("params",n),console.log("index",e),this.common.params={title:"Remove State ",description:"<b>&nbsp;Are Sure To Remove State <b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Vehicles/removeVehicleState",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),e.data[0].r_id>0?(t.common.showToast("Selected state has been deleted"),t.getPendingStates()):t.common.showToast(e.data[0].r_msg,"",1e4)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("Error!")})))}))}}]),e}()).\u0275fac=function(e){return new(e||So)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](c.a))},So.\u0275cmp=m["\u0275\u0275defineComponent"]({type:So,selectors:[["trip-verify-states"]],decls:23,vars:3,consts:[[2,"border","0px"],[1,"row"],[1,"col-3"],[1,"col-sm-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","-1"],[1,"col-02"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","verifyState",3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],["id","verifyState",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Verify Trip States"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"select",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.pendingStateType=e}))("change",(function(){return t.getPendingStates()})),m["\u0275\u0275elementStart"](8,"option",5),m["\u0275\u0275text"](9,"No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",6),m["\u0275\u0275text"](11,"Yes"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",7),m["\u0275\u0275text"](13,"Any"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"span",9),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("verifyState")})),m["\u0275\u0275element"](16,"i",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"span",11),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("verifyState")})),m["\u0275\u0275element"](18,"i",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"nb-card-body"),m["\u0275\u0275template"](20,Co,2,0,"div",13),m["\u0275\u0275elementStart"](21,"div"),m["\u0275\u0275template"](22,_o,1,2,"smart-table",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngModel",t.pendingStateType),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngIf",0==t.verifyState.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.verifyState.length>0))},directives:[p.s,p.v,ce.D,ce.r,ce.u,ce.w,ce.G,p.r,u.u,E.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]     table .fa{margin-right:10px;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-check-circle{color:#37ad28}[_nghost-%COMP%]     .fa-check-circle span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-check-circle span:before{content:"Accept";display:block;position:absolute;top:0;left:0;background-color:#37ad28;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-check-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #37ad28;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-check-circle:hover span{display:block}[_nghost-%COMP%]     .fa-window-close{color:red}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Reject";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .tableFixHead{height:calc(100vh - 220px)!important}']}),So);function ko(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",10),m["\u0275\u0275text"](1," Select StartDate & EndDate And Click Submit ! "),m["\u0275\u0275elementEnd"]())}function wo(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",10),m["\u0275\u0275text"](1," No Data Available ! "),m["\u0275\u0275elementEnd"]())}function Oo(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Po,Eo=((Po=function(){function e(t,n,a,o){i(this,e),this.common=t,this.api=n,this.modalService=a,this.dateService=o,this.startDate=null,this.endDate=null,this.vehiclePerformance=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.click=!1;var r=new Date,l=new Date;this.endDate=r,this.endDate=this.common.dateFormatter(r),l=new Date(r.setDate(r.getDate()-7)),this.startDate=this.common.dateFormatter(l),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehiclePerformance()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"vehicle-performance"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.dateService.dateFormatter(n.date,"",!1).split(" ")[0]):(t.endDate=t.dateService.dateFormatter(n.date,"",!1).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getVehiclePerformance",value:function(){var e=this;this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}},this.vehiclePerformance=[];var t=this.common.dateFormatter1(this.startDate).split(" ")[0],n=this.common.dateFormatter1(this.endDate.split(" ")[0]);this.click=!0;var a="startDate="+t+"&endDate="+n;this.common.loading++,this.api.get("Vehicles/vehiclePerformance?"+a).subscribe((function(t){if(e.common.loading--,console.log("res: ",t.data),null==t.data)return e.vehiclePerformance=[],void(e.table=null);e.vehiclePerformance=t.data;var n=e.vehiclePerformance[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehiclePerformance.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)console.log("Test....",this.headings[n]),this.valobj[this.headings[n]]="distance"===this.headings[n]?{value:this.vehiclePerformance[t][this.headings[n]],class:this.vehiclePerformance[t][this.headings[n]]>0?"blue":"",action:this.vehiclePerformance[t][this.headings[n]]>0?this.openRouteMapper.bind(this,this.vehiclePerformance[t]):""}:{value:this.vehiclePerformance[t][this.headings[n]]};e.push(this.valobj)}return e}},{key:"openRouteMapper",value:function(e){this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vid,vehicleRegNo:e.regno,fromTime:e._start,toTime:e._end},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}]),e}()).\u0275fac=function(e){return new(e||Po)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](Ae.a))},Po.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Po,selectors:[["vehicle-performance"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"col-sm-4"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"btn","btn-primary","m-0",3,"click"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Performance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"input",5),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](10,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"input",6),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](13,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",4),m["\u0275\u0275elementStart"](15,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.getVehiclePerformance()})),m["\u0275\u0275text"](16,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"nb-card-body"),m["\u0275\u0275template"](18,ko,2,0,"div",8),m["\u0275\u0275template"](19,wo,2,0,"div",8),m["\u0275\u0275elementStart"](20,"div"),m["\u0275\u0275template"](21,Oo,1,2,"smart-table",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](10,5,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](13,8,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",!t.click),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.vehiclePerformance.length&&t.click),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.vehiclePerformance&&t.vehiclePerformance.length))},directives:[p.s,p.v,p.r,u.u,E.a],pipes:[u.f],styles:["nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Po),To=r("kSDO");function Do(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",14),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Io,Fo=((Io=function(){function e(t,n,a,o,r,l){i(this,e),this.router=t,this.modalservice=n,this.common=a,this.api=o,this.datePipe=r,this.user=l,this.checkstart=null,this.checkend=null,this.arrdriverData=[{days:null,Regno:null,attendance:null,id:null}],this.table={data:{headings:{Regno:{placeholder:"RegNo",editable:!1}},columns:[]},settings:{hideHeader:!0,editable:!1}},this.data=[],this.vehicleId=null;var s=new Date;this.startDate=new Date(s.setDate(s.getDate()-7)),this.endDate=new Date,console.log("date on cons",this.startDate,this.endDate)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getDate",value:function(e){var t=this;console.log("start",this.startDate),this.common.params={ref_page:"daywise vehicle distance"},this.modalservice.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){"start"==e?(t.startDate="",t.startDate=n.date):(t.endDate="",t.endDate=n.date),console.log("start and end",t.startDate,t.endDate)}))}},{key:"getDistance",value:function(){var e=this;if(this.data=[],this.table={data:{headings:{Regno:{placeholder:"RegNo",editable:!1}},columns:[]},settings:{hideHeader:!0,editable:!1}},console.log("this.table",this.table),this.checkstart=new Date(this.startDate.valueOf()),this.checkend=new Date(this.endDate.valueOf()),console.log("checkend and checkstart",this.checkend,this.checkstart),this.checkend>this.checkstart.setDate(this.checkstart.getDate()+7))this.common.showToast("Differece from start to end date should be 7 days");else{var t={fromTime:this.common.dateFormatter(this.startDate).split(" ")[0],tTime:this.common.dateFormatter(this.endDate).split(" ")[0]};console.log("params to insert",t),this.common.loading++,this.api.post("Vehicles/foVehicleDayWiseDistance",t).subscribe((function(t){e.common.loading--,console.log("Res:",t.data),e.data=t.data||[],e.table.data.columns=e.getTableColumns(e.formattData())}),(function(t){e.common.loading--,console.log(t)}))}}},{key:"formattData",value:function(){var e=this;console.log("this.data",this.data);var t=K.groupBy(this.data,"vehicleId"),a=[];return Object.keys(t).map((function(e){a.push({Regno:t[e][0].regno,data:n(t[e])})})),a[0].data.map((function(t){e.table.data.headings[t.date.split(" ")[0]]={placeholder:e.datePipe.transform(t.date.split(" ")[0],"dd")}})),console.log("Group:",t,a,this.table.data.headings),a}},{key:"getTableColumns",value:function(e){var t=[];return e.map((function(e){var n={Regno:{value:e.Regno}};e.data.map((function(e){n[e.date.split(" ")[0]]={value:e.distance}})),t.push(n)})),t}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Daywise Vehicle Distance",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"FoName:"+n.data.name,"Report:Daywise Vehicle Distance",["Action"],"")}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||Io)(m["\u0275\u0275directiveInject"](h.c),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a))},Io.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Io,selectors:[["daywise-vehicle-distance"]],decls:25,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mb-3"],[1,"col-3"],["type","text","autocomplete","off","placeholder","Start Date","name","date",1,"form-control",2,"cursor","pointer",3,"value","click"],["type","text","autocomplete","off","placeholder","end Date","name","date1",1,"form-control",2,"cursor","pointer",3,"value","click"],[1,"btn","btn-primary","pt-1","pb-1","rounded-sm","text-capitalize",3,"click"],[1,"container"],["id","daywiseVehDistance",3,"data","settings",4,"ngIf"],["id","daywiseVehDistance",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5," Day Wise Vehicle Distance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",3),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("daywiseVehDistance")})),m["\u0275\u0275element"](9,"i",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("daywiseVehDistance")})),m["\u0275\u0275element"](11,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"nb-card-body"),m["\u0275\u0275elementStart"](13,"div",7),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"input",9),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](16,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",8),m["\u0275\u0275elementStart"](18,"input",10),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](19,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",8),m["\u0275\u0275elementStart"](21,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getDistance()})),m["\u0275\u0275text"](22,"Get Distance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",12),m["\u0275\u0275template"](24,Do,1,2,"smart-table",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](16,3,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](19,6,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",t.table.data.columns.length))},directives:[p.s,p.v,p.r,u.u,E.a],pipes:[u.f],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),Io),Ao=r("F9Xm"),Vo=r("QVK/");function Lo(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",32),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit;return e.customField=!0,e.customButton=!1})),m["\u0275\u0275text"](1,"Add Fields"),m["\u0275\u0275elementEnd"]()}}function zo(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275template"](1,Lo,2,0,"button",36),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.customButton)}}function jo(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275elementStart"](1,"button",32),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).addMore()})),m["\u0275\u0275text"](2,"Add Materials"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Ro(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275elementStart"](1,"i",37),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().index;return m["\u0275\u0275nextContext"]().particulars.splice(e,1)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Ho(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275elementStart"](2,"auto-suggestion",38),m["\u0275\u0275listener"]("onSelected",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[0]=e.id})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275elementStart"](4,"i",39),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).addField()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275elementStart"](6,"input",40),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[1]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275elementStart"](8,"input",41),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[2]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td"),m["\u0275\u0275elementStart"](10,"input",40),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[3]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td"),m["\u0275\u0275elementStart"](12,"input",41),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[4]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td"),m["\u0275\u0275elementStart"](14,"input",40),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[5]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td"),m["\u0275\u0275elementStart"](16,"input",41),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[6]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td"),m["\u0275\u0275elementStart"](18,"input",40),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().$implicit.customfields.customDetail[7]=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]().$implicit,o=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("data",o.getFieldName)("preSelected",null),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[1]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[2]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[3]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[4]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[5]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[6]),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",a.customfields.customDetail[7])}}function No(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tbody"),m["\u0275\u0275elementStart"](1,"tr"),m["\u0275\u0275elementStart"](2,"td"),m["\u0275\u0275elementStart"](3,"label"),m["\u0275\u0275text"](4," Material "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275elementStart"](6,"auto-suggestion",33),m["\u0275\u0275listener"]("onSelected",(function(e){m["\u0275\u0275restoreView"](n);var a=t.index,o=m["\u0275\u0275nextContext"]();return o.searchMaterialType(e,a,o.material)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275elementStart"](8,"label"),m["\u0275\u0275text"](9,"Number Of Articles "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275elementStart"](11,"input",34),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.articles=e}))("focus",(function(){m["\u0275\u0275restoreView"](n);var e=t.index;return m["\u0275\u0275nextContext"]().material(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"td"),m["\u0275\u0275elementStart"](13,"label"),m["\u0275\u0275text"](14,"Weight"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td"),m["\u0275\u0275elementStart"](16,"input",15),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.weight=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td"),m["\u0275\u0275elementStart"](18,"label"),m["\u0275\u0275text"](19,"Material Value"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"td"),m["\u0275\u0275elementStart"](21,"input",15),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.material_value=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](22,zo,2,1,"td",35),m["\u0275\u0275template"](23,jo,3,0,"td",35),m["\u0275\u0275template"](24,Ro,2,0,"td",35),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](25,Ho,19,9,"tr",35),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("preSelected",null)("inputId","material-"+o),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",a.articles),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",a.weight),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",a.material_value),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o==i.particulars.length-1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o==i.particulars.length-1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0!==o),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",a.customField)}}var Uo,Go=((Uo=function(){function e(t,n,a,o,r){i(this,e),this.modalService=t,this.common=n,this.accountService=a,this.api=o,this.mapService=r,this.materialDetails=null,this.branches=null,this.vehicleId=null,this.vehicleRegNo=null,this.vehicleno=null,this.flag=!1,this.lr={taxPaidBy:null,consigneeName:null,consigneeAddress:null,consigneeId:null,deliveryAddress:null,consignorAddress:null,consignorName:null,consignorId:null,sameAsDelivery:!1,paymentTerm:"1",payableAmount:0,lrNumber:null,sourceCity:null,sourceLat:null,sourceLng:null,destinationCity:null,destinationLat:null,destinationLng:null,remark:null,date:null,amount:0,gstPer:0},this.particulars=[{material:null,articles:null,weight:null,material_value:null,customfields:{customDetail:[]},customField:!1,customButton:!0}],this.driver={name:null,licenseNo:null,id:null},this.taName=null,this.taId=null,this.preSelectedDriver=null,this.getFieldName=[];var l=new Date;l.setDate(l.getDate()),this.lr.date=l,this.getAllFieldName()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.autoSuggestion("sourceCity",(function(t,n,a){e.lr.sourceCity=t,e.lr.sourceLat=n,e.lr.sourceLng=a})),this.mapService.autoSuggestion("destinationCity",(function(t,n,a){e.lr.destinationCity=t,e.lr.destinationLat=n,e.lr.destinationLng=a}))}},{key:"getBranches",value:function(){var e=this;this.api.post("Suggestion/GetBranchList",{search:123}).subscribe((function(t){console.log("Branches :",t.data),e.accountService.branches=t.data}),(function(e){console.log("Error: ",e)}))}},{key:"addConsignee",value:function(){console.log("open material modal"),this.modalService.open(Ao.a,{size:"sm",container:"nb-layout",backdrop:"static",windowClass:"add-consige-veiw"}).result.then((function(e){console.log("Data:",e)}))}},{key:"addDriver",value:function(){var e=this;this.common.params={vehicleId:this.vehicleId,vehicleRegNo:this.vehicleRegNo},this.modalService.open(jt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("data",t),t.data&&e.getDriverInfo()}))}},{key:"getvehicleData",value:function(e){console.log("Vehicle Data: ",e),this.vehicleId=e.id,this.vehicleRegNo=e.regno,this.getDriverInfo()}},{key:"getDriverInfo",value:function(){var e=this,t={vid:this.vehicleId};this.common.loading++,this.api.post("Drivers/getDriverInfo",t).subscribe((function(t){e.common.loading--,console.log("res",t.data),t.data.length>0?(e.driver.name=t.data[0].empname,e.driver.id=t.data[0].driver_id,e.mobileno=t.data[0].mobileno,e.preSelectedDriver={mobileno:t.data[0].mobileno},console.log("------------------:",e.preSelectedDriver),console.log("name,id,number",e.driver.name,e.driver.id,e.mobileno)):e.flag=!1}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getDriverData",value:function(e){return console.log("driver",e),this.driver.name=e.empname,this.driver.licenseNo=e.licence_no,this.driver.id=e.id,this.driver.id}},{key:"getConsignorDetail",value:function(e){console.log("consignor",e),this.lr.consignorAddress=e.address,this.lr.consignorName=e.name,this.lr.consignorId=e.id}},{key:"getConsigneeDetail",value:function(e){console.log("consignee",e),this.lr.consigneeAddress=e.address,this.lr.consigneeName=e.name,this.lr.consigneeId=e.id}},{key:"getBranchDetails",value:function(){}},{key:"fillConsigneeAddress",value:function(){console.log("sameAsDelivery",this.lr.consigneeAddress),this.lr.deliveryAddress=this.lr.sameAsDelivery?this.lr.consigneeAddress:null}},{key:"addMore",value:function(){this.particulars.push({material:null,articles:null,weight:null,material_value:null,customfields:{customDetail:[]},customField:!1,customButton:!0})}},{key:"searchTaName",value:function(e){this.taName=e.name,this.taId=e.id}},{key:"searchMaterialType",value:function(e,t,n){}},{key:"material",value:function(e){console.log("material-"+e),this.particulars[e].material=document.getElementById("material-"+e).value,console.log("Vlue",this.particulars[e].material)}},{key:"saveDetails",value:function(){var e=this;if(this.lr.sourceLat&&this.lr.destinationLat){++this.common.loading;var t=JSON.parse(JSON.stringify(this.particulars));t.map((function(e){for(var t=0;t<e.customfields.customDetail.length;t+=2)e.customfields[e.customfields.customDetail[t]]=e.customfields.customDetail[t+1];e.customfields=Object.assign({},e.customfields),delete e.customfields.customDetail}));var n=this.common.dateFormatter1(this.lr.date).split(" ")[0];console.log("params lrdate",n);var a={branchId:this.accountService.selected.branch.id,vehicleId:this.vehicleId,lrNo:this.lr.lrNumber,lrDate:n,driverId:this.driver.id,source:this.lr.sourceCity,destination:this.lr.destinationCity,consignorId:this.lr.consignorId,consigneeId:this.lr.consigneeId,amount:this.lr.amount,gstPer:this.lr.gstPer,totalAmount:this.lr.payableAmount,payType:this.lr.paymentTerm,taxPaid:this.lr.taxPaidBy,travelAgentId:this.taId,deliveryAddress:this.lr.deliveryAddress,lrDetails:JSON.stringify(t),remarks:this.lr.remark,sourceLat:this.lr.sourceLat,sourceLng:this.lr.sourceLng,destinationLat:this.lr.destinationLat,destinationLng:this.lr.destinationLng,consigneeAddress:this.lr.consigneeAddress,consignorAddress:this.lr.consignorAddress,vehicleRegNo:document.getElementById("vehicleno").value,lrType:"true"};console.log("params",a),this.api.post("LorryReceiptsOperation/generateLR",a).subscribe((function(t){--e.common.loading,console.log("response :",t.data[0].rtn_id),t.data[0].rtn_id>0?alert("LR Generated Successfully"):alert(t.data[0].rtn_msg)}),(function(t){--e.common.loading,alert(t),console.log("Error: ",t)}))}else this.common.showError("Source and Destination Location selection are required")}},{key:"checkDateFormat",value:function(){var e=this.lr.date;if(console.log("this.lrdate",this.lr.date),!(e.length<8||e.match(/^\d{4}[-]\d{2}[-]\d{2}$/))){var t=e[0]+e[1],n=e[2]+e[3],a=e.substring(4,8);this.lr.date=a+"-"+n+"-"+t,console.log("checkDateFormat",this.lr.date)}}},{key:"getDate",value:function(){var e=this;this.common.params={ref_page:"generate-lr"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.date&&(e.lr.date=e.common.dateFormatter(t.date,"ddMMYYYY").split(" ")[0],console.log("lrdate: by getDate "+e.lr.date))}))}},{key:"resetData",value:function(e){this.vehicleId=null,console.log(e)}},{key:"calculateTotalAmount",value:function(){var e;e=100+parseFloat(""+this.lr.gstPer),this.lr.payableAmount=this.lr.amount*e/100,console.log(e,"lr payable amount",this.lr.payableAmount)}},{key:"addField",value:function(){var e=this;this.modalService.open(Vo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){console.log("Data:",t),e.getAllFieldName()}))}},{key:"getAllFieldName",value:function(){var e=this;this.api.get("Suggestion/lrFoFields?sugId=1").subscribe((function(t){e.getFieldName=t.data,console.log("All Name",e.getFieldName)}),(function(t){e.common.loading--,console.log(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Uo)(m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](Ee.a))},Uo.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Uo,selectors:[["generate-lr-no-vehicles"]],decls:153,vars:24,consts:[[2,"border","0px"],[1,"table","table-bordered","gerrate_tabel"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number","inputId","vehicleno",2,"width","60%",3,"ngModel","onSelected","change","ngModelChange"],["type","text","placeholder","Enter LR Number",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-sm-12"],[3,"isTime","dateTimeValue","onChanged"],["url","Suggestion/GetTransportAgent","display","name","placeholder","Transport Agent Name",3,"preSelected","onSelected"],["url","Booster/getDrivers","display","mobileno","placeholder","Select Driver",1,"col-md-10","auto-suggest",2,"width","100%",3,"preSelected","onSelected"],["col-md-2",""],[1,"fa","fa-plus","add","col-md-2",3,"click"],["placeholder","sourceCity","id","sourceCity",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","destinationCity","id","destinationCity",1,"form-control",3,"ngModel","ngModelChange"],["url","Suggestion/GetCompanies2?type=ALL","display","name","placeholder","",1,"col-md-10","auto-suggest",2,"width","100%",3,"onSelected"],["type","text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange","change"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"],["type","number","min","0","max","31",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"form-conrol",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],[1,"radio-btn"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","1",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","2",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","3",1,"radio-btn",3,"ngModel","ngModelChange"],["type","radio","name","taxPaidBy","id","taxPaidBy","value","4",1,"radio-btn",3,"ngModel","ngModelChange"],["type","text","placeholder","Any Other Remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"material_details"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["url","Suggestion/GetMaterialTypes","display","name","placeholder","Material Name",3,"preSelected","inputId","onSelected"],["type","text",1,"form-control",3,"ngModel","ngModelChange","focus"],[4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"fa","fa-trash","remove",3,"click"],["display","name","placeholder","Name",3,"data","preSelected","onSelected"],[1,"fa","fa-plus","add","col-md-4",3,"click"],["type","text","placeholder","Value",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Generate LR "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"table",1),m["\u0275\u0275elementStart"](6,"tbody"),m["\u0275\u0275elementStart"](7,"tr"),m["\u0275\u0275elementStart"](8,"td"),m["\u0275\u0275elementStart"](9,"label"),m["\u0275\u0275text"](10,"Vehicle No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td"),m["\u0275\u0275elementStart"](12,"auto-suggestion",2),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getvehicleData(e)}))("change",(function(e){return t.resetData(e)}))("ngModelChange",(function(e){return t.vehicleno=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td"),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"LR No*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"td"),m["\u0275\u0275elementStart"](17,"input",3),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.lrNumber=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"tr"),m["\u0275\u0275elementStart"](19,"td"),m["\u0275\u0275elementStart"](20,"label"),m["\u0275\u0275text"](21,"Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"td"),m["\u0275\u0275elementStart"](23,"div",4),m["\u0275\u0275elementStart"](24,"div",5),m["\u0275\u0275elementStart"](25,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.lr.date=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"td"),m["\u0275\u0275elementStart"](27,"label"),m["\u0275\u0275text"](28,"T.A. Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"td"),m["\u0275\u0275elementStart"](30,"auto-suggestion",7),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchTaName(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"tr"),m["\u0275\u0275elementStart"](32,"td"),m["\u0275\u0275elementStart"](33,"label"),m["\u0275\u0275text"](34,"Driver Mob NO"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"td"),m["\u0275\u0275elementStart"](36,"span"),m["\u0275\u0275elementStart"](37,"auto-suggestion",8),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getDriverData(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](38,"div",9),m["\u0275\u0275elementStart"](39,"i",10),m["\u0275\u0275listener"]("click",(function(){return t.addDriver()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"td"),m["\u0275\u0275elementStart"](41,"label"),m["\u0275\u0275text"](42,"Driver Name : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](43),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](44,"td"),m["\u0275\u0275elementStart"](45,"label"),m["\u0275\u0275text"](46,"License No : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](47),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](48,"tr"),m["\u0275\u0275elementStart"](49,"td"),m["\u0275\u0275elementStart"](50,"label"),m["\u0275\u0275text"](51,"Source City*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](52,"td"),m["\u0275\u0275elementStart"](53,"input",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.sourceCity=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](54,"td"),m["\u0275\u0275elementStart"](55,"label"),m["\u0275\u0275text"](56,"Destination City* "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](57,"td"),m["\u0275\u0275elementStart"](58,"input",12),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.destinationCity=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](59,"tr"),m["\u0275\u0275elementStart"](60,"td"),m["\u0275\u0275elementStart"](61,"label"),m["\u0275\u0275text"](62,"Consignor Name*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](63,"td"),m["\u0275\u0275elementStart"](64,"span"),m["\u0275\u0275elementStart"](65,"auto-suggestion",13),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getConsignorDetail(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](66,"i",10),m["\u0275\u0275listener"]("click",(function(){return t.addConsignee()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"td"),m["\u0275\u0275elementStart"](68,"label"),m["\u0275\u0275text"](69,"Consignor Address"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](70,"td"),m["\u0275\u0275elementStart"](71,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.consignorAddress=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](72,"tr"),m["\u0275\u0275elementStart"](73,"td"),m["\u0275\u0275elementStart"](74,"label"),m["\u0275\u0275text"](75,"Consignee Name*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](76,"td"),m["\u0275\u0275elementStart"](77,"span"),m["\u0275\u0275elementStart"](78,"auto-suggestion",13),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getConsigneeDetail(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](79,"div",9),m["\u0275\u0275elementStart"](80,"i",10),m["\u0275\u0275listener"]("click",(function(){return t.addConsignee()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](81,"td"),m["\u0275\u0275elementStart"](82,"label"),m["\u0275\u0275text"](83,"Consignee Address"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](84,"td"),m["\u0275\u0275elementStart"](85,"input",15),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.consigneeAddress=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](86,"tr"),m["\u0275\u0275elementStart"](87,"td"),m["\u0275\u0275elementStart"](88,"label"),m["\u0275\u0275text"](89,"Delivery Address "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](90,"td"),m["\u0275\u0275elementStart"](91,"input",16),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.sameAsDelivery=e}))("change",(function(){return t.fillConsigneeAddress()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](92," Same as Consignee Address "),m["\u0275\u0275elementStart"](93,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.deliveryAddress=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](94,"tr"),m["\u0275\u0275elementStart"](95,"td"),m["\u0275\u0275elementStart"](96,"label"),m["\u0275\u0275text"](97,"Amount"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](98,"td"),m["\u0275\u0275elementStart"](99,"input",17),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.amount=e}))("change",(function(){return t.calculateTotalAmount()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](100,"td"),m["\u0275\u0275elementStart"](101,"label"),m["\u0275\u0275text"](102,"GST %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](103,"td"),m["\u0275\u0275elementStart"](104,"input",18),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.gstPer=e}))("change",(function(){return t.calculateTotalAmount()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](105,"tr"),m["\u0275\u0275elementStart"](106,"td"),m["\u0275\u0275elementStart"](107,"label"),m["\u0275\u0275text"](108,"Total Amount"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](109,"td"),m["\u0275\u0275text"](110),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](111,"td"),m["\u0275\u0275elementStart"](112,"label"),m["\u0275\u0275text"](113,"Payment Term"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](114,"td"),m["\u0275\u0275elementStart"](115,"select",19),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.paymentTerm=e})),m["\u0275\u0275elementStart"](116,"option",20),m["\u0275\u0275text"](117,"ToPay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](118,"option",21),m["\u0275\u0275text"](119,"Paid"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](120,"option",22),m["\u0275\u0275text"](121,"To Be Billed"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](122,"tr"),m["\u0275\u0275elementStart"](123,"td"),m["\u0275\u0275elementStart"](124,"label"),m["\u0275\u0275text"](125,"Tax Paid By : "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](126,"td"),m["\u0275\u0275elementStart"](127,"span"),m["\u0275\u0275elementStart"](128,"label",23),m["\u0275\u0275elementStart"](129,"input",24),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.taxPaidBy=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](130,"Consignor "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](131,"label",23),m["\u0275\u0275elementStart"](132,"input",25),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.taxPaidBy=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](133,"Consignee "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](134,"label",23),m["\u0275\u0275elementStart"](135,"input",26),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.taxPaidBy=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](136,"GTA "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](137,"label",23),m["\u0275\u0275elementStart"](138,"input",27),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.taxPaidBy=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](139,"Exempt "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](140,"td"),m["\u0275\u0275elementStart"](141,"label"),m["\u0275\u0275text"](142,"Remark"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](143,"td"),m["\u0275\u0275elementStart"](144,"input",28),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lr.remark=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](145,"div",29),m["\u0275\u0275elementStart"](146,"h5"),m["\u0275\u0275text"](147,"Material Details"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](148,"table",30),m["\u0275\u0275template"](149,No,26,9,"tbody",31),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](150,"div"),m["\u0275\u0275elementStart"](151,"button",32),m["\u0275\u0275listener"]("click",(function(){return t.saveDetails()})),m["\u0275\u0275text"](152,"Save"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngModel",t.vehicleno),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.lr.lrNumber),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.lr.date),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("preSelected",t.preSelectedDriver),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate1"](" ",t.driver.name," "),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"](" ",t.driver.licenseNo," "),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.lr.sourceCity),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.lr.destinationCity),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngModel",t.lr.consignorAddress),m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngModel",t.lr.consigneeAddress),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.lr.sameAsDelivery),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.lr.deliveryAddress),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.lr.amount),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.lr.gstPer),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate1"](" ",t.lr.payableAmount," "),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.lr.paymentTerm),m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngModel",t.lr.taxPaidBy),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",t.lr.taxPaidBy),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",t.lr.taxPaidBy),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",t.lr.taxPaidBy),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.lr.remark),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngForOf",t.particulars))},directives:[p.s,p.v,p.r,Ht.a,ce.r,ce.u,ce.d,me.a,ce.a,ce.x,ce.D,ce.w,ce.G,ce.z,u.t,u.u],styles:["label.radio-btn[_ngcontent-%COMP%] + label.radio-btn[_ngcontent-%COMP%]{margin-left:10px}.radio-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;margin:0 5px 0 0}textarea[_ngcontent-%COMP%]{width:100%;height:100px}.remove[_ngcontent-%COMP%]{font-size:12px;background-color:#f44236;color:#fff;padding:7px 8px;border-radius:3px}.auto-suggest[_ngcontent-%COMP%]{margin-left:-15px}nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding:10px 15px}table.gerrate_tabel[_ngcontent-%COMP%]{border:0}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding:5px 10px}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-box-shadow:none;box-shadow:none}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:14px;color:#fff;background:linear-gradient(-135deg,#1de9b6,#1dc4e9);width:28px;float:right;padding:8px 0;text-align:center;border-radius:3px}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:15%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:35%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}table.gerrate_tabel[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:35%}.material_details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #ccc;padding:10px 0;margin-bottom:15px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border:0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{border:0!important}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding:5px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-box-shadow:none;box-shadow:none;padding:3px 5px!important;height:auto!important}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:14px;color:#fff;background:#000;width:28px;float:right;padding:6px 0;text-align:center;border-radius:3px}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;border:0;border-radius:3px;padding:7px;text-transform:capitalize}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;margin:0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{vertical-align:middle;margin:0 5px 0 0}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:7%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:10%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:8%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:12%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:7%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){width:9%}.material_details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(11){width:1%}.material_details[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border-radius:3px;border:0;padding:10px 20px;cursor:pointer!important}"]}),Uo),Bo=r("V+Fr"),Wo=r("EFD8");function Ko(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().genrateLrManifest()})),m["\u0275\u0275text"](1,"Generate-lr-ManiFest"),m["\u0275\u0275elementEnd"]()}}function $o(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",11),m["\u0275\u0275text"](1," No Data Available On That Time Period ! "),m["\u0275\u0275elementEnd"]())}function qo(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",12),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Jo,Yo=((Jo=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.activeModal=r,this.startDate="",this.endDate="",this.manifestData=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};var l=new Date;this.endDate=this.common.dateFormatter(l).split(" ")[0],this.startDate=this.common.dateFormatter(new Date(l.setDate(l.getDate()-10))).split(" ")[0],this.common.refresh=this.refresh.bind(this),this.getLrManifest()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getLrManifest()}},{key:"getDate",value:function(e){var t=this;this.common.params={ref_page:"vehicle trip stages"},this.modalService.open(Rt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.date&&("start"==e?(t.startDate="",t.startDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.startDate)):(t.endDate=t.common.dateFormatter(n.date).split(" ")[0],console.log("endDate",t.endDate)))}))}},{key:"getLrManifest",value:function(){var e=this;this.manifestData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,tableHeight:"75vh"}};var t=this.common.dateFormatter1(this.endDate.split(" ")[0])+" 23:59:00",n="startDate="+this.common.dateFormatter1(this.startDate).split(" ")[0]+"&endDate="+t;this.common.loading++,this.api.get("LorryReceiptsOperation/getLrManifest?"+n).subscribe((function(t){if(e.common.loading--,e.manifestData=t.data,console.log("retrun Data length is zero",e.manifestData),null!=e.manifestData){var n=e.manifestData[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};"Date"===a&&(o.type="date"),e.table.data.headings[a]=o}e.table.data.headings.action={title:"Action",placeholder:"Action"},e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.manifestData.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.manifestData[t][this.headings[n]],class:this.manifestData[t][this.headings[n]]>0?"blue":"black",action:""},this.valobj.action={value:"",isHTML:!1,action:null,icons:this.actionIcons(this.manifestData[t])};e.push(this.valobj)}return e}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-print",action:this.openViewManifestModal.bind(this,e)}];return this.user.permission.edit&&t.push({class:" fa fa-pencil-square-o ml-2",action:this.editLrManifest.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"closeModal",value:function(){this.activeModal.close()}},{key:"openViewManifestModal",value:function(e){console.log("====manifestData=",e),this.common.params={manifestId:e._id},this.modalService.open(Bo.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){}))}},{key:"editLrManifest",value:function(e){var t=this;this.common.params={manifestId:e._id},this.modalService.open(Wo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getLrManifest()}))}},{key:"genrateLrManifest",value:function(){var e=this;this.common.params={},this.modalService.open(Wo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){e.getLrManifest()}))}}]),e}()).\u0275fac=function(e){return new(e||Jo)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b))},Jo.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Jo,selectors:[["view-manifesto"]],decls:21,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-5"],[1,"col-sm-2"],["type","text","name","date","placeholder","Start Date",1,"form-control",3,"value","click"],["type","text","name","date1","placeholder","End Date",1,"form-control",3,"value","click"],[1,"col-sm-1"],[1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["class","no-data alert alert-danger text-center","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger","text-center"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Manifestation "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"input",4),m["\u0275\u0275listener"]("click",(function(){return t.getDate("start")})),m["\u0275\u0275pipe"](8,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"input",5),m["\u0275\u0275listener"]("click",(function(){return t.getDate("end")})),m["\u0275\u0275pipe"](11,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",6),m["\u0275\u0275elementStart"](13,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.getLrManifest()})),m["\u0275\u0275text"](14,"OK"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",3),m["\u0275\u0275template"](16,Ko,2,0,"button",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"nb-card-body"),m["\u0275\u0275template"](18,$o,2,0,"div",9),m["\u0275\u0275elementStart"](19,"div"),m["\u0275\u0275template"](20,qo,1,2,"smart-table",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](8,5,t.startDate,"dd MMM yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("value",m["\u0275\u0275pipeBind2"](11,8,t.endDate,"dd MMM yyyy")),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",null==t.manifestData),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.manifestData&&t.manifestData.length>0))},directives:[p.s,p.v,u.u,p.r,E.a],pipes:[u.f],styles:['nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding:10px 15px}[_nghost-%COMP%]     td .zoom{background:linear-gradient(-135deg,#1de9b6,#1dc4e9);display:inline-block;padding:3px 8px;border-radius:3px;color:#fff}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}[_nghost-%COMP%]     td i.fa-print span{position:absolute;display:none;padding:11px 57px;left:-44px;top:-28px;font-family:Roboto;z-index:999}.fa-print[_ngcontent-%COMP%]:before{content:"\\f02f";padding:10px}']}),Jo),Zo=r("cSOp"),Qo=r("nvNi"),Xo=r("FgHD"),ei=r("9M6I");function ti(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",11),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ni(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275element"](1,"smart-table",13),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function ai(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275elementStart"](1,"h4",15),m["\u0275\u0275text"](2,"No Record Found"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}var oi,ii=((oi=function(){function e(t,n,a,o,r,l){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.route=r,this.modalService=l,this.dropDown=[{name:"Pending",id:0},{name:"Complete",id:1}],this.vehicleStatus=0,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewImages=null,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.endDate=new Date}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getLorryPodReceipts",value:function(){var e=this;console.log("status",this.vehicleStatus);var t=new Date(this.common.dateFormatter(this.endDate).split(" ")[0]),n="startDate="+this.common.dateFormatter(this.startDate).split(" ")[0]+"&endDate="+this.common.dateFormatter(t.setDate(t.getDate()+1)).split(" ")[0]+"&status="+this.vehicleStatus;++this.common.loading,this.api.get("LorryReceiptsOperation/getLRPodReceipts?"+n).subscribe((function(t){if(e.common.loading--,e.data=t.data,e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},e.data&&e.data.length){var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};"LR Date"!==a&&"POD Date"!==a||(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,console.log(t)}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]="Action"==e.headings[a]?{value:"",action:null,html:!0,icons:e.actionIcons(n)}:{value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-eye",action:this.getPodImage.bind(this,e)}];return this.user.permission.edit&&t.push({class:"fa fa-edit",action:this.openPodDeatilsModal.bind(this,e)}),this.user.permission.delete&&t.push({class:"fa fa-trash",action:this.deleteLr.bind(this,e)}),t}},{key:"deleteLr",value:function(e){var t=this,n={podId:e._id};e._id&&(this.common.params={title:"Delete Lr-Pod-Receipt",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("LorryReceiptsOperation/deleteLrPodDelete",n).subscribe((function(e){t.common.loading--,e.data[0].r_id>0?(t.common.showToast("Successfully Deleted."),t.getLorryPodReceipts()):t.common.showError(e.data[0].r_msg),console.log("res",e.data)}),(function(e){t.common.loading--,t.common.showError()})))})))}},{key:"openPodDeatilsModal",value:function(e){console.log("====podr=====",e);var t={podId:e._id,lrId:e._lrid};console.log("====podDetails=====",t),this.common.params={podDetails:t},this.modalService.open(re.a,{size:"lg",container:"nb-layout",windowClass:"lrpoddetail"}).result.then((function(e){}))}},{key:"getPodImage",value:function(e){console.log("val",e),e._docid?(this.common.params={refdata:{refid:"",reftype:"",doctype:"",docid:e._docid},title:"docImage"},this.modalService.open(O.a,{size:"lg",container:"nb-layout",windowClass:"imageviewcomp"})):this.common.showError("There is No image")}}]),e}()).\u0275fac=function(e){return new(e||oi)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](P.r))},oi.\u0275cmp=m["\u0275\u0275defineComponent"]({type:oi,selectors:[["lr-pod-receipts"]],decls:20,vars:9,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-sm-2"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],[1,"btn","btn-primary","m-0",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"value"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Lorry Pod Receipts"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",2),m["\u0275\u0275elementStart"](11,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vehicleStatus=e})),m["\u0275\u0275template"](12,ti,2,2,"option",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",7),m["\u0275\u0275elementStart"](14,"button",8),m["\u0275\u0275listener"]("click",(function(){return t.getLorryPodReceipts()})),m["\u0275\u0275text"](15,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div"),m["\u0275\u0275template"](17,ni,2,2,"div",9),m["\u0275\u0275template"](18,ai,3,0,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"router-outlet")),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startDate),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endDate),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.vehicleStatus),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.dropDown),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.data||!t.data.length))},directives:[p.s,p.v,p.r,me.a,ce.D,ce.r,ce.u,u.t,u.u,h.h,ce.w,ce.G,E.a],styles:["[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i{font-size:16px;margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i.fa-edit{color:#00f}[_nghost-%COMP%]     .tableFixHead table tr td:last-child div i.fa-trash{color:red}"]}),oi),ri=r("axIL");function li(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275elementStart"](1,"div",10),m["\u0275\u0275elementStart"](2,"auto-suggestion",11),m["\u0275\u0275listener"]("onSelected",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getvehicleData(e)}))("change",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().resetData(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"div",10),m["\u0275\u0275elementStart"](4,"uj-date-time-picker",12),m["\u0275\u0275listener"]("onChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",10),m["\u0275\u0275elementStart"](6,"uj-date-time-picker",13),m["\u0275\u0275listener"]("onChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",14),m["\u0275\u0275elementStart"](8,"button",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().search()})),m["\u0275\u0275text"](9," Search "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",a.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",a.endTime)}}function si(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var di,ci=((di=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.modalService=a,this.activeModal=o,this.user=r,this.State="1",this.vehicleId=null,this.vehicleRegno=null,this.startTime=new Date((new Date).setMonth((new Date).getMonth()-1)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.changeState()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){"1"==this.State?this.changeState():this.search()}},{key:"changeState",value:function(){var e=this;if("0"==this.State)return this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],void(this.valobj={});this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var t="isSummary="+this.State+"&startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Vehicles/showManualKmData?"+t).subscribe((function(t){if(e.common.loading--,console.log("res: ",t.data),t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action"),hideHeader:!0};e.table.data.headings.action=i,e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"search",value:function(){var e=this;this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var t="vehicleId="+this.vehicleId+"&isSummary="+this.State+"&startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime);this.common.loading++,this.api.get("Vehicles/showManualKmData?"+t).subscribe((function(t){if(e.common.loading--,console.log("res: ",t.data),e.data=[],t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action"),hideHeader:!0};e.table.data.headings.action=i,e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.action={class:"",icons:e.actionIcons(n)},t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[];return e._id?this.user.permission.delete&&t.push({class:"fa fa-window-close",action:this.remove.bind(this,e)}):t.push({class:"fa fa-tachometer-alt",action:this.openOdoMeter.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"openOdoMeter",value:function(e){var t=this;this.common.params={vehicleId:e._vid,regno:e.Vehicle},this.modalService.open(Le.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.changeState()}))}},{key:"remove",value:function(e){var t=this,n={id:e._id,vehicleId:e._vid};e._id&&(this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("Vehicles/deleteOdometerEntry",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.data.r_id>0?"Success":e.data.r_msg),"1"==t.State?t.changeState():t.search()}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"getvehicleData",value:function(e){this.vehicleId=e.id,this.vehicleRegno=e.regno}},{key:"refreshAuto",value:function(){var e=document.getElementsByName("suggestion")[0].value;""!=e&&null!=e||(this.vehicleRegno=null,this.vehicleId=null)}},{key:"resetData",value:function(e){this.vehicleId=null,console.log(e)}}]),e}()).\u0275fac=function(e){return new(e||di)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](c.a))},di.\u0275cmp=m["\u0275\u0275defineComponent"]({type:di,selectors:[["vehicle-odometer"]],decls:15,vars:3,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[1,"col-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange","change"],["value","1"],["value","0"],["class","row mb-3",4,"ngIf"],["id","odoMeter",3,"data","settings",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-2","pr-0"],["url","Vehicles/getVehicleListForFoid","display","regno","placeholder","Enter Vehicle Number",2,"width","60%",3,"onSelected","change"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["id","odoMeter",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle OdoMeter"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"select",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.State=e}))("change",(function(){return t.changeState()})),m["\u0275\u0275elementStart"](8,"option",5),m["\u0275\u0275text"](9,"summary"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",6),m["\u0275\u0275text"](11,"Details"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"nb-card-body"),m["\u0275\u0275template"](13,li,10,5,"div",7),m["\u0275\u0275template"](14,si,1,2,"smart-table",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngModel",t.State),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf","0"==t.State),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,ce.D,ce.r,ce.u,ce.w,ce.G,p.r,u.u,Ht.a,me.a,E.a],styles:['.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}[_nghost-%COMP%]     .fa-window-close{color:red;font-size:18px}[_nghost-%COMP%]     .fa-window-close span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-window-close span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-window-close span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-window-close:hover span{display:block}[_nghost-%COMP%]     .fa-tachometer-alt{color:#ff8099;font-size:18px}[_nghost-%COMP%]     .fa-tachometer-alt span{position:absolute;display:none;padding:10px 35px;font-weight:400;font-size:11px;left:-32px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-tachometer-alt span:before{content:"OdoMeter";display:block;position:absolute;top:0;left:0;background-color:#ff8099;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-tachometer-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8099;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-tachometer-alt:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),di);function mi(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var pi,hi=((pi=function(){function e(t,n,a){i(this,e),this.api=t,this.user=n,this.common=a,this.foid=null,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.table=null,this.data=[],this.foid=this.user._customer.id,console.log("foid",this.foid)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Regno",placeholder:"Regno"},first_date:{title:"First Date",placeholder:"First Date"},first_kms:{title:"First Kms",placeholder:"First Kms"},last_date:{title:"Last Date",placeholder:"Last Date"},last_kms:{title:"Last Kms",placeholder:"Last Kms"},dis_diff_FromODO:{title:"disFromODO",placeholder:"disFromODO"},disFromDB:{title:"disFromDB",placeholder:"disFromDB"},diff_percentage:{title:"difference %",placeholder:"difference  %"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={regno:{value:n.regno},first_date:{value:e.common.changeDateformat2(n.first_date)},first_kms:{value:n.first_kms},last_date:{value:e.common.changeDateformat2(n.last_date)},last_kms:{value:n.last_kms},dis_diff_FromODO:{value:n.dis_diff_FromODO},disFromDB:{value:n.disFromDB},diff_percentage:{value:n.diff_percentage}};t.push(a)})),t}},{key:"showData",value:function(){var e=this,t={fromTime:this.common.dateFormatter(this.startDate),tTime:this.common.dateFormatter(this.endDate)};console.log("params",t),this.common.loading++,this.api.post("Vehicles/getDiffBwDistanceByOdoMeter",t).subscribe((function(t){e.data=t.data,e.table=e.setTable(),console.log("data",t),e.common.loading--}),(function(e){return console.error("Activity Api Error:",e)}))}}]),e}()).\u0275fac=function(e){return new(e||pi)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](M.a))},pi.\u0275cmp=m["\u0275\u0275defineComponent"]({type:pi,selectors:[["vehicle-distance-with-odometer"]],decls:28,vars:6,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"Vehicle-distance"],[1,"row","mb-3"],[1,"col-10"],[1,"row"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Vehicle Distance With Odometer"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",2),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"div",4),m["\u0275\u0275elementStart"](8,"div",5),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"div",6),m["\u0275\u0275elementStart"](12,"label",7),m["\u0275\u0275text"](13,"From Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"uj-date-time-picker",9),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",6),m["\u0275\u0275elementStart"](17,"div",5),m["\u0275\u0275elementStart"](18,"div",10),m["\u0275\u0275elementStart"](19,"label",7),m["\u0275\u0275text"](20,"To Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",11),m["\u0275\u0275elementStart"](22,"uj-date-time-picker",12),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",13),m["\u0275\u0275elementStart"](24,"button",14),m["\u0275\u0275listener"]("click",(function(){return t.showData()})),m["\u0275\u0275text"](25,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"div"),m["\u0275\u0275template"](27,mi,1,2,"smart-table",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:[".btn-primary[_ngcontent-%COMP%]{border-radius:5px;padding:5px 15px;text-transform:capitalize}"]}),pi);function gi(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",21),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ui,fi=((ui=function(){function e(t,n){i(this,e),this.api=t,this.common=n,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.table=null,this.data=[],this.vehid=null}return l(e,[{key:"ngOnInit",value:function(){}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"regno",placeholder:"regno"},entry_time:{title:"Entry Time",placeholder:"Entry Time",type:"date"},fuel_station:{title:"fuel Station",placeholder:"fuel Station"},location:{title:"location",placeholder:"location"},site_name:{title:"site name",placeholder:"site name"},litres:{title:"litres",placeholder:"litres"},rate:{title:"rate",placeholder:"rate"},amount:{title:"amount",placeholder:"amount"},is_full:{title:"is_full",placeholder:"is_full"},fse_id:{title:"fse_id",placeholder:"fse_id"},addtime:{title:"addtime",placeholder:"addtime",type:"date"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){var a={regno:{value:n.regno},entry_time:{value:e.common.changeDateformat2(n.end_time)},fuel_station:{value:n.fuel_station},location:{value:n.location},site_name:{value:n.site_name},litres:{value:n.litres},rate:{value:n.rate},amount:{value:n.amount},is_full:{value:n.is_full},fse_id:{value:n.fse_id},addtime:{value:e.common.changeDateformat2(n.addtime)}};t.push(a)})),t}},{key:"searchVehicle",value:function(e){this.vehid=e.id,console.log("event",e)}},{key:"submit",value:function(){var e,t=this;e="start_time="+this.common.dateFormatter(this.startDate)+"&end_time="+this.common.dateFormatter(this.endDate)+"&vehicle_id="+this.vehid,console.log("param",e),this.common.loading++,this.api.get("Fuel/getAllFuelStationEntryWrtVeh?"+e).subscribe((function(e){t.data=e.data,t.table=t.setTable(),console.log("datA",e),t.common.loading--}),(function(e){console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||ui)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a))},ui.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ui,selectors:[["fse-entry"]],decls:35,vars:7,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"Vehicle-distance"],[1,"row"],[1,"col-12"],[1,"row","mb-3"],[1,"col-3"],[1,"row","align-items-center"],[1,"col-4","pr-0"],[1,"col-8"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Vehicle Number",3,"preSelected","onSelected"],[1,"row","row","align-items-center"],[1,"col-4","pl-0","pr-0"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0","pl-0"],[1,"col-9"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-2"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Fuel Station Entry"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",2),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"div",4),m["\u0275\u0275elementStart"](8,"div",5),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275elementStart"](10,"div",7),m["\u0275\u0275elementStart"](11,"div",8),m["\u0275\u0275elementStart"](12,"label"),m["\u0275\u0275text"](13,"Vehicle id:"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",9),m["\u0275\u0275elementStart"](15,"auto-suggestion",10),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",6),m["\u0275\u0275elementStart"](17,"div",11),m["\u0275\u0275elementStart"](18,"div",12),m["\u0275\u0275elementStart"](19,"label"),m["\u0275\u0275text"](20,"From Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",13),m["\u0275\u0275elementStart"](22,"uj-date-time-picker",14),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",6),m["\u0275\u0275elementStart"](24,"div",7),m["\u0275\u0275elementStart"](25,"div",15),m["\u0275\u0275elementStart"](26,"label"),m["\u0275\u0275text"](27,"To Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"div",16),m["\u0275\u0275elementStart"](29,"uj-date-time-picker",17),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"div",18),m["\u0275\u0275elementStart"](31,"button",19),m["\u0275\u0275listener"]("click",(function(){return t.submit()})),m["\u0275\u0275text"](32,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"div"),m["\u0275\u0275template"](34,gi,1,2,"smart-table",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,Ht.a,me.a,u.u,E.a],styles:["nb-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{border-radius:5px;padding:5px 15px;text-transform:capitalize}"]}),ui),bi=r("IAms"),vi=r("R++u"),xi=r("ioEQ"),yi=r("dgDc"),Ci=r("wcs7");function _i(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().OpenFoFreight()})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function Si(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",10),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Mi,ki=((Mi=function(){function e(t,n,a,o){i(this,e),this.modalService=t,this.common=n,this.user=a,this.api=o,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.currentYear=(new Date).getFullYear(),this.toDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.toDate).getDate()-20)),this.endDate=new Date,this.getFrieghtRate(),this.common.refresh=this.refresh.bind(this),console.log("current Year",this.startDate)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getFrieghtRate()}},{key:"getFrieghtRate",value:function(){var e=this;if(this.startDate>this.endDate)this.common.showError("StartDate Should be less then Enddate");else{var t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.common.loading++,this.api.post("FrieghtRate/getFrieghtRatePattern",t).subscribe((function(t){if(e.common.loading--,console.log("res: ",t.data),e.data=[],t.data){e.data=t.data,e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("withLocation"),placeholder:e.formatTitle("withLocation"),hideHeader:!0};e.table.data.headings.withLocation=i;var r={title:e.formatTitle("withoutLocation"),placeholder:e.formatTitle("withoutLocation"),hideHeader:!0};e.table.data.headings.withoutLocation=r,e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.withLocation={class:"",icons:e.withLocationicon(n)},e.valobj.withoutLocation={class:"",icons:e.withOutLocationicon(n)},t.push(e.valobj)})),t}},{key:"withLocationicon",value:function(e){console.log("detatis Page:",e);var t=[];return t.push({class:"addButton",action:this.openWithLocationModal.bind(this,e)},{class:"fa fa-eye ml-1",action:this.frieghtRateSummary.bind(this,e)}),t}},{key:"withOutLocationicon",value:function(e){console.log("detatis Page:",e);var t=[];return t.push({class:"addButton",action:this.openWithoutLocationModal.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"openWithoutLocationModal",value:function(e){var t=this;console.log("row",e),this.common.params={data:{frpId:e._id,locId:!1}},console.log("without location"),this.modalService.open(bi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e&&e.response&&t.getFrieghtRate()}))}},{key:"frieghtRateSummary",value:function(e){var t=this;console.log("row",e),this.common.params={id:e._id},this.modalService.open(Ci.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e&&e.response&&t.getFrieghtRate()}))}},{key:"openWithLocationModal",value:function(e){var t=this;console.log("row",e);var n=e._id;console.log("with location",n),this.common.params={id:n},this.modalService.open(vi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e&&e.response&&t.getFrieghtRate()}))}},{key:"OpenFoFreight",value:function(){var e=this;this.common.handleModalSize("class","modal-lg","400"),this.modalService.open(xi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t&&t.data&&e.getFrieghtRate()}))}},{key:"freightRateCalculation",value:function(){this.modalService.open(yi.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||Mi)(m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](s.a))},Mi.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Mi,selectors:[["frieght-rate-input"]],decls:22,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-2"],[1,"col-10"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["id","frieghtRateInput",3,"data","settings",4,"ngIf"],["id","frieghtRateInput",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Freight Rate Inputs"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",5),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",4),m["\u0275\u0275elementStart"](11,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",4),m["\u0275\u0275elementStart"](13,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.getFrieghtRate()})),m["\u0275\u0275text"](14,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",4),m["\u0275\u0275template"](16,_i,2,0,"button",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"div",4),m["\u0275\u0275elementStart"](18,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.freightRateCalculation()})),m["\u0275\u0275text"](19,"Freight Rate Calculation"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"nb-card-body"),m["\u0275\u0275template"](21,Si,1,2,"smart-table",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,me.a,u.u,p.r,E.a],styles:['[_nghost-%COMP%]     .addButton{margin:5px 0;display:inline-block;font-style:normal}[_nghost-%COMP%]     .addButton:before{content:"Add";background-color:#128cc4;border-radius:3px;padding:5px 10px;color:#fff;width:100%;font-size:12px;margin:0!important}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Mi),wi=r("lrE7");function Oi(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",19),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Pi(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",19),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Ei(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",16),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().addFuelIndent()})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function Ti(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",20),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Di,Ii=((Di=function(){function e(t,n,a,o){i(this,e),this.api=t,this.modalService=n,this.user=a,this.common=o,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.vehicleType=0,this.vehicleStatus=0,this.regno=null,this.dropDown1=[{name:"Self",id:0},{name:"Company",id:1}],this.dropDown2=[{name:"Pending",id:0},{name:"Complete",id:1},{name:"Reject",id:-1},{name:"All",id:-2}],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-7)),this.indentType="0",this.apiUrl="Fuel/getPendingFuelIndentWrtFo?",this.getFuelIndent(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getFuelIndent()}},{key:"getFuelIndent",value:function(){var e=this;if(this.common.dateFormatter1(this.startDate)>this.common.dateFormatter1(this.endDate))this.common.showError("Start Date should less then End Date");else{this.apiUrl="0"==this.indentType?"Fuel/getPendingFuelIndentWrtFo?":"Fuel/getPendingCashIndentWrtFo?";var t="startdate="+this.common.dateFormatter1(this.startDate)+"&enddate="+this.common.dateFormatter1(this.endDate)+"&addedBy="+this.vehicleType+"&status="+this.vehicleStatus+"&regno="+this.regno;++this.common.loading,this.api.get(this.apiUrl+t).subscribe((function(t){if(--e.common.loading,console.log("API Res:",t),e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)"Action"==e.headings[a]?(console.log("Test"),e.valobj[e.headings[a]]={value:"",action:null,icons:e.actionIcons(n)}):e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-print",action:this.printReceipt.bind(this,e)}];return this.user.permission.edit&&t.push({class:"fa fa-edit",action:this.editFuelIndent.bind(this,e)}),this.user.permission.delete&&t.push({class:"fa fa-trash",action:this.deleteFuelIndent.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"editFuelIndent",value:function(e){var t=this;console.log("Edit fuel Data",e),this.common.params={title:"Edit Fuel Indent",editFuelData:e,button:"update",index:0,refData:{refType:e._ref_type,refId:e._ref_id}},this.modalService.open(wi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getFuelIndent()}))}},{key:"deleteFuelIndent",value:function(e){var t,n=this;t="0"==this.indentType?"Fuel/deleteFuelIndent":"Fuel/deleteCashIndent";var a={rowid:e._id};e._id&&(this.common.params={title:"Delete Indent ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(n.common.loading++,n.api.post(t,a).subscribe((function(e){console.log("Api Response:",e),n.common.showToast(e.msg),n.getFuelIndent(),n.common.loading--}),(function(e){return console.error(" Api Error:",e)})))})))}},{key:"addFuelIndent",value:function(){var e=this;this.common.params={title:"Add Fuel Indent",button:"add",index:0},this.modalService.open(wi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getFuelIndent()}))}},{key:"printReceipt",value:function(e){console.log("Receipt:",e);var t='\n    <div style="padding: 20px 40px;/* background: #B2B2B2 !important; */width: 90%;margin: auto;margin-top: 30px;border: 2px solid #555;"><div _ngcontent-wbc-c12="" style="\n    background: #fff;\n    padding: 15px;\n"><div style="text-align:center;"><span style="\n    font-size: 35px;\n    font-weight: 600;\n">'.concat(e._fo_name,'</span></div><div _ngcontent-wbc-c12="" style="text-align:center;margin-bottom: 30px;"><span _ngcontent-wbc-c12="" style="\n    font-size: 18px;\n    margin-bottom: 30px;\n">').concat(e._fo_address,'</span></div><div _ngcontent-wbc-c12="" class="row" style="\n    margin: 10px -15px;\n    font-size: 20px;\n"><div class="col" style="text-align:left"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 10px;\n">Ref No:</span><span>').concat(e._ref_id,'</span></div><div _ngcontent-wbc-c12="" class="col" style="text-align:right"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 0px;\n">Date:</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    padding-left: 7px;\n">').concat(e["Issue Date"],'</span></div></div><div _ngcontent-wbc-c12="" style="\n    margin-bottom: 10px;\n    font-size: 20px;\n    margin-top: 30px;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 5px;\n    display: inline-block;\n    width: 30px;\n    /* background: red; */\n">To,</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    display: inline-block;\n    width: calc(100% - 40px);\n">').concat(e["Fuel Station"],'</span></div><div _ngcontent-wbc-c12="" style="\n    font-size: 20px;\n    margin-top: 30px;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 5px;\n    display: inline-block;\n    width: 110px;\n    /* background: red; */\n">Vehicle No.</span><span _ngcontent-wbc-c12="" style="\n    border-bottom: 1px solid #000;\n    display: inline-block;\n    width: calc(100% - 115px);\n">').concat(e.regno,'</span></div><div _ngcontent-wbc-c12="" style="\n    margin-bottom: 15px;\n    padding-left: 115px;\n    font-size: 14px;\n    width: 70%;\n"><span _ngcontent-wbc-c12="">Please Supply to the bearer the following on credit &amp; debit the cost of my/our account:-</span></div><table _ngcontent-wbc-c12="" class="table table-bordered" style="\n    margin-top: 40px;\n    border-color: #000 !important;\n    border-width: 2px;\n"><tbody _ngcontent-wbc-c12="" style="\n    border: none;\n"><tr _ngcontent-wbc-c12="" style="\n    border: none;\n"><td _ngcontent-wbc-c12="" style="\n    border-left: none;\n    border-top-width: 2px;\n    border-bottom-width: 2px;\n    padding-top: 30px;\n    padding-bottom: 30px;\n    border-color: #000 !important;\n"><span _ngcontent-wbc-c12="" style="\n    font-weight: 600;\n    margin-right: 10px;\n">').concat(e._ledger_id?"CASH":"FUEL",':</span><span _ngcontent-wbc-c12="" style="\n    display: inline-block;\n    width: 80%;\n    padding-left: 10px;\n">').concat(e._ledger_id?"\u20b9"+e.Amount:e.Fuel+" ltr",'</span></td><td _ngcontent-wbc-c12="" style="\n    border-top-width: 2px;\n    border-bottom-width: 2px;\n    border-color: #000 !important;\n"><span _ngcontent-wbc-c12=""></span></td></tr></tbody></table><div _ngcontent-wbc-c12="" class="row" style="\n    margin-top: 80px;\n    font-size: 16px;\n    font-weight: bold;\n"><div _ngcontent-wbc-c12="" class="col"><span _ngcontent-wbc-c12="">Sign. of Driver</span></div><div _ngcontent-wbc-c12="" class="col" style="\n    text-align: right;\n"><span _ngcontent-wbc-c12="">Signature with Stamp</span></div></div></div>\n    </div>\n    '),n=document.createElement("div");n.id="print-receipt",n.className="print-receipt",n.innerHTML=t,n.style.left="0",n.style.position="absolute",n.style.top="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="#fff",n.style.zIndex="9999999999999999999999",document.body.appendChild(n),document.getElementsByTagName("ngx-app")[0].style.visibility="hidden",window.print();var a=setInterval((function(){if("complete"==document.readyState){clearInterval(a),document.getElementsByTagName("ngx-app")[0].style.visibility="visible";var e=document.getElementsByTagName("body")[0],t=document.getElementById("print-receipt");e.removeChild(t)}}),200)}}]),e}()).\u0275fac=function(e){return new(e||Di)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](M.a))},Di.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Di,selectors:[["fuel-indent"]],decls:37,vars:14,consts:[[2,"border","0px","height","100%"],[1,"fuel-indent"],[1,"row","mb-3"],[1,"col-1","pr-0"],[1,"col-2"],[1,"",3,"dateTimeValue","isTime","onChanged"],[1,"col-1"],[1,"",3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1-5","mr-3"],["name","indentType","id","indentType",1,"form-control",3,"ngModel","ngModelChange"],["name","fuelIndent",3,"value"],["name","cashIndent",3,"value"],["name","dropDown","id","dropDown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-1","pr-0","pl-0"],["type","button",1,"btn","btn-primary","w-100",3,"click"],["type","button","class","btn btn-primary w-100",3,"click",4,"ngIf"],["id","fuelIndent",3,"data","settings",4,"ngIf"],[3,"value"],["id","fuelIndent",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"span"),m["\u0275\u0275elementStart"](3,"h5"),m["\u0275\u0275text"](4,"Fuel/Cash Indent"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"nb-card-body"),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275elementStart"](8,"div",3),m["\u0275\u0275elementStart"](9,"label"),m["\u0275\u0275text"](10,"Start Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"uj-date-time-picker",5),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",6),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"End Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",4),m["\u0275\u0275elementStart"](17,"uj-date-time-picker",7),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",8),m["\u0275\u0275elementStart"](19,"select",9),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.indentType=e})),m["\u0275\u0275elementStart"](20,"option",10),m["\u0275\u0275text"](21," Fuel-Indent "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"option",11),m["\u0275\u0275text"](23," Cash-Indent "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",8),m["\u0275\u0275elementStart"](25,"select",12),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vehicleType=e})),m["\u0275\u0275template"](26,Oi,2,2,"option",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",8),m["\u0275\u0275elementStart"](28,"select",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vehicleStatus=e})),m["\u0275\u0275template"](29,Pi,2,2,"option",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"div",15),m["\u0275\u0275elementStart"](31,"button",16),m["\u0275\u0275listener"]("click",(function(){return t.getFuelIndent()})),m["\u0275\u0275text"](32,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"div",6),m["\u0275\u0275template"](34,Ei,2,0,"button",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"div"),m["\u0275\u0275template"](36,Ti,1,2,"smart-table",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.indentType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("value",0),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("value",1),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",t.vehicleType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.dropDown1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.vehicleStatus),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.dropDown2),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,me.a,ce.D,ce.r,ce.u,ce.w,ce.G,u.t,u.u,E.a],styles:['.add[_ngcontent-%COMP%]{content:"\\f040";display:block;font-family:FontAwesome;font-size:14px;color:#00f}.fuel-indent[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:3px;padding:5px;text-transform:capitalize}[_nghost-%COMP%]     .fa-edit{color:#00f;font-size:18px}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#00f;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #00f;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}[_nghost-%COMP%]     .fa-trash{color:red;font-size:18px}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-print{color:#000;font-size:18px}[_nghost-%COMP%]     .fa-print span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-print:hover span{display:block}']}),Di),Fi=r("VKYg"),Ai=r("svlw"),Vi=r("edw2"),Li=r("RZbU"),zi=r("7xJQ");function ji(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().saveAdvices()})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function Ri(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Hi,Ni=((Hi=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.modalService=a,this.activeModal=o,this.user=r,this.stateType=0,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.searchData()}return l(e,[{key:"refresh",value:function(){this.searchData()}},{key:"ngOnInit",value:function(){}},{key:"selectType",value:function(e){console.log("type:",e.target.value),this.stateType=e.target.value}},{key:"searchData",value:function(){var e=this;this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var t={status:this.stateType,startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};this.common.loading++,this.api.post("Drivers/getAdvicesInPeriod",t).subscribe((function(t){if(e.common.loading--,e.data=[],t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action"),hideHeader:!0};e.table.data.headings.action=i,e.table.data.columns=e.getTableColumns()}}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.action={class:"",icons:e.actionIcons(n)},t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){console.log("details:",e);var t=[];return t.push({class:"far fa-eye",action:this.adviceView.bind(this,e)},{class:"fas fa-user-check",action:this.clearAdvices.bind(this,e)}),"Accept"!=e.Status&&"Reject"!=e.Status||t.pop(),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"saveAdvices",value:function(){var e=this;this.common.params={refData:null},this.common.handleModalSize("class","modal-lg","1100"),this.modalService.open(Vi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){e.searchData()}))}},{key:"clearAdvices",value:function(e){var t=this,n={id:e._id,typeId:e._advice_type_id};console.log("row:",n),this.common.params={advice:n},this.modalService.open(Li.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.searchData()}))}},{key:"adviceView",value:function(e){var t={view:{api:"Drivers/getAdvicesSingleVehicle",param:{vId:e._vid,test1:1,test2:"Hello"}},delete:{},title:"Advices View"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:t},this.modalService.open(zi.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||Hi)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](c.a))},Hi.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Hi,selectors:[["advices"]],decls:27,vars:7,consts:[[1,"row"],[1,"col-3"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"[ngModel]","change"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"col-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["type","submit",1,"btn","btn-primary","mt-0","mb-0",3,"click"],[1,"col-2"],["class","btn btn-primary mt-0 mb-0",3,"click",4,"ngIf"],[1,"mt-3"],["id","advices",3,"data","settings",4,"ngIf"],[1,"btn","btn-primary","mt-0","mb-0",3,"click"],["id","advices",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Advices"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",0),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"select",2),m["\u0275\u0275listener"]("[ngModel]",(function(){return t.stateType}))("change",(function(e){return t.selectType(e)})),m["\u0275\u0275elementStart"](8,"option",3),m["\u0275\u0275text"](9,"Pending"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",4),m["\u0275\u0275text"](11,"Accept"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",5),m["\u0275\u0275text"](13,"Reject"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"option",6),m["\u0275\u0275text"](15,"Any"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",7),m["\u0275\u0275elementStart"](17,"uj-date-time-picker",8),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",7),m["\u0275\u0275elementStart"](19,"uj-date-time-picker",9),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",7),m["\u0275\u0275elementStart"](21,"button",10),m["\u0275\u0275listener"]("click",(function(){return t.searchData()})),m["\u0275\u0275text"](22,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",11),m["\u0275\u0275template"](24,ji,2,0,"button",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",13),m["\u0275\u0275template"](26,Ri,1,2,"smart-table",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,ce.w,ce.G,me.a,u.u,E.a],styles:['[_nghost-%COMP%]     .fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .fa-eye span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-eye:hover span{display:block}[_nghost-%COMP%]     .fa-user-check{color:#8af304;font-size:18px;padding-left:20px;cursor:pointer}[_nghost-%COMP%]     .fa-user-check span{position:absolute;display:none;padding:10px 38px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-user-check span:before{content:"AddVerify";display:block;position:absolute;top:0;left:0;background-color:#8af304;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-user-check span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8af304;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-user-check:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Hi),Ui=r("pl/H");function Gi(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",11),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Bi(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",11),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Wi(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275element"](1,"smart-table",13),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Ki(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",14),m["\u0275\u0275elementStart"](1,"h4",15),m["\u0275\u0275text"](2,"No Record Found"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}var $i,qi=(($i=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.status=[{name:"accept",id:"1"},{name:"pending",id:"0"},{name:"Reject",id:"-1"}],this.type=[{name:"LR",id:"11"},{name:"Manifest",id:"12"},{name:"Trip",id:"14"},{name:"Any",id:"-1"}],this.actionTypes=[{name:"Any",id:"-1"},{name:"Expense",id:"1"},{name:"Revenue",id:"2"},{name:"Transfer",id:"3"},{name:"Advice",id:"4"}],this.statusid=1,this.Typeid=-1,this.actionTypeId=-1,this.startTime=new Date((new Date).setDate((new Date).getDate()-15)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getExpenses(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getSelection",value:function(){}},{key:"refresh",value:function(){this.getExpenses()}},{key:"getExpenses",value:function(){var e=this,t=new Date(this.common.dateFormatter1(this.endTime).split(" ")[0]),n={startTime:this.common.dateFormatter1(this.startTime).split(" ")[0],endTime:this.common.dateFormatter1(t.setDate(t.getDate()+1)).split(" ")[0],status:this.statusid,type:this.Typeid,actionType:this.actionTypeId};++this.common.loading,this.api.post("FrieghtRate/getAllFreightExpenseAndRevenue",n).subscribe((function(t){if(--e.common.loading,e.data=t.data,e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},e.data&&e.data.length){var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};"Date"!==a&&"Entred At"!==a||(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){console.error(t),e.common.showError()}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)e.valobj[e.headings[a]]="Expense"==e.headings[a]?{value:"",action:null,isHTML:!1,icons:[e.user.permission.edit&&{class:"fa fa-edit",action:e.openExpenseModal.bind(e,n)},{action:null,txt:n._exp_count}]}:"Revenue"==e.headings[a]?{value:"",action:null,isHTML:!1,icons:[e.user.permission.edit&&{class:"fa fa-edit",action:e.openRevenueModal.bind(e,n)},{action:null,txt:n._rev_count}]}:"Transfer"==e.headings[a]?{value:"",action:null,isHTML:!1,icons:[e.user.permission.edit&&{class:"fa fa-edit",action:e.openTransferReceipt.bind(e,n)},{action:null,txt:n._trans_count}]}:"Advice"==e.headings[a]?{value:"",action:null,isHTML:!1,icons:[e.user.permission.edit&&{class:"fa fa-edit",action:e.openadvice.bind(e,n)},{action:null,txt:n._adv_count}]}:{value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"openExpenseModal",value:function(e){var t=this,n={id:e._id,refId:e._ref_id,refernceType:e._ref_type,remarks:e._exp_remarks};console.log("expense",e),this.common.params={expenseData:n},this.modalService.open(oe.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),t.getExpenses()}))}},{key:"openRevenueModal",value:function(e){var t=this;this.common.params={revenueData:{id:e._id,refId:e._ref_id,refernceType:e._ref_type,remarks:e._exp_remarks}},this.modalService.open(ie.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getExpenses()}))}},{key:"openTransferReceipt",value:function(e){var t=this;console.log("transfer",e),this.common.params={refData:{refId:e._ref_id,refType:e._ref_type}},this.modalService.open(Ui.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getExpenses()}))}},{key:"openadvice",value:function(e){var t=this;this.common.handleModalSize("class","modal-lg","900","px"),this.common.params={refData:{refId:e._ref_id,refType:e._ref_type}},this.modalService.open(Vi.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){t.getExpenses()}))}}]),e}()).\u0275fac=function(e){return new(e||$i)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},$i.\u0275cmp=m["\u0275\u0275defineComponent"]({type:$i,selectors:[["freight-expenses"]],decls:22,vars:11,consts:[[2,"border","0px"],[1,"row","submit-exp"],[1,"col-sm-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-sm-2"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-0",3,"click"],["class","mt-3",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"value"],[1,"mt-3"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Frieght Expenses/Revenue"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"select",6),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.Typeid=e})),m["\u0275\u0275template"](12,Gi,2,2,"option",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",5),m["\u0275\u0275elementStart"](14,"select",6),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.actionTypeId=e})),m["\u0275\u0275template"](15,Bi,2,2,"option",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",5),m["\u0275\u0275elementStart"](17,"button",8),m["\u0275\u0275listener"]("click",(function(){return t.getExpenses()})),m["\u0275\u0275text"](18,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](19,Wi,2,2,"div",9),m["\u0275\u0275template"](20,Ki,3,0,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](21,"router-outlet")),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.Typeid),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.type),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.actionTypeId),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.actionTypes),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.data||!t.data.length))},directives:[p.s,p.v,p.r,me.a,ce.D,ce.r,ce.u,u.t,u.u,h.h,ce.w,ce.G,E.a],styles:['.submit-exp[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 15px;text-transform:capitalize;border-radius:3px}[_nghost-%COMP%]     .tableFixHead table thead tr th:last-child, [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(2), [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(3), [_nghost-%COMP%]     .tableFixHead table thead tr th:nth-last-child(4){width:80px}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i{font-size:16px;margin-right:8px}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit{color:#04a9f5}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-size:11px;font-weight:400;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span:before{content:"Save";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .tableFixHead table tbody tr td div i.fa-edit:hover span{display:block}']}),$i),Ji=r("SJoR");function Yi(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",19),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Zi,Qi=((Zi=function(){function e(t,n,a,o){i(this,e),this.apiService=t,this.common=n,this.DateService=a,this.user=o,this.sitesDatalist=[],this.siteName=null,this.siteId=null,this.data=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-7)),this.isFlag=1,this.bGConditions=[{key:"is_flag",value:1,class:"normal"},{key:"is_flag",value:2,class:"abnormal"}],this.getAllFoSites(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getAllFoSites()}},{key:"getAllFoSites",value:function(){var e=this;this.common.loading++,this.apiService.get("Site/getAllFoSites").subscribe((function(t){e.common.loading--,console.log(t),e.sitesDatalist=t.data}),(function(t){e.common.loading--,console.log(t)}))}},{key:"getReport",value:function(){var e,t=this;this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.data=[],e=2==this.isFlag?"Site/getLocalSiteInOutHistory":"Site/getSiteInAndOut";var n={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate),siteId:this.siteId};console.log(n),this.common.loading++,this.apiService.post(e,n).subscribe((function(e){t.common.loading--,console.log(e),t.data=e.data;var n=t.data[0];for(var a in n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:t.formatTitle(a),placeholder:t.formatTitle(a)};t.table.data.headings[a]=o}t.table.data.columns=t.getTableColumns()}),(function(e){t.common.loading--,console.log(e)}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.apiService.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getPDFFromTableId(e,n.data.name,"Site In And Out",["Action"],"","Site Name : "+t.siteName)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.apiService.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--,t.common.getCSVFromTableId(e,"Customer Name::"+n.data.name,"Report Name::Site In And Out",["Action"],"","Site Name ::"+t.siteName)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"changeRefernceType",value:function(e){var t=this;this.siteName=e.name,this.siteId=this.sitesDatalist.find((function(n){return console.log(n.name==e),t.isFlag=2==n.is_flag?2:1,n.id==e.id})).id}}]),e}()).\u0275fac=function(e){return new(e||Zi)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](Ji.a),m["\u0275\u0275directiveInject"](c.a))},Zi.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Zi,selectors:[["site-in-out"]],decls:29,vars:6,consts:[[2,"border","0px","height","100%"],[1,"row","align-items-center"],[1,"col-2"],["display","name","inputId","siteId",3,"data","bGConditions","onSelected"],[1,"col-1","pr-0"],[1,"col-3"],[1,"",3,"dateTimeValue","onChanged"],[1,"col-1"],[1,"",3,"dateTimeValue","isStart","onChanged"],[1,"col-1","p-0"],[1,"btn","btn-primary",3,"click"],[1,"col-1","text-right"],[1,"doc-icons"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"mt-2"],["id","siteInAndOut",3,"data","settings",4,"ngIf"],["id","siteInAndOut",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Site In And Out"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"auto-suggestion",3),m["\u0275\u0275listener"]("onSelected",(function(e){return t.changeRefernceType(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"label"),m["\u0275\u0275text"](10,"Start Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",5),m["\u0275\u0275elementStart"](12,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",7),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"End Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",5),m["\u0275\u0275elementStart"](17,"uj-date-time-picker",8),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",9),m["\u0275\u0275elementStart"](19,"button",10),m["\u0275\u0275listener"]("click",(function(){return t.getReport()})),m["\u0275\u0275text"](20,"Get Report"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",11),m["\u0275\u0275elementStart"](22,"span",12),m["\u0275\u0275elementStart"](23,"span",13),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("siteInAndOut")})),m["\u0275\u0275element"](24,"i",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"span",15),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("siteInAndOut")})),m["\u0275\u0275element"](26,"i",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",17),m["\u0275\u0275template"](28,Yi,1,2,"smart-table",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("data",t.sitesDatalist)("bGConditions",t.bGConditions),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("dateTimeValue",t.startDate),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1),m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,Ht.a,me.a,u.u,E.a],styles:[".btn-primary[_ngcontent-%COMP%]{width:100%;font-size:12px;padding:6px 0;border-radius:3px;text-transform:capitalize}.doc-icons[_ngcontent-%COMP%]{font-size:28px}.doc-icons[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{color:#e13017}.doc-icons[_ngcontent-%COMP%]   .exel-icon[_ngcontent-%COMP%]{color:#227849}[_nghost-%COMP%]  .abnormal{color:#0ff50f}"]}),Zi),Xi=r("Q+lQ"),er=r("tkEC"),tr=r("rBa8"),nr=r("Sg9u"),ar=r("2M/P");function or(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().invoice("Add",null)})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function ir(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function rr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var lr,sr=((lr=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.modalService=r,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.viewFreightInvoice(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.viewFreightInvoice()}},{key:"viewFreightInvoice",value:function(){var e=this;if(this.startTime&&this.endTime){var t={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};console.log("params",t),++this.common.loading,this.api.post("FrieghtRate/getInvoices",t).subscribe((function(t){if(--e.common.loading,e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};"Invoice Date"===a&&(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}else this.common.showError("Dates cannot be blank.")}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj["Follow Up"]={class:"",icons:e.invoiceIcon(n)},e.valobj.Action={class:"",icons:e.actionIcon(n)},t.push(e.valobj)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"actionIcon",value:function(e){var t=[];return e._islocked||(t.push({class:"far fa-eye",action:this.lrAssign.bind(this,e)}),this.user.permission.edit&&t.push({class:"far fa-edit",action:this.invoice.bind(this,"Edit",e)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteRow.bind(this,e)})),e._lrcount>0&&t.push({class:"fas fa-print",action:this.printInvoice.bind(this,e,e._invtype)},{class:"far fa-file",action:this.supportDoc.bind(this,e,e._invtype)},{class:"fa fa-inr",action:this.openFreightRateModal.bind(this,e,1)}),t}},{key:"invoiceIcon",value:function(e){var t=[];return 1==e._invtype&&e._lrcount>0&&t.push({class:"fa fa-plus",action:this.invoice.bind(this,"add",e,2)},{class:"fa fa-plus",action:this.invoice.bind(this,"add",e,3)}),t}},{key:"deleteRow",value:function(e){var t=this;console.log("row:",e);var n={id:e._id};e._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("FrieghtRate/deleteInvoices",n).subscribe((function(e){t.common.loading--,e.data[0].r_id?(t.common.showToast("Deleted successfully"),t.viewFreightInvoice()):t.common.showError(e.data[0].r_msg)}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"lrAssign",value:function(e){var t=this;this.common.handleModalSize("class","modal-lg","1300"),this.common.params={row:e},this.modalService.open(er.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Date:",e),e&&t.viewFreightInvoice()}))}},{key:"invoice",value:function(e,t,n){var a=this;this.common.params={invoiceDetail:{id:!!t&&t._id,type:n||1,title:e}},this.modalService.open(Xi.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e),a.viewFreightInvoice()}))}},{key:"printInvoice",value:function(e,t){this.common.params={previewData:{title:"Invoice",previewId:null,refId:e._id,refType:"FRINV"}},console.log("invoice",e),this.modalService.open(de.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"supportDoc",value:function(e,t){this.common.params={invoice:{id:e._id,type:t,typeId:e._invtype_id}},this.modalService.open(nr.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"lrInvoice",value:function(){this.modalService.open(tr.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"addFoField",value:function(){this.modalService.open(Vo.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e)}))}},{key:"openFreightRateModal",value:function(e,t){var n=this;this.common.params={invoice:{id:e._id,parentId:e._parentid}},this.modalService.open(ar.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e),n.viewFreightInvoice()}))}}]),e}()).\u0275fac=function(e){return new(e||lr)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},lr.\u0275cmp=m["\u0275\u0275defineComponent"]({type:lr,selectors:[["freight-invoices"]],decls:18,vars:8,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Freight invoices"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"button",6),m["\u0275\u0275listener"]("click",(function(){return t.viewFreightInvoice()})),m["\u0275\u0275text"](12,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",5),m["\u0275\u0275template"](14,or,2,0,"button",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div"),m["\u0275\u0275template"](16,ir,1,2,"smart-table",8),m["\u0275\u0275template"](17,rr,2,0,"div",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td i{width:18px;text-align:center;margin:4px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr{color:#ea3fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:before{content:"Rate";display:block;position:absolute;top:0;left:0;background-color:#ea3fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ea3fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:before{content:"Support Doc";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file:hover span{display:block}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),lr),dr=r("eHBT");function cr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",16),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var mr,pr=function(){return["empname","mobileno"]},hr=((mr=function(){function e(t,n,a){i(this,e),this.common=t,this.api=n,this.modalService=a,this.refId="",this.is_card=0,this.cardNo="",this.effDate=new Date,this.dataCardDetails="",this.date="",this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.getData(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getData()}},{key:"addDriverCard",value:function(){var e=this,t=this.common.dateFormatter(this.date),n={refId:this.refId,cardType:this.is_card,cardNo:this.cardNo,effDate:t};console.log("params",n),this.common.loading++,this.api.post("CardMapping/saveCardMappingDetails",n).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.common.showToast(t.msg),e.getData()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"checkdate",value:function(e){this.date=e}},{key:"getDriverId",value:function(e){console.log("event",e),this.refId=e.id,console.log("id",this.refId)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""},e.valobj.action={class:"",icons:e.actionIcons(n)};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[];return t.push({class:"fa fa-trash",action:this.remove.bind(this,e)}),t}},{key:"remove",value:function(e){var t=this;console.log("row",e);var n={rowId:e._id};e._id&&(console.log("id",e._id),this.common.params={title:"Delete Route ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("CardMapping/deleteCardMappingDetail",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),t.refId="",t.is_card=0,t.cardNo="",t.effDate=new Date,t.getData()}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"getData",value:function(){var e=this;this.data=[],console.log("ap"),this.api.get("CardMapping/getCardMappingDetails").subscribe((function(t){e.data=t.data,console.log("result",t);var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}var i={title:e.formatTitle("Action"),placeholder:e.formatTitle("Action"),hideSearch:!0};e.table.data.headings.action=i,e.table.data.columns=e.getTableColumns()}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}()).\u0275fac=function(e){return new(e||mr)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r))},mr.\u0275cmp=m["\u0275\u0275defineComponent"]({type:mr,selectors:[["card-mapping"]],decls:31,vars:7,consts:[[2,"border","0px","height","100%"],[1,"row","mb-3"],[1,"col-2"],["url","Suggestion/getDriverName","seperator","-","placeholder","Driver Name",2,"width","60%",3,"display","onSelected"],[3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["type","text","placeholder","card no",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4"],[3,"dateTimeValue","isTime","onChanged"],["type","button",1,"btn","btn-primary",3,"click"],["id","cardMapping",3,"data","settings",4,"ngIf"],["id","cardMapping",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Card Mapping"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"auto-suggestion",3),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getDriverId(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"select",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.is_card=e})),m["\u0275\u0275elementStart"](10,"option",5),m["\u0275\u0275text"](11,"Select Card Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",6),m["\u0275\u0275text"](13,"IOCL"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"option",7),m["\u0275\u0275text"](15,"BPCL"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"option",8),m["\u0275\u0275text"](17,"Hapay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"option",9),m["\u0275\u0275text"](19,"Toll"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"option",10),m["\u0275\u0275text"](21,"HPCL"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",2),m["\u0275\u0275elementStart"](23,"input",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.cardNo=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",12),m["\u0275\u0275elementStart"](25,"uj-date-time-picker",13),m["\u0275\u0275listener"]("onChanged",(function(e){return t.checkdate(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"div",2),m["\u0275\u0275elementStart"](27,"button",14),m["\u0275\u0275listener"]("click",(function(){return t.addDriverCard()})),m["\u0275\u0275text"](28,"SAVE"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"div"),m["\u0275\u0275template"](30,cr,1,2,"smart-table",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("display",m["\u0275\u0275pureFunction0"](6,pr)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.is_card),m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngModel",t.cardNo),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.date)("isTime",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,Ht.a,ce.D,ce.r,ce.u,ce.w,ce.G,ce.d,me.a,u.u,E.a],styles:[""]}),mr),gr=r("1jZA"),ur=r("yd97");function fr(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",13),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().addTransfer()})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function br(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",17),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function vr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",18),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var xr,yr=((xr=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.modalService=r,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.transferType=-1,this.ledgerId="",this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.viewTransfer()}},{key:"ledger",value:function(e){this.ledgerId=e.id}},{key:"viewTransfer",value:function(){var e=this,t="startTime="+this.common.dateFormatter(this.startTime)+"&endTime="+this.common.dateFormatter(this.endTime)+"&ledgerId="+this.ledgerId+"&transferType="+this.transferType;++this.common.loading,this.api.get("FrieghtRate/getTransfers?"+t).subscribe((function(t){if(--e.common.loading,e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};"Time"===a&&(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)"Action"==e.headings[a]?e.valobj[e.headings[a]]={value:"",action:null,isHTML:!1,icons:e.actionIcons(n)}:"Credit To"==e.headings[a]?(console.log("test",e.headings[a]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openViewTransfer.bind(e,n._cr_ledgerid,n[e.headings[a]],"Credit To")}):"Debit To"==e.headings[a]?e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"blue",action:e.openViewTransfer.bind(e,n._dr_ledgerid,n[e.headings[a]],"Debit To")}:(console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""});t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){var t=[{class:"fas fa-gas-pump",action:this.editFuelFilling.bind(this,e)}];return this.user.permission.edit&&t.push({class:e._islocked?"":"fas fa-edit",action:this.editTransfer.bind(this,e._id)}),this.user.permission.delete&&t.push({class:e._islocked?"":"fa fa-trash",action:this.deleteTransfer.bind(this,e)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"addTransfer",value:function(){var e=this;this.common.params={refData:null},this.modalService.open(Ui.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(t){console.log("Date:",t),e.viewTransfer()}))}},{key:"editTransfer",value:function(e){var t=this;this.common.params={refData:{transferId:e}},this.modalService.open(Ui.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e),t.viewTransfer()}))}},{key:"editFuelFilling",value:function(e){var t=this;if(null==e._vid)return this.common.showError("Vehichel id does not exist");this.common.params={info:e},this.modalService.open(ur.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e),t.viewTransfer()}))}},{key:"openViewTransfer",value:function(e,t,n){console.log("Id",e),console.log("Title:",t),console.log("ledgerType:",n),this.common.params={ledgerId:e,title:t,ledgerType:n},this.modalService.open(gr.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}},{key:"deleteTransfer",value:function(e){var t=this;console.log("row",e);var n={id:e._id};e._id&&(this.common.params={title:"Delete Transfer ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("FrieghtRate/deleteTransfers",n).subscribe((function(e){t.common.loading--,e.data[0].y_id>0?(t.common.showToast("Success"),t.viewTransfer()):t.common.showError(e.data[0].y_msg)}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}}]),e}()).\u0275fac=function(e){return new(e||xr)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},xr.\u0275cmp=m["\u0275\u0275defineComponent"]({type:xr,selectors:[["transfers"]],decls:34,vars:13,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-1",2,"text-align","right"],[1,"col-2"],[1,"search",2,"display","inline-block"],["url","Suggestion/GetPurchaseLedger","display","name","placeholder","Search",3,"preSelected","onSelected"],[2,"display","inline-block"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[1,"col-md-3"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Transfer"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"label"),m["\u0275\u0275text"](12,"Ledger"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",6),m["\u0275\u0275elementStart"](14,"div",7),m["\u0275\u0275elementStart"](15,"auto-suggestion",8),m["\u0275\u0275listener"]("onSelected",(function(e){return t.ledger(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",6),m["\u0275\u0275elementStart"](17,"label"),m["\u0275\u0275text"](18,"Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",9),m["\u0275\u0275elementStart"](20,"select",10),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.transferType=e})),m["\u0275\u0275elementStart"](21,"option",11),m["\u0275\u0275text"](22,"Transfer"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"option",11),m["\u0275\u0275text"](24,"Receipt"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"option",11),m["\u0275\u0275text"](26,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",12),m["\u0275\u0275elementStart"](28,"button",13),m["\u0275\u0275listener"]("click",(function(){return t.viewTransfer()})),m["\u0275\u0275text"](29,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](30,fr,2,0,"button",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"div"),m["\u0275\u0275template"](32,br,1,2,"smart-table",15),m["\u0275\u0275template"](33,vr,2,0,"div",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.transferType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("value",1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("value",0),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("value",-1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[p.s,p.v,p.r,me.a,Ht.a,ce.D,ce.r,ce.u,ce.w,ce.G,u.u,E.a],styles:['[_nghost-%COMP%]     .fa-trash{color:red}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}.search[_ngcontent-%COMP%]{width:auto}[_nghost-%COMP%]     .blue{color:#00f;text-decoration:underline}[_nghost-%COMP%]     .fa-gas-pump{color:#760dbb;margin-left:4px}[_nghost-%COMP%]     .fa-gas-pump span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-gas-pump span:before{display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-gas-pump span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-gas-pump:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),xr);function Cr(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",21),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.description)}}function _r(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",22),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().submitPolygon()})),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.site.name)}}function Sr(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",23),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().cancelMapServices()})),m["\u0275\u0275text"](1,"Cancel"),m["\u0275\u0275elementEnd"]()}}function Mr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",24),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var kr,wr=function(e){return{location:e}},Or=((kr=function(){function e(t,n,a,o){i(this,e),this.common=t,this.api=n,this.mapService=a,this.user=o,this.table=null,this.showTable=!1,this.LatLongData=null,this.path="",this.companyId=null,this.Sites=[],this.site={sitename:null,sitetype:1,name:null,id:null},this.remainingList=[],this.circle=null,this.routeId=null,this.siteLatLng={lat:0,lng:90},this.typeId=1,this.siteLoc="",this.siteName=null,this.tempData=[],this.isUpdate=!1,this.mergeSiteId=null,this.position=null,this.final=null,this.meterRadius=20,this.lat=null,this.long=null,this.isHeatAble=!1,this.kmsShow=null,this.Location=null,this.typeIds=[{description:"loading/unloading",id:"1"},{description:"Petrol Pump",id:"101"},{description:"Dhaba",id:"111"},{description:"My Office Site",id:"121"},{description:"Workshop",id:"131"},{description:"otherSite",id:"201"}],this.typeID=null,this.companySites(),this.site.name="Add",this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.companySites()}},{key:"ngAfterViewInit",value:function(){var e=this;this.mapService.mapIntialize("map",10),setTimeout((function(){e.mapService.setMapType(0)}),2e3),this.mapService.isDrawAllow=!0,this.mapService.createPolygonPath(),this.mapService.addListerner(this.mapService.map,"click",(function(t){e.mapService.isDrawAllow&&console.log("Event",t)}))}},{key:"submitPolygon",value:function(){var e=this;if(this.mapService.polygonPath){this.path="(";var t=this.mapService.polygonPath.getPath().getArray();if(t.length<4)return this.common.showError("Site Should Have More Than 3 points Atleast"),void(this.mapService.isDrawAllow=!0);for(var n=0;n<t.length;n++)this.lat=t[n].lat(),this.long=t[n].lng(),this.path+=t[n].lat()+" "+t[n].lng()+",";this.path+=t[0].lat()+" "+t[0].lng()+",",this.path=this.path.substr(0,this.path.length-1),this.path+=")",console.log("latlong:",this.path)}if(""==this.site.sitename)this.common.showError("Please fill Site Name.");else{var a={siteId:this.site.id,siteName:this.site.sitename,polygon:this.path,siteLoc:this.Location,typeId:this.typeID},o=this.site.id?"SiteFencing/updateSiteFence":"SiteFencing/createSiteAndFenceWrtFo";this.common.loading++,this.api.post(o,a).subscribe((function(t){e.common.loading--,console.log("Success:",t),t.code>0&&(e.common.showToast("success!!"),e.mapService.clearAll(),e.site.name="Add",e.Location=null,e.typeID=null,e.site.sitename="",e.companySites()),t.code<0&&(e.common.showError(t.msg),e.companySites())}),(function(t){e.common.loading--,console.log(t)}))}}},{key:"clearMapServices",value:function(){"Update"==this.site.name?(this.mapService.resetPolygons(),this.mapService.clearAll(),this.path=""):this.mapService.clearAll()}},{key:"cancelMapServices",value:function(){this.site.sitename="",this.path="",this.site.id="",this.mapService.resetPolygons(),this.site.name="Add",this.Location=null,document.getElementById("location").value="",this.typeID=null}},{key:"companySites",value:function(){var e=this;this.mapService.clearAll(),this.common.loading++,this.api.get("SiteFencing/getLocalFoSites").subscribe((function(t){e.common.loading--,console.log(t),e.Sites=t.data,null!=e.Sites?(e.showTable=!0,e.table=e.setTable()):(e.showTable=!1,e.common.showToast("Record Not Found!!"))}),(function(t){e.common.loading--,console.log(t)}))}},{key:"showdata",value:function(e){console.log("Data",e),this.path=e.fences,this.mapService.resetPolygons();var t=e.latlongs;this.mapService.setMultiBounds(t,!0);for(var n=0;n<t.length;n++){var a=t[n];t[n]={lat:a.lat,lng:a.lng}}var o=[{data:t,isMain:!0,isSec:!1,show:e.name}];this.site.name="Update",this.site.sitename=e.name,this.site.sitetype=e.type,this.site.id=e.id,this.Location=e.loc_name,this.typeID=e._type_id,this.mapService.resetPolygons(),this.mapService.createPolygons(o)}},{key:"setTable",value:function(){return{data:{headings:{name:{title:"Site Name",placeholder:"Site Name"},loc_name:{title:"Loc Name",placeholder:"Loc Name"},Type:{title:"SiteType",placeholder:"SiteType"},Delete:{title:"Delete",placeholder:"Delete",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"auto"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.Sites.map((function(n){var a={name:{value:n.name,action:e.showdata.bind(e,n)},loc_name:{value:n.loc_name,action:e.showdata.bind(e,n)},Type:{value:n.Type,action:e.showdata.bind(e,n)},Delete:e.user.permission.delete&&{value:'<i class="fa fa-trash text-danger"></i>',isHTML:!0,action:e.deleteRecord.bind(e,n),class:"icon text-center del"},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"deleteRecord",value:function(e){var t=this;if(confirm("do you really want to delete this Site: "+e.name+"?")){var n={rowId:e.id};this.mapService.clearAll(),this.common.loading++,this.api.post("SiteFencing/deleteSiteAndFenceWrtFo",n).subscribe((function(e){t.common.loading--,console.log(e),t.Sites=e.data,e.code>0?(t.common.showToast("site deleted !!"),t.companySites()):t.common.showError(e.msg)}),(function(e){t.common.loading--,t.common.showError(e),console.log(e)}))}}},{key:"selectLocation",value:function(e){console.log(e),this.Location=e&&e.location?e.location:null,this.Location&&this.mapService.zoomAt(this.mapService.createLatLng(e.lat,e.long),12)}},{key:"getLatLng",value:function(){if(!this.Location){var e=document.getElementById("moveto").value;console.log("ltlngString",e);var t=e.split(",")[0],n=e.split(",")[1];console.log("lat,lng",t,n),this.mapService.zoomAt(this.mapService.createLatLng(t,n),18)}}}]),e}()).\u0275fac=function(e){return new(e||kr)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](Ee.a),m["\u0275\u0275directiveInject"](c.a))},kr.\u0275cmp=m["\u0275\u0275defineComponent"]({type:kr,selectors:[["sites"]],decls:49,vars:12,consts:[[1,"body-box"],[1,"row"],[1,"col-4",2,"border-left","solid","border-top","solid","border-bottom","solid","border-right","solid","border-width","2px","border-color","lightgrey","padding","10px","border-radius","3px"],[1,"form-group"],[1,"col-4","display"],[2,"color","red","font-size","15px"],[1,"col-8","display"],["type","text","placeholder","Site Name",2,"width","100%",3,"ngModel","ngModelChange"],["url","Location/getPlaceFromRedis?","display","location","inputId","location","placeholder","Location",3,"preSelected","onSelected"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12",2,"text-align","center"],["type","submit","class","btn btn-success pt-2 pb-2 rounded-sm mr-3 text-capitalize",3,"click",4,"ngIf"],["type","submit","class","btn btn-warning pt-2 pb-2 rounded-sm mr-3 text-capitalize",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["url","Location/getPlaceFromRedis?","display","location","inputId","moveto","placeholder","Location",3,"preSelected","onSelected","focusout"],[1,"col-12"],[2,"background-color","#dad4d4","height","1px","width","100%"],["style","height:27vh!important;overflow-y:scroll!important;","id","verifyState",3,"data","settings",4,"ngIf"],[1,"col-8"],["id","map",2,"width","100%","height","75vh"],[3,"value"],["type","submit",1,"btn","btn-success","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["type","submit",1,"btn","btn-warning","pt-2","pb-2","rounded-sm","mr-3","text-capitalize",3,"click"],["id","verifyState",2,"height","27vh!important","overflow-y","scroll!important",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Sites"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",0),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275elementStart"](8,"div",3),m["\u0275\u0275elementStart"](9,"div",4),m["\u0275\u0275elementStart"](10,"label"),m["\u0275\u0275text"](11,"SiteName"),m["\u0275\u0275elementStart"](12,"span",5),m["\u0275\u0275text"](13,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",6),m["\u0275\u0275elementStart"](15,"input",7),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.site.sitename=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",3),m["\u0275\u0275elementStart"](17,"div",4),m["\u0275\u0275elementStart"](18,"label"),m["\u0275\u0275text"](19,"Location Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",6),m["\u0275\u0275elementStart"](21,"auto-suggestion",8),m["\u0275\u0275listener"]("onSelected",(function(e){return t.selectLocation(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",3),m["\u0275\u0275elementStart"](23,"div",4),m["\u0275\u0275elementStart"](24,"label"),m["\u0275\u0275text"](25,"Site Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"div",6),m["\u0275\u0275elementStart"](27,"select",9),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.typeID=e})),m["\u0275\u0275template"](28,Cr,2,2,"option",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"div",3),m["\u0275\u0275elementStart"](30,"div",11),m["\u0275\u0275template"](31,_r,2,1,"button",12),m["\u0275\u0275template"](32,Sr,2,0,"button",13),m["\u0275\u0275elementStart"](33,"button",14),m["\u0275\u0275listener"]("click",(function(){return t.clearMapServices()})),m["\u0275\u0275text"](34,"Clear"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"div",3),m["\u0275\u0275elementStart"](36,"div",4),m["\u0275\u0275elementStart"](37,"label"),m["\u0275\u0275text"](38,"Move To"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"div",6),m["\u0275\u0275elementStart"](40,"auto-suggestion",15),m["\u0275\u0275listener"]("onSelected",(function(e){return t.selectLocation(e)}))("focusout",(function(){return t.getLatLng()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"div",3),m["\u0275\u0275elementStart"](42,"div",16),m["\u0275\u0275element"](43,"hr",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](44,"div",3),m["\u0275\u0275elementStart"](45,"div",16),m["\u0275\u0275template"](46,Mr,1,2,"smart-table",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"div",19),m["\u0275\u0275element"](48,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngModel",t.site.sitename),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("preSelected",t.site.id?m["\u0275\u0275pureFunction1"](8,wr,t.Location):""),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.typeID),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.typeIds),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","Update"==t.site.name),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("preSelected",t.site.id?m["\u0275\u0275pureFunction1"](10,wr,t.Location):""),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",t.Sites.length>0))},directives:[p.s,p.v,p.r,ce.d,ce.r,ce.u,Ht.a,ce.D,u.t,u.u,ce.w,ce.G,E.a],styles:[".display[_ngcontent-%COMP%]{display:inline-block}.mrgn[_ngcontent-%COMP%]{margin-top:5px}.btnstyle[_ngcontent-%COMP%]{background-color:transparent;border:none}.icon[_ngcontent-%COMP%]{font-size:30px!important;padding-left:34%!important}.tag[_ngcontent-%COMP%], [_nghost-%COMP%]     .no-search span{color:#000}[_nghost-%COMP%]     .tableFixHead{max-height:calc(100vh - 472px)}"]}),kr),Pr=r("vHBT"),Er=r("EXPs");function Tr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",2),m["\u0275\u0275text"](1," No Data Available On That Time Period ! "),m["\u0275\u0275elementEnd"]())}function Dr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",3),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ir,Fr=((Ir=function(){function e(t,n,a,o){i(this,e),this.api=t,this.activeModal=n,this.modalService=a,this.common=o,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.recoveries=[],this.getRecoveries(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getRecoveries()}},{key:"getRecoveries",value:function(){var e=this;this.common.loading++,this.api.get("FinanceRecovery/getOutstandingCredit?branchId=0&accGroupId=0&ledgerId=0").subscribe((function(t){e.common.loading--,console.log("Res:",t),e.recoveries=t.data||[],e.setTable()}),(function(t){e.common.loading--,e.common.showError(),console.log("Error:",t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(),columns:this.genearateColumns()}}},{key:"generateHeadings",value:function(){var e={};for(var t in this.recoveries[0])"_"!=t.charAt(0)&&(e[t]={title:this.formatTitle(t),placeholder:this.formatTitle(t)});return e}},{key:"genearateColumns",value:function(){var e=this,t=[];return this.recoveries.map((function(n){var a={};for(var o in e.generateHeadings())if("Action"==o)a.Action={class:"fas fa-eye",action:e.showAction.bind(e,n._ledid)};else if("View Contacts"==o)a[o]={value:"show",class:"Black"==n._cc?"black":"Red"==n._cc?"red":"Blue"==n._cc?"blue":"Green"==n._cc?"green":"Light Green"==n._cc?"lightGreen":"Purple"==n._cc?"purple":"Yellow"==n._cc?"yellow":"",action:e.customerMobileNo.bind(e)};else if("ledgername"==o){var i=[{class:"fa fa-bell",action:e.customerResponse.bind(e)},{txt:n[o],action:e.customerResponse.bind(e)}];1!=n._reminderflag&&i.splice(0,1),a[o]={class:"Black"==n._cc?"black":"Red"==n._cc?"red":"Blue"==n._cc?"blue":"Green"==n._cc?"green":"Light Green"==n._cc?"lightGreen":"Purple"==n._cc?"purple":"Yellow"==n._cc?"yellow":"",icons:i}}else a[o]={value:n[o],class:"Black"==n._cc?"black":"Red"==n._cc?"red":"Blue"==n._cc?"blue":"Green"==n._cc?"green":"Light Green"==n._cc?"lightGreen":"Purple"==n._cc?"purple":"Yellow"==n._cc?"yellow":"",action:""};t.push(a)})),t}},{key:"customerResponse",value:function(){this.common.params={data:{title:"Customer Response",type:"radio",apiData:null,radio1:"Not Picking The Phone",radio2:"Switch Off",radio3:"Highly Negative Response",btn1:"Cancel",btn2:"Submit"}},this.modalService.open(Er.a,{container:"nb-layout",size:"sm",backdrop:"static"})}},{key:"customerMobileNo",value:function(){var e=this,t={title:"User mobile",type:"text",apiData:null};this.api.get("FinanceRecovery/getCompanyContacts").subscribe((function(n){console.log("res",n.data),t.apiData=n.data[0].MobileNo,console.log("data api",t.apiData),e.common.params={data:t},e.modalService.open(Er.a,{container:"nb-layout",size:"sm",backdrop:"static"})}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"showAction",value:function(e){var t=this;this.common.params={ledgerId:e},console.log("params",this.common.params),this.modalService.open(Pr.a,{container:"nb-layout"}).result.then((function(e){console.log("res",e),t.getRecoveries()}))}}]),e}()).\u0275fac=function(e){return new(e||Ir)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a))},Ir.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ir,selectors:[["finance-recovery"]],decls:8,vars:2,consts:[["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Finance Recovery"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275template"](5,Tr,2,0,"div",0),m["\u0275\u0275elementStart"](6,"div"),m["\u0275\u0275template"](7,Dr,1,2,"smart-table",1),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",0==t.recoveries.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.recoveries.length>0))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).blue{color:#00f;font-weight:700}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).black, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).black{color:#fff;background-color:#000}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).red, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).red{color:#fff;background-color:red}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).pink, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).pink{color:#fff;background-color:pink}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).green, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).green{color:#fff;background-color:green}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).lightGreen, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).lightGreen{color:#fff;background-color:#90ee90}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).blue, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).blue{color:#fff;background-color:#00f}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).purple, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).purple{color:#fff;background-color:purple}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(2).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5).yellow, [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(6).yellow{color:#fff;background-color:#ff0}[_nghost-%COMP%]     .tableFixHead table tr td.fa-check{font-family:FontAwesome}[_nghost-%COMP%]     .tableFixHead table tr .fa-bell .zoom{display:inline-block;margin-left:10px;font-weight:700;padding:5px 0;font-size:14px;font-family:Poppins,sans-serif!important}"]}),Ir),Ar=r("3Wbk"),Vr=r("enZy");function Lr(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",16),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.y_id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.y_groupname," ")}}function zr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",17),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var jr,Rr=((jr=function(){function e(t,n,a){i(this,e),this.api=t,this.modalService=n,this.common=a,this.assType=null,this.searchValue="",this.searchString="",this.associationType=[],this.companyId=null,this.companyName=null,this.companyExist=!1,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.refresh(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getAssociationType()}},{key:"getAssociationType",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/getAssocTypeWrtFo").subscribe((function(t){e.common.loading--,e.associationType=t.data}),(function(t){e.common.loading--}))}},{key:"checkCompany",value:function(){var e=this;this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.api.get("ManageParty/checkCompany").subscribe((function(t){t.data&&t.data.length?(e.companyExist=!0,e.companyId=t.data[0].company_id,e.companyName=t.data[0].Company):(e.companyExist=!1,e.common.showError("please add company")),console.log("para",e.companyId,e.companyName,t.data),console.log(t)}),(function(e){}))}},{key:"getCmpAssocWrtType",value:function(){var e=this,t="assocType="+this.assType+"&searchValue="+this.searchValue+"&searchString="+this.searchString;console.log("pod",t),this.common.loading++,this.api.get("ManageParty/getCmpAssocWrtType?"+t).subscribe((function(t){if(e.common.loading--,null==t.data)return e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],void(e.valobj={});if(e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("Api Response:",t)}}),(function(t){e.common.loading--,console.error("Api Error:",t)}))}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("Type",e.headings[a]),console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]="Action"==e.headings[a]?{value:"",action:null,icons:[{class:"fa fa-edit",action:e.addNewParty.bind(e,"Edit",n)},{class:"fab fa-reddit",action:e.partyMapping.bind(e,n)},{class:"fa fa-trash",action:e.deleteParty.bind(e,n)}]}:{value:n[e.headings[a]],class:"black",action:""};t.push(e.valobj)})),t}},{key:"addNewParty",value:function(e,t){console.log("TESTING"),this.common.params={cmpId:this.companyId,cmpName:this.companyName,associationType:this.assType,refName:e},t&&(this.common.params.cmpAssocDetail=t),console.log("add",this.common.params),this.modalService.open(Ar.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"add-consige-veiw"})}},{key:"partyMapping",value:function(e){var t=this;null==e._ledid?(this.common.params={partyId:e._id,userGroupId:e._asstype},this.modalService.open(Vr.a,{size:"lg",container:"nb-layout"}).result.then((function(e){e&&t.getCmpAssocWrtType()}))):this.common.showToast("Ledger Already Mapped")}},{key:"deleteParty",value:function(e){var t=this,n={assocId:e._id};e._id&&(this.common.params={title:"Delete Party ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("ManageParty/deletePartyAssociation",n).subscribe((function(e){console.log("Api Response:",e),t.common.showToast(e.msg),t.getCmpAssocWrtType(),t.common.loading--}),(function(e){return console.error(" Api Error:",e)})))})))}}]),e}()).\u0275fac=function(e){return new(e||jr)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a))},jr.\u0275cmp=m["\u0275\u0275defineComponent"]({type:jr,selectors:[["manage-fo-party"]],decls:36,vars:5,consts:[[1,"company-association"],[1,"row"],[1,"col-2"],["name","dropdown","id","dropdown",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2","ml-2"],[1,"form-control",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","name"],["value","gst"],["value","pan "],["value","ledgername"],["type","text","autocomplete","off","name","searchValue",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-2","text-right"],[1,"row","mt-2"],["id","companyBranch",3,"data","settings",4,"ngIf"],[3,"value"],["id","companyBranch",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Manage Party"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",0),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"div",2),m["\u0275\u0275elementStart"](8,"label"),m["\u0275\u0275text"](9,"Association Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"select",3),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.assType=e})),m["\u0275\u0275template"](11,Lr,2,2,"option",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",5),m["\u0275\u0275elementStart"](13,"label"),m["\u0275\u0275text"](14,"Search String"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"select",6),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchString=e})),m["\u0275\u0275elementStart"](16,"option",7),m["\u0275\u0275text"](17,"Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"option",8),m["\u0275\u0275text"](19,"GST No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"option",9),m["\u0275\u0275text"](21,"PAN No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"option",10),m["\u0275\u0275text"](23,"Ledger"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",5),m["\u0275\u0275elementStart"](25,"label"),m["\u0275\u0275text"](26,"Search Value"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"input",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchValue=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"div",2),m["\u0275\u0275elementStart"](29,"button",12),m["\u0275\u0275listener"]("click",(function(){return t.getCmpAssocWrtType()})),m["\u0275\u0275text"](30,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"div",13),m["\u0275\u0275elementStart"](32,"button",12),m["\u0275\u0275listener"]("click",(function(){return t.addNewParty("Add")})),m["\u0275\u0275text"](33,"ADD NEW PARTY"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"div",14),m["\u0275\u0275template"](35,zr,1,2,"smart-table",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("ngModel",t.assType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.associationType),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngModel",t.searchString),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngModel",t.searchValue),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length))},directives:[p.s,p.v,p.r,ce.D,ce.r,ce.u,u.t,ce.w,ce.G,ce.d,u.u,E.a],styles:['[_nghost-%COMP%]     td i.fa-edit{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative;margin-right:5px}[_nghost-%COMP%]     td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     td i.fa-edit span{position:absolute;display:none;padding:11px 57px;left:-44px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-edit span:before{content:"Edit Party Details";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-reddit{background-color:#82c91e;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-reddit:hover span{display:block}[_nghost-%COMP%]     td i.fa-reddit span{position:absolute;display:none;padding:11px 70px;left:-59px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-reddit span:before{content:"Party Ledger Mapping";display:block;position:absolute;top:0;left:0;background-color:#82c91e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-reddit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #82c91e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-trash{color:red;font-size:18px;margin-left:6px}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 33px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}']}),jr),Hr=r("mdFJ"),Nr=r("4zcd"),Ur=r("kZSg"),Gr=r("U79Z");function Br(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).addFuelRule()})),m["\u0275\u0275text"](1,"Add Rule"),m["\u0275\u0275elementEnd"]()}}function Wr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function Kr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function $r(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",5),m["\u0275\u0275template"](2,Br,2,0,"button",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"div",7),m["\u0275\u0275template"](4,Wr,1,2,"smart-table",8),m["\u0275\u0275template"](5,Kr,2,0,"div",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",n.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",n.fuelNorms&&n.fuelNorms.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.fuelNorms.length)}}function qr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.table1.data)("settings",n.table1.settings)}}function Jr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}function Yr(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275elementStart"](2,"div",14),m["\u0275\u0275elementStart"](3,"auto-suggestion",15),m["\u0275\u0275listener"]("onSelected",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getFs(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",5),m["\u0275\u0275elementStart"](5,"button",16),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().addFoFsMapping()})),m["\u0275\u0275text"](6,"Add"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",7),m["\u0275\u0275template"](8,qr,1,2,"smart-table",8),m["\u0275\u0275template"](9,Jr,2,0,"div",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",a.foFsMapping.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==a.foFsMapping.length)}}function Zr(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).addFuelAvg()})),m["\u0275\u0275text"](1,"Add Model Fuel Mileage"),m["\u0275\u0275elementEnd"]()}}function Qr(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data Available On That Time Period ! "),m["\u0275\u0275elementEnd"]())}function Xr(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("data",n.fuelTable.data)("settings",n.fuelTable.settings)}}function el(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275elementStart"](2,"div",17),m["\u0275\u0275template"](3,Zr,2,0,"button",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](4,"br"),m["\u0275\u0275template"](5,Qr,2,0,"div",9),m["\u0275\u0275elementStart"](6,"div"),m["\u0275\u0275template"](7,Xr,1,2,"smart-table",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",n.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0==n.fuelAvg.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",n.fuelAvg.length>0)}}var tl,nl=((tl=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.fuelAvg=[],this.fuelTable={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.fuelHeadings=[],this.fuelValobj={},this.table=null,this.fuelNorms=[],this.table1=null,this.foFsMapping=[],this.fsid=null,this.foid=null,this.fuelData=[],this.vehicleId=null,this.activeTab="Credit Fuel Station",this.common.refresh=this.refresh.bind(this),this.getFuelNorms(),this.getFoFsMapping(),this.getFuelAvg()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getFuelNorms(),this.getFoFsMapping(),this.getFuelAvg()}},{key:"addFuelRule",value:function(){var e=this;this.common.params={},this.modalService.open(Ur.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getFuelNorms()}))}},{key:"getFuelNorms",value:function(){var e=this;this.fuelNorms=[],this.common.loading++,this.api.get("Fuel/getFuelFullNorms").subscribe((function(t){e.common.loading--,console.log("res",t.data),e.fuelNorms=t.data||[],e.table=e.setTable()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"setTable",value:function(){return{data:{headings:{FoName:{title:"Fo Name",placeholder:"Fo Name"},RuleType:{title:"Rule Type ",placeholder:"Rule Type"},Name:{title:"Name ",placeholder:"Name"},AngleFrom:{title:"Angle From ",placeholder:"Angle From"},AngleTo:{title:"Angle To ",placeholder:"Angle To"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.fuelNorms.map((function(n){var a={FoName:{value:n.fo_name},RuleType:{value:n.type},Name:{value:n.name},AngleFrom:{value:n.angle_from},AngleTo:{value:n.angle_to},action:{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"actionIcons",value:function(e){var t=[];return this.user.permission.edit&&t.push({class:"far fa-edit",action:this.updateRule.bind(this,e)}),this.user.permission.delete&&t.push({class:" fa fa-trash-alt",action:this.deleteRule.bind(this,e)}),t}},{key:"updateRule",value:function(e){var t=this;this.common.params={title:"Edit Fuel Rule",rule:e},this.modalService.open(Ur.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getFuelNorms()}))}},{key:"deleteRule",value:function(e){var t=this;if(window.confirm("Are You Want Delete Record")){var n={rowid:e.id};console.log("params",n),this.common.loading++,this.api.post("Fuel/deleteRule",n).subscribe((function(e){t.common.loading--;var n=e.data;console.log("data:"),console.log(n),t.common.showToast(e.msg),t.getFuelNorms()}),(function(e){t.common.loading--,console.log(e)}))}}},{key:"getFoFsMapping",value:function(){var e=this;this.common.loading++,this.api.get("Fuel/getFoFsMapping").subscribe((function(t){e.common.loading--,console.log("res",t.data),e.foFsMapping=t.data||[],e.table1=e.setTable1()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"addFoFsMapping",value:function(){var e=this;if(this.fsid){var t={foid:null,fsid:this.fsid};this.common.loading++,this.api.post("Fuel/insertFoFsMapping",t).subscribe((function(t){e.common.loading--,console.log("res",t.data),e.common.showToast(t.msg),t.success&&e.getFoFsMapping()}),(function(t){e.common.loading--,e.common.showError()}))}else this.common.showToast("Fuel Station Is Missing")}},{key:"getFo",value:function(e){this.foid=e.id}},{key:"getFs",value:function(e){this.fsid=e.id}},{key:"setTable1",value:function(){return{data:{headings:{StationName:{title:"Station Name",placeholder:"Station Name"},SiteName:{title:"Site Name",placeholder:"Site Name"},Location:{title:"Location",placeholder:"Location"},action:{title:"Action ",placeholder:"Action",hideSearch:!0,class:"tag"}},columns:this.getTableColumns1()},settings:{hideHeader:!0,tableHeight:"72vh"}}}},{key:"getTableColumns1",value:function(){var e=this,t=[];return this.foFsMapping.map((function(n){var a={StationName:{value:n.station_name},SiteName:{value:n.site_name},Location:{value:n.location},action:{value:"",isHTML:!1,action:null,icons:[e.user.permission.delete&&{class:" fa fa-trash-alt",action:e.deleteMapping.bind(e,n)}]},rowActions:{click:"selectRow"}};t.push(a)})),t}},{key:"deleteMapping",value:function(e){var t=this,n={rowid:e.id};console.log("rowid",n),this.common.loading++,this.api.post("Fuel/deleteFoFsMapping",n).subscribe((function(e){t.common.loading--,t.common.showToast(e.msg),e.success&&t.getFoFsMapping()}),(function(e){t.common.loading--,t.common.showError()}))}},{key:"addFuelAvg",value:function(){var e=this;this.common.params={row:null,load:null,unload:null,vehicle:null},this.modalService.open(Gr.a,{container:"nb-layout",backdrop:"static"}).result.then((function(t){e.getFuelAvg()}))}},{key:"getFuelAvg",value:function(){var e=this;this.fuelAvg=[],this.fuelTable={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.fuelHeadings=[],this.fuelValobj={},this.common.loading++,this.api.get("Fuel/getModelWiseFuelAvgWrtFo").subscribe((function(t){e.common.loading--,e.fuelAvg=[],e.fuelAvg=t.data||[],console.log("result",t);var n=e.fuelAvg[0];for(var a in n)if("_"!=a.charAt(0)){e.fuelHeadings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.fuelTable.data.headings[a]=o}e.fuelTable.data.columns=e.getTableFuelColumns()}))}},{key:"getTableFuelColumns",value:function(){var e=this,t=[];return console.log("Data=",this.fuelAvg),this.fuelAvg.map((function(n){e.fuelValobj={};for(var a=0;a<e.fuelHeadings.length;a++)console.log("doc index value:",n[e.fuelHeadings[a]]),"Action"==e.fuelHeadings[a]?e.fuelValobj.Action={value:"",action:null,icons:e.actionIcon(n)}:e.fuelValobj[e.fuelHeadings[a]]={value:n[e.fuelHeadings[a]],class:"black",action:""};t.push(e.fuelValobj)})),t}},{key:"actionIcon",value:function(e){var t=[];return this.user.permission.edit&&t.push({class:"far fa-edit",action:this.updateFuel.bind(this,e._id,e.LoadMileage,e.UnloadMileage,e._vm_id,e.VehicleModel,e.Brand)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteFuel.bind(this,e._id)}),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"updateFuel",value:function(e,t,n,a,o,i){var r=this;this.common.params={row:e,load:t,unLoad:n,vehicle:a,name:o,brand:i},this.modalService.open(Gr.a,{container:"nb-layout"}).result.then((function(e){r.getFuelAvg()}))}},{key:"deleteFuel",value:function(e){var t=this;console.log("id",e);var n={rowId:e};console.log("id2",n),e&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are you Sure You Want  To Delete This Record?<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,console.log("par",n),t.api.post("Fuel/deleteModelWiseFuelAvgWrtFo",n).subscribe((function(e){console.log("Api Response:",e),t.common.showToast(e.msg),t.getFuelAvg(),t.common.loading--}),(function(e){return console.error(" Api Error:",e)})))})))}}]),e}()).\u0275fac=function(e){return new(e||tl)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},tl.\u0275cmp=m["\u0275\u0275defineComponent"]({type:tl,selectors:[["fuel-master"]],decls:17,vars:6,consts:[[1,"tabs_style_main"],[1,"tabs_style","text-left"],[3,"ngClass","click"],[1,"fuel-master"],[4,"ngIf"],[1,"text-right"],["type","submit","class","btn btn-primary m-0","name","add","style","border-radius:3px;",3,"click",4,"ngIf"],[1,"mt-2"],[3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["type","submit","name","add",1,"btn","btn-primary","m-0",2,"border-radius","3px",3,"click"],[3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"],[1,"row"],[1,"col-3"],["url","Suggestion/GetFuelStation","display","name","placeholder","Search Fuel Station",3,"preSelected","onSelected"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],[1,"col-12","text-right"],["type","submit","class","btn btn-primary m-0","name","add","style","border-radius:3px",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Fuel Master"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",0),m["\u0275\u0275elementStart"](6,"ul",1),m["\u0275\u0275elementStart"](7,"li",2),m["\u0275\u0275listener"]("click",(function(){return t.activeTab="Credit Fuel Station"})),m["\u0275\u0275text"](8," Credit Fuel Station"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"li",2),m["\u0275\u0275listener"]("click",(function(){return t.activeTab="Fuel Rule"})),m["\u0275\u0275text"](10,"IsFull Rule"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"li",2),m["\u0275\u0275listener"]("click",(function(){return t.activeTab="Model Fuel Mileage"})),m["\u0275\u0275text"](12," Model Fuel Mileage "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",3),m["\u0275\u0275template"](14,$r,6,3,"div",4),m["\u0275\u0275template"](15,Yr,10,3,"div",4),m["\u0275\u0275template"](16,el,8,3,"div",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngClass","Credit Fuel Station"==t.activeTab?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","Fuel Rule"==t.activeTab?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","Model Fuel Mileage"==t.activeTab?"active":""),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf","Fuel Rule"==t.activeTab),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","Credit Fuel Station"==t.activeTab),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","Model Fuel Mileage"==t.activeTab))},directives:[p.s,p.v,p.r,u.r,u.u,E.a,Ht.a],styles:['.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;font-size:12px}[_nghost-%COMP%]     .tableFixHead{border-bottom:1px solid #ccc;padding-bottom:20px;margin-bottom:20px;border-top:1px solid #ccc;padding-top:20px;margin-top:20px}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 20px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:14px;font-weight:400;cursor:pointer}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.error[_ngcontent-%COMP%]{font:200;font-size:14px}.ex-pen[_ngcontent-%COMP%]{display:block;font-weight:400;margin-top:5px}.ex-pen[_ngcontent-%COMP%], .text-red[_ngcontent-%COMP%]{color:red}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f5f5f5}.edit[_ngcontent-%COMP%]{color:#263238!important;font-size:16px}.delete[_ngcontent-%COMP%]{color:#d61414!important;font-size:14px}[_nghost-%COMP%]     .tableFixHead{height:auto!important;max-height:calc(100vh - 186px)}[_nghost-%COMP%]     .tag .no-search span{color:#000;background-color:#fff!important}[_nghost-%COMP%]     .fa-edit{font-size:12px;margin-right:10px;background-color:#3c6ac7;color:#fff;border-color:#73a1ff;padding:8px;border-radius:3px}[_nghost-%COMP%]     .edit-btn:hover{background-color:#0054ff}[_nghost-%COMP%]     .fa-trash-alt{font-size:12px;margin-right:10px;background-color:#fd397a;color:#fff;border-color:#fd397a;padding:8px;border-radius:3px}[_nghost-%COMP%]     .remove:hover{background-color:#fd1361;border-color:#fc0758}']}),tl),al=r("Opnw"),ol=r("Lmhy");function il(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",11),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openDispatchOrder(!1)})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function rl(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",17),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function ll(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",18),m["\u0275\u0275elementStart"](1,"h4",19),m["\u0275\u0275text"](2,"No Record Found"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}var sl,dl=((sl=function(){function e(t,n,a,o){i(this,e),this.common=t,this.user=n,this.modalService=a,this.api=o,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.dispatchOrders=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.getDispatchOrders()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getDispatchOrders",value:function(){var e=this,t={startDate:this.common.dateFormatter(this.startDate),endDate:this.common.dateFormatter(this.endDate)};this.common.loading++,this.api.post("LorryReceiptsOperation/getDispatchOrders",t).subscribe((function(t){console.log("Res:",t),e.common.loading--,e.dispatchOrders=t.data,t.data&&(e.clearAllTableData(),e.setTable())}),(function(t){e.common.loading--,e.common.showError(t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.dispatchOrders[0]),columns:this.getColumns(this.dispatchOrders,this.dispatchOrders[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)},"Date"===n&&(t[n].type="date"));return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]="Action"==i?{value:"",action:null,icons:n.actionIcons(e)}:{value:e[i],class:"black",action:""};a.push(o)})),a}},{key:"actionIcons",value:function(e){var t=[{class:"fa fa-print",action:this.printDispatchOrder.bind(this,e)},{class:e._lrid?"":"fa fa-list",action:this.openGenerateLr.bind(this,e)}];return this.user.permission.edit&&t.push({class:"fa fa-edit",action:this.openDispatchOrder.bind(this,e)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteDispatchOrder.bind(this,e)}),t}},{key:"deleteDispatchOrder",value:function(e){var t=this;this.common.params={title:"Delete  ",description:"<b>Are you Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(n){n.response&&(t.common.loading++,t.api.post("LorryReceiptsOperation/deleteDispatchOrders",{dispatchOrderId:e._dispatchid,vehicleId:e._vid}).subscribe((function(e){t.common.loading--,console.log("response:",e),e.data[0].r_id>0&&(t.common.showToast("Sucessfully Deleted",1e4),t.getDispatchOrders())}),(function(e){t.common.loading--,console.log(e)})))}))}},{key:"clearAllTableData",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"openDispatchOrder",value:function(e){var t,n=this;t=!!e&&{id:e._dispatchid},console.log(e,t),this.common.params={dispatchOrderData:t},this.modalService.open(ol.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e),n.getDispatchOrders()}))}},{key:"printDispatchOrder",value:function(e){var t;t=!!e&&{title:"Dispatch Order",previewId:null,refId:e._dispatchid,refType:"DSPOD_PRT"},console.log(e,t),this.common.params={previewData:t},this.modalService.open(de.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data:",e)}))}},{key:"openGenerateLr",value:function(e){var t={dispOrdId:e._dispatchid};console.log("Data Do:",t),this.common.params={lrData:t},this.modalService.open(te.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Data1:",e)}))}}]),e}()).\u0275fac=function(e){return new(e||sl)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](s.a))},sl.\u0275cmp=m["\u0275\u0275defineComponent"]({type:sl,selectors:[["dispatch-orders"]],decls:30,vars:8,consts:[[2,"border","0px","height","100%"],[1,"dispatch-orders"],[1,"row"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1","pr-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-2"],[1,"col-1"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[3,"data","settings",4,"ngIf"],["class","alert alert-danger text-center mt-3",4,"ngIf"],[3,"data","settings"],[1,"alert","alert-danger","text-center","mt-3"],[1,"no-record"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Dispatch Orders"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"div",3),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"label",4),m["\u0275\u0275text"](11,"From Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",5),m["\u0275\u0275elementStart"](13,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",3),m["\u0275\u0275elementStart"](15,"div",2),m["\u0275\u0275elementStart"](16,"div",7),m["\u0275\u0275elementStart"](17,"label",4),m["\u0275\u0275text"](18,"To Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",8),m["\u0275\u0275elementStart"](20,"uj-date-time-picker",9),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",10),m["\u0275\u0275elementStart"](22,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getDispatchOrders()})),m["\u0275\u0275text"](23,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](24,"div",12),m["\u0275\u0275elementStart"](25,"div",13),m["\u0275\u0275template"](26,il,2,0,"button",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",4),m["\u0275\u0275template"](28,rl,1,2,"smart-table",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](29,ll,3,0,"div",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.dispatchOrders&&t.dispatchOrders.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==t.dispatchOrders))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:['[_nghost-%COMP%]     td i.fa-edit{color:#000;padding:5px;border-radius:3px;position:relative;margin-right:5px}[_nghost-%COMP%]     td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     td i.fa-edit span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-24px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash-alt{color:red;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash-alt span{position:absolute;display:none;padding:11px 31px;left:-22px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-list{color:#000;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-list:hover span{display:block}[_nghost-%COMP%]     td i.fa-list span{position:absolute;display:none;padding:11px 70px;left:-59px;top:-28px;font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-list span:before{content:"Generate LR";display:block;position:absolute;top:0;left:0;background-color:#82c91e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-list span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #82c91e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}']}),sl);function cl(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",6),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ml,pl=((ml=function(){function e(t,n){i(this,e),this.common=t,this.api=n,this.totalFillCount=0,this.totalFuel=0,this.totelFuelCost=0,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.fuelConsumption=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getFuelConsumption",value:function(){var e=this;this.fuelConsumption=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var t=null!=this.startDate?this.common.dateFormatter(this.startDate):null,n=null!=this.endDate?this.common.dateFormatter(this.endDate):null;if(null==t)return this.common.showError("Start Date is Missing");if(null==n)return this.common.showError("End Date is Missing");if(this.startDate>this.endDate)return this.common.showError("Start Date should not be Greater than End Date");var a={start_time:t,end_time:n};console.log(a),this.common.loading++,this.api.post("FuelDetails/getFuelConsumption",a).subscribe((function(t){e.common.loading--,e.fuelConsumption=t.data,e.totalFillCount=0,e.totalFuel=0,e.totelFuelCost=0,console.log("result",t);var n=e.fuelConsumption[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}))}},{key:"getTableColumns",value:function(){var e=this,t=[];console.log("Data=",this.fuelConsumption),this.fuelConsumption.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""},"Filling Count"==e.headings[a]&&(e.totalFillCount=e.totalFillCount+n[e.headings[a]]),"Total Fuel (Litres)"==e.headings[a]&&(e.totalFuel=e.totalFuel+n[e.headings[a]]),"Total Fuel Cost"==e.headings[a]&&(e.totelFuelCost=e.totelFuelCost+n[e.headings[a]]);t.push(e.valobj)})),this.valobj={};for(var n=0;n<this.headings.length;n++)"Pump Name"==this.headings[n]&&(this.valobj[this.headings[n]]={value:"Total",class:"text-colour",action:""}),"Filling Count"==this.headings[n]&&(this.valobj[this.headings[n]]={value:this.totalFillCount,class:"text-colour",action:""}),"Total Fuel (Litres)"==this.headings[n]&&(this.valobj[this.headings[n]]={value:this.totalFuel,class:"text-colour",action:""}),"Total Fuel Cost"==this.headings[n]&&(this.valobj[this.headings[n]]={value:this.totelFuelCost,class:"text-colour",action:""});return t.push(this.valobj),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}()).\u0275fac=function(e){return new(e||ml)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a))},ml.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ml,selectors:[["fuel-consumption"]],decls:15,vars:6,consts:[[1,"row"],[1,"col-4"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary","pb-1","pt-1",2,"border-radius","3px","text-align","center",3,"click"],["id","fuelConsumption",3,"data","settings",4,"ngIf"],["id","fuelConsumption",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Fuel Consumption"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",0),m["\u0275\u0275elementStart"](6,"div",1),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",2),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",1),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",1),m["\u0275\u0275elementStart"](11,"button",4),m["\u0275\u0275listener"]("click",(function(){return t.getFuelConsumption()})),m["\u0275\u0275text"](12,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div"),m["\u0275\u0275template"](14,cl,1,2,"smart-table",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.fuelConsumption&&t.fuelConsumption.length))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:["[_nghost-%COMP%]    .text-colour{background:grey;color:#fff}[_nghost-%COMP%]     .tableFixHead table tr td:nth-child(3), [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(4), [_nghost-%COMP%]     .tableFixHead table tr td:nth-child(5){text-align:center}[_nghost-%COMP%]     .tableFixHead table tr th .filter-input-container{width:calc(100% - 20px)!important}[_nghost-%COMP%]     .tableFixHead table tr th:nth-child(3) .filter-input-container input, [_nghost-%COMP%]     .tableFixHead table tr th:nth-child(4) .filter-input-container input, [_nghost-%COMP%]     .tableFixHead table tr th:nth-child(5) .filter-input-container input{text-align:center}"]}),ml);function hl(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",20),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var gl,ul=((gl=function(){function e(t,n,a,o){i(this,e),this.common=t,this.datePipe=n,this.user=a,this.api=o,this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-10)),this.TripPNLData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getPnlSummary",value:function(){var e=this,t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);if(console.log("_________________________________=====+++++++++++++++_________________"),t||n)if(t)if(this.endDate)if(t>n)this.common.showError("StartDate Should Be Less Then EndDate");else{var a={startDate:this.common.dateFormatter(t),endDate:this.common.dateFormatter(n)};this.common.loading++,this.api.post("TripsOperation/getPnlSummary",a).subscribe((function(t){console.log("Res:",t),e.common.loading--,t.data&&(e.TripPNLData=t.data,e.clearAllTableData(),e.setTable())}),(function(t){e.common.loading--,e.common.showError(t)}))}else this.common.showError("Please Enter EndDate");else this.common.showError("Please Enter StartDate");else this.common.showError("Please Enter StartDate And Enddate")}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.TripPNLData[0]),columns:this.getColumns(this.TripPNLData,this.TripPNLData[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]={value:e[i],class:"black",action:""};a.push(o)})),a}},{key:"clearAllTableData",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"printPDF",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a=n.data.name,o="Start Date:"+t.datePipe.transform(t.startDate,"dd-MM-yyyy")+"  End Date:"+t.datePipe.transform(t.endDate,"dd-MM-yyyy");t.common.getPDFFromTableId(e,a,"Trip Profit And Loss",["Action"],o)}),(function(e){t.common.loading--,console.log(e)}))}},{key:"printCsv",value:function(e){var t=this;this.common.loading++;var n=this.user._customer.id;"customer"==this.user._loggedInBy&&(n=this.user._details.id),this.api.post("FoAdmin/getFoDetailsFromUserId",{x_user_id:n}).subscribe((function(n){t.common.loading--;var a="FoName:"+n.data.name,o="Start Date:"+t.datePipe.transform(t.startDate,"dd-MM-yyyy")+"  End Date:"+t.datePipe.transform(t.endDate,"dd-MM-yyyy");t.common.getCSVFromTableId(e,a,"Report:Trip Profit And Loss",null,o)}),(function(e){t.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||gl)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](s.a))},gl.\u0275cmp=m["\u0275\u0275defineComponent"]({type:gl,selectors:[["trip-pnl"]],decls:34,vars:6,consts:[[2,"border","0px","height","100%"],[1,"toll-soft-recovery"],[1,"row"],[1,"col-10"],[1,"col-2"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"trip-PNL"],[1,"col-4"],[1,"mt-2"],[1,"col-8","pl-0"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-3","pr-0"],[1,"col-9","pl-0"],[3,"dateTimeValue","isStart","isTime","onChanged"],[1,"col-1","pr-0"],["type","button",1,"btn","btn-primary",3,"click"],["id","pl",3,"data","settings",4,"ngIf"],["id","pl",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Trip Profit And Loss"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",4),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.printPDF("pl")})),m["\u0275\u0275element"](9,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"span",7),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("pl")})),m["\u0275\u0275element"](11,"i",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"nb-card-body"),m["\u0275\u0275elementStart"](13,"div",9),m["\u0275\u0275elementStart"](14,"div",2),m["\u0275\u0275elementStart"](15,"div",10),m["\u0275\u0275elementStart"](16,"div",2),m["\u0275\u0275elementStart"](17,"div",10),m["\u0275\u0275elementStart"](18,"label",11),m["\u0275\u0275text"](19,"From Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",12),m["\u0275\u0275elementStart"](21,"uj-date-time-picker",13),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",10),m["\u0275\u0275elementStart"](23,"div",2),m["\u0275\u0275elementStart"](24,"div",14),m["\u0275\u0275elementStart"](25,"label",11),m["\u0275\u0275text"](26,"To Date :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",15),m["\u0275\u0275elementStart"](28,"uj-date-time-picker",16),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"div",17),m["\u0275\u0275elementStart"](30,"button",18),m["\u0275\u0275listener"]("click",(function(){return t.getPnlSummary()})),m["\u0275\u0275text"](31,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"div",11),m["\u0275\u0275template"](33,hl,1,2,"smart-table",19),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](21),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1)("isTime",!1),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.TripPNLData&&t.TripPNLData.length))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:[".pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),gl),fl=r("VwZz"),bl=function(e){return{"background-color":e}};function vl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-body",11),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"]().filterData(e.name)})),m["\u0275\u0275elementStart"](2,"div",12),m["\u0275\u0275element"](3,"div",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",7),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"titlecase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",14),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](5,bl,a.bgColor)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](6,3,a.name)," "),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",o.routeGroups[a.name].length," ")}}var xl,yl=((xl=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.routeData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.viewName="Route Status",this.viewIndex=0,this.viewOtions=[{name:"Route Status",key:"route_status"},{name:"Routes",key:"show_name"},{name:"Onward Status",key:"onward_status"}],this.isGraphView=!1,this.viewType="route_status",this.routesData=[],this.routeGroups=[],this.routeGroupsKeys=null,this.keyGroups=[],this.activePrimaryStatus="",this.primarySubStatus=[],this.chartData=null,this.chartDataa=null,this.chartOptions=null,this.chartColors=[],this.textColor=[],this.selectedFilterKey="",this.getFoWiseRouteData(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.common.stopScroll()}},{key:"ngOnDestroy",value:function(){this.common.continuoueScroll()}},{key:"refresh",value:function(){this.getFoWiseRouteData()}},{key:"allData",value:function(){this.selectedFilterKey="",this.filterData("All")}},{key:"selectSubStatus",value:function(e){this.routeData=e,this.table=this.setTable()}},{key:"getFoWiseRouteData",value:function(){var e=this;this.common.loading++,this.api.get("ViaRoutes/foRouteDashboard?").subscribe((function(t){if(e.common.loading--,console.log("api data",t),!t.data)return e.routeData=[],void(e.routesData=[]);e.routeData=t.data,e.grouping("route_status"),e.routeData.length?e.table=e.setTable():e.resetTable(),e.routesData=t.data}),(function(t){e.common.loading--,console.log(t)}))}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"setTable",value:function(){return{data:{headings:{regno:{title:"Regno",placeholder:"Regno"},lastSeenTime:{title:"Last Seen Time",placeholder:"Last Seen Time"},routeName:{title:"Route Name",placeholder:"Route Name"},startLocation:{title:"Start Location",placeholder:"Start Location"},startTime:{title:"Start Time",placeholder:"Start time"},endLocation:{title:"Last Location",placeholder:"Last Location"},lastTime:{title:"Last Exit Time",placeholder:"Last Exit Time"},currentLocation:{title:"Current Location",placeholder:"Current Location"},currentLocationTime:{title:"CL Time",placeholder:"CL Time"},nextLocation:{title:"Next Location",placeholder:"Next Location"},distanceRemaining:{title:"Distance Remaining ",placeholder:"Distance Remaining"},etoa:{title:"ETOA ",placeholder:"ETOA"},startDelay:{title:"Start  delay ",placeholder:"Start  delay"},totalDelay:{title:"Total  delay ",placeholder:"Total  delay"},lastHrKms:{title:"Last Hr KMS",placeholder:"Last Hr KMS"},action:{title:"Action",placeholder:"Action",hideSearch:!0,class:"del"}},columns:this.getTableColumns()},settings:{hideHeader:!0,tableHeight:"84vh",count:{icon:"fa fa-map",action:this.handleView.bind(this)}}}}},{key:"handleView",value:function(){this.isGraphView=!this.isGraphView}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.routeData.map((function(n){var a={regno:{value:n.v_regno?n.v_regno:"-"},lastSeenTime:{value:n.v_time?e.common.changeDateformat2(n.v_time):"-",action:e.viewlocation.bind(e,n)},routeName:n.name?e.getRouteAconym(n.name,n):"-",startLocation:{value:n.f_name?n.f_name:"-",action:e.viewlocation.bind(e,n)},startTime:{value:n.f_end_time?e.common.changeDateformat2(n.f_end_time):"-",action:e.viewlocation.bind(e,n),class:n.f_delay>0?"red":n.f_delay<0?"green":""},endLocation:{value:n.l_name?n.l_name:"-",action:e.viewlocation.bind(e,n)},lastTime:{value:n.l_end_time?e.common.changeDateformat2(n.l_end_time):"-",action:e.viewlocation.bind(e,n)},currentLocation:{value:n.c_name?n.c_name:"-",action:e.viewlocation.bind(e,n)},currentLocationTime:{value:n.c_start_time?e.common.changeDateformat2(n.c_start_time):"-"},nextLocation:{value:n.n_name?n.n_name:"-",action:e.viewlocation.bind(e,n)},distanceRemaining:{value:n.n_dist_rem?n.n_dist_rem:"-"},etoa:{value:n.etoa_next?e.common.changeDateformat2(n.etoa_next):"-"},startDelay:{value:n.start_delay?n.start_delay:"-"},totalDelay:{value:n.total_delay?n.total_delay:"-",class:n.c_delay>0?"red":n.c_delay<0?"green":""},lastHrKms:{value:n.last_hour_kms?n.last_hour_kms:"-"},action:{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}};t.push(a)})),t}},{key:"actionIcons",value:function(e){return[{class:" fa fa-route mr-1",action:this.openRouteMapper.bind(this,e)},{class:"fas fa-truck-moving mr-1",action:this.viewRouteTimeTable.bind(this,e)},{class:"fa fa-pencil-square-o",action:this.addShortTarget.bind(this,e)}]}},{key:"openRouteMapper",value:function(e){var t,n,a,o,i;t=new Date,n=e.f_end_time?this.common.dateFormatter(e.f_end_time):new Date(t.setDate(t.getDate()-2)),o=e.c_start_time?this.common.dateFormatter(e.c_start_time):new Date,a=this.common.dateFormatter(n),i=this.common.dateFormatter(o);var r=this.common.dateFormatter(a),l=this.common.dateFormatter(i);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e.v_id,vehicleRegNo:e.v_regno,fromTime:r,toTime:l},this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"})}},{key:"viewlocation",value:function(e){console.log("route",e),this.common.params={location:{lat:e.v_lat?e.v_lat:0,lng:e.v_long?e.v_long:0,name:"",time:""},title:"Vehicle Location"},this.modalService.open(w.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"viewRouteTimeTable",value:function(e){this.common.params={routeTime:{vehicleId:e.v_id,routeId:e.route_id,routeTimeId:e.tt_id}},this.modalService.open(fl.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"addShortTarget",value:function(e){console.log("target",e),this.common.params={vehicleId:e.v_id||e._vehicleid,vehicleRegNo:e.vehicle||e.Vehicle||e.regno||e.v_regno},console.log("params=",this.common.params),this.modalService.open(Fe.a,{size:"sm",container:"nb-layout"})}},{key:"getRouteAconym",value:function(e,t){var n=e.substring(0,20),a={value:(e="'"+e+"'")?"<acronym title="+e+">"+n+"</acronym>":"-",action:this.viewlocation.bind(this,t),isHTML:!0};return console.log("route=",e),a}},{key:"grouping",value:function(e){var t=this;console.log("viewType",e),this.routeGroups=K.groupBy(this.routeData,e),this.routeGroupsKeys=Object.keys(this.routeGroups),this.keyGroups=[],this.routeGroupsKeys.map((function(e){var n=Math.floor(359*Math.random()+1);t.keyGroups.push({name:e,bgColor:"hsl(".concat(n,", 100%, 75%)"),textColor:"hsl(".concat(n,", 100%, 25%)")})})),this.sortData(e)}},{key:"sortData",value:function(e){var t=this,n=[];this.chartColors=[];var a=[],o=[];this.keyGroups.map((function(e){console.log("group",e,"this.routeGroups",t.routeGroups,"group.name=",e.name,"this.routeGroups[group.name]=",t.routeGroups[e.name]),n.push({group:e,length:t.routeGroups[e.name]?t.routeGroups[e.name].length:0})})),this.routeGroupsKeys=[],K.sortBy(n,["length"]).reverse().map((function(e){t.routeGroupsKeys.push(e.group)})),this.routeGroupsKeys.map((function(e){console.log("keyGroup",e,"keyGroup.name",'"'+e.name+'"',"this.routeGroups=",t.routeGroups,"this.routeGroups[keyGroup.name]=",t.routeGroups[e.name]),t.chartColors.push(e.bgColor),a.push(e.name),o.push(t.routeGroups[e.name].length)}));var i=this.common.pieChart(a,o,this.chartColors);this.chartData=i.chartData,this.chartOptions=i.chartOptions,this.selectedFilterKey&&this.filterData(this.selectedFilterKey,e)}},{key:"filterData",value:function(e,t){var n=this;"All"==e?this.routeData=this.routesData:(this.selectedFilterKey=e,this.routeData=this.routesData.filter((function(t){return t[n.viewType]==e}))),this.table=this.setTable()}},{key:"changeOptions",value:function(e){this.selectedFilterKey="All",this.filterData("All"),"forward"===e?(++this.viewIndex,this.viewIndex>this.viewOtions.length-1&&(this.viewIndex=0)):(--this.viewIndex,this.viewIndex<0&&(this.viewIndex=this.viewOtions.length-1)),this.viewType=this.viewOtions[this.viewIndex].key,this.viewName=this.viewOtions[this.viewIndex].name,this.grouping(this.viewType)}}]),e}()).\u0275fac=function(e){return new(e||xl)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},xl.\u0275cmp=m["\u0275\u0275defineComponent"]({type:xl,selectors:[["route-dashboard"]],decls:31,vars:9,consts:[[2,"border","0px"],[1,"row","m-0"],[1,"col-sm-3","pl-0","pr-2",2,"height","90vh","overflow","hidden",3,"hidden"],[1,"row",2,"font-size","16px","margin","0px","text-align","center","padding","8px 0px","background","linear-gradient(45deg,#30ccff 0,#5a9cff 100%)","color","#fff","border-radius","5px","margin-bottom","10px"],[1,"col-sm-2"],[3,"click"],[1,"icon","ion-ios-rewind"],[1,"col-sm-8"],[1,"icon","ion-ios-fastforward"],["type","pie","id","chart",1,"dashboard_chart",3,"data","options"],[1,"status_box",2,"overflow","auto","height","calc(90vh - 250px)","max-height","calc(90vh - 250px)"],[2,"cursor","pointer",3,"click"],[1,"col-sm-1","p-0"],[2,"background-color","grey","color","white","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)","width","20px","height","20px","border-radius","100%"],[1,"col-sm-3"],[4,"ngFor","ngForOf"],[1,"",2,"overflow","hidden",3,"ngClass"],["id","routeDashbord",2,"width","100%",3,"data","settings"],[2,"width","20px","height","20px","border-radius","100%","box-shadow","0 5px 10px 0 rgba(0,0,0,.2)",3,"ngStyle"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"div",3),m["\u0275\u0275elementStart"](5,"div",4),m["\u0275\u0275elementStart"](6,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.changeOptions("reverse")})),m["\u0275\u0275element"](7,"i",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",7),m["\u0275\u0275elementStart"](9,"span"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"span",5),m["\u0275\u0275listener"]("click",(function(){return t.changeOptions("forward")})),m["\u0275\u0275element"](13,"i",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div"),m["\u0275\u0275element"](15,"chart",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",10),m["\u0275\u0275elementStart"](17,"nb-card"),m["\u0275\u0275elementStart"](18,"nb-card-body",11),m["\u0275\u0275listener"]("click",(function(){return t.allData()})),m["\u0275\u0275elementStart"](19,"div",12),m["\u0275\u0275element"](20,"div",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"div",7),m["\u0275\u0275elementStart"](22,"span"),m["\u0275\u0275text"](23," All Data "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",14),m["\u0275\u0275elementStart"](25,"span"),m["\u0275\u0275text"](26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div"),m["\u0275\u0275template"](28,vl,9,7,"nb-card",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"div",16),m["\u0275\u0275element"](30,"smart-table",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",t.isGraphView),m["\u0275\u0275advance"](7),m["\u0275\u0275textInterpolate"](t.viewName),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("data",t.chartData)("options",t.chartOptions),m["\u0275\u0275advance"](11),m["\u0275\u0275textInterpolate"](t.routesData.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",t.keyGroups),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",t.isGraphView?"col-sm-12 p-0":"col-sm-9 p-0"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[p.s,p.r,We.ChartComponent,u.t,u.r,E.a,u.x],pipes:[u.G],styles:['[_nghost-%COMP%]    .black{color:#000;background:#fff8dc}[_nghost-%COMP%]    .green{background-color:#b5f37c}[_nghost-%COMP%]    .red{background-color:#f37c7c}[_nghost-%COMP%]     .fa-route{color:#000;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-route span{position:absolute;display:none;padding:10px 50px;font-size:11px;left:-36px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-route span:before{content:"Route Mapper";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-route:hover span{display:block}[_nghost-%COMP%]     .fa-truck-moving{color:#ff8091;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-truck-moving span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-truck-moving span:before{content:"Route Time";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-truck-moving span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-truck-moving:hover span{display:block}[_nghost-%COMP%]     .fa-pencil-square-o{color:#0bf714;font-size:14px;cursor:pointer}[_nghost-%COMP%]     .fa-pencil-square-o span{position:absolute;display:none;padding:10px 44px;font-size:11px;left:-34px;font-weight:400;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-pencil-square-o span:before{content:"Short Target";display:block;position:absolute;top:0;left:0;background-color:#0bf714;border-radius:3px;padding:5px 10px;color:#000;width:100%}[_nghost-%COMP%]     .fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0bf714;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     .fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:70px}[_nghost-%COMP%]     th:nth-child(3){width:70px}[_nghost-%COMP%]     th:nth-child(4){width:85px}[_nghost-%COMP%]     th:nth-child(5){width:70px}[_nghost-%COMP%]     th:nth-child(6){width:70px}[_nghost-%COMP%]     th:nth-child(7){width:70px}[_nghost-%COMP%]     th:nth-child(8){width:70px}[_nghost-%COMP%]     th:nth-child(9){width:70px}[_nghost-%COMP%]     th:nth-child(10){width:70px}[_nghost-%COMP%]     th:nth-child(11){width:70px}[_nghost-%COMP%]     th:nth-child(12){width:44px}[_nghost-%COMP%]     th:nth-child(13){width:70px}[_nghost-%COMP%]     th:nth-child(14){width:60px}[_nghost-%COMP%]     th:nth-child(15){width:60px}[_nghost-%COMP%]     th:nth-child(16){width:44px}[_nghost-%COMP%]     th:nth-child(17){width:70px}']}),xl);function Cl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275elementStart"](1,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().saveUserRole()})),m["\u0275\u0275text"](2,"Save"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function _l(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",22),m["\u0275\u0275elementStart"](1,"input",23),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](4).checkOrUnCheckAll(e,"page")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](2),m["\u0275\u0275elementStart"](3,"div",24),m["\u0275\u0275elementStart"](4,"div",25),m["\u0275\u0275elementStart"](5,"input",26),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isadd=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"label"),m["\u0275\u0275text"](7,"A"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",25),m["\u0275\u0275elementStart"](9,"input",27),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isedit=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"label"),m["\u0275\u0275text"](11,"E"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",25),m["\u0275\u0275elementStart"](13,"input",28),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isdeleted=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"D"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("name","page-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.title," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!a.has_add),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isadd),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",!a.has_edit),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isedit),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",!a.has_delete),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isdeleted)}}function Sl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275elementStart"](1,"div",18),m["\u0275\u0275elementStart"](2,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](3).checkOrUnCheckAll(e,"group")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](3),m["\u0275\u0275elementStart"](4,"span",19),m["\u0275\u0275text"](5,"All Functionality"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"input",20),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isAll=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"]().index;return m["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(e,a,e.isAll)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,_l,16,10,"div",21),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","group-box")("name","group-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.name," "),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",a.isAll),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",a.pages)}}function Ml(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275elementStart"](2,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).checkOrUnCheckAll(e,"module")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"span",15),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"uppercase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](6,Sl,8,6,"div",16),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","module-box")("name","section-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](5,5,a.name)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",a.groups)}}function kl(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",11),m["\u0275\u0275template"](1,Ml,7,7,"div",12),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n.formattedData)}}function wl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",22),m["\u0275\u0275elementStart"](1,"input",30),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](4).checkOrUnCheckAll(e,"page")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](2),m["\u0275\u0275elementStart"](3,"div",24),m["\u0275\u0275elementStart"](4,"div",25),m["\u0275\u0275elementStart"](5,"input",26),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isadd=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isadd",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"label"),m["\u0275\u0275text"](7,"A"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",25),m["\u0275\u0275elementStart"](9,"input",27),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isedit=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isedit",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"label"),m["\u0275\u0275text"](11,"E"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",25),m["\u0275\u0275elementStart"](13,"input",28),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isdeleted=e}))("click",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return m["\u0275\u0275nextContext"](4).changePagePermission(a,"isdeleted",e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"label"),m["\u0275\u0275text"](15,"D"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("name","page-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.title," "),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("hidden",!a.has_add),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isadd),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",!a.has_edit),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isedit),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("hidden",!a.has_delete),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.isdeleted)}}function Ol(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275elementStart"](1,"div",18),m["\u0275\u0275elementStart"](2,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](3).checkOrUnCheckAll(e,"group")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](3),m["\u0275\u0275elementStart"](4,"span",19),m["\u0275\u0275text"](5,"All Functionality"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"input",20),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isAll=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"]().index;return m["\u0275\u0275nextContext"](2).checkOrUnCheckfunctionality(e,a,e.isAll)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,wl,16,10,"div",21),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","group-box")("name","group-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.name," "),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",a.isAll),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",a.pages)}}function Pl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",13),m["\u0275\u0275elementStart"](2,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e}))("change",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).checkOrUnCheckAll(e,"module")})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"span",15),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"uppercase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](6,Ol,8,6,"div",16),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","module-box")("name","section-"+o)("ngModel",a.isSelected),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](5,5,a.name)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",a.groups)}}function El(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",29),m["\u0275\u0275elementStart"](1,"h4"),m["\u0275\u0275text"](2,"Mobile App"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](3,Pl,7,7,"div",12),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",n.formattedDataApp)}}var Tl,Dl=function(){return["name","mobileno"]},Il=((Tl=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this.getUsersList=[],this.getAllPagesList=[],this.formattedData=[],this.formattedDataApp=[],this.dashBoardPages=[],this.appPages=[],this.selectedUser={details:null,oldPreferences:[]},this.istaskOpertion=!1,this.common.isComponentActive=!1,this.common.refresh=this.refresh.bind(this),this.getAllUserList()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.common.isComponentActive=!1,this.getAllUserList(),document.getElementById("name").value="",this.formattedData=[],this.formattedDataApp=[]}},{key:"canDeactivate",value:function(){var e=this;return console.log("activity Start",this.common.isComponentActive),this.common.isComponentActive?(this.common.params={title:"Confirmation ",description:"<b>&nbsp;Are Sure To Leave This Page<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(t){t.response&&(e.common.isComponentActive=!1,console.log("no, you wont navigate anywhere"))})),!1):(console.log("you are going away, goodby"),!0)}},{key:"getAllUserList",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/getAllFoAdminUsersWrtFo?").subscribe((function(t){e.common.loading--,e.getUsersList=t.data,console.log("api Data:",e.getUsersList)}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"getUserDetails",value:function(e){var t=this;this.getAllPagesList=[],this.formattedData=[],this.dashBoardPages=[],this.appPages=[],this.selectedUser.details=e;var n={userId:e.id,userType:3,iswallet:localStorage.getItem("iswallet")||"0"};this.common.loading++,this.api.post("UserRoles/getAllPages",n).subscribe((function(e){t.common.loading--,t.getAllPagesList=e.data,t.selectedUser.oldPreferences=e.data,t.getAllPagesList.map((function(e){console.log("dt",e),"Dashboard"==e.type?t.dashBoardPages.push(e):"App"==e.type&&t.appPages.push(e)})),console.log("dashboardPages",t.dashBoardPages),console.log("app pages",t.appPages),t.managedata(),t.manageAppData()}),(function(e){t.common.loading--,console.log("Error: ",e)}))}},{key:"managedata",value:function(){this.formattedData=[];var e=K.groupBy(this.dashBoardPages,"module");console.log(e),this.formattedData=Object.keys(e).map((function(t){return{name:t,groups:e[t],isSelected:!1,isOp:!1}})),this.formattedData.map((function(e){var t=!0,n=K.groupBy(e.groups,"group_name");console.log(n),console.log(Object.keys(n)),e.groups=Object.keys(n).map((function(e){var a=!0,o=n[e].map((function(e){return e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e}));return t&&(t=a),{name:e,pages:o,isSelected:a}})),e.isSelected=t})),this.formattedData=K.sortBy(this.formattedData,["name"],["asc"]).map((function(e){return e.groups=K.sortBy(e.groups,["name"],["asc"]).map((function(e){return e.pages=K.sortBy(e.pages,["title"],["asc"]),e})),e}))}},{key:"manageAppData",value:function(){this.formattedDataApp=[];var e=K.groupBy(this.appPages,"module");console.log(e),this.formattedDataApp=Object.keys(e).map((function(t){return{name:t,groups:e[t],isSelected:!1,isOp:!1}})),this.formattedDataApp.map((function(e){var t=!0,n=K.groupBy(e.groups,"group_name");console.log(n),console.log(Object.keys(n)),e.groups=Object.keys(n).map((function(e){var a=!0,o=n[e].map((function(e){return e.isSelected=!!e.userid,e.isadd=!!e.isadd,e.isedit=!!e.isedit,e.isdeleted=!!e.isdeleted,e.isOp=!1,a&&(a=e.isSelected),e}));return t&&(t=a),{name:e,pages:o,isSelected:a}})),e.isSelected=t})),this.formattedDataApp=K.sortBy(this.formattedDataApp,["name"],["asc"]).map((function(e){return e.groups=K.sortBy(e.groups,["name"],["asc"]).map((function(e){return e.pages=K.sortBy(e.pages,["title"],["asc"]),e})),e}))}},{key:"checkOrUnCheckAll",value:function(e,t){this.common.isComponentActive=!0,console.log("component is",this.common.isComponentActive),"group"===t?(console.log("details.isSelected:",e.isSelected),e.pages.map((function(t){console.log("details.isSelected:",e.isSelected),t.isSelected=e.isSelected}))):"module"===t&&e.groups.map((function(t){t.isSelected=e.isSelected,t.pages.map((function(t){return t.isSelected=e.isSelected}))})),e.isSelected||"page"!=t||(e.isSelected=e.isSelected,e.isadd=!1,e.isedit=!1,e.isdeleted=!1,e.isOp=!0)}},{key:"checkOrUnCheckfunctionality",value:function(e,t,n){if(console.log(e,t,n),n)for(var a=0;a<e.pages.length;a++)console.log(e.pages[a]),e.pages[a].isSelected=!0,e.pages[a].isadd=!0,e.pages[a].isedit=!0,e.pages[a].isdeleted=!0,e.pages[a].isOp=!0;else for(var o=0;o<e.pages.length;o++)e.pages[o].isSelected=!1,e.pages[o].isadd=!1,e.pages[o].isedit=!1,e.pages[o].isdeleted=!1,e.pages[o].isOp=!1}},{key:"changePagePermission",value:function(e,t,n){if(this.istaskOpertion=!0,this.istaskOpertion)return e.isOp=!0}},{key:"saveUserRole",value:function(){var e=this,t={pages:this.findSelectedPages(),userId:this.selectedUser.details.id,userType:3};console.log("Param:",t),this.common.loading++,this.api.post("UserRoles/setPagesWrtUser",t).subscribe((function(t){e.common.loading--,console.log("Res: ",t),e.common.showToast(t.msg),e.refresh()}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"findSelectedPages",value:function(){var e=[];return console.log("formattedData: ",this.formattedData),this.formattedData.map((function(t){t.groups.map((function(t){t.pages.map((function(t){e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})}))}))})),this.formattedDataApp.map((function(t){t.groups.map((function(t){t.pages.map((function(t){e.push(t.isSelected?{id:t.id,status:1,isadd:t.isadd,isedit:t.isedit,isdeleted:t.isdeleted,isOp:t.isOp}:{id:t.id,status:0,isadd:!1,isedit:!1,isdeleted:!1,isOp:t.isOp})}))}))})),e}}]),e}()).\u0275fac=function(e){return new(e||Tl)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](io.a))},Tl.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Tl,selectors:[["fo-user-role"]],decls:15,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[2,"min-height","580px"],[1,"search","mt-2"],["seperator","-","placeholder","Employee","inputId","name",3,"data","display","preSelected","onSelected"],["class","col text-right mt-4",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[1,"col","text-right","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"container"],[4,"ngFor","ngForOf"],[1,"module-container"],["type","checkbox",3,"ngClass","name","ngModel","ngModelChange","change"],[1,"module-name"],["class","group-container",4,"ngFor","ngForOf"],[1,"group-container"],[1,"group-head"],[2,"font-size","14px","margin-left","40px"],["type","checkbox",1,"group-box",3,"ngModel","ngModelChange","change"],["class","col-2 page-container",4,"ngFor","ngForOf"],[1,"col-2","page-container"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","change"],[1,"row","permission-type",3,"hidden"],[1,"col-4",2,"padding","0px!important",3,"hidden"],["type","checkbox","name","add",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","edit",1,"page-box-type",3,"ngModel","ngModelChange","click"],["type","checkbox","name","delete",1,"page-box-type",3,"ngModel","ngModelChange","click"],[1,"container","mt-4"],["type","checkbox",1,"page-box",3,"name","ngModel","ngModelChange","click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Fo User Role"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body",3),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"label"),m["\u0275\u0275text"](10," Select Employee Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"auto-suggestion",5),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getUserDetails(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](12,Cl,3,0,"div",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,kl,2,1,"div",7),m["\u0275\u0275template"](14,El,4,1,"div",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("data",t.getUsersList)("display",m["\u0275\u0275pureFunction0"](6,Dl))("preSelected",null),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.selectedUser.details),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.formattedData.length>0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.formattedDataApp.length>0))},directives:[p.s,p.v,p.r,Ht.a,u.u,u.t,ce.a,u.r,ce.r,ce.u],pipes:[u.I],styles:[".row.col-2[_ngcontent-%COMP%]{margin:2px}.search[_ngcontent-%COMP%]{width:180px;margin-left:20px}.container[_ngcontent-%COMP%]{color:#000;border:2px solid grey}.module-container[_ngcontent-%COMP%]{background:#ffd7d7;padding:5px 16px;font-weight:700;text-transform:capitalize;font-size:22px;margin-top:10px}.module-name[_ngcontent-%COMP%]{color:#01203c}.group-container[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:500;padding:5px 30px;font-size:18px;color:initial}.group-head[_ngcontent-%COMP%]{color:#161617;background:#d0e4f5;padding:4px}.page-container[_ngcontent-%COMP%]{font-size:14px!important;color:#00008b;margin-left:25px;padding:0;display:inline-table}input.group-box[_ngcontent-%COMP%], input.module-box[_ngcontent-%COMP%], input.page-box[_ngcontent-%COMP%]{width:16px;height:16px!important;cursor:pointer}.permission-type[_ngcontent-%COMP%]{margin:2px;border:1px solid;width:94%}.permission-type.col-4[_ngcontent-%COMP%]{padding:0;margin:0}.permission-type[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-right:10px}input.page-box-type[_ngcontent-%COMP%]{width:12px;height:12px!important;margin-left:8px;cursor:pointer}",'.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Tl);function Fl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275elementStart"](1,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().period=e}))("ngModelChange",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().refresh()})),m["\u0275\u0275elementStart"](2,"option",18),m["\u0275\u0275text"](3,"Day"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"option",19),m["\u0275\u0275text"](5,"Week"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",20),m["\u0275\u0275text"](7,"Month"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.period)}}function Al(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275elementStart"](1,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().weekMonthNumber=e}))("ngModelChange",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.getweeklyMothlyTrend(),e.getTrendsVehicleSite()})),m["\u0275\u0275elementStart"](2,"option",21),m["\u0275\u0275text"](3,"4"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"option",22),m["\u0275\u0275text"](5,"5"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",23),m["\u0275\u0275text"](7,"6"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"option",24),m["\u0275\u0275text"](9,"7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",25),m["\u0275\u0275text"](11,"8"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",26),m["\u0275\u0275text"](13,"9"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"option",27),m["\u0275\u0275text"](15,"10"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"option",6),m["\u0275\u0275text"](17,"11"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"option",28),m["\u0275\u0275text"](19,"12"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"option",29),m["\u0275\u0275text"](21,"13"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"option",30),m["\u0275\u0275text"](23,"14"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"option",31),m["\u0275\u0275text"](25,"15"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"option",32),m["\u0275\u0275text"](27,"16"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.weekMonthNumber)}}function Vl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",4),m["\u0275\u0275elementStart"](1,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().weekMonthNumber=e}))("ngModelChange",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.getweeklyMothlyTrend(),e.getTrendsVehicleSite()})),m["\u0275\u0275elementStart"](2,"option",20),m["\u0275\u0275text"](3,"3"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"option",21),m["\u0275\u0275text"](5,"4"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"option",22),m["\u0275\u0275text"](7,"5"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"option",23),m["\u0275\u0275text"](9,"6"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",24),m["\u0275\u0275text"](11,"7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",25),m["\u0275\u0275text"](13,"8"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",a.weekMonthNumber)}}function Ll(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",33),m["\u0275\u0275elementStart"](1,"uj-date-time-picker",34),m["\u0275\u0275listener"]("onChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("dateTimeValue",a.startDate)("isTime",!1)}}function zl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",33),m["\u0275\u0275elementStart"](1,"uj-date-time-picker",35),m["\u0275\u0275listener"]("onChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("dateTimeValue",a.endDate)("isTime",!1)("isStart",!1)}}function jl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",33),m["\u0275\u0275elementStart"](1,"button",36),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().refresh()})),m["\u0275\u0275text"](2,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Rl(e,t){if(1&e&&m["\u0275\u0275element"](0,"chart",39),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("type",n.chart.type)("data",n.chart.dataSet)("options",n.chart.options)}}function Hl(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",37),m["\u0275\u0275template"](1,Rl,1,3,"chart",38),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.chart.type)}}function Nl(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td",44),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"td",44),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"td",44),m["\u0275\u0275text"](9),m["\u0275\u0275pipe"](10,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.vehicle_id),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](5,4,n.onward,"1.2-2")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n.hlt_count),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](10,7,n.total_halt,"1.2-2"))}}function Ul(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",40),m["\u0275\u0275elementStart"](1,"div",41),m["\u0275\u0275elementStart"](2,"table",42),m["\u0275\u0275elementStart"](3,"thead",43),m["\u0275\u0275elementStart"](4,"tr"),m["\u0275\u0275elementStart"](5,"th"),m["\u0275\u0275text"](6,"Regno"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"th",44),m["\u0275\u0275text"](8,"Avg Onward/Day(Hr)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"th",44),m["\u0275\u0275text"](10,"Halt Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"th",44),m["\u0275\u0275text"](12,"Average Halt(Hr)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"tbody"),m["\u0275\u0275template"](14,Nl,11,10,"tr",45),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngForOf",n.trendsVehicleData)}}function Gl(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Average loading Hours(Hr)"),m["\u0275\u0275elementEnd"]())}function Bl(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Average Unloading Hours(Hr)"),m["\u0275\u0275elementEnd"]())}function Wl(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Loading Count "),m["\u0275\u0275elementEnd"]())}function Kl(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"UnLoading Count"),m["\u0275\u0275elementEnd"]())}function $l(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",44),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"number"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind2"](2,1,n.loading_hrs,"1.2-2")," ")}}function ql(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",44),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"number"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind2"](2,1,n.unloading_hrs,"1.2-2")," ")}}function Jl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",54),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit,t=m["\u0275\u0275nextContext"](2);return e.ldng_count>0?t.getPendingStatus(e,"vehicle"):""})),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.ldng_count,"")}}function Yl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",55),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit,t=m["\u0275\u0275nextContext"](2);return e.unldng_count>0?t.getPendingStatus(e,"vehicle"):""})),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.unldng_count,"")}}function Zl(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td",51),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).locationOnMap(e)})),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](3,$l,3,4,"td",47),m["\u0275\u0275template"](4,ql,3,4,"td",47),m["\u0275\u0275template"](5,Jl,2,1,"td",52),m["\u0275\u0275template"](6,Yl,2,1,"td",53),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]().$implicit,o=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",a.sitename,""),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==o.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==o.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==o.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==o.trendType)}}function Ql(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,Zl,7,5,"tr",49),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==a.trendType&&0!=n.ldng_count&&0!=n.loading_hrs||"21"==a.trendType&&0!=n.unloading_hrs&&0!=n.unldng_count)}}function Xl(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th"),m["\u0275\u0275text"](1,"Regno"),m["\u0275\u0275elementEnd"]())}function es(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Average Loading Hours(Hr)"),m["\u0275\u0275elementEnd"]())}function ts(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Average Unloading Hours(Hr) "),m["\u0275\u0275elementEnd"]())}function ns(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"Loading Count "),m["\u0275\u0275elementEnd"]())}function as(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",44),m["\u0275\u0275text"](1,"UnLoading Count"),m["\u0275\u0275elementEnd"]())}function os(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.vehicle_id)}}function is(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",44),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"number"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind2"](2,1,n.loading_hrs,"1.2-2"),"")}}function rs(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",44),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"number"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind2"](2,1,n.unloading_hrs,"1.2-2")," ")}}function ls(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",54),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit,t=m["\u0275\u0275nextContext"](2);return e.ldng_count>0?t.getPendingStatus(e,"site"):""})),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.ldng_count,"")}}function ss(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"td",57),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2).$implicit,t=m["\u0275\u0275nextContext"](2);return e.unldng_count>0?t.getPendingStatus(e,"site"):""})),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"](2).$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",a.unldng_count," ")}}function ds(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275template"](1,os,2,1,"td",49),m["\u0275\u0275template"](2,is,3,4,"td",50),m["\u0275\u0275template"](3,rs,3,4,"td",50),m["\u0275\u0275template"](4,ls,2,1,"td",52),m["\u0275\u0275template"](5,ss,2,1,"td",56),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType||"21"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType)}}function cs(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,ds,6,5,"tr",49),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==a.trendType&&0!=n.ldng_count||"21"==a.trendType&&0!=n.unldng_count)}}function ms(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",40),m["\u0275\u0275elementStart"](1,"div",46),m["\u0275\u0275elementStart"](2,"table",42),m["\u0275\u0275elementStart"](3,"thead",43),m["\u0275\u0275elementStart"](4,"tr"),m["\u0275\u0275elementStart"](5,"th"),m["\u0275\u0275text"](6,"Site Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,Gl,2,0,"th",47),m["\u0275\u0275template"](8,Bl,2,0,"th",47),m["\u0275\u0275template"](9,Wl,2,0,"th",47),m["\u0275\u0275template"](10,Kl,2,0,"th",47),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"tbody"),m["\u0275\u0275template"](12,Ql,2,1,"ng-container",45),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",48),m["\u0275\u0275elementStart"](14,"table",42),m["\u0275\u0275elementStart"](15,"thead",43),m["\u0275\u0275elementStart"](16,"tr"),m["\u0275\u0275template"](17,Xl,2,0,"th",49),m["\u0275\u0275template"](18,es,2,0,"th",50),m["\u0275\u0275template"](19,ts,2,0,"th",50),m["\u0275\u0275template"](20,ns,2,0,"th",50),m["\u0275\u0275template"](21,as,2,0,"th",50),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"tbody"),m["\u0275\u0275template"](23,cs,2,1,"ng-container",45),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.trendsVehicleSiteData),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf","11"==n.trendType||"21"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==n.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","21"==n.trendType),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",n.trendsVehicleData)}}var ps,hs=((ps=function(){function e(t,n,a,o,r){i(this,e),this.common=t,this.api=n,this.datepipe=a,this.modalService=o,this.mapService=r,this.scale="",this.trendType="11",this.period="1",this.weekMonthNumber="4",this.showPeriod=!0,this.trends=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate(new Date(this.endDate).getDate()-6)),this.loadingSite=[],this.vehicleCount=0,this.dateDay=[],this.trendsVehicleData=[],this.onward=[],this.trendsVehicleSiteData=[],this.siteUnloading=[],this.graphString0="Loading Hours",this.graphString1="Loading Count",this.latLngSite=[],this.xAxesLabels={1:"Days of",2:"Weeks of",3:"Month of"},this.chart={data:{line:[],bar:[]},type:"",dataSet:{labels:[],datasets:[]},yaxisname:"Month",options:null},this.common.refresh=this.refresh.bind(this),this.refresh()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTrends(),this.getTrendsVehicleSite()}},{key:"getTrends",value:function(){var e=this,t={startDate:"1"==this.period?this.common.dateFormatter1(this.startDate):"",endDate:"1"==this.period?this.common.dateFormatter1(this.endDate):"",purpose:this.period,value:this.weekMonthNumber};this.common.loading++,this.api.post("Trends/getTrendsWrtFo",t).subscribe((function(t){e.common.loading--,e.trends=t.data.result||[],0!=e.trends.length&&null!=e.trends||e.common.showError("Chart is not available"),e.vehicleCount=t.data.veh_count,e.dateDay=e.trends.map((function(t){return e.datepipe.transform(t.date_day,"dd-MMM")})),e.getCategoryDayMonthWeekWise()}),(function(t){e.common.loading--,console.log("Api Error:",t),e.common.showError()}))}},{key:"getCategoryDayMonthWeekWise",value:function(e){var t=this;e&&(this.trendType=e),this.chart.data.line=[],this.chart.data.bar=[];var n={0:["Onward Percentage",""],11:["Avg Loading Hours","Loading Count"],21:["Avg Unloading Hours","Unloading Count"],31:["Avg Onward Km",""]},a=n[this.trendType][0],o=n[this.trendType][0],i=n[this.trendType][1],r=n[this.trendType][1],l=this.xAxesLabels[this.period],s="11"==this.trendType?"ldng_count":"21"==this.trendType?"unldng_count":"onward";this.trendsVehicleSiteData=K.reverse(K.sortBy(this.trendsVehicleSiteData,[s])),this.trendsVehicleData=K.reverse(K.sortBy(this.trendsVehicleData,[s])),this.trends.forEach((function(e){if("11"==t.trendType||"21"==t.trendType)t.chart.data.line.push("11"==t.trendType?e.loading_hrs/e.loading_count||0:e.unloading_hrs/e.unloading_count||0),t.chart.data.bar.push("11"==t.trendType?e.loading_count:e.unloading_count);else if("0"==t.trendType){var n="number"==typeof e.onward?e.onward:parseFloat(e.onward);t.chart.data.line.push(n)}else"31"==t.trendType&&t.chart.data.line.push(e.Onward_kmpd/t.vehicleCount)})),this.setDataset("11"==this.trendType||"21"==this.trendType,a,l,r,o,i)}},{key:"getTick",value:function(e,t){var n,a,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1,l=1/0,s=0;return e.forEach((function(e){l=Math.min(e,l),s=Math.max(e,s)})),a=(s-l)*i,l=l-(o=(s-l)*r)<=0?0:l-o,s+=a,n=Math.round((s-l)/t),{suggestedMin:l,suggestedMax:n*t+l,stepSize:n}}},{key:"setDataset",value:function(e,t,n,a,o,i){var r={labels:this.dateDay,datasets:[]};r.datasets.push({type:"line",label:e?o:"",borderColor:e?"#0a7070":"blue",backgroundColor:e?"#0a7070":"blue",fill:!1,data:this.chart.data.line.map((function(e){return e.toFixed(2)})),pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",yAxisID:"y-axis-1",yAxisName:"Count"}),e&&r.datasets.push({type:"bar",label:i,borderColor:"#c7eded",backgroundColor:"#c7eded",pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",fill:!1,data:this.chart.data.bar,yAxisID:"y-axis-2"}),this.chart={data:{line:[],bar:[]},type:e?"bar":"line",dataSet:r,yaxisname:"Average Count",options:this.setChartOptions(e,t,n,a)}}},{key:"setChartOptions",value:function(e,t,n,a){var o={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:"31"!=this.trendType&&"0"!=this.trendType},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,labelString:n,fontSize:17}}]}};return o.scales.yAxes.push({ticks:this.getTick(this.chart.data.line,5),scaleLabel:{display:!0,labelString:t,fontSize:17},type:"linear",display:!0,position:"left",id:"y-axis-1"}),e&&o.scales.yAxes.push({ticks:this.getTick(this.chart.data.bar,5),scaleLabel:{display:!0,labelString:a,fontSize:17},type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),o}},{key:"getTrendsVehicleSite",value:function(){var e,t=this;this.trendsVehicleData=[],this.trendsVehicleSiteData=[],this.trends=[],this.dateDay=[],e="1"==this.period?{startDate:this.common.dateFormatter1(this.startDate),endDate:this.common.dateFormatter1(this.endDate),purpose:this.period,value:this.weekMonthNumber}:{purpose:this.period,value:this.weekMonthNumber},this.common.loading++,this.api.post("Trends/getTrendsWrtVehiclesAndSites",e).subscribe((function(e){t.common.loading--,t.trendsVehicleData=e.data.vehData||[],0!=t.trendsVehicleData.length&&null!=t.trendsVehicleData||t.common.showError("Vehicle Data is not availabe"),console.log("--------------------",t.trendsVehicleData),t.trendsVehicleSiteData=e.data.siteData||[],0!=t.trendsVehicleSiteData.length&&null!=t.trendsVehicleSiteData||t.common.showError("Site Data is not availabe"),t.loadingSite=e.data.siteData.lodingArray,t.getTrendsVehicle(),t.getTrendsSite()}),(function(e){t.common.loading--,t.common.showError(),console.log("Error: ",e)}))}},{key:"getTrendsVehicle",value:function(){this.trendsVehicleData.map((function(e){e.loading_hrs=e.loading_hrs/e.ldng_count,e.unloading_hrs=e.unloading_hrs/e.unldng_count,0!=e.total_halt||0!=e.hlt_count?e.total_halt=e.total_halt/e.hlt_count:(e.total_halt=0,e.hlt_count=0)}))}},{key:"getTrendsSite",value:function(){var e=this;this.trendsVehicleSiteData.map((function(e){e.loading_hrs=e.loading_hrs/e.ldng_count,e.unloading_hrs=e.unloading_hrs/e.unldng_count})),this.siteUnloading=[],K.sortBy(this.trendsVehicleSiteData,["unloading_hrs"]).reverse().map((function(t){e.siteUnloading.push(t)}))}},{key:"getweeklyMothlyTrend",value:function(){var e=this;this.dateDay=[],this.trends=[],this.vehicleCount=null;var t={purpose:this.period,value:this.weekMonthNumber};this.common.loading++,this.api.post("Trends/getTrendsWrtFo",t).subscribe((function(t){e.common.loading--,e.trends=t.data.result||[],e.vehicleCount=t.data.veh_count,e.trends.forEach((function(t){e.dateDay.push(e.datepipe.transform(t.date_day,"dd-MMM"))})),e.getCategoryDayMonthWeekWise()}),(function(t){e.common.loading--,e.common.showError()}))}},{key:"locationOnMap",value:function(e){e.lat?(this.common.params={location:{lat:e.lat,lng:e.long,name:"",time:""},title:"Location",fence:e.latLngs},this.modalService.open(w.a,{size:"lg",container:"nb-layout"})):this.common.showToast("Vehicle location not available!")}},{key:"getPendingStatus",value:function(e,t){var n;console.log("data",e),n="vehicle"===t?["RegNo.","Count Event","Avg Hrs."]:["Site","Count Event","Avg Hrs."];var a,o=[],i=[];"11"==this.trendType?(o=e.lodingArray,Object.keys(o).map((function(e){var t=[];t.push(e,o[e].count,(o[e].avgHours/o[e].count).toFixed(2)),i.push(t)})),i.sort((function(e,t){return t[1]==e[1]?t[2]-e[2]:t[1]-e[1]}))):"21"==this.trendType&&(o=e.unloadingArray,Object.keys(o).map((function(e){var t=[];t.push(e,o[e].count,(o[e].avgHours/o[e].count).toFixed(2)),i.push(t)})),i.sort((function(e,t){return t[1]==e[1]?t[2]-e[2]:t[1]-e[1]}))),a=i,this.common.params={title:"SiteWise Vehicle List :"+(e.sitename?e.sitename:e.vehicle_id),headings:n,data:a},this.modalService.open(an.a,{size:"lg",container:"nb-layout"})}}]),e}()).\u0275fac=function(e){return new(e||ps)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](Ee.a))},ps.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ps,selectors:[["trends-fo"]],decls:29,vars:11,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-sm-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange"],["value","11"],["value","21"],["value","0"],["value","31"],["class","col-sm-3",4,"ngIf"],["class","col-sm-2",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],[1,"row",2,"margin-top","-23px"],["class","col-sm-12",4,"ngIf"],[1,"row",2,"margin-top","-18px"],[1,"col","text-right"],["class","row ","style","margin-top: 10px",4,"ngIf"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-12"],["style","margin-right:5px;height:250px",3,"type","data","options",4,"ngIf"],[2,"margin-right","5px","height","250px",3,"type","data","options"],[1,"row",2,"margin-top","10px"],[1,"col-12"],[1,"table","table-border"],[1,"thead"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"col-sm-6",2,"overflow","auto"],["style","text-align: center",4,"ngIf"],[1,"col-sm-6","pr-0"],[4,"ngIf"],["style","text-align:center",4,"ngIf"],[2,"color","#00695C",3,"click"],["style","color:#00695C;text-align: center; cursor: pointer;",3,"click",4,"ngIf"],["style","color:#E91E63; cursor: pointer;",3,"click",4,"ngIf"],[2,"color","#00695C","text-align","center","cursor","pointer",3,"click"],[2,"color","#E91E63","cursor","pointer",3,"click"],["style","color:#E91E63;cursor: pointer; text-align: center",3,"click",4,"ngIf"],[2,"color","#E91E63","cursor","pointer","text-align","center",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.trendType=e}))("ngModelChange",(function(){return t.getCategoryDayMonthWeekWise(t.trendType)})),m["\u0275\u0275elementStart"](6,"option",6),m["\u0275\u0275text"](7,"Loading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"option",7),m["\u0275\u0275text"](9,"Unloading"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",8),m["\u0275\u0275text"](11,"Onward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"option",9),m["\u0275\u0275text"](13,"Onward - KMPD"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](14,Fl,8,1,"div",10),m["\u0275\u0275template"](15,Al,28,1,"div",10),m["\u0275\u0275template"](16,Vl,14,1,"div",10),m["\u0275\u0275template"](17,Ll,2,2,"div",11),m["\u0275\u0275template"](18,zl,2,3,"div",11),m["\u0275\u0275template"](19,jl,3,0,"div",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](20,"div",12),m["\u0275\u0275elementStart"](21,"div",13),m["\u0275\u0275template"](22,Hl,2,1,"div",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",15),m["\u0275\u0275elementStart"](24,"div",16),m["\u0275\u0275elementStart"](25,"label"),m["\u0275\u0275text"](26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](27,Ul,15,1,"div",17),m["\u0275\u0275template"](28,ms,24,11,"div",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.trendType),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngIf",t.showPeriod),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","2"==t.period),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","3"==t.period),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","1"==t.period),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","1"==t.period),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","1"==t.period),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.dateDay.length>0),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"]("Vehicle Count:",t.vehicleCount,""),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","0"==t.trendType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","11"==t.trendType||"21"==t.trendType))},directives:[p.s,p.r,ce.D,ce.r,ce.u,ce.w,ce.G,u.u,me.a,We.ChartComponent,u.t],pipes:[u.g],styles:[".btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}.vertical[_ngcontent-%COMP%]{-webkit-writing-mode:tb-rl;-ms-writing-mode:tb-rl;writing-mode:tb-rl;-webkit-transform:rotate(90deg);transform:rotate(90deg);white-space:nowrap;display:block;bottom:0;width:20px;height:20px}.chartjs-render-monitor[_ngcontent-%COMP%]{max-height:350px}.xScale[_ngcontent-%COMP%]{margin-left:487px;font-size:16px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 462px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),ps),gs=r("GmXA"),us=r("Nwm+"),fs=r("k6ZE");function bs(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openMvcFreightModal("Add",null)})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function vs(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",11),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function xs(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",12),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var ys,Cs=((ys=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.datePipe=a,this.user=o,this.modalService=r,this.startTime=new Date((new Date).setDate((new Date).getDate()-7)),this.endTime=new Date,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.common.refresh=this.refresh.bind(this),this.viewMvcFreightStaement()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"viewMvcFreightStaement",value:function(){var e=this;if(this.startTime&&this.endTime){var t={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime)};console.log("params",t),++this.common.loading,this.api.post("FrieghtRate/getMVSFreightInvoices",t).subscribe((function(t){if(--e.common.loading,e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};"Invoice Date"===a&&(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}else this.common.showError("Dates cannot be blank.")}},{key:"getTableColumns",value:function(){var e=this,t=[];return console.log("Data=",this.data),this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)console.log("doc index value:",n[e.headings[a]]),e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black",action:""};e.valobj.Action={class:"",icons:e.actionIcon(n)},t.push(e.valobj)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"actionIcon",value:function(e){var t=[];return e._islocked||(t.push({class:"far fa-eye",action:this.lrAssign.bind(this,e)}),this.user.permission.edit&&t.push({class:"far fa-edit",action:this.openMvcFreightModal.bind(this,"Edit",e)}),this.user.permission.delete&&t.push({class:"fas fa-trash-alt",action:this.deleteMvsStatement.bind(this,e)})),e._lrcount>0&&t.push({class:"fas fa-print",action:this.printMVSInvoice.bind(this,e)}),t}},{key:"lrAssign",value:function(e){var t=this;this.common.handleModalSize("class","modal-lg","1300"),this.common.params={row:e},this.modalService.open(gs.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){console.log("Date:",e),e&&t.viewMvcFreightStaement()}))}},{key:"refresh",value:function(){this.viewMvcFreightStaement()}},{key:"openMvcFreightModal",value:function(e,t,n){var a=this;console.log("row:",t),this.common.params={mvsFreightId:!!t&&t._id},this.modalService.open(us.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){a.viewMvcFreightStaement()}))}},{key:"deleteMvsStatement",value:function(e){var t=this;console.log("row:",e);var n={id:e._id};e._id&&(this.common.params={title:"Delete  ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("FrieghtRate/deleteMVSFreightInvoices",n).subscribe((function(e){t.common.loading--,e.data[0].r_id?(t.common.showToast("Deleted successfully"),t.viewMvcFreightStaement()):t.common.showError(e.data[0].r_msg)}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}},{key:"printMVSInvoice",value:function(e){this.common.params={invoice:{id:e._id}},this.modalService.open(fs.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then((function(e){console.log("Date:",e)}))}}]),e}()).\u0275fac=function(e){return new(e||ys)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},ys.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ys,selectors:[["mvs-freight-statement"]],decls:18,vars:8,consts:[[2,"border","0px"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","m-0",3,"click"],["class","btn btn-primary m-0",3,"click",4,"ngIf"],["id","mvsStatement",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"btn","btn-primary","m-0",3,"click"],["id","mvsStatement",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"MVS Freight Statement"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"button",6),m["\u0275\u0275listener"]("click",(function(){return t.viewMvcFreightStaement()})),m["\u0275\u0275text"](12,"Search"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",5),m["\u0275\u0275template"](14,bs,2,0,"button",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div"),m["\u0275\u0275template"](16,vs,1,2,"smart-table",8),m["\u0275\u0275template"](17,xs,2,0,"div",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.data&&t.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[p.s,p.v,p.r,me.a,u.u,E.a],styles:['[_nghost-%COMP%]     .tableFixHead table tr td i{width:18px;text-align:center;margin:4px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye{color:red;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:before{content:"View";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:16px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-eye:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt{color:#f53004;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-12px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:#f53004;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f53004;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-trash-alt:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print{color:#773fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:before{content:"Print";display:block;position:absolute;top:0;left:0;background-color:#773fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #773fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-print:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr{color:#ea3fff;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span{position:absolute;display:none;padding:10px 26px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:before{content:"Rate";display:block;position:absolute;top:0;left:0;background-color:#ea3fff;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ea3fff;position:absolute;bottom:-5px;right:18px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-inr:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span{position:absolute;display:none;padding:10px 22px;font-weight:400;font-size:11px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:14px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-edit:hover span{display:block}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file{color:#000;font-size:18px;cursor:pointer}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span{position:absolute;display:none;padding:10px 42px;font-weight:400;font-size:11px;left:-40px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:before{content:"Support Doc";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .tableFixHead table tr td i.fa-file:hover span{display:block}nb-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;border-radius:3px;text-transform:capitalize;width:100%}']}),ys),_s=r("zKWU");function Ss(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",2),m["\u0275\u0275text"](1," No Data Available On That Time Period ! "),m["\u0275\u0275elementEnd"]())}function Ms(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",3),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var ks,ws=((ks=function(){function e(t,n,a){i(this,e),this.common=t,this.api=n,this.modalService=a,this.unMerge=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getUnmergeStateList()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getUnmergeStateList()}},{key:"getUnmergeStateList",value:function(){var e=this;this.common.loading++,this.api.get("HaltOperations/getUnmergedLrVehicles?").subscribe((function(t){e.common.loading--,console.log("Res:",t),e.unMerge=t.data||[],e.setTable()}),(function(t){e.common.loading--,e.common.showError(),console.log("Error:",t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(),columns:this.genearateColumns()}}},{key:"generateHeadings",value:function(){var e={};for(var t in this.unMerge[0])"_"!=t.charAt(0)&&(e[t]={title:this.formatTitle(t),placeholder:this.formatTitle(t)});return e}},{key:"genearateColumns",value:function(){var e=this,t=[];return this.unMerge.map((function(n){var a={};for(var o in e.generateHeadings())"Action"==o?a.Action={class:"fas fa-eye",action:e.lrState.bind(e,n)}:a[o]={value:n[o],class:"black"};t.push(a)})),t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"lrState",value:function(e){this.common.params={unMergeStateData:{vehicleId:e.vehicle_id,regno:e.regno}},this.modalService.open(_s.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||ks)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r))},ks.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ks,selectors:[["unmerge-lrstate"]],decls:8,vars:2,consts:[["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Unmerge LR State"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275template"](5,Ss,2,0,"div",0),m["\u0275\u0275elementStart"](6,"div"),m["\u0275\u0275template"](7,Ms,1,2,"smart-table",1),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",0==t.unMerge.length),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.unMerge.length>0))},directives:[p.s,p.v,p.r,u.u,E.a],styles:[""]}),ks),Os=r("meIB");function Ps(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",5),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().addSupplierAssociation()})),m["\u0275\u0275text"](1,"Add"),m["\u0275\u0275elementEnd"]()}}function Es(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",6),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ts,Ds=((Ts=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.activeModal=r,this.supplierAssociationData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.common.refresh=this.refresh.bind(this),this.getvehicleSupplierData()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getvehicleSupplierData()}},{key:"getvehicleSupplierData",value:function(){var e=this;this.common.loading++,this.api.get("ManageParty/getVehicleSupplierAssoc?").subscribe((function(t){e.common.loading--,console.log("res:",t),e.supplierAssociationData=t.data||[],e.supplierAssociationData.length?e.setTable():e.resetTable()}),(function(t){e.common.loading--,console.log(t)}))}},{key:"resetTable",value:function(){this.table.data={headings:{},columns:[]}}},{key:"setTable",value:function(){return this.table.data={headings:this.generateHeadings(),columns:this.getTableColumns()},!0}},{key:"generateHeadings",value:function(){var e={};for(var t in this.supplierAssociationData[0])"_"!=t.charAt(0)&&(e[t]={title:t,placeholder:this.formatTitle(t)});return e}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.supplierAssociationData.map((function(n){var a={};for(var o in e.generateHeadings())a[o]="Action"==o?{value:"",isHTML:!1,action:null,icons:e.actionIcons(n)}:{value:n[o],class:"black",action:""};t.push(a)})),t}},{key:"actionIcons",value:function(e){var t=[];return this.user.permission.edit&&t.push({class:"fa fa-edit mr-3",action:this.editSupplier.bind(this,e)}),this.user.permission.delete&&t.push({class:"fa fa-trash",action:this.deleteSupplier.bind(this,e)}),t}},{key:"addSupplierAssociation",value:function(){var e=this;this.modalService.open(Os.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(t){t.response&&e.getvehicleSupplierData()}))}},{key:"editSupplier",value:function(e){var t=this;this.common.params={vehicleSupplier:{id:e._rowid}},this.modalService.open(Os.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getvehicleSupplierData()}))}},{key:"deleteSupplier",value:function(e){var t=this;console.log("delete",e);var n={rowId:e._rowid};e._rowid&&(this.common.params={title:"Delete Vehicle Supplier ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then((function(e){e.response&&(t.common.loading++,t.api.post("ManageParty/deleteVehicleSupplierAssoc",n).subscribe((function(e){t.common.loading--,console.log("res",e),t.common.showToast(e.msg),t.getvehicleSupplierData()}),(function(e){t.common.loading--,console.log("Error: ",e)})))})))}}]),e}()).\u0275fac=function(e){return new(e||Ts)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b))},Ts.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ts,selectors:[["vehicle-supplier-association"]],decls:10,vars:2,consts:[[1,"row"],[1,"col-9"],[1,"col-3"],["class","btn btn-primary","name","add",3,"click",4,"ngIf"],["id","vehcileSupplier",3,"data","settings",4,"ngIf"],["name","add",1,"btn","btn-primary",3,"click"],["id","vehcileSupplier",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Supplier Association"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275template"](7,Ps,2,0,"button",3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"nb-card-body"),m["\u0275\u0275template"](9,Es,1,2,"smart-table",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.supplierAssociationData&&t.supplierAssociationData.length))},directives:[p.s,p.v,u.u,p.r,E.a],styles:['[_nghost-%COMP%]     .fa-trash{color:red;font-size:16px;cursor:pointer}[_nghost-%COMP%]     .fa-trash span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-trash span:before{content:"Delete";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-trash:hover span{display:block}[_nghost-%COMP%]     .fa-edit{color:#000;font-size:16px;cursor:pointer}[_nghost-%COMP%]     .fa-edit span{position:absolute;display:none;padding:10px 28px;font-weight:400;font-size:11px;left:-22px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:9999}[_nghost-%COMP%]     .fa-edit span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#000;border-radius:3px;padding:5px 10px;color:#fff;width:100%}[_nghost-%COMP%]     .fa-edit span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;position:absolute;bottom:-5px;right:24px}[_nghost-%COMP%]     .fa-edit:hover span{display:block}','.thead[_ngcontent-%COMP%]{color:#fff;background-color:#263238}.thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{font-weight:500;padding:8px}.thead-dark[_ngcontent-%COMP%]{color:#fff;font-size:18px;background-color:#263238}.arrow[_ngcontent-%COMP%]{font-size:18px;margin:8px}.btn[_ngcontent-%COMP%]{background:#f2f2f2;font-weight:700;margin-right:5px;margin-left:5px;margin-top:5px;display:inline-block;font-size:14px;text-align:center;height:30px;line-height:5px;border-radius:4px;font-family:Exo;color:#000;cursor:pointer}.btn.btn-danger[_ngcontent-%COMP%]{background-color:#da2240;color:#fff;background-color:#f05e77}.btn.btn-danger[_ngcontent-%COMP%]:active, .btn.btn-danger[_ngcontent-%COMP%]:focus, .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e22242}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3c6ac7;color:#fff;background-color:#73a1ff}.btn.btn-primary[_ngcontent-%COMP%]:active, .btn.btn-primary[_ngcontent-%COMP%]:focus, .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0054ff}.btn.btn-default.btn-sm[_ngcontent-%COMP%]{float:right;margin-right:50%;background:#dcd9d9;color:#000;font-size:12px}.nb-theme-corporate[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-track-piece{background:#f1f1f1}nb-card-body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;cursor:pointer;border-radius:0}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:start:decrement{background:linear-gradient(120deg,#696969 40%,transparent 41%),linear-gradient(240deg,#696969 40%,transparent 41%),linear-gradient(0deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:vertical:end:increment{background:linear-gradient(300deg,#696969 40%,transparent 41%),linear-gradient(60deg,#696969 40%,transparent 41%),linear-gradient(180deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:end:increment{background:linear-gradient(210deg,#696969 40%,transparent 41%),linear-gradient(330deg,#696969 40%,transparent 41%),linear-gradient(90deg,#696969 30%,transparent 31%);background-color:#b6b6b6}[_ngcontent-%COMP%]::-webkit-scrollbar-button:horizontal:start:decrement{background:linear-gradient(30deg,#696969 40%,transparent 41%),linear-gradient(150deg,#696969 40%,transparent 41%),linear-gradient(270deg,#696969 30%,transparent 31%);background-color:#b6b6b6}.no-data[_ngcontent-%COMP%]{font-size:18px;color:#f73c3c;font-weight:600;text-align:center;width:100%}[_nghost-%COMP%]     .nb-home:before{content:"\\f015"}[_nghost-%COMP%]     .nb-notifications:before{content:"\\f145"}[_nghost-%COMP%]     .nb-title:before{content:"\\f02d"}[_nghost-%COMP%]     .nb-list:before{content:"\\f016"}[_nghost-%COMP%]     .fa-book:before{content:"\\f0d6"}[_nghost-%COMP%]     .fa-signal:before{content:"\\f043"}[_nghost-%COMP%]     .fa-truck:before{content:"\\f0d1"}[_nghost-%COMP%]     .fa-cog:before{content:"\\f013"}[_nghost-%COMP%]     .fa-database:before{content:"\\f15c";font-size:14px}[_nghost-%COMP%]     .fa-money:before{content:"\\f283";font-size:14px}[_nghost-%COMP%]     .control-icon.nb-notifications:before{content:"\\f0f3";display:block;font-family:FontAwesome;font-size:22px;margin-right:8px;margin-top:8px}[_nghost-%COMP%]     nb-base-calendar.medium nb-card{width:100%}[_nghost-%COMP%]     nb-base-calendar.medium nb-card-header{padding:10px 20px;border-bottom:1px solid #eaeaea}']}),Ts),Is=r("VTeO");function Fs(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",9),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().addEditGpsApiUrl()})),m["\u0275\u0275text"](1,"Add Gps Api Url"),m["\u0275\u0275elementEnd"]()}}function As(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",10),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Vs,Ls=((Vs=function(){function e(t,n,a,o){i(this,e),this.modalService=t,this.common=n,this.user=a,this.api=o,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.mvGpsApiDetails=[],this.getMvGpsDetails()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getMvGpsDetails",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getMvGpsDetailsWrtFo").subscribe((function(t){console.log("Res:",t),e.common.loading--,e.clearAllTableData(),t.data?(e.mvGpsApiDetails=t.data,e.setTable()):e.common.showError("Data Not Found")}),(function(t){e.common.loading--,e.common.showError(t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.mvGpsApiDetails[0]),columns:this.getColumns(this.mvGpsApiDetails,this.mvGpsApiDetails[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]="Action"==i?{value:"",action:null,icons:n.actionIcons(e)}:{value:e[i],class:"black",action:""};a.push(o)})),a}},{key:"actionIcons",value:function(e){var t=[];return this.user.permission.edit&&t.push({class:"far fa-edit",action:this.addEditGpsApiUrl.bind(this,e)}),this.user.permission.delete&&t.push({class:"fas fa-trash",action:this.deleteGpsApiUrl.bind(this,e._id)}),t}},{key:"addEditGpsApiUrl",value:function(e){var t=this;this.common.params=null,e&&(this.common.params=e),this.modalService.open(Is.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then((function(e){e.response&&t.getMvGpsDetails()}))}},{key:"deleteGpsApiUrl",value:function(e){var t=this,n={rowId:e};this.common.loading++,this.api.post("GpsData/deleteMvGpsDetails",n).subscribe((function(e){--t.common.loading,t.common.showToast(e.msg),t.getMvGpsDetails()}),(function(e){--t.common.loading,console.error(" Api Error:",e)}))}},{key:"clearAllTableData",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}}]),e}()).\u0275fac=function(e){return new(e||Vs)(m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](s.a))},Vs.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Vs,selectors:[["mv-gps-apis"]],decls:11,vars:2,consts:[[2,"border","0px","height","100%"],[1,"gps-api"],[1,"row"],[1,"col-2"],[2,"margin-top","12px"],[1,"col-10"],["type","button","style","margin-left: 752px;","class","btn btn-primary",3,"click",4,"ngIf"],[1,"mv-gps-api"],["id","PaymentRequest",3,"data","settings",4,"ngIf"],["type","button",1,"btn","btn-primary",2,"margin-left","752px",3,"click"],["id","PaymentRequest",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h5",4),m["\u0275\u0275text"](5,"MV GPS APIS"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",5),m["\u0275\u0275template"](7,Fs,2,0,"button",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"nb-card-body"),m["\u0275\u0275elementStart"](9,"div",7),m["\u0275\u0275template"](10,As,1,2,"smart-table",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.user.permission.add),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.mvGpsApiDetails&&t.mvGpsApiDetails.length))},directives:[p.s,p.v,u.u,p.r,E.a],styles:["[_nghost-%COMP%]    .fa-trash{color:red}"]}),Vs);function zs(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",7),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var js,Rs=((js=function(){function e(t,n,a){i(this,e),this.common=t,this.api=n,this.modalService=a,this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.gpsApiHistory=[],this.getGpsApiHistory(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getGpsApiHistory()}},{key:"getGpsApiHistory",value:function(){var e=this;this.common.loading++,this.api.get("GpsData/getGpsApiHistory").subscribe((function(t){console.log("Res:",t),e.common.loading--,e.resetTable(),t.data?(e.gpsApiHistory=t.data||[],e.setTable()):e.common.showError("Data Not Found")}),(function(t){e.common.loading--,e.common.showError(t)}))}},{key:"setTable",value:function(){this.table.data={headings:this.generateHeadings(this.gpsApiHistory[0]),columns:this.getColumns(this.gpsApiHistory,this.gpsApiHistory[0])}}},{key:"generateHeadings",value:function(e){var t={};for(var n in e)"_"!=n.charAt(0)&&(t[n]={title:this.formatTitle(n),placeholder:this.formatTitle(n)});return t}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumns",value:function(e,t){var n=this,a=[];return e.map((function(e){var o={};for(var i in n.generateHeadings(t))o[i]="Action"==i?{value:"",action:null}:{value:e[i],class:"TotalVeh"==i?"blue":"black",action:"TotalVeh"==i?n.vehicleHistory.bind(n,e):""};a.push(o)})),a}},{key:"resetTable",value:function(){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}}}},{key:"vehicleHistory",value:function(e){var t={view:{api:"GpsData/getAllVehicleWrtGpsApi",param:{apiId:e._apiid}},delete:{},title:"Vehicle List"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:t},this.modalService.open(zi.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||js)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r))},js.\u0275cmp=m["\u0275\u0275defineComponent"]({type:js,selectors:[["mv-gps-api-history"]],decls:9,vars:1,consts:[[2,"border","0px","height","100%"],[1,"gps-api"],[1,"row"],[1,"col-8"],[2,"margin-top","12px"],[1,"mv-gps-api-history"],["id","apiHistory",3,"data","settings",4,"ngIf"],["id","apiHistory",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h5",4),m["\u0275\u0275text"](5,"MV GPS API History"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",5),m["\u0275\u0275template"](8,zs,1,2,"smart-table",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.gpsApiHistory&&t.gpsApiHistory.length))},directives:[p.s,p.v,p.r,u.u,E.a],styles:["[_nghost-%COMP%]    .blue{color:#00f}"]}),js);function Hs(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",13),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ns,Us=((Ns=function(){function e(t,n,a,o,r,l){var s;i(this,e),this.datePipe=t,this.api=n,this.common=a,this.dateService=o,this.user=r,this.modalService=l,this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.routeid=0,this.routename="",s=new Date,this.endDate=new Date(s),this.startDate=new Date,console.log("start and enddate",this.startDate,this.endDate),this.getRouteTrips(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getRouteTrips()}},{key:"getRouteTrips",value:function(){var e=this;this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}};var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",t,n);var a={vehicleId:this.vehicleId,Date:t,routeId:this.routeid};console.log("params",a),this.common.loading++,this.api.post("TripExpenseVoucher/getRouteTrips",a).subscribe((function(t){if(e.common.loading--,console.log("Res:",t.data),e.vehicleTrips=t.data,null!=e.vehicleTrips){console.log("vehicleTrips",e.vehicleTrips);var n=e.vehicleTrips[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.headings.action={title:"Action",placeholder:"Action"},e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.common.showToast("No Record Found !!")}),(function(t){e.common.loading--,console.log("Err:",t)}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleTrips.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[t]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[t][this.headings[n]],class:"black",action:""},this.valobj.action={value:"",isHTML:!0,action:null,icons:[{class:"fa fa-pencil-square-o  edit-btn",isHTML:"<h2>test</h2>",action:this.viewRouteTimeTable.bind(this,this.vehicleTrips[t])}]};this.valobj.style={background:this.vehicleTrips[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"viewRouteTimeTable",value:function(e){console.log("hello dost"),this.common.params={routeTime:{vehicleId:this.vehicleId,routeId:e.id,routeTimeId:0,routetrip:1}},this.modalService.open(fl.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"update",value:function(e){console.log("vehicle trip",e),this.common.params={vehicleTrip:e}}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}},{key:"searchRoute",value:function(e){this.routeid=e.id,this.routename=e.name}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}}]),e}()).\u0275fac=function(e){return new(e||Ns)(m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](Ae.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Ns.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ns,selectors:[["route-trip"]],decls:21,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],["url","suggestion/getRoutesWrtFo","display","name","placeholder","Search Route",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-2"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Route Trips"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",3),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"div",5),m["\u0275\u0275elementStart"](10,"auto-suggestion",6),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",4),m["\u0275\u0275elementStart"](12,"div",5),m["\u0275\u0275elementStart"](13,"auto-suggestion",7),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchRoute(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",8),m["\u0275\u0275elementStart"](15,"uj-date-time-picker",9),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",10),m["\u0275\u0275elementStart"](17,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getRouteTrips()})),m["\u0275\u0275text"](18,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](19,Hs,1,2,"smart-table",12),m["\u0275\u0275element"](20,"br"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[p.s,p.v,p.r,Ht.a,me.a,u.u,E.a],styles:['nb-card-header[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #efefef;margin-bottom:10px}.tabset[_ngcontent-%COMP%]{padding:0!important;margin-bottom:20px!important}nb-card-body[_ngcontent-%COMP%]{padding:0 15px}.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}[_nghost-%COMP%]     .tableFixHead{overflow:auto;max-height:calc(100vh - 235px);height:auto!important}[_nghost-%COMP%]     td i.fa-pencil-square-o{background-color:#04a9f5;color:#fff;padding:5px;border-radius:3px;position:relative}[_nghost-%COMP%]     td i.fa-pencil-square-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-pencil-square-o span{position:absolute;display:none;padding:11px 21px;left:-9px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-pencil-square-o span:before{content:"Edit";display:block;position:absolute;top:0;left:0;background-color:#04a9f5;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-pencil-square-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #04a9f5;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-question-circle{background-color:#1de9b6;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-16px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Report";display:block;position:absolute;top:0;left:0;background-color:#1de9b6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1de9b6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-trash{background-color:#f44236;color:#fff;padding:5px;border-radius:3px;margin-left:4px;position:relative}[_nghost-%COMP%]     td i.fa-trash:hover span{display:block}[_nghost-%COMP%]     td i.fa-trash span{position:absolute;display:none;padding:11px 24px;left:-14px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-trash span:before{content:"trash";display:block;position:absolute;top:0;left:0;background-color:#f44236;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-trash span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #f44236;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#ff8091;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#ff8091;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #ff8091;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-star{background-color:#8280ff;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-star:hover span{display:block}[_nghost-%COMP%]     td i.fa-star span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-star span:before{content:"Events";display:block;position:absolute;top:0;left:0;background-color:#8280ff;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-star span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #8280ff;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-bar{background-color:#80f54f;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-bar:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-bar span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-bar span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#80f54f;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-bar span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #80f54f;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-handshake-o{background-color:#15986e;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-handshake-o:hover span{display:block}[_nghost-%COMP%]     td i.fa-handshake-o span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-handshake-o span:before{content:"Settlement";display:block;position:absolute;top:0;left:0;background-color:#15986e;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-handshake-o span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #15986e;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-chart-pie{background-color:#4ff5e6;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-chart-pie:hover span{display:block}[_nghost-%COMP%]     td i.fa-chart-pie span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-chart-pie span:before{content:"Status";display:block;position:absolute;top:0;left:0;background-color:#4ff5e6;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-chart-pie span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4ff5e6;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}']}),Ns);function Gs(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",11),m["\u0275\u0275elementStart"](1,"button",12),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getTripSummary()})),m["\u0275\u0275text"](2,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function Bs(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275element"](1,"chart",14),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("type",n.Config.type)("data",n.Config.data)("options",n.Config.options)}}function Ws(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",15),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Ks,$s,qs=(($s=function(){function e(t,n,a,o,r,l){i(this,e),this.api=t,this.common=n,this.theme=a,this.user=o,this.datepipe=r,this.modalService=l,this.Hours=[],this.dateDay=[],this.startTime=new Date,this.endTime=new Date,this.lastTrend="",this.showtrend=!1,this.showTables=!1,this.Details=[],this.siteDetails=[],this.vehicleDetails=[],this.kmpdDate=[],this.showPeriod=!0,this.dateStr=[],this.trendType="11",this.siteUnloading=[],this.vehicleUnloading=[],this.onWardDistance=[],this.week_month_number="4",this.period="0",this.url="",this.flag="Loading",this.bgColor="#00695C",this.yScale="Hours",this.onWardFlag=!1,this.fromDate="",this.vehicleTrips=[],this.headings=[],this.valobj={},this.lastDurationCategory="",this.element={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.Config={type:"line",data:null,options:{responsive:!0,title:{display:!0,text:"Route Summary",fontSize:14,fontColor:"blue"},maintainAspectRatio:!1,lineTension:0,legend:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,scaleLabel:{display:!0,labelString:"Month"}},y:{display:!0,scaleLabel:{display:!0,labelString:"Value"}}}}},this.common.refresh=this.refresh.bind(this);var s=new Date;this.startTime=new Date(s.setDate(s.getDate()-7)),this.getTripSummary()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTripSummary()}},{key:"refreshData",value:function(e){console.log("Row------",e);var t=[],n=[];Object.keys(e).forEach((function(a){if("Kpi"!==a&&"_kpi_id"!=a){t.push(a);var o=parseInt(e[a].split("$")[0]);n.push(isNaN(o)?0:o)}})),this.Config.data={labels:t,datasets:[{label:"Values",backgroundColor:"#FF0000",borderColor:"#FF0000",data:n,fill:!1,lineTension:0}],options:{legend:!1}}}},{key:"getTripSummary",value:function(){var e=this;this.headings=[],this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.Config.data=null;var t=this.common.dateFormatter1(this.startTime),n=this.common.dateFormatter1(this.endTime);console.log("start & end",t,n);var a={startDate:t,endDate:n};console.log("params",a),this.common.loading++,this.api.post("TripExpenseVoucher/getRouteTripSummary",a).subscribe((function(t){if(e.common.loading--,console.log("Res:",t.data),e.vehicleTrips=t.data,null!=e.vehicleTrips){console.log("vehicleTrips",e.vehicleTrips);var n=e.vehicleTrips[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.common.showToast("No Record Found !!")}),(function(t){e.common.loading--,console.log("Err:",t)}))}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleTrips.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)console.log("column*******",this.headings[n]),this.valobj[this.headings[n]]="Kpi"==this.headings[n]?{value:this.vehicleTrips[t][this.headings[n]],class:"black",action:this.refreshData.bind(this,this.vehicleTrips[t])}:{value:this.getSplitData(this.vehicleTrips[t][this.headings[n]]),class:0!=this.getSplitData(this.vehicleTrips[t][this.headings[n]])?"blue":"black",action:0!=this.getSplitData(this.vehicleTrips[t][this.headings[n]])?this.vehicleHistory.bind(this,this.vehicleTrips[t][this.headings[n]],this.vehicleTrips[t]._kpi_id):""};this.valobj.style={background:this.vehicleTrips[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"getSplitData",value:function(e){return e.split("$")[0]}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"vehicleHistory",value:function(e,t){console.log("column",e),console.log("id",t);var n={view:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:e.split("$")[1],endDate:e.split("$")[2],type:t}},viewModal:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:"_start",endDate:"_end",type:"_type",levelId:"_id"}},title:"Trip Data"};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:n},this.modalService.open(zi.a,{size:"lg",container:"nb-layout",backdrop:"static"})}}]),e}()).\u0275fac=function(e){return new(e||$s)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](p.Kb),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](P.r))},$s.\u0275cmp=m["\u0275\u0275defineComponent"]({type:$s,selectors:[["trip-summary"]],decls:13,vars:8,consts:[[2,"border","0px"],[2,"padding","15px 15px 0px"],[1,"model-body"],[1,"row"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],["class","col-sm-2",4,"ngIf"],["class","col-sm-12",4,"ngIf"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],[1,"col-sm-2"],[1,"btn","btn-primary",3,"click"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","200px","max-height","330px",3,"type","data","options"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"uj-date-time-picker",5),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",4),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](8,Gs,3,0,"div",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275template"](10,Bs,2,3,"div",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](11,"div",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](12,Ws,1,2,"smart-table",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","0"==t.period||"31"==t.trendType),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.Config.data),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[p.s,p.r,me.a,u.u,We.ChartComponent,E.a],styles:["input[type=text][_ngcontent-%COMP%]{width:100%;height:30px;padding-left:5px;font-size:10px;border:1px solid #324148;border-radius:3px}.btn-primary[_ngcontent-%COMP%]{padding:6px 15px;border-radius:5px;border:0;text-transform:capitalize;cursor:pointer!important;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#324148;display:table;width:100%;table-layout:fixed;color:#fff}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 405px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:320px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:110px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}[_nghost-%COMP%]     .blue{color:#00f;cursor:pointer}[_nghost-%COMP%]     .black{color:#000;cursor:pointer}[_nghost-%COMP%]     th:first-child{width:30px!important}[_nghost-%COMP%]     th:nth-child(2){width:90px!important}[_nghost-%COMP%]     th{width:60px!important}"]}),$s),Js=((Ks=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.endTime=new Date,this.startTime=new Date((new Date).setDate(new Date(this.endTime).getDate()-7)),this.deviationData=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.data=[],this.headings=[],this.valobj={},this.apiUrl="ViaRoutes/routeDeviation ",this.getrouteDeviations()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getrouteDeviations",value:function(){var e=this;if(this.common.dateFormatter1(this.startTime)>this.common.dateFormatter1(this.endTime))this.common.showError("Start Date should less then End Date");else{var t={startTime:this.common.dateFormatter1(this.startTime),endTime:this.common.dateFormatter1(this.endTime)};++this.common.loading,this.api.post(this.apiUrl,t).subscribe((function(t){if(--e.common.loading,console.log("API Res:",t),e.data=[],e.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},e.headings=[],e.valobj={},t.data){e.data=t.data;var n=e.data[0];for(var a in n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:e.formatTitle(a),placeholder:e.formatTitle(a)};e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns()}}),(function(t){--e.common.loading,e.common.showError(t),console.log("Error: ",t)}))}}},{key:"getTableColumns",value:function(){var e=this,t=[];return this.data.map((function(n){e.valobj={};for(var a=0;a<e.headings.length;a++)"Action"==e.headings[a]?(console.log("Test"),e.valobj[e.headings[a]]={value:"",action:null}):e.valobj[e.headings[a]]={value:n[e.headings[a]],class:"black"};t.push(e.valobj)})),t}},{key:"actionIcons",value:function(e){}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}()).\u0275fac=function(e){return new(e||Ks)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},Ks.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ks,selectors:[["route-deviations"]],decls:15,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-md-2","pr-0"],[3,"isTime","dateTimeValue","onChanged"],[3,"isTime","isStart","dateTimeValue","onChanged"],[1,"col-sm-2"],[1,"btn","btn-primary",3,"click"],["id","routedeviations",2,"width","100%",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"h5"),m["\u0275\u0275text"](3,"Route Deviations"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"nb-card-body"),m["\u0275\u0275elementStart"](5,"div",1),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",5),m["\u0275\u0275elementStart"](11,"button",6),m["\u0275\u0275listener"]("click",(function(){return t.getrouteDeviations()})),m["\u0275\u0275text"](12,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",1),m["\u0275\u0275element"](14,"smart-table",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("isTime",!1)("dateTimeValue",t.startTime),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("isTime",!1)("isStart",!1)("dateTimeValue",t.endTime),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("data",t.table.data)("settings",t.table.settings))},directives:[p.s,p.v,p.r,me.a,E.a],styles:[""]}),Ks),Ys=r("uk0L");function Zs(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",15),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.name)}}function Qs(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",16),m["\u0275\u0275element"](1,"chart",17),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("type",n.Config.type)("data",n.Config.data)("options",n.Config.options)}}var Xs,ed=((Xs=function(){function e(t,n,a,o,r,l){var s=this;i(this,e),this.common=t,this.api=n,this.modalService=a,this.activeModal=o,this.dateService=r,this.user=l,this.startTime=null,this.endTime=null,this.reportType=1,this.modelType=0,this.modelTypes=[],this.Config={type:"line",data:null,options:{responsive:!0,title:{display:!0,text:"Daily Fuel Consumption",fontSize:14,fontColor:"blue"},maintainAspectRatio:!1,lineTension:0,legend:{display:!1},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,scaleLabel:{display:!0,labelString:"Date"}},y:{display:!0,scaleLabel:{display:!0,labelString:"Fuel"}}},onClick:function(e,t){if(console.log("e",e,t),t.length){var n=t[0]._index;console.log(n),console.log("month data",s.Config.data);var a=s.Config.data.labels[n];console.log("Label:",a,"Value:",s.Config.data.datasets[0].data[n]);var o=s.sortArray(a);console.log("fuel_daily_cumsion:",o,s.fuel_daily_cumsion);var i=s.fuel_daily_cumsion.filter((function(e){return e.Date.split("-")[1]==o&&(console.log(e.Date.split("-")[1],o),!0)}));console.log("Data:",i),s.openfueldailycunsumption(i)}}}},this.flagType="1",this.fuel_daily_cumsion=[],this.fuel_daily_cumsion_level2=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={};var d=new Date;this.endTime=new Date(d),new Date(d.getFullYear(),d.getMonth(),0).getDate(),this.startTime=new Date(d.setDate(d.getDate()-90)),this.common.refresh=this.refresh.bind(this),this.getVehicleModals(),this.getFuelDailyConsumption()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getFuelDailyConsumption()}},{key:"changeModal",value:function(e){this.flagType=e}},{key:"getVehicleModals",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/getVehicleModals").subscribe((function(t){e.common.loading--,e.modelTypes=t&&t.data?t.data:[]}),(function(t){e.common.loading--,console.log("Err:",t)}))}},{key:"getFuelDailyConsumption",value:function(){var e=this;if(this.Config.data=null,this.startTime>this.endTime)this.common.showToast("start date should be less than end date");else{var t={startDate:this.common.dateFormatter1(this.startTime),endDate:this.common.dateFormatter1(this.endTime),flagtype:1,modelType:this.modelType,reportType:this.reportType};console.log("params",t),this.common.loading++,this.api.post("Fuel/getfueldailyconsumption",t).subscribe((function(t){e.common.loading--,console.log("Res json data:",t),t.data&&(e.getChartData(t.data),e.fuel_daily_cumsion=[],e.fuel_daily_cumsion_level2=[],t.data[0].y_json_data_level_1&&(e.fuel_daily_cumsion=JSON.parse(t.data[0].y_json_data_level_1),e.fuel_daily_cumsion_level2=JSON.parse(t.data[0].y_json_data_level_2),console.log("double data",e.fuel_daily_cumsion)))}),(function(t){e.common.loading--,console.log("Err:",t)}))}}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(e){var t=this,n=[];return e||(e=this.fuel_daily_cumsion),e.map((function(e){t.valobj={};for(var a=0;a<t.headings.length;a++)t.valobj[t.headings[a]]={value:e[t.headings[a]],class:"black",action:""};n.push(t.valobj)})),n}},{key:"getChartData",value:function(e){var t=this,n=[],a=[];e.map((function(e){if(e.y_date){var o=t.dateService.format(e.y_date,"dd MMM yyyy");n.push("1"==t.flagType?o.split(" ")[0]:o.split(",")[0])}e.y_consumption&&a.push(e.y_consumption)})),this.Config.data={labels:n,datasets:[{label:"Values",backgroundColor:"#3835ea",borderColor:"#3835ea",data:a,fill:!1,lineTension:0}],options:{legend:!1}}}},{key:"sortArray",value:function(e){console.log("month value",e);var t=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e)+1;return console.log("searchvalue",t),t<=9?"0"+t:t+""}},{key:"openfueldailycunsumption",value:function(e){this.common.params={reportType:this.reportType,consumtiondata:e,fueldailycumsionlevel2:this.fuel_daily_cumsion_level2},this.modalService.open(Ys.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||Xs)(m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](P.b),m["\u0275\u0275directiveInject"](Ji.a),m["\u0275\u0275directiveInject"](c.a))},Xs.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Xs,selectors:[["fuel-daily-consumption"]],decls:31,vars:9,consts:[[1,"row"],[1,"col-10"],[1,"col-sm-2"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isStart","isTime","onChanged"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-100","pt-1","pb-1",2,"border-radius","3px",3,"click"],[1,"border",2,"height","2px","color","darkslategray","margin-top","10px","margin-bottom","10px"],["class","col-sm-12",4,"ngIf"],[3,"value"],[1,"col-sm-12"],[2,"margin-right","5px","min-height","400px","max-height","400px",3,"type","data","options"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Daily Fuel Consumption"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body"),m["\u0275\u0275elementStart"](7,"div",0),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",3),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",2),m["\u0275\u0275elementStart"](11,"uj-date-time-picker",4),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endTime=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",2),m["\u0275\u0275elementStart"](13,"select",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.reportType=e}))("change",(function(){return t.getFuelDailyConsumption()})),m["\u0275\u0275elementStart"](14,"option",6),m["\u0275\u0275text"](15,"Mid 50%"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"option",7),m["\u0275\u0275text"](17,"Median"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"option",8),m["\u0275\u0275text"](19,"Average"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",2),m["\u0275\u0275elementStart"](21,"select",9),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.modelType=e})),m["\u0275\u0275elementStart"](22,"option",10),m["\u0275\u0275text"](23,"All"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](24,Zs,2,2,"option",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",2),m["\u0275\u0275elementStart"](26,"button",12),m["\u0275\u0275listener"]("click",(function(){return t.getFuelDailyConsumption()})),m["\u0275\u0275text"](27,"submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](28,"div",13),m["\u0275\u0275elementStart"](29,"div",0),m["\u0275\u0275template"](30,Qs,2,3,"div",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("dateTimeValue",t.startTime)("isTime",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endTime)("isStart",!1)("isTime",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.reportType),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngModel",t.modelType),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",t.modelTypes),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",t.Config.data))},directives:[p.s,p.v,p.r,me.a,ce.D,ce.r,ce.u,ce.w,ce.G,u.t,u.u,We.ChartComponent],styles:[".radio-type[_ngcontent-%COMP%]{padding-bottom:10px;font-size:18px;text-align:center;color:#00008b}.radio-type[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{vertical-align:middle;width:20px;height:20px!important;margin:0 5px 0 8px}"]}),Xs);function td(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",6),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}function nd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",7),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var ad,od=((ad=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this._sanitizer=r,this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.VehicleStatusAlerts=[],this.getVehicleStatusAlerts(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getVehicleStatusAlerts()}},{key:"getVehicleStatusAlerts",value:function(){var e=this;this.common.loading++,this.api.get("HaltOperations/getFoAdminWiseVehicleStatus?").subscribe((function(t){e.common.loading--,console.log("Res: ",t.data),t.data&&(e.VehicleStatusAlerts=t.data,e.gettingTableHeader(e.VehicleStatusAlerts))}),(function(t){e.common.loading--,console.error(t),e.common.showError()}))}},{key:"gettingTableHeader",value:function(e){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=e[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);var a={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=a}this.table.data.columns=this.getTableColumns(e)}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(e){var t=this;this.valobj={};var n=[];return e.map((function(e){t.valobj={};for(var a=0;a<t.headings.length;a++)t.valobj[t.headings[a]]="Action"==t.headings[a]?{value:"",isHTML:!0,action:null,icons:t.actionIcons(e)}:"Trip"==t.headings[a]?{value:t.common.getTripStatusHTML(e._trip_status_type,e._showtripstart,e._showtripend,e._p_placement_type,e._p_loc_name),isHTML:!0}:{value:e[t.headings[a]],class:"black",action:""};n.push(t.valobj)})),n}},{key:"actionIcons",value:function(e){return[{class:"fa fa-cog delete",action:this.enterTicket.bind(this,e)}]}},{key:"openChangeStatusCustomerModal",value:function(e){var t=this,n={vehicle_id:e._vid,latch_time:e.latch_time,toTime:e.ttime,suggest:0,status:1,fo_name:e.group_name,regno:e.vehicle_name,tripName:this.common.getTripStatusHTML(e._trip_status_type,e._showtripstart,e._showtripend,e._p_placement_type,e._p_loc_name)};console.log("VehicleStatusData",n),this.common.params=n,this.common.ref_page="vsc","admin"!=this.user._loggedInBy?this.modalService.open(He.a,{size:"lg",container:"nb-layout"}).result.then((function(n){t.getVehicleStatusAlerts(),t.exitTicket(e)})):this.modalService.open(De.a,{size:"lg",container:"nb-layout"}).result.then((function(n){t.getVehicleStatusAlerts(),t.exitTicket(e)}))}},{key:"enterTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e._vid};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",a).subscribe((function(a){if(n.common.loading--,t=a,console.log(t),!t.success)return!1;n.openChangeStatusCustomerModal(e)}),(function(e){n.common.loading--,console.log(e)}))}},{key:"exitTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e._vid};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",a).subscribe((function(e){return n.common.loading--,t=e,console.log(t),!!t.sucess||(n.getVehicleStatusAlerts(),!1)}),(function(e){n.common.loading--,console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||ad)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](Ue.b))},ad.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ad,selectors:[["vehicle-status-change-by-user"]],decls:12,vars:3,consts:[[1,"row"],[1,"col-10"],[2,"padding","10px 15px"],["id","VehicleStatusAlerts",3,"data","settings",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],["id","VehicleStatusAlerts",3,"data","settings"],[1,"no-data"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle Status Changes"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body",2),m["\u0275\u0275template"](7,td,1,2,"smart-table",3),m["\u0275\u0275template"](8,nd,2,0,"div",4),m["\u0275\u0275elementStart"](9,"div",5),m["\u0275\u0275elementStart"](10,"b"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.VehicleStatusAlerts&&t.VehicleStatusAlerts.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.VehicleStatusAlerts.length),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",t.VehicleStatusAlerts.length,""))},directives:[p.s,p.v,p.r,u.u,E.a],styles:[""]}),ad);function id(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"smart-table",8),m["\u0275\u0275listener"]("filtered",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().jrxFiltered(e)})),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",a.table.data)("settings",a.table.settings)("returnFilteredData",!0)}}function rd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",9),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var ld,sd=function(e){return{active:e}},dd=((ld=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this.autoPlay="forward",this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.VehicleStatusAlerts=[],this.filteredIndexes=[],this.activeIndex=-1,this.getVehicleStatusAlerts(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleStatusAlerts()}},{key:"getVehicleStatusAlerts",value:function(){var e=this;this.filteredIndexes=[],this.modalRef=null,this.activeIndex=-1,this.common.loading++,this.api.get("HaltOperations/getFoAdminWiseTripIssues?").subscribe((function(t){e.common.loading--,console.log("Res: ",t.data),e.VehicleStatusAlerts=t.data,e.gettingTableHeader(e.VehicleStatusAlerts)}),(function(t){e.common.loading--,console.error(t),e.common.showError()}))}},{key:"gettingTableHeader",value:function(e){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=e[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);var a={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=a}this.table.data.columns=this.getTableColumns(e)}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(e){var t=this;this.valobj={};var n=[];return e.map((function(e,a){t.valobj={class:"xyz",index:a};for(var o=0;o<t.headings.length;o++)t.valobj[t.headings[o]]="Action"==t.headings[o]?{value:"",isHTML:!0,action:null,icons:t.actionIcons(e,a)}:"Trip"==t.headings[o]?{value:t.common.getTripStatusHTML(e._trip_status_type,e._showtripstart,e._showtripend,e._p_placement_type,e._p_loc_name),isHTML:!0}:{value:e[t.headings[o]],class:"black",action:""};e._class&&(t.valobj.class="selected"),n.push(t.valobj)})),n}},{key:"actionIcons",value:function(e,t){return[{class:"fa fa-cog delete",action:this.handleIconAction.bind(this,e,t)}]}},{key:"handleIconAction",value:function(e,t){this.openChangeStatusCustomerModal(e,t)}},{key:"modalOpens",value:function(e){if("forward"==this.autoPlay&&e<this.VehicleStatusAlerts.length)if(this.filteredIndexes.length){var t=this.filteredIndexes[this.filteredIndexes.indexOf(e)+1];console.log("nextInex",t),t&&this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[t],t)}else this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[e+1],e+1);else if("backward"==this.autoPlay&&e>=0)if(this.filteredIndexes.length){var n=this.filteredIndexes[this.filteredIndexes.indexOf(e)-1];console.log("previousIndex",n),n&&this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[n],n)}else this.openChangeStatusCustomerModal(this.VehicleStatusAlerts[e-1],e-1)}},{key:"openChangeStatusCustomerModal",value:function(e,t){var n=this;this.VehicleStatusAlerts[t]._class="selected",this.table.data.columns[t].class="selected";var a=this.modalRef?"xhide-trip-issue":"";this.common.ref_page="vsc",this.common.params={loader:!a,vehicle_id:e._vid,latch_time:e.latch_time,toTime:e.ttime,suggest:0,status:1,fo_name:e.group_name,regno:e.vehicle_name,tripName:this.common.getTripStatusHTML(e._trip_status_type,e._showtripstart,e._showtripend,e._p_placement_type,e._p_loc_name)};var o=this.modalService.open("admin"!=this.user._loggedInBy?He.a:De.a,{size:"lg",container:"nb-layout",windowClass:a,backdropClass:a});this.activeIndex=t,o.result.then((function(e){try{document.querySelector(".xhide-trip-issue").classList.remove("xhide-trip-issue"),document.querySelector(".xhide-trip-issue").classList.remove("xhide-trip-issue")}catch(a){}e.response&&t<n.VehicleStatusAlerts.length&&t>=0?n.modalOpens(n.activeIndex):n.modalRef=null}))}},{key:"enterTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e.vehicle_id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/insertTicketActivity",a).subscribe((function(e){if(n.common.loading--,t=e,console.log(t),!t.success)return!1}),(function(e){n.common.loading--,console.log(e)}))}},{key:"exitTicket",value:function(e){var t,n=this,a={tblRefId:1,tblRowId:e.vehicle_id};console.log("params",a),this.common.loading++,this.api.post("TicketActivityManagment/updateActivityEndTime",a).subscribe((function(e){return n.common.loading--,t=e,console.log(t),!!t.sucess}),(function(e){n.common.loading--,console.log(e)}))}},{key:"jrxFiltered",value:function(e){console.log("event:",e),this.filteredIndexes=e.map((function(e){return e.index})),console.log("this.filteredIndexes:",this.filteredIndexes)}}]),e}()).\u0275fac=function(e){return new(e||ld)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a))},ld.\u0275cmp=m["\u0275\u0275defineComponent"]({type:ld,selectors:[["tripissues"]],decls:19,vars:9,consts:[[1,"row"],[1,"col-6"],[1,"col-6",2,"text-align","right"],[1,"btn","btn-primary",2,"margin-left","15px",3,"ngClass","click"],[2,"padding","10px 15px"],["id","VehicleStatusAlerts",3,"data","settings","returnFilteredData","filtered",4,"ngIf"],["class","no-data",4,"ngIf"],[2,"margin-top","10px"],["id","VehicleStatusAlerts",3,"data","settings","returnFilteredData","filtered"],[1,"no-data"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",0),m["\u0275\u0275elementStart"](3,"div",1),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Trip Issues"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",2),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275text"](8,"Autoplay "),m["\u0275\u0275elementStart"](9,"button",3),m["\u0275\u0275listener"]("click",(function(){return t.autoPlay="forward"})),m["\u0275\u0275text"](10,"Forward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"button",3),m["\u0275\u0275listener"]("click",(function(){return t.autoPlay="backward"})),m["\u0275\u0275text"](12,"Backward"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"nb-card-body",4),m["\u0275\u0275template"](14,id,1,3,"smart-table",5),m["\u0275\u0275template"](15,rd,2,0,"div",6),m["\u0275\u0275elementStart"](16,"div",7),m["\u0275\u0275elementStart"](17,"b"),m["\u0275\u0275text"](18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](5,sd,"forward"==t.autoPlay)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](7,sd,"backward"==t.autoPlay)),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.VehicleStatusAlerts&&t.VehicleStatusAlerts.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.VehicleStatusAlerts.length),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("Number Of Alerts : ",t.VehicleStatusAlerts.length,""))},directives:[p.s,p.v,u.r,p.r,u.u,E.a],styles:["[_nghost-%COMP%]     .selected{background-color:#ff0!important}.active[_ngcontent-%COMP%]{background:#40dc7e!important}.active[_ngcontent-%COMP%]:hover{background:#40dc7e!important}"]}),ld),cd=r("x82i");function md(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",15),m["\u0275\u0275text"](1,"Ticket Types"),m["\u0275\u0275elementEnd"]())}function pd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",15),m["\u0275\u0275text"](1,"User"),m["\u0275\u0275elementEnd"]())}function hd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td",16),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unacklt30mins,a.type)})),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unackgt30mins,a.type)})),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unclmlt30mins,a.type)})),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unclmgt30mins,a.type)})),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.uncallt1hr,a.type)})),m["\u0275\u0275text"](14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.uncalgt1hr,a.type)})),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.openlt3hr,a.type)})),m["\u0275\u0275text"](18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.opengt3hr,a.type)})),m["\u0275\u0275text"](20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.tkt),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unacklt30mins.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unacklt30mins.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unackgt30mins.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unackgt30mins.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unclmlt30mins.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unclmlt30mins.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unclmgt30mins.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unclmgt30mins.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.uncallt1hr.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.uncallt1hr.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.uncalgt1hr.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.uncalgt1hr.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.openlt3hr.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.openlt3hr.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.opengt3hr.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.opengt3hr.split("_")[0])}}function gd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"table",9),m["\u0275\u0275elementStart"](1,"thead",10),m["\u0275\u0275elementStart"](2,"tr"),m["\u0275\u0275elementStart"](3,"th",11),m["\u0275\u0275text"](4,"#"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](5,md,2,0,"th",12),m["\u0275\u0275template"](6,pd,2,0,"th",12),m["\u0275\u0275elementStart"](7,"th",13),m["\u0275\u0275text"](8,"UnAcknowledged"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"th",13),m["\u0275\u0275text"](10,"UnClaimed"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"th",13),m["\u0275\u0275text"](12,"UnCalled"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"th",13),m["\u0275\u0275text"](14,"Open"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"tr"),m["\u0275\u0275elementStart"](16,"th"),m["\u0275\u0275text"](17," < 30 mins"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"th"),m["\u0275\u0275text"](19," > 30 mins"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"th"),m["\u0275\u0275text"](21," < 30 mins"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"th"),m["\u0275\u0275text"](23," > 30 mins"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"th"),m["\u0275\u0275text"](25," < 1 hr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"th"),m["\u0275\u0275text"](27," > 1 hr "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"th"),m["\u0275\u0275text"](29," < 3 hr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"th"),m["\u0275\u0275text"](31," > 3 hr"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"tbody"),m["\u0275\u0275template"](33,hd,21,26,"tr",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf","alertwise"==n.type),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","userwise"==n.type),m["\u0275\u0275advance"](27),m["\u0275\u0275property"]("ngForOf",n.kpis)}}function ud(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.totaldriver,a.type)})),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.totalcalls,a.type)})),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.callper,a.type)})),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unresponded_call,a.type)})),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.vsccount,a.type)})),m["\u0275\u0275text"](14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.lh_check_time,a.type)})),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td"),m["\u0275\u0275text"](18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.uname),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.totaldriver.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.totaldriver.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("0(00:00)"!=a.totalcalls.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.totalcalls.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("0%"!=a.callper.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.callper.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unresponded_call.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unresponded_call.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.vsccount.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.vsccount.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.lh_check_time.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.lh_check_time.split("_")[0]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.last_call_sync_time)}}function fd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"table",9),m["\u0275\u0275elementStart"](1,"thead",10),m["\u0275\u0275elementStart"](2,"tr"),m["\u0275\u0275elementStart"](3,"th"),m["\u0275\u0275text"](4," #"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"th"),m["\u0275\u0275text"](6," User Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"th"),m["\u0275\u0275text"](8," Total Driver"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"th"),m["\u0275\u0275text"](10," Total Calls"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"th"),m["\u0275\u0275text"](12," Driver Call %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"th"),m["\u0275\u0275text"](14," Unrespond Call"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"th"),m["\u0275\u0275text"](16," Pending VSC Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18," Last Halt Check Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Last Sync Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"tbody"),m["\u0275\u0275template"](22,ud,19,21,"tr",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](22),m["\u0275\u0275property"]("ngForOf",n.kpis)}}function bd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.totaldriver,a.type)})),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.totalcalls,a.type)})),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.callper,a.type)})),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.unresponded_call,a.type)})),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.avg_response_time,a.type)})),m["\u0275\u0275text"](14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"td",17),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit,a=m["\u0275\u0275nextContext"](2);return a.openTicketDetails(e.vscrescnt,a.type)})),m["\u0275\u0275text"](16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"td"),m["\u0275\u0275text"](18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](o+1),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.uname),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.totaldriver.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.totaldriver.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("0(00:00,M:0)"!=a.totalcalls.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.totalcalls.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("0%"!=a.callper.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.callper.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](0!=a.unresponded_call.split("_")[0]?"drillDown":""),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.unresponded_call.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("00:00:00"==a.avg_response_time.split("_")[0]||"-"==a.avg_response_time.split("_")[0]?"":"drillDown"),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.avg_response_time.split("_")[0]),m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"]("0"==a.vscrescnt.split("_")[0]||"-"==a.vscrescnt.split("_")[0]?"":"drillDown"),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](a.vscrescnt.split("_")[0]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](a.last_call_sync_time)}}function vd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",1),m["\u0275\u0275elementStart"](1,"div",18),m["\u0275\u0275elementStart"](2,"uj-date-time-picker",19),m["\u0275\u0275listener"]("onChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().date=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"div",20),m["\u0275\u0275elementStart"](4,"button",21),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().getTicketsKPI()})),m["\u0275\u0275text"](5,"Ok"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"table",9),m["\u0275\u0275elementStart"](7,"thead",10),m["\u0275\u0275elementStart"](8,"tr"),m["\u0275\u0275elementStart"](9,"th"),m["\u0275\u0275text"](10," #"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"th"),m["\u0275\u0275text"](12," User Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"th"),m["\u0275\u0275text"](14," Total Driver"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"th"),m["\u0275\u0275text"](16," Total Calls"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18," Driver Call %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20," Unrespond Call"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"th"),m["\u0275\u0275text"](22," Avg. Response Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"th"),m["\u0275\u0275text"](24," Resolved Vsc"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"th"),m["\u0275\u0275text"](26,"Last Sync Time"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"tbody"),m["\u0275\u0275template"](28,bd,19,21,"tr",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",a.date)("isTime",!1),m["\u0275\u0275advance"](26),m["\u0275\u0275property"]("ngForOf",a.kpis)}}function xd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",22),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var yd,Cd=((yd=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.user=a,this.modalService=o,this.kpis=[],this.testData=[],this.type="alertwise",this.date=new Date,this.getTicketsKPI(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTicketsKPI()}},{key:"getTicketsKPI",value:function(e){var t=this;this.kpis=[],e=e||this.type,++this.common.loading,this.api.get("VehicleKpis/getTicketKpis?type="+e+"&fromDate="+this.common.dateFormatter(this.date,"YYYYMMDD",!1)).subscribe((function(e){--t.common.loading,console.log(e),t.kpis=e.data?e.data:[]}),(function(e){--t.common.loading,console.error(e)}))}},{key:"openTicketDetails",value:function(e,t){var n=this;if(console.log("ticket",e,t,e.split("_")[0]),"0%"==e.split("_")[0]||0==e.split("_")[0]||"0"==e.split("_")[0]||"00:00"==e.split("_")[0]||"00:00:00"==e.split("_")[0]||"0(00:00)"==e.split("_")[0]||"-"==e.split("_")[0]||"0(00:00,M:0)"==e.split("_")[0])this.common.showError("There is no data");else{var a={type:t,rowId:e.split("_")[2],columnId:e.split("_")[1],date:this.date};this.common.params={ticketInfo:a},console.log("this.common.params.ticketInfo",this.common.params.ticketInfo),this.modalService.open(cd.a,{size:"lg",container:"nb-layout"}).result.then((function(e){console.log("data",e),e.response&&n.refresh()}))}}}]),e}()).\u0275fac=function(e){return new(e||yd)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},yd.\u0275cmp=m["\u0275\u0275defineComponent"]({type:yd,selectors:[["tickets-kpi"]],decls:17,vars:8,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["class","table table-bordered table-hover",4,"ngIf"],["class","row",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[1,"table","table-bordered","table-hover"],[1,"thead"],["rowspan","2",2,"padding-bottom","20px!important"],["rowspan","2","style","width:20%;padding-bottom:20px!important;",4,"ngIf"],["colspan","2"],[4,"ngFor","ngForOf"],["rowspan","2",2,"width","20%","padding-bottom","20px!important"],[2,"width","20%"],[3,"click"],[1,"col-3"],[3,"dateTimeValue","isTime","onChanged"],[1,"col-2"],[1,"btn","btn-primary",3,"click"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"ul",3),m["\u0275\u0275elementStart"](5,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.type="alertwise",t.getTicketsKPI(t.type)})),m["\u0275\u0275text"](6," Ticket Alert Wise "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"li",5),m["\u0275\u0275listener"]("click",(function(){return t.type="userwise",t.getTicketsKPI(t.type)})),m["\u0275\u0275text"](8," Ticket User Wise "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.type="currentreport",t.getTicketsKPI(t.type)})),m["\u0275\u0275text"](10," Current Status "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.type="daywisereport",t.getTicketsKPI(t.type)})),m["\u0275\u0275text"](12," Day Wise Report "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,gd,34,3,"table",6),m["\u0275\u0275template"](14,fd,23,1,"table",6),m["\u0275\u0275template"](15,vd,29,3,"div",7),m["\u0275\u0275template"](16,xd,2,0,"div",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngClass","alertwise"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","userwise"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","currentreport"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","daywisereport"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","alertwise"==t.type||"userwise"==t.type),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","currentreport"==t.type),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","daywisereport"==t.type),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.kpis.length))},directives:[p.s,p.r,u.r,u.u,u.t,me.a],styles:['.alert-danger[_ngcontent-%COMP%]{color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important;width:80%;margin:0 auto;text-align:center;padding:12px!important;font-size:18px!important}.drillDown[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff;text-align:center}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;text-align:center}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 218px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed;text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30px}']}),yd);function _d(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"i",14),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().index;return m["\u0275\u0275nextContext"]().users.splice(e,1)})),m["\u0275\u0275elementEnd"]()}}function Sd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"i",15),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).addUser()})),m["\u0275\u0275elementEnd"]()}}var Md=function(){return["name","mobileno"]},kd=function(e,t){return{name:e,mobileno:t}};function wd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",10),m["\u0275\u0275elementStart"](1,"div",2),m["\u0275\u0275elementStart"](2,"auto-suggestion",6),m["\u0275\u0275listener"]("onSelected",(function(e){m["\u0275\u0275restoreView"](n);var a=t.$implicit;return a.id=e.id,a.name=e.name,a.mobileno=e.mobileno})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"div",11),m["\u0275\u0275template"](4,_d,1,0,"i",12),m["\u0275\u0275template"](5,Sd,1,0,"i",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,o=t.index,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("data",i.getUsersList)("display",m["\u0275\u0275pureFunction0"](5,Md))("preSelected",m["\u0275\u0275pureFunction2"](6,kd,a.name,a.mobileno)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0!==o),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o==i.users.length-1)}}var Od,Pd=((Od=function(){function e(t,n,a,o){i(this,e),this.api=t,this.common=n,this.modalService=a,this.user=o,this.getUsersList=[],this.supervisorId=null,this.users=[{id:null,name:"",mobileno:""}],this.getAllUserList()}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getAllUserList",value:function(){var e=this;this.common.loading++,this.api.get("Suggestion/getAllFoAdminUsersWrtFo?").subscribe((function(t){e.common.loading--,e.getUsersList=t.data,console.log("api Data:",e.getUsersList)}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"getUserDetails",value:function(e){var t=this;console.log(e),this.supervisorId=e.id,this.common.loading++,this.api.get("FoAdmin/GetSuperUserAndUserMapping?superUserId="+this.supervisorId).subscribe((function(e){t.common.loading--,t.users=e.data||[{id:null,name:"",mobileno:""}]}),(function(e){t.common.loading--,console.log("Error: ",e)}))}},{key:"saveAssociation",value:function(){var e=this,t={superUserId:this.supervisorId,viewUsers:JSON.stringify(this.users)};this.common.loading++,this.api.post("FoAdmin/saveSuperUserAndUserMapping",t).subscribe((function(t){e.common.loading--,t.data&&t.data[0]?t.data[0].y_id>0?e.common.showToast(t.data[0].y_msg):e.common.showError(t.data[0].y_msg):e.common.showError("Something went wrong")}),(function(t){e.common.loading--,console.log("Error: ",t)}))}},{key:"addUser",value:function(){this.users.push({id:null,name:"",mobileno:""})}}]),e}()).\u0275fac=function(e){return new(e||Od)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r),m["\u0275\u0275directiveInject"](c.a))},Od.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Od,selectors:[["supervisor-user-association"]],decls:23,vars:5,consts:[[2,"border","0px"],[1,"row"],[1,"col-9"],[2,"min-height","580px"],[1,"table","table-bordered",2,"width","50%"],[1,"thead"],["seperator","-","placeholder","Employee","inputId","name",3,"data","display","preSelected","onSelected"],["class","row","style","margin-bottom: 6px;",4,"ngFor","ngForOf"],[1,"col","text-right","mt-4"],[1,"btn","btn-secondary",3,"click"],[1,"row",2,"margin-bottom","6px"],[1,"col-3"],["class","fa fa-trash remove",3,"click",4,"ngIf"],["class","fa fa-plus add",3,"click",4,"ngIf"],[1,"fa","fa-trash","remove",3,"click"],[1,"fa","fa-plus","add",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Supervisor User Association"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"nb-card-body",3),m["\u0275\u0275elementStart"](7,"div",1),m["\u0275\u0275elementStart"](8,"table",4),m["\u0275\u0275elementStart"](9,"thead",5),m["\u0275\u0275elementStart"](10,"th"),m["\u0275\u0275text"](11,"Supervisor"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"th"),m["\u0275\u0275text"](13,"Users"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"tbody"),m["\u0275\u0275elementStart"](15,"tr"),m["\u0275\u0275elementStart"](16,"td"),m["\u0275\u0275elementStart"](17,"auto-suggestion",6),m["\u0275\u0275listener"]("onSelected",(function(e){return t.getUserDetails(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"td"),m["\u0275\u0275template"](19,wd,6,9,"div",7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",8),m["\u0275\u0275elementStart"](21,"button",9),m["\u0275\u0275listener"]("click",(function(){return t.saveAssociation()})),m["\u0275\u0275text"](22,"Save"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("data",t.getUsersList)("display",m["\u0275\u0275pureFunction0"](4,Md))("preSelected",null),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",t.users))},directives:[p.s,p.v,p.r,Ht.a,u.t,u.u],styles:[".remove[_ngcontent-%COMP%]{font-size:12px;background-color:#f44236;padding:7px 8px}.add[_ngcontent-%COMP%], .remove[_ngcontent-%COMP%]{color:#fff;border-radius:3px}.add[_ngcontent-%COMP%]{font-size:14px;background:linear-gradient(-135deg,#1de9b6,#1dc4e9);width:26px;float:right;padding:8px 0;text-align:center}"]}),Od),Ed=r("JyC3");function Td(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",14),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Dd,Id=((Dd=function(){function e(t,n,a,o,r){var l;i(this,e),this.datePipe=t,this.api=n,this.common=a,this.user=o,this.modalService=r,this.type="2",this.startDate=null,this.endDate=null,this.vehicleId=-1,this.vehicleRegNo=null,this.vehicleTrips=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},l=new Date,this.endDate=new Date(l),this.startDate=new Date(l.setDate(l.getDate()-14)),console.log("start and enddate",this.startDate,this.endDate),this.getVehicleTrips(this.type),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getVehicleTrips(this.type)}},{key:"getVehicleTrips",value:function(e){var t=this;this.type=e,this.vehicleTrips=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var n=this.common.dateFormatter(this.startDate),a=this.common.dateFormatter(this.endDate);console.log("start & end",n,a);var o="vehicleId="+this.vehicleId+"&startDate="+n+"&endDate="+a+"&status="+this.type;console.log("params",o),++this.common.loading,this.api.get("TripsOperation/getTrips?"+o).subscribe((function(e){if(--t.common.loading,console.log("Res:",e.data),t.vehicleTrips=e.data,null!=t.vehicleTrips){console.log("vehicleTrips",t.vehicleTrips);var n=t.vehicleTrips[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){t.headings.push(a);var o={title:a,placeholder:t.formatTitle(a)};t.table.data.headings[a]=o}t.table.data.headings.km={title:"KM",placeholder:"KM"},t.table.data.headings.googlekm={title:"Google KM",placeholder:"Google KM"},t.table.data.headings.hiskm={title:"Historic KM (Avg)",placeholder:"Historic KM (Avg)"},"-2"==t.type&&(t.table.data.headings.status={title:"Status",placeholder:"Status"},t.table.data.headings.remark={title:"Remark",placeholder:"Remark"}),t.table.data.headings.action={title:"Action",placeholder:"Action"},t.table.data.columns=t.getTableColumns(),console.log("table:"),console.log(t.table)}else t.common.showToast("No Record Found !!")}),(function(e){--t.common.loading,console.log("Err:",e)}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleTrips.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]="Trip"==this.headings[n]?{value:this.common.getJSONTripStatusHTML(this.vehicleTrips[t]),isHTML:!0,class:"black"}:{value:this.vehicleTrips[t][this.headings[n]],class:"black",action:""},this.valobj.km={value:this.vehicleTrips[t]._km,class:"blue",action:this.openTripKmRepair.bind(this,this.vehicleTrips[t])},this.valobj.googlekm={value:this.vehicleTrips[t]._googlekm,isHTML:!0,action:null},this.valobj.hiskm={value:this.vehicleTrips[t]._hiskm,isHTML:!0,action:null},this.valobj.remark={value:this.vehicleTrips[t]._remark,isHTML:!0,action:null},this.valobj.status={value:this.vehicleTrips[t]._statusname,isHTML:!0,action:null},this.valobj.action={value:"",isHTML:!0,action:null,icons:this.actionIcons(this.vehicleTrips[t])};this.valobj.style={background:this.vehicleTrips[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"openTripKmRepair",value:function(e){e._km?(this.common.params={tripId:e["Trip Id"]},console.log("tripData",this.common.params),this.modalService.open(Ed.a,{size:"lg",container:"nb-layout"}).result.then((function(e){}))):this.common.showError("No Data")}},{key:"actionIcons",value:function(e){return[{class:" fa fa-route route-mapper",action:this.openRouteMapper.bind(this,e)},{class:"fa fa-question-circle  change-status",action:this.openRemarkModal.bind(this,e)}]}},{key:"searchVehicle",value:function(e){this.vehicleId=e.id,this.vehicleRegNo=e.regno}},{key:"openRemarkModal",value:function(e){var t=this;this.common.params={remark:null,title:"Add Objection "},this.modalService.open(xt.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then((function(n){n.response&&t.tripStampped(n.remark,e._tripid)}))}},{key:"openRouteMapper",value:function(e){var t,n,a;console.log("----trip----",e),t=new Date,n=new Date(t.setDate(t.getDate()-2)),a=this.common.dateFormatter(n);var o=this.common.dateFormatter(a),i=this.common.dateFormatter(new Date);this.common.handleModalHeightWidth("class","modal-lg","200","1500"),this.common.params={vehicleId:e._vid,vehicleRegNo:e.Vehicle,fromTime:e._startdate||o,toTime:e._enddate||i},console.log("open Route Mapper modal",this.common.params),this.modalService.open(we.a,{size:"lg",container:"nb-layout",windowClass:"myCustomModalClass"}).result.then((function(e){return console.log("data",e)}))}},{key:"tripStampped",value:function(e,t){var n=this;console.log("this.tripId",t);var a={tripId:t,status:-2,remark:e};++this.common.loading,this.api.post("HaltOperations/tripVerification",a).subscribe((function(e){--n.common.loading,n.common.showToast(e.data[0].y_msg),n.getVehicleTrips(n.type)}),(function(e){--n.common.loading}))}}]),e}()).\u0275fac=function(e){return new(e||Dd)(m["\u0275\u0275directiveInject"](u.f),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Dd.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Dd,selectors:[["trips"]],decls:20,vars:8,consts:[[2,"border","0px"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[3,"dateTimeValue","onChanged"],[3,"dateTimeValue","isStart","onChanged"],[1,"row"],[1,"col-sm-9"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],["id","vehicleTrip",3,"data","settings",4,"ngIf"],["id","vehicleTrip",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"div",3),m["\u0275\u0275elementStart"](5,"auto-suggestion",4),m["\u0275\u0275listener"]("onSelected",(function(e){return t.searchVehicle(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",5),m["\u0275\u0275elementStart"](7,"uj-date-time-picker",6),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",5),m["\u0275\u0275elementStart"](9,"uj-date-time-picker",7),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",8),m["\u0275\u0275elementStart"](11,"div",9),m["\u0275\u0275elementStart"](12,"ul",10),m["\u0275\u0275elementStart"](13,"li",11),m["\u0275\u0275listener"]("click",(function(){return t.type="2",t.getVehicleTrips(t.type)})),m["\u0275\u0275text"](14," Verified "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"li",11),m["\u0275\u0275listener"]("click",(function(){return t.type="1",t.getVehicleTrips(t.type)})),m["\u0275\u0275text"](16," High Confidence "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"li",12),m["\u0275\u0275listener"]("click",(function(){return t.type="-2",t.getVehicleTrips(t.type)})),m["\u0275\u0275text"](18," Objections "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](19,Td,1,2,"smart-table",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.startDate),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isStart",!1),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngClass","2"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","1"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","-2"==t.type?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.vehicleTrips&&t.vehicleTrips.length))},directives:[p.s,p.r,Ht.a,me.a,u.r,u.u,E.a],styles:['.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:5px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     td i.fa-question-circle{background-color:red;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-question-circle:hover span{display:block}[_nghost-%COMP%]     td i.fa-question-circle span{position:absolute;display:none;padding:11px 28px;left:-10px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-question-circle span:before{content:"Add Objection";display:block;position:absolute;top:0;left:0;background-color:red;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-question-circle span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid red;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]     td i.fa-route{background-color:#0f0;color:#fff;padding:5px;border-radius:3px;margin-left:4px}[_nghost-%COMP%]     td i.fa-route:hover span{display:block}[_nghost-%COMP%]     td i.fa-route span{position:absolute;display:none;padding:11px 24px;left:-8px;top:-28px;-webkit-box-shadow:5px 2px 8px rgba(0,0,0,.5);box-shadow:5px 2px 8px rgba(0,0,0,.5);font-family:Roboto;z-index:999}[_nghost-%COMP%]     td i.fa-route span:before{content:"Route";display:block;position:absolute;top:0;left:0;background-color:#0f0;border-radius:3px;padding:5px 10px}[_nghost-%COMP%]     td i.fa-route span:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #0f0;position:absolute;bottom:-5px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}[_nghost-%COMP%]    .blue{color:#00f;font-weight:700}']}),Dd);function Fd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"option",18),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.description)}}function Ad(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",19),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)}}var Vd,Ld=((Vd=function(){function e(t,n,a,o,r){i(this,e),this.api=t,this.common=n,this.csvService=a,this.user=o,this.modalService=r,this.startDate=new Date((new Date).setDate((new Date).getDate()-3)),this.endDate=new Date,this.vehicleId=null,this.stateType="-1",this.stateTypes=[],this.count=0,this.vehicleStates=[],this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.count=0,this.getStates(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getStates",value:function(){var e=this;this.api.get("Suggestion/getTypeMaster?typeId=13").subscribe((function(t){console.log("Res: ",t.data),e.stateTypes=t.data}),(function(t){console.error(t),e.common.showError()}))}},{key:"refresh",value:function(){this.count=0,this.getVehicleStates()}},{key:"getVehicleStates",value:function(){var e=this;this.vehicleStates=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=this.common.dateFormatter(this.startDate),n=this.common.dateFormatter(this.endDate);console.log("start & end",t,n);var a="vehicleId="+this.vehicleId+"&startDate="+t+"&endDate="+n+"&stateId="+this.stateType;console.log("params",a),++this.common.loading,this.api.get("Vehicles/getVehicleState?"+a).subscribe((function(t){if(--e.common.loading,console.log("Res:",t.data),e.vehicleStates=t.data,null!=e.vehicleStates){console.log("vehicleStates",e.vehicleStates);var n=e.vehicleStates[0];for(var a in console.log("first_Rec",n),n)if("_"!=a.charAt(0)){e.headings.push(a);var o={title:a,placeholder:e.formatTitle(a)};"start_time"!==a&&"end_time"!==a&&"addtime"!==a||(o.type="date"),e.table.data.headings[a]=o}e.table.data.columns=e.getTableColumns(),console.log("table:"),console.log(e.table)}else e.common.showToast("No Record Found !!")}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"formatTitle",value:function(e){return e.indexOf("_")>0?e.toLowerCase().split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.charAt(0).toUpperCase()+e.substr(1)}},{key:"getTableColumns",value:function(){for(var e=[],t=0;t<this.vehicleStates.length;t++){this.valobj={};for(var n=0;n<this.headings.length;n++)this.valobj[this.headings[n]]={value:this.vehicleStates[t][this.headings[n]],class:"black",action:""},this.valobj.Action={value:null,isHTML:!1,action:null,class:"",icons:this.actionIcons(this,this.vehicleStates[t])};this.valobj.style={background:this.vehicleStates[t]._rowcolor},e.push(this.valobj)}return console.log("Columns:",e),e}},{key:"printCsv",value:function(e){var t=this.user._customer.name;"customer"==this.user._loggedInBy&&(t=this.user._details.name),this.csvService.byMultiIds([e],"Fleet States",[{customer:"Customer : "+t},{report:"Report : Fleet States"},{period:"Report Date :"+this.startDate+" to "+this.endDate}])}},{key:"resetVehicle",value:function(){this.vehicleId=null}},{key:"setVehicleDetail",value:function(e){this.count++,this.vehicleId=e.id,this.count<2&&(console.log(" this.stateTypes",this.stateTypes),this.stateTypes.push({description:"All",id:-1}))}},{key:"actionIcons",value:function(e,t){var n=[];return n.push({class:"fa fa-trash remove",action:this.removeVehicleState.bind(this,t)}),n}},{key:"removeVehicleState",value:function(e){var t=this,n={stateid:e._id};this.common.params={title:"Remove State ",description:"<b>&nbsp;Are Sure To Remove State <b>"},this.modalService.open(yo.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then((function(e){e.response&&(console.log("data",e),t.common.loading++,t.api.post("Vehicles/removeVehicleState",n).subscribe((function(e){t.common.loading--,console.log("res: ",e),e.data[0].r_id>0?(t.common.showToast("Selected state has been deleted"),t.getStates()):t.common.showToast(e.data[0].r_msg,"",1e4)}),(function(e){t.common.loading--,console.log("Error: ",e),t.common.showError("Error!")})))}))}}]),e}()).\u0275fac=function(e){return new(e||Vd)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](Ne.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](P.r))},Vd.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Vd,selectors:[["vehicle-states"]],decls:27,vars:9,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-6"],[1,"col-md-6","text-right"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mb-2"],[1,"col-sm-2"],[1,"search_vehicle_input"],["url","suggestion/getFoVehicleList","display","regno","placeholder","Search Vehicle",3,"preSelected","onSelected"],[1,"col-3"],[1,"form-control",2,"border","1px solid #324148","font-size","10px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],[1,"col-1"],[1,"btn","btn-primary","form-control",2,"margin","0px","border","0px",3,"click"],["id","vehicleState",3,"data","settings",4,"ngIf"],[3,"value"],["id","vehicleState",3,"data","settings"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"h5"),m["\u0275\u0275text"](5,"Vehicle States"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",3),m["\u0275\u0275elementStart"](7,"span"),m["\u0275\u0275elementStart"](8,"span",4),m["\u0275\u0275listener"]("click",(function(){return t.printCsv("vehicleState")})),m["\u0275\u0275element"](9,"i",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"nb-card-body"),m["\u0275\u0275elementStart"](11,"div",6),m["\u0275\u0275elementStart"](12,"div",7),m["\u0275\u0275elementStart"](13,"div",8),m["\u0275\u0275elementStart"](14,"auto-suggestion",9),m["\u0275\u0275listener"]("onSelected",(function(e){return t.setVehicleDetail(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",10),m["\u0275\u0275elementStart"](16,"select",11),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stateType=e})),m["\u0275\u0275template"](17,Fd,2,2,"option",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",10),m["\u0275\u0275elementStart"](19,"uj-date-time-picker",13),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",10),m["\u0275\u0275elementStart"](21,"uj-date-time-picker",14),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",15),m["\u0275\u0275elementStart"](23,"button",16),m["\u0275\u0275listener"]("click",(function(){return t.getVehicleStates()})),m["\u0275\u0275text"](24,"OK"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](25,Ad,1,2,"smart-table",17),m["\u0275\u0275element"](26,"br"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("preSelected",null),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.stateType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.stateTypes),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",t.vehicleStates&&t.vehicleStates.length))},directives:[p.s,p.v,p.r,Ht.a,ce.D,ce.r,ce.u,u.t,me.a,u.u,ce.w,ce.G,E.a],styles:[".exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}"]}),Vd),zd=r("F4EW");function jd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"label",6),m["\u0275\u0275text"](1,"Cluster Size"),m["\u0275\u0275elementEnd"]())}function Rd(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"input",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().clusterSize=e})),m["\u0275\u0275elementEnd"]()}if(2&e){var a=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("ngModel",a.clusterSize)}}function Hd(e,t){if(1&e&&m["\u0275\u0275element"](0,"smart-table",15),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("data",n.table.data)("settings",n.table.settings)("ngClass","misTripMultiDestSingleUnload"==n.reportType?"lastcolumn":"")}}function Nd(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",16),m["\u0275\u0275text"](1," No Data available ! "),m["\u0275\u0275elementEnd"]())}var Ud,Gd=((Ud=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.headings=[],this.valobj={},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}},this.reportType="misTripReject",this.reportData=[],this.endDate=new Date,this.startDate=new Date((new Date).setDate((new Date).getDate()-15)),this.clusterSize=100,this.getReportData(this.reportType),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){console.log("Refresh"),this.getReportData(this.reportType)}},{key:"getReportData",value:function(e){var t=this;this.reportType=e,this.common.loading++;var n="fromDate="+this.common.dateFormatter1(this.startDate)+"&toDate="+this.common.dateFormatter1(this.endDate)+"&level=1&vehicleId=&locName=&clusterSize="+this.clusterSize+"&reportType="+this.reportType;this.api.get("TripsOperation/tripReports?"+n).subscribe((function(e){t.common.loading--,console.log("Res: ",e.data),t.reportData=e.data||[],t.gettingTableHeader(t.reportData)}),(function(e){t.common.loading--,console.error(e),t.common.showError()}))}},{key:"gettingTableHeader",value:function(e){this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0,pagination:!0}};var t=e[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);var a={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=a}this.table.data.columns=this.getTableColumns(e)}},{key:"formatTitle",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getTableColumns",value:function(e){var t=this;this.valobj={};var n=[];return e.map((function(e){t.valobj={};for(var a=0;a<t.headings.length;a++)t.valobj[t.headings[a]]="Action"==t.headings[a]?{value:"",isHTML:!0,action:null,icons:t.actionIcons(e)}:"Location"==t.headings[a]||"Unload Location"==t.headings[a]?{value:e[t.headings[a]],class:"blue",action:t.openGenericModel.bind(t,e),isHTML:!0}:"Original"==t.headings[a]||"Cluster Name"==t.headings[a]||"location"==t.headings[a]?{value:e[t.headings[a]],class:"blue",action:t.showDataOnMap.bind(t,e),isHTML:!0}:"Trip"==t.headings[a]?{value:t.common.getTripStatusHTML(e._trip_status_type,e._showtripstart,e._showtripend,e._p_placement_type,e._p_loc_name),isHTML:!0}:{value:e[t.headings[a]],class:"black",action:"",isHTML:!0};n.push(t.valobj)})),n}},{key:"actionIcons",value:function(e){}},{key:"openGenericModel",value:function(e){console.log("data",e);var t={view:{api:"TripsOperation/tripReports",param:{fromDate:this.common.dateFormatter1(this.startDate),toDate:this.common.dateFormatter1(this.endDate),level:2,locName:e.Location||e["Unload Location"],loadLocName:e.Location||e["Unload Location"],reportType:this.reportType,clusterSize:this.clusterSize}},viewModal:{api:"TripExpenseVoucher/getRouteTripSummaryDril",param:{startDate:"_start",endDate:"_end",type:"_type",levelId:"_id"}},title:"Details - "+e.Location||!1};this.common.handleModalSize("class","modal-lg","1100"),this.common.params={data:t},this.modalService.open(zi.a,{size:"lg",container:"nb-layout",backdrop:"static"})}},{key:"showDataOnMap",value:function(e){this.common.params={mapData:e._map},this.modalService.open(zd.a,{size:"lg",container:"nb-layout"})}}]),e}()).\u0275fac=function(e){return new(e||Ud)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},Ud.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Ud,selectors:[["issues-report"]],decls:32,vars:16,consts:[[2,"border","0px"],[1,"row"],[1,"col-sm-11"],[1,"tabs_style"],["id","dis-all",3,"ngClass","click"],[3,"ngClass","click"],[2,"margin-left","20px","margin-right","10px"],[3,"dateTimeValue","isTime","onChanged"],[3,"dateTimeValue","isTime","isStart","onChanged"],["style","margin-left: 20px;margin-right: 10px;",4,"ngIf"],["type","number","class","clu-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-primary","text-capitalize",2,"margin-left","20px",3,"click"],["id","reportData",3,"data","settings","ngClass",4,"ngIf"],["class","no-data",4,"ngIf"],["type","number",1,"clu-input",3,"ngModel","ngModelChange"],["id","reportData",3,"data","settings","ngClass"],[1,"no-data"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-body"),m["\u0275\u0275elementStart"](2,"div",1),m["\u0275\u0275elementStart"](3,"div",2),m["\u0275\u0275elementStart"](4,"ul",3),m["\u0275\u0275elementStart"](5,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="misTripReject",t.getReportData(t.reportType)})),m["\u0275\u0275text"](6," Rejected "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"li",5),m["\u0275\u0275listener"]("click",(function(){return t.reportType="misTripOutsideUnload",t.getReportData(t.reportType)})),m["\u0275\u0275text"](8," OutSide Unload "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="neverUnloadAtDest",t.getReportData(t.reportType)})),m["\u0275\u0275text"](10," Never Unload at Destinaion "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="maxMisTripMaxUnloadDatDest",t.getReportData(t.reportType)})),m["\u0275\u0275text"](12," Max Unload at Destination "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="misTripMultiDestSingleUnload",t.getReportData(t.reportType)})),m["\u0275\u0275text"](14," Common Unloading Point "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="verticalClusterReport",t.getReportData(t.reportType)})),m["\u0275\u0275text"](16," Cluster Report "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"li",4),m["\u0275\u0275listener"]("click",(function(){return t.reportType="misDiffLocUnloadSameName",t.getReportData(t.reportType)})),m["\u0275\u0275text"](18," Diff. Unload Similar Name "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",1),m["\u0275\u0275elementStart"](20,"label",6),m["\u0275\u0275text"](21,"From :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"uj-date-time-picker",7),m["\u0275\u0275listener"]("onChanged",(function(e){return t.startDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"label",6),m["\u0275\u0275text"](24,"To :"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"uj-date-time-picker",8),m["\u0275\u0275listener"]("onChanged",(function(e){return t.endDate=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](26,jd,2,0,"label",9),m["\u0275\u0275template"](27,Rd,1,1,"input",10),m["\u0275\u0275elementStart"](28,"button",11),m["\u0275\u0275listener"]("click",(function(){return t.getReportData(t.reportType)})),m["\u0275\u0275text"](29,"OK"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](30,Hd,1,3,"smart-table",12),m["\u0275\u0275template"](31,Nd,2,0,"div",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngClass","misTripReject"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","misTripOutsideUnload"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","neverUnloadAtDest"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","maxMisTripMaxUnloadDatDest"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","misTripMultiDestSingleUnload"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","verticalClusterReport"==t.reportType?"active":""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass","misDiffLocUnloadSameName"==t.reportType?"active":""),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("dateTimeValue",t.startDate)("isTime",!1),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("dateTimeValue",t.endDate)("isTime",!1)("isStart",!1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","misTripReject"!=t.reportType&&"misDiffLocUnloadSameName"!=t.reportType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","misTripReject"!=t.reportType&&"misDiffLocUnloadSameName"!=t.reportType),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",t.reportData&&t.reportData.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!t.reportData.length))},directives:[p.s,p.r,u.r,me.a,u.u,ce.x,ce.d,ce.r,ce.u,E.a],styles:['.tabs_style[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #26a69a;margin:0 0 10px;padding-left:3px!important}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#fff;color:#26a69a;position:relative}.tabs_style[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#fff;height:10px;width:100%;position:absolute;left:0}.tabs_style[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 6px;list-style:none;margin-right:5px;background-color:#26a69a;border:2px solid #26a69a;color:#fff;border-bottom:0;display:inline-block;border-radius:5px 5px 0 0;font-size:12px;font-weight:400;cursor:pointer}[_nghost-%COMP%]     .blue{color:#00f!important;text-decoration:underline}[_nghost-%COMP%]     .lastcolumn th:nth-child(5){width:550px!important}.clu-input[_ngcontent-%COMP%]{width:50px;height:30px!important}']}),Ud);function Bd(e,t){if(1&e&&m["\u0275\u0275element"](0,"chart",18),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("type",n.chart.type)("data",n.chart.dataSet)("options",n.chart.options)}}function Wd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle No"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Amount),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Due Days"])}}function Kd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Challan Date"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle No"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.State),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Amount),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Status)}}function $d(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275elementStart"](2,"b"),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"td"),m["\u0275\u0275elementStart"](5,"b"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275elementStart"](8,"b"),m["\u0275\u0275text"](9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"td"),m["\u0275\u0275elementStart"](11,"b"),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"td"),m["\u0275\u0275elementStart"](14,"b"),m["\u0275\u0275text"](15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n.state),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n["Total Count"]),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n["Total Challan Amount"]),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n["Pending Challan Count"]),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](n.Pending)}}function qd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Driver),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Challan Count"])}}function Jd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Driver),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Challan Amount"])}}var Yd,Zd=((Yd=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.challansMonthGraph=[],this.challanStateWise=[],this.challansMostAged=[],this.challansLatest=[],this.challansdrivarcount=[],this.challansdrivaramount=[],this.xAxisData=[],this.yaxisObj1=null,this.yaxisObj2=null,this.chart={data:{line:[],bar:[]},type:"",dataSet:{labels:[],datasets:[]},yaxisname:"Month",options:null},this.getChallansMonthGraph(),this.getChallansMostAged(),this.getChallansLatest(),this.getChallansdrivarcount(),this.getChallansdrivaramount(),this.getChallansstatewize(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.xAxisData=[],this.getChallansMonthGraph(),this.getChallansMostAged(),this.getChallansLatest(),this.getChallansdrivarcount(),this.getChallansdrivaramount(),this.getChallansstatewize()}},{key:"getChallansMonthGraph",value:function(){var e=this;this.challansMonthGraph=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-6)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n)};this.api.post("Tmgreport/GetChallansMonthGraph",a).subscribe((function(t){--e.common.loading,console.log("challansMonthGraph:",t),e.challansMonthGraph=t.data,e.getlabelValue()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getChallansMostAged",value:function(){var e=this;this.challansMostAged=[],++this.common.loading,this.api.post("Tmgreport/GetChallansMostAged",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("challansMostAged:",t),e.challansMostAged=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getChallansLatest",value:function(){var e=this;this.challansLatest=[],++this.common.loading,this.api.post("Tmgreport/GetChallansLatestChallans",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("challansLatest:",t),e.challansLatest=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getChallansdrivarcount",value:function(){var e=this;this.challansdrivarcount=[],++this.common.loading,this.api.post("Tmgreport/GetChallansdrivarcount",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("challansdrivarcount:",t),e.challansdrivarcount=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getChallansdrivaramount",value:function(){var e=this;this.challansdrivaramount=[];var t=new Date((new Date).setFullYear((new Date).getFullYear()-1)),n=new Date,a={totalrecord:3,fromdate:this.common.dateFormatter1(t),todate:this.common.dateFormatter1(n)};++this.common.loading,this.api.post("Tmgreport/GetChallansdrivaramount",a).subscribe((function(t){--e.common.loading,console.log("challansdrivaramount:",t),e.challansdrivaramount=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getChallansstatewize",value:function(){var e=this,t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date;this.challanStateWise=[],++this.common.loading;var a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n)};this.api.post("Tmgreport/getChallansstatewize",a).subscribe((function(t){--e.common.loading,console.log("Res:",t.data),e.challanStateWise=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getlabelValue",value:function(){var e=this;this.challansMonthGraph&&(this.challansMonthGraph.forEach((function(t){e.chart.data.line.push(t.Amount),e.chart.data.bar.push(t.Count),e.xAxisData.push(t.Month)})),this.handleChart())}},{key:"handleChart",value:function(){this.yaxisObj1=this.common.chartScaleLabelAndGrid(this.chart.data.bar),this.yaxisObj2=this.common.chartScaleLabelAndGrid(this.chart.data.line),console.log("this.yaxisObj1",this.yaxisObj1,"this.yaxisObj2",this.yaxisObj2);var e={labels:this.xAxisData,datasets:[]};e.datasets.push({type:"line",label:"Amount",borderColor:"#ed7d31",backgroundColor:"#ed7d31",pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",fill:!1,data:this.yaxisObj2.scaleData,yAxisID:"y-axis-2"}),e.datasets.push({type:"bar",label:"count",borderColor:"#386ac4",backgroundColor:"#386ac4",fill:!1,data:this.yaxisObj1.scaleData.map((function(e){return e.toFixed(2)})),pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B",yAxisID:"y-axis-1",yAxisName:"Count"}),this.chart={data:{line:[],bar:[]},type:"bar",dataSet:e,yaxisname:"Average Count",options:this.setChartOptions()}}},{key:"setChartOptions",value:function(){var e={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:!0},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,labelString:"Months",fontSize:17}}]}};return e.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Count of Challans"+this.yaxisObj1.yaxisLabel,fontSize:16},ticks:{stepSize:this.yaxisObj1.gridSize},suggestedMin:this.yaxisObj1.minValue,type:"linear",display:!0,position:"left",id:"y-axis-1"}),e.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Challan Amount "+this.yaxisObj2.yaxisLabel,fontSize:16},ticks:{stepSize:this.yaxisObj2.gridSize},suggestedMin:this.yaxisObj2.minValue,type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),e}}]),e}()).\u0275fac=function(e){return new(e||Yd)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},Yd.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Yd,selectors:[["tmg-challan"]],decls:82,vars:6,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-6","pl-0"],[1,"outer",2,"min-height","300px"],[2,"text-align","center"],[1,"charthead"],["style","margin-right:5px;min-height: 300px;max-height: 300px;",3,"type","data","options",4,"ngIf"],[1,"row","mt-4","mr-0","mb-0"],[1,"col-6","p-1"],[1,"outer","p-0",2,"min-height","130px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-6","pl-0","pr-0"],[1,"outer",2,"min-height","195px"],["colspan","2"],[1,"mt-2","outer",2,"min-height","130px"],[2,"margin-right","5px","min-height","300px","max-height","300px",3,"type","data","options"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h6",4),m["\u0275\u0275elementStart"](5,"b",5),m["\u0275\u0275text"](6," Challan Trends (Last 6 Months) "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,Bd,1,3,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",7),m["\u0275\u0275elementStart"](9,"div",8),m["\u0275\u0275elementStart"](10,"div",9),m["\u0275\u0275elementStart"](11,"h6",4),m["\u0275\u0275elementStart"](12,"b",5),m["\u0275\u0275text"](13,"Most Aged Challans (Pending)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"table",10),m["\u0275\u0275elementStart"](15,"thead",11),m["\u0275\u0275elementStart"](16,"th"),m["\u0275\u0275text"](17,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"th"),m["\u0275\u0275text"](19,"Amount"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"th"),m["\u0275\u0275text"](21,"Due Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"tbody",12),m["\u0275\u0275template"](23,Wd,7,3,"tr",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"div",8),m["\u0275\u0275elementStart"](25,"div",9),m["\u0275\u0275elementStart"](26,"h6",4),m["\u0275\u0275elementStart"](27,"b",5),m["\u0275\u0275text"](28,"Latest Challans"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"table",10),m["\u0275\u0275elementStart"](30,"thead",11),m["\u0275\u0275elementStart"](31,"th"),m["\u0275\u0275text"](32,"Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"th"),m["\u0275\u0275text"](34,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"th"),m["\u0275\u0275text"](36,"State"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"th"),m["\u0275\u0275text"](38,"Amount"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"th"),m["\u0275\u0275text"](40,"Status"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"tbody",12),m["\u0275\u0275template"](42,Kd,11,5,"tr",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](43,"div",14),m["\u0275\u0275elementStart"](44,"div",15),m["\u0275\u0275elementStart"](45,"h6",4),m["\u0275\u0275elementStart"](46,"b",5),m["\u0275\u0275text"](47,"State Wise Challans in Last 30 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](48,"table",10),m["\u0275\u0275elementStart"](49,"thead",11),m["\u0275\u0275elementStart"](50,"th"),m["\u0275\u0275text"](51,"State"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](52,"th",16),m["\u0275\u0275text"](53,"Total"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](54,"th",16),m["\u0275\u0275text"](55,"Pending"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"tbody",12),m["\u0275\u0275template"](57,$d,16,5,"tr",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](58,"div",17),m["\u0275\u0275elementStart"](59,"h6",4),m["\u0275\u0275elementStart"](60,"b",5),m["\u0275\u0275text"](61,"Worst 3 Drivers(Count Wise) "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](62,"table",10),m["\u0275\u0275elementStart"](63,"thead",11),m["\u0275\u0275elementStart"](64,"th"),m["\u0275\u0275text"](65,"Driver Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](66,"th"),m["\u0275\u0275text"](67,"Challan Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](68,"tbody",12),m["\u0275\u0275template"](69,qd,5,2,"tr",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](70,"div",17),m["\u0275\u0275elementStart"](71,"h6",4),m["\u0275\u0275elementStart"](72,"b",5),m["\u0275\u0275text"](73,"Worst 3 Drivers(Amount Wise) "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](74,"table",10),m["\u0275\u0275elementStart"](75,"thead",11),m["\u0275\u0275elementStart"](76,"th"),m["\u0275\u0275text"](77,"Driver Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](78,"th"),m["\u0275\u0275text"](79,"Challan Amount"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](80,"tbody",12),m["\u0275\u0275template"](81,Jd,5,2,"tr",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",t.chart.type),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngForOf",t.challansMostAged),m["\u0275\u0275advance"](19),m["\u0275\u0275property"]("ngForOf",t.challansLatest),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.challanStateWise),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngForOf",t.challansdrivarcount),m["\u0275\u0275advance"](12),m["\u0275\u0275property"]("ngForOf",t.challansdrivaramount))},directives:[u.u,u.t,We.ChartComponent],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:11px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),Yd);function Qd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Breakdown + Maintenance(in Hrs)"])}}function Xd(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Site Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Avg Loading Time(in Hrs)"])}}function ec(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Driver Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Avg Unloading Time(in Hr:Mi)"])}}function tc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Driver Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Trip),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Avg Speed KM/Hrs"])}}function nc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Site Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Avg Unloading Time(in Hrs)"])}}function ac(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vendor Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Total GPS"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["% Offline GPS"])}}function oc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Duration (HH:MM)"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Location)}}function ic(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Duration (HH:MM)"])}}function rc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["R + M + B (HH:MM)"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["RMB Type"])}}function lc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Location),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Duration (HH:MM)"])}}function sc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Duration (HH:MM)"])}}function dc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Driver Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Trip),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["KM/Hrs"])}}function cc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Vehicle Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Duration (HH:MM)"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Location)}}function mc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"td"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Executive Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.vehiclecount),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.yesterday_per),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.last30_days_per)}}function pc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.foadmin_name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.yesterday_per),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.last30_days_per)}}function hc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Date"])}}function gc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Date"])}}function uc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["TAT(Hrs)"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["VSC Time"])}}function fc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Date"])}}function bc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"td"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["Alert Name"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["TAT in Hrs"])}}function vc(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr"),m["\u0275\u0275elementStart"](1,"td"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.Executive),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n["TAT(Hrs)"])}}var xc,yc,Cc,_c,Sc,Mc,kc,wc,Oc,Pc,Ec=[{path:"",component:x,children:[{path:"",component:ut},{path:"dashboard",component:ut,canActivate:[S.a,_.b]},{path:"load-intelligence",loadChildren:function(){return Promise.resolve().then(r.bind(null,"u1rS")).then((function(e){return e.LoadIntelligenceModule}))},canActivate:[S.a]},{path:"vehiclestatuschange",component:od,canActivate:[S.a,_.b]},{path:"vehicle-states",component:Ld,canActivate:[S.a,_.b]},{path:"tripissues",component:dd,canActivate:[S.a,_.b]},{path:"tmg-trip",component:(_c=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.tripOnwardKmd=[],this.tripUnLoadindTime=[],this.tripLoadindTime=[],this.tripLongHalt=[],this.longestLoadindSites=[],this.longestUnLoadindDriver=[],this.tripSlowestOnward=[],this.longestUnLoadindSites=[],this.tripGpsPerformance=[],this.xAxisData=[],this.chart={type:"",data:{},options:{}},this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.getTripOnwardKmd(),this.getTripLoadindTime(),this.getTripUnLoadindTime(),this.getTripLongHalt(),this.getLongestLoadindSites(),this.getTripSlowestOnward(),this.getLongestUnLoadindDriver(),this.getLongestUnLoadindSites(),this.getTripGpsPerformance(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.xAxisData=[],this.getTripOnwardKmd(),this.getTripLoadindTime(),this.getTripUnLoadindTime(),this.getTripLongHalt(),this.getLongestLoadindSites(),this.getTripSlowestOnward(),this.getLongestUnLoadindDriver(),this.getLongestUnLoadindSites(),this.getTripGpsPerformance()}},{key:"getTripOnwardKmd",value:function(){var e=this;this.tripOnwardKmd=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7};this.api.post("Tmgreport/GetTripOnwardKmd",a).subscribe((function(t){--e.common.loading,console.log("tripOnwardKmd:",t),e.tripOnwardKmd=t.data,e.getlabelValue()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTripLoadindTime",value:function(){var e=this;this.tripLoadindTime=[];var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7};++this.common.loading,this.api.post("Tmgreport/GetTripLoadindTime",a).subscribe((function(t){--e.common.loading,console.log("tripLoadindTime:",t),e.tripLoadindTime=t.data,e.tripLoadindTime.length>0&&e.handleChart1()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTripUnLoadindTime",value:function(){var e=this;this.tripUnLoadindTime=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7};this.api.post("Tmgreport/GetTripUnLoadindTime",a).subscribe((function(t){--e.common.loading,console.log("tripUnLoadindTime:",t),e.tripUnLoadindTime=t.data,e.tripUnLoadindTime.length>0&&e.handleChart2()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTripLongHalt",value:function(){var e=this;this.tripLongHalt=[];var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetTripLoadindHalt",a).subscribe((function(t){--e.common.loading,console.log("tripLongHalt:",t),e.tripLongHalt=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getLongestLoadindSites",value:function(){var e=this;this.longestLoadindSites=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetLongestLoadindSites",a).subscribe((function(t){--e.common.loading,console.log("longestLoadindSites:",t.data),e.longestLoadindSites=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getLongestUnLoadindSites",value:function(){var e=this;this.longestUnLoadindSites=[];var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetLongestUnLoadindSites",a).subscribe((function(t){--e.common.loading,console.log("longestUnLoadindSites:",t),e.longestUnLoadindSites=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTripSlowestOnward",value:function(){var e=this;this.tripSlowestOnward=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetTripSlowestOnward",a).subscribe((function(t){--e.common.loading,console.log("tripSlowestOnward:",t.data),e.tripSlowestOnward=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getLongestUnLoadindDriver",value:function(){var e=this;this.longestUnLoadindDriver=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetLongestUnLoadindDriver",a).subscribe((function(t){--e.common.loading,console.log("longestUnLoadindDriver:",t.data),e.longestUnLoadindDriver=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTripGpsPerformance",value:function(){var e=this;this.tripGpsPerformance=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetTripGpsPerformance",a).subscribe((function(t){--e.common.loading,console.log("tripGpsPerformance:",t.data),e.tripGpsPerformance=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getlabelValue",value:function(){this.handleChart()}},{key:"setChartOptions",value:function(){var e={responsive:!0,hoverMode:"index",stacked:!1,legend:{position:"bottom",display:!0},tooltips:{mode:"index",intersect:"true"},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[],xAxes:[{scaleLabel:{display:!0,fontSize:17}}]}};return e.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Onward KMS",fontSize:17},type:"linear",display:!0,position:"left",id:"y-axis-1"}),e.scales.yAxes.push({scaleLabel:{display:!0,labelString:"Total KMS",fontSize:17},type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}),e}},{key:"handleChart",value:function(){var e=[],t=[];this.tripOnwardKmd.map((function(n){t.push(n.Period),e.push(n["Onward KMs"])}));var n=this.common.chartScaleLabelAndGrid(e);console.log("handleChart",t,e),this.chart.type="bar",this.chart.data={labels:t,datasets:[{label:"Onward KMs",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart.options={responsive:!0,legend:{position:"bottom",display:!1},scaleLabel:{display:!0,labelString:"Onward KMS"+n.yaxisLabel,fontSize:17},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Onward KMS"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}},{key:"handleChart1",value:function(){var e=[],t=[];this.tripLoadindTime.map((function(n){t.push(n.Period),e.push(n["Loading Duration(hrs)"])}));var n=this.common.chartScaleLabelAndGrid(e);console.log("handleChart1",t,e),this.chart1.type="line",this.chart1.data={labels:t,datasets:[{label:"Time (in Hrs.)",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Hrs.)"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}},{key:"handleChart2",value:function(){var e=[],t=[];this.tripUnLoadindTime.map((function(n){t.push(n.Period),e.push(n["Unloading Duration(hrs)"])}));var n=this.common.chartScaleLabelAndGrid(e);console.log("handleChart2",t,e),this.chart2.type="line",this.chart2.data={labels:t,datasets:[{label:"Time (in Hrs)",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Hrs.)"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}}]),e}(),_c.\u0275fac=function(e){return new(e||_c)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},_c.\u0275cmp=m["\u0275\u0275defineComponent"]({type:_c,selectors:[["tmg-trip"]],decls:106,vars:15,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer",2,"min-height","200px"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"col-4","pl-0","pr-0"],[1,"outer",2,"min-height","145px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h6",4),m["\u0275\u0275elementStart"](5,"b",5),m["\u0275\u0275text"](6,"Onward KMPD Graph"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"h6",4),m["\u0275\u0275elementStart"](11,"b",5),m["\u0275\u0275text"](12,"Avg. Loading Time Graph"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](13,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",7),m["\u0275\u0275elementStart"](15,"div",3),m["\u0275\u0275elementStart"](16,"h6",4),m["\u0275\u0275elementStart"](17,"b",5),m["\u0275\u0275text"](18,"Avg. Unloading Time Graph"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",1),m["\u0275\u0275elementStart"](21,"div",2),m["\u0275\u0275elementStart"](22,"div",8),m["\u0275\u0275elementStart"](23,"h6",4),m["\u0275\u0275elementStart"](24,"b",5),m["\u0275\u0275text"](25,"Worst 3 Vehicles in Last Week(Breakdown + Maintenance)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"table",9),m["\u0275\u0275elementStart"](27,"thead",10),m["\u0275\u0275elementStart"](28,"th"),m["\u0275\u0275text"](29,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"th"),m["\u0275\u0275text"](31,"BreakDown+Maintenace (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"tbody",11),m["\u0275\u0275template"](33,Qd,5,2,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"div",2),m["\u0275\u0275elementStart"](35,"div",8),m["\u0275\u0275elementStart"](36,"h6",4),m["\u0275\u0275elementStart"](37,"b",5),m["\u0275\u0275text"](38,"Longest Loading Sites in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"table",9),m["\u0275\u0275elementStart"](40,"thead",10),m["\u0275\u0275elementStart"](41,"th"),m["\u0275\u0275text"](42,"Site Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](43,"th"),m["\u0275\u0275text"](44,"Avg. Loading Time (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](45,"tbody",11),m["\u0275\u0275template"](46,Xd,5,2,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"div",7),m["\u0275\u0275elementStart"](48,"div",8),m["\u0275\u0275elementStart"](49,"h6",4),m["\u0275\u0275elementStart"](50,"b",5),m["\u0275\u0275text"](51,"Longest Unloading Drivers in Last 30 Days "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](52,"table",9),m["\u0275\u0275elementStart"](53,"thead",10),m["\u0275\u0275elementStart"](54,"th"),m["\u0275\u0275text"](55,"Driver Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"th"),m["\u0275\u0275text"](57,"Avg. Unloading Time (Hrs) "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](58,"tbody",11),m["\u0275\u0275template"](59,ec,5,2,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](60,"div",1),m["\u0275\u0275elementStart"](61,"div",2),m["\u0275\u0275elementStart"](62,"div",8),m["\u0275\u0275elementStart"](63,"h6",4),m["\u0275\u0275elementStart"](64,"b",5),m["\u0275\u0275text"](65,"Slowest 5 Onward Drivers in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](66,"table",9),m["\u0275\u0275elementStart"](67,"thead",10),m["\u0275\u0275elementStart"](68,"th"),m["\u0275\u0275text"](69,"Driver Name "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](70,"th"),m["\u0275\u0275text"](71,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](72,"th"),m["\u0275\u0275text"](73,"Trip"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](74,"th"),m["\u0275\u0275text"](75,"Avg Speed"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](76,"tbody",11),m["\u0275\u0275template"](77,tc,9,4,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](78,"div",2),m["\u0275\u0275elementStart"](79,"div",8),m["\u0275\u0275elementStart"](80,"h6",4),m["\u0275\u0275elementStart"](81,"b",5),m["\u0275\u0275text"](82,"Longest Unloading Sites in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](83,"table",9),m["\u0275\u0275elementStart"](84,"thead",10),m["\u0275\u0275elementStart"](85,"th"),m["\u0275\u0275text"](86,"Site Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](87,"th"),m["\u0275\u0275text"](88,"Avg. Unloading Time (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](89,"tbody",11),m["\u0275\u0275template"](90,nc,5,2,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](91,"div",7),m["\u0275\u0275elementStart"](92,"div",8),m["\u0275\u0275elementStart"](93,"h6",4),m["\u0275\u0275elementStart"](94,"b",5),m["\u0275\u0275text"](95,"GPS Performance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](96,"table",9),m["\u0275\u0275elementStart"](97,"thead",10),m["\u0275\u0275elementStart"](98,"th"),m["\u0275\u0275text"](99,"Vendor Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](100,"th"),m["\u0275\u0275text"](101,"Total GPS"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](102,"th"),m["\u0275\u0275text"](103,"% Offline GPS"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](104,"tbody",11),m["\u0275\u0275template"](105,ac,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.data)("options",t.chart.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart1.type)("data",t.chart1.data)("options",t.chart1.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart2.type)("data",t.chart2.data)("options",t.chart2.options),m["\u0275\u0275advance"](14),m["\u0275\u0275property"]("ngForOf",t.tripLongHalt),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.longestLoadindSites),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.longestUnLoadindDriver),m["\u0275\u0275advance"](18),m["\u0275\u0275property"]("ngForOf",t.tripSlowestOnward),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.longestUnLoadindSites),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.tripGpsPerformance))},directives:[We.ChartComponent,u.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),_c),canActivate:[S.a,_.b]},{path:"tmg-traffic",component:(Cc=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.trafficLiveStatus=[],this.trafficLongestDriverUnavailable=[],this.trafficLongestVehicleGpsIssue=[],this.trafficTopRmb=[],this.trafficLongestLoadingSites=[],this.trafficLongestUnloadingSite=[],this.trafficSlowestOnwardVehicles=[],this.trafficLongestVehicleEmpty=[],this.chart={type:"",data:{},options:{},plugins:[]},this.getTrafficLiveStatus(),this.getTrafficLongestDriverUnavailable(),this.getTrafficLongestVehicleGpsIssue(),this.getTrafficTopRmb(),this.getTrafficLongestLoadingSites(),this.getTrafficLongestUnloadingSite(),this.getTrafficLongestVehicleEmpty(),this.getTrafficSlowestOnwardVehicles(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getTrafficLiveStatus(),this.getTrafficLongestDriverUnavailable(),this.getTrafficLongestVehicleGpsIssue(),this.getTrafficTopRmb(),this.getTrafficLongestLoadingSites(),this.getTrafficLongestUnloadingSite(),this.getTrafficSlowestOnwardVehicles(),this.getTrafficLongestVehicleEmpty()}},{key:"getTrafficLiveStatus",value:function(){var e=this;this.trafficLiveStatus=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLiveStatus",{totalrecord:7}).subscribe((function(t){--e.common.loading,console.log("trafficLiveStatus:",t),e.trafficLiveStatus=t.data,e.handleChart(e.trafficLiveStatus)}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficLongestDriverUnavailable",value:function(){var e=this;this.trafficLongestDriverUnavailable=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestDriverUnavailable",{totalrecord:5}).subscribe((function(t){--e.common.loading,console.log("tripSlowestOnward:",t),e.trafficLongestDriverUnavailable=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficLongestVehicleGpsIssue",value:function(){var e=this;this.trafficLongestVehicleGpsIssue=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestVehicleGpsIssue",{totalrecord:5}).subscribe((function(t){--e.common.loading,console.log("trafficLongestVehicleGpsIssue:",t.data),e.trafficLongestVehicleGpsIssue=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficTopRmb",value:function(){var e=this;this.trafficTopRmb=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficTopRmb",{totalrecord:10}).subscribe((function(t){--e.common.loading,console.log("trafficTopRmb:",t),e.trafficTopRmb=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficLongestLoadingSites",value:function(){var e=this;this.trafficLongestLoadingSites=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestLoadingSites",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("trafficLongestLoadingSites:",t),e.trafficLongestLoadingSites=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficLongestUnloadingSite",value:function(){var e=this;this.trafficLongestUnloadingSite=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestUnloadingSite",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("trafficLongestUnloadingSite:",t),e.trafficLongestUnloadingSite=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficSlowestOnwardVehicles",value:function(){var e=this;this.trafficSlowestOnwardVehicles=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficSlowestOnwardVehicles",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("trafficSlowestOnwardVehicles:",t.data),e.trafficSlowestOnwardVehicles=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getTrafficLongestVehicleEmpty",value:function(){var e=this;this.trafficLongestVehicleEmpty=[],++this.common.loading,this.api.post("Tmgreport/GetTrafficLongestVehicleEmpty",{totalrecord:3}).subscribe((function(t){--e.common.loading,console.log("trafficLongestVehicleEmpty:",t.data),e.trafficLongestVehicleEmpty=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"handleChart",value:function(e){var t=[],n=[];e&&(e.forEach((function(e){t.push(e.split_part),n.push(e.totalvehicle)})),console.log("label",t,"data",n),this.chart.type="pie",this.chart.data={labels:t,datasets:[{label:"Zones",data:n,backgroundColor:["#0074D9","#FF4136","#2ECC40","#39CCCC","#01FF70","#8B008B","#FFD700","#D2B48C"]}]},this.chart.options={responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"right",labels:{fontSize:n.length>8?11:12,padding:n.length>8?3:8,boxWidth:10}}})}}]),e}(),Cc.\u0275fac=function(e){return new(e||Cc)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},Cc.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Cc,selectors:[["tmg-traffic"]],decls:113,vars:10,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0"],[1,"col-4","pl-0"],[1,"outer",2,"min-height","130px"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","0px","margin-top","0px","min-height","200px","max-height","200px",3,"type","data","options"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-4","pl-0","pr-0"],[1,"col-8","pl-0","pr-0"],[1,"row","mr-0","mb-0"],[1,"col-6","pl-0"],[1,"col-6","pl-0","pr-0"],[1,"row","mr-0","mb-0","mt-2"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h6",4),m["\u0275\u0275elementStart"](5,"b",5),m["\u0275\u0275text"](6,"Live Traffic Status "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"h6",4),m["\u0275\u0275elementStart"](11,"b",5),m["\u0275\u0275text"](12,"Longest Driver Unavailable"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"table",7),m["\u0275\u0275elementStart"](14,"thead",8),m["\u0275\u0275elementStart"](15,"th"),m["\u0275\u0275text"](16,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18,"Unavailable Hours"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Location"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"tbody",9),m["\u0275\u0275template"](22,oc,7,3,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"div",11),m["\u0275\u0275elementStart"](24,"div",3),m["\u0275\u0275elementStart"](25,"h6",4),m["\u0275\u0275elementStart"](26,"b",5),m["\u0275\u0275text"](27,"Longest GPS Offline"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"table",7),m["\u0275\u0275elementStart"](29,"thead",8),m["\u0275\u0275elementStart"](30,"th"),m["\u0275\u0275text"](31,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"th"),m["\u0275\u0275text"](33,"Offline Since(Hours)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"tbody",9),m["\u0275\u0275template"](35,ic,5,2,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](36,"div",1),m["\u0275\u0275elementStart"](37,"div",2),m["\u0275\u0275elementStart"](38,"div",3),m["\u0275\u0275elementStart"](39,"h6",4),m["\u0275\u0275elementStart"](40,"b",5),m["\u0275\u0275text"](41,"Top Vehicles with RTO + Maintenance + Breakdown Issues"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"table",7),m["\u0275\u0275elementStart"](43,"thead",8),m["\u0275\u0275elementStart"](44,"th"),m["\u0275\u0275text"](45,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](46,"th"),m["\u0275\u0275text"](47,"R + M + B (in Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](48,"th"),m["\u0275\u0275text"](49,"RMB Type"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](50,"tbody",9),m["\u0275\u0275template"](51,rc,7,3,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](52,"div",12),m["\u0275\u0275elementStart"](53,"div",13),m["\u0275\u0275elementStart"](54,"div",14),m["\u0275\u0275elementStart"](55,"div",3),m["\u0275\u0275elementStart"](56,"h6",4),m["\u0275\u0275elementStart"](57,"b",5),m["\u0275\u0275text"](58,"Longest Loading Sites"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](59,"table",7),m["\u0275\u0275elementStart"](60,"thead",8),m["\u0275\u0275elementStart"](61,"th"),m["\u0275\u0275text"](62,"Site Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](63,"th"),m["\u0275\u0275text"](64,"Avg Loading Aging Time(in Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](65,"tbody",9),m["\u0275\u0275template"](66,lc,5,2,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"div",15),m["\u0275\u0275elementStart"](68,"div",3),m["\u0275\u0275elementStart"](69,"h6",4),m["\u0275\u0275elementStart"](70,"b",5),m["\u0275\u0275text"](71,"Longest Unloading Vehicles"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](72,"table",7),m["\u0275\u0275elementStart"](73,"thead",8),m["\u0275\u0275elementStart"](74,"th"),m["\u0275\u0275text"](75,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](76,"th"),m["\u0275\u0275text"](77,"Avg Unloading Aging Time(in Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](78,"tbody",9),m["\u0275\u0275template"](79,sc,5,2,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](80,"div",16),m["\u0275\u0275elementStart"](81,"div",14),m["\u0275\u0275elementStart"](82,"div",3),m["\u0275\u0275elementStart"](83,"h6",4),m["\u0275\u0275elementStart"](84,"b",5),m["\u0275\u0275text"](85,"Slowest Onward Vehicles"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](86,"table",7),m["\u0275\u0275elementStart"](87,"thead",8),m["\u0275\u0275elementStart"](88,"th"),m["\u0275\u0275text"](89,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](90,"th"),m["\u0275\u0275text"](91,"Driver Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](92,"th"),m["\u0275\u0275text"](93,"Trip"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](94,"th"),m["\u0275\u0275text"](95,"KMPD"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](96,"tbody",9),m["\u0275\u0275template"](97,dc,9,4,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](98,"div",15),m["\u0275\u0275elementStart"](99,"div",3),m["\u0275\u0275elementStart"](100,"h6",4),m["\u0275\u0275elementStart"](101,"b",5),m["\u0275\u0275text"](102,"Longest Empty Vehicles"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](103,"table",7),m["\u0275\u0275elementStart"](104,"thead",8),m["\u0275\u0275elementStart"](105,"th"),m["\u0275\u0275text"](106,"Vehicle No."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](107,"th"),m["\u0275\u0275text"](108,"Available Hours"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](109,"th"),m["\u0275\u0275text"](110,"Location"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](111,"tbody",9),m["\u0275\u0275template"](112,cc,7,3,"tr",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.data)("options",t.chart.options),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.trafficLongestDriverUnavailable),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.trafficLongestVehicleGpsIssue),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngForOf",t.trafficTopRmb),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.trafficLongestLoadingSites),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.trafficLongestUnloadingSite),m["\u0275\u0275advance"](18),m["\u0275\u0275property"]("ngForOf",t.trafficSlowestOnwardVehicles),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.trafficLongestVehicleEmpty))},directives:[We.ChartComponent,u.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:12px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),Cc),canActivate:[S.a,_.b]},{path:"issues-report",component:Gd,canActivate:[S.a,_.b]},{path:"vehicle-kpis",component:I,canActivate:[S.a,_.b]},{path:"",redirectTo:"dashboard",pathMatch:"full",canActivate:[S.a,_.b]},{path:"tickets",component:W,canActivate:[S.a,_.b]},{path:"tickets-all",component:ee,canActivate:[S.a,_.b]},{path:"tickets-kpi",component:Cd,canActivate:[S.a,_.b]},{path:"lorry-receipts",component:fe,canActivate:[S.a,_.b]},{path:"generate-lr",component:Wn.a,canActivate:[S.a,_.b]},{path:"expenses",component:_e,canActivate:[S.a,_.b]},{path:"concise",component:ut,canActivate:[S.a,_.b]},{path:"ticket-site-details",component:At,canActivate:[S.a,_.b]},{path:"card-mapping",component:hr,canActivate:[S.a,_.b]},{path:"fuel-average-analysis",component:Vt.a,canActivate:[S.a,_.b]},{path:"vehicle-trip",component:nn,canActivate:[S.a,_.b]},{path:"trip",component:Id,canActivate:[S.a,_.b]},{path:"route-mapper",component:ia,canActivate:[S.a,_.b]},{path:"trends",component:Bn,canActivate:[S.a,_.b]},{path:"placements",component:Jn,canActivate:[S.a,_.b]},{path:"finance-recovery",component:Fr,canActivate:[S.a,_.b]},{path:"fo-fuel-average",component:Hr.a,canActivate:[S.a,_.b]},{path:"fuel-master",component:nl,canActivate:[S.a,_.b]},{path:"call-logs",component:da,canActivate:[S.a,_.b]},{path:"driver-call-suggestion",component:Ba,canActivate:[S.a,_.b]},{path:"site-in-out",component:Qi,canActivate:[S.a,_.b]},{path:"user-call-summary",component:pa,canActivate:[S.a,_.b]},{path:"placements-dash-board",component:xa,canActivate:[S.a,_.b]},{path:"trip-status-feedback",component:Ma,canActivate:[S.a,_.b]},{path:"trip-onward-delay",component:oo,canActivate:[S.a,_.b]},{path:"user-activity-status",component:ka.a,canActivate:[S.a,_.b]},{path:"placement-delay-faults",component:Pa,canActivate:[S.a,_.b]},{path:"vehicle-covered-distance",component:Za,canActivate:[S.a,_.b]},{path:"vehicle-gps-detail",component:$a,canActivate:[S.a,_.b]},{path:"trip-feedback-logs",component:to,canActivate:[S.a,_.b]},{path:"short-target",component:so,canActivate:[S.a,_.b]},{path:"onward-kmpd",component:po,canActivate:[S.a,_.b]},{path:"vehicle-trip-stages",component:Kt,canActivate:[S.a,_.b]},{path:"vehicle-trip-states",component:Kt,canActivate:[S.a,_.b]},{path:"fuel-fillings",component:ho.a,canActivate:[S.a,_.b]},{path:"remaining-fuel",component:go.a,canActivate:[S.a,_.b]},{path:"consolidate-fuel-average",component:To.a},{path:"documentation-details",component:uo.a,canActivate:[S.a,_.b]},{path:"documents-summary",component:fo.a,canActivate:[S.a,_.b]},{path:"document-dashboard",component:bo.a,canActivate:[S.a,_.b]},{path:"driver-performance",component:vo.a,canActivate:[S.a,_.b]},{path:"vehicle-distance",component:xo.a,canActivate:[S.a,_.b]},{path:"trip-verify-states",component:Mo,canActivate:[S.a,_.b]},{path:"vehicle-performance",component:Eo,canActivate:[S.a,_.b]},{path:"daywise-vehicle-distance",component:Fo},{path:"generate-lr-no-vehicles",component:Go,canActivate:[S.a,_.b]},{path:"view-manifesto",component:Yo,canActivate:[S.a,_.b]},{path:"driver-list",component:Zo.a,canActivate:[S.a,_.b]},{path:"vehicle-driver-mapping",component:Qo.a,canActivate:[S.a,_.b]},{path:"driver-attendance",component:Xo.a,canActivate:[S.a,_.b]},{path:"driver-document",component:ei.a,canActivate:[S.a,_.b]},{path:"lr-pod-receipts",component:ii,canActivate:[S.a,_.b]},{path:"vehicle-distance-with-odometer",component:hi,canActivate:[S.a,_.b]},{path:"vehicles",component:ri.a,canActivate:[S.a,_.b]},{path:"fse-entry",component:fi,canActivate:[S.a,_.b]},{path:"vehicle-odoMeter",component:ci,canActivate:[S.a,_.b]},{path:"fuel-indent",component:Ii,canActivate:[S.a,_.b]},{path:"frieght-rate-input",component:ki,canActivate:[S.a,_.b]},{path:"via-routes",component:Fi.a,canActivate:[S.a,_.b]},{path:"freight-expenses",component:qi,canActivate:[S.a,_.b]},{path:"pod-dashboard",component:Ai.a,canActivate:[S.a,_.b]},{path:"advices",component:Ni,canActivate:[S.a,_.b]},{path:"freight-invoices",component:sr,canActivate:[S.a,_.b]},{path:"nearby-pods",component:dr.a,canActivate:[S.a,_.b]},{path:"transfers",component:yr,canActivate:[S.a,_.b]},{path:"sites",component:Or,canActivate:[S.a,_.b]},{path:"manage-fo-party",component:Rr,canActivate:[S.a,_.b]},{path:"fuel-mileage-with-odo",component:Nr.a,canActivate:[S.a,_.b]},{path:"web-acttivity-summary",component:al.a,canActivate:[S.a,_.b]},{path:"dispatch-orders",component:dl,canActivate:[S.a,_.b]},{path:"fuel-consumption",component:pl,canActivate:[S.a,_.b]},{path:"trip-pnl",component:ul,canActivate:[S.a,_.b]},{path:"route-dashboard",component:yl,canActivate:[S.a,_.b]},{path:"fo-user-role",component:Il,canActivate:[S.a,_.b],canDeactivate:[_.a]},{path:"supervisor-user-association",component:Pd,canActivate:[S.a,_.b],canDeactivate:[_.a]},{path:"trends-fo",component:hs,canActivate:[S.a,_.b]},{path:"mvs-freight-statement",component:Cs,canActivate:[S.a,_.b]},{path:"unmerge-lrstate",component:ws,canActivate:[S.a,_.b]},{path:"vehicle-supplier-association",component:Ds,canActivate:[S.a,_.b]},{path:"mv-gps-apis",component:Ls,canActivate:[S.a,_.b]},{path:"mv-gps-api-history",component:Rs,canActivate:[S.a,_.b]},{path:"route-trip",component:Us,canActivate:[S.a,_.b]},{path:"trip-summary",component:qs,canActivate:[S.a,_.b]},{path:"route-deviations",component:Js,canActivate:[S.a,_.b]},{path:"fuel-daily-consumption",component:ed,canActivate:[S.a,_.b]},{path:"tmg-challan",component:Zd,canActivate:[S.a,_.b]},{path:"tmg-dashboard",component:Ge.a,canActivate:[S.a,_.b]},{path:"tmg-calls",component:(yc=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.callsDrivar=[],this.callsSupervisorWiseNotRespod=[],this.callsNotRespod=[],this.callsSupervisorWiseTopWorstDriverCalls=[],this.callsSupervisorLoadingTat=[],this.callOnwardKmd=[],this.callsSupervisorUnLoadingTat=[],this.xAxisData=[],this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.chart3={type:"",data:{},options:{}},this.chart4={type:"",data:{},options:{}},this.chart5={type:"",data:{},options:{}},this.getCallsDrivar(),this.getCallsSupervisorWiseNotRespod(),this.getCallsNotRespod(),this.getCallsSupervisorWiseTopWorstDriverCalls(),this.getCallsSupervisorLoadingTat(),this.getCallOnwardKmd(),this.getCallsSupervisorUnLoadingTat(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.xAxisData=[],this.getCallsDrivar(),this.getCallsSupervisorWiseNotRespod(),this.getCallsNotRespod(),this.getCallsSupervisorWiseTopWorstDriverCalls(),this.getCallsSupervisorLoadingTat(),this.getCallOnwardKmd(),this.getCallsSupervisorUnLoadingTat()}},{key:"getCallsDrivar",value:function(){var e=this;this.callsDrivar=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsDrivar",a).subscribe((function(t){--e.common.loading,console.log("callsDrivar:",t),e.callsDrivar=t.data,e.callsDrivar.length>0&&e.handleChart1()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallsSupervisorWiseNotRespod",value:function(){var e=this;this.callsSupervisorWiseNotRespod=[];var t={totalrecord:7,isfo:!0,isadmin:!0,fromdate:new Date((new Date).setMonth((new Date).getMonth()-1)),todate:new Date};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorWiseNotRespod",t).subscribe((function(t){--e.common.loading,console.log("callsSupervisorWiseNotRespod:",t),e.callsSupervisorWiseNotRespod=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallsNotRespod",value:function(){var e=this;this.callsNotRespod=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsNotRespod",a).subscribe((function(t){--e.common.loading,console.log("tripUnLoadindTime:",t),e.callsNotRespod=t.data,e.callsNotRespod.length>0&&e.handleChart2()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallsSupervisorWiseTopWorstDriverCalls",value:function(){var e=this;this.callsSupervisorWiseTopWorstDriverCalls=[];var t={totalrecord:3,fromdate:new Date((new Date).setDate((new Date).getDate()-7)),todate:new Date,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorWiseTopWorstDriverCalls",t).subscribe((function(t){--e.common.loading,console.log("callsSupervisorWiseTopWorstDriverCalls:",t),e.callsSupervisorWiseTopWorstDriverCalls=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallsSupervisorLoadingTat",value:function(){var e=this;this.callsSupervisorLoadingTat=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:7,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetCallsSupervisorLoadingTat",a).subscribe((function(t){--e.common.loading,console.log("callsSupervisorLoadingTat:",t),e.callsSupervisorLoadingTat=t.data,e.callsSupervisorLoadingTat.length>0&&e.handleChart3()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallsSupervisorUnLoadingTat",value:function(){var e=this;this.callsSupervisorUnLoadingTat=[];var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:15,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallsSupervisorUnLoadingTat",a).subscribe((function(t){--e.common.loading,console.log("callsSupervisorUnLoadingTat:",t),e.callsSupervisorUnLoadingTat=t.data,e.callsSupervisorUnLoadingTat.length>0&&e.handleChart5()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getCallOnwardKmd",value:function(){var e=this;this.callOnwardKmd=[];var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:15,isfo:!0,isadmin:!0};++this.common.loading,this.api.post("Tmgreport/GetCallOnwardKmd",a).subscribe((function(t){--e.common.loading,console.log("callsSupervisorUnLoadingTat:",t),e.callOnwardKmd=t.data,e.callOnwardKmd.length>0&&e.handleChart4()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertWorstCallTat",value:function(){var e=this;this.callsSupervisorUnLoadingTat=[],++this.common.loading;var t=new Date((new Date).setMonth((new Date).getMonth()-1)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:15,isfo:!0,isadmin:!0};this.api.post("Tmgreport/GetAlertWorstCallTat",a).subscribe((function(t){--e.common.loading,console.log("tripUnLoadindTime:",t),e.callsSupervisorUnLoadingTat=t.data,e.callsSupervisorUnLoadingTat.length>0&&e.handleChart5()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"handleChart1",value:function(){var e=[],t=[];this.callsDrivar.map((function(n){t.push(n.Period),e.push(n["Calls Percent"])}));var n=this.common.chartScaleLabelAndGrid(e);console.log("handleChart1",t,e),this.chart1.type="line",this.chart1.data={labels:t,datasets:[{label:"Call %",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Call %"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}},{key:"handleChart2",value:function(){var e=[],t=[];this.callsNotRespod.map((function(n){t.push(n.Period),e.push(n.percent)}));var n=this.common.chartScaleLabelAndGrid(e);console.log("handleChart2",t,e),this.chart2.type="line",this.chart2.data={labels:t,datasets:[{label:"Call %",data:n.scaleData,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Call %"+n.yaxisLabel},ticks:{stepSize:n.gridSize},suggestedMin:n.minValue}]}}}},{key:"handleChart3",value:function(){var e=[],t=K.groupBy(this.callsSupervisorLoadingTat,"Executive"),a=K.groupBy(this.callsSupervisorLoadingTat,"Period"),o=Object.keys(a).map((function(t){var o="#"+Math.floor(16777215*Math.random()).toString(16);return e.push.apply(e,n(a[t].map((function(e){return e["TAT(Hrs)"]})))),{label:t,backgroundColor:o,borderColor:o,borderWidth:1,data:a[t].map((function(e){return e["TAT(Hrs)"]}))}}));console.log("DataSets:",o),console.log("handleChart3",[],e),this.chart3.type="bar",this.chart3.data={labels:Object.keys(t),datasets:o};var i=this.common.chartScaleLabelAndGrid(e);this.chart3.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"TAT (in Hrs.)"+i.yaxisLabel},ticks:{stepSize:i.gridSize},suggestedMin:i.minValue}]}}}},{key:"handleChart4",value:function(){var e=this,t=K.groupBy(this.callOnwardKmd,"Executive"),a=K.groupBy(this.callOnwardKmd,"Period"),o=[],i=Object.keys(a).map((function(t){var i="#"+Math.floor(16777215*Math.random()).toString(16);return o.push.apply(o,n(a[t].map((function(e){return e["Onward KMs"]})))),{label:t,backgroundColor:i,borderColor:i,borderWidth:1,data:e.common.chartScaleLabelAndGrid(a[t].map((function(e){return e["Onward KMs"]}))).scaleData}}));this.chart4.type="bar",this.chart4.data={labels:Object.keys(t),datasets:i},console.log("yaxis:",o);var r=this.common.chartScaleLabelAndGrid(o);this.chart4.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"KM"+r.yaxisLabel},ticks:{stepSize:r.gridSize},suggestedMin:r.minValue}]}},console.log(" this.chart4:",this.chart4)}},{key:"handleChart5",value:function(){var e=[],t=K.groupBy(this.callsSupervisorUnLoadingTat,"Executive"),a=K.groupBy(this.callsSupervisorUnLoadingTat,"Period"),o=Object.keys(a).map((function(t){var o="#"+Math.floor(16777215*Math.random()).toString(16);return e.push.apply(e,n(a[t].map((function(e){return e["TAT(Hrs)"]})))),{label:t,backgroundColor:o,borderColor:o,borderWidth:1,data:a[t].map((function(e){return e["TAT(Hrs)"]}))}}));console.log("DataSets:",o),console.log("handleChart5",[],e),this.chart5.type="bar",this.chart5.data={labels:Object.keys(t),datasets:o};var i=this.common.chartScaleLabelAndGrid(e);this.chart5.options={responsive:!0,legend:{position:"bottom",display:!0},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"TAT (in Hrs.)"+i.yaxisLabel},ticks:{stepSize:i.gridSize},suggestedMin:i.minValue}]}}}}]),e}(),yc.\u0275fac=function(e){return new(e||yc)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},yc.\u0275cmp=m["\u0275\u0275defineComponent"]({type:yc,selectors:[["tmg-calls"]],decls:68,vars:17,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"outer",2,"min-height","265px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"col-4","pl-0","pr-0"],[1,"col-3"],[1,"col-6"],[1,"outer",2,"border","1px solid #7c94bf","min-height","120px"],[2,"margin-right","5px","min-height","350px","max-height","350px",3,"type","data","options"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h6",4),m["\u0275\u0275elementStart"](5,"b",5),m["\u0275\u0275text"](6,"Driver Calls % "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"div",7),m["\u0275\u0275elementStart"](10,"h6",4),m["\u0275\u0275elementStart"](11,"b",5),m["\u0275\u0275text"](12,"Supervisor Wise % Not Responded Calls"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"table",8),m["\u0275\u0275elementStart"](14,"thead",9),m["\u0275\u0275elementStart"](15,"th"),m["\u0275\u0275text"](16,"Executive Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"th"),m["\u0275\u0275text"](18,"Vehicle Count"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"th"),m["\u0275\u0275text"](20,"Yesterday %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"th"),m["\u0275\u0275text"](22,"Last 30 Days %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"tbody",10),m["\u0275\u0275template"](24,mc,9,4,"tr",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",12),m["\u0275\u0275elementStart"](26,"div",3),m["\u0275\u0275elementStart"](27,"h6",4),m["\u0275\u0275elementStart"](28,"b",5),m["\u0275\u0275text"](29,"% Not Responded Calls"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](30,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"div",1),m["\u0275\u0275element"](32,"div",13),m["\u0275\u0275elementStart"](33,"div",14),m["\u0275\u0275elementStart"](34,"div",15),m["\u0275\u0275elementStart"](35,"h6",4),m["\u0275\u0275elementStart"](36,"b",5),m["\u0275\u0275text"](37," Worst 3 Driver Calls % "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](38,"table",8),m["\u0275\u0275elementStart"](39,"thead",9),m["\u0275\u0275elementStart"](40,"th"),m["\u0275\u0275text"](41,"Executive Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"th"),m["\u0275\u0275text"](43,"Yesterday % "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](44,"th"),m["\u0275\u0275text"](45,"Last 30 Days %"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](46,"tbody",10),m["\u0275\u0275template"](47,pc,7,3,"tr",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](48,"div",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](49,"div",1),m["\u0275\u0275elementStart"](50,"div",2),m["\u0275\u0275elementStart"](51,"div",3),m["\u0275\u0275elementStart"](52,"h6",4),m["\u0275\u0275elementStart"](53,"b",5),m["\u0275\u0275text"](54,"Longest Loading TAT"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](55,"chart",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"div",2),m["\u0275\u0275elementStart"](57,"div",3),m["\u0275\u0275elementStart"](58,"h6",4),m["\u0275\u0275elementStart"](59,"b",5),m["\u0275\u0275text"](60,"Onward KMPD "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](61,"chart",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](62,"div",12),m["\u0275\u0275elementStart"](63,"div",3),m["\u0275\u0275elementStart"](64,"h6",4),m["\u0275\u0275elementStart"](65,"b",5),m["\u0275\u0275text"](66,"Worst Unloading TAT"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](67,"chart",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("type",t.chart1.type)("data",t.chart1.data)("options",t.chart1.options),m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("ngForOf",t.callsSupervisorWiseNotRespod),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart2.type)("data",t.chart2.data)("options",t.chart2.options),m["\u0275\u0275advance"](17),m["\u0275\u0275property"]("ngForOf",t.callsSupervisorWiseTopWorstDriverCalls),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("type",t.chart3.type)("data",t.chart3.data)("options",t.chart3.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart4.type)("data",t.chart4.data)("options",t.chart4.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart5.type)("data",t.chart5.data)("options",t.chart5.options))},directives:[We.ChartComponent,u.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),yc),canActivate:[S.a,_.b]},{path:"tmg-alerts",component:(xc=function(){function e(t,n,a){i(this,e),this.api=t,this.common=n,this.modalService=a,this.alertAckTat=[],this.alertCallTat=[],this.alertVscTat=[],this.alertNotAck=[],this.alertNotCall=[],this.alertOpen=[],this.alertWorstCallTat=[],this.alertVscPending=[],this.alertVscWorst=[],this.chart={type:"",data:{},options:{}},this.chart1={type:"",data:{},options:{}},this.chart2={type:"",data:{},options:{}},this.getAlertAckTat(),this.getAlertCallTat(),this.getAlertVscTat(),this.getAlertNotAck(),this.getAlertNotCall(),this.getAlertOpen(),this.getAlertVscPending(),this.getAlertWorstCallTat(),this.getAlertVscWorst(),this.common.refresh=this.refresh.bind(this)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"refresh",value:function(){this.getAlertAckTat(),this.getAlertCallTat(),this.getAlertVscTat(),this.getAlertNotAck(),this.getAlertNotCall(),this.getAlertOpen(),this.getAlertVscPending(),this.getAlertWorstCallTat(),this.getAlertVscWorst()}},{key:"getAlertAckTat",value:function(){var e=this;this.alertAckTat=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:1};this.api.post("Tmgreport/GetAlertAckTat",a).subscribe((function(t){--e.common.loading,console.log("alertAckTat:",t),e.alertAckTat=t.data,e.alertAckTat.length>0&&e.handleChart()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertCallTat",value:function(){var e=this;this.alertCallTat=[];var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:1};++this.common.loading,this.api.post("Tmgreport/GetAlertCallTat",a).subscribe((function(t){--e.common.loading,console.log("alertCallTat:",t),e.alertCallTat=t.data,e.alertCallTat.length>0&&e.handleChart1()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertVscTat",value:function(){var e=this;this.alertVscTat=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),groupdays:1};this.api.post("Tmgreport/GetAlertVscTat",a).subscribe((function(t){--e.common.loading,console.log("alertVscTat:",t),e.alertVscTat=t.data,e.alertVscTat.length>0&&e.handleChart2()}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertNotAck",value:function(){var e=this;this.alertNotAck=[];var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetAlertNotAck",a).subscribe((function(t){--e.common.loading,console.log("alertNotAck:",t),e.alertNotAck=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertNotCall",value:function(){var e=this;this.alertNotCall=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetAlertNotCall",a).subscribe((function(t){--e.common.loading,console.log("alertNotCall:",t.data),e.alertNotCall=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertVscPending",value:function(){var e=this;this.alertVscPending=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetAlertVscPending",a).subscribe((function(t){--e.common.loading,console.log("alertVscPending:",t.data),e.alertVscPending=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertOpen",value:function(){var e=this;this.alertOpen=[];var t=new Date((new Date).setDate((new Date).getDate()-7)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};++this.common.loading,this.api.post("Tmgreport/GetAlertOpen",a).subscribe((function(t){--e.common.loading,console.log("alertOpen:",t),e.alertOpen=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertWorstCallTat",value:function(){var e=this;this.alertWorstCallTat=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetAlertWorstCallTat",a).subscribe((function(t){--e.common.loading,console.log("alertWorstCallTat:",t.data),e.alertWorstCallTat=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"getAlertVscWorst",value:function(){var e=this;this.alertVscWorst=[],++this.common.loading;var t=new Date((new Date).setDate((new Date).getDate()-30)),n=new Date,a={fromdate:this.common.dateFormatter(t),todate:this.common.dateFormatter(n),totalrecord:3};this.api.post("Tmgreport/GetAlertVscWorst",a).subscribe((function(t){--e.common.loading,console.log("alertVscWorst:",t.data),e.alertVscWorst=t.data}),(function(t){--e.common.loading,console.log("Err:",t)}))}},{key:"handleChart",value:function(){var e=[],t=[];this.alertAckTat.map((function(n){t.push(n.Period),e.push(n["Ack TAT(Hrs)"])})),console.log("handleChart",t,e),this.chart.type="line",this.chart.data={labels:t,datasets:[{label:"Ack TAT(Hrs)",data:e,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Ack TAT (in Hrs.)"}}]}}}},{key:"handleChart1",value:function(){var e=[],t=[];this.alertCallTat.map((function(n){t.push(n.Period),e.push(n["Call TAT(Hrs)"])})),console.log("handleChart1",t,e),this.chart1.type="line",this.chart1.data={labels:t,datasets:[{label:"Time (in Mins.)",data:e,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart1.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Mins.)"}}]}}}},{key:"handleChart2",value:function(){var e=[],t=[];this.alertVscTat.map((function(n){t.push(n.Period),e.push(n["TAT(Hrs)"])})),console.log("handleChart2",t,e),this.chart2.type="line",this.chart2.data={labels:t,datasets:[{label:"Time (in Mins)",data:e,borderColor:"#3d6fc9",backgroundColor:"#3d6fc9",fill:!1,pointHoverRadius:8,pointHoverBackgroundColor:"#FFEB3B"}]},this.chart2.options={responsive:!0,legend:{position:"bottom",display:!1},maintainAspectRatio:!1,title:{display:!0},display:!0,elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Time (in Mins.)"}}]}}}}]),e}(),xc.\u0275fac=function(e){return new(e||xc)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](P.r))},xc.\u0275cmp=m["\u0275\u0275defineComponent"]({type:xc,selectors:[["tmg-alerts"]],decls:110,vars:15,consts:[[1,"contentsection"],[1,"row","mb-2","mr-0","mb-0"],[1,"col-4","pl-0"],[1,"outer"],[2,"text-align","center"],[1,"charthead"],[2,"margin-right","5px","margin-top","-20px","min-height","250px","max-height","250px",3,"type","data","options"],[1,"col-4","pl-0","pr-0"],[1,"outer",2,"min-height","170px"],[1,"table","table-bordered"],[1,"thead"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"outer",2,"min-height","100px"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"h6",4),m["\u0275\u0275elementStart"](5,"b",5),m["\u0275\u0275text"](6,"Alert Ack TAT in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",2),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"h6",4),m["\u0275\u0275elementStart"](11,"b",5),m["\u0275\u0275text"](12,"Alert Call TAT in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](13,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"div",7),m["\u0275\u0275elementStart"](15,"div",3),m["\u0275\u0275elementStart"](16,"h6",4),m["\u0275\u0275elementStart"](17,"b",5),m["\u0275\u0275text"](18,"VSC TAT in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](19,"chart",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",1),m["\u0275\u0275elementStart"](21,"div",2),m["\u0275\u0275elementStart"](22,"div",8),m["\u0275\u0275elementStart"](23,"h6",4),m["\u0275\u0275elementStart"](24,"b",5),m["\u0275\u0275text"](25,"Longest Alert Not Ack"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"table",9),m["\u0275\u0275elementStart"](27,"thead",10),m["\u0275\u0275elementStart"](28,"th"),m["\u0275\u0275text"](29,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"th"),m["\u0275\u0275text"](31,"Alert Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"th"),m["\u0275\u0275text"](33,"Alert Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"tbody",11),m["\u0275\u0275template"](35,hc,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](36,"div",2),m["\u0275\u0275elementStart"](37,"div",8),m["\u0275\u0275elementStart"](38,"h6",4),m["\u0275\u0275elementStart"](39,"b",5),m["\u0275\u0275text"](40,"Longest Alert Not Called "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"table",9),m["\u0275\u0275elementStart"](42,"thead",10),m["\u0275\u0275elementStart"](43,"th"),m["\u0275\u0275text"](44,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](45,"th"),m["\u0275\u0275text"](46,"Alert Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"th"),m["\u0275\u0275text"](48,"Alert Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](49,"tbody",11),m["\u0275\u0275template"](50,gc,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](51,"div",7),m["\u0275\u0275elementStart"](52,"div",8),m["\u0275\u0275elementStart"](53,"h6",4),m["\u0275\u0275elementStart"](54,"b",5),m["\u0275\u0275text"](55,"Longest Pending VSC TAT "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"table",9),m["\u0275\u0275elementStart"](57,"thead",10),m["\u0275\u0275elementStart"](58,"td"),m["\u0275\u0275text"](59,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](60,"th"),m["\u0275\u0275text"](61,"TAT (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](62,"th"),m["\u0275\u0275text"](63,"Oldest VSC Date "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](64,"tbody",11),m["\u0275\u0275template"](65,uc,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](66,"div",1),m["\u0275\u0275elementStart"](67,"div",2),m["\u0275\u0275elementStart"](68,"div",13),m["\u0275\u0275elementStart"](69,"h6",4),m["\u0275\u0275elementStart"](70,"b",5),m["\u0275\u0275text"](71,"Longest Open Alert"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](72,"table",9),m["\u0275\u0275elementStart"](73,"thead",10),m["\u0275\u0275elementStart"](74,"th"),m["\u0275\u0275text"](75,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](76,"th"),m["\u0275\u0275text"](77,"Alert Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](78,"th"),m["\u0275\u0275text"](79,"Alert Date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](80,"tbody",11),m["\u0275\u0275template"](81,fc,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](82,"div",2),m["\u0275\u0275elementStart"](83,"div",13),m["\u0275\u0275elementStart"](84,"h6",4),m["\u0275\u0275elementStart"](85,"b",5),m["\u0275\u0275text"](86,"Worst Call TAT in Last 7 Days"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](87,"table",9),m["\u0275\u0275elementStart"](88,"thead",10),m["\u0275\u0275elementStart"](89,"th"),m["\u0275\u0275text"](90,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](91,"th"),m["\u0275\u0275text"](92,"Alert Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](93,"th"),m["\u0275\u0275text"](94,"TAT (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](95,"tbody",11),m["\u0275\u0275template"](96,bc,7,3,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](97,"div",7),m["\u0275\u0275elementStart"](98,"div",13),m["\u0275\u0275elementStart"](99,"h6",4),m["\u0275\u0275elementStart"](100,"b",5),m["\u0275\u0275text"](101,"Worst VSC TAT in Last 7 Days "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](102,"table",9),m["\u0275\u0275elementStart"](103,"thead",10),m["\u0275\u0275elementStart"](104,"th"),m["\u0275\u0275text"](105,"Executive"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](106,"th"),m["\u0275\u0275text"](107,"TAT (Hrs)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](108,"tbody",11),m["\u0275\u0275template"](109,vc,5,2,"tr",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("type",t.chart.type)("data",t.chart.data)("options",t.chart.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart1.type)("data",t.chart1.data)("options",t.chart1.options),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("type",t.chart2.type)("data",t.chart2.data)("options",t.chart2.options),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngForOf",t.alertNotAck),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.alertNotCall),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.alertVscPending),m["\u0275\u0275advance"](16),m["\u0275\u0275property"]("ngForOf",t.alertOpen),m["\u0275\u0275advance"](15),m["\u0275\u0275property"]("ngForOf",t.alertWorstCallTat),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("ngForOf",t.alertVscWorst))},directives:[We.ChartComponent,u.t],styles:[".thead[_ngcontent-%COMP%]{background-color:#363232;color:#fff;font-size:12px}[_nghost-%COMP%] .table{font-size:10px;font-weight:600}[_nghost-%COMP%] .table tr td{padding:2px!important}[_nghost-%COMP%] .table thead th{padding:2px!important;font-size:11px!important}.outer[_ngcontent-%COMP%]{padding:5px;border:1px solid #efe8e8}.outer[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);box-shadow:0 .66875rem 2.3875rem rgba(31,10,6,.03),0 1.1375rem 1.60625rem rgba(31,10,6,.03),0 .45rem .73125rem rgba(31,10,6,.05),0 .325rem .3875rem rgba(31,10,6,.03);padding:5px;border:1px solid #efe8e8}.charthead[_ngcontent-%COMP%]{font-weight:700;font-family:sans-serif;color:#000;text-shadow:1px 1px 4px #cac1c1}.table[_ngcontent-%COMP%]{margin-bottom:0!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{background-color:#e9ebf5;color:#000;font-size:12px;text-align:center}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 2px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center!important;background-color:#e9ebf5!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #fff!important}.contentsection[_ngcontent-%COMP%]{max-height:calc(100vh - 90px);overflow:auto}"]}),xc),canActivate:[S.a,_.b]}]}],Tc=((Sc=function e(){i(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:Sc}),Sc.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Sc)},imports:[[h.g.forChild(Ec)],h.g]}),Sc),Dc=[{path:"",component:(kc=function e(){i(this,e)},kc.\u0275fac=function(e){return new(e||kc)},kc.\u0275cmp=m["\u0275\u0275defineComponent"]({type:kc,selectors:[["ngx-miscellaneous"]],decls:1,vars:0,template:function(e,t){1&e&&m["\u0275\u0275element"](0,"router-outlet")},directives:[h.h],encapsulation:2}),kc),children:[{path:"404",component:(Mc=function(){function e(t){i(this,e),this.menuService=t}return l(e,[{key:"goToHome",value:function(){this.menuService.navigateHome()}}]),e}(),Mc.\u0275fac=function(e){return new(e||Mc)(m["\u0275\u0275directiveInject"](p.Z))},Mc.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Mc,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["type","button",1,"btn","btn-block","btn-hero-primary",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"nb-card"),m["\u0275\u0275elementStart"](3,"nb-card-body"),m["\u0275\u0275elementStart"](4,"div",2),m["\u0275\u0275elementStart"](5,"h2",3),m["\u0275\u0275text"](6,"404 Page Not Found"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"small",4),m["\u0275\u0275text"](8,"The page you were looking for doesn't exist"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"button",5),m["\u0275\u0275listener"]("click",(function(){return t.goToHome()})),m["\u0275\u0275text"](10," Take me home "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())},directives:[p.s,p.r],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.btn[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),Mc)}]}],Ic=((Oc=function e(){i(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:Oc}),Oc.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Oc)},imports:[[h.g.forChild(Dc)],h.g]}),Oc),Fc=((wc=function e(){i(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:wc}),wc.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||wc)},imports:[[y.a,Ic]]}),wc),Ac=r("FUS3"),Vc=r("dImq"),Lc=r("d2mR"),zc=r("qfjS"),jc=((Pc=function e(){i(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:Pc}),Pc.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Pc)},imports:[[Tc,y.a,C,Fc,We.ChartModule,Ac.a,Yn.c,Yn.e,ce.B,Be.b,Vc.LorryReceiptModule,Lc.a,zc.DriverModule]]}),Pc)}}])}();