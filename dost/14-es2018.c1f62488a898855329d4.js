(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"7tAi":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("8Y7J"),a=n("OlR4"),i=n("SVse");function r(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275elementStart"](1,"button",10),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).selectMonth(n)})),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",n.selectedMonth.id==e.id&&n.theYear===n.selectedYear?"month-btn-active":"")("disabled",n.currentYear===n.theYear&&n.currentMonth<e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function l(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275elementStart"](2,"div",5),o["\u0275\u0275elementStart"](3,"i",6),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.theYear=t.theYear-1})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",5),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"i",7),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.currentYear!==t.theYear&&(t.theYear=t.theYear+1)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",8),o["\u0275\u0275template"](9,r,3,3,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.theYear," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",e.months)}}let s=(()=>{class e{constructor(e){this.common=e,this.select=new o.EventEmitter,this.months=[{name:"JAN",id:"01"},{name:"FEB",id:"02"},{name:"March",id:"03"},{name:"APRIL",id:"04"},{name:"MAY",id:"05"},{name:"JUN",id:"06"},{name:"JULY",id:"07"},{name:"AUG",id:"08"},{name:"SEPT",id:"09"},{name:"OCT",id:"10"},{name:"NOV",id:"11"},{name:"DEC",id:"12"}],this.theYear=(new Date).getFullYear(),this.currentYear=(new Date).getFullYear(),this.currentMonth=((new Date).getMonth()<9?"0":"")+((new Date).getMonth()+1),this.selectedYear=(new Date).getFullYear(),this.selectedMonth={name:"",id:""},this.isVisible=!1,this.months.forEach(e=>{e.id==this.currentMonth&&(this.selectedMonth=e)}),setTimeout(this.selectMonth.bind(this,this.selectedMonth),500)}ngOnInit(){}selectMonth(e){this.selectedMonth=e,this.selectedYear=this.theYear;let t=(new Date).getMonth(),n="",o=`${this.selectedYear}-${e.id}-01`;n=this.common.dateFormatter(t+1==e.id?new Date:new Date(this.selectedYear,e.id,0),"",!1),this.isVisible=!1,this.select.emit({start:o,end:n})}resetData(){this.selectedMonth={name:"",id:""}}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["month-picker"]],outputs:{select:"select"},decls:4,vars:2,consts:[[1,"month-picker"],["type","text","name","month","readonly","",1,"form-control",3,"value","click"],["class","month-list",4,"ngIf"],[1,"month-list"],[1,"row","text-center","year-container"],[1,"col-4"],[1,"fa","fa-angle-double-left",3,"click"],[1,"fa","fa-angle-double-right",3,"click"],[1,"row","p-0","m-0"],["class","col-4",4,"ngFor","ngForOf"],[1,"btn","month-btn",3,"ngClass","disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"input",1),o["\u0275\u0275listener"]("click",(function(){return t.isVisible=!t.isVisible})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,l,10,2,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",t.selectedMonth.name+" - "+t.selectedYear),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isVisible))},directives:[i.u,i.t,i.r],styles:[".month-list[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;-webkit-box-shadow:2px 10px 10px #ccc;box-shadow:2px 10px 10px #ccc;border:1px solid #ccc;position:absolute;z-index:9999;width:300px}.month-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border-radius:3px;border:0;margin-bottom:10px}.month-btn[_ngcontent-%COMP%]{background:#fff;color:#000;font-family:Exo;padding:0;line-height:30px}.month-btn[_ngcontent-%COMP%]:hover{background:#f2f2f2;color:#000}.month-btn-active[_ngcontent-%COMP%]{background:teal;color:#fff}.year-container[_ngcontent-%COMP%]{margin-bottom:5px;font-size:18px}"]}),e})()},mQSa:function(e,t,n){"use strict";n.r(t),n.d(t,"AccountsModule",(function(){return Lc}));var o=n("iInd"),a=n("BHau"),i=n("H+bZ"),r=n("flj8"),l=n("qfBg"),s=n("Ugrs"),c=n("8Y7J"),d=n("G0yt"),m=n("IAMq"),h=n("tKwJ");let p=(()=>{class e{constructor(e,t,n,o,i,r){this.api=e,this.router=t,this.user=n,this.accountService=o,this.modalService=i,this.activeModal=r,this.menu=JSON.parse(a.a),this.accountService.branches.length||this.getBranches(),this.accountService.financialYears.length||this.getFinancial()}getBranches(){this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{console.log("Branches :",e.data),this.accountService.branches=e.data,1==this.accountService.branches.length?(console.log("_________________________TRUE"),this.accountService.selected.branchId=this.accountService.branches[0].id,this.accountService.selected.branch=this.accountService.branches[0],this.getFinancial()):(console.log("_________________________ELSE"),this.accountService.selected.branchId=0,this.accountService.selected.branch.id=0)},e=>{console.log("Error: ",e)})}getFinancial(){this.api.post("Suggestion/GetFinancialYear",{search:123}).subscribe(e=>{console.log("financial :",e.data),this.accountService.financialYears=e.data,this.accountService.selected.financialYear=this.accountService.financialYears[this.accountService.financialYears.length-1],console.log("selected financial year",this.accountService.selected.financialYear)},e=>{this.getFinancial(),console.log("Error: ",e)})}onKeyDown(e){const t=["f4","f5","f6","f7","f8","f9","f1","f10","f11","f12"],n=e.key.toLowerCase(),o=t.indexOf(n);if(e.ctrlKey){let t="";1==n?t="/accounts/daybooks/0":2==n?t="/accounts/ledgerview":3==n?t="/accounts/profitloss":4==n?t="/accounts/balancesheet":5==n?t="/accounts/trading":6==n?t="/accounts/trialbalance":0==n?t="/accounts/ledgermapping":"f2"==n&&this.modalService.open(s.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{}),""!=t&&(this.router.navigate([t]),e.preventDefault())}else if(-1!=o){const n={f4:"/accounts/vouchers/-8/Contra Voucher",f5:"/accounts/vouchers/-1/Bank Payment Voucher",f6:"/accounts/vouchers/-3/Cash Payment Voucher",f7:"/accounts/vouchers/-2/Bank Receipt Voucher",f8:"/accounts/vouchers/-4/Cash Receipt Voucher",f9:"/accounts/vouchers/-7/Journal Voucher",f1:"/accounts/ledgers/0",f10:"/accounts/trip-voucher-expense",f11:"/accounts/trip-voucher-expense/1",f12:"/accounts/fuelfillings"};let a=t[o];console.log("Pressed Key:",a),this.router.navigate([n[a]]),e.preventDefault()}}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](o.c),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](d.b))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-pages"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.onKeyDown(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:3,vars:1,consts:[["autoCollapse","true",3,"items"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ngx-sample-layout"),c["\u0275\u0275element"](1,"nb-menu",0),c["\u0275\u0275element"](2,"router-outlet"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("items",t.menu))},directives:[m.a,h.W,o.h],styles:[".pagination[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;display:block;padding:5px 7px;color:#007bff;background-color:#fff;border:1px solid #dee2e6;float:left;cursor:pointer}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button.active-page[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{z-index:1;color:#fff;background-color:#007bff;border-color:#007bff;-webkit-box-shadow:0 0 0 .2rem rgba(0,123,255,.25);box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.pagination[_ngcontent-%COMP%]   .pagination_links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{-webkit-box-shadow:0 0 0 .2rem rgba(0,123,255,.25);box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.tablePagination[_ngcontent-%COMP%]{color:#000}"]}),e})(),g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["dashboard"]],decls:6,vars:0,consts:[[1,"row"],[1,"ion-arrow-return-left"],[1,"icon","ion-md-exit"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"nb-card"),c["\u0275\u0275elementStart"](2,"nb-card-body"),c["\u0275\u0275element"](3,"i",1),c["\u0275\u0275element"](4,"i",2),c["\u0275\u0275text"](5," Hello from ngx-admin sandbox project."),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())},directives:[h.s,h.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff}"]}),e})();var u=n("OlR4"),b=n("NTD5"),v=n("Xy1B"),x=n("G/p5"),f=n("SjoD"),y=n("Wvez"),C=n("fIRD"),_=n("2heQ"),S=n("zeuJ"),M=n("Pcpv"),E=n("SVse"),w=n("11Hx"),k=n("s7LF");const P=["testInput"];function O(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"PI No."),c["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1," Debit Note No."),c["\u0275\u0275elementEnd"]())}function D(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Wastage No."),c["\u0275\u0275elementEnd"]())}function V(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"PI Date"),c["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Debit Date"),c["\u0275\u0275elementEnd"]())}function T(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"wastage Date"),c["\u0275\u0275elementEnd"]())}function B(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Po Date"),c["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Ref Date"),c["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",19),c["\u0275\u0275elementStart"](1,"div",20),c["\u0275\u0275template"](2,B,2,0,"label",21),c["\u0275\u0275template"](3,A,2,0,"label",21),c["\u0275\u0275elementStart"](4,"input",28),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.podate=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](2);return t.lastActiveId="po-date",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("purchase")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("debit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.podate)}}function R(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"i"),c["\u0275\u0275text"](2,"Cur Bal: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.ledgerbalance)}}function j(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275elementStart"](3,"label",25),c["\u0275\u0275text"](4,"Purchase Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"input",29),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.purchaseledger.name=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](2);return t.lastActiveId="ledger-"+t.i,t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",19),c["\u0275\u0275elementStart"](7,"div",20),c["\u0275\u0275elementStart"](8,"label",25),c["\u0275\u0275text"](9,"Supplier Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"input",30),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.ledger.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,R,4,1,"span",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",19),c["\u0275\u0275elementStart"](13,"div",20),c["\u0275\u0275elementStart"](14,"label",25),c["\u0275\u0275text"](15,"Supplier Ref.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"input",31),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.vendorbidref=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",19),c["\u0275\u0275elementStart"](18,"div",20),c["\u0275\u0275elementStart"](19,"label",25),c["\u0275\u0275text"](20,"Shipment Location"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"input",32),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.shipmentlocation=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.purchaseledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.ledger.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.ledgerbalance),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.vendorbidref),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.shipmentlocation)}}function z(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275elementStart"](3,"label",25),c["\u0275\u0275text"](4,"Payment Terms"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"input",33),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.paymentterms=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",19),c["\u0275\u0275elementStart"](7,"div",20),c["\u0275\u0275elementStart"](8,"label",25),c["\u0275\u0275text"](9,"Bilty Number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"input",34),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.biltynumber=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",19),c["\u0275\u0275elementStart"](12,"div",20),c["\u0275\u0275elementStart"](13,"label",25),c["\u0275\u0275text"](14,"Bilty Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"input",35),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.biltydate=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](2);return t.lastActiveId="account-biltydate",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",19),c["\u0275\u0275elementStart"](17,"div",20),c["\u0275\u0275elementStart"](18,"label",25),c["\u0275\u0275text"](19,"Dilivery Terms"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"input",36),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.deliveryterms=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.paymentterms),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.biltynumber),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.biltydate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.deliveryterms)}}function N(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275elementStart"](3,"label",25),c["\u0275\u0275text"](4,"Vender Billing Address"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"textarea",37),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.billingaddress=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",19),c["\u0275\u0275elementStart"](7,"div",20),c["\u0275\u0275elementStart"](8,"label",25),c["\u0275\u0275text"](9,"Remarks"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"textarea",38),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).order.orderremarks=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.billingaddress),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.orderremarks)}}function G(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",3),c["\u0275\u0275elementStart"](2,"div",19),c["\u0275\u0275elementStart"](3,"div",20),c["\u0275\u0275template"](4,O,2,0,"label",21),c["\u0275\u0275template"](5,I,2,0,"label",21),c["\u0275\u0275template"](6,D,2,0,"label",21),c["\u0275\u0275elementStart"](7,"input",22),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.custcode=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",19),c["\u0275\u0275elementStart"](9,"div",20),c["\u0275\u0275template"](10,V,2,0,"label",21),c["\u0275\u0275template"](11,F,2,0,"label",21),c["\u0275\u0275template"](12,T,2,0,"label",21),c["\u0275\u0275elementStart"](13,"input",23),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.date=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](14,L,5,3,"div",24),c["\u0275\u0275elementStart"](15,"div",19),c["\u0275\u0275elementStart"](16,"div",20),c["\u0275\u0275elementStart"](17,"label",25),c["\u0275\u0275text"](18,"Ref.No."),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"input",26),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.qutationrefrence=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](20,j,22,5,"div",27),c["\u0275\u0275template"](21,z,21,4,"div",27),c["\u0275\u0275template"](22,N,11,2,"div",27),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("purchase")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("debit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("wastage")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.custcode),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("purchase")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("debit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("wastage")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.date),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("purchase")||e.order.ordertype.name.toLowerCase().includes("debit")),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.qutationrefrence),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=e.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=e.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=e.order.ordertype.id)}}function Y(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Invoice No."),c["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Credit Note No."),c["\u0275\u0275elementEnd"]())}function $(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Credit Date"),c["\u0275\u0275elementEnd"]())}function q(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",25),c["\u0275\u0275text"](1,"Invoice Date"),c["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"i"),c["\u0275\u0275text"](2,"Cur Bal: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.ledgerbalance)}}function U(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",3),c["\u0275\u0275elementStart"](2,"div",19),c["\u0275\u0275elementStart"](3,"div",20),c["\u0275\u0275template"](4,Y,2,0,"label",21),c["\u0275\u0275template"](5,H,2,0,"label",21),c["\u0275\u0275elementStart"](6,"input",39),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.custcode=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",19),c["\u0275\u0275elementStart"](8,"div",20),c["\u0275\u0275template"](9,$,2,0,"label",21),c["\u0275\u0275template"](10,q,2,0,"label",21),c["\u0275\u0275elementStart"](11,"input",40),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.date=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",19),c["\u0275\u0275elementStart"](13,"div",20),c["\u0275\u0275elementStart"](14,"label",25),c["\u0275\u0275text"](15,"Order No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"input",41),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.vendorbidref=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",19),c["\u0275\u0275elementStart"](18,"div",20),c["\u0275\u0275elementStart"](19,"label",25),c["\u0275\u0275text"](20,"Order Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"input",28),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.podate=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.lastActiveId="po-date",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",3),c["\u0275\u0275elementStart"](23,"div",19),c["\u0275\u0275elementStart"](24,"div",20),c["\u0275\u0275elementStart"](25,"label",25),c["\u0275\u0275text"](26,"Sales Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"input",42),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.purchaseledger.name=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.lastActiveId="ledger-"+t.i,t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",19),c["\u0275\u0275elementStart"](29,"div",20),c["\u0275\u0275elementStart"](30,"label",25),c["\u0275\u0275text"](31,"Party Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"input",43),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.ledger.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](33,K,4,1,"span",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",19),c["\u0275\u0275elementStart"](35,"div",20),c["\u0275\u0275elementStart"](36,"label",25),c["\u0275\u0275text"](37,"Payment Terms"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"input",44),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.paymentterms=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"div",3),c["\u0275\u0275elementStart"](40,"div",19),c["\u0275\u0275elementStart"](41,"div",20),c["\u0275\u0275elementStart"](42,"label",25),c["\u0275\u0275text"](43,"Eway Bill Number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"input",45),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.biltynumber=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",19),c["\u0275\u0275elementStart"](46,"div",20),c["\u0275\u0275elementStart"](47,"label",25),c["\u0275\u0275text"](48,"Eway Bill Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"input",35),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.biltydate=t}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.lastActiveId="account-biltydate",t.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"div",19),c["\u0275\u0275elementStart"](51,"div",20),c["\u0275\u0275elementStart"](52,"label",25),c["\u0275\u0275text"](53,"Delivery Terms"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"input",46),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.deliveryterms=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](55,"div",3),c["\u0275\u0275elementStart"](56,"div",19),c["\u0275\u0275elementStart"](57,"div",20),c["\u0275\u0275elementStart"](58,"label",25),c["\u0275\u0275text"](59,"Party Billing Address"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](60,"textarea",47),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.billingaddress=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](61,"div",19),c["\u0275\u0275elementStart"](62,"div",20),c["\u0275\u0275elementStart"](63,"label",25),c["\u0275\u0275text"](64,"Shipment Location"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](65,"textarea",48),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.shipmentlocation=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](66,"div",19),c["\u0275\u0275elementStart"](67,"div",20),c["\u0275\u0275elementStart"](68,"label",25),c["\u0275\u0275text"](69,"Remarks"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](70,"textarea",49),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.orderremarks=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("sales")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("credit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.custcode),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.order.ordertype.name.toLowerCase().includes("credit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.order.ordertype.name.toLowerCase().includes("credit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.date),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.vendorbidref),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.podate),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",e.order.purchaseledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.ledger.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.ledgerbalance),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.paymentterms),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",e.order.biltynumber),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.biltydate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.deliveryterms),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",e.order.billingaddress),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.shipmentlocation),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.order.orderremarks)}}function W(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Rate"),c["\u0275\u0275elementEnd"]())}function Q(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Amount"),c["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Line Amount"),c["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"remarks"),c["\u0275\u0275elementEnd"]())}function Z(e,t){1&e&&c["\u0275\u0275element"](0,"th")}function ee(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1,"("),c["\u0275\u0275elementStart"](2,"i"),c["\u0275\u0275text"](3,"Available Qty is "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"]("",e.totalitem,")")}}function te(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",53),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.rate=t}))("input",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return t.lineamount=t.amount=(t.qty*t.rate).toFixed(2)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("id","amtrate-"+t)("ngModel",n.rate)}}function ne(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",54),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.amount=t}))("input",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return t.lineamount=t.amount})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("id","amount-"+t)("ngModel",n.amount)}}function oe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",55),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.lineamount=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.lineamount)}}function ae(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",56),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.remarks=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("id","remarks-"+t)("ngModel",n.remarks)}}function ie(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"button",57),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().TaxDetails(t)})),c["\u0275\u0275text"](2,"Tax"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().index;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("id","taxDetail-"+e)}}function re(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"button",58),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).addAmountDetails()})),c["\u0275\u0275element"](2,"i",59),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function le(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"button",60),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().order.amountDetails.splice(t,1)})),c["\u0275\u0275element"](2,"i",61),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function se(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"input",50),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.warehouse.name=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275elementStart"](4,"input",51),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.stockitem.name=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](5,ee,5,1,"span",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275elementStart"](7,"input",52),c["\u0275\u0275listener"]("input",(function(){const e=t.$implicit;return e.lineamount=e.amount=(e.qty*e.rate).toFixed(2)}))("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.qty=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](8,te,2,2,"td",4),c["\u0275\u0275template"](9,ne,2,2,"td",4),c["\u0275\u0275template"](10,oe,2,1,"td",4),c["\u0275\u0275template"](11,ae,2,2,"td",4),c["\u0275\u0275template"](12,ie,3,1,"td",4),c["\u0275\u0275template"](13,re,3,0,"td",4),c["\u0275\u0275template"](14,le,3,0,"td",4),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("id","warehouse-"+n)("name","warehouse-"+n)("ngModel",e.warehouse.name),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("id","stockitem-"+n)("ngModel",e.stockitem.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",o.order.ordertype.name.toLowerCase().includes("sales")&&o.order.amountDetails[n].warehouse.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("id","qty-"+n)("ngModel",e.qty),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==n&&-108!=o.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!==n)}}function ce(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",62),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275elementStart"](6,"label",63),c["\u0275\u0275text"](7,"Total Qty:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"input",64),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().totalqty=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275elementStart"](12,"label",25),c["\u0275\u0275text"](13,"Total Amt:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",64),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().totalamount=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275elementStart"](16,"label",25),c["\u0275\u0275text"](17,"Total Tax Amt:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",65),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().totalTaxamount=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"td"),c["\u0275\u0275elementStart"](20,"label",25),c["\u0275\u0275text"](21,"Total Line Amt:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"input",64),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.totalamount=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"td"),c["\u0275\u0275text"](24,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"td"),c["\u0275\u0275text"](26,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",e.totalqty)("value",e.calculateTotalQty()),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",e.totalamount)("value",e.calculateTotal()),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",e.totalTaxamount),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",e.order.totalamount)("value",e.calculateTotalLineAmount())}}function de(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"input",66),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().order.ismanual=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](2," Is Mannual Approval "),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.order.ismanual)}}function me(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",67),c["\u0275\u0275elementStart"](1,"div",68),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4,"Are you want to save ?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",69),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().dismiss(!0)})),c["\u0275\u0275text"](6,"Yes"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8,"\xa0\xa0\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"button",69),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](10,"No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function he(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",67),c["\u0275\u0275elementStart"](1,"div",70),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",71),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.order[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.order[e.f2Date])}}let pe=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.route=n,this.user=o,this.router=a,this.printService=i,this.modalService=r,this.accountService=l,this.lastwarehouseActiveId="",this.showConfirm=!1,this.stockitmeflag=!0,this.suggestionname="",this.branchdata=[],this.orderTypeData=[],this.supplier=[],this.ledgers={all:[],suggestions:[]},this.showSuggestions=!1,this.activeLedgerIndex=-1,this.totalitem=null,this.invoiceDetail=[],this.taxDetailData=[],this.mannual=!1,this.freezedate="",this.allowBackspace=!0,this.ledgerbalance="",this.totalqty=0,this.totalamount=0,this.totalTaxamount=0,this.rateflag=[],this.ledgersuggestiondata=[],this.order={podate:this.common.dateFormatternew(new Date).split(" ")[0],date:this.accountService.voucherDate?this.accountService.voucherDate:this.common.dateFormatternew(new Date).split(" ")[0],biltynumber:"",biltydate:this.common.dateFormatternew(new Date).split(" ")[0],totalamount:null,grnremarks:"",billingaddress:"",custcode:"",vendorbidref:"",qutationrefrence:"",deliveryterms:"",paymentterms:"",orderremarks:"",shipmentlocation:"",orderid:0,delete:0,ledgeraddressid:null,print:!1,branchid:0,ordertype:{name:"",id:0},ledger:{name:"",id:0},purchaseledger:{name:"",id:""},ismanual:this.mannual,amountDetails:[{id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:"0"},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!0}]},this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.suggestions={purchaseLedgers:[],supplierLedgers:[],stockItems:[],purchasestockItems:[],salesstockItems:[],discountLedgers:[],warehouses:[],invoiceTypes:[],list:[],invoiceList:[]},this.suggestionIndex=-1,this.activeId="ordertype",this.lastActiveId="",this.autoSuggestion={data:[],targetId:"",display:""},this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.order.ordertype.id=e.id,this.order.ordertype.name=e.name),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let t=e.name;"Debit Note"==t&&(this.getInvoiceList(-2),this.suggestionname="purchase"),"Credit Note"==t&&(this.getInvoiceList(-4),this.suggestionname="sales"),"Purchase Assets Invoice"==t&&(this.suggestionname="inventary"),"Purchase Invoice"==t&&(this.suggestionname="purchase"),"Sales Invoice"==t&&(this.suggestionname="sales"),this.getStockItems(this.suggestionname)}),this.common.refresh=()=>{this.getInvoiceTypes(),this.getPurchaseLedgers(),this.getSupplierLedgers(),this.getStockItems(this.suggestionname),this.getWarehouses(),this.mannual=this.accountService.selected.branch.is_inv_manualapprove,this.order.ismanual=this.mannual},this.common.refresh(),this.setFoucus("custcode"),this.common.currentPage=this.order.ordertype.name,this.getFreeze()}ngOnInit(){}setInvoice(){return{podate:this.common.dateFormatternew(new Date).split(" ")[0],date:this.common.dateFormatternew(new Date).split(" ")[0],biltynumber:"",biltydate:this.common.dateFormatternew(new Date).split(" ")[0],totalamount:null,grnremarks:"",billingaddress:"",custcode:"",vendorbidref:"",qutationrefrence:"",deliveryterms:"",paymentterms:"",orderremarks:"",shipmentlocation:"",orderid:0,delete:0,branchid:0,ledgeraddressid:null,ismanual:this.mannual,print:!1,ordertype:{name:this.order.ordertype.name,id:this.order.ordertype.id},ledger:{name:"",id:0},purchaseledger:{name:"",id:""},amountDetails:[{id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:""},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!0}]}}addAmountDetails(){this.order.amountDetails.push({id:-1,transactionType:"debit",ledger:"",taxledger:"",stockitem:{name:"",id:""},stockunit:{name:"",id:""},qty:null,discountledger:{name:"",id:""},warehouse:{name:"",id:""},taxDetails:[],remarks:"",lineamount:null,discountate:0,rate:null,amount:null,defaultcheck:!1});let e=parseInt(this.lastwarehouseActiveId.split("-")[1]);console.log("tax detail inex",this.lastwarehouseActiveId,e),this.setFoucus("warehouse-"+(e+1))}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getInvoiceTypes(){this.common.loading++,this.api.post("Suggestion/GetOrderTypeList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.invoiceTypes=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockItems(e){this.common.loading++,this.api.get("Suggestion/GetStockItem?search=123&invoicetype="+e).subscribe(e=>{this.common.loading--,console.log("----------------------kkk:",e.data),this.suggestions.stockItems=e.data,this.setAutoSuggestion()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getWarehouses(){this.common.loading++,this.api.get("Suggestion/GetWareHouse?search=123").subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.warehouses=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}callconfirm(){this.showConfirm=!0}dismiss(e){if(this.showConfirm=!1,event.preventDefault(),e){if(console.log("Order new:",this.accountService.selected.financialYear),0==this.accountService.selected.branch.id)return void this.common.showError("Please select Branch");if(null==this.accountService.selected.financialYear)this.common.showError("This Select financial year ");else if(1==this.accountService.selected.financialYear.isfrozen)return void this.common.showError("This financial year is freezed. Please select currect financial year");if(0==this.order.amountDetails[0].amount)return void this.common.showError("Please fill correct amount");{let e=this.common.dateFormatter(this.common.convertDate(this.order.date),"y",!1);if(e<this.accountService.selected.financialYear.startdate||e>this.accountService.selected.financialYear.enddate)return void this.common.showError("Please Select Correct Financial Year")}if(this.freezedate){let e=this.CompareDate(this.freezedate);console.log("heddlo",e),0==e?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout(()=>{this.setFoucus("date")},150)):this.addOrder(this.order)}else this.common.showError("Please Select Correct Financial Year")}}modelCondition(){this.showConfirm=!1,event.preventDefault()}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.order[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.order[e])})}TaxDetails(e){0==this.order.amountDetails[e].amount?(console.log("test hello again",this.order.amountDetails[e].amount,e),this.common.showError("Please fill correct amount"),this.setFoucus("rate"+e)):(this.common.params={taxDetail:this.order.amountDetails[e].taxDetails,amount:this.order.amountDetails[e].amount,sizeIndex:1},this.modalService.open(x.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"accountModalClass"}).result.then(t=>{t.response&&(console.log("????????",t.taxDetails),this.order.amountDetails[e].taxDetails=t.taxDetails,this.order.amountDetails[e].lineamount=null,console.log("###",this.order.amountDetails[e].amount),this.order.amountDetails[e].lineamount=(parseFloat(this.order.amountDetails[e].amount)+parseFloat(t.taxDetails[0].totalamount)).toFixed(2),this.totalTaxamount+=t.taxDetails[0].totalamount,console.log("###---",this.order.amountDetails[e].lineamount,"-----||",t.taxDetails[0].totalamount,this.lastwarehouseActiveId),this.setFoucus("plustransparent"))}))}onSelected(e,t,n){this.order[t].name=e[n],this.order[t].id=e.id,console.log("order User: ",this.order)}onSelectedaddress(e,t,n){this.order[t].name=e[n],this.order[t].id=e.id,console.log("order User: ",this.order)}addOrder(e){console.log("new order",e);const t={billingaddress:e.billingaddress,orderremarks:e.orderremarks,biltynumber:e.biltynumber,podate:e.podate,biltydatestamp:e.biltydate,custcode:e.custcode,orderdata:e.date,deliveryterms:e.deliveryterms,paymentterms:e.paymentterms,vendorquotationref:e.qutationrefrence,review:e.review,shipmentlocation:e.shipmentlocation,vendorbidref:e.vendorbidref,ledger:e.ledger.id,ordertype:e.ordertype.id,purchaseledgerid:e.purchaseledger.id,grnremarks:e.grnremarks,amountDetails:e.amountDetails,ledgeraddressid:e.ledgeraddressid,x_id:0,ismannual:e.ismanual,branchid:e.branchid};console.log("params11: ",t),this.common.loading++,this.api.post("Company/InsertPurchaseOrder",t).subscribe(t=>{this.common.loading--,console.log("res: ",t),e.print&&this.printFunction(),this.order=this.setInvoice(),this.setFoucus("ordertype"),this.common.showToast("Invoice Are Saved")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}calculateTotal(){let e=null;return this.order.amountDetails.map(t=>{e+=parseFloat(t.amount)}),e}calculateTotalLineAmount(){let e=null;return this.order.amountDetails.map(t=>{e+=parseFloat(t.lineamount)}),e}calculateTotalQty(){let e=null;return this.order.amountDetails.map(t=>{e+=parseFloat(t.qty)}),e}getStockAvailability(e,t){let n={stockid:e,wherehouseid:t};this.common.loading++,this.api.post("Suggestion/GetStockItemAvailableQty",n).subscribe(e=>(this.common.loading--,console.log("Res:",e.data[0].get_stockitemavailableqty),this.totalitem=e.data[0].get_stockitemavailableqty,this.totalitem),e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("-------------:",e,document.activeElement.id,this.activeId),this.setAutoSuggestion(),this.order.ordertype.name.toLowerCase().includes("purchase")&&this.activeId.includes("stockitem")&&(this.suggestions.stockItems=this.suggestions.stockItems),this.order.ordertype.name.toLowerCase().includes("sales")&&this.activeId.includes("stockitem")&&(this.suggestions.stockItems=this.suggestions.stockItems),console.log("Active event11",e,this.order.ordertype.name,this.activeId,this.suggestions.purchasestockItems),"f3"==t&&this.callconfirm(),!e.ctrlKey&&"f2"==t&&!this.showDateModal)return this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date="date",void(this.activedateid=this.lastActiveId);if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),console.log("(orderactivedateid",this.order[this.lastActiveId],this.activeId),this.order.date=this.common.handleVoucherDateOnEnter(this.order.date),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if(e.altKey&&"c"===t&&(this.activeId.includes("purchaseledger")||this.activeId.includes("discountledger")||this.activeId.includes("ledger")))this.openledger();else if(e.altKey&&"c"===t&&this.activeId.includes("stockitem"))this.openStockItemModal();else if(e.altKey&&"c"===t&&this.activeId.includes("warehouse"))this.openwareHouseModal();else if(e.altKey&&"u"===t&&this.activeId.includes("ledger"))0!=this.order.ledger.id&&this.openinvoicemodel(this.order.ledger.id,0);else{if("home"===t&&this.activeId.includes("ledger")&&(console.log("hello",this.activeId),"ledger"==this.activeId?(console.log("ledger value ------------",this.order.ledger.id),0!=this.order.ledger.id?this.openinvoicemodel(this.order.ledger.id):this.common.showError("Please Select Correct Ledger")):"purchaseledger"!=this.activeId&&"ledgersup"!=this.activeId||(console.log("purchase ledger value ------------",this.order.purchaseledger.id),""!=this.order.purchaseledger.id&&this.openinvoicemodel(this.order.purchaseledger.id))),e.ctrlKey&&"`"===t)return console.log("ctrl esacape"),void this.mouse();if(this.activeId.includes("qty-")||this.activeId.includes("amtrate-")){let e=parseInt(this.activeId.split("-")[1]);setTimeout(()=>{0!=this.order.amountDetails[e].qty&&null!=this.order.amountDetails[e].qty||0!=this.order.amountDetails[e].rate&&null!=this.order.amountDetails[e].rate?this.rateflag[e]=0:(this.rateflag[e]=1,this.activeId.includes("amtrate-")&&this.setFoucus("amount-"+e)),console.log("rate flag ::",e,"index",this.rateflag[e],this.rateflag)},50)}if(this.activeId.includes("qty-")&&this.order.ordertype.name.toLowerCase().includes("sales")){let e=parseInt(this.activeId.split("-")[1]);setTimeout(()=>{console.log("available item",this.order.amountDetails[e].qty,"second response",this.totalitem,"stockitemm",this.stockitmeflag),this.stockitmeflag&&parseInt(this.totalitem)<parseInt(this.order.amountDetails[e].qty)&&(alert("Quantity is lower then available quantity"),this.order.amountDetails[e].qty=0)},300)}if((this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit"))&&this.activeId.includes("amtrate-")){let e=parseInt(this.activeId.split("-")[1]),t=this.order.amountDetails[e].amount;console.log("amount with condition",t),this.stockitmeflag&&""==this.order.biltynumber&&t>=5e4&&this.common.showError("Please Enter vailde Eway Bill Number")}if("enter"==t){if(this.allowBackspace=!0,this.activeId.includes("branch"))this.setFoucus("ordertype");else if(this.activeId.includes("ordertype"))console.log("order type",this.order.ordertype.name),this.order.ordertype.name.toLowerCase().includes("purchase")&&(this.suggestions.stockItems=this.suggestions.purchasestockItems),this.order.ordertype.name.toLowerCase().includes("sales")&&(this.suggestions.stockItems=this.suggestions.salesstockItems),this.setFoucus("custcode");else if(this.activeId.includes("custcode"))this.handleVoucherDateOnEnter(),this.setFoucus("date");else if(this.activeId.includes("biltydate"))this.handleOrderDateOnEnter("biltydate"),this.setFoucus("deliveryterms");else if(this.activeId.includes("podate"))this.handleOrderDateOnEnter("podate"),this.setFoucus(-104==this.order.ordertype.id?"salesledger":"qutationrefrence");else if(this.activeId.includes("date")){if(this.freezedate){let e=this.CompareDate(this.freezedate);console.log("heddlo",e),0==e?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout(()=>{this.setFoucus("date")},150)):this.setFoucus(-104==this.order.ordertype.id?"vendorbidref":"podate")}}else if(this.activeId.includes("purchaseledger")||this.activeId.includes("salesledger"))this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),-108==this.order.ordertype.id?this.setFoucus("warehouse-0"):(setTimeout(()=>{console.log("sales ledger11111",this.order.purchaseledger.id),this.order.purchaseledger.id||this.order.purchaseledger.name||(this.common.showError("Please Select Purchase Legder"),this.order.purchaseledger.name="",this.setFoucus(-104==this.order.ordertype.id?"salesledger":"purchaseledger"))},100),this.setFoucus("ledger"));else if(this.activeId.includes("discountledger")){console.log("0000000000000000000000000000000"),this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);let e=parseInt(this.activeId.split("-")[1]);this.setFoucus("discountate-"+e)}else if(this.activeId.includes("ledger"))this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),setTimeout(()=>{this.order.ledger.id||this.order.ledger.name||(this.order.ledger.name="",this.common.showError("Please Select Supplier Legder"),this.setFoucus("ledger"))},100),this.setFoucus(-104==this.order.ordertype.id?"paymentterms":"vendorbidref");else if(this.activeId.includes("vendorbidref"))this.setFoucus(-104==this.order.ordertype.id?"podate":"shipmentlocation");else if(this.activeId.includes("qutationrefrence")){if(-104==this.order.ordertype.id)this.setFoucus("salesledger");else if(this.freezedate){let e=this.CompareDate(this.freezedate);console.log("heddlo",e),0==e?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout(()=>{this.setFoucus("purchaseledger")},150)):this.setFoucus("purchaseledger")}}else if(this.activeId.includes("shipmentlocation"))this.setFoucus(-104==this.order.ordertype.id?"orderremarks":"paymentterms");else if(this.activeId.includes("paymentterms"))this.setFoucus("biltynumber");else if(this.activeId.includes("biltynumber"))this.handleVoucherBiltyDateOnEnter(),this.setFoucus("biltydate");else if(this.activeId.includes("deliveryterms"))console.log(this.order.ordertype.name),this.setFoucus("billingaddress");else if(this.activeId.includes("billingaddress")&&(this.order.ordertype.name.toLowerCase().includes("purchase")||this.order.ordertype.name.toLowerCase().includes("debit"))||this.activeId.includes("grnremarks"))this.setFoucus("orderremarks");else if(this.activeId.includes("billingaddress")&&(this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit")))this.setFoucus(-104==this.order.ordertype.id?"shipmentlocation":"grnremarks");else if(this.activeId.includes("orderremarks"))this.setFoucus("warehouse-0");else if(this.activeId.includes("stockitem")){this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);let e=parseInt(this.activeId.split("-")[1]);this.order.ordertype.name.toLowerCase().includes("sales")&&!this.stockitmeflag?setTimeout(()=>{this.order.amountDetails[e].stockitem.id||this.order.amountDetails[e].stockitem.name?this.setFoucus("rate-"+e):(this.common.showError("Please Select Warehouse"),this.order.purchaseledger.name="",this.setFoucus("stockitem-"+e))},100):setTimeout(()=>{this.order.amountDetails[e].stockitem.id||this.order.amountDetails[e].stockitem.name?this.setFoucus("qty-"+e):(this.common.showError("Please Select Warehouse"),this.order.purchaseledger.name="",this.setFoucus("stockitem-"+e))},100)}else if(this.activeId.includes("qty")){let e=parseInt(this.activeId.split("-")[1]);this.setFoucus(-108==this.order.ordertype.id?"plustransparent":"amtrate-"+e)}else if(this.activeId.includes("amtrate")){let e=parseInt(this.activeId.split("-")[1]);document.getElementById("amount-"+e),this.setFoucus("amount-"+e)}else if(this.activeId.includes("discountate")){let e=parseInt(this.activeId.split("-")[1]);this.setFoucus("warehouse-"+e)}else if(this.activeId.includes("warehouse")){console.log("hello",this.activeId),this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1);let e=parseInt(this.activeId.split("-")[1]);setTimeout(()=>{console.log("suggetion data",this.order.amountDetails[e].warehouse.id),this.order.amountDetails[e].warehouse.id||this.order.amountDetails[e].warehouse.name?this.setFoucus("stockitem-"+e):(this.common.showError("Please Select Warehouse"),this.order.purchaseledger.name="",this.setFoucus("warehouse-"+e))},100)}else if(this.activeId.includes("remarks")){console.log("lastwarehouseActiveId",this.lastwarehouseActiveId,this.activeId);let e=parseInt(this.activeId.split("-")[1]);setTimeout(()=>{this.lastwarehouseActiveId="taxDetail-"+e},50),this.setFoucus("taxDetail-"+e)}else if(this.activeId.includes("invocelist"))this.setFoucus("custcode");else if(this.activeId.includes("amount-")){let e=parseInt(this.activeId.split("-")[1]);0==this.order.amountDetails[e].amount?(console.log("test hello",this.order.amountDetails[e].amount,e),this.common.showError("Please fill correct amount"),this.setFoucus("amount-"+e)):this.setFoucus("remarks-"+e)}}else if("backspace"==t&&this.allowBackspace){if(e.preventDefault(),console.log("active 1",this.activeId),"date"==this.activeId&&this.setFoucus("custcode"),"podate"==this.activeId&&this.setFoucus("date"),"salesledger"==this.activeId&&this.setFoucus("qutationrefrence"),"purchaseledger"==this.activeId&&this.setFoucus("qutationrefrence"),"ledger"==this.activeId&&(this.order.ordertype.name.toLowerCase().includes("sales")?this.setFoucus("salesledger"):this.setFoucus("purchaseledger")),"vendorbidref"==this.activeId&&this.setFoucus("ledger"),"qutationrefrence"==this.activeId&&(this.order.ordertype.name.toLowerCase().includes("sales")?this.setFoucus("date"):this.setFoucus("podate")),"shipmentlocation"==this.activeId&&this.setFoucus("vendorbidref"),"paymentterms"==this.activeId&&this.setFoucus("shipmentlocation"),"biltynumber"==this.activeId&&this.setFoucus("paymentterms"),"biltydate"==this.activeId&&this.setFoucus("biltynumber"),"deliveryterms"==this.activeId&&this.setFoucus("biltydate"),"billingaddress"==this.activeId&&this.setFoucus("deliveryterms"),"grnremarks"==this.activeId&&this.setFoucus("billingaddress"),this.activeId.includes("orderremarks")&&(this.order.ordertype.name.toLowerCase().includes("sales")||this.order.ordertype.name.toLowerCase().includes("credit"))&&this.setFoucus("grnremarks"),this.activeId.includes("orderremarks")&&(this.order.ordertype.name.toLowerCase().includes("purchase")||this.order.ordertype.name.toLowerCase().includes("debit"))&&this.setFoucus("billingaddress"),this.activeId.includes("remarks")){let e=this.activeId.split("-")[1];this.setFoucus("amount-"+e)}if(this.activeId.includes("amount-")){let e=this.activeId.split("-")[1];this.setFoucus("amtrate-"+e)}if(this.activeId.includes("amtrate")){let e=this.activeId.split("-")[1];this.setFoucus(-104==this.order.ordertype.id?"stockitem-"+e:"qty-"+e)}if(this.activeId.includes("qty")){let e=this.activeId.split("-")[1];this.setFoucus("stockitem-"+e)}if(this.activeId.includes("stockitem")){let e=this.activeId.split("-")[1];this.setFoucus("warehouse-"+e)}if(this.activeId.includes("warehouse")){let e=this.activeId.split("-")[1];0==parseInt(e)?this.setFoucus("orderremarks"):this.setFoucus("remarks-"+(parseInt(e)-1))}}else if(t.includes("arrow"))this.allowBackspace=!1,(t.includes("arrowup")||t.includes("arrowdown"))&&(this.handleArrowUpDown(t),e.preventDefault());else if("date"!=this.activeId&&"podate"!=this.activeId&&"biltydate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}}handleOrderDateOnEnter(e){let t=[],n="-",o="date"==e?"podate":"biltydate";if(this.order[o].includes("-"))t=this.order[o].split("-");else{if(!this.order[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.order[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i>=13?12:i;let r=i>"03"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1],l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,this.order[o]=a+n+i+n+l}setFoucus(e,t=!0){console.log("Id: ",e),setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus(),this.setAutoSuggestion()},100)}handleVoucherBiltyDateOnEnter(){let e=[],t="-";if(this.order.date.includes("-"))e=this.order.date.split("-");else{if(!this.order.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.order.date.split("/"),t="/"}let n=e[0];n=1==n.length?"0"+n:n;let o=e[1];o=1==o.length?"0"+o:o;let a=e[2];a=1==a.length?"200"+a:2==a.length?"20"+a:a,this.order.biltydate=n+t+o+t+a}handleVoucherDateOnEnter(){let e=[],t="-";if(this.order.date.includes("-"))e=this.order.date.split("-");else{if(!this.order.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.order.date.split("/"),t="/"}let n=e[0];n=1==n.length?"0"+n:n;let o=e[1];o=1==o.length?"0"+o:o;let a=e[2];a=1==a.length?"200"+a:2==a.length?"20"+a:a,this.order.date=n+t+o+t+a}getPurchaseLedgers(){console.log("purchase=====",this.order.ordertype.id);let e={search:123,invoicetype:-104==this.order.ordertype.id||-106==this.order.ordertype.id?"sales":"purchase"};this.common.loading++,this.api.post("Suggestion/GetAllLedgerForInvoice",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.purchaseLedgers=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getSupplierLedgers(){console.log("other============",this.order.ordertype.id),this.common.loading++,this.api.post("Suggestion/GetAllLedgerForInvoice",{search:123,invoicetype:"other"}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.supplierLedgers=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getInvoiceList(e){let t={orderid:e};this.common.loading++,this.api.post("Suggestion/GetInvoiceList",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.invoiceList=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getInvoiceDetail(e){let t={invoiceId:e};this.common.loading++,this.api.post("Company/getInvoiceDetail",t).subscribe(e=>{console.log("Res:",e.data),this.invoiceDetail=e.data.invoice,this.taxDetailData=e.data.taxdetail,console.log("Invoice detail",this.invoiceDetail[0].y_biltynumber),console.log("Tax Detail",this.taxDetailData),this.order.biltynumber=this.invoiceDetail[0].y_biltynumber,this.order.biltydate=this.common.dateFormatternew(this.invoiceDetail[0].y_biltydatestamp.split(" ")[0]),this.order.grnremarks=this.invoiceDetail[0].y_grn_remarks,this.order.billingaddress=this.invoiceDetail[0].y_vendorbillingaddress,this.order.custcode=this.invoiceDetail[0].y_cust_code,this.order.vendorbidref=this.invoiceDetail[0].y_vendorbidref,this.order.qutationrefrence=this.invoiceDetail[0].y_vendorquotationref,this.order.paymentterms=this.invoiceDetail[0].y_paymentterms,this.order.deliveryterms=this.invoiceDetail[0].y_deliveryterms,this.order.orderremarks=this.invoiceDetail[0].y_order_remarks,this.order.purchaseledger.name=this.invoiceDetail[0].purchaseledger_name,this.order.purchaseledger.id=this.invoiceDetail[0].y_purchaseledgerid,this.order.ledger.id=this.invoiceDetail[0].y_vendorledgerid,this.order.ledger.name=this.invoiceDetail[0].vendorledger_name,this.order.shipmentlocation=this.invoiceDetail[0].y_shipmentlocation,this.order.grnremarks=this.invoiceDetail[0].y_grn_remarks,this.order.delete=0,this.invoiceDetail.map((e,t)=>{this.order.amountDetails[t]||this.addAmountDetails(),this.order.amountDetails[t].stockitem.id=e.y_dtl_stockitemid,this.order.amountDetails[t].stockitem.name=e.stockitem_name,this.order.amountDetails[t].stockunit.id=e.y_dtl_stockunitid,this.order.amountDetails[t].stockunit.name=e.stockunit_name,this.order.amountDetails[t].warehouse.id=e.y_dtl_warehouse_id,this.order.amountDetails[t].warehouse.name=e.warehouse_name,this.order.amountDetails[t].qty=e.y_dtl_qty,this.order.amountDetails[t].rate=e.y_dtl_rate,this.order.amountDetails[t].lineamount=e.y_dtl_lineamount,this.order.amountDetails[t].remarks=e.y_invoice_remarks,this.order.amountDetails[t].amount=e.y_dtl_amount,this.order.totalamount+=parseFloat(e.y_dtl_lineamount)}),this.taxDetailData.map((e,t)=>{this.order.amountDetails.map(t=>{t.id==e.y_invoicedetails_id&&t.taxDetails.push({taxledger:{name:e.y_ledger_name,id:e.y_ledger_id},taxrate:e.y_rate,taxamount:e.y_amount,totalamount:null})})}),this.order.amountDetails.map(e=>{let t=0;e.taxDetails.map(e=>{t+=parseInt(e.taxamount)}),e.taxDetails.map(e=>{e.totalamount=t})}),this.common.loading--},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}selectLedger(e){console.log("LEDGER: ",e),this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id,this.setFoucus("ledger")}handleArrowUpDown(e){const t=this.generateIDs();console.log("Key:",e,t,t.indexOf(this.activeId)),-1!=t.indexOf(this.activeId)&&("arrowdown"==e?this.suggestionIndex!=this.suggestions.list.length-1?this.suggestionIndex++:this.suggestionIndex=0:0!=this.suggestionIndex?this.suggestionIndex--:this.suggestionIndex=this.suggestions.list.length-1)}generateIDs(){let e=["ordertype","purchaseledger","ledger"];return this.order.amountDetails.map((t,n)=>{e.push("stockitem-"+n),e.push("discountledger-"+n),e.push("warehouse-"+n)}),e}getSuggestions(){const e=document.getElementById(this.activeId),t=e&&e.value?e.value.toLowerCase():"";let n=[];return"ordertype"==this.activeId?e.value&&(n=this.suggestions.invoiceTypes.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):"purchaseledger"==this.activeId?e.value&&(n=this.suggestions.purchaseLedgers.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):"ledger"==this.activeId?e.value&&(n=this.suggestions.supplierLedgers.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):this.activeId.includes("stockitem")?e.value&&(n=this.suggestions.stockItems.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):this.activeId.includes("discountledger")?e.value&&(n=this.suggestions.purchaseLedgers.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):this.activeId.includes("warehouse")?e.value&&(n=this.suggestions.warehouses.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)):this.activeId.includes("invocelist")&&e.value&&(n=this.suggestions.warehouses.filter(e=>e.name.replace(/\./g,"").toLowerCase().includes(t)),n.splice(10,n.length-1)),this.suggestions.list=n,this.suggestions.list}selectSuggestion(e,t){if(console.log("Suggestion: ",e),"ordertype"==this.activeId){this.order.ordertype.name=e.name,this.order.ordertype.id=e.id;let t=e.name;"Debit Note"==t&&(this.getInvoiceList(-2),t="Purchase Invoice"),"Credit Note"==t&&(this.getInvoiceList(-4),t="Sales Invoice"),this.getStockItems(t)}else if("ledger"==this.activeId)this.order.ledger.name=e.name,this.order.ledger.id=e.id;else if("purchaseledger"==this.activeId)this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id;else if(this.activeId.includes("stockitem")){const t=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[t].stockitem.name=e.name,this.order.amountDetails[t].stockitem.id=e.id,this.order.amountDetails[t].stockunit.name=e.stockname,this.order.amountDetails[t].stockunit.id=e.stockunit_id}else if(this.activeId.includes("discountledger")){const t=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[t].discountledger.name=e.name,this.order.amountDetails[t].discountledger.id=e.id}else if(this.activeId.includes("warehouse")){const t=parseInt(this.activeId.split("-")[1]);this.order.amountDetails[t].warehouse.name=e.name,this.order.amountDetails[t].warehouse.id=e.id}else this.activeId.includes("invocelist")&&this.getInvoiceDetail(e.id)}openledger(e){console.log("ledger123",e),e&&(this.common.params=e),this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{e.response&&this.addLedger(e.ledger)})}addLedger(e){console.log("ledgerdata",e);const t={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertLedger",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getPurchaseLedgers(),this.getSupplierLedgers(),this.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStockItemModal(e){console.log("stockitem",e),e&&(this.common.params=e),this.modalService.open(y.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{if(t.response){if(e)return;this.addStockItem(t.stockItem)}})}addStockItem(e){console.log(e);const t={foid:123,name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: ",t),this.common.loading++,this.api.post("Stock/InsertStockItem",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockItems(this.order.ordertype.name),this.common.showToast("Stock item Saved")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}setAutoSuggestion(){console.log("-----------------------:",this.suggestions.stockItems,"ww:",this.suggestions.warehouses);let e=document.activeElement.id;if("ordertype"==e)this.autoSuggestion.data=this.suggestions.invoiceTypes;else if("purchaseledger"==e||"salesledger"==e)this.autoSuggestion.data=this.suggestions.purchaseLedgers;else if("ledger"==e)this.autoSuggestion.data=this.suggestions.supplierLedgers;else if(e.includes("stockitem"))this.autoSuggestion.data=this.suggestions.stockItems;else if(e.includes("discountledger"))this.autoSuggestion.data=this.suggestions.purchaseLedgers;else if(e.includes("warehouse")){if(this.autoSuggestion.data=this.suggestions.warehouses,1==this.suggestions.warehouses.length){console.log("where house suggestion",this.suggestions.warehouses[0].id,this.suggestions.warehouses);let t=parseInt(e.split("-")[1]);this.order.amountDetails[t].warehouse.id=this.suggestions.warehouses[0].id,this.order.amountDetails[t].warehouse.name=this.suggestions.warehouses[0].name}}else{if(!e.includes("invocelist"))return this.autoSuggestion.data=[],this.autoSuggestion.display="",void(this.autoSuggestion.targetId="");this.autoSuggestion.data=this.suggestions.invoiceList}this.autoSuggestion.display=e.includes("invocelist")?"cust_code":"name",this.autoSuggestion.targetId=e,console.log("Auto Suggestion: ",this.autoSuggestion)}onSelect(e,t){if(console.log("Suggestion: ",e),"ordertype"==t){this.order.ordertype.name=e.name,this.order.ordertype.id=e.id;let t=e.name;"Debit Note"==t&&(this.getInvoiceList(-2),t="Purchase Invoice"),"Credit Note"==t&&(this.getInvoiceList(-4),t="Sales Invoice"),this.getStockItems(t)}else if("ledger"==t)e?(this.order.ledger.name=e.name,this.order.ledger.id=e.id,e.address_count>1?this.getAddressByLedgerId(e.id):this.order.billingaddress=e.address,this.getLedgerView()):(this.order.ledger.name="",this.order.ledger.id=0);else if("purchaseledger"==t||"salesledger"==t)e?(console.log(">>>>>>>>>",e),this.order.purchaseledger.name=e.name,this.order.purchaseledger.id=e.id,console.log(">>>>>>>>><<<<<<<<<",this.order.purchaseledger.id)):(this.order.purchaseledger.name="",this.order.purchaseledger.id="");else if(t.includes("stockitem")){const n=parseInt(t.split("-")[1]);e?(this.order.amountDetails[n].stockitem.name=e.name,this.order.amountDetails[n].stockitem.id=e.id,this.order.amountDetails[n].stockunit.name=e.stockname,this.order.amountDetails[n].stockunit.id=e.stockunit_id,this.order.ordertype.name.toLowerCase().includes("sales")&&(this.getStockAvailability(e.id,this.order.amountDetails[n].warehouse.id),console.log("suggestion indexing",e),e.is_service&&(this.order.amountDetails[n].qty=1,this.stockitmeflag=!1))):(this.order.amountDetails[n].stockitem.name="",this.order.amountDetails[n].stockitem.id="")}else if(t.includes("discountledger")){const n=parseInt(t.split("-")[1]);this.order.amountDetails[n].discountledger.name=e.name,this.order.amountDetails[n].discountledger.id=e.id}else if(t.includes("warehouse")){const n=parseInt(t.split("-")[1]);e?(this.order.amountDetails[n].warehouse.name=e.name,this.order.amountDetails[n].warehouse.id=e.id):(this.order.amountDetails[n].warehouse.name="",this.order.amountDetails[n].warehouse.id="")}else t.includes("invocelist")&&this.getInvoiceDetail(e.id)}findStockitem(){return this.totalitem}openwareHouseModal(){this.common.params=null,this.modalService.open(C.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addWareHouse(e.wareHouse)})}addWareHouse(e){console.log("wareHouse",e);const t={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",t),this.common.loading++,this.api.post("Company/InsertWarehouse",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_warehouse;this.common.showToast(""==t?"Add Successfull  ":t),this.getWarehouses()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getAddressByLedgerId(e){this.api.post("Accounts/GetAddressByLedgerId",{ledgerid:e}).subscribe(e=>{console.log("Res ledger<<<<<<<<<<<<:",e.data),e.data.length>1?this.showAddpopup(e.data):(this.order.billingaddress=e.data[0].address,this.order.ledgeraddressid=e.data[0].id)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerView(){let e={startdate:this.common.dateFormatternew(new Date).split(" ")[0],enddate:this.common.dateFormatternew(new Date).split(" ")[0],ledger:this.order.ledger.id,vouchertype:0};this.common.loading++,this.api.post("Accounts/getLedgerView",e).subscribe(e=>{this.common.loading--,this.ledgerbalance="0"!=e.data[e.data.length-1].y_cramunt?"0.00"!=e.data[e.data.length-1].y_cramunt?parseFloat(e.data[e.data.length-1].y_cramunt).toFixed(2)+" Cr":"0":"0"==e.data[e.data.length-1].y_dramunt?"0":"0.00"!=e.data[e.data.length-1].y_dramunt?parseFloat(e.data[e.data.length-1].y_dramunt).toFixed(2)+" Dr":"0"},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}showAddpopup(e){console.log("data salutaion :: ??",e),this.common.params={addressdata:e},this.modalService.open(_.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{if(e.response)return console.log("data order responce",e),this.order.billingaddress=e.adddata,void(this.order.ledgeraddressid=e.addressid)})}printFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data,"this.order",this.order),this.print(this.order,e.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}print(e,t){let n=(t[0].phonenumber?" Phone Number -  "+t[0].phonenumber:"")+(t[0].panno?", PAN No -  "+t[0].panno:"")+(t[0].gstno?", GST NO -  "+t[0].gstno:""),o=[],a=0,i=null,r=0,l=0;e.amountDetails.map((t,n)=>{let s="",c=0;a+=t.qty,i+=t.amount,l+=t.lineamount,t.taxDetails.map((e,t)=>{s+=e.taxledger.name+" : "+e.taxamount+",",c+=e.taxamount});let d=s.substring(0,s.length-1);r+=c,o.push([{txt:0==n?t.warehouse.name:e.amountDetails[n-1].warehouse.id==t.warehouse.id?"":t.warehouse.name||""},{txt:t.stockitem.name+"("+t.stockunit.name+")</br>"+d||""},{txt:t.qty||""},{txt:t.rate||""},{txt:t.amount||0},{txt:c||0},{txt:t.lineamount||null},{txt:t.remarks||""}]),console.log("invoiceDetail.taxDetails",t.taxDetails)}),o.push([{txt:""},{txt:"Total"},{txt:a||""},{txt:"-"},{txt:i||null},{txt:r||0},{txt:l||0},{txt:""}]);let s={};(e.ordertype.name.toLowerCase().includes("purchase")||e.ordertype.name.toLowerCase().includes("debit note"))&&(s={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Purchase Ledger : ",value:e.purchaseledger.name},{name:"Supplier Ledger : ",value:e.ledger.name},{name:"Supplier Ref. No : ",value:e.vendorbidref},{name:"P.O.No. : ",value:e.qutationrefrence},{name:"Shipment Location : ",value:e.shipmentlocation},{name:"Payment Terms : ",value:e.paymentterms},{name:"Bilty Number : ",value:e.biltynumber},{name:"Bilty Date : ",value:e.biltydate},{name:"Dilivery Terms : ",value:e.deliveryterms},{name:"Billing Address : ",value:e.billingaddress},{name:"Invoice Remarks : ",value:e.orderremarks}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"},{txt:"Rate"},{txt:"Amount"},{txt:"Tax Amount"},{txt:"Total Amount"},{txt:"Remarks"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),e.ordertype.name.toLowerCase().includes("wastage")&&(s={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Purchase Ledger : ",value:e.purchaseledger.name}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),(e.ordertype.name.toLowerCase().includes("sales")||e.ordertype.name.toLowerCase().includes("credit note"))&&(s={headers:[{txt:t[0].foname,size:"22px",weight:"bold"},{txt:t[0].addressline},{txt:n},{txt:this.order.ordertype.name,size:"20px",weight:600,align:"left"}],details:[{name:"Invoice Type : ",value:e.ordertype.name},{name:"Invoice No : ",value:e.custcode},{name:"Invoice Date : ",value:e.date},{name:"Sales Ledger : ",value:e.purchaseledger.name},{name:"Party Name : ",value:e.ledger.name},{name:"Order No : ",value:e.vendorbidref},{name:"Other Reference : ",value:e.qutationrefrence},{name:"Shipment Location : ",value:e.shipmentlocation},{name:"Payment Terms : ",value:e.paymentterms},{name:"Eway Bill Number : ",value:e.biltynumber},{name:"Eway Bill Date : ",value:e.biltydate},{name:"Dilivery Terms : ",value:e.deliveryterms},{name:"Billing Address : ",value:e.billingaddress},{name:"Consignee Address : ",value:e.grnremarks},{name:"Invoice Remarks : ",value:e.orderremarks}],table:{headings:[{txt:"Ware House"},{txt:"Item"},{txt:"Qty"},{txt:"Rate"},{txt:"Amount"},{txt:"Tax Amount"},{txt:"Total Amount"},{txt:"Remarks"}],rows:o},signatures:["Accountant","Approved By"],footer:{left:{name:"Powered By",value:"Elogist Solutions"},center:{name:"Printed Date",value:"06-July-2019"},right:{name:"Page No",value:1}}}),console.log("JSON",s),localStorage.setItem("InvoiceJSO",JSON.stringify(s)),this.printService.printInvoice(s,1),this.order=this.setInvoice()}getFreeze(){this.common.loading++,this.api.post("Voucher/getFreeze",{departmentId:0}).subscribe(e=>{this.common.loading--,console.log("freeze Res11:",e.data),this.freezedate=e.data[0].getfreezedate},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}CompareDate(e){let t=e.split("-");console.log("first date ",t);let n=this.order.date.split("-");console.log("second arr ",n[2]);let o=t[0],a=t[1],i=t[2],r=parseInt(n[2]),l=parseInt(n[1]),s=parseInt(n[0]);return console.log("First Date:",o,a,i),console.log("Second Date:",r,l,s),new Date(o,a,i)>new Date(r,l,s)?0:1}mouse(){this.common.params={vouchertype:this.order.ordertype.id},this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})}openinvoicemodel(e,t=2){let n=[];if(console.log("ledger123",e),e){let o={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",o).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),n=e.data,this.common.params={ledgerdata:e.data,deleted:t,sizeledger:0},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&0==t&&this.addLedger(e.ledger)})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](o.c),c["\u0275\u0275directiveInject"](S.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["orders"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](P,!0,c.ElementRef),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.input=n.first)},hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:39,vars:16,consts:[[2,"border","0px"],[1,"row","mt-4"],[1,"col-9","pl-0","pr-0"],[1,"row"],[4,"ngIf"],["id","ledger-container",1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],[3,"data","targetId","display","select"],[1,"invoice_tabel","table","table-bordered",2,"margin-bottom","0!important"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],["class","diffrow","style","background: #d3dbe5 !important;",4,"ngIf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],["type","checkbox","name","print","id","print",3,"ngModel","ngModelChange"],[1,"col-1","text-right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["class","date-modal",4,"ngIf"],[1,"col","pl-0"],[1,"form-group"],["class","ref-label",4,"ngIf"],["autocomplete","off","autocomplete","off","type","text","id","custcode","name","account-custcode","placeholder","Please Enter Invoice Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","autocomplete","off","id","date","name","account-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["class","col pl-0",4,"ngIf"],[1,"ref-label"],["autocomplete","off","type","text","name","account-qutationrefrence","id","qutationrefrence","placeholder","Ref.No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],["type","text","autocomplete","off","autocomplete","off","id","podate","name","po-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","purchaseledger","name","purchaseledger","placeholder","Please Select Purchase Ledger",1,"form-control","ref-input",3,"ngModel","ngModelChange","click","input"],["autocomplete","off","type","text","id","ledger","name","ledger","placeholder","Please Select Supplier Ledger","require","",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-vendorbidref","id","vendorbidref","placeholder","Supplier Reference No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-shipmentlocation","id","shipmentlocation","placeholder","Shipment Location",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-paymentterms","id","paymentterms","placeholder","Payment Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","name","account-biltynumber","id","biltynumber","placeholder","Bilty Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","biltydate","name","account-biltydate","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["autocomplete","off","type","text","name","account-deliveryterms","id","deliveryterms","placeholder","Delivery Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["name","account-billingaddress","id","billingaddress","placeholder","Vender Billing Address",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["name","account-orderremarks","id","orderremarks","placeholder","Invoice Remarks",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","name","account-custcode","id","custcode","placeholder","Please Enter Invoice No.",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","date","name","account-date","maxlength","10",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","vendorbidref","name","account-vendorbidref","placeholder","Order No",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","salesledger","name","purchaseledger","placeholder","Please Select Purchase Ledger",1,"form-control","ref-input",3,"ngModel","ngModelChange","click","input"],["type","text","autocomplete","off","id","ledger","name","ledger","placeholder","Please Enter Party Name","require","",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","paymentterms","name","account-paymentterms","placeholder","Payment Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","biltynumber","name","account-biltynumber","placeholder","Eway Bill Number",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","deliveryterms","name","account-deliveryterms","placeholder","Delivery Terms",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","name","account-billingaddress","id","billingaddress","placeholder","Party Billing Address",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","id","shipmentlocation","name","account-shipmentlocation","placeholder","Shipment Location",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["autocomplete","off","name","account-orderremarks","id","orderremarks","placeholder","Invoice Remarks",1,"form-control","ref-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","placeholder","Please Select Warehouse",1,"form-control","ref-input",3,"id","name","ngModel","ngModelChange"],["type","text","autocomplete","off","name","'stockitem-' + i","placeholder","Please Select Stock Item","required","",1,"form-control","ref-input",3,"id","ngModel","ngModelChange"],["type","number","autocomplete","off","name","account-qty","placeholder","Please Enter Quantity",1,"ref-input",3,"id","ngModel","input","ngModelChange"],["type","number","autocomplete","off","name","account-rate","placeholder","Please Enter Rate",1,"form-control","ref-input",3,"id","ngModel","ngModelChange","input"],["type","number","autocomplete","off","name","account-amount",1,"form-control","ref-input",3,"id","ngModel","ngModelChange","input"],["type","number","autocomplete","off","name","account-lineamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","name","account-remarks","placeholder","Please Enter Remarks",1,"form-control","ref-input",3,"id","ngModel","ngModelChange"],[1,"btn","btn-taxdet",3,"id","click"],["id","plustransparent",1,"plustransparent","btn","btn-plus",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"diffrow",2,"background","#d3dbe5 !important"],[1,"ref-label",2,"padding","0!important"],["type","text","autocomplete","off","name","account-totalamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","value","ngModelChange"],["type","text","autocomplete","off","name","account-totalamount","readonly","",1,"form-control","ref-input",2,"background-color","#eeeeee",3,"ngModel","ngModelChange"],["type","checkbox","name","mannual","id","mannual",3,"ngModel","ngModelChange"],[1,"date-modal"],[1,"date-modal-body","data_model_save"],[3,"click"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control","ref-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275element"](4,"div",3),c["\u0275\u0275template"](5,G,23,13,"div",4),c["\u0275\u0275template"](6,U,71,18,"div",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"auto-suggetion-in-side",7),c["\u0275\u0275listener"]("select",(function(e){return t.onSelect(e,t.autoSuggestion.targetId)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"div",3),c["\u0275\u0275elementStart"](11,"table",8),c["\u0275\u0275elementStart"](12,"thead",9),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Warehouse"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Qty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](19,W,2,0,"th",4),c["\u0275\u0275template"](20,Q,2,0,"th",4),c["\u0275\u0275template"](21,J,2,0,"th",4),c["\u0275\u0275template"](22,X,2,0,"th",4),c["\u0275\u0275template"](23,Z,1,0,"th",4),c["\u0275\u0275element"](24,"th"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"tbody"),c["\u0275\u0275template"](26,se,15,15,"tr",10),c["\u0275\u0275template"](27,ce,27,7,"tr",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",12),c["\u0275\u0275elementStart"](29,"div",13),c["\u0275\u0275elementStart"](30,"div",14),c["\u0275\u0275elementStart"](31,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.order.print=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](32," Print After Save "),c["\u0275\u0275template"](33,de,3,1,"span",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",16),c["\u0275\u0275elementStart"](35,"button",17),c["\u0275\u0275listener"]("click",(function(){return t.callconfirm()})),c["\u0275\u0275text"](36,"Submit "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](37,me,11,0,"div",18),c["\u0275\u0275template"](38,he,4,1,"div",18)),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.order.ordertype.name.toLowerCase().includes("purchase")||t.order.ordertype.name.toLowerCase().includes("debit note")||t.order.ordertype.name.toLowerCase().includes("wastage")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.order.ordertype.name.toLowerCase().includes("sales")||t.order.ordertype.name.toLowerCase().includes("credit note")),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("data",t.autoSuggestion.data)("targetId",t.autoSuggestion.targetId)("display",t.autoSuggestion.display),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",t.order.amountDetails),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-108!=t.order.ordertype.id),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.order.print),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.mannual),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.showConfirm),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,E.u,w.a,E.t,k.a,k.r,k.u,k.d,k.m,k.C,k.x],styles:["nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}.ledger-container[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:5px;padding:8px;min-height:100px;max-height:390px;overflow:auto}.btn-taxdet[_ngcontent-%COMP%]{color:#26a69a!important}.data_model_save[_ngcontent-%COMP%]{padding:20px;text-align:center;width:auto;max-width:250px}.data_model_save[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:10px 20px;color:#fff;border-radius:3px}.ledger-option[_ngcontent-%COMP%]{border:1px solid #f2f2f2;padding:2px 8px;border-radius:5px;font-size:12px;font-weight:600;margin-bottom:3px}.active-ledger[_ngcontent-%COMP%]{background:#e8f0f3;font-weight:700}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;table-layout:fixed;background-color:#263238;color:#fff;width:100%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px!important;font-weight:400;width:15%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:5%}.invoice_tabel[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;table-layout:fixed;overflow:auto;max-height:calc(100vh - 435px)}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:5%}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:15%;padding:5px 10px!important;font-size:12px}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:14px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-taxdet[_ngcontent-%COMP%]{background-color:#000;color:#fff!important;font-size:12px;padding:3px 7px!important;border-radius:3px!important;cursor:pointer}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.invoice_tabel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}#cancel[_ngcontent-%COMP%]{background-color:#d61414!important}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}input[_ngcontent-%COMP%]:-moz-read-only{background-color:#ccc}input[_ngcontent-%COMP%]:read-only{background-color:#ccc}.diffrow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}"]}),e})();var ge=n("F8Eh"),ue=n("ia/1");function be(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"h5"),c["\u0275\u0275text"](2,"Stock Types"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",10),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275elementStart"](4,"span",11),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function ve(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().index;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function xe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.name)}}function fe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.code)}}function ye(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"date"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,e.entry_dt,"dd-MMM-yy"))}}function Ce(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td",15),c["\u0275\u0275elementStart"](1,"a",16),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().delete(t.id)})),c["\u0275\u0275element"](2,"i",17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}const _e=function(e){return{highlight:e}};function Se(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",12),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockTypeModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockTypeModal(n)})),c["\u0275\u0275template"](1,ve,2,1,"td",13),c["\u0275\u0275template"](2,xe,2,1,"td",13),c["\u0275\u0275template"](3,fe,2,1,"td",13),c["\u0275\u0275template"](4,ye,3,4,"td",13),c["\u0275\u0275template"](5,Ce,3,0,"td",14),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,_e,o.selectedRow==n)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.id)}}function Me(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",18),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275elementStart"](3,"button",21),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}let Ee=(()=>{class e{constructor(e,t,n,o,a){this.activeModal=e,this.api=t,this.common=n,this.user=o,this.modalService=a,this.stockTypes=[],this.selectedRow=-1,this.activeId="",this.pageName="",this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockTypes(),this.common.currentPage="Stock Types",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getStockTypes()}getStockTypes(){this.common.loading++,this.api.post("Stock/GetStocktype",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e),this.stockTypes=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStockTypeModal(e){e?(console.log("data:",e),this.common.params=e,this.modalService.open(ge.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{if(t.response){const n={name:t.stockType.name,code:t.stockType.code,id:e.id,isservice:t.stockType.isservice};console.log("params1",n),this.common.loading++,this.api.post("Stock/UpdateStockType",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocktype;this.common.showToast(""==t?" Stock Type Update":t),this.getStockTypes()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}})):(this.common.params=null,this.modalService.open(ge.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addStockType(e.stockType)}))}openEditStockTypeModal(e){console.log(e)}addStockType(e){const t={name:e.name,code:e.code,isservice:e.isservice};this.common.loading++,this.api.post("Stock/InsertStockType",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocktype;this.common.showToast(""==t?" Stock Type Add":t),this.getStockTypes()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.stockTypes.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockTypes.length-1&&this.selectedRow++)}delete(e){let t={id:e,tblidname:"id",tblname:"stocktype"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockTypes(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}modelCondition(){this.activeModal.close({}),event.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["stock-types"]],decls:22,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered","stocktype_tabel"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],["class","del",4,"ngIf"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275template"](2,be,6,0,"div",1),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.openStockTypeModal()})),c["\u0275\u0275element"](4,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275elementStart"](6,"table",5),c["\u0275\u0275elementStart"](7,"thead",6),c["\u0275\u0275elementStart"](8,"tr"),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"tbody"),c["\u0275\u0275template"](20,Se,6,8,"tr",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](21,Me,5,0,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.stockTypes),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName))},directives:[h.s,h.r,E.u,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:30%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:25%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:30%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:30%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:25%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),e})();var we=n("1MnW");function ke(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"h5"),c["\u0275\u0275text"](2,"Stock Sub Types"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",10),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275elementStart"](4,"span",11),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}const Pe=function(e){return{highlight:e}};function Oe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",12),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockSubTypeModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockSubTypeModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td",13),c["\u0275\u0275elementStart"](13,"a",14),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](14,"i",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](9,Pe,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stocktypename),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,6,e.entry_dt,"dd-MMM-yy"))}}function Ie(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"div",17),c["\u0275\u0275elementStart"](2,"div",18),c["\u0275\u0275elementStart"](3,"button",19),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}let De=(()=>{class e{constructor(e,t,n,o){this.activeModal=e,this.api=t,this.modalService=n,this.common=o,this.stockSubTypes=[],this.selectedName="",this.selectedRow=-1,this.activeId="",this.pageName="",this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockSubTypes(),this.common.currentPage="Stock Sub Types",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.getStockSubTypes()}getStockSubTypes(){this.common.loading++,this.api.post("Stock/getStockSubTypes",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e),this.stockSubTypes=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStockSubTypeModal(e){e&&(this.common.params=e),this.modalService.open(we.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{if(t.response){if(e)return void this.updateStockSubType(e.id,t.stockSubType);this.addStockSubType(t.stockSubType)}})}addStockSubType(e){const t={name:e.name,code:e.code,stockid:e.stockType.id};this.common.loading++,this.api.post("Stock/InsertStocksubType",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocksubtype;this.common.showToast(""==t?" Stock SubType Add":t),this.getStockSubTypes()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateStockSubType(e,t){console.log("test"),console.log(t);const n={name:t.name,code:t.code,stockid:t.stockType.id,id:e};this.common.loading++,this.api.post("Stock/updateStocksubType",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_stocksubtype;this.common.showToast(""==t?" Stock SubType Update":t),this.getStockSubTypes()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.stockSubTypes.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockSubTypes.length-1&&this.selectedRow++)}RowSelected(e){console.log("data of u",e),this.selectedName=e}delete(e){let t={id:e,tblidname:"id",tblname:"stocksubtype"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockSubTypes(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}modelCondition(){this.activeModal.close({}),event.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["stock-subtypes"]],decls:24,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered","stocksubtype_tabel"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275template"](2,ke,6,0,"div",1),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.openStockSubTypeModal()})),c["\u0275\u0275element"](4,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275elementStart"](6,"table",5),c["\u0275\u0275elementStart"](7,"thead",6),c["\u0275\u0275elementStart"](8,"tr"),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"S.no"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"th"),c["\u0275\u0275text"](20,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"tbody"),c["\u0275\u0275template"](22,Oe,15,11,"tr",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](23,Ie,5,0,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](20),c["\u0275\u0275property"]("ngForOf",t.stockSubTypes),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName))},directives:[h.s,h.r,E.u,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:20%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:25%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:20%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}svg[_ngcontent-%COMP%]{font-size:14px;text-align:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),e})();function Ve(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"h5"),c["\u0275\u0275text"](2,"Stock Items"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",10),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275elementStart"](4,"span",11),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}const Fe=function(e){return{highlight:e}};function Te(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",12),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockItemModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openStockItemModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"td",13),c["\u0275\u0275elementStart"](17,"a",14),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](18,"i",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,Fe,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stocktype_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stoctsubtypename),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.alias_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.is_service?"Yes":"No"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](15,8,e.entry_dt,"dd-MMM-yy"))}}function Be(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"div",17),c["\u0275\u0275elementStart"](2,"div",18),c["\u0275\u0275elementStart"](3,"button",19),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}let Ae=(()=>{class e{constructor(e,t,n,o,a){this.activeModal=e,this.api=t,this.common=n,this.user=o,this.modalService=a,this.StockItems=[],this.selectedRow=-1,this.activeId="",this.pageName="",this.sizeIndex=0,this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName),this.getStockItems(),this.common.currentPage="Stock Item",this.common.refresh=this.refresh.bind(this),this.common.params&&this.common.params.pageName&&this.common.handleModalSize("class","modal-lg","1150","px",this.sizeIndex)}ngOnInit(){}refresh(){this.getStockItems()}getStockItems(){this.common.loading++,this.api.post("Stock/GetStockItem",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res new:",e.data),this.StockItems=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStockItemModal(e){console.log("stockitem close time",e),e?(this.pageName&&(e.sizeIndex=1),this.common.params=e,this.modalService.open(y.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{if(t.response){console.log("after modal close :",t.stockItem);const n={foid:123,name:t.stockItem.name,code:t.stockItem.code,stocksubtypeid:t.stockItem.stockSubType.id,sales:t.stockItem.sales,purchase:t.stockItem.purchase,minlimit:t.stockItem.minlimit,maxlimit:t.stockItem.maxlimit,isactive:t.stockItem.isactive,inventary:t.stockItem.inventary,stockunit:t.stockItem.unit.id,stockItemid:e.id,gst:t.stockItem.gst,details:t.stockItem.details,hsnno:t.stockItem.hsnno,isnon:t.stockItem.isnon,cess:t.stockItem.cess,igst:t.stockItem.igst,taxability:t.stockItem.taxability,calculationtype:t.stockItem.calculationtype,openinngbal:t.stockItem.openingbal,openingqty:t.stockItem.openingqty};console.log("paramsans: ",n),this.common.loading++,this.api.post("Stock/UpdateStockItem",n).subscribe(e=>{this.common.loading--,console.log("res: update ",e.data[0].save_stockitem);let t=e.data[0].save_stockitem;this.common.showToast(t.success?"Stock item Update Succefully":t),this.getStockItems()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}})):(this.pageName&&(this.sizeIndex=1),this.common.params={sizeIndex:this.sizeIndex},this.modalService.open(y.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addStockItem(e.stockItem)}))}addStockItem(e){console.log(e);const t={foid:123,name:e.name,code:e.code,stocksubtypeid:e.stockSubType.id,sales:e.sales,purchase:e.purchase,minlimit:e.minlimit,maxlimit:e.maxlimit,isactive:e.isactive,inventary:e.inventary,stockunit:e.unit.id,gst:e.gst,details:e.hsndetail,hsnno:e.hsnno,isnon:e.isnon,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype,openinngbal:e.openingbal,openingqty:e.openingqty};console.log("params: stocks ",t),this.common.loading++,this.api.post("Stock/InsertStockItem",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.success?"Stock item Added Successfully":e.data[0].save_stockitem),this.getStockItems()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.StockItems.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.StockItems.length-1&&this.selectedRow++)}modelCondition(){this.activeModal.close({}),event.preventDefault()}delete(e){let t={id:e,tblidname:"id",tblname:"stockitem"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getStockItems(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["stockitems"]],decls:28,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main","table-responsive"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275template"](2,Ve,6,0,"div",1),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.openStockItemModal()})),c["\u0275\u0275element"](4,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275elementStart"](6,"table",5),c["\u0275\u0275elementStart"](7,"thead",6),c["\u0275\u0275elementStart"](8,"tr"),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Alias Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"th"),c["\u0275\u0275text"](20,"Is Sevice"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"th"),c["\u0275\u0275text"](22,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"th"),c["\u0275\u0275text"](24,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"tbody"),c["\u0275\u0275template"](26,Te,19,13,"tr",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](27,Be,5,0,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](24),c["\u0275\u0275property"]("ngForOf",t.StockItems),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName))},directives:[h.s,h.r,E.u,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),e})();var Le=n("Mz6N");function Re(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"h5"),c["\u0275\u0275text"](2,"Account Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",10),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275elementStart"](4,"span",11),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}const je=function(e){return{highlight:e}};function ze(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",12),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openAccountModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openAccountModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td",13),c["\u0275\u0275elementStart"](11,"a",14),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](12,"i",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,je,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.parent_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,5,e.entry_dt,"dd-MMM-yy"))}}function Ne(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"div",17),c["\u0275\u0275elementStart"](2,"div",18),c["\u0275\u0275elementStart"](3,"button",19),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}let Ge=(()=>{class e{constructor(e,t,n,o,a){this.activeModal=e,this.api=t,this.common=n,this.user=o,this.modalService=a,this.title="",this.Accounts=[],this.pageName="",this.staticCondition=0,this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.staticCondition=1),this.GetAccount(),this.common.currentPage="Account",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.GetAccount()}GetAccount(){let e={foid:123,staticCondition:this.staticCondition};this.common.loading++,this.api.post("Accounts/GetAccount",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.Accounts=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openAccountModal(e){e?(console.log("Accounts",e),this.common.params=e,this.modalService.open(Le.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&this.updateAccount(t.Accounts,e.id)})):(this.common.params=null,this.modalService.open(Le.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addAccount(e.Accounts)}))}addAccount(e){console.log("accountdata",e);const t={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertAccount",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_secondarygroup;this.common.showToast(""==t?"Add Successfull":t),this.GetAccount()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateAccount(e,t){console.log("updated data",e);const n={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:t};console.log("params11: ",n),this.common.loading++,this.api.post("Accounts/InsertAccount",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_secondarygroup;this.common.showToast(""==t?"Updated Successfull":t),this.GetAccount()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}delete(e){let t={id:e,tblidname:"id",tblname:"secondary_group"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.GetAccount(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}modelCondition(){this.activeModal.close({}),event.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["account"]],decls:22,vars:3,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275template"](2,Re,6,0,"div",1),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",(function(){return t.openAccountModal()})),c["\u0275\u0275element"](4,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275elementStart"](6,"table",5),c["\u0275\u0275elementStart"](7,"thead",6),c["\u0275\u0275elementStart"](8,"tr"),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Parent Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"tbody"),c["\u0275\u0275template"](20,ze,13,10,"tr",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](21,Ne,5,0,"div",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.Accounts),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName))},directives:[h.s,h.r,E.u,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),e})();var Ye=n("oAJy");function He(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275elementStart"](1,"h5"),c["\u0275\u0275text"](2,"Ledgers"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",11),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275elementStart"](4,"span",12),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function $e(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",13),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().openModal()})),c["\u0275\u0275element"](1,"i",14),c["\u0275\u0275elementEnd"]()}}function qe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275elementStart"](1,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.search=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().jrxSearch(n)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.search)("placeholder",e.name)}}function Ke(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.is_constcenterallow)}}function Ue(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",18),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.is_constcenterallow=t}))("change",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().updateLedgerCostCenter(t,n.id)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("value",e.is_constcenterallow)("ngModel",e.is_constcenterallow)}}const We=function(e){return{highlight:e}};function Qe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",16),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"]();return 2!=o.deletedId?o.openModal(n):""}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,Ke,2,1,"td",17),c["\u0275\u0275template"](10,Ue,2,2,"td",17),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,We,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1+(o.pages.active-1)*o.accountService.perPage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.groupname),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.alias_name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",2!=o.deletedId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",2==o.deletedId),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](13,8,e.entry_dt,"dd-MMM-yy"))}}function Je(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",19),c["\u0275\u0275elementStart"](1,"div",20),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275elementStart"](3,"button",22),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Xe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",29),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).jrxPagination(n)})),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",e==n.pages.active?"active-page":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function Ze(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",23),c["\u0275\u0275elementStart"](1,"div",24),c["\u0275\u0275elementStart"](2,"button",25),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active-1)})),c["\u0275\u0275text"](3,"Pre"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,Xe,2,2,"button",26),c["\u0275\u0275elementStart"](5,"button",25),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active+1)})),c["\u0275\u0275text"](6,"Next"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",27),c["\u0275\u0275elementStart"](8,"input",28),c["\u0275\u0275listener"]("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pages.limit=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",1==e.pages.active),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.common.generateArray(e.pages.count)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",e.pages.active==e.pages.count),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.pages.limit)}}let et=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.activeModal=e,this.api=t,this.common=n,this.route=o,this.user=a,this.router=i,this.modalService=r,this.accountService=l,this.Ledgers=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Under Group",key:"groupname",search:""},{name:"Name",key:"name",search:""},{name:"Alias Name",key:"alias_name",search:""},{name:"Cost Center Allow",key:"is_constcenterallow",search:""},{name:"Date",key:"entry_dt",search:""}],this.searchedData=[],this.selectedRow=-1,this.common.refresh=this.refresh.bind(this),Ye.getItem("ledgers_data").then(e=>{e&&(this.Ledgers=e,this.filterData())}),this.route.params.subscribe(e=>{e.id&&(this.deletedId=parseInt(e.id),this.GetLedger()),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(),this.sizeledger=1),this.common.currentPage=2==this.deletedId?"Cost Category Ledger":"Ledger",this.common.handleModalSize("class","modal-lg","1250","px",0)}ngOnInit(){}refresh(){this.GetLedger()}GetLedger(){let e={foid:123,deleted:this.deletedId};this.common.loading++,this.api.post("Accounts/GetLedgerdata",e).subscribe(e=>{this.common.loading--,this.Ledgers=e.data,this.filterData(),this.Ledgers.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,this.common.showError()})}filterData(){this.pages.count=Math.floor(this.Ledgers.length/this.pages.limit),this.Ledgers.length%this.pages.limit&&this.pages.count++,console.log("length calculate ---",this.Ledgers.length,this.pages.count),Ye.setItem("ledgers_data",this.Ledgers),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}jrxPagination(e,t){this.pages.active=e;let n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.Ledgers.slice(n,o),console.log("pagination",this.accountService.perPage,this.pages.active)}jrxPageLimitReset(){this.jrxPageTimer=setTimeout(()=>{if("string"==typeof this.pages.limit&&(this.pages.limit=parseInt(this.pages.limit)||0),!this.pages.limit||this.pages.limit<100)return this.pages.limit=this.accountService.perPage,void this.common.showError("Minimum per page limit 100");this.pages.count=Math.floor(this.Ledgers.length/this.pages.limit),this.Ledgers.length%this.pages.limit&&this.pages.count++,this.accountService.perPage=this.pages.limit,localStorage.setItem("per_page",this.accountService.perPage.toString()),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}jrxSearch(e){clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout(()=>{if(this.searchedData=[],e.search){for(let t=0;t<this.Ledgers.length;t++)this.Ledgers[t][e.key]&&("y_date"===e.key&&this.common.changeDateformat(this.Ledgers[t][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||this.Ledgers[t][e.key].toLowerCase().includes(e.search.toLowerCase()))&&this.searchedData.push(this.Ledgers[t]);this.pages.count=Math.floor(this.searchedData.length/this.pages.limit),this.Ledgers.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count,this.searchedData)}else this.searchedData=[],this.pages.count=Math.floor(this.Ledgers.length/this.pages.limit),this.Ledgers.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}updateLedgerCostCenter(e,t){let n={ledgerid:t,ladgervalue:e.target.checked};this.common.loading++,this.api.post("Accounts/SaveLedgerCostCenter",n).subscribe(e=>{this.common.loading--,this.common.showToast(e.data[0].y_errormsg)},e=>{this.common.loading--,this.common.showError()})}openModal(e){let t=[];if(e){let n={id:e.id,foid:e.foid};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe(e=>{this.common.loading--,t=e.data,this.common.params={ledgerdata:e.data,deleted:this.deletedId,sizeledger:this.sizeledger},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(e.ledger?this.addLedger(e.ledger):this.GetLedger())})},e=>{this.common.loading--,this.common.showError()})}else this.common.params=null,this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addLedger(e.ledger)})}addLedger(e){const t={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};this.common.loading++,this.api.post("Accounts/InsertLedger",t).subscribe(e=>{this.common.loading--,this.GetLedger(),this.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")},e=>{this.common.loading--,this.common.showError()})}RowSelected(e){this.selectedName=e}modelCondition(){this.activeModal.close({}),event.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](o.c),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledgers"]],decls:15,vars:6,consts:[[2,"margin","0px","border","0px"],["class","modal-header",4,"ngIf"],["class","btn mb-4 add-button",3,"click",4,"ngIf"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"modal-header"],["type","button","aria-","","label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],["type","checkbox",3,"value","ngModel","ngModelChange","change"],[1,"modal-footer"],[1,"row"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275template"](2,He,6,0,"div",1),c["\u0275\u0275template"](3,$e,2,0,"button",2),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"table",4),c["\u0275\u0275elementStart"](6,"thead",5),c["\u0275\u0275elementStart"](7,"tr"),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,qe,2,2,"th",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"tbody"),c["\u0275\u0275template"](12,Qe,14,13,"tr",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,Je,5,0,"div",8),c["\u0275\u0275template"](14,Ze,9,4,"div",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.deletedId),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngForOf",t.filters),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.data),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pages.count>=1))},directives:[h.s,h.r,E.u,E.t,k.d,k.r,k.u,E.r,k.a],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:2px 4px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;color:#fff;font-size:10px}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:170px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:55px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:440px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:170px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:55px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:440px;word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){word-break:break-all}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.customPage[_ngcontent-%COMP%]{font-size:10px!important;padding:1px 5px!important;width:60px;border:1px solid}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),e})();var tt=n("DYn/");function nt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("",e.province_name," ( ",e.gst_state_code," )")}}function ot(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function at(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"Yes"),c["\u0275\u0275elementEnd"]())}function it(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"No"),c["\u0275\u0275elementEnd"]())}const rt=function(e){return{highlight:e}};function lt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,nt,2,2,"td",8),c["\u0275\u0275template"](8,ot,1,0,"td",8),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,at,2,0,"td",8),c["\u0275\u0275template"](12,it,2,0,"td",8),c["\u0275\u0275elementStart"](13,"td",9),c["\u0275\u0275elementStart"](14,"a",10),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](15,"i",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](9,rt,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.email),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.province_name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.province_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.mobilenumber),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.is_inv_manualapprove),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.is_inv_manualapprove)}}let st=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.Branches=[],this.GetBranchData(),this.common.currentPage="Company Branches",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.GetBranchData()}GetBranchData(){this.common.loading++,this.api.post("Company/GetCompanyBranch",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.Branches=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openModal(e){e?(console.log("Branch ",e),this.common.params=e,this.modalService.open(tt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&e&&this.updatebranch(t.Branch,e.id)})):(this.common.params=null,this.modalService.open(tt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{e.response&&this.addbranch(e.Branch)}))}addbranch(e){console.log("branch:",e);const t={foid:123,name:e.name,code:e.code,addressline:e.addressline,email:e.email,exciseno:e.exciseno,faxnumber:e.faxnumber,gstno:e.gstno,importexportno:e.importexportno,isactive:e.isactive,mobilenumber:e.mobilenumber,panno:e.panno,phonenumber:e.phonenumber,remarks:e.remarks,tanno:e.tanno,tinno:e.tinno,tollfreenumber:e.tollfreenumber,taxexemptionno:e.taxexemptionno,x_lr_terms:e.lrTerm,x_lr_footer:e.lrFooter,x_is_constcenterallow:e.constcenter,x_id:0,siteid:e.site.id,latitude:e.latitude,longitude:e.longitude,precode:e.precode,lrcodewidth:e.lrcodewidth,lrcodelastid:e.lrcodelastid,mannual:"'"+e.mannual+"'",cityid:e.city.id};console.log("finalbranch :",t),this.common.loading++,this.api.post("Company/InsertCompanyBranch",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_companybranch;""==t?(this.common.showToast(" Add Successfully"),this.GetBranchData(),this.getBranches()):this.common.showToast(t)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBranches(){this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{console.log("Branches :",e.data),this.accountService.branches=e.data},e=>{console.log("Error: ",e)})}updatebranch(e,t){console.log("branch:",e);const n={foid:123,name:e.name,code:e.code,addressline:e.addressline,email:e.email,exciseno:e.exciseno,faxnumber:e.faxnumber,gstno:e.gstno,importexportno:e.importexportno,isactive:e.isactive,mobilenumber:e.mobilenumber,panno:e.panno,phonenumber:e.phonenumber,remarks:e.remarks,tanno:e.tanno,tinno:e.tinno,tollfreenumber:e.tollfreenumber,taxexemptionno:e.taxexemptionno,x_lr_terms:e.lrTerm,x_lr_footer:e.lrFooter,x_is_constcenterallow:e.constcenter,x_id:t,siteid:e.site.id,latitude:e.latitude,longitude:e.longitude,precode:e.precode,lrcodewidth:e.lrcodewidth,lrcodelastid:e.lrcodelastid,mannual:"'"+e.mannual+"'",cityid:e.city.id};console.log("finalbranch :",n),this.common.loading++,this.api.post("Company/InsertCompanyBranch",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_companybranch;""==t?(this.common.showToast(" Update Successfully"),this.getBranches()):this.common.showToast(t),this.GetBranchData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}delete(e){let t={id:e,tblidname:"id",tblname:"companybranch"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are you sure want to delete<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.GetBranchData(),this.common.showToast(" This Value Has been Deleted!"),this.getBranches()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["company-branches"]],decls:24,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[4,"ngIf"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"button",1),c["\u0275\u0275listener"]("click",(function(){return t.openModal()})),c["\u0275\u0275element"](3,"i",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"table",4),c["\u0275\u0275elementStart"](6,"thead",5),c["\u0275\u0275elementStart"](7,"tr"),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Email"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"State"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"th"),c["\u0275\u0275text"](17,"Mobile No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"th"),c["\u0275\u0275text"](19,"Approve Mannual"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"th"),c["\u0275\u0275text"](21,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"tbody"),c["\u0275\u0275template"](23,lt,16,11,"tr",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](23),c["\u0275\u0275property"]("ngForOf",t.Branches))},directives:[h.s,h.r,E.t,E.r,E.u],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px;overflow:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:22px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:152px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:233px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:129px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:27px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:148px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:241px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child(){width:130px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%}"]}),e})();var ct=n("MCLT"),dt=n("kb3O"),mt=n("iJpb"),ht=n("3qNt");function pt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",e.ledger.name,": \xa0 \xa0"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.amount)}}function gt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"i"),c["\u0275\u0275text"](2,"Cur Bal: "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().index,t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",t.ledgerbalance[e],"")}}function ut(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",25),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"select",26),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.transactionType=n}))("change",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().calculateTotal()}))("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().lastActiveId="transaction-type-"+n})),c["\u0275\u0275elementStart"](3,"option",27),c["\u0275\u0275text"](4,"Debit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"option",28),c["\u0275\u0275text"](6,"Credit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275elementStart"](8,"input",29),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.ledger.name=n}))("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.lastActiveId="ledger-"+n,o.allowBackspace=!1}))("input",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div"),c["\u0275\u0275template"](10,pt,5,2,"div",30),c["\u0275\u0275template"](11,gt,4,1,"span",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275elementStart"](13,"input",31),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().lastActiveId="amount-"+n}))("input",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.calculateTotal(n),o.allowBackspace=!1}))("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.amount=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275elementStart"](15,"button",32),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().deleterow(n)})),c["\u0275\u0275element"](16,"i",33),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("id","transaction-type-"+n)("name","transaction-type-"+n)("ngModel",e.transactionType),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("id","ledger-"+n)("name","ledger-"+n)("ngModel",e.ledger.name),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.details),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",o.ledgerbalance[n]),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("id","amount-"+n)("name","amount-"+n)("ngModel",e.amount)}}function bt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"input",34),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().voucher.ismanual=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](2," Is Mannual Approval"),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.voucher.ismanual)}}function vt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().selectLedger(n)})),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",o.activeLedgerIndex==n?"active-ledger":""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_ledger_name)}}function xt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",36),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",37),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",38),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().voucher.date=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.voucher.date)}}function ft(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",36),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",39),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4,"Are you want to save ?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",40),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().dismiss(!0)})),c["\u0275\u0275text"](6,"Yes"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8,"\xa0\xa0\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"button",40),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](10,"No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function yt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",41),c["\u0275\u0275elementStart"](1,"div",39),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4,"Are you sure want to cost center entry?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",40),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().vouchercostcenter()})),c["\u0275\u0275text"](6,"Yes"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8,"\xa0\xa0\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"button",40),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](10,"No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}let Ct=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.route=n,this.user=o,this.router=a,this.modalService=i,this.accountService=r,this.pdfService=l,this.Vouchers=[],this.voucherId="",this.voucherName="",this.voucher=null,this.ledgers={credit:[],debit:[],suggestions:[]},this.currentbalance=0,this.balances={},this.showConfirm=!1,this.showConfirmCostCenter=!1,this.showSuggestions=!1,this.lastActiveId="",this.allowBackspace=!0,this.showDateModal=!1,this.freezedate="",this.date=this.common.dateFormatternew(new Date),this.activeLedgerIndex=-1,this.modal=null,this.mannual=!1,this.ledgerbalance=[],this.common.refresh=this.refresh.bind(this),this.voucher=this.setVoucher(),this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.voucherId=e.id,this.voucherName=e.name,this.getVouchers()),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}),this.getLedgers("debit"),this.getLedgers("credit"),this.voucher=this.setVoucher(),this.common.currentPage=this.voucherName,this.mannual=this.accountService.selected.branch.is_inv_manualapprove,setTimeout(()=>{console.log("financial year",this.accountService.selected.branch.is_constcenterallow)},4e3),this.voucher.ismanual=this.accountService.selected.branch.is_inv_manualapprove,this.getFreeze()}ngOnInit(){}refresh(){this.getLedgers("debit"),this.getLedgers("credit"),this.mannual=this.accountService.selected.branch.is_inv_manualapprove,this.voucher.ismanual=this.mannual}setVoucher(){return{name:"",print:!1,date:this.accountService.voucherDate||this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),foid:"",user:{name:"",id:""},vouchertypeid:"",amountDetails:[{transactionType:"-4"==this.voucherId||"-2"==this.voucherId?"credit":"debit",ledger:{name:"",id:""},amount:0,details:[]}],code:"",remarks:"",total:{debit:0,credit:0},ismanual:this.mannual}}getVouchers(){let e={voucherId:this.voucherId};this.common.loading++,this.api.post("Voucher/GetVouchersData",e).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.Vouchers=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getFreeze(){this.common.loading++,this.api.post("Voucher/getFreeze",{departmentId:0}).subscribe(e=>{this.common.loading--,console.log("freeze Res11:",e.data),this.freezedate=e.data[0].getfreezedate},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openVoucherModal(e){}modelCondition(){this.showConfirm=!1,this.showConfirmCostCenter=!1,event.preventDefault()}async dismiss(e){if(console.log("DD: ",this.common.dateFormatter(this.common.convertDate(this.voucher.date),"y",!1)),console.log("DD: ",this.accountService.selected.financialYear.startdate),console.log("DD: ",this.accountService.selected.financialYear.enddate),this.showConfirm=!1,this.showConfirmCostCenter=!1,e)if(console.log("Voucher:",this.voucher),e&&this.voucher.total.debit!==this.voucher.total.credit)this.common.showError("Credit And Debit Amount Should be Same");else{if(e&&0==this.voucher.total.debit)return this.common.showError("Please Enter Amount"),this.showConfirm=!1,void event.preventDefault();if(1!=this.accountService.selected.financialYear.isfrozen){{let e=this.common.dateFormatter(this.common.convertDate(this.voucher.date),"y",!1);if(e<this.accountService.selected.financialYear.startdate||e>this.accountService.selected.financialYear.enddate)return void this.common.showError("Please Select Correct Financial Year")}if(console.log("acc service",this.accountService.selected.branch,0!=this.accountService.selected.branch.id),0!=this.accountService.selected.branch.id){if(this.freezedate){let e=this.CompareDate(this.freezedate);console.log("heddlo",e),0==e?(console.log("hello"),this.common.showError("Please Enter Date After "+this.freezedate),setTimeout(()=>{this.setFoucus("voucher-date")},150)):(console.log("hello testx"),this.addVoucher())}return this.showConfirm=!1,void event.preventDefault()}alert("Please Select Branch")}else this.common.showError("This financial year is freezed. Please select currect financial year")}else this.showConfirm=!1}addVoucher(){console.log("voucher 1 :",this.voucher);const e={foid:this.voucher.user.id,customercode:this.voucher.code,remarks:this.voucher.remarks,date:this.voucher.date,amountDetails:this.voucher.amountDetails,vouchertypeid:this.voucherId,y_code:"",ismannual:this.voucher.ismanual,xid:0};console.log("params 1 : ",e),this.common.loading++,this.api.post("Voucher/InsertVoucher",e).subscribe(e=>{this.common.loading--,console.log("return vouher id: ",e.data),e.success&&(this.accountService.voucherDate=this.voucher.date,e.data[0].save_voucher_v1?(this.voucher.print&&this.printVoucher(this.voucher,e.data.companydata),this.voucher=this.setVoucher(),this.getVouchers(),this.common.showToast("Your Code :"+e.data.code),this.setFoucus("ref-code")):this.common.showError("Failed: "+e.msg+(e.data.code?", Code: "+e.data.code:"")))},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}printVoucher(e,t){console.log("print company data",t),console.log("print data voucher",e);let n=[];e.amountDetails.map(e=>{n.push("debit"==e.transactionType?[e.ledger.name,e.amount,""]:[e.ledger.name,"",e.amount])});let o={company:t[0].foname,address:t[0].addressline,city:(t[0].phonenumber?" Phone Number -  "+t[0].phonenumber:"")+(t[0].panno?", PAN No -  "+t[0].panno:"")+(t[0].gstno?", GST NO -  "+t[0].gstno:""),reportName:this.voucherName,details:[{name:"Voucher Number",value:e.code},{name:"Branch",value:t[0].branchname},{name:"Voucher Date",value:e.date}],headers:[{name:"Particulars",textAlign:"left"},{name:"Debit Amount",textAlign:"right"},{name:"Credit Amount",textAlign:"right"}],table:n,total:[e.total.credit,e.total.debit],inWords:this.pdfService.convertNumberToWords(e.total.debit),narration:e.remarks};console.log("print pdf data",o);let a=this.pdfService.createPdfHtml(o).innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto");i.document.open(),i.document.write(`\n        <html>\n        <head>\n        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />\n          <style>\n          .voucher-pdf {\n            width: 210mm;\n            padding: 10mm;\n            padding-left: 10mm;\n            padding-right: 10mm;\n        }\n        \n      .voucher-company {\n            font-size: 16px;\n            font-weight: 500;\n            letter-spacing: .5px;\n            margin-bottom: 4px;\n            text-align: center;\n            font-weight: bold;\n            margin-top: 20px;\n        }\n        \n        .voucher-pdf table {\n            width: 100%;\n            margin-top: 6px;\n        }\n        \n        .table,\n        .table-bordered>tbody>tr>td,\n        .table-bordered>tbody>tr>th,\n        .table-bordered>tfoot>tr>td,\n        .table-bordered>tfoot>tr>th,\n        .table-bordered>thead>tr>td,\n        .table-bordered>thead>tr>th {\n            border-color: #444;\n        }\n        \n        .voucher-name {\n            text-align: center;\n            font-size: 20px;\n            font-weight: bold;\n            padding: 10px;\n        }\n        \n        .voucher-details {\n            font-size: 16px;\n            margin-bottom: 5px;\n        }\n        \n        .voucher-details strong {\n            margin-right: 8px;\n        }\n        \n        ..voucher-footer {\n            margin-top: 40px;\n            font-size: 15px;\n            text-align: center;\n        }\n        \n        .voucher-signature div {\n            border-top: 2px solid #000;\n        }\n          </style>\n        </head>\n        <body onload="window.print();window.close()">\n          <div class="container">${a}<div>\n        </body>\n        </html>\n        `),i.document.close()}onSelected(e,t,n){this.voucher[t].name=e[n],this.voucher[t].id=e.id,console.log("Accounts User: ",this.voucher)}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(e=>{this.voucher.date=this.common.dateFormatternew(e.date).split(" ")[0]})}addAmountDetails(e,t=0){this.voucher.amountDetails.push({transactionType:e,ledger:{name:"",id:"",is_constcenterallow:!1},amount:t,details:[]})}async keyHandler(e){if(this.modal)return;const t=e.key.toLowerCase();if("f3"==t)return this.dismiss(!0),void e.preventDefault();const n=document.activeElement.id;let o=this.lastActiveId.split("-")[1];if(e.altKey&&"c"===t&&n=="ledger-"+o)this.openledger();else{if(this.showConfirm)return"y"!=t&&"enter"!=t||(this.showConfirm=!1,e.preventDefault(),0==this.voucher.total.debit?this.common.showError("Please Enter Amount"):0==this.accountService.selected.branch.id?alert("Please Select Branch"):this.dismiss(!0)),void("n"==t&&this.modelCondition());if(this.showConfirmCostCenter)if(console.log(".........................."),"y"==t||"enter"==t){if(this.showConfirmCostCenter=!1,e.preventDefault(),0!=this.voucher.total.debit){let e=this.lastActiveId.split("-")[1];return console.log("last hello ",this.showConfirmCostCenter,this.lastActiveId,e),void this.handleCostCenterModal(this.voucher.amountDetails[e].amount,e)}this.showConfirmCostCenter=!1,this.common.showError("Please Enter Amount")}else"n"==t&&this.modelCondition();else{if(console.log("..........................",t,n),"home"===t&&n.includes("ledger")){let e=this.lastActiveId.split("-")[1];""!=this.voucher.amountDetails[e].ledger.id?(console.log("ledger value ------------",this.voucher.amountDetails[e].ledger.id),this.openinvoicemodel(this.voucher.amountDetails[e].ledger.id)):this.common.showError("Please Select Correct Ledger")}if(e.altKey&&"u"===t&&n.includes("ledger")){let e=this.lastActiveId.split("-")[1];""!=this.voucher.amountDetails[e].ledger.id?(console.log("ledger value ------------",this.voucher.amountDetails[e].ledger.id),this.openinvoicemodel(this.voucher.amountDetails[e].ledger.id,0)):this.common.showError("Please Select Correct Ledger")}if(e.ctrlKey&&"`"===t)this.mouse();else{if(!e.ctrlKey&&"f2"==t&&!this.showDateModal)return this.lastActiveId=n,this.setFoucus("voucher-date-f2",!1),void(this.showDateModal=!0);if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.voucher.date=this.common.handleVoucherDateOnEnter(this.voucher.date),void this.setFoucus(this.lastActiveId);if("enter"!=t&&this.showDateModal)return}if("enter"==t){if(document.activeElement.id.includes("amount-")){let e=n.split("-")[1];if(console.log("test rest successfull",this.voucher.amountDetails[e].ledger.is_constcenterallow),1==this.voucher.amountDetails[e].ledger.is_constcenterallow){this.showConfirmCostCenter=!0;let e=n.split("-")[1];console.log("Inde:",e),console.log("Amount:",this.voucher.amountDetails[e].amount)}this.handleAmountEnter(document.activeElement.id.split("-")[1])}else if("narration"==document.activeElement.id)this.accountService.selected.branch?this.showConfirm=!0:alert("Please Select Branch");else if(n.includes("ledger-")){let e=n.split("-")[1];this.activeLedgerIndex>this.ledgers.suggestions.length-1&&(this.activeLedgerIndex=0),this.selectLedger(this.ledgers.suggestions[-1!==this.activeLedgerIndex?this.activeLedgerIndex:0],e),console.log("test rest successfull",this.voucher.amountDetails[e].is_constcenterallow),this.setFoucus("amount-"+e),this.activeLedgerIndex=-1,this.getLedgerView(e)}else if("voucher-date"==n)this.freezedate&&(1==this.CompareDate(this.freezedate)?(this.handleVoucherDateOnEnter(),this.setFoucus("transaction-type-0")):(this.common.showError("Please Enter Date After "+this.freezedate),setTimeout(()=>{this.setFoucus("voucher-date")},150)));else{console.log("json hello0");let e=this.getElementsIDs().indexOf(document.activeElement.id);this.setFoucus(this.getElementsIDs()[e+1]),"voucher-date"==this.getElementsIDs()[e+1]&&this.moveCursor(document.getElementById("voucher-date"))}this.allowBackspace=!0}else if("c"!=t&&"d"!=t||!document.activeElement.id.includes("transaction-type-")){if("backspace"==t){if("ref-code"==n||!this.allowBackspace)return;e.preventDefault();let t=this.getElementsIDs().indexOf(document.activeElement.id);this.setFoucus(this.getElementsIDs()[t-1])}else if("escape"==t)this.allowBackspace=!0;else if(t.includes("arrow"))this.allowBackspace=!1,(t.includes("arrowup")||t.includes("arrowdown"))&&n.includes("ledger-")&&(this.handleArrowUpDown(t,n),e.preventDefault());else if(n.includes("ledger-"))n.split("-");else if("voucher-date"==n&&"backspace"!==t&&!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else{let e=document.activeElement.id.split("-")[2];this.voucher.amountDetails[e].transactionType="c"==t?"credit":"debit",this.calculateTotal()}}}}mouse(){this.common.params={vouchertype:this.voucherId},console.log("mouse listner",event),this.modal=this.modalService.open(M.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then(e=>{this.modal=null,e.response&&this.addLedger(e.ledger)})}vouchercostcenter(){console.log("____",document.activeElement.id),console.log("___-___",this.lastActiveId);let e=this.lastActiveId.split("-")[1];this.handleCostCenterModal(this.voucher.amountDetails[e].amount,e),this.showConfirmCostCenter=!1,event.preventDefault()}CompareDate(e){let t=e.split("-");console.log("first date ",e);let n=this.voucher.date.split("-"),o=t[0],a=t[1],i=t[2],r=n[2],l=n[1],s=n[0];return console.log("First Date:",o,a,i),console.log("Second Date:",r,l,s),new Date(o,a,i)>new Date(r,l,s)?0:1}handleAmountEnter(e){if(e=parseInt(e),this.voucher.total.debit==this.voucher.total.credit&&e==this.voucher.amountDetails.length-1)return void this.setFoucus("narration");if(this.voucher.total.debit==this.voucher.total.credit&&e!=this.voucher.amountDetails.length-1)return this.calculateTotal(),void(this.voucher.amountDetails[e].ledger.is_constcenterallow||this.setFoucus("transaction-type-"+(e+1)));let t={debit:0,credit:0};for(let n=0;n<=e;n++)"debit"==this.voucher.amountDetails[n].transactionType?t.debit+=this.voucher.amountDetails[n].amount:t.credit+=this.voucher.amountDetails[n].amount;if(console.log("Total:",t.debit,t.credit),t.debit==t.credit)return console.log("Index",e+1),this.voucher.amountDetails.splice(e+1,this.voucher.amountDetails.length-e-1),this.setFoucus("narration"),void this.calculateTotal();e==this.voucher.amountDetails.length-1&&this.voucher.total.debit>this.voucher.total.credit?this.addAmountDetails("credit",this.voucher.total.debit-this.voucher.total.credit):e==this.voucher.amountDetails.length-1&&this.voucher.total.debit<this.voucher.total.credit&&this.addAmountDetails("debit",this.voucher.total.credit-this.voucher.total.debit),this.calculateTotal(),this.voucher.total.debit!=this.voucher.total.credit&&(console.log("amount","amount-"+(this.voucher.amountDetails.length-1)),this.setFoucus("amount-"+(this.voucher.amountDetails.length-1)))}setFoucus(e,t=!0){setTimeout(()=>{let n=document.getElementById(e);n.focus(),this.moveCursor(n,0,n.value.length),t&&(this.lastActiveId=e),console.log("last active id 66: ",this.lastActiveId)},100)}deleterow(e){this.voucher.amountDetails.splice(e,1),this.handleAmountEnter(this.voucher.amountDetails.length-2)}getElementsIDs(){let e=["ref-code","voucher-date"];return this.voucher.amountDetails.map((t,n)=>{e.push("transaction-type-"+n),e.push("ledger-"+n),e.push("amount-"+n)}),e.push("narration"),e}moveCursor(e,t=0,n=0){e.select&&e.select()}getLedgers(e,t){this.showSuggestions=!0;let n="Suggestion/GetLedger?transactionType="+e+"&voucherId="+this.voucherId+"&search="+t;console.log("URL: ",n),this.api.get(n).subscribe(t=>{console.log(t),this.ledgers[e]=t.data},e=>{console.error(e),this.common.showError()}),this.setFoucus("ref-code")}getCurrentBalance(e){this.showSuggestions=!0;let t="Suggestion/getCurrentBalance?branchid=0&fromdate="+this.date+"&ledgerid="+e;console.log("URL: ",t),this.api.get(t).subscribe(t=>{console.log("current balance",t.data[0].get_currentbalance),this.balances[e]={main:t.data[0].get_currentbalance,current:t.data[0].get_currentbalance},this.currentbalance=t.data[0].get_currentbalance-this.voucher.total.credit,console.log("check current balance",this.currentbalance)},e=>{console.error(e),this.common.showError()}),this.setFoucus("ref-code")}selectLedger(e,t){console.log("Last Active ID44:",this.lastActiveId,e),!t&&this.lastActiveId.includes("ledger")&&(t=this.lastActiveId.split("-")[1]),this.voucher.amountDetails[t].ledger.name=e.y_ledger_name,this.voucher.amountDetails[t].ledger.id=e.y_ledger_id,this.voucher.amountDetails[t].ledger.is_constcenterallow=e.is_constcenterallow,this.getLedgerView(t)}handleVoucherDateOnEnter(){let e=[],t="-";if(this.voucher.date.includes("-"))e=this.voucher.date.split("-");else{if(!this.voucher.date.includes("/"))return void this.common.showError("Invalid Date Format!");e=this.voucher.date.split("/"),t="/"}let n=e[1];n=1==n.length?"0"+n:n,n=n>12?12:n;let o=e[2];o=1==o.length?"200"+o:2==o.length?"20"+o:o;let a=e[0];a=1==a.length?"0"+a:a,a=a>31?31:a,a=("04"==n||"06"==n||"09"==n||"11"==n)&&a>30?30:a,a=28==a&&"02"==n?28:a,o%4==0&&"02"==n?a=a>28&&"02"==n&&o%4==0&&(o%100!=0||o%400==0)?29:a:o%4!=0&&"02"==n&&(a=28),console.log("Date: ",o+t+n+t+a),this.voucher.date=a+t+n+t+o}handleArrowUpDown(e,t){parseInt(t.split("-")[1]),"arrowdown"==e?this.activeLedgerIndex!=this.ledgers.suggestions.length-1&&this.activeLedgerIndex++:0!=this.activeLedgerIndex&&this.activeLedgerIndex--}getActiveLedgerType(e){if(!this.lastActiveId||!this.lastActiveId.includes("ledger-"))return[];let t=parseInt(this.lastActiveId.split("-")[1]),n=document.getElementById("transaction-type-"+t)?document.getElementById("transaction-type-"+t).value:"";if(n){let t=e[n];if(document.getElementById(this.lastActiveId)&&document.getElementById(this.lastActiveId).value){let o=document.getElementById(this.lastActiveId).value.toLowerCase();t=e[n].filter(e=>e.y_ledger_name.toLowerCase().includes(o))}return this.ledgers.suggestions=t,t}return[]}findBalance(e){console.log("IndexL::::",e);let t=[],n=this.voucher.amountDetails[e].ledger.id;this.voucher.amountDetails.map((e,o)=>{"credit"==e.transactionType&&e.ledger.id==n&&t.push({index:o,amountDetail:e})}),document;let o=0;for(let a=0;a<t.length&&t[a].index!=e;a++)o+=t[a].amountDetail.amount;return this.balances[n]?this.balances[n].main-o:0}calculateTotal(e){if(this.voucher.total.debit=0,this.voucher.total.credit=0,this.voucher.amountDetails.map(e=>{console.log(e,e.transactionType,e.amount),"debit"==e.transactionType?this.voucher.total.debit=parseFloat((this.voucher.total.debit+e.amount).toFixed(2)):this.voucher.total.credit=parseFloat((this.voucher.total.credit+e.amount).toFixed(2))}),!Object(ct.isUndefined)(e)){let t=this.voucher.amountDetails[e].ledger.id;console.log("total credit amount",this.voucher.total.credit),console.log("find balance amount",this.findBalance(e)),this.findBalance(e)&&this.findBalance(e)<this.voucher.total.credit&&(console.log("check condition"),this.voucher.amountDetails[e].amount=0,alert("Please enter valid amount")),console.log("LedgerID:",t,this.balances[t]),this.balances[t]&&(this.balances[t].current=this.balances[t].main-this.voucher.total.credit)}}openledger(e){console.log("ledger123",e),e&&(this.common.params=e),this.modal=this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then(e=>{this.modal=null,e.response&&this.addLedger(e.ledger)})}addLedger(e){console.log("ledgerdata",e);const t={name:e.name,alias_name:e.aliasname,code:e.code,oid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertLedger",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getLedgers("debit"),this.getLedgers("credit"),this.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}handleCostCenterModal(e,t){console.log("Indes:",t),t=parseInt(t),this.common.params={amount:e,details:this.voucher.amountDetails[t]},this.modal=this.modalService.open(dt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}),this.modal.result.then(e=>{this.modal=null,console.log("Modal res:",e),e.response&&(this.voucher.amountDetails[t].details=e.amountDetails),console.log(document.getElementById("transaction-type-"+(t+1)),t,"transaction-type-"+(t+1)),setTimeout(()=>{console.log("eeee",document.getElementById("transaction-type-"+(t+1))),console.log("0000000000000000000L:",this.showConfirmCostCenter),this.showConfirmCostCenter=!1},200),this.showConfirmCostCenter=!1,this.setFoucus("transaction-type-"+(t+1)),console.log("Testiong",this.voucher.amountDetails[t])})}openinvoicemodel(e,t=2){let n=[];if(console.log("ledger123",e),e){let o={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",o).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),n=e.data,this.common.params={ledgerdata:e.data,deleted:t,sizeledger:0},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&0==t&&this.addLedger(e.ledger)})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}getLedgerView(e){let t={startdate:this.common.dateFormatternew(new Date).split(" ")[0],enddate:this.common.dateFormatternew(new Date).split(" ")[0],ledger:this.voucher.amountDetails[e].ledger.id,vouchertype:0};this.common.loading++,this.api.post("Accounts/getLedgerView",t).subscribe(t=>{this.common.loading--,this.ledgerbalance[e]="0"!=t.data[t.data.length-1].y_cramunt?"0.00"!=t.data[t.data.length-1].y_cramunt?parseFloat(t.data[t.data.length-1].y_cramunt).toFixed(2)+" Cr":"0":"0"==t.data[t.data.length-1].y_dramunt?"0":"0.00"!=t.data[t.data.length-1].y_dramunt?parseFloat(t.data[t.data.length-1].y_dramunt).toFixed(2)+" Dr":"0",console.log("Res getLedgerView:",t.data,t.data[t.data.length-1],this.ledgerbalance)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](o.c),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](mt.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["vouchers"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:58,vars:12,consts:[[2,"padding-top","18px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col-6","pl-0"],[1,"form-group"],[1,"ref-label"],["type","text","id","ref-code","name","account-name","autofocus","","autocomplete","doNotAutoComplete",1,"form-control","ref-input",3,"ngModel","click","ngModelChange"],["type","text","autocomplete","off","id","voucher-date","name","account-date","maxlength","10","autocomplete","off",1,"form-control","ref-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],[1,"col-12","pl-0"],[1,"table","table-bordered"],[2,"background","#263238","color","#fff"],["style","background: #e4e4e4;",4,"ngFor","ngForOf"],[1,"col-8","pl-0"],["id","narration","name","narration",1,"form-control","ref-input",3,"ngModel","click","ngModelChange","input"],[1,"col-2","pl-0"],["type","text","name","account-name","readonly","",1,"form-control","ref-input",2,"background","#e4e4e4",3,"ngModel","ngModelChange"],[1,"col","text-right"],["type","checkbox","name","print","id","print",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[1,"col-3","pl-0","pr-0"],["id","ledger-container",1,"ledger-container"],["class","ledger-option",3,"ngClass","click",4,"lazyFor","lazyForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["class","date-modal",4,"ngIf"],[2,"background","#e4e4e4"],[1,"form-control","ref-input",2,"padding","4px 8px","height","auto",3,"id","name","ngModel","ngModelChange","change","click"],["value","debit"],["value","credit"],["type","text","autocomplete","off",1,"form-control","ref-input",3,"id","name","ngModel","ngModelChange","click","input"],[4,"ngFor","ngForOf"],["type","number","autocomplete","off",1,"form-control","ref-input",3,"id","name","ngModel","click","input","ngModelChange"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["type","checkbox","name","mannual","id","mannual",3,"ngModel","ngModelChange"],[1,"ledger-option",3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"date-modal-body","data_model_save"],[3,"click"],[1,"date-modal"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",1),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"label",5),c["\u0275\u0275text"](8,"Ref"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",6),c["\u0275\u0275listener"]("click",(function(){return t.lastActiveId="ref-code"}))("ngModelChange",(function(e){return t.voucher.code=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",3),c["\u0275\u0275elementStart"](11,"div",4),c["\u0275\u0275elementStart"](12,"label",5),c["\u0275\u0275text"](13,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.date=e}))("click",(function(){return t.lastActiveId="voucher-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",1),c["\u0275\u0275elementStart"](16,"div",8),c["\u0275\u0275elementStart"](17,"table",9),c["\u0275\u0275elementStart"](18,"tr",10),c["\u0275\u0275elementStart"](19,"th"),c["\u0275\u0275text"](20,"Transaction "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"th"),c["\u0275\u0275text"](22,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"th"),c["\u0275\u0275text"](24,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"th"),c["\u0275\u0275text"](26,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](27,ut,17,11,"tr",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",1),c["\u0275\u0275elementStart"](29,"div",12),c["\u0275\u0275elementStart"](30,"div",4),c["\u0275\u0275elementStart"](31,"label",5),c["\u0275\u0275text"](32,"Narration"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"textarea",13),c["\u0275\u0275listener"]("click",(function(){return t.lastActiveId="narration"}))("ngModelChange",(function(e){return t.voucher.remarks=e}))("input",(function(){return t.allowBackspace=!1})),c["\u0275\u0275text"](34,"              "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",14),c["\u0275\u0275elementStart"](36,"div",4),c["\u0275\u0275elementStart"](37,"label",5),c["\u0275\u0275text"](38,"Total Debit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.total.debit=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",14),c["\u0275\u0275elementStart"](41,"div",4),c["\u0275\u0275elementStart"](42,"label",5),c["\u0275\u0275text"](43,"Total Credit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.total.credit=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",1),c["\u0275\u0275elementStart"](46,"div",16),c["\u0275\u0275elementStart"](47,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.voucher.print=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](48," Print "),c["\u0275\u0275template"](49,bt,3,1,"span",18),c["\u0275\u0275elementStart"](50,"button",19),c["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),c["\u0275\u0275text"](51,"Submit "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](52,"div",20),c["\u0275\u0275elementStart"](53,"div",21),c["\u0275\u0275template"](54,vt,3,2,"div",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](55,xt,4,1,"div",23),c["\u0275\u0275template"](56,ft,11,0,"div",23),c["\u0275\u0275template"](57,yt,11,0,"div",24)),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.voucher.code),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.voucher.date),c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngForOf",t.voucher.amountDetails),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.voucher.remarks),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.voucher.total.debit),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.voucher.total.credit),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.voucher.print),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.mannual),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("lazyForOf",t.getActiveLedgerType(t.ledgers)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showConfirm),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showConfirmCostCenter))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.t,k.a,E.u,ht.a,k.D,k.w,k.G,k.x,E.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff}.ledger-container[_ngcontent-%COMP%]{border-radius:0;padding:8px;background-color:#e4e4e4;margin-top:20px;max-height:230px;min-height:230px;overflow:auto}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.data_model_save[_ngcontent-%COMP%]{padding:20px;text-align:center;width:auto;max-width:250px}.data_model_save[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:10px 20px;color:#fff;border-radius:3px}.ledger-option[_ngcontent-%COMP%]{border:1px solid #263238;padding:2px 8px;border-radius:3px;font-size:12px;font-weight:400;background-color:#263238;margin-bottom:3px;color:#fff}.active-ledger[_ngcontent-%COMP%]{background:#26a69a;font-weight:400;border-color:#26a69a}button[_ngcontent-%COMP%]{background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;padding:10px 20px!important;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.date-modal-body[_ngcontent-%COMP%]   .ng-pristine[_ngcontent-%COMP%]{border:0!important;padding:8px;height:auto;width:auto;border-radius:0;line-height:normal}.form-control[_ngcontent-%COMP%]:focus{border-color:#263238!important}button.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important;padding:8px 10px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:7.5%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:14.5%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:2%;padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 292px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:7.5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:14.5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:2%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),e})();var _t=n("ajfk"),St=n("Byim"),Mt=n("0k+j"),Et=n("tUv6"),wt=n("xzxl"),kt=n("iaUN"),Pt=n("0QjR"),Ot=n("0trq"),It=n("pl/H"),Dt=n("uk+R"),Vt=n("k6ZE"),Ft=n("5Y/i"),Tt=n("EVny");function Bt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275elementStart"](1,"a",29),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function At(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275elementStart"](1,"a",30),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Lt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",31),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"vouchertype","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.vouchertypedata)}}function Rt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",32),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerData)}}function jt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275elementStart"](1,"input",33),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.search=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().jrxSearch(n)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.search)("placeholder",e.name)}}function zt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Branch"),c["\u0275\u0275elementEnd"]())}function Nt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"i",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().imageOpen(t)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Gt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_company_branch,"")}}const Yt=function(e,t){return{highlight:e,highlightcolor:t}};function Ht(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",34),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().jrxDblClick(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openVoucherEdit(n.y_voucherid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275template"](8,Nt,2,0,"span",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"td"),c["\u0275\u0275text"](17),c["\u0275\u0275pipe"](18,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](19,Gt,2,1,"td",25),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction2"](19,Yt,o.selectedRow==n,o.data.length-1==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1+(o.pages.active-1)*o.accountService.perPage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,10,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("",e.y_particulars," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.y_docscount>0),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_type),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](null!=e.y_date?e.y_code+"/"+e.y_cust_code:""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](15,13,e.y_dramunt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](18,16,e.y_cramunt,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==o.accountService.selected.branch.id)}}function $t(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",42),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).jrxPagination(n)})),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",e==n.pages.active?"active-page":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function qt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",36),c["\u0275\u0275elementStart"](1,"div",37),c["\u0275\u0275elementStart"](2,"button",38),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active-1)})),c["\u0275\u0275text"](3,"Pre"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,$t,2,2,"button",39),c["\u0275\u0275elementStart"](5,"button",38),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active+1)})),c["\u0275\u0275text"](6,"Next"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",40),c["\u0275\u0275elementStart"](8,"input",41),c["\u0275\u0275listener"]("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pages.limit=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",1==e.pages.active),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.common.generateArray(e.pages.count)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",e.pages.active==e.pages.count),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.pages.limit)}}let Kt=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.route=n,this.user=o,this.modalService=a,this.accountService=i,this.router=r,this.selectedName="",this.activedateid="",this.fuelFilings=[],this.flag=0,this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.lastActiveId="",this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="vouchertype",this.selectedRow=-1,this.allowBackspace=!0,this.deletedId=0,this.f2Date="startdate",this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_particulars",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.pages.limit=this.accountService.perPage,this.common.refresh=this.refresh.bind(this),this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,Ye.getItem("day_book_vouchers").then(e=>{e&&(this.vouchertypedata=e),this.getVoucherTypeList(!e)}),Ye.getItem("day_book_ledgers").then(e=>{e&&(this.ledgerData=e),this.getAllLedger(!e)}),Ye.getItem("daybook_data").then(e=>{e&&(this.DayData=e,this.filterData())}),this.setFoucus("vouchertype"),this.route.params.subscribe(e=>{e.id&&(this.deletedId=parseInt(e.id)),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}),this.common.currentPage=0==this.deletedId?"Day Book":"Voucher & Invoice Deleted"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.getVoucherTypeList(),this.getBranchList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.getDayBook()}ngAfterViewInit(){}getVoucherTypeList(e=!0){e&&this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe(t=>{e&&this.common.loading--,console.log("Res======:",t.data),this.vouchertypedata=t.data,this.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"}),Ye.setItem("day_book_vouchers",this.vouchertypedata)},t=>{e&&this.common.loading--,console.log("Error: ",t),this.common.showError()})}openStoreQuestionEdit(e){this.common.params={storeRequestId:-2==e.y_vouchertype_id?-3:e.y_vouchertype_id,stockQuestionId:e.y_voucherid,stockQuestionBranchid:e.y_fobranchid,pendingid:-2==e.y_vouchertype_id?0:1},this.modalService.open(Pt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{console.log("responce data return",e)})}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openinvoicemodel(e,t,n,o=0){console.log("DayBOOKS",e),this.common.params={invoiceid:t,delete:this.deletedId,newid:o,ordertype:n},this.modalService.open(St.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: invoice ",e),e.delete&&(console.log("open succesfull"),this.getDayBook())})}openServiceSalesInvoicemodel(e,t,n,o=0){this.common.params={invoiceid:t,delete:this.deletedId,newid:o,ordertype:n,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{e&&e.msg&&this.getDayBook()})}getAllLedger(e=!0){e&&this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(t=>{e&&this.common.loading--,console.log("Res:",t.data),this.ledgerData=t.data,Ye.setItem("day_book_ledgers",this.ledgerData)},t=>{e&&this.common.loading--,console.log("Error: ",t),this.common.showError()})}getDayBook(){this.searchedData=[],this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate;let e={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,delete:this.deletedId,forapproved:1==this.deletedId?-1:1,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetDayBook",e).subscribe(e=>{this.common.loading--,console.log("Res: length :",e.data,e.data.length),this.DayData=e.data,this.filterData(),this.DayData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Day Book From :"+this.DayBook.startdate+" To :"+this.DayBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.DayBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.DayBook[e])})}onSelected(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}filterData(){let e=[];this.DayData.map(t=>{-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)}),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,Ye.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}getBookDetail(e){console.log("vouher id",e),this.common.params=e,this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"home"===t&&this.activeId.includes("ledgerdaybook")&&(this.lastActiveId.split("-"),0!=this.DayBook.ledger.id?(console.log("ledger value ------------",this.DayBook.ledger.id),this.openinvoicedetailmodel(this.DayBook.ledger.id)):this.common.showError("Please Select Correct Ledger")),e.ctrlKey&&"d"===t&&!this.activeId&&this.DayData.length&&-1!=this.selectedRow)return console.log("ctrl + d pressed"),this.DayData[this.selectedRow].y_type.toLowerCase().includes("voucher")?!this.DayData[this.selectedRow].y_type.toLowerCase().includes("trip")&&this.openVoucherEdit(this.DayData[this.selectedRow].y_voucherid,6,this.DayData[this.selectedRow].y_vouchertype_id):this.DayData[this.selectedRow].y_type.toLowerCase().includes("invoice")&&this.openinvoicemodel(this.DayData[this.selectedRow].y_voucherid,this.DayData[this.selectedRow].y_vouchertype_id,1),void e.preventDefault();if("enter"==t)this.allowBackspace=!0,this.activeId.includes("branch")?this.setFoucus("vouchertype"):this.activeId.includes("vouchertype")?this.setFoucus("ledgerdaybook"):"ledgerdaybook"==this.activeId?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.checkDate(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}openinvoicedetailmodel(e){let t=[];if(console.log("ledger123",e),e){let n={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),t=e.data,this.common.params={ledgerdata:e.data,deleted:2,sizeledger:0},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}checkDate(e){}openVoucherEdit(e,t,n){e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e),e.delete&&this.getDayBook()}))}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}test(e){console.log("--------: ",e)}imageOpen(e){console.log("dataItem:",e);let t={voucherid:e.y_voucherid};this.common.loading++,this.api.post("Accounts/getvoucherdocs",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.common.params={images:e.data,title:"Image"},this.modalService.open(Et.a,{size:"lg",container:"nb-layout",backdrop:"static"})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime,l=this.deletedId;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:l},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.delete&&this.getDayBook()})):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:l},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.delete&&this.getDayBook()}))}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:e.y_fuel_station_id,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e),e.success&&this.getDayBook()})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}editTransfer(e){e?(this.common.params={refData:{transferId:e,readOnly:!0}},this.modalService.open(It.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another entry")}openfreight(e){e?(this.common.params={invoice:{id:e}},this.modalService.open(Vt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another Entry")}openRevenue(e){e?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e,refType:"FRINV"}},this.modalService.open(Dt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another Entry")}addvance(){this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: ",e),e.response&&(this.DayBook.isamount=e.ledger.isamount,this.DayBook.remarks=e.ledger.remarks,this.DayBook.vouchercustcode=e.ledger.vouchercustcode,this.DayBook.vouchercode=e.ledger.vouchercode,this.DayBook.frmamount=e.ledger.frmamount,this.DayBook.toamount=e.ledger.toamount,this.flag=0!=e.ledger.toamount||0!=e.ledger.frmamount||""!=e.ledger.vouchercode||""!=e.ledger.vouchercustcode||""!=e.ledger.remarks||0!=e.ledger.isamount?1:0)})}jrxPagination(e,t){this.pages.active=e;let n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}jrxPageLimitReset(){this.jrxPageTimer=setTimeout(()=>{if("string"==typeof this.pages.limit&&(this.pages.limit=parseInt(this.pages.limit)||0),!this.pages.limit||this.pages.limit<100)return this.pages.limit=this.accountService.perPage,void this.common.showError("Minimum per page limit 100");this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.accountService.perPage=this.pages.limit,localStorage.setItem("per_page",this.accountService.perPage.toString()),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}jrxSearch(e){clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout(()=>{if(this.searchedData=[],e.search){for(let t=0;t<this.DayData.length;t++)this.DayData[t][e.key]&&("y_date"===e.key&&this.common.changeDateformat(this.DayData[t][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||this.DayData[t][e.key].toLowerCase().includes(e.search.toLowerCase()))&&this.searchedData.push(this.DayData[t]);this.pages.count=Math.floor(this.searchedData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count,this.searchedData)}else this.searchedData=[],this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}jrxDblClick(e){e.y_type.toLowerCase().includes("voucher")?e.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(e):e.y_type.toLowerCase().includes("fuel")?this.openFuelEdit(e):e.y_type.toLowerCase().includes("lr")?this.editTransfer(e.y_transferid):this.openVoucherEdit(e.y_voucherid,0,e.y_vouchertype_id):e.y_type.toLowerCase().includes("freight")?e.y_type.toLowerCase().includes("expense")?this.openfreight(e.y_transferid):this.openRevenue(e.y_transferid):e.y_type.toLowerCase().includes("stock")?this.openStoreQuestionEdit(e):e.y_type.toLowerCase().includes("wastage")?this.openinvoicemodel(e,e.y_voucherid,e.y_vouchertype_id):this.openServiceSalesInvoicemodel(e,e.y_voucherid,e.y_vouchertype_id),this.common.currentPage=0==this.deletedId?"Day Book":"Voucher & Invoice Deleted"}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["daybooks"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:52,vars:12,consts:[[2,"padding-top","0px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledgerdaybook","display","name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"far","fa-image",3,"click"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"label",9),c["\u0275\u0275text"](12,"Voucher"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.vouchertype.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275elementStart"](16,"label",9),c["\u0275\u0275text"](17,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",1),c["\u0275\u0275elementStart"](20,"div",12),c["\u0275\u0275elementStart"](21,"div",8),c["\u0275\u0275elementStart"](22,"label",9),c["\u0275\u0275text"](23,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",12),c["\u0275\u0275elementStart"](26,"div",8),c["\u0275\u0275elementStart"](27,"label",9),c["\u0275\u0275text"](28,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",15),c["\u0275\u0275template"](31,Bt,3,0,"div",16),c["\u0275\u0275template"](32,At,3,0,"div",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",15),c["\u0275\u0275elementStart"](34,"div",8),c["\u0275\u0275elementStart"](35,"button",17),c["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),c["\u0275\u0275text"](36,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",18),c["\u0275\u0275elementStart"](38,"div",19),c["\u0275\u0275template"](39,Lt,2,1,"div",20),c["\u0275\u0275template"](40,Rt,2,1,"div",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",21),c["\u0275\u0275elementStart"](42,"table",22),c["\u0275\u0275elementStart"](43,"thead",23),c["\u0275\u0275elementStart"](44,"tr"),c["\u0275\u0275elementStart"](45,"th"),c["\u0275\u0275text"](46,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](47,jt,2,2,"th",24),c["\u0275\u0275template"](48,zt,2,0,"th",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"tbody"),c["\u0275\u0275template"](50,Ht,20,22,"tr",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](51,qt,9,4,"div",27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.DayBook.vouchertype.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.flag),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngForOf",t.filters),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.data),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pages.count>=1))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.u,E.t,w.a,E.r],pipes:[E.f,E.g],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:4px 6px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none;font-size:8px;color:#fff;border:none;margin-left:1px}.customPage[_ngcontent-%COMP%]{font-size:10px!important;padding:1px 5px!important;width:60px;border:1px solid}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]{min-width:1110px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-weight:400;width:11%;border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:4%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:8%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:14%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:22%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px!important;font-size:12px;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 296px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:4%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:8%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:14%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:22%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.far.fa-image[_ngcontent-%COMP%]{display:block;text-align:right;font-size:18px;margin-top:-20px;color:#00ff39;cursor:pointer}.highlightcolor[_ngcontent-%COMP%]{background-color:grey}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),e})();var Ut=n("LvDl");function Wt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",24),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"voucherType","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.vouchertypedata)}}function Qt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",25),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerList)}}function Jt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Branch"),c["\u0275\u0275elementEnd"]())}function Xt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.y_dramunt)}}function Zt(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function en(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.y_cramunt)}}function tn(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function nn(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_company_branch,"")}}const on=function(e,t){return{highlight:e,radclass:t}};function an(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",26),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"]();return n.y_type.toLowerCase().includes("freight")?n.y_type.toLowerCase().includes("expence")?o.openfreight(n.y_refid):o.openRevenue(n.y_refid):n.y_type.toLowerCase().includes("lr")?o.editTransfer(n.y_refid):""!=n.y_type.length?o.getBookDetail(n.y_voucherid,n.y_code,n.y_type,n):""}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](14,Xt,2,1,"td",21),c["\u0275\u0275template"](15,Zt,1,0,"td",21),c["\u0275\u0275template"](16,en,2,1,"td",21),c["\u0275\u0275template"](17,tn,1,0,"td",21),c["\u0275\u0275template"](18,nn,2,1,"td",21),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction2"](15,on,o.selectedRow==n,null==e.y_type)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,12,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_type),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_ledger),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.y_dramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_dramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.y_cramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_cramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==o.accountService.selected.branch.id)}}function rn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",28),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",29),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.ledger[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.ledger[e.f2Date])}}let ln=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.vouchertypedata=[],this.branchdata=[],this.ledgerViewData=[],this.VoucherEditTime=[],this.fuelFilings=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.ledger={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"",id:""},voucherType:{name:"All",id:0}},this.ledgerData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.ledger.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.ledger.endDate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),this.common.currentPage="Ledger View",this.common.handleModalSize("class","modal-lg","1250","px",0)}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),0!=this.ledger.ledger.id&&this.getLedgerView()}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Ledger View From :"+this.ledger.startDate+" To :"+this.ledger.endDate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getVoucherTypeList(){this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.vouchertypedata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerList(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerList=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerView(){if(this.ledger.startDate=this.accountService.fromdate,this.ledger.endDate=this.accountService.todate,console.log("Ledger:",this.ledger),0==this.ledger.ledger.id)this.common.showError("Please Select Ledger"),this.setFoucus("ledger");else{let e={startdate:this.ledger.startDate,enddate:this.ledger.endDate,ledger:this.ledger.ledger.id,branch:this.ledger.branch.id,vouchertype:this.ledger.voucherType.id};this.common.loading++,this.api.post("Accounts/getLedgerView",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data,this.generalizeData(),this.ledgerData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.ledger[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.ledger[e])})}onSelected(e,t,n){this.ledger[t].name=e[n],this.ledger[t].id=e.id}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.ledgerData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if(e.ctrlKey&&"d"===t&&this.ledgerData.length&&-1!=this.selectedRow)return this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("voucher")?!this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("trip")&&this.openVoucherEdit(this.ledgerData[this.selectedRow].y_voucherid,6,this.ledgerData[this.selectedRow].y_vouchertype_id):(this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("invoice")||this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("debit")||this.ledgerData[this.selectedRow].y_type.toLowerCase().includes("credit"))&&this.openinvoicemodeledit(this.ledgerData[this.selectedRow].y_voucherid,this.ledgerData[this.selectedRow].y_vouchertype_id,1),void e.preventDefault();if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.ledger.startDate=this.common.handleDateOnEnterNew(this.ledger.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.ledger.endDate=this.common.handleDateOnEnterNew(this.ledger.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.ledgerData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.ledgerData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.ledgerData[this.selectedRow].y_ledger_id,"","","")}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.ledger[o].includes("-"))t=this.ledger[o].split("-");else{if(!this.ledger[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.ledger[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.ledger[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getBookDetail(e,t,n,o){console.log("vouher id",e,"ytype",n),n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):o.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e)})),this.common.currentPage="Ledger View"}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.ledger.startDate,currentFilling:this.ledger.endDate,fuelstationid:e.y_refid,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e)})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.ledger.startDate,currentFilling:this.ledger.endDate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}generalizeData(){let e=[];this.ledgerData.map((t,n)=>{let o=[];o.datemonth=this.common.changeMonthformat(t.y_date,"MMMM"),o.y_date=t.y_date,o.y_code=t.y_code,o.y_cust_code=t.y_cust_code,o.y_type=t.y_type,o.y_ledger=t.y_ledger,o.y_dramunt=t.y_dramunt,o.y_cramunt=t.y_cramunt,e.push(o)}),this.ledgerViewData=[];let t=Ut.groupBy(e,"datemonth");Object.keys(t).map((e,n)=>{this.ledgerViewData[n]={name:e,amount:{debit:0,credit:0},vouchers:t[e]},t[e].map(e=>{this.ledgerViewData[n].amount.debit+=parseFloat(e.y_dramunt),this.ledgerViewData[n].amount.credit+=parseFloat(e.y_cramunt)})}),console.log("------",this.ledgerViewData)}openfreight(e){e?(this.common.params={invoice:{id:e}},this.modalService.open(Vt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another Entry")}openRevenue(e){e?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e,refType:"FRINV"}},this.modalService.open(Dt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another Entry")}editTransfer(e){e?(this.common.params={refData:{transferId:e,readOnly:!0}},this.modalService.open(It.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})):this.common.showError("Please Select another entry")}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{}))}openVoucherEdit(e,t,n){console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:0,addvoucherid:t,voucherTypeId:n},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e),e.delete&&this.getLedgerView()}))}openinvoicemodeledit(e,t,n=0){this.common.params={invoiceid:e,delete:0,newid:n,ordertype:t,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e),e.msg&&this.getLedgerView()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledgerview"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:61,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","voucherType","name","voucherType",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","voucherType","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Voucher Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.voucherType.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"label",10),c["\u0275\u0275text"](17,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",2),c["\u0275\u0275elementStart"](20,"div",8),c["\u0275\u0275elementStart"](21,"div",9),c["\u0275\u0275elementStart"](22,"label",10),c["\u0275\u0275text"](23,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",8),c["\u0275\u0275elementStart"](26,"div",9),c["\u0275\u0275elementStart"](27,"label",10),c["\u0275\u0275text"](28,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",8),c["\u0275\u0275elementStart"](31,"div",9),c["\u0275\u0275elementStart"](32,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),c["\u0275\u0275text"](33,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",16),c["\u0275\u0275elementStart"](35,"div",17),c["\u0275\u0275template"](36,Wt,2,1,"div",18),c["\u0275\u0275template"](37,Qt,2,1,"div",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"table",19),c["\u0275\u0275elementStart"](39,"thead",20),c["\u0275\u0275elementStart"](40,"tr"),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"th"),c["\u0275\u0275text"](44,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"th"),c["\u0275\u0275text"](46,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](47,"th"),c["\u0275\u0275text"](48,"Ref No."),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"th"),c["\u0275\u0275text"](50,"Voucher Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](51,"th"),c["\u0275\u0275text"](52,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"th"),c["\u0275\u0275text"](54,"Amount(DR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](55,"th"),c["\u0275\u0275text"](56,"Amount(CR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](57,Jt,2,0,"th",21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"tbody"),c["\u0275\u0275template"](59,an,19,18,"tr",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](60,rn,4,1,"div",23)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.ledger.voucherType.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.ledger.ledger.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("voucherType")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),c["\u0275\u0275advance"](20),c["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.ledgerData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.u,E.t,w.a,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:135px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:135px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}"]}),e})();function sn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",19),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"group","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.secondaryData)}}function cn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",20),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerList)}}const dn=function(e){return{highlight:e}};function mn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openLedgerModal(n.y_ledgerid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](4,dn,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_group_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_ledger_name)}}let hn=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.secondaryData=[],this.selectedName="",this.ledgerMapping={ledger:{name:"All",id:0},group:{name:"All",id:0}},this.ledgerMappingData=[],this.ledgerList=[],this.activeId="secondaryname",this.selectedRow=-1,this.allowBackspace=!0,this.common.refresh=this.refresh.bind(this),this.getSecondaryData(),this.getLedgerList(),this.setFoucus("secondaryname"),this.common.currentPage="Ledger Mapping"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.getSecondaryData(),this.getLedgerList(),this.setFoucus("secondaryname")}getSecondaryData(){this.common.loading++,this.api.post("Suggestion/GetSecondaryAccount",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.secondaryData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerView(){let e={ledger:this.ledgerMapping.ledger.id,group:this.ledgerMapping.group.id};this.common.loading++,this.api.post("Accounts/getLedgerMapping",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerMappingData=e.data,this.setFoucus("secondaryname"),this.ledgerMappingData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerList(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerList=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}onSelected(e,t,n){this.ledgerMapping[t].name=e[n],this.ledgerMapping[t].id=e.id}keyHandler(e){const t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t?(this.allowBackspace=!0,this.activeId.includes("secondaryname")?this.setFoucus("ledger"):this.activeId.includes("ledger")&&this.setFoucus("submit")):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"ledger"==this.activeId&&this.setFoucus("secondaryname")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.ledgerMappingData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.ledgerMappingData.length-1&&this.selectedRow++)}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}openLedgerModal(e){let t=[];if(e){if(console.log("ledger123",e),e){let n={id:e};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),t=e.data,this.common.params={ledgerdata:e.data,deleted:0,sizeledger:0},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&e.ledger&&this.addLedger(e.ledger)})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}else this.common.showError("Please Select Correct Ledger")}addLedger(e){console.log("ledgerdata",e);const t={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertLedger",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledgermapping"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:36,vars:5,consts:[[2,"border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col-3","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","secondaryname","name","secondaryname",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered","m-0"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["targetId","secondaryname","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](3,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"div",7),c["\u0275\u0275elementStart"](8,"div",8),c["\u0275\u0275elementStart"](9,"label",9),c["\u0275\u0275text"](10,"Secondary Goup"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerMapping.group.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",7),c["\u0275\u0275elementStart"](13,"div",8),c["\u0275\u0275elementStart"](14,"label",9),c["\u0275\u0275text"](15,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerMapping.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",7),c["\u0275\u0275elementStart"](18,"div",8),c["\u0275\u0275elementStart"](19,"button",12),c["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),c["\u0275\u0275text"](20,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",13),c["\u0275\u0275elementStart"](22,"div",14),c["\u0275\u0275template"](23,sn,2,1,"div",15),c["\u0275\u0275template"](24,cn,2,1,"div",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"table",16),c["\u0275\u0275elementStart"](26,"thead",17),c["\u0275\u0275elementStart"](27,"tr"),c["\u0275\u0275elementStart"](28,"th"),c["\u0275\u0275text"](29,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"th"),c["\u0275\u0275text"](31,"Group Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"th"),c["\u0275\u0275text"](33,"Ledger Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"tbody"),c["\u0275\u0275template"](35,mn,7,6,"tr",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.ledgerMapping.group.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.ledgerMapping.ledger.name),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("secondaryname")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngForOf",t.ledgerMappingData))},directives:[h.s,h.r,k.d,k.r,k.u,E.u,E.t,w.a,E.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:500px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:500px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),e})();function pn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",10),c["\u0275\u0275text"](1,"Vender"),c["\u0275\u0275elementEnd"]())}function gn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",10),c["\u0275\u0275text"](1,"Sales"),c["\u0275\u0275elementEnd"]())}function un(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",29),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"voucherType","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.vouchertypedata)}}function bn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",30),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerList)}}const vn=function(e){return{highlight:e}};function xn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",31),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,vn,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_code+"/"+e.y_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_vendor),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_billamount),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_totalbillamount),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_taxamount),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_netamount)}}function fn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",32),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",33),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",34),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.invoiceRegister[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.invoiceRegister[e.f2Date])}}let yn=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.selectedName="",this.vouchertypedata=[],this.branchdata=[],this.invoiceRegister={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),custCode:"",code:"",ledger:{name:"All",id:0},branch:{name:"",id:""},voucherType:{name:"Purchase Invoice",id:-102}},this.invoiceRegisterData=[],this.ledgerList=[],this.activeId="voucherType",this.allowBackspace=!0,this.selectedRow=-1,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.totalbillamount=0,this.totaldisamount=0,this.totaltaxamount=0,this.totalnetamount=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.invoiceRegister.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.invoiceRegister.endDate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType"),this.common.currentPage="Invoice Register"}ngOnInit(){}refresh(){this.getVoucherTypeList(),this.getLedgerList(),this.setFoucus("voucherType")}getVoucherTypeList(){this.common.loading++,this.api.post("Suggestion/GetOrderTypeList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.vouchertypedata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerList(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerList=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getInvoiceRegister(){this.invoiceRegister.startDate=this.accountService.fromdate,this.invoiceRegister.endDate=this.accountService.todate,console.log("Invoice Reister:",this.invoiceRegister);let e={startdate:this.invoiceRegister.startDate,enddate:this.invoiceRegister.endDate,ledger:this.invoiceRegister.ledger.id,branch:this.invoiceRegister.branch.id,code:this.invoiceRegister.code,custCode:this.invoiceRegister.custCode,orderType:this.invoiceRegister.voucherType.id};this.common.loading++,this.api.post("Accounts/getInvoiceRegister",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.invoiceRegisterData=e.data,this.invoiceRegisterData.map(e=>{this.totalbillamount+=parseFloat(e.y_billamount),this.totaldisamount+=parseFloat(e.y_totalbillamount),this.totaltaxamount+=parseFloat(e.y_taxamount),this.totalnetamount+=parseFloat(e.y_netamount)})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.invoiceRegister[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.invoiceRegister[e])})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Invoice From :"+this.invoiceRegister.startDate+" To :"+this.invoiceRegister.endDate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}onSelected(e,t,n){this.invoiceRegister[t].name=e[n],this.invoiceRegister[t].id=e.id}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("code"):this.activeId.includes("startDate")?(this.invoiceRegister.startDate=this.common.handleDateOnEnterNew(this.invoiceRegister.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")?(this.invoiceRegister.endDate=this.common.handleDateOnEnterNew(this.invoiceRegister.endDate),this.setFoucus("submit")):this.activeId.includes("custcode")?this.setFoucus("startDate"):this.activeId.includes("code")&&this.setFoucus("custcode");else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("custcode"),"custcode"==this.activeId&&this.setFoucus("code"),"code"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.invoiceRegisterData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.invoiceRegisterData.length-1&&this.selectedRow++)}}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.invoiceRegister[o].includes("-"))t=this.invoiceRegister[o].split("-");else{if(!this.invoiceRegister[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.invoiceRegister[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.invoiceRegister[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}RowSelected(e){console.log("data of u",e),this.selectedName=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["invoiceregister"]],decls:87,vars:28,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","voucherType","name","voucherType",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["class","tjr-label",4,"ngIf"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","autocomplete","off","type","text","placeholder","Code","id","code","name","account-code",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","autocomplete","off","type","text","placeholder","Cust Code","id","custcode","name","account-custCode",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","text","autocomplete","off","maxlength","10","placeholder","Select Date","name","account-startDate","id","startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","placeholder","Select Date","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],[2,"background-color","gray"],[2,"color","white"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","voucherType","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control","tjr-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.voucherType.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275template"](16,pn,2,0,"label",12),c["\u0275\u0275template"](17,gn,2,0,"label",12),c["\u0275\u0275elementStart"](18,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",8),c["\u0275\u0275elementStart"](20,"div",9),c["\u0275\u0275elementStart"](21,"label",10),c["\u0275\u0275text"](22,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.code=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",8),c["\u0275\u0275elementStart"](25,"div",9),c["\u0275\u0275elementStart"](26,"label",10),c["\u0275\u0275text"](27,"Cust Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.invoiceRegister.custCode=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",2),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275elementStart"](31,"div",9),c["\u0275\u0275elementStart"](32,"label",10),c["\u0275\u0275text"](33,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",16),c["\u0275\u0275elementStart"](36,"div",9),c["\u0275\u0275elementStart"](37,"label",10),c["\u0275\u0275text"](38,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"input",18),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",16),c["\u0275\u0275elementStart"](41,"div",9),c["\u0275\u0275elementStart"](42,"button",19),c["\u0275\u0275listener"]("click",(function(){return t.getInvoiceRegister()})),c["\u0275\u0275text"](43,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",20),c["\u0275\u0275elementStart"](45,"div",21),c["\u0275\u0275template"](46,un,2,1,"div",22),c["\u0275\u0275template"](47,bn,2,1,"div",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](48,"table",23),c["\u0275\u0275elementStart"](49,"thead",24),c["\u0275\u0275elementStart"](50,"tr"),c["\u0275\u0275elementStart"](51,"th"),c["\u0275\u0275text"](52,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"th"),c["\u0275\u0275text"](54,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](55,"th"),c["\u0275\u0275text"](56,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](57,"th"),c["\u0275\u0275text"](58,"Bill Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](59,"th"),c["\u0275\u0275text"](60,"Total Bill Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](61,"th"),c["\u0275\u0275text"](62,"Tax Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](63,"th"),c["\u0275\u0275text"](64,"Net Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](65,"tbody"),c["\u0275\u0275template"](66,xn,15,10,"tr",25),c["\u0275\u0275elementStart"](67,"tr",26),c["\u0275\u0275elementStart"](68,"td"),c["\u0275\u0275text"](69,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](70,"td"),c["\u0275\u0275text"](71,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](72,"td"),c["\u0275\u0275text"](73,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](74,"td",27),c["\u0275\u0275text"](75),c["\u0275\u0275pipe"](76,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](77,"td",27),c["\u0275\u0275text"](78),c["\u0275\u0275pipe"](79,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](80,"td",27),c["\u0275\u0275text"](81),c["\u0275\u0275pipe"](82,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](83,"td",27),c["\u0275\u0275text"](84),c["\u0275\u0275pipe"](85,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](86,fn,4,1,"div",28)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.invoiceRegister.voucherType.name),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.invoiceRegister.voucherType.name.toLowerCase().includes("purchase")||t.invoiceRegister.voucherType.name.toLowerCase().includes("debit")||t.invoiceRegister.voucherType.name.toLowerCase().includes("wastage")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.invoiceRegister.voucherType.name.toLowerCase().includes("sales")||t.invoiceRegister.voucherType.name.toLowerCase().includes("credit")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",t.invoiceRegister.ledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.invoiceRegister.code),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.invoiceRegister.custCode),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("voucherType")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",t.invoiceRegisterData),c["\u0275\u0275advance"](9),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](76,16,t.totalbillamount,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](79,19,t.totaldisamount,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](82,22,t.totaltaxamount,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](85,25,t.totalnetamount,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,E.u,k.m,E.t,w.a,E.r],pipes:[E.g],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%;min-width:51px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%;min-width:51px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:24px;-ms-flex-line-pack:center;align-content:center}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.highlightcolor[_ngcontent-%COMP%]{background-color:grey}"]}),e})();var Cn=n("0zba");function _n(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"Yes"),c["\u0275\u0275elementEnd"]())}function Sn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"No"),c["\u0275\u0275elementEnd"]())}const Mn=function(e){return{highlight:e}};function En(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",31),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getVoucherSummary(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](17,_n,2,0,"td",32),c["\u0275\u0275template"](18,Sn,2,0,"td",32),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,Mn,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_date),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_vehicle_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_ref_no),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_start_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_end_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_amount),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.y_for_approved),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.y_for_approved)}}let wn=(()=>{class e{constructor(e,t,n,o,a,i){this.api=e,this.common=t,this.route=n,this.user=o,this.accountService=a,this.modalService=i,this.enddate=this.common.dateFormatternew(new Date).split(" ")[0],this.startdate=this.common.dateFormatternew(new Date).split(" ")[0],this.trips=[],this.checkedTrips=[],this.fuelFilings=[],this.tripHeads=[],this.tripVouchers=[],this.showtripvoucher=[],this.selectedVehicle={id:0,regno:""},this.vehicles=[],this.flag=!1,this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.routId=0,this.tripExpDriver=[],this.vchdt=1,this.selectedRow=-1,this.tripExpenseVoucherTrips=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.enddate,this.common.refresh=this.refresh.bind(this),this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.routId=e.id)}),this.common.currentPage=0==this.routId?"Trip Voucher Expense":"Trip Voucher Expense (Short)"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.getTripExpences()}getVehicle(e){this.selectedVehicle=e,this.flag=!0,console.log("test fase",this.selectedVehicle)}getPendingTripsEditTime(e){return new Promise((t,n)=>{if(0==this.selectedVehicle.id)this.common.showToast("please enter registration number !!"),n();else{const o={vehId:this.selectedVehicle.id,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",o).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,this.trips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})}})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getPendingTrips(){if(this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate,0==this.selectedVehicle.id)this.common.showToast("please enter registration number !!");else if(0==this.accountService.selected.branch.id)this.common.showError("please Select Branch !!");else{this.getTripExpences(),console.log("this.selectedVehicle.id",this.selectedVehicle.regno);const e={vehId:this.selectedVehicle.id};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",e).subscribe(e=>{console.log(e),this.common.loading--,this.showTripSummary(e.data),this.trips=e.data},e=>{console.log(e),this.common.loading--,this.common.showError()})}}showTripSummary(e){this.common.params={vehId:this.selectedVehicle.id,tripDetails:e,vehname:this.selectedVehicle.regno,firstDate:this.startdate,endDate:this.enddate},1==this.routId?this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data123: ",e.status),e.status&&(console.log("response Data123: ",e.status),this.selectedVehicle.id=0,this.getTripExpences())}):this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data321: ",e.status),e.status&&(console.log("response Data1234: ",e.status),this.selectedVehicle.id=0,this.getTripExpences())})}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;console.log("Active event",e),"enter"==t&&(n.includes("suggestion")?this.setFoucus("vchtype"):n.includes("vchtype")?this.setFoucus("startdate"):n.includes("startdate")?this.setFoucus("enddate"):n.includes("enddate")&&this.setFoucus("btnSubmit")),"backspace"!=t&&"delete"!=t||"suggestion"!=n||(this.selectedVehicle.id=0),(t.includes("arrowup")||t.includes("arrowdown"))&&!n&&this.showtripvoucher.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.showtripvoucher.length-1&&this.selectedRow++)}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}checkedAllSelected(){this.checkedTrips=[];for(let e=this.findFirstSelectInfo("index");e<=this.findLastSelectInfo("index");e++)this.trips[e].isChecked=!0,this.checkedTrips.push(this.trips[e])}getFuelFillings(){console.log(this.findFirstSelectInfo(),this.findLastSelectInfo());const e={vehId:this.selectedVehicle.id,lastFilling:this.findFirstSelectInfo(),currentFilling:this.findLastSelectInfo()};this.common.loading++,this.api.post("FuelDetails/getFillingsBwTime",e).subscribe(e=>{console.log(e),this.common.loading--,this.fuelFilings=e.data||[]},e=>{console.log(e),this.common.loading--,this.common.showError()})}findFirstSelectInfo(e="startDate"){let t={startDate:"",index:-1};for(let n=0;n<this.trips.length;n++)if(this.trips[n].isChecked){t.startDate=this.trips[n].start_time,t.index=n;break}return t[e]}findLastSelectInfo(e="endDate"){let t={endDate:"",index:-1};for(let n=this.trips.length-1;n>=0;n--)if(this.trips[n].isChecked){t.endDate=this.trips[n].end_time,t.index=n;break}return t[e]}getHeads(){this.common.loading++,this.api.post("Accounts/getLedgerHeadList",{}).subscribe(e=>{console.log(e),this.common.loading--,this.tripHeads=e.data,this.tripHeads.map(e=>{let t=[];this.trips.map(e=>{e.isChecked&&t.push({id:e.id,amount:0,start_time:e.start_time,end_time:e.end_time,start_name:e.start_name,end_name:e.end_name})}),e.trips=t,e.total=0;let n=[];this.fuelFilings.map(e=>{e.isChecked&&n.push({id:e.id})}),e.fuelFilings=n})},e=>{console.log(e),this.common.loading--,this.common.showError()})}addVoucher(){console.log("Trips: ",this.tripHeads);const e={vehId:this.selectedVehicle.id,voucher_details:this.tripHeads};this.common.loading++,this.api.post("TripExpenseVoucher/InsertTripExpenseVoucher",e).subscribe(e=>{console.log("Res: ",e),this.common.loading--},e=>{console.log(e),this.common.loading--})}calculateTripHeadTotal(e){console.log("Index: ",e),this.tripHeads[e].total=0,this.tripHeads[e].trips.map(t=>{this.tripHeads[e].total+=t.amount}),console.log("Total: ",this.tripHeads[e].total)}getTripSummary(){const e={vehId:this.selectedVehicle.id?this.selectedVehicle.id:0};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVouchers",e).subscribe(e=>{console.log("trip expence 11",e),this.common.loading--,this.tripVouchers=e.data},e=>{console.log(e),this.common.loading--,this.common.showError()})}getPendingOnEditTrips(){return new Promise((e,t)=>{if(0==this.selectedVehicle.id)this.common.showToast("please enter registration number !!"),t();else{const n={vehId:this.selectedVehicle.id};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",n).subscribe(t=>{console.log(t),this.common.loading--,this.TripEditData=t.data,this.trips=t.data,e()},e=>{console.log(e),this.common.loading--,this.common.showError(),t()})}})}getTripExpences(){return new Promise((e,t)=>{const n={vehId:this.selectedVehicle.id?this.selectedVehicle.id:0,startdate:this.startdate,enddate:this.enddate,isdate:this.vchdt};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceFilterVoucher",n).subscribe(t=>{console.log("trip expence 22",t),this.common.loading--,this.tripVouchers=t.data,e()},e=>{console.log(e),this.common.loading--,this.common.showError(),t()})})}getSearchTripExpences(){this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate;const e={vehId:this.selectedVehicle.id?this.selectedVehicle.id:0,startdate:this.startdate,enddate:this.enddate,isdate:this.vchdt,routid:this.routId};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceFilterVoucher",e).subscribe(e=>{console.log("trip expence 33",e),this.common.loading--,this.showtripvoucher=this.tripVouchers=e.data,this.selectedRow=0},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e){if(0!=this.accountService.selected.branch.id){let t=[];this.selectedVehicle.id=e.y_vehicle_id,t.push(this.getTripExpences()),t.push(this.getPendingOnEditTrips()),t.push(this.getPendingTripsEditTime(e.y_id)),t.push(this.getVocherEditTime(e.y_voucher_id)),t.push(this.getTripsExpDriver(e.y_id)),t.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(t).then(t=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e)}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}else this.common.showError("Please Select Branch")}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}showVoucherSummary(e,t){let n=this.selectedVehicle.id,o=this.TripEditData,a=this.pendingDataEditTme,i=this.VoucherEditTime;console.log("type id",t.y_vouchertype_id),-151==t.y_vouchertype_id?(this.common.params={vehId:n,tripDetails:e,tripVoucher:t,tripEditData:o,tripPendingDataSelected:a,VoucherData:i,tripExpDriver:this.tripExpDriver},console.log("tripPendingDataSelected",a,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data active element: ",e),e.status&&(this.selectedVehicle.id=0,this.getSearchTripExpences()),this.selectedVehicle.id=0})):(this.common.params={vehId:n,tripDetails:e,tripVoucher:t,tripEditData:o,tripPendingDataSelected:a,VoucherData:i,tripExpDriver:this.tripExpDriver},console.log("tripPendingDataSelected",a,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data active element 2: ",e),e.status&&(this.selectedVehicle.id=0,this.getSearchTripExpences()),this.selectedVehicle.id=0}))}deleteVoucherEntry(e){let t={voucherId:e.id};console.log("params",t),this.common.loading++,this.api.post("TripExpenseVoucher/deleteTripExpenseVouchers",t).subscribe(e=>{this.common.loading--,console.log("res",e.data),e.success&&(this.common.showToast("Success!!"),this.getTripSummary())},e=>{this.common.loading--,this.common.showError()})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Trip Voucher Expence :"+this.startdate+" To :"+this.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-voucher-expense"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:68,vars:5,consts:[[2,"padding-top","26px",3,"keydown"],[1,"row","pdf-exel-icon"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row",2,"margin","0"],[1,"col-3","pl-0","pr-0"],[1,"left-box"],[1,"row"],[1,"col-sm-8","pl-0"],[1,"tjr-label"],[1,"vehicle_no_input"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Enter Reg No",3,"preSelected","onSelected"],[1,"col-sm-4","pl-0"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"fa","fa-plus"],[1,"col-9","pl-0","pr-0"],[1,"col-sm-3","pr-0"],[1,"form-group","m-0"],["id","vchtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["value","1"],["value","0"],["type","text","autocomplete","off","placeholder","Select Date","name","date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-sm-2"],["id","btnSubmit",1,"btn","btn-primary","mt-3",3,"click"],[1,"mt-3"],["id","table",1,"table","table-bordered","m-0"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"],[4,"ngIf"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"span",2),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](4,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](6,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",6),c["\u0275\u0275elementStart"](8,"div",7),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"div",10),c["\u0275\u0275elementStart"](12,"label",11),c["\u0275\u0275text"](13,"Vehicle No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",12),c["\u0275\u0275elementStart"](15,"auto-suggestion",13),c["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",14),c["\u0275\u0275elementStart"](17,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.getPendingTrips()})),c["\u0275\u0275element"](18,"i",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",17),c["\u0275\u0275elementStart"](20,"div",8),c["\u0275\u0275elementStart"](21,"div",9),c["\u0275\u0275elementStart"](22,"div",18),c["\u0275\u0275elementStart"](23,"div",19),c["\u0275\u0275elementStart"](24,"label",11),c["\u0275\u0275text"](25,"Filter Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"select",20),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.vchdt=e})),c["\u0275\u0275elementStart"](27,"option",21),c["\u0275\u0275text"](28,"Voucher Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"option",22),c["\u0275\u0275text"](30,"Entry Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"div",18),c["\u0275\u0275elementStart"](32,"div",19),c["\u0275\u0275elementStart"](33,"label",11),c["\u0275\u0275text"](34,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"input",23),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",18),c["\u0275\u0275elementStart"](37,"div",19),c["\u0275\u0275elementStart"](38,"label",11),c["\u0275\u0275text"](39,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"input",24),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",25),c["\u0275\u0275elementStart"](42,"button",26),c["\u0275\u0275listener"]("click",(function(){return t.getSearchTripExpences()})),c["\u0275\u0275text"](43,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",27),c["\u0275\u0275elementStart"](45,"table",28),c["\u0275\u0275elementStart"](46,"thead",29),c["\u0275\u0275elementStart"](47,"tr"),c["\u0275\u0275elementStart"](48,"th"),c["\u0275\u0275text"](49,"SN"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"th"),c["\u0275\u0275text"](51,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](52,"th"),c["\u0275\u0275text"](53,"Vehicle Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"th"),c["\u0275\u0275text"](55,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](56,"th"),c["\u0275\u0275text"](57,"Ref No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"th"),c["\u0275\u0275text"](59,"Trip Start"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](60,"th"),c["\u0275\u0275text"](61,"Trip End"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](62,"th"),c["\u0275\u0275text"](63,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](64,"th"),c["\u0275\u0275text"](65," Is Approved"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](66,"tbody"),c["\u0275\u0275template"](67,En,19,13,"tr",30),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("preSelected",null),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.vchdt),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](27),c["\u0275\u0275property"]("ngForOf",t.showtripvoucher))},directives:[h.s,h.r,Cn.a,k.D,k.r,k.u,k.w,k.G,k.d,k.m,E.t,E.r,E.u],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 230px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}[_nghost-%COMP%]     .vehicle_no_input auto-suggestion .tagsinput{border:0}[_nghost-%COMP%]     .vehicle_no_input auto-suggestion .tagsinput input{width:100%}.left-box[_ngcontent-%COMP%]{border-radius:3px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.pdf-exel-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),e})();var kn=n("1+iI"),Pn=n("OZ+k");function On(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3).$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("",t.labels," ",e.name,"")}}function In(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3).$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("",t.labels," ",e.ledgerName,"")}}function Dn(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275template"](1,On,2,2,"span",0),c["\u0275\u0275template"](2,In,2,2,"span",0),c["\u0275\u0275text"](3,"\xa0"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.ledgerName)}}function Vn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Fn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Tn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Bn(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function An(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.debit,"1.2-2")," ")}}function Ln(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.credit,"1.2-2")," ")}}function Rn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"](2);return n.activeIndex=n.activeIndex!==t?t:-1})),c["\u0275\u0275template"](1,Dn,4,2,"div",6),c["\u0275\u0275template"](2,Vn,2,0,"div",6),c["\u0275\u0275template"](3,Fn,2,0,"div",6),c["\u0275\u0275template"](4,Tn,2,0,"div",6),c["\u0275\u0275template"](5,Bn,2,0,"div",6),c["\u0275\u0275template"](6,An,3,4,"div",7),c["\u0275\u0275template"](7,Ln,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function jn(e,t){if(1&e&&c["\u0275\u0275element"](0,"out-standing-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("color",o.color+1)("data",t.data)("action",o.action)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}const zn=function(e){return{highlight:e}};function Nn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit,n=c["\u0275\u0275nextContext"](2);return t.y_voucher_type_name.toLowerCase().includes("voucher")?t.y_voucher_type_name.toLowerCase().includes("trip")?n.action(t,"",t.y_voucher_type_name,t):n.action(t.y_voucherid,t.y_code,t.y_voucher_type_name,t):n.action(t.y_voucherid,"",t.y_voucher_type_name,t)}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](2).selectedRow=t})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",8),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",8),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",8),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",8),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](16,zn,o.selectedRow==t)),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.y_voucher_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,7,n.y_voucher_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](n.y_voucher_type_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,10,n.y_dramunt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,13,n.y_cramunt,"1.2-2"))}}function Gn(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Rn,8,9,"div",2),c["\u0275\u0275template"](2,jn,1,6,"out-standing-tree",3),c["\u0275\u0275template"](3,Nn,18,18,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function Yn(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Gn,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function Hn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",37),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerList)}}function $n(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",38),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"groupid","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.secondarygroup)}}function qn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",39),c["\u0275\u0275elementStart"](1,"div",40),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](2,"div",33),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",33),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",33),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",33),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",33),c["\u0275\u0275text"](11,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",41),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",41),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](18,"out-standing-tree",42),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,7,e.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,10,e.credit,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("data",e.data)("action",o.openinvoicemodel.bind(o))("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)}}function Kn(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",43),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",44),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",45),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.outStanding[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.outStanding[e.f2Date])}}const Un=".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px!important;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:16px!important}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}nb-card-body[_ngcontent-%COMP%]{padding:0}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:12.5%;max-width:12.5%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:13px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.8%}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:14px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-sub-stocktype[_ngcontent-%COMP%]{color:#fff;font-size:14px}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-stockitem[_ngcontent-%COMP%]{color:#fff;font-size:14px;border-bottom:1px solid #fff;padding-left:23px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.5%}.x-branch[_ngcontent-%COMP%]{background:#8daab8;color:#fff;font-size:14px}.x-branch[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-warehouse[_ngcontent-%COMP%]{background:#c8c8c8;color:#000;font-size:14px}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-left:1px solid #630707}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-left:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.x-sub-stocktype[_ngcontent-%COMP%], .x-warehouse[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{margin-left:-9px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:child(7){margin-right:24px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right;margin-left:-7px;margin-right:22px}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 280px);overflow:auto;width:100%}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}";let Wn=(()=>{class e{constructor(e,t,n,o){this.common=e,this.modalService=t,this.user=n,this.accountService=o,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a8a5ad"],this.deletedId=0}keyHandler(e){const t=e.key.toLowerCase();if((t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++),e.ctrlKey&&"d"===t&&this.data.length&&-1!=this.selectedRow)return this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("voucher")?!this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("trip")&&this.openVoucherEdit(this.data[this.selectedRow].y_voucherid,6,this.data[this.selectedRow].y_vouchertype_id):this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("invoice")&&this.openinvoicemodeledit(this.data[this.selectedRow].y_voucherid,this.data[this.selectedRow].y_vouchertype_id,1),void e.preventDefault()}openVoucherEdit(e,t,n){console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e),e.delete&&this.getaction()}))}openinvoicemodeledit(e,t,n=0){this.common.params={invoiceid:e,delete:0,newid:n,ordertype:t,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e),e.msg&&this.getaction()}),this.common.currentPage="OutStanding Report"}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["out-standing-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","row x-sub-stocktype",3,"background","click",4,"ngIf"],[3,"color","data","action","isExpandAll","active","labels",4,"ngIf"],["style","cursor:pointer","class","row x-warehouse",3,"ngClass","dblclick","click",4,"ngIf"],[1,"row","x-sub-stocktype",2,"cursor","pointer",3,"click"],["class","col x-col",4,"ngIf"],["class","col x-col","style","text-align:right;",4,"ngIf"],[1,"col","x-col"],[1,"col","x-col",2,"text-align","right"],[3,"color","data","action","isExpandAll","active","labels"],[1,"row","x-warehouse",2,"cursor","pointer",3,"ngClass","dblclick","click"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,Yn,2,1,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},directives:[E.u,E.t,e,E.r],pipes:[E.g,E.f],styles:[Un]}),e})(),Qn=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.modalService=r,this.vouchertypedata=[],this.fuelFilings=[],this.branchdata=[],this.activedateid="",this.selectedName="",this.secondarygroup=[],this.outStanding={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"",id:""},trantype:0,groupid:{name:"All",id:0}},this.ledgerData=[],this.voucherEntries=[],this.ledgerList=[],this.activeId="ledger",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.headingName="",this.selectedRow=-1,this.viewType="sub",this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.outStanding.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.outStanding.endDate,this.common.refresh=this.refresh.bind(this),this.getLedgerList(),this.setFoucus("ledger"),this.getSecondaryGoup(),this.common.currentPage="Outstanding Report",this.headingName=this.user._customer.name+"( "+this.accountService.selected.branch.name+" ) From :"+this.outStanding.startDate+" To "+this.outStanding.endDate}ngOnInit(){}refresh(){this.getLedgerList(),this.setFoucus("ledger")}getSecondaryGoup(){this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.secondarygroup=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerList(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerList=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgerView(){this.outStanding.startDate=this.accountService.fromdate,this.outStanding.endDate=this.accountService.todate,console.log("Ledger:",this.outStanding);let e={startdate:this.outStanding.startDate,enddate:this.outStanding.endDate,ledger:this.outStanding.ledger.id,branch:this.outStanding.branch.id,trantype:this.outStanding.trantype,groupid:this.outStanding.groupid.id};this.common.loading++,this.api.post("Accounts/GetOutStandingList",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data,this.generalizeData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.outStanding[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.outStanding[e])})}openVoucherDetail(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}openinvoicemodel(e,t,n,o){n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):n.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e)}))}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.outStanding.startDate,currentFilling:this.outStanding.endDate,fuelstationid:e.y_refid,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e)})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.outStanding.startDate,currentFilling:this.outStanding.endDate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("balance-sheet",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Out Standing From :"+this.outStanding.startDate+" To :"+this.outStanding.endDate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}onSelected(e,t,n){this.outStanding[t].name=e[n],this.outStanding[t].id=e.id}filterData(e){return e}generalizeData(){this.voucherEntries=[];for(let e=0;e<this.ledgerData.length;e++){let t=this.ledgerData[e],n=t.y_path.split("--\x3e");t.labels=n.splice(1,n.length);let o=this.voucherEntries.findIndex(e=>e.name===n[0]);-1===o?this.voucherEntries.push({name:n[0],data:[t],debit:t.y_ledger_name?parseFloat(t.y_dramunt):0,credit:t.y_ledger_name?parseFloat(t.y_cramunt):0}):(this.voucherEntries[o].debit+=t.y_ledger_name?parseFloat(t.y_dramunt):0,this.voucherEntries[o].credit+=t.y_ledger_name?parseFloat(t.y_cramunt):0,t.y_ledger_name&&this.voucherEntries[o].data.push(t))}this.voucherEntries.map(e=>e.data=this.findChilds(e.data)),console.log("voucherEntries",this.voucherEntries)}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],debit:o.y_ledger_name?parseFloat(o.y_dramunt):0,credit:o.y_ledger_name?parseFloat(o.y_cramunt):0}):(t[i].debit+=o.y_ledger_name?parseFloat(o.y_dramunt):0,t[i].credit+=o.y_ledger_name?parseFloat(o.y_cramunt):0,o.y_ledger_name&&t[i].data.push(o))}if(t.length)return t.map(e=>({name:e.name,data:this.findChilds(e.data),debit:e.debit,credit:e.credit}));{let t=[],n=Ut.groupBy(e,"y_ledger_name");console.log("Groups:",n);for(let e in n)if(n[e].length>1){let o={name:e,ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dramunt),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cramunt),0)};t.push(o)}else{let o={name:e,ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dramunt),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cramunt),0)};t.push(o)}return t}}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.outStanding.startDate=this.common.handleDateOnEnterNew(this.outStanding.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")?this.setFoucus("groupid"):this.activeId.includes("groupid")?(this.outStanding.endDate=this.common.handleDateOnEnterNew(this.outStanding.endDate),this.setFoucus("trantype")):this.activeId.includes("trantype")&&(this.outStanding.endDate=this.common.handleDateOnEnterNew(this.outStanding.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"groupid"==this.activeId&&this.setFoucus("endDate"),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.outStanding[o].includes("-"))t=this.outStanding[o].split("-");else{if(!this.outStanding[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.outStanding[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.outStanding[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}handleGroupView(e){-1===this.activeGroup.indexOf(e)?this.activeGroup.push(e):this.activeGroup.splice(this.activeGroup.indexOf(e),1)}showAllGroups(){this.activeGroup=this.voucherEntries.map((e,t)=>t)}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log("Error:",e),this.common.showError("There is some technical error occured. Please Try Again!")})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Pn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}generateCsvData(){let e=[];e.push(Object.assign({liability:" Liability",liabilityAmount:"Amount"})),this.voucherEntries.forEach(t=>{e.push({liability:"(MG)"+t.name,liabilityAmount:t.amount}),t.subGroups.forEach(t=>{e.push({liability:"(SG)"+t.name,liabilityAmount:t.total}),t.balanceSheets.forEach(t=>{e.push({liability:"(L)"+t.y_ledger_name,liabilityAmount:t.y_amount})})})});let t=[];for(let n=0;n<e.length;n++)e[n]&&n<e.length-1&&t.push(Object.assign({},e[n],{asset:"",assetAmount:""}));t.push(Object.assign({},e[e.length-1])),t.push(Object.assign({},{"":"MG = Main Group ,SG = Sub Group, L = Ledger"})),this.csvService.jsonToExcel(t),console.log("Merged:",t)}csvFunction(){let e=[];e.push(Object.assign({particular:"Particular",ledgerName:"Ledger Name",voucherCode:"Voucher Code",voucherCustCode:"Voucher Cust Code",voucherDate:"Voucher Date",voucherType:"Voucher Type",drAmount:"Dr Amount",crAmount:"Cr Amount"})),this.voucherEntries.forEach(t=>{e.push({particular:t.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:t.debit,crAmount:t.credit}),e.push(...this.generateCSVData(t.data,"  "))}),this.csvService.jsonToExcel(e)}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:a.debit,crAmount:a.credit}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:"",ledgerName:a.y_ledger_name?a.y_ledger_name:"",voucherCode:a.y_code?a.y_code:"",voucherCustCode:a.y_voucher_cust_code?a.y_voucher_cust_code:"",voucherDate:a.y_voucher_date?a.y_voucher_date:"",voucherType:a.y_voucher_type_name?a.y_voucher_type_name:"",drAmount:a.y_dramunt,crAmount:a.y_cramunt})}return n}printX(){console.log(this.isExpand)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["outstanding"]],decls:82,vars:16,consts:[[2,"padding-top","0px","border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["autocomplete","off","type","text","id","groupid","name","groupid",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"debit_box"],[1,"debit"],["autocomplete","off","type","radio","name","trantype","id","trantype",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"credit"],["autocomplete","off","type","radio","name","trantype","id","trantype1",1,"form-control",3,"ngModel","value","ngModelChange"],["autocomplete","off","type","radio","name","trantype","id","trantype2",1,"form-control",3,"ngModel","value","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","5px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"width","100%","margin","0"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","ledger","display","name",3,"data","select"],["targetId","groupid","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],["labels","",3,"data","action","isExpandAll","active"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),c["\u0275\u0275element"](3,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275elementStart"](8,"input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](9," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"span",8),c["\u0275\u0275elementStart"](11,"input",9),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](12," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",10),c["\u0275\u0275elementStart"](14,"div",11),c["\u0275\u0275elementStart"](15,"div",10),c["\u0275\u0275elementStart"](16,"div",12),c["\u0275\u0275elementStart"](17,"div",13),c["\u0275\u0275elementStart"](18,"label",14),c["\u0275\u0275text"](19,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",12),c["\u0275\u0275elementStart"](22,"div",13),c["\u0275\u0275elementStart"](23,"label",14),c["\u0275\u0275text"](24,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"input",16),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",12),c["\u0275\u0275elementStart"](27,"div",13),c["\u0275\u0275elementStart"](28,"label",14),c["\u0275\u0275text"](29,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"div",10),c["\u0275\u0275elementStart"](32,"div",18),c["\u0275\u0275elementStart"](33,"div",13),c["\u0275\u0275elementStart"](34,"label",14),c["\u0275\u0275text"](35,"Goup Id"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"input",19),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.groupid.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",18),c["\u0275\u0275elementStart"](38,"div",13),c["\u0275\u0275elementStart"](39,"label",14),c["\u0275\u0275text"](40,"Outstanding Balance"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",20),c["\u0275\u0275elementStart"](42,"div",21),c["\u0275\u0275elementStart"](43,"span"),c["\u0275\u0275text"](44,"Debit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"input",22),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",23),c["\u0275\u0275elementStart"](47,"span"),c["\u0275\u0275text"](48,"Credit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"input",24),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"div",23),c["\u0275\u0275elementStart"](51,"span"),c["\u0275\u0275text"](52,"All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"input",25),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.outStanding.trantype=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"div",18),c["\u0275\u0275elementStart"](55,"div",13),c["\u0275\u0275elementStart"](56,"button",26),c["\u0275\u0275listener"]("click",(function(){return t.getLedgerView()})),c["\u0275\u0275text"](57,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"div",27),c["\u0275\u0275elementStart"](59,"div",28),c["\u0275\u0275template"](60,Hn,2,1,"div",29),c["\u0275\u0275template"](61,$n,2,1,"div",29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](62,"div",30),c["\u0275\u0275elementStart"](63,"div",31),c["\u0275\u0275elementStart"](64,"div",32),c["\u0275\u0275elementStart"](65,"div",33),c["\u0275\u0275text"](66,"Particular"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](67,"div",33),c["\u0275\u0275text"](68,"Voucher Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](69,"div",33),c["\u0275\u0275text"](70,"Voucher Cust Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](71,"div",33),c["\u0275\u0275text"](72,"Voucher Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](73,"div",33),c["\u0275\u0275text"](74,"Voucher Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](75,"div",33),c["\u0275\u0275text"](76,"Dr Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](77,"div",33),c["\u0275\u0275text"](78,"Cr Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](79,"div",34),c["\u0275\u0275template"](80,qn,19,13,"div",35),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](81,Kn,4,1,"div",36)),2&e&&(c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.outStanding.ledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.outStanding.groupid.name),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",0),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",1),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.outStanding.trantype)("value",-1),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("groupid")),c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",t.voucherEntries),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.u,E.t,w.a,Wn],pipes:[E.g],styles:[Un]}),e})();var Jn=n("0CUS"),Xn=n("FoUt"),Zn=n("eu2l");function eo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275elementStart"](1,"h4",22),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"i",23),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().activeModal.dismiss()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.currentPage)}}function to(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",41),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).onSelected(t,"stockType","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.StockTypeData)}}function no(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",42),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).onSelected(t,"stockSubType","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.StockSubTypeData)}}function oo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",43),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).onSelected(t,"stockItem","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.StockIemData)}}function ao(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",44),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).onSelected(t,"wherehouse","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.StockWhereHouseData)}}function io(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",24),c["\u0275\u0275elementStart"](1,"div",25),c["\u0275\u0275elementStart"](2,"div",24),c["\u0275\u0275elementStart"](3,"div",26),c["\u0275\u0275elementStart"](4,"div",27),c["\u0275\u0275elementStart"](5,"label",28),c["\u0275\u0275text"](6,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"input",29),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().outStanding.stockType.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",26),c["\u0275\u0275elementStart"](9,"div",27),c["\u0275\u0275elementStart"](10,"label",28),c["\u0275\u0275text"](11,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"input",30),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().outStanding.stockSubType.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",26),c["\u0275\u0275elementStart"](14,"div",27),c["\u0275\u0275elementStart"](15,"label",28),c["\u0275\u0275text"](16,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"input",31),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().outStanding.stockItem.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",26),c["\u0275\u0275elementStart"](19,"div",27),c["\u0275\u0275elementStart"](20,"label",28),c["\u0275\u0275text"](21,"Ware House"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"input",32),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().outStanding.wherehouse.name=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",24),c["\u0275\u0275elementStart"](24,"div",33),c["\u0275\u0275elementStart"](25,"div",27),c["\u0275\u0275elementStart"](26,"label",28),c["\u0275\u0275text"](27,"Start Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"input",34),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().accountService.fromdate=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",33),c["\u0275\u0275elementStart"](30,"div",27),c["\u0275\u0275elementStart"](31,"label",28),c["\u0275\u0275text"](32,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"input",35),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().accountService.todate=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",36),c["\u0275\u0275elementStart"](35,"div",27),c["\u0275\u0275elementStart"](36,"button",37),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().getStockSummary()})),c["\u0275\u0275text"](37,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",38),c["\u0275\u0275elementStart"](39,"div",39),c["\u0275\u0275template"](40,to,2,1,"div",40),c["\u0275\u0275template"](41,no,2,1,"div",40),c["\u0275\u0275template"](42,oo,2,1,"div",40),c["\u0275\u0275template"](43,ao,2,1,"div",40),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngModel",e.outStanding.stockType.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.outStanding.stockSubType.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.outStanding.stockItem.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.outStanding.wherehouse.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",e.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.accountService.todate),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",e.activeId.includes("stocktype")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeId.includes("stocksubtype")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeId.includes("stockItem")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeId.includes("wherehouse"))}}function ro(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",54),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"](2).index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().handleExpandation(t,a,"liabilities","branch",o,n,0)}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](2).$implicit;return c["\u0275\u0275nextContext"](3).openmodal(t.data[0].data[0],"stock")})),c["\u0275\u0275elementStart"](1,"div",16),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",16),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",16),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",16),c["\u0275\u0275text"](8,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",16),c["\u0275\u0275text"](10,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",16),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",16),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",16),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",16),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",16),c["\u0275\u0275text"](20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",16),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",16),c["\u0275\u0275text"](24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",16),c["\u0275\u0275text"](26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",16),c["\u0275\u0275text"](28),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",16),c["\u0275\u0275text"](30),c["\u0275\u0275pipe"](31,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275text"](33),c["\u0275\u0275pipe"](34,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](e.totalqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalpurchase),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalsales),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalissue),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalwastage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totaldebit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalcredit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalnet),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](31,12,e.totalopeamt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](34,15,e.totalcloamt,"1.2-2"))}}function lo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",55),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"](2),o=n.index,a=n.index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().handleExpandation(t,r,"liabilities","warehouse",i,o,a)}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](2).$implicit;return c["\u0275\u0275nextContext"](3).openmodal(t.data[0].data[0],"stock")})),c["\u0275\u0275elementStart"](1,"div",16),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",16),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",16),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",16),c["\u0275\u0275text"](8,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",16),c["\u0275\u0275text"](10,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",16),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",16),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",16),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",16),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",16),c["\u0275\u0275text"](20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",16),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",16),c["\u0275\u0275text"](24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",16),c["\u0275\u0275text"](26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",16),c["\u0275\u0275text"](28),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",16),c["\u0275\u0275text"](30),c["\u0275\u0275pipe"](31,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275text"](33),c["\u0275\u0275pipe"](34,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](e.totalqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalpurchase),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalsales),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalissue),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalwastage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totaldebit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalcredit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalnet),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](31,12,e.totalopeamt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](34,15,e.totalcloamt,"1.2-2"))}}function so(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ro,35,18,"div",52),c["\u0275\u0275template"](2,lo,35,18,"div",53),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](4);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.branchid),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.branchid)}}const co=function(e){return{highlight:e}};function mo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",56),c["\u0275\u0275listener"]("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).openmodal(t.data[0].data[0],"stock")}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"]().index,o=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().selectedRow=o+n+t+0+0})),c["\u0275\u0275elementStart"](1,"div",16),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",16),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",16),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",16),c["\u0275\u0275text"](8,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",16),c["\u0275\u0275text"](10,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",16),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",16),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",16),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",16),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",16),c["\u0275\u0275text"](20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",16),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",16),c["\u0275\u0275text"](24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",16),c["\u0275\u0275text"](26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",16),c["\u0275\u0275text"](28),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",16),c["\u0275\u0275text"](30),c["\u0275\u0275pipe"](31,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275text"](33),c["\u0275\u0275pipe"](34,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]().index,i=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](19,co,i.selectedRow==a+o+t+0+0)),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](n.name),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](n.totalqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalpurchase),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalsales),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalissue),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalwastage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totaldebit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalcredit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.totalnet),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](31,13,n.totalopeamt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](34,16,n.totalcloamt,"1.2-2"))}}function ho(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",48),c["\u0275\u0275elementStart"](1,"div",58),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"](2).index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().selectedRow=r+i+a+o+n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](6).openmodal(n,"warehouse")})),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",16),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",16),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",16),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",16),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",16),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",16),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",16),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",16),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",16),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275text"](25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",16),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"](2).index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]().index,l=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==l.active.liabilities.warehouse.indexOf("warehouse"+r+i+a+o)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](20,co,l.selectedRow==r+i+a+o+n)),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate"](e.y_warehouse_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_opn_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_st_rec_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_pi_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_si_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_st_issue_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_wst_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_dn_qty,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cn_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_net_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](32,14,e.y_opn_amt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](35,17,e.y_clos_amt,"1.2-2"))}}function po(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",48),c["\u0275\u0275elementStart"](1,"div",57),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index,a=c["\u0275\u0275nextContext"](2).index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().handleExpandation(n,r,"liabilities","warehouse",i,a,o)}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](5).openmodal(n.data[0],"branch")})),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",16),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",16),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",16),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",16),c["\u0275\u0275text"](11,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",16),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",16),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",16),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",16),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",16),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275text"](25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",16),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](36,ho,36,22,"div",47),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2).index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]().index,i=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==i.active.liabilities.branch.indexOf("branch"+a+o+n+0)),c["\u0275\u0275advance"](9),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](e.totalopngqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.purchasetotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.salestotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.issuetotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.wastagetotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.debittotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.credittotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.nettotal),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](32,14,e.opnamttotal,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](35,17,e.cloamttotal,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.data)}}function go(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,po,37,20,"div",47),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function uo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",48),c["\u0275\u0275elementStart"](1,"div",58),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](3),n=t.index,o=t.index,a=c["\u0275\u0275nextContext"]().index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]();return r.selectedRow=i+a+n+o+r.m}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](6).openmodal(n,"warehouse")})),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",16),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",16),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",16),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",16),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",16),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",16),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",16),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",16),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",16),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275text"](25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",16),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](3),o=n.index,a=n.index,i=c["\u0275\u0275nextContext"]().index,r=c["\u0275\u0275nextContext"]().index,l=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==l.active.liabilities.warehouse.indexOf("warehouse"+r+i+o+a)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](20,co,l.selectedRow==r+i+o+a+l.m)),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate"](e.y_warehouse_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_opn_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_st_rec_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_pi_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_si_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_st_issue_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_wst_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_dn_qty,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cn_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_net_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](32,14,e.y_opn_amt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](35,17,e.y_clos_amt,"1.2-2"))}}function bo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,uo,36,22,"div",47),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function vo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,bo,2,1,"div",59),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function xo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",48),c["\u0275\u0275template"](1,so,3,2,"div",50),c["\u0275\u0275template"](2,mo,35,21,"div",51),c["\u0275\u0275template"](3,go,2,1,"div",50),c["\u0275\u0275template"](4,vo,2,1,"div",50),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().index,t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==n.active.liabilities.subGroup.indexOf("subGroup"+t+e+0)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==n.warehouseid),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=n.warehouseid),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==n.warehouseid&&0==n.branchid),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==n.warehouseid&&0!=n.branchid)}}function fo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",48),c["\u0275\u0275elementStart"](1,"div",49),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index,a=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().handleExpandation(n,a,"liabilities","subGroup",o,0,0)})),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",16),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",16),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",16),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",16),c["\u0275\u0275text"](11,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",16),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",16),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",16),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",16),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",16),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275text"](25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",16),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](36,xo,5,5,"div",47),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]().index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==o.active.liabilities.mainGroup.indexOf("mainGroup"+n+0)),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](8),c["\u0275\u0275textInterpolate"](e.totalqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalpurchase),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalsales),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalissue),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalwastage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totaldebit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalcredit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalnet),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](32,14,e.totalopeamt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](35,17,e.totalcloamt,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.data)}}function yo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",45),c["\u0275\u0275elementStart"](1,"div",46),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().handleExpandation(n,o,"liabilities","mainGroup",0,0,0)})),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",16),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",16),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",16),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",16),c["\u0275\u0275text"](11,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",16),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",16),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",16),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",16),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",16),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275text"](25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",16),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",16),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](36,fo,37,20,"div",47),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate"](e.totalqty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalstokrecive),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalpurchase),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalsales),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalissue),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalwastage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totaldebit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalcredit),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.totalnet),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](32,13,e.totalopeamt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](35,16,e.totalcloamt,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.data)}}function Co(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",60),c["\u0275\u0275elementStart"](1,"div",61),c["\u0275\u0275element"](2,"div",62),c["\u0275\u0275elementStart"](3,"div",63),c["\u0275\u0275elementStart"](4,"button",64),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().activeModal.dismiss()})),c["\u0275\u0275text"](5,"Cancel "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function _o(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",65),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",66),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",67),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.outStanding[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.outStanding[e.f2Date])}}let So=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.activeModal=r,this.modalService=l,this.vouchertypedata=[],this.branchdata=[],this.summaryreport=[],this.activedateid="",this.selectedName="",this.outStanding={Date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),stockType:{name:"All",id:0},stockSubType:{name:"All",id:0},stockItem:{name:"All",id:0},wherehouse:{name:"All",id:0}},this.branchid=0,this.warehouseid=0,this.active={liabilities:{mainGroup:[],subGroup:[],branch:[],warehouse:[],item:[]}},this.StockTypeData=[],this.StockSubTypeData=[],this.StockIemData=[],this.StockWhereHouseData=[],this.ledgerData=[],this.voucherEntries=[],this.ledgerList=[],this.activeId="ledger",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.headingName="",this.selectedRow=-1,this.viewType="main",this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.isModal=!1,this.sizeIndex=0,this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.outStanding.Date,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.outStanding.endDate,this.common.refresh=this.refresh.bind(this),this.getStockTypeList(),this.getWhereHouseList(),this.setFoucus("stocktype"),this.common.currentPage="Store Register",this.branchid=this.accountService.selected.branch.id,this.common.params&&this.common.params.startdate&&(this.accountService.fromdate=this.common.params.startdate,this.accountService.todate=this.common.params.enddate,this.getStockSummary(),this.common.params.isModal&&(this.isModal=!0),this.common.params.sizeIndex&&(this.sizeIndex=this.common.params.sizeIndex),this.common.params=null,this.common.handleModalSize("class","modal-lg","1200","px",this.sizeIndex))}ngOnInit(){}refresh(){this.getStockTypeList(),this.getWhereHouseList(),this.setFoucus("ledger"),this.branchid=this.accountService.selected.branch.id,console.log("branchid",this.branchid)}getStockTypeList(){this.common.loading++,this.api.post("Suggestion/GetTypeOfStock",{search:123,all:1}).subscribe(e=>{this.common.loading--,this.StockTypeData=e.data,console.log("Res stock type:",this.StockTypeData)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getWhereHouseList(){this.common.loading++,this.api.get("Suggestion/GetWareHouse?search=123&all=1").subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.StockWhereHouseData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockSubtype(e){let t={stocktype:e};this.common.loading++,this.api.post("Suggestion/GetSearchStockType",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.StockSubTypeData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockItem(e){let t={stocksubtype:e};this.common.loading++,this.api.post("Suggestion/GetStockItemData",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.StockIemData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockSummary(){this.outStanding.Date=this.accountService.fromdate,this.outStanding.endDate=this.accountService.todate,console.log("Ledger:",this.outStanding);let e={data:this.outStanding};this.common.loading++,this.api.post("Company/GetStockSummary",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data,this.generalizeData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.outStanding[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.outStanding[e])})}openVoucherDetail(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}openinvoicemodel(e){this.common.params={invoiceid:e,delete:0,indexlg:0},this.modalService.open(Xn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&console.log("open succesfull")})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("balance-sheet",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}onSelected(e,t,n){this.outStanding[t].name=e[n],this.outStanding[t].id=e.id,"stockType"==t&&this.getStockSubtype(e.id),"stockSubType"==t&&this.getStockItem(e.id),"wherehouse"==t&&(this.warehouseid=e.id)}filterData(e){return e}generalizeData(){this.summaryreport=this.generateGroup(this.ledgerData,"y_stockitem_type_name").map(e=>(e.data=this.generateGroup(e.data,"y_stockitem_subtype_name").map(e=>(e.data=this.generateGroup(e.data,"y_stockitem_name").map(e=>(e.data=this.generateGroup(e.data,"y_fobranch_name"),e)),e)),e)),console.log("summaryreport:",this.summaryreport),this.showAllGroups()}generateGroup(e,t){let n=Ut.groupBy(e,t);return Object.keys(n).map(e=>({name:e,data:n[e]}))}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("stocktype")?this.setFoucus("stocksubtype"):this.activeId.includes("stocksubtype")?this.setFoucus("stockItem"):this.activeId.includes("stockItem")?this.setFoucus("wherehouse"):this.activeId.includes("wherehouse")?this.setFoucus("Date"):this.activeId.includes("endDate")?this.setFoucus("submit"):this.activeId.includes("Date")&&this.setFoucus("endDate");else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"Date"==this.activeId&&this.setFoucus("wherehouse"),"endDate"==this.activeId&&this.setFoucus("Date"),"wherehouse"==this.activeId&&this.setFoucus("stockItem"),"stockItem"==this.activeId&&this.setFoucus("stocksubtype"),"stocksubtype"==this.activeId&&this.setFoucus("stocktype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.summaryreport.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.summaryreport.length-1&&this.selectedRow++)}}handleExpandation(e,t,n,o,a,i,r){console.log(e,t,n,o,a,i,r),e.stopPropagation(),this.isSingleClick&&clearTimeout(this.isSingleClick),this.isSingleClick=setTimeout(()=>{this.isSingleClick&&(-1===this.active[n][o].indexOf(o+t+a+i+r)?this.active[n][o].push(o+t+a+i+r):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a+i+r),1))},250)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.outStanding[o].includes("-"))t=this.outStanding[o].split("-");else{if(!this.outStanding[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.outStanding[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.outStanding[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}handleGroupView(e){-1===this.activeGroup.indexOf(e)?this.activeGroup.push(e):this.activeGroup.splice(this.activeGroup.indexOf(e),1)}showAllGroups(){this.activeGroup=this.summaryreport.map(e=>{let t=0,n=0,o=0,a=0,i=0,r=0,l=0,s=0,c=0,d=0,m=0;e.data.map(e=>{let h=0,p=0,g=0,u=0,b=0,v=0,x=0,f=0,y=0,C=0,_=0;e.data.map(e=>{let t=0,n=0,o=0,a=0,i=0,r=0,l=0,s=0,c=0,d=0,m=0;e.data.map(e=>{let h=0,p=0,g=0,u=0,b=0,v=0,x=0,f=0,y=0,C=0,_=0;e.data.map(e=>{h+=e.y_opn_qty?parseFloat(e.y_opn_qty):0,p+=e.y_st_rec_qty?parseFloat(e.y_st_rec_qty):0,g+=e.y_pi_qty?parseFloat(e.y_pi_qty):0,u+=e.y_si_qty?parseFloat(e.y_si_qty):0,b+=e.y_st_issue_qty?parseFloat(e.y_st_issue_qty):0,v+=e.y_wst_qty?parseFloat(e.y_wst_qty):0,x+=e.y_dn_qty?parseFloat(e.y_dn_qty):0,f+=e.y_cn_qty?parseFloat(e.y_cn_qty):0,y+=e.y_net_qty?parseFloat(e.y_net_qty):0,C+=e.y_opn_amt?parseFloat(e.y_opn_amt):0,_+=e.y_clos_amt?parseFloat(e.y_clos_amt):0}),console.log("totalopngqty",h),t+=e.totalopngqty=h,n+=e.totalstokrecive=p,o+=e.purchasetotal=g,a+=e.salestotal=u,i+=e.issuetotal=b,r+=e.wastagetotal=v,l+=e.debittotal=x,s+=e.credittotal=f,c+=e.nettotal=y,d+=e.opnamttotal=C,m+=e.cloamttotal=_}),h+=e.totalqty=t,p+=e.totalstokrecive=n,g+=e.totalpurchase=o,u+=e.totalsales=a,b+=e.totalissue=i,v+=e.totalwastage=r,x+=e.totaldebit=l,f+=e.totalcredit=s,y+=e.totalnet=c,C+=e.totalopeamt=d,_+=e.totalcloamt=m}),t+=e.totalqty=h,n+=e.totalstokrecive=p,o+=e.totalpurchase=g,a+=e.totalsales=u,i+=e.totalissue=b,r+=e.totalwastage=v,l+=e.totaldebit=x,s+=e.totalcredit=f,c+=e.totalnet=y,d+=e.totalopeamt=C,m+=e.totalcloamt=_}),e.totalqty=t,e.totalstokrecive=n,e.totalpurchase=o,e.totalsales=a,e.totalissue=i,e.totalwastage=r,e.totaldebit=l,e.totalcredit=s,e.totalnet=c,e.totalopeamt=d,e.totalcloamt=m}),console.log("totalopngqty",this.summaryreport)}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log("Error:",e),this.common.showError("There is some technical error occured. Please Try Again!")})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Pn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}changeViewType(e){this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],setTimeout(()=>{console.log("viewtype",this.viewType,e),"main"==this.viewType?this.summaryreport.forEach((e,t)=>this.active.liabilities.mainGroup.push("mainGroup"+t+0)):"stock"==this.viewType?this.summaryreport.forEach((e,t)=>{console.log("liability",e),e.data.forEach((e,n)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.data.forEach((e,o)=>{this.active.liabilities.subGroup.push("subGroup"+t+n+0)})})}):"all"==this.viewType&&this.summaryreport.forEach((e,t)=>{console.log("liability",e),e.data.forEach((e,n)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.data.forEach((e,o)=>{this.active.liabilities.subGroup.push("subGroup"+t+n+0),e.data.forEach((e,a)=>{this.active.liabilities.branch.push("branch"+t+n+o+0),e.data.forEach((e,i)=>{this.active.liabilities.warehouse.push("warehouse"+t+n+o+a)})})})})})},20)}openmodal(e,t){console.log("data.y_net_qty",e.y_net_qty,e.y_opn_qty),this.isSingleClick&&clearTimeout(this.isSingleClick),setTimeout(()=>{console.log("datail data",t,e),e.y_net_qty!=e.y_opn_qty&&(t.includes("stock")?this.common.params={startDate:this.outStanding.Date,endDate:this.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id,warehouse:e.y_warehouse_id}:t.includes("branch")?this.common.params={startDate:this.outStanding.Date,endDate:this.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id}:(this.common.params={startDate:this.outStanding.Date,endDate:this.outStanding.endDate,stocktype:e.y_stockitem_type_id,stocksubtype:e.y_stockitem_subtype_id,stockItem:e.y_stockitem_id,branchid:e.y_fobranch_id,warehouse:e.y_warehouse_id},console.log("param model",this.common.params)),this.modalService.open(Zn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{}))},20)}generateCsvData(){let e=[];e.push(Object.assign({Stocktype:" Stock Type",stocksubtype:"Stock Sub Type",stockitem:"Stock Item",branch:"Branch",warehouse:"Ware House",openingqty:"Opening Qty",stockrecived:"Stock Recived",purchase:"Purchase",sales:"Sales",issue:"Issue/Transefer",wastage:"Wastage",debitnote:"Debit Note",creditnote:"Credit Note",net:"Net Available"})),this.summaryreport.forEach(t=>{e.push({Stocktype:"(ST)"+t.name,stocksubtype:"",stockitem:"",branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach(t=>{e.push({Stocktype:"",stocksubtype:"(SS)"+t.name,stockitem:"",branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach(t=>{e.push({Stocktype:"",stocksubtype:"",stockitem:"(SI)"+t.name,branch:"",warehouse:"",openingqty:t.totalqty,stockrecived:t.totalstokrecive,purchase:t.totalpurchase,sales:t.totalsales,issue:t.totalissue,wastage:t.totalwastage,debitnote:t.totaldebit,creditnote:t.totalcredit,net:t.totalnet}),t.data.forEach(t=>{e.push({Stocktype:"",stocksubtype:"",stockitem:"",branch:"(BR)"+t.name,warehouse:"",openingqty:t.totalopngqty,stockrecived:t.totalstokrecive,purchase:t.purchasetotal,sales:t.salestotal,issue:t.issuetotal,wastage:t.wastagetotal,debitnote:t.debittotal,creditnote:t.credittotal,net:t.nettotal}),t.data.forEach(t=>{e.push({Stocktype:"",stocksubtype:"",stockitem:"",branch:"",warehouse:"(WH)"+t.y_warehouse_name,openingqty:t.y_opn_qty?t.y_opn_qty:0,stockrecived:t.y_st_rec_qty?t.y_st_rec_qty:0,purchase:t.y_pi_qty?t.y_pi_qty:0,sales:t.y_si_qty?t.y_si_qty:0,issue:t.y_st_issue_qty?t.y_st_issue_qty:0,wastage:t.y_wst_qty?t.y_wst_qty:0,debitnote:t.y_dn_qty?t.y_dn_qty:0,creditnote:t.y_cn_qty?t.y_cn_qty:0,net:t.y_net_qty?t.y_net_qty:0})})})})})});let t=[];for(let n=0;n<e.length;n++)e[n]&&n<e.length-1&&t.push(Object.assign({},e[n],{asset:"",assetAmount:""}));t.push(Object.assign({},e[e.length-1])),t.push(Object.assign({},{"":"ST = Stock Type ,SS =Stock Sub Type, SI = Stock Item, BR = Branch, WH = Ware House"})),this.csvService.jsonToExcel(t),console.log("Merged:",t)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["stoclsummary"]],decls:57,vars:8,consts:[[2,"border","0px"],[3,"keydown"],["class","row","style","height:40px;background-color:black;margin:0!important",4,"ngIf"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","click","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","stock",3,"ngModel","click","ngModelChange"],["type","radio","name","view-type","value","all",3,"ngModel","click","ngModelChange"],["class","row",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"margin","0px 0px 0px 0px","width","100%"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row",2,"height","40px","background-color","black","margin","0!important"],[2,"color","white","padding","6px"],[1,"fa","fa-times","close",3,"click"],[1,"row"],[1,"col-9","pl-0","pr-0"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","stocktype","name","stocktype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stocksubtype","name","stocksubtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stockItem","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","wherehouse","name","wherehouse",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","text","id","Date","autocomplete","off","maxlength","10","name","account-Date",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pt-3","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","5px","padding","7px !important",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["targetId","stocktype","display","name",3,"data","select"],["targetId","stocksubtype","display","name",3,"data","select"],["targetId","stockItem","display","name",3,"data","select"],["targetId","wherehouse","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",3,"click"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"row","x-sub-stocktype",3,"click"],[4,"ngIf"],["class","row x-stockitem",3,"ngClass","dblclick","click",4,"ngIf"],["class","row x-stockitem",3,"click","dblclick",4,"ngIf"],["class","row 2 x-stockitem",3,"click","dblclick",4,"ngIf"],[1,"row","x-stockitem",3,"click","dblclick"],[1,"row","2","x-stockitem",3,"click","dblclick"],[1,"row","x-stockitem",3,"ngClass","dblclick","click"],[1,"row","x-branch",3,"click","dblclick"],[1,"row","x-warehouse",3,"ngClass","click","dblclick"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],[1,"col-1","text-right"],["type","button","outline","","id","cancel",1,"btn","btn-primary","tjr-button",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275template"](2,eo,4,1,"div",2),c["\u0275\u0275elementStart"](3,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),c["\u0275\u0275element"](4,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.generateCsvData()})),c["\u0275\u0275element"](6,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",7),c["\u0275\u0275elementStart"](8,"span"),c["\u0275\u0275elementStart"](9,"input",8),c["\u0275\u0275listener"]("click",(function(){return t.changeViewType("main")}))("ngModelChange",(function(e){return t.viewType=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](10," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",9),c["\u0275\u0275elementStart"](12,"input",10),c["\u0275\u0275listener"]("click",(function(){return t.changeViewType("stock")}))("ngModelChange",(function(e){return t.viewType=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](13," Expand Stock Item "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"span"),c["\u0275\u0275elementStart"](15,"input",11),c["\u0275\u0275listener"]("click",(function(){return t.changeViewType("all")}))("ngModelChange",(function(e){return t.viewType=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](16," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](17,io,44,10,"div",12),c["\u0275\u0275elementStart"](18,"div",13),c["\u0275\u0275elementStart"](19,"div",14),c["\u0275\u0275elementStart"](20,"div",15),c["\u0275\u0275elementStart"](21,"div",16),c["\u0275\u0275text"](22,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",16),c["\u0275\u0275text"](24,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",16),c["\u0275\u0275text"](26,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",16),c["\u0275\u0275text"](28,"Branch"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",16),c["\u0275\u0275text"](30,"Ware House"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"div",16),c["\u0275\u0275text"](32,"Opening Qty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275text"](34,"Stock Received"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",16),c["\u0275\u0275text"](36,"Purchase"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",16),c["\u0275\u0275text"](38,"Sales"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"div",16),c["\u0275\u0275text"](40,"Issue/Transfer"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",16),c["\u0275\u0275text"](42,"Wastage"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"div",16),c["\u0275\u0275text"](44," Debit Note"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",16),c["\u0275\u0275text"](46,"Credit Note"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](47,"div",16),c["\u0275\u0275text"](48,"Net Available"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"div",16),c["\u0275\u0275text"](50,"Opening Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](51,"div",16),c["\u0275\u0275text"](52,"Closing Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"div",17),c["\u0275\u0275template"](54,yo,37,19,"div",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](55,Co,6,0,"div",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](56,_o,4,1,"div",20)),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.isModal),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngModel",t.viewType),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.viewType),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.viewType),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.isModal),c["\u0275\u0275advance"](37),c["\u0275\u0275property"]("ngForOf",t.summaryreport),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.isModal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,E.u,k.z,k.d,k.r,k.u,E.t,k.m,w.a,E.r],pipes:[E.g],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:6.25%;max-width:6.25%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:10px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:10px;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-sub-stocktype[_ngcontent-%COMP%]{background-color:#5d6e75;font-size:10px;color:#fff;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-stockitem[_ngcontent-%COMP%]{background:#7998a7}.x-data[_ngcontent-%COMP%]   .x-branch[_ngcontent-%COMP%], .x-data[_ngcontent-%COMP%]   .x-stockitem[_ngcontent-%COMP%]{color:#fff;font-size:10px;cursor:pointer}.x-data[_ngcontent-%COMP%]   .x-branch[_ngcontent-%COMP%]{background:#8daab8}.x-data[_ngcontent-%COMP%]   .x-warehouse[_ngcontent-%COMP%]{background:#dadfe6;color:#000;font-size:10px;cursor:pointer}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 298px);overflow:auto;width:100%}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:1px 0 -1rem auto;outline:none}"]}),e})();var Mo=n("7KAL");function Eo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function wo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function ko(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,Eo,2,2,"div",6),c["\u0275\u0275template"](2,wo,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function Po(e,t){if(1&e&&c["\u0275\u0275element"](0,"trading-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}const Oo=function(e){return{highlight:e}};function Io(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",9),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,Oo,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function Do(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ko,3,4,"div",2),c["\u0275\u0275template"](2,Po,1,6,"trading-tree",3),c["\u0275\u0275template"](3,Io,6,8,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function Vo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Do,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function Fo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function To(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function Bo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,Fo,2,2,"div",6),c["\u0275\u0275template"](2,To,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function Ao(e,t){if(1&e&&c["\u0275\u0275element"](0,"trading-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}function Lo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",9),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,Oo,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function Ro(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Bo,3,4,"div",2),c["\u0275\u0275template"](2,Ao,1,6,"trading-tree",3),c["\u0275\u0275template"](3,Lo,6,8,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function jo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",12),c["\u0275\u0275template"](2,Ro,4,3,"div",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("cdkVirtualForOf",e.data)}}function zo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Vo,2,1,"div",0),c["\u0275\u0275template"](2,jo,3,1,"div",0),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length<=50),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length>50)}}const No=function(e){return{display:e}};function Go(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",31),c["\u0275\u0275elementStart"](1,"div",20),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",21),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](6,No,t==o.assets.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function Yo(e,t){if(1&e&&c["\u0275\u0275element"](0,"trading-tree",32),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("action",o.openLedgerViewModel.bind(o))("data",t.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTreeasset==n||"sub"==o.isExpand)}}function Ho(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==n?n:-1})),c["\u0275\u0275template"](1,Go,6,8,"div",29),c["\u0275\u0275template"](2,Yo,1,4,"trading-tree",30),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e)}}function $o(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](1,"div",33),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",21),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](7,"trading-tree",32),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](10,No,n==o.liabilities.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,7,e.amount,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("action",o.openLedgerViewModel.bind(o))("data",e.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)}}function qo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",34),c["\u0275\u0275elementStart"](1,"div",35),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",36),c["\u0275\u0275elementStart"](4,"p",37),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.liabilities[e.liabilities.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.liabilities[e.liabilities.length-1].amount,"1.2-2"),"")}}function Ko(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",34),c["\u0275\u0275elementStart"](1,"div",35),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",36),c["\u0275\u0275elementStart"](4,"p",37),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.assets[e.assets.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.assets[e.assets.length-1].amount,"1.2-2"),"")}}function Uo(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",38),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",39),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",40),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.balanceData[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.balanceData[e.f2Date])}}const Wo="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:0}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;color:#fff;font-weight:700;padding:10px}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;color:#fff}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#bfcfd9!important}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:auto;width:100%}";let Qo=(()=>{class e{constructor(e,t,n,o){this.common=e,this.modalService=t,this.user=n,this.accountService=o,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10]}lastClickHandler(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}ngAfterViewInit(){console.log("--------,",this.active)}ngOnChanges(e){}clickHandler(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}doubleClickHandler(e,t){e.stopPropagation(),this.action(t)}keyHandler(e){e.stopPropagation();const t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trading-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,zo,3,2,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},directives:[E.u,E.t,e,E.r,Mo.e,Mo.a,Mo.d],pipes:[E.g],styles:[Wo],changeDetection:0}),e})(),Jo=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.cdr=r,this.modalService=l,this.sizeIndex=0,this.selectedName="",this.balanceData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.balanceSheetData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.balanceData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.balanceData.enddate,this.setFoucus("startdate"),this.common.currentPage="Trading Account"}ngOnInit(){}getBalanceSheet(){this.balanceData.startdate=this.accountService.fromdate,this.balanceData.enddate=this.accountService.todate;let e={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate};this.common.loading++,this.api.post("Company/GetTradingData",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.balanceSheetData=e.data,this.generalizeData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}changeViewType(){this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((e,t)=>this.active.liabilities.mainGroup.push("mainGroup"+t+0)),this.assets.forEach((e,t)=>this.active.asset.mainGroup.push("mainGroup"+t+0))):"all"==this.viewType&&(this.liabilities.forEach((e,t)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.liabilities.subGroup.push("subGroup"+t+n))}),this.assets.forEach((e,t)=>{this.active.asset.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.asset.subGroup.push("subGroup"+t+n))}))}generalizeData(){let e=Ut.groupBy(this.balanceSheetData,"y_is_income"),t=e[0],n=e[1];this.assets=[],this.liabilities=[];for(let o=0;o<t.length;o++){let e=t[o],n=[];e.y_path&&(n=e.y_path.split("--\x3e")),e.labels=n.splice(1,n.length);let a=this.assets.findIndex(e=>e.name===n[0]);-1===a?this.assets.push({name:n[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.assets[a].amount+=parseFloat(e.y_amount),this.assets[a].data.push(e))}this.assets.map(e=>0!=e.amount?e.data=this.findChilds(e.data):""),console.log("assets",this.assets);for(let o=0;o<n.length;o++){let e=n[o],t=[];e.y_path&&(t=e.y_path.split("--\x3e")),e.labels=t.splice(1,t.length);let a=this.liabilities.findIndex(e=>e.name===t[0]);-1===a?this.liabilities.push({name:t[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.liabilities[a].amount+=parseFloat(e.y_amount),this.liabilities[a].data.push(e))}this.liabilities.map(e=>0!=e.amount?e.data=this.findChilds(e.data):""),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],amount:o.y_ledger_name?parseFloat(o.y_amount):0}):(t[i].amount+=o.y_ledger_name?parseFloat(o.y_amount):0,o.y_ledger_name&&t[i].data.push(o))}if(t.length)return t.map(e=>({name:e.name,data:this.findChilds(e.data),amount:e.amount}));{let t=[],n=Ut.groupBy(e,"y_ledger_name");for(let e in n)if(n[e].length>1&&e){let o={ledgerName:e,ledgerdata:n[e],amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}else if(e){let o={ledgerName:e,ledgerdata:n[e],amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}return t}}formattData(){let e=Ut.groupBy(this.balanceSheetData,"y_is_income"),t=Ut.groupBy(e[0],"y_groupname"),n=Ut.groupBy(e[1],"y_groupname");Ut.groupBy(e[0],"y_subgroupname"),Ut.groupBy(e[1],"y_subgroupname"),console.log("A:",e),console.log("B:",t),console.log("C:",n),this.liabilities=[];for(let o in t){let e=0;t[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.liabilities.push({name:o,amount:e,balanceSheets:t[o].filter(e=>e.y_ledger_name)})}this.assets=[];for(let o in n){let e=0;n[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.assets.push({name:o,amount:e,balanceSheets:n[o].filter(e=>e.y_ledger_name)})}console.log("first Section:",this.liabilities),console.log("last Section:",this.assets),this.liabilities.map(e=>{let t=Ut.groupBy(e.balanceSheets,"y_subgroupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,balanceSheets:t[n],total:o})}),delete e.balanceSheets}),this.assets.map(e=>{let t=Ut.groupBy(e.balanceSheets,"y_subgroupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,balanceSheets:t[n],total:o}),console.log(t[n],o)}),delete e.balanceSheets}),this.changeViewType()}handleExpandation(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}filterData(e,t){return e.filter(e=>e.y_is_assets===t)}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.balanceData.startdate=this.common.handleDateOnEnterNew(this.balanceData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.balanceData.enddate=this.common.handleDateOnEnterNew(this.balanceData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}RowSelected(e){console.log("data of u",e),this.selectedName=e}singleFormatCsvData(){let e=[];e.push(Object.assign({liability:"Particulars",liabilityAmount:"Amount"})),this.assets.forEach(t=>{e.push({liability:t.name,liabilityAmount:t.amount})});let t=[];t.push(Object.assign({asset:"Particulars",assetAmount:"Amount"})),this.liabilities.forEach(e=>{t.push({asset:e.name,assetAmount:e.amount})});let n=[];for(let o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),console.log("Merged:",n),this.csvService.jsonToExcel(n)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.balanceData[o].includes("-"))t=this.balanceData[o].split("-");else{if(!this.balanceData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.balanceData[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.balanceData[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}openLedgerViewModel(e){console.log("ledger id 00000",e.ledgerdata[0]),e.ledgerdata[0].y_path.includes("Opening Stock")||e.ledgerdata[0].y_path.includes("Closing Stock")?(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerdata[0].y_ledgerid,sizeIndex:0,isModal:1},this.modalService.open(So,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})):(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerdata[0].y_ledgerid,vouchertype:null==e.ledgerdata[0].y_type_id?0:e.ledgerdata[0].y_type_id,ledgername:e.ledgerdata[0].y_ledger_name},this.modalService.open(Jn.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})),this.common.currentPage="Trading Account"}csvFunction(){if("main"==this.isExpand)this.singleFormatCsvData();else{let e=[],t=[],n=[];e.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),t.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),this.assets.forEach(t=>{e.push({particular:t.name,openingamount:0==t.amount?"":t.amount}),e.push(...this.generateCSVData(t.data,"  "))}),this.liabilities.forEach(e=>{t.push({particular:e.name,openingamount:0==e.amount?"":e.amount}),t.push(...this.generateCSVData(e.data,"  "))});for(let o=0;o<e.length;o++)n.push({libilities:e[o].particular,Amount:e[o].openingamount});for(let o=0;o<t.length;o++)o<n.length?(n[o].asstes=t[o].particular,n[o]["asstes amount"]=t[o].openingamount):n.push({libilities:"","libilities Amount":"",asstes:t[o].particular,"asstes amount":t[o].openingamount});this.csvService.jsonToExcel(n)}}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,openingamount:a.amount}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:t+a.ledgerName,openingamount:a.amount})}return n}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trading"]],decls:52,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle",4,"ngIf"],["labels","",3,"action","data","isExpandAll","active",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle"],["labels","",3,"action","data","isExpandAll","active"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275elementStart"](4,"input",3),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](5," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",4),c["\u0275\u0275elementStart"](7,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](8," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),c["\u0275\u0275element"](10,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",8),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](12,"i",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",10),c["\u0275\u0275elementStart"](14,"div",11),c["\u0275\u0275elementStart"](15,"div",12),c["\u0275\u0275elementStart"](16,"label",13),c["\u0275\u0275text"](17,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",11),c["\u0275\u0275elementStart"](20,"div",12),c["\u0275\u0275elementStart"](21,"label",13),c["\u0275\u0275text"](22,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",11),c["\u0275\u0275elementStart"](25,"div",12),c["\u0275\u0275elementStart"](26,"button",16),c["\u0275\u0275listener"]("click",(function(){return t.getBalanceSheet()})),c["\u0275\u0275text"](27,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div"),c["\u0275\u0275elementStart"](29,"div",17),c["\u0275\u0275elementStart"](30,"div",18),c["\u0275\u0275elementStart"](31,"div",19),c["\u0275\u0275elementStart"](32,"div",20),c["\u0275\u0275text"](33,"Particulars"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",21),c["\u0275\u0275text"](35,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",22),c["\u0275\u0275template"](37,Ho,3,2,"div",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",18),c["\u0275\u0275elementStart"](39,"div",19),c["\u0275\u0275elementStart"](40,"div",20),c["\u0275\u0275text"](41,"Particulars"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"div",21),c["\u0275\u0275text"](43,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",22),c["\u0275\u0275template"](45,$o,8,12,"div",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",10),c["\u0275\u0275elementStart"](47,"div",24),c["\u0275\u0275template"](48,qo,7,5,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"div",26),c["\u0275\u0275template"](50,Ko,7,5,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](51,Uo,4,1,"div",27)),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",t.assets),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngForOf",t.liabilities),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.liabilities.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.assets.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.t,E.u,E.x,Qo],pipes:[E.g],styles:[Wo],changeDetection:0}),e})();function Xo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function Zo(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function ea(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,Xo,2,2,"div",6),c["\u0275\u0275template"](2,Zo,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function ta(e,t){if(1&e&&c["\u0275\u0275element"](0,"balance-sheet-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}const na=function(e){return{highlight:e}};function oa(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",9),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,na,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function aa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ea,3,4,"div",2),c["\u0275\u0275template"](2,ta,1,6,"balance-sheet-tree",3),c["\u0275\u0275template"](3,oa,6,8,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function ia(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,aa,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function ra(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function la(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function sa(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,ra,2,2,"div",6),c["\u0275\u0275template"](2,la,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function ca(e,t){if(1&e&&c["\u0275\u0275element"](0,"balance-sheet-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}function da(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",9),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,na,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function ma(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,sa,3,4,"div",2),c["\u0275\u0275template"](2,ca,1,6,"balance-sheet-tree",3),c["\u0275\u0275template"](3,da,6,8,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function ha(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).search=t}))("click",(function(t){return c["\u0275\u0275restoreView"](e),t.stopPropagation()}))("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).searchValues()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",13),c["\u0275\u0275template"](4,ma,4,3,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",e.search),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("cdkVirtualForOf",e.searchedData)}}function pa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ia,2,1,"div",0),c["\u0275\u0275template"](2,ha,5,2,"div",0),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length<=50),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length>50)}}function ga(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",26),c["\u0275\u0275elementStart"](1,"h4",27),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"i",28),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().activeModal.dismiss()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.currentPage)}}function ua(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",20),c["\u0275\u0275elementStart"](1,"div",29),c["\u0275\u0275elementStart"](2,"div",30),c["\u0275\u0275elementStart"](3,"label",31),c["\u0275\u0275text"](4,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"input",32),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().accountService.fromdate=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",29),c["\u0275\u0275elementStart"](7,"div",30),c["\u0275\u0275elementStart"](8,"label",31),c["\u0275\u0275text"](9,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"input",33),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().accountService.todate=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",29),c["\u0275\u0275elementStart"](12,"div",30),c["\u0275\u0275elementStart"](13,"button",34),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().getBalanceSheet()})),c["\u0275\u0275text"](14," Submit "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.accountService.todate)}}const ba=function(e){return{display:e}};function va(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",38),c["\u0275\u0275elementStart"](1,"div",16),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",17),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](6,ba,t==o.assets.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function xa(e,t){if(1&e&&c["\u0275\u0275element"](0,"trading-tree",39),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("action",o.openLedgerViewModel.bind(o))("data",t.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTreeasset==n||"sub"==o.isExpand)}}function fa(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==n?n:-1})),c["\u0275\u0275template"](1,va,6,8,"div",36),c["\u0275\u0275template"](2,xa,1,4,"trading-tree",37),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e)}}function ya(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](1,"div",40),c["\u0275\u0275elementStart"](2,"div",16),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",17),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](7,"profitloss-tree",39),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](10,ba,n==o.liabilities.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,7,e.amount,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("action",o.openLedgerViewModel.bind(o))("data",e.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)}}function Ca(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",41),c["\u0275\u0275elementStart"](1,"div",42),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",43),c["\u0275\u0275elementStart"](4,"p",44),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.liabilities[e.liabilities.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.liabilities[e.liabilities.length-1].amount,"1.2-2"),"")}}function _a(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",41),c["\u0275\u0275elementStart"](1,"div",42),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",43),c["\u0275\u0275elementStart"](4,"p",44),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.assets[e.assets.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.assets[e.assets.length-1].amount,"1.2-2"),"")}}function Sa(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",45),c["\u0275\u0275elementStart"](1,"div",46),c["\u0275\u0275element"](2,"div",47),c["\u0275\u0275elementStart"](3,"div",48),c["\u0275\u0275elementStart"](4,"button",49),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().activeModal.dismiss()})),c["\u0275\u0275text"](5,"Cancel "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Ma(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",50),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",51),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",52),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.plData[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.plData[e.f2Date])}}const Ea="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;font-weight:700;color:#fff;padding:10px}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.selected[_ngcontent-%COMP%]{background-color:#576c77}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;color:#fff}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#b7c7d2!important}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.close[_ngcontent-%COMP%]{background:transparent;color:#fff!important;opacity:1;padding:10px 20px;margin:1px 0 -1rem auto;outline:none}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.jrx-dtbody[_ngcontent-%COMP%]{max-height:calc(100vh - 247px);overflow:auto;width:100%}";let wa=(()=>{class e{constructor(e,t,n,o,a){this.common=e,this.modalService=t,this.user=n,this.cdr=o,this.accountService=a,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10],this.search="",this.searchedData=[]}ngOnChanges(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}lastClickHandler(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}ngAfterViewInit(){console.log("--------,",this.active)}clickHandler(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}doubleClickHandler(e,t){e.stopPropagation(),this.action(t)}keyHandler(e){e.stopPropagation();const t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}searchValues(){this.searchedData=this.data.filter(e=>e.name?e.name.toLowerCase().includes(this.search.toLowerCase()):!!e.ledgerName&&e.ledgerName.toLowerCase().includes(this.search.toLowerCase())),this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["profitloss-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,pa,3,2,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},styles:[Ea],changeDetection:0}),e})(),ka=(()=>{class e{constructor(e,t,n,o,a,i,r,l,s){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.cdr=r,this.activeModal=l,this.modalService=s,this.isModal=!1,this.selectedName="",this.plData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.profitLossData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.topHeadExp=0,this.topHeadIncome=0,this.indirectExp=0,this.directIncome=0,this.grossLoss=0,this.grossProfit=0,this.netProfit=0,this.netLoss=0,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.sizeIndex=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.plData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.plData.enddate,this.getBranchList(),this.setFoucus("startdate"),this.common.currentPage="Profit & Loss A/C",this.setFoucus("startdate"),this.common.params&&this.common.params.startdate&&(this.accountService.fromdate=this.common.params.startdate,this.accountService.todate=this.common.params.enddate,this.getBalanceSheet(),this.common.params.isModal&&(this.isModal=!0),this.common.params=null,this.common.handleModalSize("class","modal-lg","1200","px",this.sizeIndex))}ngOnInit(){}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBalanceSheet(){this.plData.startdate=this.accountService.fromdate,this.plData.enddate=this.accountService.todate,console.log("Balance Sheet:",this.plData);let e={startdate:this.plData.startdate,enddate:this.plData.enddate};this.common.loading++,this.api.post("Company/GetProfitLossData",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.profitLossData=e.data,this.generalizeData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}generalizeData(){let e=Ut.groupBy(this.profitLossData,"y_is_income"),t=e[0],n=e[1];this.assets=[],this.liabilities=[];for(let o=0;o<t.length;o++){let e=t[o],n=[];e.y_path&&(n=e.y_path.split("--\x3e")),e.labels=n.splice(1,n.length);let a=this.assets.findIndex(e=>e.name===n[0]);-1===a?this.assets.push({name:n[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.assets[a].amount+=parseFloat(e.y_amount),this.assets[a].data.push(e))}this.assets.map(e=>0!=e.amount?e.data=this.findChilds(e.data):""),console.log("assets",this.assets);for(let o=0;o<n.length;o++){let e=n[o],t=[];e.y_path&&(t=e.y_path.split("--\x3e")),e.labels=t.splice(1,t.length);let a=this.liabilities.findIndex(e=>e.name===t[0]);-1===a?this.liabilities.push({name:t[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.liabilities[a].amount+=parseFloat(e.y_amount),this.liabilities[a].data.push(e))}this.liabilities.map(e=>0!=e.amount?e.data=this.findChilds(e.data):""),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],amount:o.y_ledger_name?parseFloat(o.y_amount):0}):(t[i].amount+=o.y_ledger_name?parseFloat(o.y_amount):0,o.y_ledger_name&&t[i].data.push(o))}if(t.length)return t.map(e=>({name:e.name,data:this.findChilds(e.data),amount:e.amount}));{let t=[],n=Ut.groupBy(e,"y_ledger_name");for(let e in n)if(n[e].length>1&&e){let o={ledgerName:e,ledgerdata:n[e],amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}else if(e){let o={ledgerName:e,ledgerdata:n[e],amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}return t}}formattData(){let e=Ut.groupBy(this.profitLossData,"y_is_income"),t=Ut.groupBy(e[0],"y_groupname"),n=Ut.groupBy(e[1],"y_groupname");Ut.groupBy(e[0],"y_subgroupname"),Ut.groupBy(e[1],"y_subgroupname"),this.topHeadExp=0,this.topHeadIncome=0,this.grossLoss=0,this.grossProfit=0,this.netProfit=0,this.netLoss=0,console.log("A:",e),console.log("B:",t),console.log("C:",n),this.liabilities=[];for(let o in t){let e=0;t[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.liabilities.push({name:o,amount:e,profitLossData:t[o].filter(e=>e.y_ledger_name)})}this.assets=[];for(let o in n){let e=0;n[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.assets.push({name:o,amount:e,profitLossData:n[o].filter(e=>e.y_ledger_name)})}console.log("first Section:",this.liabilities),console.log("last Section:",this.assets),this.liabilities.map(e=>{let t=Ut.groupBy(e.profitLossData,"y_subgroupname");e.subGroups=[],(e.name.toLowerCase().includes("opening")||e.name.toLowerCase().includes("purchases")||e.name.toLowerCase().includes("direct expenses"))&&!e.name.toLowerCase().includes("indirect")&&(this.topHeadExp+=e.amount),(e.name.toLowerCase().includes("sales")||e.name.toLowerCase().includes("income")||e.name.toLowerCase().includes("closing"))&&!e.name.toLowerCase().includes("indirect incomes")&&(this.topHeadIncome+=e.amount),e.name.toLowerCase().includes("indirect expenses")&&(this.indirectExp=e.amount,console.log("first indirect exp",e.amount)),e.name.toLowerCase().includes("indirect incomes")&&(this.directIncome=e.amount),Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,profitLossData:t[n],total:o})}),delete e.profitLossData}),console.log("first Section------:",this.liabilities),this.assets.map(e=>{let t=Ut.groupBy(e.profitLossData,"y_subgroupname");e.subGroups=[],(e.name.toLowerCase().includes("opening")||e.name.toLowerCase().includes("purchases")||e.name.toLowerCase().includes("direct expenses"))&&!e.name.toLowerCase().includes("indirect")&&(this.topHeadExp+=e.amount),(e.name.toLowerCase().includes("sales")||e.name.toLowerCase().includes("income")||e.name.toLowerCase().includes("closing"))&&!e.name.toLowerCase().includes("indirect incomes")&&(this.topHeadIncome+=e.amount),e.name.toLowerCase().includes("indirect expenses")&&(this.indirectExp=e.amount,console.log("second indirect exp",e)),e.name.toLowerCase().includes("indirect incomes")&&(this.directIncome=e.amount),Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,profitLossData:t[n],total:o}),console.log(t[n],o)}),delete e.profitLossData}),this.topHeadIncome>=this.topHeadExp?this.grossProfit=this.topHeadIncome-this.topHeadExp:this.grossLoss=this.topHeadExp-this.topHeadIncome,this.grossProfit+this.directIncome>=this.grossLoss+this.indirectExp?this.netProfit=this.grossProfit+this.directIncome-(this.grossLoss+this.indirectExp):this.netLoss=this.grossLoss+this.indirectExp-(this.grossProfit+this.directIncome),this.changeViewType(),console.log("trip head exp",this.topHeadExp,"topHeadIncome",this.topHeadIncome,"indirectExp",this.indirectExp)}filterData(e,t){return e.filterfilter(e=>e.y_is_assets===t)}handleExpandation(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.plData.startdate=this.common.handleDateOnEnterNew(this.plData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.plData.enddate=this.common.handleDateOnEnterNew(this.plData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.plData[o].includes("-"))t=this.plData[o].split("-");else{if(!this.plData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.plData[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.plData[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}RowSelected(e){console.log("data of u",e),this.selectedName=e}openLedgerViewModel(e){console.log("ledger id 00000",e),e.ledgerdata[0].y_path.includes("Opening Stock")||e.ledgerdata[0].y_path.includes("Closing Stock")?(this.common.params={startdate:this.plData.startdate,enddate:this.plData.enddate,ledger:e.ledgerdata[0].y_ledgerid,sizeIndex:this.sizeIndex+1,isModal:1},this.modalService.open(So,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})):e.ledgerdata[0].y_path.includes("Net Profit")||(this.common.params={startdate:this.plData.startdate,enddate:this.plData.enddate,ledger:e.ledgerdata[0].y_ledgerid,vouchertype:null==e.ledgerdata[0].y_type_id?0:e.ledgerdata[0].y_type_id,ledgername:e.ledgerdata[0].y_ledger_name,sizeIndex:this.sizeIndex+1},this.modalService.open(Jn.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})),this.common.currentPage="Profit & Loss A/C"}singleFormatCsvData(){let e=[];e.push(Object.assign({liability:"Particulars",liabilityAmount:"Amount"})),this.assets.forEach(t=>{e.push({liability:t.name,liabilityAmount:t.amount})});let t=[];t.push(Object.assign({asset:"Particulars",assetAmount:"Amount"})),this.liabilities.forEach(e=>{t.push({asset:e.name,assetAmount:e.amount})});let n=[];for(let o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),console.log("Merged:",n),this.csvService.jsonToExcel(n)}changeViewType(){this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((e,t)=>this.active.liabilities.mainGroup.push("mainGroup"+t+0)),this.assets.forEach((e,t)=>this.active.asset.mainGroup.push("mainGroup"+t+0))):"all"==this.viewType&&(this.liabilities.forEach((e,t)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.liabilities.subGroup.push("subGroup"+t+n))}),this.assets.forEach((e,t)=>{this.active.asset.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.asset.subGroup.push("subGroup"+t+n))}))}csvFunction(){if("main"==this.isExpand)this.singleFormatCsvData();else{let e=[],t=[],n=[];e.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),t.push(Object.assign({particular:"Perticulars",openingamount:"Amount"})),this.assets.forEach(t=>{e.push({particular:t.name,openingamount:0==t.amount?"":t.amount}),e.push(...this.generateCSVData(t.data,"  "))}),this.liabilities.forEach(e=>{t.push({particular:e.name,openingamount:0==e.amount?"":e.amount}),t.push(...this.generateCSVData(e.data,"  "))});for(let o=0;o<e.length;o++)n.push({libilities:e[o].particular,Amount:e[o].openingamount});for(let o=0;o<t.length;o++)o<n.length?(n[o].asstes=t[o].particular,n[o]["asstes amount"]=t[o].openingamount):n.push({libilities:"","libilities Amount":"",asstes:t[o].particular,"asstes amount":t[o].openingamount});this.csvService.jsonToExcel(n)}}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,openingamount:a.amount}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:t+a.ledgerName,openingamount:a.amount})}return n}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["profitloss"]],decls:41,vars:10,consts:[[2,"border","0px"],[3,"keydown"],["class","row","style","height:40px;background-color:#263238;margin:0!important",4,"ngIf"],[1,""],[2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],["class","row",4,"ngIf"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row",2,"height","40px","background-color","#263238","margin","0!important"],[2,"color","white","padding","6px"],[1,"fa","fa-times","close",3,"click"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","placeholder","Select Date","name","account-enddate","id","enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle",4,"ngIf"],["labels","",3,"action","data","isExpandAll","active",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle"],["labels","",3,"action","data","isExpandAll","active"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-11"],[1,"col-1","text-right"],["type","button","outline","","id","cancel",1,"btn","btn-primary","tjr-button",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275template"](2,ga,4,1,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"span"),c["\u0275\u0275elementStart"](6,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](7," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"span",6),c["\u0275\u0275elementStart"](9,"input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](10," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",8),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),c["\u0275\u0275element"](12,"i",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"span",10),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](14,"i",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](15,ua,15,2,"div",12),c["\u0275\u0275elementStart"](16,"div"),c["\u0275\u0275elementStart"](17,"div",13),c["\u0275\u0275elementStart"](18,"div",14),c["\u0275\u0275elementStart"](19,"div",15),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275text"](21,"Particulars"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",17),c["\u0275\u0275text"](23,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",18),c["\u0275\u0275template"](25,fa,3,2,"div",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",14),c["\u0275\u0275elementStart"](27,"div",15),c["\u0275\u0275elementStart"](28,"div",16),c["\u0275\u0275text"](29,"Particulars"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",17),c["\u0275\u0275text"](31,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",18),c["\u0275\u0275template"](33,ya,8,12,"div",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",20),c["\u0275\u0275elementStart"](35,"div",21),c["\u0275\u0275template"](36,Ca,7,5,"div",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",23),c["\u0275\u0275template"](38,_a,7,5,"div",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](39,Sa,6,0,"div",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](40,Ma,4,1,"div",25)),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.isModal),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",!t.isModal),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngForOf",t.assets),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngForOf",t.liabilities),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.liabilities.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.assets.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.isModal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,E.u,k.z,k.d,k.r,k.u,E.t,k.m,E.x,Qo,wa],pipes:[E.g],styles:[Ea],changeDetection:0}),e})();function Pa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275element"](1,"span",9),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",t.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function Oa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function Ia(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,Pa,3,2,"div",6),c["\u0275\u0275template"](2,Oa,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function Da(e,t){if(1&e&&c["\u0275\u0275element"](0,"balance-sheet-tree",11),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels+"\xa0\xa0\xa0\xa0")}}const Va=function(e){return{highlight:e}};function Fa(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",12),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275element"](2,"span",9),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",10),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](7,Va,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",o.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,4,n.amount,"1.2-2"))}}function Ta(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Ia,3,4,"div",2),c["\u0275\u0275template"](2,Da,1,6,"balance-sheet-tree",3),c["\u0275\u0275template"](3,Fa,7,9,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function Ba(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Ta,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function Aa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275element"](1,"span",9),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",t.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function La(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.amount,"1.2-2")," ")}}function Ra(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275template"](1,Aa,3,2,"div",6),c["\u0275\u0275template"](2,La,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function ja(e,t){if(1&e&&c["\u0275\u0275element"](0,"balance-sheet-tree",11),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels+"\xa0\xa0\xa0\xa0")}}function za(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",12),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275element"](2,"span",9),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",10),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](7,Va,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",o.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](n.ledgerName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,4,n.amount,"1.2-2"))}}function Na(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Ra,3,4,"div",2),c["\u0275\u0275template"](2,ja,1,6,"balance-sheet-tree",3),c["\u0275\u0275template"](3,za,7,9,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function Ga(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).search=t}))("click",(function(t){return c["\u0275\u0275restoreView"](e),t.stopPropagation()}))("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).searchValues()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",14),c["\u0275\u0275template"](4,Na,4,3,"div",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",e.search),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("cdkVirtualForOf",e.searchedData)}}function Ya(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Ba,2,1,"div",0),c["\u0275\u0275template"](2,Ga,5,2,"div",0),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length<=50),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length>50)}}const Ha=function(e){return{display:e}};function $a(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",32),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"]();return n.activeTree=n.activeTree!==t?t:-1})),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",22),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](6,Ha,t==o.assets.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,3,n.amount,"1.2-2"))}}function qa(e,t){if(1&e&&c["\u0275\u0275element"](0,"balance-sheet-tree",33),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("action",o.opendaybookmodel.bind(o))("data",t.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTreeasset==n||"sub"==o.isExpand)("labels","\xa0")}}function Ka(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",29),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTreeasset=o.activeTreeasset!==n?n:-1})),c["\u0275\u0275template"](1,$a,6,8,"div",30),c["\u0275\u0275template"](2,qa,1,5,"balance-sheet-tree",31),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.assets.length-1>e)}}function Ua(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",29),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](1,"div",34),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",22),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](7,"balance-sheet-tree",33),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngStyle",c["\u0275\u0275pureFunction1"](11,Ha,n==o.liabilities.length-1?"none":"")),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,8,e.amount,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("action",o.opendaybookmodel.bind(o))("data",e.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)("labels","\xa0")}}function Wa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",35),c["\u0275\u0275elementStart"](1,"div",36),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",37),c["\u0275\u0275elementStart"](4,"p",38),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.liabilities[e.liabilities.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.liabilities[e.liabilities.length-1].amount,"1.2-2"),"")}}function Qa(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",35),c["\u0275\u0275elementStart"](1,"div",36),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",37),c["\u0275\u0275elementStart"](4,"p",38),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.assets[e.assets.length-1].name),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](6,2,e.assets[e.assets.length-1].amount,"1.2-2"),"")}}function Ja(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",39),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",40),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",41),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.balanceData[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.balanceData[e.f2Date])}}const Xa="button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #dab2b2;color:#fff}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{color:#000!important;background-color:#b7c7d2!important}.anotherlast[_ngcontent-%COMP%]{background-color:#c7c7d2!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.heading[_ngcontent-%COMP%]{padding:6px 0!important}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:auto;width:100%}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #dcdada}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.tanding_total[_ngcontent-%COMP%]{padding:6px 15px}.lastrowcolor[_ngcontent-%COMP%]{color:#000}";let Za=(()=>{class e{constructor(e,t,n,o,a){this.common=e,this.modalService=t,this.user=n,this.cdr=o,this.accountService=a,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.search="",this.searchedData=[]}ngOnChanges(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}lastClickHandler(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}clickHandler(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}doubleClickHandler(e,t){e.stopPropagation(),this.action(t)}keyHandler(e){e.stopPropagation();const t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}searchValues(){this.searchedData=this.data.filter(e=>e.name?e.name.toLowerCase().includes(this.search.toLowerCase()):!!e.ledgerName&&e.ledgerName.toLowerCase().includes(this.search.toLowerCase())),this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["balance-sheet-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],["class","col-8",4,"ngIf"],["class","col-4 text-right","style","text-align:right;",4,"ngIf"],[1,"col-8"],[3,"innerHTML"],[1,"col-4","text-right",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","240px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,Ya,3,2,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},directives:[E.u,E.t,e,E.r,k.d,k.r,k.u,Mo.e,Mo.a,Mo.d],pipes:[E.g],styles:[Xa],changeDetection:0}),e})(),ei=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.cdr=r,this.modalService=l,this.selectedName="",this.balanceData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.balanceSheetData=[],this.activeId="",this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="main",this.assettottalamount=0,this.libilitytottalamount=0,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.balanceData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.balanceData.enddate,this.setFoucus("startdate"),this.common.currentPage="Balance Sheet"}ngOnInit(){}getBalanceSheet(){this.balanceData.startdate=this.accountService.fromdate,this.balanceData.enddate=this.accountService.todate;let e={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate};this.common.loading++,this.api.post("Company/GetBalanceData",e).subscribe(e=>{this.common.loading--,this.balanceSheetData=e.data,this.generalizeData()},e=>{this.common.loading--,this.common.showError()})}generalizeData(){this.assettottalamount=0,this.libilitytottalamount=0;let e=Ut.groupBy(this.balanceSheetData,"y_is_assets"),t=e[0],n=e[1];this.assets=[],this.liabilities=[];for(let o=0;o<t.length;o++){let e=t[o],n=[];e.y_path&&(n=e.y_path.split("--\x3e")),e.labels=n.splice(1,n.length);let a=this.assets.findIndex(e=>e.name===n[0]);-1===a?this.assets.push({name:n[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.assets[a].amount+=parseFloat(e.y_amount),this.assets[a].data.push(e))}console.log("assets",this.assets),this.assets.map(e=>e.data=this.findChilds(e.data)),console.log("assets",this.assets);for(let o=0;o<n.length;o++){let e=n[o],t=[];e.y_path&&(t=e.y_path.split("--\x3e")),e.labels=t.splice(1,t.length);let a=this.liabilities.findIndex(e=>e.name===t[0]);-1===a?this.liabilities.push({name:t[0]||e.y_groupname,data:[e],amount:parseFloat(e.y_amount)}):(this.liabilities[a].amount+=parseFloat(e.y_amount),this.liabilities[a].data.push(e))}this.liabilities.map(e=>e.data=this.findChilds(e.data)),console.log("liabilities",this.liabilities),this.cdr.detectChanges()}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],amount:o.y_ledger_name?parseFloat(o.y_amount):0}):(t[i].amount+=o.y_ledger_name?parseFloat(o.y_amount):0,o.y_ledger_name&&t[i].data.push(o))}else t.push({ledgerName:e[n].y_ledger_name,ledgerdata:e[n],data:[],amount:e[n].y_amount,ledgerid:e[n].y_ledgerid,colorflag:1});if(t.length)return t.map(e=>e.data.length?{name:e.name,data:this.findChilds(e.data),amount:e.amount}:e).sort((e,t)=>e.length>t.length?1:-1);{let t=[],n=Ut.groupBy(e,"y_ledger_name");for(let e in n)if(n[e].length>1&&e){let o={ledgerName:e,ledgerdata:n[e],amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}else if(e){let o={ledgerName:e,amount:n[e].reduce((e,t)=>e+parseFloat(t.y_amount),0)};t.push(o)}return t}}formattData(){let e=Ut.groupBy(this.balanceSheetData,"y_is_assets"),t=Ut.groupBy(e[0],"y_groupname"),n=Ut.groupBy(e[1],"y_groupname");this.liabilities=[];for(let o in t){let e=0;t[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.liabilities.push({name:o,amount:e,balanceSheets:t[o].filter(e=>e.y_ledger_name)})}this.assets=[];for(let o in n){let e=0;n[o].map(t=>{t.y_amount&&(e+=parseFloat(t.y_amount))}),this.assets.push({name:o,amount:e,balanceSheets:n[o].filter(e=>e.y_ledger_name)})}this.liabilities.map(e=>{let t=Ut.groupBy(e.balanceSheets,"y_sub_groupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,balanceSheets:t[n],total:o})}),delete e.balanceSheets}),this.assets.map(e=>{let t=Ut.groupBy(e.balanceSheets,"y_sub_groupname");e.subGroups=[],Object.keys(t).length&&Object.keys(t).forEach(n=>{let o=0;t[n].forEach(e=>{o+=parseFloat(e.y_amount)}),e.subGroups.push({name:n,balanceSheets:t[n],total:o})}),delete e.balanceSheets}),this.changeViewType()}filterData(e,t){return e.filter(e=>e.y_is_assets===t)}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"enter"==t&&this.showDateModal)return this.showDateModal=!1,this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.balanceData.startdate=this.common.handleDateOnEnterNew(this.balanceData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.balanceData.enddate=this.common.handleDateOnEnterNew(this.balanceData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.balanceData[o].includes("-"))t=this.balanceData[o].split("-");else{if(!this.balanceData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.balanceData[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,this.balanceData[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{document.getElementById(e).focus()},100)}opendaybookmodel(e){console.log("ledger id 00000",e,e.ledgerdata.y_path),e.ledgerdata.y_path.includes("Profit & Loss")?(this.common.params={startdate:this.accountService.fromdate,enddate:this.accountService.todate,isModal:!0},this.modalService.open(ka,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):(this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate,ledger:e.ledgerid,vouchertype:0,ledgername:e.ledgerName},this.modalService.open(Jn.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{})),this.common.currentPage="Balance Sheet"}RowSelected(e){this.selectedName=e}getProfitLoss(){this.common.params={startdate:this.balanceData.startdate,enddate:this.balanceData.enddate},this.modalService.open(ka,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}handleExpandation(e,t,n,o,a){e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}changeViewType(){this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((e,t)=>this.active.liabilities.mainGroup.push("mainGroup"+t+0)),this.assets.forEach((e,t)=>this.active.asset.mainGroup.push("mainGroup"+t+0))):"all"==this.viewType&&(this.liabilities.forEach((e,t)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.liabilities.subGroup.push("subGroup"+t+n))}),this.assets.forEach((e,t)=>{this.active.asset.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.asset.subGroup.push("subGroup"+t+n))}))}csvFunction(){if("main"==this.isExpand)this.singleFormatCsvData();else{let e=[],t=[],n=[];e.push(Object.assign({particular:"Liability",openingamount:"Amount"})),t.push(Object.assign({particular:"Asset",openingamount:"Amount"})),this.assets.forEach(t=>{e.push({particular:t.name,openingamount:0==t.amount?"":t.amount}),e.push(...this.generateCSVData(t.data,"  "))}),this.liabilities.forEach(e=>{t.push({particular:e.name,openingamount:0==e.amount?"":e.amount}),t.push(...this.generateCSVData(e.data,"  "))});for(let o=0;o<e.length;o++)n.push({libilities:e[o].particular,Amount:e[o].openingamount});for(let o=0;o<t.length;o++)o<n.length?(n[o].asstes=t[o].particular,n[o]["asstes amount"]=t[o].openingamount):n.push({libilities:"","libilities Amount":"",asstes:t[o].particular,"asstes amount":t[o].openingamount});this.csvService.jsonToExcel(n)}}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,openingamount:a.amount}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:t+a.ledgerName,openingamount:a.amount})}return n}singleFormatCsvData(){let e=[];e.push(Object.assign({liability:" Liability",liabilityAmount:"Amount"})),this.assets.forEach(t=>{e.push({liability:t.name,liabilityAmount:t.amount})});let t=[];t.push(Object.assign({asset:"Asset",assetAmount:"Amount"})),this.liabilities.forEach(e=>{t.push({asset:e.name,assetAmount:e.amount})});let n=[];for(let o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<e.length-1&&o<t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:""})):t[o]&&o<t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:""},t[o]));n.push(Object.assign({},e[e.length-1],t[t.length-1])),this.csvService.jsonToExcel(n)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["balancesheet"]],decls:52,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],["id","balance-sheet"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-8"],[1,"col-4","text-right"],[1,"jrx-dtbody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],["class","th-mini row m-0 pl-0 pr-0",3,"ngStyle","click",4,"ngIf"],[3,"action","data","isExpandAll","active","labels",4,"ngIf"],[1,"th-mini","row","m-0","pl-0","pr-0",3,"ngStyle","click"],[3,"action","data","isExpandAll","active","labels"],[1,"th-mini","row","m-0","pl-0","pr-0",2,"background","#184154",3,"ngStyle"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right"],[2,"margin","0px","width","100px","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275elementStart"](4,"input",3),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](5," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",4),c["\u0275\u0275elementStart"](7,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](8," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),c["\u0275\u0275element"](10,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",8),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](12,"i",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",10),c["\u0275\u0275elementStart"](14,"div",11),c["\u0275\u0275elementStart"](15,"div",12),c["\u0275\u0275elementStart"](16,"label",13),c["\u0275\u0275text"](17,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",11),c["\u0275\u0275elementStart"](20,"div",12),c["\u0275\u0275elementStart"](21,"label",13),c["\u0275\u0275text"](22,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",11),c["\u0275\u0275elementStart"](25,"div",12),c["\u0275\u0275elementStart"](26,"button",16),c["\u0275\u0275listener"]("click",(function(){return t.getBalanceSheet()})),c["\u0275\u0275text"](27,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",17),c["\u0275\u0275elementStart"](29,"div",18),c["\u0275\u0275elementStart"](30,"div",19),c["\u0275\u0275elementStart"](31,"div",20),c["\u0275\u0275elementStart"](32,"div",21),c["\u0275\u0275text"](33,"Liability"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",22),c["\u0275\u0275text"](35,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",23),c["\u0275\u0275template"](37,Ka,3,2,"div",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",19),c["\u0275\u0275elementStart"](39,"div",20),c["\u0275\u0275elementStart"](40,"div",21),c["\u0275\u0275text"](41,"Asset"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"div",22),c["\u0275\u0275text"](43,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",23),c["\u0275\u0275template"](45,Ua,8,13,"div",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",10),c["\u0275\u0275elementStart"](47,"div",25),c["\u0275\u0275template"](48,Wa,7,5,"div",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"div",27),c["\u0275\u0275template"](50,Qa,7,5,"div",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](51,Ja,4,1,"div",28)),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",t.assets),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngForOf",t.liabilities),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.liabilities.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.assets.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.t,E.u,E.x,Za],pipes:[E.g],styles:[Xa],changeDetection:0}),e})();const ti=function(e){return{highlight:e}};function ni(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",24),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,ti,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_stockitemtype),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_stockitemsubtype),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_stockitem),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.available_qty)}}function oi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",25),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",26),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",27),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.stockAvailable[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.stockAvailable[e.f2Date])}}let ai=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.user=n,this.stockAvailableData=[],this.stockAvailable={date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),stocktype:{name:"",id:0},stocksubtype:{name:" ",id:0},stockitem:{name:" ",id:0}},this.activeId="stocktype",this.autoSuggestion={data:[],targetId:"",display:""},this.selectedRow=-1,this.selectedName="",this.suggestions={stockTypeData:[],stockSubTypeData:[],stockItems:[],purchasestockItems:[],salesstockItems:[],discountLedgers:[],warehouses:[],invoiceTypes:[],list:[]},this.suggestionIndex=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.lastActiveId="",this.getStockType(),this.common.currentPage="Stock Available",this.setFoucus("stocktype")}ngOnInit(){}getStockType(){this.common.loading++,this.api.post("Stock/GetStocktype",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.stockTypeData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockSubType(e){let t={stocktype:e};this.common.loading++,this.api.post("Suggestion/GetSearchStockType",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.stockSubTypeData=e.data,this.autoSuggestion.data=this.suggestions.stockSubTypeData},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getStockItem(e){let t={stocksubtype:e};this.common.loading++,this.api.post("Suggestion/GetStockItemData",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.suggestions.stockItems=e.data,this.autoSuggestion.data=this.suggestions.stockItems},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),this.setAutoSuggestion(),"f2"==t&&!this.showDateModal&&this.activeId.includes("date"))return this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date=this.activeId,void(this.activedateid=this.lastActiveId);if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("stocktype")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("stocksubtype")):this.activeId.includes("stocksubtype")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("stockitem")):this.activeId.includes("stockitem")?(this.suggestions.list.length&&(this.selectSuggestion(this.suggestions.list[-1==this.suggestionIndex?0:this.suggestionIndex],this.activeId),this.suggestions.list=[],this.suggestionIndex=-1),this.setFoucus("date")):this.activeId.includes("date")&&(this.stockAvailable.date=this.common.handleDateOnEnterNew(this.stockAvailable.date),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"date"==this.activeId&&this.setFoucus("stockitem"),"stockitem"==this.activeId&&this.setFoucus("stocksubtype"),"stocksubtype"==this.activeId&&this.setFoucus("stocktype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("date"==this.activeId&&"backspace"!==t){if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else"backspace"!=t&&(this.allowBackspace=!1);(t.includes("arrowup")||t.includes("arrowdown"))&&this.stockAvailableData.length&&(console.log("-Jai rana---"),"arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.stockAvailableData.length-1&&this.selectedRow++)}}handleVoucherDateOnEnter(e){let t=[],n="-";if(this.stockAvailable.date.includes("-"))t=this.stockAvailable.date.split("-");else{if(!this.stockAvailable.date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.stockAvailable.date.split("/"),n="/"}let o=t[0];o=1==o.length?"0"+o:o;let a=t[1];a=1==a.length?"0"+a:a;let i=t[2];i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+n+a+n+i),this.stockAvailable.date=o+n+a+n+i}selectSuggestion(e,t){console.log("Suggestion on select: ",e),"stocktype"==this.activeId&&(this.stockAvailable.stocktype.name=e.name,this.stockAvailable.stocktype.id=e.id)}setFoucus(e,t=!0){console.log("Id: ",e),setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus(),this.setAutoSuggestion()},100)}onSelect(e,t){console.log("Suggestion: ",e),"stocktype"==t?(this.stockAvailable.stocktype.name=e.name,this.stockAvailable.stocktype.id=e.id,this.getStockSubType(this.stockAvailable.stocktype.id)):"stocksubtype"==t?(this.stockAvailable.stocksubtype.name=e.name,this.stockAvailable.stocksubtype.id=e.id,this.getStockItem(e.id)):"stockitem"==t&&(this.stockAvailable.stockitem.name=e.name,this.stockAvailable.stockitem.id=e.id)}handleArrowUpDown(e){const t=this.generateIDs();console.log("Key:",e,t,t.indexOf(this.activeId)),-1!=t.indexOf(this.activeId)&&("arrowdown"==e?this.suggestionIndex!=this.suggestions.list.length-1?this.suggestionIndex++:this.suggestionIndex=0:0!=this.suggestionIndex?this.suggestionIndex--:this.suggestionIndex=this.suggestions.list.length-1)}generateIDs(){return["stocktype","stocksubtype","stockitem"]}setAutoSuggestion(){let e=document.activeElement.id;if("stocktype"==e)this.autoSuggestion.data=this.suggestions.stockTypeData;else if("stocksubtype"==e)this.autoSuggestion.data=this.suggestions.stockSubTypeData;else{if(!e.includes("stockitem"))return this.autoSuggestion.data=[],this.autoSuggestion.display="",void(this.autoSuggestion.targetId="");this.autoSuggestion.data=this.suggestions.stockItems}this.autoSuggestion.display="name",this.autoSuggestion.targetId=e,console.log("Auto Suggestion: ",this.autoSuggestion)}dismiss(e){e&&this.getStockAvailable(this.stockAvailable)}getStockAvailable(e){const t={stocktypeid:e.stocktype.id,stocksubtypeid:e.stocksubtype.id,stockitemid:e.stockitem.id,date:e.date};console.log("params11: ",t),this.common.loading++,this.api.post("Stock/getStockAvailable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.stockAvailableData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}RowSelected(e){console.log("data of u",e),this.selectedName=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["stockavailable"]],decls:53,vars:9,consts:[[2,"border","0px","padding-top","25px"],[2,"min-height","450px",3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","stocktype","name","stocktype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stocksubtype","name","stocksubtype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","stockitem","name","stockitem",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","date","placeholder","Select Date","name","date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],[3,"data","targetId","display","select"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stocktype.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"label",10),c["\u0275\u0275text"](17,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stocksubtype.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",8),c["\u0275\u0275elementStart"](20,"div",9),c["\u0275\u0275elementStart"](21,"label",10),c["\u0275\u0275text"](22,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.stockitem.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",2),c["\u0275\u0275elementStart"](25,"div",14),c["\u0275\u0275elementStart"](26,"div",9),c["\u0275\u0275elementStart"](27,"label",10),c["\u0275\u0275text"](28,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.stockAvailable.date=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",14),c["\u0275\u0275elementStart"](31,"div",9),c["\u0275\u0275elementStart"](32,"button",16),c["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),c["\u0275\u0275text"](33,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",17),c["\u0275\u0275elementStart"](35,"div",18),c["\u0275\u0275elementStart"](36,"auto-suggetion-in-side",19),c["\u0275\u0275listener"]("select",(function(e){return t.onSelect(e,t.autoSuggestion.targetId)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"table",20),c["\u0275\u0275elementStart"](38,"thead",21),c["\u0275\u0275elementStart"](39,"tr"),c["\u0275\u0275elementStart"](40,"th"),c["\u0275\u0275text"](41,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"th"),c["\u0275\u0275text"](43,"Stock Item Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"th"),c["\u0275\u0275text"](45,"Stock Item Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"th"),c["\u0275\u0275text"](47,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](48,"th"),c["\u0275\u0275text"](49,"Quantity"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"tbody"),c["\u0275\u0275template"](51,ni,11,8,"tr",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](52,oi,4,1,"div",23)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.stockAvailable.stocktype.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.stockAvailable.stocksubtype.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.stockAvailable.stockitem.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.stockAvailable.date),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("data",t.autoSuggestion.data)("targetId",t.autoSuggestion.targetId)("display",t.autoSuggestion.display),c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("ngForOf",t.stockAvailableData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,w.a,E.t,E.u,E.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:18%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:18%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 314px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),e})();const ii=function(e){return{highlight:e}};function ri(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openwareHouseModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openwareHouseModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td",8),c["\u0275\u0275elementStart"](11,"a",9),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](12,"i",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,ii,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.parent_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,5,e.entry_dt,"dd-MMM-yy"))}}let li=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.wareHouseData=[],this.getWareHouseData(),this.common.currentPage="Ware House",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){console.log("Refresh"),this.getWareHouseData()}getWareHouseData(){this.common.loading++,this.api.post("company/getWarehouse",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data.invoice[0]),this.wareHouseData=e.data.invoice,console.log("after api data:",this.wareHouseData)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openwareHouseModal(e){e?(console.log("ware House",e),this.common.params=e,this.common.params.title="Ware house",this.modalService.open(C.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&this.updateWareHouse(t.wareHouse,e.id)})):(this.common.params=null,this.modalService.open(C.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addWareHouse(e.wareHouse)}))}addWareHouse(e){console.log("wareHouse",e);const t={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:0};console.log("params11: ",t),this.common.loading++,this.api.post("Company/InsertWarehouse",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_warehouse;this.common.showToast(""==t?"Add Successfull  ":t),this.getWareHouseData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateWareHouse(e,t){console.log("updated data",e);const n={name:e.name,foid:123,parentid:e.account.id,primarygroupid:e.account.primarygroup_id,x_id:t};console.log("params11: ",n),this.common.loading++,this.api.post("Company/InsertWarehouse",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_warehouse;this.common.showToast(""==t?" Updated Sucess":t),this.getWareHouseData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}delete(e){let t={id:e,tblidname:"id",tblname:"warehouse"};e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getWareHouseData(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ware-house"]],decls:20,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"button",1),c["\u0275\u0275listener"]("click",(function(){return t.openwareHouseModal()})),c["\u0275\u0275element"](3,"i",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"table",4),c["\u0275\u0275elementStart"](6,"thead",5),c["\u0275\u0275elementStart"](7,"tr"),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Parent Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"th"),c["\u0275\u0275text"](17,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"tbody"),c["\u0275\u0275template"](19,ri,13,10,"tr",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",t.wareHouseData))},directives:[h.s,h.r,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:200px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:200px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:350px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}i[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important}"]}),e})();function si(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"a",28),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function ci(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"a",29),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function di(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",30),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","y_ledger_name")})),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",e.ledgerData)}}function mi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275elementStart"](1,"input",31),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.search=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().jrxSearch(n)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.search)("placeholder",e.name)}}function hi(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Branch"),c["\u0275\u0275elementEnd"]())}function pi(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_company_branch,"")}}const gi=function(e,t){return{highlight:e,radclass:t}};function ui(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",32),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid,n.y_type,n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"td"),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](18,pi,2,1,"td",23),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction2"](13,gi,o.selectedRow==n,null==e.y_type)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,10,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_ledger),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_type),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_dramunt),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==o.accountService.selected.branch.id)}}function bi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",39),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).jrxPagination(n)})),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",e==n.pages.active?"active-page":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function vi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",33),c["\u0275\u0275elementStart"](1,"div",34),c["\u0275\u0275elementStart"](2,"button",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active-1)})),c["\u0275\u0275text"](3,"Pre"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,bi,2,2,"button",36),c["\u0275\u0275elementStart"](5,"button",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active+1)})),c["\u0275\u0275text"](6,"Next"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",37),c["\u0275\u0275elementStart"](8,"input",38),c["\u0275\u0275listener"]("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pages.limit=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",1==e.pages.active),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.common.generateArray(e.pages.count)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",e.pages.active==e.pages.count),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.pages.limit)}}function xi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",40),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",41),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",42),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.DayBook[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.DayBook[e.f2Date])}}let fi=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.selectedName="",this.flag=0,this.fuelFilings=[],this.VoucherEditTime=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_ledger",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_code",search:""},{name:"Ref No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,this.common.refresh=this.refresh.bind(this),this.getAllLedger(),this.setFoucus("ledger"),this.common.currentPage="Cash Book",Ye.getItem("cash_book_ledgers").then(e=>{e&&(this.ledgerData=e),this.getAllLedger(!e)}),Ye.getItem("cashbook_data").then(e=>{e&&(this.DayData=e,this.filterData())})}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}ngAfterViewInit(){}refresh(){this.getAllLedger(),this.setFoucus("ledger"),this.getDayBook()}openinvoicemodel(e,t){this.common.params={invoiceid:e,ordertype:t},this.modalService.open(St.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&console.log("open succesfull")})}getAllLedger(e=!0){let t="Suggestion/GetLedger?transactionType=credit&voucherId=-3&search=test";console.log("URL: ",t),this.api.get(t).subscribe(e=>{console.log(e),this.ledgerData=e.data,Ye.setItem("cash_book_ledgers",this.ledgerData)},e=>{console.error(e),this.common.showError()}),this.setFoucus("ref-code")}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Cash Book From :"+this.DayBook.startdate+" To :"+this.DayBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDayBook(){this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate,console.log("Accounts:",this.DayBook);let e={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetCashBook",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.DayData=e.data,this.filterData(),this.DayData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.DayBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.DayBook[e])})}onSelected(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}filterData(){let e=[];this.DayData.map(t=>{-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)}),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,Ye.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,this.DayData[this.selectedRow].y_type,this.DayData[this.selectedRow])}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}addvance(){this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: ",e),e.response&&(this.DayBook.isamount=e.ledger.isamount,this.DayBook.remarks=e.ledger.remarks,this.DayBook.vouchercustcode=e.ledger.vouchercustcode,this.DayBook.vouchercode=e.ledger.vouchercode,this.DayBook.frmamount=e.ledger.frmamount,this.DayBook.toamount=e.ledger.toamount,this.flag=0!=e.ledger.toamount||0!=e.ledger.frmamount||""!=e.ledger.vouchercode||""!=e.ledger.vouchercustcode||""!=e.ledger.remarks||0!=e.ledger.isamount?1:0)})}test(e){console.log("--------: ",e)}getBookDetail(e,t,n){console.log("vouher id",e,"ytype",t),t.toLowerCase().includes("purchase")||t.toLowerCase().includes("sales")||t.toLowerCase().includes("debit")||t.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:n.y_vouchertype_id,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):t.toLowerCase().includes("fuel")?this.openFuelEdit(n):n.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(n):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:n.y_vouchertype_id},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e)})),this.common.currentPage="Cash Book"}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:e.y_refid,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e)})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{}))}jrxPagination(e,t){this.pages.active=e;let n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}jrxPageLimitReset(){this.jrxPageTimer=setTimeout(()=>{if("string"==typeof this.pages.limit&&(this.pages.limit=parseInt(this.pages.limit)||0),!this.pages.limit||this.pages.limit<100)return this.pages.limit=this.accountService.perPage,void this.common.showError("Minimum per page limit 100");this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.accountService.perPage=this.pages.limit,localStorage.setItem("per_page",this.accountService.perPage.toString()),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}jrxSearch(e){clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout(()=>{if(this.searchedData=[],e.search){for(let t=0;t<this.DayData.length;t++)this.DayData[t][e.key]&&("y_date"===e.key&&this.common.changeDateformat(this.DayData[t][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||this.DayData[t][e.key].toLowerCase().includes(e.search.toLowerCase()))&&this.searchedData.push(this.DayData[t]);this.pages.count=Math.floor(this.searchedData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count,this.searchedData)}else this.searchedData=[],this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["cashbook"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:48,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","ledger","display","y_ledger_name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"label",9),c["\u0275\u0275text"](12,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275elementStart"](16,"label",9),c["\u0275\u0275text"](17,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",1),c["\u0275\u0275elementStart"](20,"div",7),c["\u0275\u0275elementStart"](21,"div",8),c["\u0275\u0275elementStart"](22,"label",9),c["\u0275\u0275text"](23,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",13),c["\u0275\u0275template"](26,si,3,0,"div",14),c["\u0275\u0275template"](27,ci,3,0,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",13),c["\u0275\u0275elementStart"](29,"div",8),c["\u0275\u0275elementStart"](30,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),c["\u0275\u0275text"](31,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275elementStart"](33,"div",8),c["\u0275\u0275elementStart"](34,"div",17),c["\u0275\u0275template"](35,di,1,1,"auto-suggetion-in-side",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",19),c["\u0275\u0275elementStart"](37,"table",20),c["\u0275\u0275elementStart"](38,"thead",21),c["\u0275\u0275elementStart"](39,"tr"),c["\u0275\u0275elementStart"](40,"th"),c["\u0275\u0275text"](41,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](42,mi,2,2,"th",22),c["\u0275\u0275template"](43,hi,2,0,"th",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"tbody"),c["\u0275\u0275template"](45,ui,19,16,"tr",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](46,vi,9,4,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](47,xi,4,1,"div",26)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.flag),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngIf",t.ledgerData.length),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngForOf",t.filters),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.DayData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pages.count>=1),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.u,E.t,w.a,E.r],pipes:[E.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),e})();function yi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"a",28),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Ci(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",27),c["\u0275\u0275elementStart"](1,"a",29),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function _i(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",30),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","y_ledger_name")})),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",e.ledgerData)}}function Si(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275elementStart"](1,"input",31),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.search=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().jrxSearch(n)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.search)("placeholder",e.name)}}function Mi(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Branch"),c["\u0275\u0275elementEnd"]())}function Ei(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_company_branch,"")}}const wi=function(e,t){return{highlight:e,radclass:t}};function ki(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",32),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid,n.y_type,n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"td"),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](18,Ei,2,1,"td",23),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction2"](13,wi,o.selectedRow==n,null==e.y_type)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,10,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_ledger),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_type),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_dramunt),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==o.accountService.selected.branch.id)}}function Pi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",39),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).jrxPagination(n)})),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",e==n.pages.active?"active-page":""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function Oi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",33),c["\u0275\u0275elementStart"](1,"div",34),c["\u0275\u0275elementStart"](2,"button",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active-1)})),c["\u0275\u0275text"](3,"Pre"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,Pi,2,2,"button",36),c["\u0275\u0275elementStart"](5,"button",35),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]();return t.jrxPagination(t.pages.active+1)})),c["\u0275\u0275text"](6,"Next"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",37),c["\u0275\u0275elementStart"](8,"input",38),c["\u0275\u0275listener"]("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().jrxPageLimitReset()}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pages.limit=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",1==e.pages.active),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.common.generateArray(e.pages.count)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",e.pages.active==e.pages.count),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.pages.limit)}}function Ii(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",40),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",41),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",42),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.bankBook[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.bankBook[e.f2Date])}}let Di=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.selectedName="",this.flag=0,this.fuelFilings=[],this.VoucherEditTime=[],this.TripEditData=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.pages={count:0,active:1,limit:1e3},this.data=[],this.filters=[{name:"Date",key:"y_date",search:""},{name:"Particular",key:"y_ledger",search:""},{name:"Vch Type",key:"y_type",search:""},{name:"Vch No.",key:"y_cust_code",search:""},{name:"Amount(DR)",key:"y_dramunt",search:""},{name:"Amount(CR)",key:"y_cramunt",search:""}],this.searchedData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.getBranchList(),this.getLedgers(),this.setFoucus("ledger"),this.common.currentPage="Bank Book",Ye.getItem("bank_book_ledgers").then(e=>{e&&(this.ledgerData=e),this.getLedgers(!e)}),Ye.getItem("bankbook_data").then(e=>{e&&(this.DayData=e,this.filterData())})}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}ngAfterViewInit(){}refresh(){this.getBranchList(),this.getLedgers(),this.setFoucus("ledger"),this.getBankBook()}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Bank Book From :"+this.bankBook.startdate+" To :"+this.bankBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgers(e=!0){let t="Suggestion/GetLedger?transactionType=credit&voucherId=-1&search=test";console.log("URL: ",t),this.api.get(t).subscribe(e=>{console.log(e),this.ledgerData=e.data,console.log("ledger data new",this.ledgerData[0].y_ledger_id),Ye.setItem("bank_book_ledgers",this.ledgerData)},e=>{console.error(e),this.common.showError()}),this.setFoucus("ref-code")}getBankBook(){console.log("Accounts:",this.bankBook),this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate;let e={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,ledger:this.bankBook.ledger.id,branchId:this.bankBook.branch.id,isamount:this.bankBook.isamount,remarks:this.bankBook.remarks,vouchercustcode:this.bankBook.vouchercustcode,vouchercode:this.bankBook.vouchercode,frmamount:this.bankBook.frmamount,toamount:this.bankBook.toamount};this.common.loading++,this.api.post("Company/GetBankBook",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.DayData=e.data,this.filterData(),this.DayData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.bankBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.bankBook[e])})}onSelected(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}filterData(){let e=[];this.DayData.map(t=>{-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)}),this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,Ye.setItem("daybook_data",this.DayData),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)}getBookDetail(e,t,n){console.log("vouher id",e,"ytype",t),t.toLowerCase().includes("purchase")||t.toLowerCase().includes("sales")||t.toLowerCase().includes("debit")||t.toLowerCase().includes("credit")?(this.common.params={invoiceid:e,delete:0,newid:0,ordertype:n.y_vouchertype_id,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):t.toLowerCase().includes("fuel")?this.openFuelEdit(n):n.y_type.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(n):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:n.y_vouchertype_id},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e)})),this.common.currentPage="Bank Book"}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.bankBook.startdate,currentFilling:this.bankBook.enddate,fuelstationid:e.y_refid,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e)})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.bankBook.startdate,currentFilling:this.bankBook.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,this.DayData[this.selectedRow].y_type,this.DayData[this.selectedRow])}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}test(e){console.log("--------: ",e)}addvance(){this.common.params={isamount:this.bankBook.isamount,remarks:this.bankBook.remarks,vouchercustcode:this.bankBook.vouchercustcode,vouchercode:this.bankBook.vouchercode,frmamount:this.bankBook.frmamount,toamount:this.bankBook.toamount},this.modalService.open(Ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: ",e),e.response&&(this.bankBook.isamount=e.ledger.isamount,this.bankBook.remarks=e.ledger.remarks,this.bankBook.vouchercustcode=e.ledger.vouchercustcode,this.bankBook.vouchercode=e.ledger.vouchercode,this.bankBook.frmamount=e.ledger.frmamount,this.bankBook.toamount=e.ledger.toamount,this.flag=0!=e.ledger.toamount||0!=e.ledger.frmamount||""!=e.ledger.vouchercode||""!=e.ledger.vouchercustcode||""!=e.ledger.remarks||0!=e.ledger.isamount?1:0)})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0,showSubmit:1},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{}))}jrxPagination(e,t){this.pages.active=e;let n=this.pages.limit*(this.pages.active-1),o=this.pages.limit*this.pages.active;this.data=t?t.slice(n,o):this.searchedData.length?this.searchedData.slice(n,o):this.DayData.slice(n,o)}jrxPageLimitReset(){this.jrxPageTimer=setTimeout(()=>{if("string"==typeof this.pages.limit&&(this.pages.limit=parseInt(this.pages.limit)||0),!this.pages.limit||this.pages.limit<100)return this.pages.limit=this.accountService.perPage,void this.common.showError("Minimum per page limit 100");this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.accountService.perPage=this.pages.limit,localStorage.setItem("per_page",this.accountService.perPage.toString()),this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}jrxSearch(e){clearTimeout(this.jrxTimeout),this.jrxTimeout=setTimeout(()=>{if(this.searchedData=[],e.search){for(let t=0;t<this.DayData.length;t++)this.DayData[t][e.key]&&("y_date"===e.key&&this.common.changeDateformat(this.DayData[t][e.key],"dd-MMM-yy").toLowerCase().includes(e.search.toLowerCase())||this.DayData[t][e.key].toLowerCase().includes(e.search.toLowerCase()))&&this.searchedData.push(this.DayData[t]);this.pages.count=Math.floor(this.searchedData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count,this.searchedData)}else this.searchedData=[],this.pages.count=Math.floor(this.DayData.length/this.pages.limit),this.DayData.length%this.pages.limit&&this.pages.count++,this.jrxPagination(this.pages.active<this.pages.count?this.pages.active:this.pages.count)},500)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["bankbooks"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:47,vars:11,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","ledger","name","ledger","autocomplete","off",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","ledger","display","y_ledger_name",3,"data","select"],["type","text",1,"jrx-acc-th-inpt",3,"ngModel","placeholder","ngModelChange"],[3,"ngClass","click","dblclick","enter"],[1,"pagination"],[1,"pagination_links"],[3,"disabled","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"numer_list","ml-3"],["type","text","name","customPageNo",1,"customPage","form-control",3,"ngModel","ngModelChange"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"label",9),c["\u0275\u0275text"](12,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275elementStart"](16,"label",9),c["\u0275\u0275text"](17,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",1),c["\u0275\u0275elementStart"](20,"div",7),c["\u0275\u0275elementStart"](21,"div",8),c["\u0275\u0275elementStart"](22,"label",9),c["\u0275\u0275text"](23,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",13),c["\u0275\u0275template"](26,yi,3,0,"div",14),c["\u0275\u0275template"](27,Ci,3,0,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",13),c["\u0275\u0275elementStart"](29,"div",8),c["\u0275\u0275elementStart"](30,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.getBankBook()})),c["\u0275\u0275text"](31,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275elementStart"](33,"div",8),c["\u0275\u0275elementStart"](34,"div",17),c["\u0275\u0275template"](35,_i,1,1,"auto-suggetion-in-side",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",19),c["\u0275\u0275elementStart"](37,"table",20),c["\u0275\u0275elementStart"](38,"thead",21),c["\u0275\u0275elementStart"](39,"tr"),c["\u0275\u0275elementStart"](40,"th"),c["\u0275\u0275text"](41,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](42,Si,2,2,"th",22),c["\u0275\u0275template"](43,Mi,2,0,"th",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](44,ki,19,16,"tr",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](45,Oi,9,4,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](46,Ii,4,1,"div",26)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.bankBook.ledger.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.flag),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngIf",t.ledgerData.length),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngForOf",t.filters),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.data),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pages.count>=1),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.u,E.t,w.a,E.r],pipes:[E.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:4%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:19%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:11%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:4%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){font-size:11px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:19%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 299px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.radclass[_ngcontent-%COMP%]{background-color:grey!important;color:#fff}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important}.pagination[_ngcontent-%COMP%]{margin:-10px 0 0}.active-page[_ngcontent-%COMP%]{background:teal}"]}),e})();var Vi=n("K/0S");const Fi=function(e){return{highlight:e}};function Ti(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",17),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](5,Fi,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.statename),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.city_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.pincode)}}let Bi=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"name"},this.getstatedata={state:{name:"Rajasthan",id:29}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.getStates(),this.common.currentPage="city",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}ngOnInit(){}refresh(){console.log("Refresh"),this.getpageData()}getStates(){this.common.loading++,this.api.post("Suggestion/GetState",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.autoSuggestion.data=e.data,this.statedata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getpageData(){let e={foid:123,stateid:this.getstatedata.state.id};this.common.loading++,this.api.post("Accounts/GetCity",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,console.log("after api data:",this.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openModal(e){e?(console.log("city",e),this.common.params=e,this.modalService.open(Vi.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.getpageData()})):(this.common.params=null,this.modalService.open(Vi.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.getpageData()}))}addCity(e){console.log("city",e);const t={cityname:e.city,stateid:e.state.id,pincode:e.pincode};console.log("params: ",t),this.common.loading++,this.api.post("Accounts/InsertCity",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.msg),this.getpageData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateCity(e,t){console.log("updated data",e);const n={cityname:e.city,stateid:e.state.id,pincode:e.pincode,id:t};console.log("params: ",n),this.common.loading++,this.api.post("Accounts/InsertCity",n).subscribe(e=>{this.common.loading--,console.log("res: ",e),e.msg&&this.common.showToast("Update SuccessFull"),this.getpageData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}deleteCity(e){console.log("city data",e);const t={id:e.id};console.log("params: ",t),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Accounts/DeleteCity",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getpageData(),this.common.showToast(" Delete Record")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()}))}))}selectSuggestion(e,t){console.log("Suggestion on select: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}onSelect(e,t){console.log("Suggestion: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}onSelected(e,t,n){this.getstatedata.state.name=e[n],this.getstatedata.state.id=e.id,console.log("order User: ",this.getstatedata),this.setFoucus("submit")}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["city"]],decls:34,vars:3,consts:[[2,"margin","0px","border","0px"],[1,"row"],[1,"col-9"],[1,"col-6"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","state","name","state",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"auto-sugg"],["targetId","state","display","name",3,"data","select"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",1),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"label",5),c["\u0275\u0275text"](8,"State"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.getstatedata.state.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",7),c["\u0275\u0275elementStart"](11,"div",4),c["\u0275\u0275elementStart"](12,"button",8),c["\u0275\u0275listener"]("click",(function(){return t.getpageData()})),c["\u0275\u0275text"](13,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"div",4),c["\u0275\u0275elementStart"](17,"auto-suggetion-in-side",10),c["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"state","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"button",11),c["\u0275\u0275listener"]("click",(function(){return t.openModal()})),c["\u0275\u0275element"](19,"i",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",13),c["\u0275\u0275elementStart"](21,"table",14),c["\u0275\u0275elementStart"](22,"thead",15),c["\u0275\u0275elementStart"](23,"tr"),c["\u0275\u0275elementStart"](24,"th"),c["\u0275\u0275text"](25,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"th"),c["\u0275\u0275text"](27,"State Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"th"),c["\u0275\u0275text"](29,"City"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"th"),c["\u0275\u0275text"](31,"PinCode"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"tbody"),c["\u0275\u0275template"](33,Ti,9,7,"tr",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.getstatedata.state.name),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("data",t.statedata),c["\u0275\u0275advance"](16),c["\u0275\u0275property"]("ngForOf",t.data))},directives:[h.s,h.r,k.d,k.r,k.u,w.a,E.t,E.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 283px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),e})();function Ai(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",7),c["\u0275\u0275elementStart"](3,"div",8),c["\u0275\u0275elementStart"](4,"input",9),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().changeRefresh(0)}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pending=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"span",10),c["\u0275\u0275text"](6,"Non-Pending"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"input",11),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().changeRefresh(1)}))("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pending=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"span",10),c["\u0275\u0275text"](9,"Pending"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",12),c["\u0275\u0275elementStart"](11,"div",13),c["\u0275\u0275elementStart"](12,"button",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().getStoreQuestion()})),c["\u0275\u0275text"](13,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("value",0)("ngModel",e.pending),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("value",1)("ngModel",e.pending)}}function Li(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",15),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().openStoreRequisitions()})),c["\u0275\u0275element"](1,"i",16),c["\u0275\u0275elementEnd"]()}}function Ri(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"To Branch"),c["\u0275\u0275elementEnd"]())}function ji(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Ware House"),c["\u0275\u0275elementEnd"]())}function zi(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e[0].y_tobranch_name)}}function Ni(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e[0].y_warehouse_name)}}const Gi=function(e){return{highlight:e}};function Yi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).openStoreRequisitions(n[0].y_id,n[0].y_from_fobranch_id)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).openStoreRequisitions(n[0].y_id,n[0].y_from_fobranch_id)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,zi,2,1,"td",19),c["\u0275\u0275template"](11,Ni,2,1,"td",19),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"td"),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"td"),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"td"),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](15,Gi,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_id),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,12,e[0].y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e[0].y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_fobranch_name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-1==o.storeRequestId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-101==o.storeRequestId),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_stocktype_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_stocksubtype_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_stockitem_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_amount)}}function Hi(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",17),c["\u0275\u0275elementStart"](1,"thead",18),c["\u0275\u0275elementStart"](2,"tr"),c["\u0275\u0275elementStart"](3,"th"),c["\u0275\u0275text"](4,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"From Branch"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,Ri,2,0,"th",19),c["\u0275\u0275template"](12,ji,2,0,"th",19),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Stock Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Stock Sub Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"Stock Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"th"),c["\u0275\u0275text"](20,"Qty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"th"),c["\u0275\u0275text"](22,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"tbody"),c["\u0275\u0275template"](24,Yi,22,17,"tr",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngIf",-1==e.storeRequestId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-101==e.storeRequestId),c["\u0275\u0275advance"](12),c["\u0275\u0275property"]("ngForOf",e.StockQuestions)}}function $i(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e[0].y_to_fobranch_name)}}function qi(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e[0].y_from_fobranch_name)}}function Ki(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).openStoreRequisitions(n[0].y_id,n[0].y_to_fobranch_id)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).openStoreRequisitions(n[0].y_id,n[0].y_to_fobranch_id)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,$i,2,1,"td",19),c["\u0275\u0275template"](8,qi,2,1,"td",19),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](10,Gi,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e[0].y_cust_code),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-3!=o.storeRequestId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-3==o.storeRequestId),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,7,e[0].y_req_date,"dd-MMM-yy"))}}function Ui(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",17),c["\u0275\u0275elementStart"](1,"thead",18),c["\u0275\u0275elementStart"](2,"tr"),c["\u0275\u0275elementStart"](3,"th"),c["\u0275\u0275text"](4,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"Request No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Issue No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"To Branch"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Request Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"tbody"),c["\u0275\u0275template"](14,Ki,12,12,"tr",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngForOf",e.StockQuestions)}}let Wi=(()=>{class e{constructor(e,t,n,o,a,i){this.api=e,this.common=t,this.route=n,this.user=o,this.modalService=a,this.router=i,this.StockQuestions=[],this.storeRequestId=0,this.selectedName="",this.pending=1,this.common.refresh=this.refresh.bind(this),this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.storeRequestId=parseInt(e.id),this.common.currentPage=-2==this.storeRequestId?"Store Request":-3==this.storeRequestId?"Stock Issue":-101==this.storeRequestId?"Opening Stock":"Stock Transfer"),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}),this.getStoreQuestion()}ngOnInit(){}refresh(){console.log("Refresh"),this.getStoreQuestion()}getStoreQuestion(){console.log(" pending value",this.pending);let e={foid:123,storeRequestId:this.storeRequestId,pendingid:this.pending};this.common.loading++,this.api.post("Company/GetStoreReQuestion",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.formattData(e.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openStoreRequisitions(e,t){this.common.params={storeRequestId:this.storeRequestId,stockQuestionId:e,stockQuestionBranchid:t,pendingid:this.pending},console.log("store rwequestion params",this.common.params),this.modalService.open(Pt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{console.log("responce data return",e),e.response&&this.getStoreQuestion()})}formattData(e){let t=Ut.groupBy(e,"y_id");console.log("groupData",t),this.StockQuestions=[];for(let n in t)this.StockQuestions.push(t[n]);console.log("StockQuestions",this.StockQuestions)}RowSelected(e){console.log("data of u",e),this.selectedName=e}changeRefresh(e){this.pending!=e&&(this.StockQuestions=[],this.getStoreQuestion())}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["storerequisitions"]],decls:8,vars:4,consts:[[2,"margin-top","20px !important","margin-bottom","0px !important","border","0px"],[1,"row"],["class","col-12 pl-0 pr-0",4,"ngIf"],["class","btn mb-4 add-button",3,"click",4,"ngIf"],[1,"main"],["class","table table-bordered ",4,"ngIf"],[1,"col-12","pl-0","pr-0"],[1,"col-3","pl-0"],[1,"form-group","type-radio-box"],["autocomplete","off","type","radio","id","pending","name","pending",1,"tjr-input",3,"value","ngModel","click","ngModelChange"],[1,"tjr-span"],["autocomplete","off","type","radio","id","nonpending","name","pending",1,"tjr-input",3,"value","ngModel","click","ngModelChange"],[1,"col-2","pl-0"],[1,"form-group"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275template"](3,Ai,14,4,"div",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,Li,2,0,"button",3),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275template"](6,Hi,25,3,"table",5),c["\u0275\u0275template"](7,Ui,15,1,"table",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",-3==t.storeRequestId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-3!=t.storeRequestId),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",-101==t.storeRequestId||-1==t.storeRequestId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",-2==t.storeRequestId||-3==t.storeRequestId))},directives:[h.s,h.r,E.u,k.z,k.d,k.r,k.u,E.t,E.r],pipes:[E.f],styles:[".selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.type-radio-box[_ngcontent-%COMP%]{margin:15px 0;padding:5px 0}.type-radio-box[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-top:0;margin-left:10px;vertical-align:middle;margin-right:5px}"]}),e})();const Qi=function(e){return{highlight:e}};function Ji(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",19),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"td"),c["\u0275\u0275text"](20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"td"),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"td"),c["\u0275\u0275text"](24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](13,Qi,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stockitem_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.opening_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.pi_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.si_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.sr_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.pr_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.wastage_total_qt),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.storeRec_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.storeIssue_total_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stock_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.stock_amt)}}function Xi(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",20),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",22),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.openingstock[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.openingstock[e.f2Date])}}let Zi=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.user=n,this.openingStocks=[],this.stockdata=[],this.selectedRow=-1,this.selectedName="",this.openingstock={date:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-")},this.activeId="date",this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="date",this.activedateid="",this.lastActiveId="",this.common.currentPage="Opening Stock",this.setFoucus("date")}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}keyHandler(e){const t=e.key.toLowerCase();return this.activeId=document.activeElement.id,console.log("Active event",e),"f2"==t&&!this.showDateModal&&this.activeId.includes("date")?(this.lastActiveId=this.activeId,this.setFoucus("voucher-date-f2",!1),this.showDateModal=!0,this.f2Date=this.activeId,void(this.activedateid=this.lastActiveId)):"enter"==t&&this.showDateModal?(this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId)):void("enter"==t?(this.allowBackspace=!0,this.activeId.includes("date")&&(this.openingstock.date=this.common.handleDateOnEnterNew(this.openingstock.date),this.setFoucus("submit"))):(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.openingStocks.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.openingStocks.length-1&&this.selectedRow++))}handleVoucherDateOnEnter(e){let t=[],n="-";if(this.openingstock.date.includes("-"))t=this.openingstock.date.split("-");else{if(!this.openingstock.date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.openingstock.date.split("/"),n="/"}let o=t[0];o=1==o.length?"0"+o:o;let a=t[1];a=1==a.length?"0"+a:a;let i=t[2];i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+n+a+n+i),this.openingstock.date=o+n+a+n+i}setFoucus(e,t=!0){console.log("Id: ",e),setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}dismiss(e){e&&this.getOpeningStock(this.openingstock)}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getOpeningStock(e){const t={date:e.date};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/OpeningStock",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.openingStocks=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}RowSelected(e){console.log("data of u",e),this.selectedName=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["openingstock"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:49,vars:3,consts:[[2,"border","0px","padding-top","25px"],[2,"min-height","450px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","id","date","placeholder","Select Date","name","date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-3","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.openingstock.date=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",12),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.dismiss(!0)})),c["\u0275\u0275text"](17,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",14),c["\u0275\u0275elementStart"](19,"table",15),c["\u0275\u0275elementStart"](20,"thead",16),c["\u0275\u0275elementStart"](21,"tr"),c["\u0275\u0275elementStart"](22,"th"),c["\u0275\u0275text"](23,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"th"),c["\u0275\u0275text"](25,"Item"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"th"),c["\u0275\u0275text"](27,"Opening Qty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"th"),c["\u0275\u0275text"](29,"Purchase "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"th"),c["\u0275\u0275text"](31,"Sales"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"th"),c["\u0275\u0275text"](33,"Credit Note"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"th"),c["\u0275\u0275text"](35,"Debit Note"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"th"),c["\u0275\u0275text"](37,"Wastage"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"th"),c["\u0275\u0275text"](39,"Store Recived "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"th"),c["\u0275\u0275text"](41,"Store Issue"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"th"),c["\u0275\u0275text"](43,"Available Qty"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"th"),c["\u0275\u0275text"](45,"Stock Balance Amt"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"tbody"),c["\u0275\u0275template"](47,Ji,25,15,"tr",17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](48,Xi,4,1,"div",18)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.openingstock.date),c["\u0275\u0275advance"](34),c["\u0275\u0275property"]("ngForOf",t.openingStocks),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,E.t,E.u,E.r],styles:[".selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right-color:#263238;font-weight:400;font-size:11px;width:9%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:5%;min-width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:9%;font-size:11px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%;min-width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:5%;min-width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}"]}),e})();var er=n("qVss");function tr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](2,1,e.opnbal,"1.2-2")," ")}}function nr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.opnbal),"1.2-2")," ")}}function or(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.clobal),"1.2-2"))}}function ar(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.clobal),"1.2-2"))}}function ir(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",6),c["\u0275\u0275element"](2,"span",7),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,tr,5,4,"div",8),c["\u0275\u0275template"](5,nr,5,4,"div",8),c["\u0275\u0275elementStart"](6,"div",9),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",9),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](12,or,5,4,"div",8),c["\u0275\u0275template"](13,ar,5,4,"div",8),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",t.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name,""),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.opnbal>=0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!(e.opnbal>=0)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](8,10,e.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,13,e.credit,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.opnbal>=0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!(e.opnbal>=0))}}function rr(e,t){if(1&e&&c["\u0275\u0275element"](0,"trail-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels+"\xa0\xa0\xa0\xa0")}}const lr=function(e){return{highlight:e}};function sr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",6),c["\u0275\u0275element"](2,"span",7),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",6),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",9),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",6),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementStart"](18,"span"),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](21,lr,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",o.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",n.ledgerName,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](6,9,o.setabsHandler(n.opnbal),"1.2-2")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",n.opnbaltype,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,12,n.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,15,n.credit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,18,o.setabsHandler(n.clobal),"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",n.clobaltype,"")}}function cr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ir,14,16,"div",2),c["\u0275\u0275template"](2,rr,1,6,"trail-tree",3),c["\u0275\u0275template"](3,sr,20,23,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function dr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,cr,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function mr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](2,1,e.opnbal,"1.2-2")," ")}}function hr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.opnbal),"1.2-2")," ")}}function pr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.clobal),"1.2-2"))}}function gr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,t.setabsHandler(e.clobal),"1.2-2"))}}function ur(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).clickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",6),c["\u0275\u0275element"](2,"span",7),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,mr,5,4,"div",8),c["\u0275\u0275template"](5,hr,5,4,"div",8),c["\u0275\u0275elementStart"](6,"div",9),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",9),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](12,pr,5,4,"div",8),c["\u0275\u0275template"](13,gr,5,4,"div",8),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",t.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name,""),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.opnbal>=0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!(e.opnbal>=0)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](8,10,e.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,13,e.credit,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.opnbal>=0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!(e.opnbal>=0))}}function br(e,t){if(1&e&&c["\u0275\u0275element"](0,"trail-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels+"\xa0\xa0\xa0\xa0")}}function vr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](3).doubleClickHandler(t,n)}))("click",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).lastClickHandler(t,n)})),c["\u0275\u0275elementStart"](1,"div",6),c["\u0275\u0275element"](2,"span",7),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",6),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",9),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",6),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementStart"](18,"span"),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](21,lr,o.selectedRow==t)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("innerHTML",o.labels,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",n.ledgerName,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](6,9,o.setabsHandler(n.opnbal),"1.2-2")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",n.opnbaltype,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,12,n.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,15,n.credit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,18,o.setabsHandler(n.clobal),"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",n.clobaltype,"")}}function xr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,ur,14,16,"div",2),c["\u0275\u0275template"](2,br,1,6,"trail-tree",3),c["\u0275\u0275template"](3,vr,20,23,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function fr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).search=t}))("click",(function(t){return c["\u0275\u0275restoreView"](e),t.stopPropagation()}))("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).searchValues()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",13),c["\u0275\u0275template"](4,xr,4,3,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",e.search),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("cdkVirtualForOf",e.searchedData)}}function yr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,dr,2,1,"div",0),c["\u0275\u0275template"](2,fr,5,2,"div",0),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length<=50),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length>50)}}function Cr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",24),c["\u0275\u0275elementStart"](1,"div",27),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",21),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"number"),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",28),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",28),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",21),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementStart"](18,"span"),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](20,"trail-tree",29),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](6,13,o.positiveLookingValue(e.opnbal),"1.2-2")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.opnbaltype),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](11,16,e.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,19,e.credit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind2"](17,22,o.positiveLookingValue(e.clobal),"1.2-2")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.clobaltype),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("action",o.getBookDetail.bind(o))("action",o.getBookDetail.bind(o))("data",e.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)("labels","\xa0")}}function _r(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,e.positiveLookingValue(e.openingbal),"1.2-2"))}}function Sr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,e.positiveLookingValue(e.openingbal),"1.2-2"))}}function Mr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Cr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,e.positiveLookingValue(e.closingbal),"1.2-2"))}}function Er(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4," Dr"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](2,1,e.positiveLookingValue(e.closingbal),"1.2-2"))}}function wr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",30),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275text"](2,"Profit & Loss A/c"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,_r,5,4,"div",31),c["\u0275\u0275template"](4,Sr,5,4,"div",31),c["\u0275\u0275elementStart"](5,"div",21),c["\u0275\u0275text"](6,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",21),c["\u0275\u0275text"](8,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,Mr,5,4,"div",31),c["\u0275\u0275template"](10,Er,5,4,"div",31),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",!(e.openingbal>=0)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.openingbal>=0),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",e.closingbal>=0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!(e.closingbal>=0))}}function kr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",30),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275text"](2,"Grand Total"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",21),c["\u0275\u0275text"](4,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",21),c["\u0275\u0275text"](6),c["\u0275\u0275pipe"](7,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",21),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",21),c["\u0275\u0275text"](12,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](7,2,e.debitbal,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](10,5,e.creditbal,"1.2-2"))}}function Pr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",32),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",33),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",34),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.trial[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.trial[e.f2Date])}}const Or="button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]{border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:192px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:192px;border:1px solid #c7c7c7;border-bottom:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:400!important;width:120px;text-align:right;display:inline-block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:250px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;border:0}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.selected[_ngcontent-%COMP%]{background-color:#576c77}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;border:1px solid #c7c7c7}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 15px!important;border-right:1px solid #ddd}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 15px;border-right:1px solid #ddd}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;font-size:11px;color:#fff}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:14px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-col[_ngcontent-%COMP%]{color:#fff}.x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.lastrowcolor[_ngcontent-%COMP%]{background-color:#bfcfd9!important;font-size:11px}.highlight[_ngcontent-%COMP%], .lastrowcolor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#000!important}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.heading[_ngcontent-%COMP%]{width:100%;z-index:2;border:1px solid #263238}.heading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:1px solid #263238}.x-col[_ngcontent-%COMP%]{border-right:1px solid #f2f2f2;padding:6px 4px}.lastrowcolor[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{color:#000}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 218px);overflow:auto;width:100%}.tb-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 4px}.highlight[_ngcontent-cdj-c13][_ngcontent-%COMP%]{background-color:#e2ca1f!important}";let Ir=(()=>{class e{constructor(e,t,n,o,a){this.common=e,this.modalService=t,this.user=n,this.cdr=o,this.accountService=a,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.items=[1,2,3,4,5,6,7,8,9,10],this.search="",this.searchedData=[]}lastClickHandler(e,t){this.selectedRow=parseInt(t),e.stopPropagation()}ngAfterViewInit(){}ngOnChanges(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}clickHandler(e,t){e.stopPropagation(),this.activeIndex=this.activeIndex!==t?t:-1}doubleClickHandler(e,t){e.stopPropagation(),this.action(t)}setabsHandler(e){return Math.abs(e)}searchValues(){this.searchedData=this.data.filter(e=>e.name?e.name.toLowerCase().includes(this.search.toLowerCase()):!!e.ledgerName&&e.ledgerName.toLowerCase().includes(this.search.toLowerCase())),this.cdr.detectChanges()}keyHandler(e){e.stopPropagation();const t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trail-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",actionabs:"actionabs",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","tb-mini row m-0 pl-0 pr-0",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","tb-mini row m-0 pl-0 pr-0 lastrowcolor",3,"ngClass","dblclick","click",4,"ngIf"],[1,"tb-mini","row","m-0","pl-0","pr-0",2,"cursor","pointer",3,"click"],[1,"col","x-col"],[3,"innerHTML"],["class","col x-col",4,"ngIf"],[1,"col","x-col",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"tb-mini","row","m-0","pl-0","pr-0","lastrowcolor",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"],["itemSize","50",2,"height","400px"],[4,"cdkVirtualFor","cdkVirtualForOf"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,yr,3,2,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},directives:[E.u,E.t,e,E.r,k.d,k.r,k.u,Mo.e,Mo.a,Mo.d],pipes:[E.g],styles:[Or],changeDetection:0}),e})(),Dr=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.accountService=i,this.modalService=r,this.selectedName="",this.voucherEntries=[],this.trial={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},voucherType:{name:"All",id:0}},this.TrialData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.trialBalanceData=[],this.active={trialBalanceData:{mainGroup:[],subGroup:[]}},this.viewType="main",this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.openingbal=0,this.closingbal=0,this.debitbal=0,this.creditbal=0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.trial.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.trial.endDate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startDate"),this.common.currentPage="Trial Balance"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.setFoucus("startDate")}getTrial(){this.trial.startDate=this.accountService.fromdate,this.trial.endDate=this.accountService.todate,console.log("Ledger:",this.trial);let e={startdate:this.trial.startDate,enddate:this.trial.endDate};this.common.loading++,this.api.post("Accounts/getTrialBalance",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.TrialData=e.data,this.generalizeData(),this.TrialData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}generalizeData(){this.openingbal=0,this.closingbal=0,this.voucherEntries=[];for(let e=0;e<this.TrialData.length;e++){let t=this.TrialData[e],n=t.y_path.split("--\x3e");t.labels=n.splice(1,n.length);let o=this.voucherEntries.findIndex(e=>e.name===n[0]);-1===o?this.voucherEntries.push({name:n[0],data:[t]||!1,debit:parseFloat(t.y_dr_bal),credit:parseFloat(t.y_cr_bal),opnbal:parseFloat(t.y_openbal),clobal:parseFloat(t.y_closebal),opnbaltype:t.y_openbaltype,clobaltype:t.y_closebaltype}):(this.voucherEntries[o].debit+=parseFloat(t.y_dr_bal),this.voucherEntries[o].credit+=parseFloat(t.y_cr_bal),this.voucherEntries[o].opnbal+=parseFloat(t.y_openbal),this.voucherEntries[o].clobal+=parseFloat(t.y_closebal),this.voucherEntries[o].data.push(t)),this.openingbal+=parseFloat(t.y_openbal),this.closingbal+=parseFloat(t.y_closebal),this.debitbal+=parseFloat(t.y_dr_bal),this.creditbal+=parseFloat(t.y_cr_bal)}this.voucherEntries.map(e=>e.data=this.findChilds(e.data)),console.log("voucherEntries",this.voucherEntries,this.closingbal,"ds",this.openingbal)}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],debit:o.y_ledger_name?parseFloat(o.y_dr_bal):0,credit:o.y_ledger_name?parseFloat(o.y_cr_bal):0,opnbal:o.y_ledger_name?parseFloat(o.y_openbal):0,clobal:o.y_ledger_name?parseFloat(o.y_closebal):0,opnbaltype:o.y_openbaltype,clobaltype:o.y_closebaltype}):(t[i].debit+=o.y_ledger_name?parseFloat(o.y_dr_bal):0,t[i].credit+=o.y_ledger_name?parseFloat(o.y_cr_bal):0,t[i].opnbal+=o.y_ledger_name?parseFloat(o.y_openbal):0,t[i].clobal+=o.y_ledger_name?parseFloat(o.y_closebal):0,t[i].opnbaltype=t[i].opnbal<0?"Cr":"Dr",t[i].clobaltype=t[i].clobal<0?"Cr":"Dr",o.y_ledger_name&&t[i].data.push(o))}else t.push({ledgerName:e[n].y_ledger_name,data:[],debit:e[n].y_dr_bal||0,credit:e[n].y_cr_bal||0,opnbal:e[n].y_openbal||0,clobal:e[n].y_closebal||0,ledgerid:e[n].y_ledgerid,opnbaltype:e[n].y_openbaltype,clobaltype:e[n].y_closebaltype});if(t.length)return t.map(e=>e.data.length?{name:e.name,data:this.findChilds(e.data),debit:e.debit,credit:e.credit,opnbal:e.opnbal,clobal:e.clobal,opnbaltype:e.y_openbaltype,clobaltype:e.y_closebaltype}:e).sort((e,t)=>e.length>t.length?1:-1);{let t=[],n=Ut.groupBy(e,"y_ledger_name");for(let e in n)if(n[e].length>1){let o={ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dr_bal),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cr_bal),0),opnbal:n[e].reduce((e,t)=>e+parseFloat(t.y_openbal),0),clobal:n[e].reduce((e,t)=>e+parseFloat(t.y_closebal),0)};t.push(o)}else{let o={ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dr_bal),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cr_bal),0),opnbal:n[e].reduce((e,t)=>e+parseFloat(t.y_openbal),0),clobal:n[e].reduce((e,t)=>e+parseFloat(t.y_closebal),0)};t.push(o)}return t}}positiveLookingValue(e){return Math.abs(e)}changeViewType(){console.log("____________"),this.active.trialBalanceData.mainGroup=[],this.active.trialBalanceData.subGroup=[],"sub"==this.viewType?this.trialBalanceData.forEach((e,t)=>this.active.trialBalanceData.mainGroup.push("mainGroup"+t+0)):"all"==this.viewType&&this.trialBalanceData.forEach((e,t)=>{this.active.trialBalanceData.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.trialBalanceData.subGroup.push("subGroup"+t+n))})}handleExpandation(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}formattData(){let e=Object.keys(Ut.groupBy(this.TrialData,"primary_groupname")).map(e=>({name:e,amount:0,dramount:0,cramount:0,openingamount:0,openingType:"",closingType:"",subGroups:Object.keys(Ut.groupBy(Ut.groupBy(this.TrialData,"primary_groupname")[e],"groupname")).map(t=>({name:t,amount:0,dramount:0,cramount:0,openingamount:0,openingType:"",closingType:"",trialBalances:Ut.groupBy(Ut.groupBy(this.TrialData,"primary_groupname")[e],"groupname")[t]}))}));this.trialBalanceData=e,console.log("trialBalanceData @@@",this.trialBalanceData);for(let t in e)e.map(e=>{let t=0,n=0,o=0,a=0,i="",r="";console.log("map value",e.subGroups),e.subGroups&&e.subGroups.length>0&&e.subGroups.map(e=>{let l=0,s=0,c=0,d=0;e.trialBalances.map(e=>{i=e.y_openbaltype,r=e.y_closebaltype,e.y_closebal&&(t+=parseFloat(e.y_closebal),l+=parseFloat(e.y_closebal)),e.y_dr_bal&&(n+=parseFloat(e.y_dr_bal),s+=parseFloat(e.y_dr_bal)),e.y_cr_bal&&(o+=parseFloat(e.y_cr_bal),c+=parseFloat(e.y_cr_bal)),e.y_openbal&&(a+=parseFloat(e.y_openbal),d+=parseFloat(e.y_openbal))}),e.amount=l,e.dramount=s,e.cramount=c,e.openingamount=d,e.openingType=i,e.closingType=r}),e.amount=t,e.dramount=n,e.cramount=o,e.openingamount=a,e.openingType=i,e.closingType=r});console.log("trialBalanceData @@@",this.trialBalanceData),console.log("First Section:",this.trialBalanceData),console.log("Second Section:",this.trialBalanceData),this.changeViewType()}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0].foname,e.data[0].addressline+"\n"+(e.data[0].phonenumber?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0].gstno?", GST NO -  "+e.data[0].gstno:""),"","")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.trial[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.trial[e])})}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.TrialData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.trial.startDate=this.common.handleDateOnEnterNew(this.trial.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.trial.endDate=this.common.handleDateOnEnterNew(this.trial.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t?this.allowBackspace=!1:(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.TrialData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.TrialData.length-1&&this.selectedRow++);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else this.getBookDetail(this.TrialData[this.selectedRow])}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.trial[o].includes("-"))t=this.trial[o].split("-");else{if(!this.trial[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.trial[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.trial[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getBookDetail(e){console.log("vouher id",e),e.ledgerName.includes("Profit & Loss A/c")?this.getProfitLoss():(this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate,ledger:e.ledgerid,vouchertype:0,ledgername:e.ledgerName},this.modalService.open(Jn.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})),this.common.currentPage="Trial Balance"}getProfitLoss(){this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate},console.log("start date and date",this.common.params),this.modalService.open(er.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}csvFunction(){if("main"==this.isExpand)this.singleFormatCsvData();else{let e=[];e.push(Object.assign({particular:"Ledger",openingamount:"Opening Balance",drAmount:"Dr Amount",crAmount:"Cr Amount",closingamount:"Closing Balance"})),this.voucherEntries.forEach(t=>{e.push({particular:t.name,openingamount:0==t.opnbal?"":this.positiveLookingValue(t.opnbal)+" "+t.opnbaltype,drAmount:0==t.debit?"":t.debit,crAmount:0==t.credit?"":t.credit,closingamount:0==t.clobal?"":this.positiveLookingValue(t.clobal)+" "+t.clobaltype}),e.push(...this.generateCSVData(t.data,"  "))}),e.push({particular:"Profit & Loss A/c",openingamount:this.positiveLookingValue(this.openingbal),drAmount:"",crAmount:"",closingamount:this.positiveLookingValue(this.closingbal)}),e.push({particular:"Grand Total",openingamount:"",drAmount:this.debitbal,crAmount:this.creditbal,closingamount:""}),this.csvService.jsonToExcel(e)}}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,openingamount:0==this.positiveLookingValue(a.opnbal)?"":a.opnbal+(a.opnbal>=0?" Dr":" Cr"),drAmount:0==a.debit?"":a.debit,crAmount:0==a.credit?"":a.credit,closingamount:0==a.clobal?"":this.positiveLookingValue(a.clobal)+(a.clobal>=0?" Dr":" Cr")}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:t+a.ledgerName,openingamount:0==a.opnbal?"":this.positiveLookingValue(a.opnbal)+" "+a.opnbaltype,drAmount:0==a.debit?"":a.debit,crAmount:0==a.credit?"":a.credit,closingamount:0==a.clobal?"":this.positiveLookingValue(a.clobal)+" "+a.clobaltype})}return n}singleFormatCsvData(){console.log("set bal",this.openingbal);let e=[];e.push(Object.assign({Ledger:"Particulars",OpeningBalance:"Opening Balance",amountdr:"Amount(DR)",amountcr:"Amount(CR)",amount:"Closing Balance"})),this.voucherEntries.forEach(t=>{e.push({Ledger:t.name,OpeningBalance:this.positiveLookingValue(t.opnbal)+" "+t.opnbaltype,amountdr:t.debit,amountcr:t.credit,amount:this.positiveLookingValue(t.clobal)+" "+t.opnbaltype})}),e.push({Ledger:"Profit & Loss A/c",OpeningBalance:this.positiveLookingValue(this.openingbal)+" "+(this.openingbal>=0?"Cr":"Dr"),amountdr:"",amountcr:"",amount:this.positiveLookingValue(this.closingbal)+" "+(this.closingbal>=0?"Cr":"Dr")}),e.push({Ledger:"Grand Total",OpeningBalance:"",amountdr:this.positiveLookingValue(this.debitbal),amountcr:this.positiveLookingValue(this.creditbal),amount:""}),this.csvService.jsonToExcel(e),console.log("Merged:",e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trialbalance"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:49,vars:8,consts:[[2,"border","0px"],[3,"keydown"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],[2,"margin-left","5px"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-9","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-5","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","24px",3,"click"],["id","table"],[1,"row","heading","m-0","p-0"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],[1,"x-data"],["class","row x-stocktype","style","cursor:pointer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],[3,"action","data","isExpandAll","active","labels"],[1,"row","x-stocktype",2,"cursor","pointer"],["class","col x-col",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275elementStart"](4,"input",3),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](5," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",4),c["\u0275\u0275elementStart"](7,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](8," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",6),c["\u0275\u0275elementStart"](10,"div",7),c["\u0275\u0275elementStart"](11,"span",8),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("table")})),c["\u0275\u0275element"](12,"i",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"span",10),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](14,"i",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",6),c["\u0275\u0275elementStart"](16,"div",12),c["\u0275\u0275elementStart"](17,"div",13),c["\u0275\u0275elementStart"](18,"label",14),c["\u0275\u0275text"](19,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",12),c["\u0275\u0275elementStart"](22,"div",13),c["\u0275\u0275elementStart"](23,"label",14),c["\u0275\u0275text"](24,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"input",16),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",17),c["\u0275\u0275elementStart"](27,"div",13),c["\u0275\u0275elementStart"](28,"button",18),c["\u0275\u0275listener"]("click",(function(){return t.getTrial()})),c["\u0275\u0275text"](29,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",19),c["\u0275\u0275elementStart"](31,"div",20),c["\u0275\u0275elementStart"](32,"div",21),c["\u0275\u0275text"](33,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",21),c["\u0275\u0275text"](35,"Opening Balance"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",21),c["\u0275\u0275text"](37,"Amount(DR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",21),c["\u0275\u0275text"](39,"Amount(CR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",21),c["\u0275\u0275text"](41,"Closing Balance"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"div",22),c["\u0275\u0275template"](43,Cr,21,25,"div",23),c["\u0275\u0275elementStart"](44,"div",24),c["\u0275\u0275template"](45,wr,11,4,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",24),c["\u0275\u0275template"](47,kr,13,8,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](48,Pr,4,1,"div",26)),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.voucherEntries),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0!=t.openingbal),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0!=t.debitbal||0!=t.creditbal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.t,E.u,Ir],pipes:[E.g],styles:[Or]}),e})();var Vr=n("yQqz");const Fr=function(e){return{highlight:e}};function Tr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openAccountModal(n)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openAccountModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td",8),c["\u0275\u0275elementStart"](11,"a",9),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().delete(n.id)})),c["\u0275\u0275element"](12,"i",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,Fr,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.parente_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,5,e.entry_dt,"dd-MMM-yy"))}}let Br=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.title="",this.Accounts=[],this.GetAccount(),this.common.currentPage="Cost Category",this.common.refresh=this.refresh.bind(this)}ngOnInit(){}refresh(){this.GetAccount()}GetAccount(){this.common.loading++,this.api.post("Accounts/GetCostCenter",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.Accounts=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openAccountModal(e){e?(console.log("Accounts",e),this.common.params=e,this.modalService.open(Vr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(t=>{t.response&&this.updateCostCenter(t.costCenter,e.id)})):(this.common.params=null,this.modalService.open(Vr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addCostCenter(e.costCenter)}))}addCostCenter(e){console.log("costCenter",e);const t={parentName:e.parentName,parentid:e.parentId,foid:123,x_id:e.xid,name:e.name};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertCostCenter",t).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_costcenter;this.common.showToast(""==t?"Save Successfully":t),this.GetAccount()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateCostCenter(e,t){console.log("costCenter",e);const n={parentName:e.parentName,parentid:e.parentId,foid:123,x_id:t,name:e.name};console.log("params123: ",n),this.common.loading++,this.api.post("Accounts/InsertCostCenter",n).subscribe(e=>{this.common.loading--,console.log("res: ",e);let t=e.data[0].save_costcenter;this.common.showToast(""==t?"Save Successfully":t),this.GetAccount()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}delete(e){let t={id:e,tblidname:"id",tblname:"costcenter"};e&&(console.log("city",e),this.common.params={title:"Delete Cost Center ",description:"<b>&nbsp;Are Sure To Delete This Record<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Stock/deletetable",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.GetAccount(),this.common.showToast(" This Value Has been Deleted!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")}))}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["costcenter"]],decls:20,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick","enter"],[1,"del"],["href","javascript: void(0);","title","Delete ",1,"delete",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"button",1),c["\u0275\u0275listener"]("click",(function(){return t.openAccountModal()})),c["\u0275\u0275element"](3,"i",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"table",4),c["\u0275\u0275elementStart"](6,"thead",5),c["\u0275\u0275elementStart"](7,"tr"),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"parent Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"th"),c["\u0275\u0275text"](17,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"tbody"),c["\u0275\u0275template"](19,Tr,13,10,"tr",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",t.Accounts))},directives:[h.s,h.r,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:450px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:300px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}"]}),e})();var Ar=n("OoJn"),Lr=n("S6hn");function Rr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td",25),c["\u0275\u0275text"](1),c["\u0275\u0275elementStart"](2,"span"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",e.y_opn_amt," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_opn_amt,"")}}function jr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.totaldr)}}function zr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function Nr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.totalcr)}}function Gr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function Yr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td",25),c["\u0275\u0275text"](1),c["\u0275\u0275elementStart"](2,"span"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",e.totalclosing," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_close_amt)}}function Hr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function $r(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function qr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.y_dr_amt)}}function Kr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function Ur(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.y_cr_amt)}}function Wr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}function Qr(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"span",27),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate2"]("",e.y_close_amt," ",e.y_closebaltype,"")}}function Jr(e,t){1&e&&c["\u0275\u0275element"](0,"td")}const Xr=function(e){return{highlight:e}};function Zr(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",26),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"]().selectedRow=""+o+n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"](2).getBookDetail(n.y_costcenter_id)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,$r,1,0,"td",23),c["\u0275\u0275template"](4,qr,2,1,"td",23),c["\u0275\u0275template"](5,Kr,1,0,"td",23),c["\u0275\u0275template"](6,Ur,2,1,"td",23),c["\u0275\u0275template"](7,Wr,1,0,"td",23),c["\u0275\u0275template"](8,Qr,3,2,"td",23),c["\u0275\u0275template"](9,Jr,1,0,"td",23),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](9,Xr,a.selectedRow==""+o+n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_costcentername),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_openbal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.y_dr_bal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_dr_bal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.y_cr_bal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_cr_bal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.y_closebal),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.y_closebal)}}function el(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tbody"),c["\u0275\u0275elementStart"](1,"tr",21),c["\u0275\u0275elementStart"](2,"td"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,Rr,4,2,"td",22),c["\u0275\u0275template"](5,jr,2,1,"td",23),c["\u0275\u0275template"](6,zr,1,0,"td",23),c["\u0275\u0275template"](7,Nr,2,1,"td",23),c["\u0275\u0275template"](8,Gr,1,0,"td",23),c["\u0275\u0275template"](9,Yr,4,2,"td",22),c["\u0275\u0275template"](10,Hr,1,0,"td",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,Zr,10,11,"tr",24),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.totalopening),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.totaldr),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.totaldr),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.totalcr),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.totalcr),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0!=e.totalclosing),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==e.totalclosing),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.traildatas)}}function tl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",29),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",30),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.trial[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.trial[e.f2Date])}}let nl=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.selectedName="",this.trial={endDate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startDate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},voucherType:{name:"All",id:0}},this.costCenterData=[],this.ledgerList=[],this.activeId="voucherType",this.selectedRow=-1,this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.activedateid="",this.lastActiveId="",this.trialBalanceData=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.trial.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.trial.endDate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startDate"),this.common.currentPage="Cost Category Report"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.setFoucus("startDate")}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Cost Category From :"+this.trial.startDate+" To :"+this.trial.endDate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getTrial(){this.trial.startDate=this.accountService.fromdate,this.trial.endDate=this.accountService.todate,console.log("Ledger:",this.trial);let e={startdate:this.trial.startDate,enddate:this.trial.endDate};this.common.loading++,this.api.post("Accounts/getCostCenterSummary",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.costCenterData=e.data,this.formattData(),this.costCenterData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}formattData(){let e=Ut.groupBy(this.costCenterData,"y_parent_costcentername");this.trialBalanceData=[];for(let t in e){let n=Ut.groupBy(e[t],"y_parent_costcentername"),o=[],a=0,i=0,r=0,l=0,s="",c="";for(let e in n)n[e].map(e=>{e.y_openbal&&(a+=parseInt(e.y_openbal)),e.y_dr_amt&&(i+=parseInt(e.y_dr_amt)),e.y_cr_amt&&(r+=parseInt(e.y_cr_amt)),e.y_close_amt&&(l+=parseInt(e.y_close_amt)),s=e.y_closebaltype,c=e.y_openbaltype,o.push(e)});this.trialBalanceData.push({name:t,totalopening:a,totaldr:i,totalcr:r,totalclosing:l,y_openbaltype:c,y_closebaltype:s,traildatas:o})}console.log("First Section:",this.trialBalanceData),console.log("Second Section:",this.trialBalanceData)}getDate(e){this.modalService.open(Ar.b,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.trial[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.trial[e])})}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"!=t||this.activeId||!this.costCenterData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("voucherType")?this.setFoucus("ledger"):this.activeId.includes("ledger")?this.setFoucus("startDate"):this.activeId.includes("startDate")?(this.trial.startDate=this.common.handleDateOnEnterNew(this.trial.startDate),this.setFoucus("endDate")):this.activeId.includes("endDate")&&(this.trial.endDate=this.common.handleDateOnEnterNew(this.trial.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"endDate"==this.activeId&&this.setFoucus("startDate"),"startDate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("voucherType");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startDate"!=this.activeId&&"endDate"!=this.activeId||"backspace"===t)"backspace"!=t?this.allowBackspace=!1:(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.costCenterData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.costCenterData.length-1&&this.selectedRow++);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}else this.getBookDetail(this.costCenterData[this.selectedRow].y_costcenter_id)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startDate"==this.activedateid?"startDate":"endDate";if(this.trial[o].includes("-"))t=this.trial[o].split("-");else{if(!this.trial[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.trial[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.trial[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getBookDetail(e){console.log("cost Center id",e),this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate,costCenterId:e},this.modalService.open(Lr.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}getProfitLoss(){this.common.params={startdate:this.trial.startDate,enddate:this.trial.endDate},console.log("start date and date",this.common.params),this.modalService.open(ka,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["cost-center-report"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:38,vars:4,consts:[[2,"border","0px"],[3,"keydown"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"table-responsive"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[1,"mytbody"],[4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[2,"background","#184154","color","#fff"],["style","text-align:right;",4,"ngIf"],[4,"ngIf"],["style","background: #dadfe6;",3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[2,"text-align","right"],[2,"background","#dadfe6",3,"ngClass","click","dblclick"],[2,"width","100px","display","block","text-align","right"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",6),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"label",10),c["\u0275\u0275text"](17,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",13),c["\u0275\u0275elementStart"](20,"div",9),c["\u0275\u0275elementStart"](21,"button",14),c["\u0275\u0275listener"]("click",(function(){return t.getTrial()})),c["\u0275\u0275text"](22,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",15),c["\u0275\u0275elementStart"](24,"table",16),c["\u0275\u0275elementStart"](25,"thead",17),c["\u0275\u0275elementStart"](26,"tr"),c["\u0275\u0275elementStart"](27,"th"),c["\u0275\u0275text"](28,"Cost Category"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"th"),c["\u0275\u0275text"](30,"Amount(DR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"th"),c["\u0275\u0275text"](32,"Amount(CR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"th"),c["\u0275\u0275text"](34,"Closing Balance"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",18),c["\u0275\u0275template"](36,el,12,9,"tbody",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](37,tl,4,1,"div",20)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.trialBalanceData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,E.t,E.u,E.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:260px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:260px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}th[_ngcontent-%COMP%]{position:-webkit-sticky!important;position:sticky!important;top:0;z-index:1!important}.mytbody[_ngcontent-%COMP%]{height:calc(100vh - 253px)!important;overflow:auto!important}"]}),e})();function ol(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"auto-suggetion-in-side",29),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","y_ledger_name")})),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",e.ledgerData)}}const al=function(e,t,n){return{highlight:e,greterline:t,lowerline:n}};function il(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",30),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucher_id)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().getBookDetail(n.y_voucherid,n.y_code)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275pipe"](16,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275text"](18),c["\u0275\u0275pipe"](19,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"td"),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction3"](19,al,o.selectedRow==n,e.y_days>1,e.y_days<0)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,10,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_ledgername),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_vouchertype),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_voucherno),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_amount),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](16,13,e.y_entry_time,"dd-MMM-yy h:mm")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](19,16,e.y_last_edit_time,"dd-MMM-yy h:mm")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_last_editby)}}function rl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",31),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",32),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",33),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.bankBook[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.bankBook[e.f2Date])}}let ll=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.selectedName="",this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:0,issumrise:"true"},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.getLedgers(),this.setFoucus("ledger"),this.common.currentPage="Voucher Audit"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}ngAfterViewInit(){}refresh(){this.getBranchList(),this.getLedgers(),this.setFoucus("ledger")}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getLedgers(){let e="Suggestion/GetLedger?transactionType=credit&voucherId=-1&search=test";console.log("URL: ",e),this.api.get(e).subscribe(e=>{console.log(e),this.ledgerData=e.data,console.log("ledger data new",this.ledgerData[0].y_ledger_id)},e=>{console.error(e),this.common.showError()}),this.setFoucus("ref-code")}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Day Book From :"+this.bankBook.startdate+" To :"+this.bankBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getVoucherEdited(){this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate,console.log("Accounts:",this.bankBook);let e={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,ledger:this.bankBook.ledger.id,vouchertype:this.bankBook.vouchertype};this.common.loading++,this.api.post("Voucher/getVoucherEdited",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.DayData=e.data,this.filterData(),this.DayData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.bankBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.bankBook[e])})}onSelected(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}filterData(){let e=[];this.DayData.map(t=>{-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)})}getBookDetail(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow)return"enter"==t&&this.showDateModal?(this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId)):void("enter"!=t&&this.showDateModal&&(this.activeId.includes("startdate")||this.activeId.includes("enddate"))||("enter"==t?(this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"))):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)));this.getBookDetail(this.DayData[this.selectedRow].y_ledger_id,"")}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}test(e){console.log("--------: ",e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["voucheredited"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:69,vars:7,consts:[[2,"border","0px"],[1,"row"],[1,"col-9","pr-0","pl-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-4","pl-0"],[1,"form-group","mb-0"],[1,"form-group","debit_box","m-0","w-100"],[1,"tjr-label"],[1,"tjr_select","form-control","tjr-input",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"form-group"],[1,"tjr-label","ledger-label"],["type","text","id","ledger","name","ledger","autocomplete","off",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["targetId","ledger","display","y_ledger_name",3,"data","select",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],["targetId","ledger","display","y_ledger_name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"div",9),c["\u0275\u0275elementStart"](12,"label",10),c["\u0275\u0275text"](13,"Filter Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"select",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.vouchertype=e})),c["\u0275\u0275elementStart"](15,"option",12),c["\u0275\u0275text"](16,"voucher date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"option",13),c["\u0275\u0275text"](18,"voucher entry date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"option",14),c["\u0275\u0275text"](20,"lastupdated date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",7),c["\u0275\u0275elementStart"](22,"div",15),c["\u0275\u0275elementStart"](23,"label",16),c["\u0275\u0275text"](24,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bankBook.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",1),c["\u0275\u0275elementStart"](27,"div",18),c["\u0275\u0275elementStart"](28,"div",15),c["\u0275\u0275elementStart"](29,"label",10),c["\u0275\u0275text"](30,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"input",19),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",18),c["\u0275\u0275elementStart"](33,"div",15),c["\u0275\u0275elementStart"](34,"label",10),c["\u0275\u0275text"](35,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"input",20),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",18),c["\u0275\u0275elementStart"](38,"div",15),c["\u0275\u0275elementStart"](39,"button",21),c["\u0275\u0275listener"]("click",(function(){return t.getVoucherEdited()})),c["\u0275\u0275text"](40,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",22),c["\u0275\u0275elementStart"](42,"div",15),c["\u0275\u0275elementStart"](43,"div",23),c["\u0275\u0275template"](44,ol,1,1,"auto-suggetion-in-side",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"table",25),c["\u0275\u0275elementStart"](46,"thead",26),c["\u0275\u0275elementStart"](47,"tr"),c["\u0275\u0275elementStart"](48,"th"),c["\u0275\u0275text"](49,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"th"),c["\u0275\u0275text"](51,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](52,"th"),c["\u0275\u0275text"](53,"Ledger Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"th"),c["\u0275\u0275text"](55,"Vch Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](56,"th"),c["\u0275\u0275text"](57,"Vch No."),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"th"),c["\u0275\u0275text"](59,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](60,"th"),c["\u0275\u0275text"](61," Entry Time"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](62,"th"),c["\u0275\u0275text"](63,"Last Edit Time"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](64,"th"),c["\u0275\u0275text"](65,"Edit By"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](66,"tbody"),c["\u0275\u0275template"](67,il,22,23,"tr",27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](68,rl,4,1,"div",28)),2&e&&(c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngModel",t.bankBook.vouchertype),c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.bankBook.ledger.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngIf",t.ledgerData.length),c["\u0275\u0275advance"](23),c["\u0275\u0275property"]("ngForOf",t.DayData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.D,k.r,k.u,k.w,k.G,k.d,k.m,E.u,E.t,w.a,E.r],pipes:[E.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:130px;border-right-color:#263238}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:190px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:130px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:190px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{font-size:30px;color:#9f0001}.exel-icon[_ngcontent-%COMP%]{font-size:30px;color:#217346}.debit_box[_ngcontent-%COMP%]{margin-left:17px}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.greterline[_ngcontent-%COMP%]{background-color:#fe5c5c!important;color:#fff!important}.lowerline[_ngcontent-%COMP%]{background-color:#e61a1a!important}.labtrj[_ngcontent-%COMP%]{margin-left:17px!important}.ledger-label[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();var sl=n("yd97");const cl=function(e){return{highlight:e}};function dl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openVoucherEdit(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,cl,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_ref_no),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_vehicle_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_fuel_station),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_amount)}}let ml=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.accountService=n,this.modalService=o,this.trips=[],this.regno="",this.fuelstation="",this.checkedTrips=[],this.fuelFilings=[],this.tripHeads=[],this.tripVouchers=[],this.vehicles=[],this.VoucherEditTime=[],this.flag=!1,this.enddate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startdate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.enddate,this.common.currentPage="Fuel Voucher"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}getVehicle(e){this.selectedVehicle=e,this.flag=!0,this.getTripSummary()}getFuelFilling(e){console.log("fuel fillin",e),this.selectedFuelFilling=e}getFuelVoucher(){this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate;const e={vehId:this.selectedVehicle?this.selectedVehicle.id:0,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling?this.selectedFuelFilling.id:0};this.common.loading++,this.api.post("FuelDetails/getFuelVoucher",e).subscribe(e=>{console.log(e),this.common.loading--,this.trips=e.data},e=>{console.log(e),this.common.loading--,this.common.showError()})}getDataFuelFillings(){if(this.startdate=this.accountService.fromdate,this.enddate=this.accountService.todate,this.accountService.selected.branch.id)if(console.log("params model",this.common.params),this.selectedVehicle&&0!=this.selectedVehicle.id)if(this.selectedFuelFilling&&0!=this.selectedFuelFilling.id){const e={vehId:this.selectedVehicle?this.selectedVehicle.id:0,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling?this.selectedFuelFilling.id:0};this.common.loading++,this.api.post("Fuel/getFeulfillings",e).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,this.getFuelFillings(e.data)):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError()})}else this.common.showError("Please Select Fuel Station");else this.common.showError("Please Select Vehicle");else this.common.showError("Please Select branch")}checkedAllSelected(){this.checkedTrips=[];for(let e=this.findFirstSelectInfo("index");e<=this.findLastSelectInfo("index");e++)this.trips[e].isChecked=!0,this.checkedTrips.push(this.trips[e])}getFuelFillings(e){this.accountService.selected.branch.id?(console.log("Branch ID :",this.accountService.selected.branch.id),this.common.params={vehId:this.selectedVehicle.id,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:this.selectedFuelFilling,fuelData:e},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e),e.success&&this.getFuelVoucher()})):this.common.showError("Please Select Branch")}findFirstSelectInfo(e="startDate"){let t={startDate:"",index:-1};for(let n=0;n<this.trips.length;n++)if(this.trips[n].isChecked){t.startDate=this.trips[n].start_time,t.index=n;break}return t[e]}addFuel(){this.common.params={rowfilling:{fdate:null,litres:null,is_full:null,regno:null,rate:null,amount:null,pp:null,fuel_station_id:null,vehicle_id:null,id:null,ref_type:null,ref_id:null},title:"Add Fuel Filling"},this.modalService.open(sl.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}findLastSelectInfo(e="endDate"){let t={endDate:"",index:-1};for(let n=this.trips.length-1;n>=0;n--)if(this.trips[n].isChecked){t.endDate=this.trips[n].end_time,t.index=n;break}return t[e]}getHeads(){this.common.loading++,this.api.post("Accounts/getLedgerHeadList",{}).subscribe(e=>{console.log(e),this.common.loading--,this.tripHeads=e.data,this.tripHeads.map(e=>{let t=[];this.trips.map(e=>{e.isChecked&&t.push({id:e.id,amount:0,start_time:e.start_time,end_time:e.end_time,start_name:e.start_name,end_name:e.end_name})}),e.trips=t,e.total=0;let n=[];this.fuelFilings.map(e=>{e.isChecked&&n.push({id:e.id})}),e.fuelFilings=n})},e=>{console.log(e),this.common.loading--,this.common.showError()})}addVoucher(){console.log("Trips: ",this.tripHeads);const e={vehId:this.selectedVehicle.id,voucher_details:this.tripHeads};this.common.loading++,this.api.post("TripExpenseVoucher/InsertTripExpenseVoucher",e).subscribe(e=>{console.log("Res: ",e),this.common.loading--},e=>{console.log(e),this.common.loading--})}calculateTripHeadTotal(e){console.log("Index: ",e),this.tripHeads[e].total=0,this.tripHeads[e].trips.map(t=>{this.tripHeads[e].total+=t.amount}),console.log("Total: ",this.tripHeads[e].total)}getTripSummary(){const e={vehId:this.selectedVehicle.id};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVouchers",e).subscribe(e=>{console.log(e),this.common.loading--,this.tripVouchers=e.data},e=>{console.log(e),this.common.loading--,this.common.showError()})}openVoucherEdit(e){let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucher_id)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucher_id)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:e.y_fuel_station_id,fuelData:this.fuelFilings,voucherId:e.y_voucher_id,voucherData:this.VoucherEditTime,vehname:this.trips[0].y_vehicle_name},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e),e.success&&this.getFuelVoucher()})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}deleteVoucherEntry(e){let t={voucherId:e.id};console.log("params",t),this.common.loading++,this.api.post("TripExpenseVoucher/deleteTripExpenseVouchers",t).subscribe(e=>{this.common.loading--,console.log("res",e.data),e.success&&(this.common.showToast("Success!!"),this.getTripSummary())},e=>{this.common.loading--,this.common.showError()})}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;console.log("Active event 1111",e,n),"enter"==t&&(n.includes("suggestion")?this.setFoucus("vchtype"):n.includes("startdate")?this.setFoucus("enddate"):n.includes("enddate")&&this.setFoucus("btnSubmit"))}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log("edit time voucher detail",e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.startdate,currentFilling:this.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Trip Voucher Expence :"+this.startdate+" To :"+this.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["fuelfillings"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:55,vars:7,consts:[[1,"row","pdf-exel-icon"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mt-4"],[1,"col-sm-2","pl-0"],[1,"tjr-label"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Enter Reg No",3,"id","preSelected","onSelected"],["url","Suggestion/GetFuelStation","display","name","placeholder","Enter Fuel Station",3,"id","preSelected","onSelected"],[1,"col","pl-0"],[1,"form-group"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","btnSubmit",1,"btn","btn-primary","w-100","mt-3",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"col","pl-0","pr-0"],[1,"mt-2"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"span",1),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](4,"i",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](6,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"label",7),c["\u0275\u0275text"](10,"Vehicle No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"auto-suggestion",8),c["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",6),c["\u0275\u0275elementStart"](13,"label",7),c["\u0275\u0275text"](14,"Fuel Station"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"auto-suggestion",9),c["\u0275\u0275listener"]("onSelected",(function(e){return t.getFuelFilling(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",10),c["\u0275\u0275elementStart"](17,"div",11),c["\u0275\u0275elementStart"](18,"label",7),c["\u0275\u0275text"](19,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",10),c["\u0275\u0275elementStart"](22,"div",11),c["\u0275\u0275elementStart"](23,"label",7),c["\u0275\u0275text"](24,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",10),c["\u0275\u0275elementStart"](27,"button",14),c["\u0275\u0275listener"]("click",(function(){return t.getFuelVoucher()})),c["\u0275\u0275text"](28,"Filter"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",10),c["\u0275\u0275elementStart"](30,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.getDataFuelFillings()})),c["\u0275\u0275text"](31,"Add Fuel Voucher"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",16),c["\u0275\u0275elementStart"](33,"button",15),c["\u0275\u0275listener"]("click",(function(){return t.addFuel()})),c["\u0275\u0275text"](34,"Add Fuel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",17),c["\u0275\u0275elementStart"](36,"table",18),c["\u0275\u0275elementStart"](37,"thead",19),c["\u0275\u0275elementStart"](38,"tr"),c["\u0275\u0275elementStart"](39,"th"),c["\u0275\u0275text"](40,"SN"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"th"),c["\u0275\u0275text"](44,"Ref No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"th"),c["\u0275\u0275text"](46,"Vehicle Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](47,"th"),c["\u0275\u0275text"](48,"Fuel Station"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"th"),c["\u0275\u0275text"](50,"Quantity"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](51,"th"),c["\u0275\u0275text"](52,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"tbody"),c["\u0275\u0275template"](54,dl,15,10,"tr",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("id",t.regno)("preSelected",null),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("id",t.fuelstation)("preSelected",null),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](29),c["\u0275\u0275property"]("ngForOf",t.trips))},directives:[h.s,h.r,Cn.a,k.d,k.m,k.r,k.u,E.t,E.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:5%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}auto-suggestion   [_nghost-%COMP%]     .form-control{border:1px solid #263238!important;border-radius:0 2px 2px 2px!important;padding:3px 5px!important;height:auto!important;font-size:12px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important}.pdf-exel-icon[_ngcontent-%COMP%]{margin-left:8px}"]}),e})();function hl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275elementStart"](4,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.selected=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().changeStatus(n.y_vehicle_name)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("name","list-"+n)("ngModel",e.selected),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_vehicle_name)}}let pl=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.vehCostList=[],this.vehlist=[],this.getVehicleCostCenterList(),this.common.currentPage="Vehicle Cost Center List"}ngOnInit(){}getVehicleCostCenterList(){this.vehlist=[],this.common.loading++,this.api.post("accounts/getVehCostCenterList",{}).subscribe(e=>{this.common.loading--,this.vehCostList=e.data,console.log("res",e.data)},e=>{this.common.loading--,this.common.showError()})}selectAll(){if(this.selectedAll)for(var e=0;e<this.vehCostList.length;e++)this.vehCostList[e].selected=this.selectedAll,this.vehlist.push(this.vehCostList[e].y_vehicle_name);else for(e=0;e<this.vehCostList.length;e++)this.vehCostList[e].selected=!1,this.vehlist=[];console.log("vehList",this.vehlist),console.log("select All",this.selectAll)}changeStatus(e){console.log("index",e),this.vehlist.push(e),console.log("vehList",this.vehlist)}saveCostCenterList(){let e="ARRAY[";this.vehlist.map(t=>{e+=`'${t}',`}),e=e.slice(0,-1)+"]",console.log("String::",e);let t={cost_center_list:e};console.log("params",t),this.common.loading++,this.api.post("accounts/saveCostCenterList",t).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.common.showToast(e.msg)},e=>{this.common.loading--,this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["vehicle-cost-center-list"]],decls:17,vars:2,consts:[[2,"padding-top","26px"],[1,"table","table-bordered"],["type","checkbox","name","vlist",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"text-align","right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["type","checkbox",3,"name","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"table",1),c["\u0275\u0275elementStart"](4,"thead"),c["\u0275\u0275elementStart"](5,"tr"),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"SN"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275elementStart"](9,"input",2),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedAll=e}))("ngModelChange",(function(){return t.selectAll()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Vehicle Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"tbody"),c["\u0275\u0275template"](13,hl,7,4,"tr",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",4),c["\u0275\u0275elementStart"](15,"button",5),c["\u0275\u0275listener"]("click",(function(){return t.saveCostCenterList()})),c["\u0275\u0275text"](16,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.selectedAll),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",t.vehCostList))},directives:[h.s,h.r,k.a,k.r,k.u,E.t],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 192px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}"]}),e})();const gl=function(e){return{highlight:e}};function ul(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",18),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,gl,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,8,e.fuel_fill_date,"dd MMM")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.vehicle_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.fuel_station),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.rate),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.amount)}}function bl(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tbody"),c["\u0275\u0275template"](1,ul,16,13,"tr",17),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.voucherDetails)}}function vl(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,7,e.fuel_fill_date,"dd MMM yyyy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.vehicle_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.fuel_station),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.qty),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.rate),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.amount)}}function xl(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tbody"),c["\u0275\u0275elementStart"](1,"tr",19),c["\u0275\u0275elementStart"](2,"td"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](9,"td"),c["\u0275\u0275element"](10,"td"),c["\u0275\u0275element"](11,"td"),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](14,vl,16,10,"tr",15),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](6,5,e.date,"dd MMM yyyy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.voucherName),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](e.amount),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.details)}}function fl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",20),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",22),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().f2Date=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.f2Date)}}let yl=(()=>{class e{constructor(e,t,n,o,a){this.api=e,this.common=t,this.user=n,this.accountService=o,this.modalService=a,this.fuelVoucher={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew((new Date).setDate((new Date).getDate()-2),"ddMMYYYY",!1,"-"),type:1},this.activeId="",this.showTable=!1,this.voucherDetails=[],this.mappedDetails=[],this.mappedVoucher=[],this.selectedRow=-1,this.showDateModal=!1,this.f2Date="",this.activedateid="",this.allowBackspace=!0,this.lastActiveId="startdate",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.fuelVoucher.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.fuelVoucher.enddate,this.common.currentPage="Mapped Fuel Voucher",this.getFuelVoucher()}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}getFuelVoucher(){let e;this.fuelVoucher.startdate=this.accountService.fromdate,this.fuelVoucher.enddate=this.accountService.todate,this.voucherDetails=[],this.mappedDetails=[];let t=this.fuelVoucher.startdate;t=this.handleDateOnSubmit(t);let n=this.fuelVoucher.enddate;n=this.handleDateOnSubmit(n),console.log("start end",t,n),this.fuelVoucher.startdate=this.common.handleDateOnEnterNew(this.fuelVoucher.startdate),this.fuelVoucher.enddate=this.common.handleDateOnEnterNew(this.fuelVoucher.enddate),console.log("start and end",this.fuelVoucher.startdate,this.fuelVoucher.enddate),e=0!=this.fuelVoucher.type;let o={startDate:t,endDate:n,type:""+e};console.log("params",o),this.common.loading++,this.api.post("Accounts/getMappedFuelVoucher",o).subscribe(e=>{this.common.loading--,console.log("res",e.data),null==e.data?this.common.showToast("Record Empty !!"):(this.voucherDetails=e.data,this.showTable=!0,1==this.fuelVoucher.type&&this.getVoucherGroup(this.voucherDetails))},e=>{this.common.loading--,this.common.showError()})}changeModal(e){console.log("hello",e),this.voucherDetails=[],this.mappedDetails=[]}handleDateOnSubmit(e){let t=[],n=e;n.includes("-")?t=n.split("-"):n.includes("/")&&(t=n.split("/"));let o=t[0];o=1==o.length?"0"+o:o;let a=t[1];a=1==a.length?"0"+a:a;let i=t[2];return i=1==i.length?"200"+i:2==i.length?"20"+i:i,console.log("Date: ",o+"-"+a+"-"+i),n=i+"-"+a+"-"+o,n}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,"startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleOrderDateOnEnter(this.activeId),void this.setFoucus("enddate");if("enter"!=t&&this.showDateModal&&(this.activeId.includes("startdate")||this.activeId.includes("enddate")))return}else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();t.includes("arrow")&&(this.allowBackspace=!1,e.preventDefault(),(t.includes("arrowup")||t.includes("arrowdown"))&&this.voucherDetails.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.voucherDetails.length-1&&this.selectedRow++)),"enter"==t&&(this.activeId.includes("startdate")?this.setFoucus("enddate"):this.activeId.includes("enddate")&&this.setFoucus("submit"))}getVoucherGroup(e){let t=Ut.groupBy(e,"voucher_no");this.mappedDetails=[],Object.keys(t).map(e=>{this.mappedDetails.push({voucherName:e,date:t[e][0].voucher_date,amount:t[e][0].voucher_amount,details:t[e]})}),console.log("VoucheL:::::::::::::",t,this.mappedDetails)}handleOrderDateOnEnter(e){let t=[],n="-";console.log("starting date 122 :",this.activedateid);let o="startdate"==this.activedateid?"startdate":"enddate";if(this.f2Date.includes("-"))t=this.f2Date.split("-");else{if(!this.f2Date.includes("/"))return void this.common.showError("Invalid Date Format!");t=this.f2Date.split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.fuelVoucher[o]=a+n+i+n+r,console.log("data parameter",o,this.fuelVoucher)}setFoucus(e,t=!0){console.log("Id: ",e),setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["mapped-fuel-voucher"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:46,vars:9,consts:[[1,"row"],[1,"col-6","pl-0","pr-0"],[1,"col-sm-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange","click","input"],[1,"col-sm-3","pl-0"],["autocomplete","off","type","radio","name","mapping","id","mapping",2,"margin-top","20px",3,"ngModel","value","ngModelChange","change"],["autocomplete","off","type","radio","name","unmapping","id","unmapping",2,"margin-top","20px",3,"ngModel","value","ngModelChange","change"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer",3,"click"],[1,"table","table-bordered"],[1,"thead"],["id","heading-row"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"background","#184154","color","aliceblue"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",0),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"div",0),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275elementStart"](6,"div",3),c["\u0275\u0275elementStart"](7,"label",4),c["\u0275\u0275text"](8,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e}))("click",(function(){return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",2),c["\u0275\u0275elementStart"](11,"div",3),c["\u0275\u0275elementStart"](12,"label",4),c["\u0275\u0275text"](13,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e}))("click",(function(){return t.lastActiveId="account-date",t.allowBackspace=!1}))("input",(function(){return t.allowBackspace=!1})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",1),c["\u0275\u0275elementStart"](16,"div",7),c["\u0275\u0275elementStart"](17,"input",8),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fuelVoucher.type=e}))("change",(function(){return t.changeModal(t.fuelVoucher.type)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](18,"\xa0UnMapping "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",7),c["\u0275\u0275elementStart"](20,"input",9),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fuelVoucher.type=e}))("change",(function(){return t.changeModal(t.fuelVoucher.type)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](21,"\xa0Mappping "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",7),c["\u0275\u0275elementStart"](23,"button",10),c["\u0275\u0275listener"]("click",(function(){return t.getFuelVoucher()})),c["\u0275\u0275text"](24,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div"),c["\u0275\u0275elementStart"](26,"table",11),c["\u0275\u0275elementStart"](27,"thead",12),c["\u0275\u0275elementStart"](28,"tr",13),c["\u0275\u0275elementStart"](29,"th"),c["\u0275\u0275text"](30,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"th"),c["\u0275\u0275text"](32,"Fuel Fill Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"th"),c["\u0275\u0275text"](34,"Vehicle Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"th"),c["\u0275\u0275text"](36,"Fuel Station"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"th"),c["\u0275\u0275text"](38,"Qty (Liter)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"th"),c["\u0275\u0275text"](40,"Rate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](43,bl,2,1,"tbody",14),c["\u0275\u0275template"](44,xl,15,8,"tbody",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](45,fl,4,1,"div",16)),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.fuelVoucher.type)("value",0),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.fuelVoucher.type)("value",1),c["\u0275\u0275advance"](23),c["\u0275\u0275property"]("ngIf",0==t.fuelVoucher.type),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.mappedDetails),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,k.z,E.u,E.t,E.r],pipes:[E.f],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:180px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:180px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 245px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:8px!important;border-radius:3px!important;border:0;margin-top:12px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}"]}),e})();const Cl=function(e){return{highlight:e}};function _l(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",15),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275elementStart"](4,"input",16),c["\u0275\u0275listener"]("ngModelChange",(function(n){return c["\u0275\u0275restoreView"](e),t.$implicit.selected=n}))("ngModelChange",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().changeStatus(n.name)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](5,Cl,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("name","list-"+n)("ngModel",e.selected),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name)}}let Sl=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.modalService=n,this.vehList=[],this.vehLedgerList=[],this.underGroupRes=[],this.showList=!1,this.repearLoop=!1,this.underGroupDetails={name:"",id:"",primarygroup_id:""},this.selectedRow=-1,this.common.refresh=this.refresh.bind(this),this.getVehList(),this.setAutoSuggestion(),this.common.currentPage="Vehicle Ledger"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}getVehList(){this.common.loading++,this.api.post("Accounts/vehicleLedger",{}).subscribe(e=>{this.common.loading--,console.log("res",e.data),this.vehList=e.data},e=>{this.common.loading--,this.common.showError()})}selectAll(){if(this.selectedAll)for(var e=0;e<this.vehList.length;e++)this.vehList[e].selected=this.selectedAll,this.vehLedgerList.push(this.vehList[e].name);else for(e=0;e<this.vehList.length;e++)this.vehList[e].selected=!1,this.vehLedgerList=[];console.log("vehLedgerList",this.vehLedgerList),console.log("select All",this.selectAll)}changeStatus(e){console.log("index",e),this.vehLedgerList.push(e),console.log("vehList",this.vehLedgerList)}setAutoSuggestion(){this.common.loading++,this.api.post("Suggestion/getAllUnderGroupData",{search:123,conditionid:1}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.underGroupRes=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}searchGroupInfo(){let e,t,n,o,a;for(this.showList=!0,e=document.getElementById("undergroup"),t=e.value,console.log("input",t.toUpperCase()),n=document.getElementById("gorup_list"),console.log("gl",n),o=n.getElementsByTagName("li"),console.log("li",o),a=0;a<o.length;a++){let e=" "+o[a].textContent||!1;e=e.toUpperCase(),e.includes(t.toUpperCase())?(o[a].style.display="block",console.log("matches")):(o[a].style.display="none",console.log(" not match"))}}async saveVehicleLedgerList(){let e=[];for(let t=0;t<this.vehLedgerList.length;t++){const n={name:this.vehLedgerList[t],alias_name:this.vehLedgerList[t],code:"",account_id:this.underGroupDetails.id,per_rate:0,primarygroupid:0,accDetails:"",branchname:"",branchcode:"",accnumber:"",creditdays:0,openingbalance:0,isdr:1,approved:1,deleteview:0,delete:0,x_id:0,bankname:"",costcenter:0,taxtype:"",taxsubtype:"",isnon:!0,hsnno:"",hsndetail:"",gst:!1,cess:"",igst:"",taxability:"",calculationtype:""};console.log("params",n);let o=new Promise((e,t)=>{this.api.post("Accounts/InsertLedger",n).subscribe(t=>e(t.data),e=>t(e))});e.push(o)}Promise.all(e).then(e=>{this.common.showToast("Ledger Has been saved!"),this.getVehList(),console.log("_______________Promise____________Output:",e)}).catch(e=>{console.log("__________________Promise____________Error:",e),this.common.showError()})}refresh(){this.getVehList()}onSelected(e,t,n){console.log("selectedData",e),this.underGroupDetails.name=e[n],this.underGroupDetails.id=e.id,this.underGroupDetails.primarygroup_id=e.primarygroup_id}keyHandler(e){const t=e.key.toLowerCase();(t.includes("arrowup")||t.includes("arrowdown"))&&t.includes("undergroup")||(t.includes("arrowup")||t.includes("arrowdown"))&&this.vehList.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.vehList.length-1&&this.selectedRow++)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["vehicle-ledgers"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:28,vars:4,consts:[[2,"padding-top","26px"],[1,"row","mb-3"],[1,"col-sm-3"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","type","text","id","undergroup","name","undergroup","placeholder","Please Search Under Group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-sm-9"],[1,"under-group"],[1,"auto-sugg"],["targetId","undergroup","display","name",3,"data","select"],[1,"table","table-bordered"],["type","checkbox","name","vlist",3,"ngModel","ngModelChange"],[3,"ngClass","click",4,"ngFor","ngForOf"],[2,"text-align","right"],["type","button","outline","","id","submit",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],[3,"ngClass","click"],["type","checkbox",3,"name","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"label",4),c["\u0275\u0275text"](6,"Under Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.underGroupDetails.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"div",3),c["\u0275\u0275elementStart"](12,"auto-suggetion-in-side",9),c["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"undergroup","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div"),c["\u0275\u0275elementStart"](14,"table",10),c["\u0275\u0275elementStart"](15,"thead"),c["\u0275\u0275elementStart"](16,"tr"),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18,"SN"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"th"),c["\u0275\u0275elementStart"](20,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedAll=e}))("ngModelChange",(function(){return t.selectAll()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"th"),c["\u0275\u0275text"](22,"Vehicle Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"tbody"),c["\u0275\u0275template"](24,_l,7,7,"tr",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",13),c["\u0275\u0275elementStart"](26,"button",14),c["\u0275\u0275listener"]("click",(function(){return t.saveVehicleLedgerList()})),c["\u0275\u0275text"](27,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngModel",t.underGroupDetails.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("data",t.underGroupRes),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",t.selectedAll),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",t.vehList))},directives:[h.s,h.r,k.d,k.r,k.u,w.a,k.a,E.t,E.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:3px!important;text-transform:capitalize!important;padding:5px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#263238!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed;background-color:#263238;color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:140px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 323px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.under-group[_ngcontent-%COMP%]{min-width:200px;float:right;background-color:#ccc}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:5px;margin:0;overflow:auto;height:112px;border:1px solid #ccc}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:1px solid #263238;padding:2px 8px;border-radius:3px;font-size:12px;font-weight:400;background-color:#263238;margin-bottom:3px;color:#fff}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .active-suggestion[_ngcontent-%COMP%]{background-color:teal;font-weight:400}.under-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-top:1px solid #ccc}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}"]}),e})();function Ml(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",26),c["\u0275\u0275elementStart"](1,"a",27),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function El(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",26),c["\u0275\u0275elementStart"](1,"a",28),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2,"Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function wl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",29),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"vouchertype","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.vouchertypedata)}}function kl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",30),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerData)}}function Pl(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"th"),c["\u0275\u0275text"](1,"Branch"),c["\u0275\u0275elementEnd"]())}function Ol(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275elementStart"](1,"i",32),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().imageOpen(t)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Il(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_company_branch,"")}}const Dl=function(e,t){return{highlight:e,highlightcolor:t}};function Vl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",31),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"]();return n.y_type.toLowerCase().includes("voucher")?n.y_type.toLowerCase().includes("trip")?o.openConsignmentVoucherEdit(n):n.y_type.toLowerCase().includes("fuel")?o.openFuelEdit(n):o.openVoucherEdit(n.y_voucherid,n.y_vouchertype_id):n.y_type.toLowerCase().includes("stock")?o.openStoreQuestionEdit(n):o.openServiceSalesInvoicemodel(n,n.y_voucherid,n.y_vouchertype_id)}))("enter",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openVoucherEdit(n.y_voucherid)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275text"](7),c["\u0275\u0275template"](8,Ol,2,0,"span",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](17,Il,2,1,"td",23),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction2"](13,Dl,o.selectedRow==n,o.DayData.length-1==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](5,10,e.y_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("",e.y_particulars," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.y_docscount>0),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_type),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](null!=e.y_date?e.y_code+"/"+e.y_cust_code:""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_dramunt),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_cramunt),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==o.accountService.selected.branch.id)}}function Fl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",33),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",34),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",35),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.DayBook[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.DayBook[e.f2Date])}}let Tl=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.route=n,this.user=o,this.modalService=a,this.accountService=i,this.router=r,this.selectedName="",this.activedateid="",this.fuelFilings=[],this.flag=0,this.DayBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},branch:{name:"All",id:0},vouchertype:{name:"All",id:0},issumrise:"true",isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.lastActiveId="",this.showDateModal=!1,this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="vouchertype",this.selectedRow=-1,this.allowBackspace=!0,this.deletedId=0,this.f2Date="startdate",this.TripEditData=[],this.pendingDataEditTme=[],this.VoucherEditTime=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.DayBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.DayBook.enddate,this.common.refresh=this.refresh.bind(this),this.getVoucherTypeList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.common.currentPage="Voucher Pending",this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.deletedId=parseInt(e.id)),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1})}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){this.getVoucherTypeList(),this.getBranchList(),this.getAllLedger(),this.setFoucus("vouchertype"),this.getDayBook()}ngAfterViewInit(){}getVoucherTypeList(){this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.vouchertypedata=e.data,this.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getBranchList(){this.common.loading++,this.api.post("Suggestion/GetBranchList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.branchdata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openinvoicemodel(e,t){this.common.params={invoiceid:e,delete:this.deletedId,approveid:4,ordertype:t},this.modalService.open(St.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&(console.log("open succesfull"),this.getDayBook())})}getAllLedger(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDayBook(){console.log("Accounts:",this.DayBook),this.DayBook.startdate=this.accountService.fromdate,this.DayBook.enddate=this.accountService.todate;let e={startdate:this.DayBook.startdate,enddate:this.DayBook.enddate,ledger:this.DayBook.ledger.id,branchId:this.DayBook.branch.id,vouchertype:this.DayBook.vouchertype.id,delete:this.deletedId,forapproved:0,isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount};this.common.loading++,this.api.post("Company/GetDayBook",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.DayData=e.data,this.filterData(),this.DayData.length&&(document.activeElement.blur(),this.selectedRow=0)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDate(e){this.modalService.open(v.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(t=>{this.DayBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.DayBook[e])})}onSelected(e,t,n){this.DayBook[t].name=e[n],this.DayBook[t].id=e.id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.DayBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.DayBook[o].includes("-"))t=this.DayBook[o].split("-");else{if(!this.DayBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.DayBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.DayBook[o]=a+n+i+n+r}filterData(){let e=[];this.DayData.map(t=>{-1!==e.indexOf(t.y_code)&&(t.y_code=" ",t.y_date=0)})}getBookDetail(e){console.log("vouher id",e),this.common.params=e,this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("branch")?this.setFoucus("vouchertype"):this.activeId.includes("vouchertype")?this.setFoucus("ledger"):"ledger"==this.activeId?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.DayBook.startdate=this.common.handleDateOnEnterNew(this.DayBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.DayBook.enddate=this.common.handleDateOnEnterNew(this.DayBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger"),"ledger"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&this.DayData.length&&(console.log("-Jai rana---"),"arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}else this.getBookDetail(this.DayData[this.selectedRow].y_voucherid)}openVoucherEdit(e,t){console.log("ledger123",e),e&&(this.common.params={voucherId:e,delete:2,voucherTypeId:t},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{e.delete&&this.getDayBook()}))}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Voucher Pending From :"+this.DayBook.startdate+" To :"+this.DayBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}test(e){console.log("--------: ",e)}imageOpen(e){console.log("dataItem:",e);let t={voucherid:e.y_voucherid};this.common.loading++,this.api.post("Accounts/getvoucherdocs",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.common.params={images:e.data,title:"Image"},this.modalService.open(Et.a,{size:"lg",container:"nb-layout",backdrop:"static"})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log("Error:",e),this.common.showError("There is some technical error occured. Please Try Again!")})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}showVoucherSummary(e,t,n){let o=t.y_vehicle_id,a=this.TripEditData,i=this.pendingDataEditTme,r=this.VoucherEditTime,l=this.deletedId;-151==n.y_vouchertype_id?(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,Approved:1,typeFlag:l},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(kt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getDayBook()})):(this.common.params={vehId:o,tripDetails:e,tripVoucher:t,tripEditData:a,tripPendingDataSelected:i,VoucherData:r,tripExpDriver:this.tripExpDriver,Approved:1,typeFlag:l},console.log("tripPendingDataSelected",i,"this.common.params",this.common.params),this.modalService.open(wt.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{e.response&&this.getDayBook()}))}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}openStoreQuestionEdit(e){this.common.params={storeRequestId:-2==e.y_vouchertype_id?-3:e.y_vouchertype_id,stockQuestionId:e.y_voucherid,stockQuestionBranchid:e.y_fobranchid,pendingid:-2==e.y_vouchertype_id?0:1,approveId:1},this.modalService.open(Pt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{console.log("responce data return",e)})}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_fuel_station_id,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:e.y_fuel_station_id,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e),e.success&&this.getDayBook()})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.DayBook.startdate,currentFilling:this.DayBook.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}addvance(){this.common.params={isamount:this.DayBook.isamount,remarks:this.DayBook.remarks,vouchercustcode:this.DayBook.vouchercustcode,vouchercode:this.DayBook.vouchercode,frmamount:this.DayBook.frmamount,toamount:this.DayBook.toamount},this.modalService.open(Ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: ",e),e.response&&(this.DayBook.isamount=e.ledger.isamount,this.DayBook.remarks=e.ledger.remarks,this.DayBook.vouchercustcode=e.ledger.vouchercustcode,this.DayBook.vouchercode=e.ledger.vouchercode,this.DayBook.frmamount=e.ledger.frmamount,this.DayBook.toamount=e.ledger.toamount,this.flag=0!=e.ledger.toamount||0!=e.ledger.frmamount||""!=e.ledger.vouchercode||""!=e.ledger.vouchercustcode||""!=e.ledger.remarks||0!=e.ledger.isamount?1:0)})}openServiceSalesInvoicemodel(e,t,n,o=0){this.common.params={invoiceid:t,delete:this.deletedId,newid:o,ordertype:n,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e),e.msg&&(console.log("open succesfull"),this.getDayBook())})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["daybookpending"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:62,vars:11,consts:[[2,"padding-top","0px","border","0px"],[1,"row"],[1,"col-9","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledger","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-4","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pr-0","pl-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[4,"ngIf"],[3,"ngClass","click","dblclick","enter",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",2,"cursor","pointer","margin-top","18px",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",2,"cursor","pointer","margin-top","18px",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledger","display","name",3,"data","select"],[3,"ngClass","click","dblclick","enter"],[1,"far","fa-image",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",1),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"label",9),c["\u0275\u0275text"](12,"Voucher"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.vouchertype.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275elementStart"](16,"label",9),c["\u0275\u0275text"](17,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.DayBook.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",1),c["\u0275\u0275elementStart"](20,"div",12),c["\u0275\u0275elementStart"](21,"div",8),c["\u0275\u0275elementStart"](22,"label",9),c["\u0275\u0275text"](23,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",12),c["\u0275\u0275elementStart"](26,"div",8),c["\u0275\u0275elementStart"](27,"label",9),c["\u0275\u0275text"](28,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",15),c["\u0275\u0275template"](31,Ml,3,0,"div",16),c["\u0275\u0275template"](32,El,3,0,"div",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",15),c["\u0275\u0275elementStart"](34,"div",8),c["\u0275\u0275elementStart"](35,"button",17),c["\u0275\u0275listener"]("click",(function(){return t.getDayBook()})),c["\u0275\u0275text"](36,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",18),c["\u0275\u0275elementStart"](38,"div",19),c["\u0275\u0275template"](39,wl,2,1,"div",20),c["\u0275\u0275template"](40,kl,2,1,"div",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"table",21),c["\u0275\u0275elementStart"](42,"thead",22),c["\u0275\u0275elementStart"](43,"tr"),c["\u0275\u0275elementStart"](44,"th"),c["\u0275\u0275text"](45,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"th"),c["\u0275\u0275text"](47,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](48,"th"),c["\u0275\u0275text"](49,"Particular"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"th"),c["\u0275\u0275text"](51,"Vch Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](52,"th"),c["\u0275\u0275text"](53,"Vch No."),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"th"),c["\u0275\u0275text"](55,"Amount(DR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](56,"th"),c["\u0275\u0275text"](57,"Amount(CR)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](58,Pl,2,0,"th",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](59,"tbody"),c["\u0275\u0275template"](60,Vl,18,16,"tr",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](61,Fl,4,1,"div",25)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.DayBook.vouchertype.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.DayBook.ledger.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.flag),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledger")),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngIf",0==t.accountService.selected.branch.id),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.DayData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.r,k.u,k.m,E.u,E.t,w.a,E.r],pipes:[E.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 280px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.far.fa-image[_ngcontent-%COMP%]{display:block;text-align:right;font-size:18px;margin-top:-20px;color:#00ff39;cursor:pointer}.highlightcolor[_ngcontent-%COMP%]{background-color:grey!important}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}"]}),e})();var Bl=n("vZYa"),Al=n("FE1A");const Ll=function(e){return{highlight:e}};function Rl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",20),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openGSTEdit(n.y_details)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"td"),c["\u0275\u0275text"](20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,Ll,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_sno,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_name,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_vount,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_taxval_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_inttax_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_centax_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_statax_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_cess_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_tax_amt,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.y_inv_amt,"")}}function jl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",22),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",23),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.bankBook[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.bankBook[e.f2Date])}}let zl=(()=>{class e{constructor(e,t,n,o,a,i){this.api=e,this.common=t,this.user=n,this.excelService=o,this.modalService=a,this.accountService=i,this.selectedName="",this.headings=[],this.totalLength=0,this.bankBook={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),reportype:"b2b",issumrise:"true"},this.vouchertypedata=[],this.branchdata=[],this.DayData=[],this.ledgerData=[],this.activeId="ledger",this.selectedRow=-1,this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.bankBook.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.bankBook.enddate,this.common.refresh=this.refresh.bind(this),this.setFoucus("startdate"),this.common.currentPage="Gst Report"}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}ngAfterViewInit(){}refresh(){this.setFoucus("ledger")}getTableColumnName(){this.headings=[];let e=this.DayData[0];for(var t in e)this.headings.push(t);console.log("headings",this.headings)}pdfFunction(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getPDFFromTableIdnew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:"")+(e.data[0]?", GST NO -  "+e.data[0].gstno:""),"","","Gst From :"+this.bankBook.startdate+" To :"+this.bankBook.enddate)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getCsvData(){console.log("Accounts:",this.bankBook);let e={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,reporttype:"all"};this.common.loading++,this.api.post("Voucher/getGstAllReport",e).subscribe(e=>{this.common.loading--,console.log("Res report:",e.data[0]),this.csvFunction(e.data),this.totalLength=this.DayData.length},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}csvFunction(e){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(t=>{this.common.loading--,console.log("Res11:",t.data),this.excelService.getMultipleSheetsInExcel(["b2b","b2cl","b2cs","cdnr","cdnur","exp","at","atadj","exemp","hsn","docs"],t.data[0]?t.data[0].foname:"",(t.data[0]?t.data[0].addressline+"\n":"")+(t.data[0]?" Phone Number -  "+t.data[0].phonenumber:""),t.data[0]?", GST NO -  "+t.data[0].gstno:"",e)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getCsvReport(){this.common.loading++,this.api.post("Voucher/GetCompanyHeadingData",{search:"test"}).subscribe(e=>{this.common.loading--,console.log("Res11:",e.data),this.common.getCSVFromTableIdNew("table",e.data[0]?e.data[0].foname:"",(e.data[0]?e.data[0].addressline+"\n":"")+(e.data[0]?" Phone Number -  "+e.data[0].phonenumber:""),"","",e.data[0]?", GST NO -  "+e.data[0].gstno:"")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getVoucherEdited(){this.bankBook.startdate=this.accountService.fromdate,this.bankBook.enddate=this.accountService.todate,console.log("Accounts:",this.bankBook);let e={startdate:this.bankBook.startdate,enddate:this.bankBook.enddate,reporttype:this.bankBook.reportype};this.common.loading++,this.api.post("Voucher/getGstReport",e).subscribe(e=>{this.common.loading--,console.log("Res report:",e.data),this.DayData=e.data,this.totalLength=this.DayData.length},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}counter(e){return new Array(e)}getDate(e){this.modalService.open(v.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(t=>{this.bankBook[e]=this.common.dateFormatternew(t.date).split(" ")[0],console.log(this.bankBook[e])})}onSelected(e,t,n){this.bankBook[t].name=e[n],this.bankBook[t].id=e.y_ledger_id,console.log("Selected Data: ",e,t,n),console.log("order User: ",this.bankBook)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.bankBook[o].includes("-"))t=this.bankBook[o].split("-");else{if(!this.bankBook[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.bankBook[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.bankBook[o]=a+n+i+n+r}openGSTEdit(e){console.log("vouher id",JSON.parse(e)),this.common.params=JSON.parse(e),this.modalService.open(Al.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}RowSelected(e){console.log("data of u",e),this.selectedName=e}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"!=t||this.activeId||!this.DayData.length||-1==this.selectedRow){if("enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("ledger")?this.setFoucus("startdate"):this.activeId.includes("startdate")?(this.bankBook.startdate=this.common.handleDateOnEnterNew(this.bankBook.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.bankBook.enddate=this.common.handleDateOnEnterNew(this.bankBook.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledger");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.DayData.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.DayData.length-1&&this.selectedRow++)}}}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}test(e){console.log("--------: ",e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](Bl.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["gstreport"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:54,vars:4,consts:[[2,"border","0px"],[1,"row"],[1,"col-12","pl-0","pr-0"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row","mt-2","align-items-sm-end"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col","pl-0","pr-0"],[1,"table-box"],["id","table",1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"ngClass","click","dblclick"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275listener"]("click",(function(){return t.pdfFunction()})),c["\u0275\u0275element"](5,"i",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.getCsvReport()})),c["\u0275\u0275element"](7,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",7),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"label",10),c["\u0275\u0275text"](12,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"label",10),c["\u0275\u0275text"](17,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",8),c["\u0275\u0275elementStart"](20,"div",9),c["\u0275\u0275elementStart"](21,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.getVoucherEdited()})),c["\u0275\u0275text"](22,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",14),c["\u0275\u0275elementStart"](24,"div",9),c["\u0275\u0275elementStart"](25,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.getCsvData()})),c["\u0275\u0275text"](26,"Export GST Reports"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",15),c["\u0275\u0275elementStart"](28,"table",16),c["\u0275\u0275elementStart"](29,"thead",17),c["\u0275\u0275elementStart"](30,"tr"),c["\u0275\u0275elementStart"](31,"th"),c["\u0275\u0275text"](32,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"th"),c["\u0275\u0275text"](34,"Particulars"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"th"),c["\u0275\u0275text"](36,"Vouncer Count"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"th"),c["\u0275\u0275text"](38,"Taxeble Value"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"th"),c["\u0275\u0275text"](40,"Integrated Tax Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"Central Tax Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"th"),c["\u0275\u0275text"](44,"State Tax Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"th"),c["\u0275\u0275text"](46,"Cess Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](47,"th"),c["\u0275\u0275text"](48,"Tax Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"th"),c["\u0275\u0275text"](50,"Invoice Amount"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](51,"tbody"),c["\u0275\u0275template"](52,Rl,21,13,"tr",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](53,jl,4,1,"div",19)),2&e&&(c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](34),c["\u0275\u0275property"]("ngForOf",t.DayData),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,E.t,E.u,E.r],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}.table-box[_ngcontent-%COMP%]{overflow:auto;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:115px;font-weight:500}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:115px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;max-height:calc(100vh - 290px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:50px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:115px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.tjr_select[_ngcontent-%COMP%]{border:1px solid #263238!important;border-radius:0 2px 2px 2px!important;padding:3px 5px!important;height:auto!important;font-size:12px!important;display:block;width:100%}.debit_box[_ngcontent-%COMP%]{margin-left:17px}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.greterline[_ngcontent-%COMP%]{background-color:#fe5c5c!important;color:#fff!important}.lowerline[_ngcontent-%COMP%]{background-color:#e61a1a!important}.labtrj[_ngcontent-%COMP%]{margin-left:17px!important}.ledger-label[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();var Nl=n("IheW");function Gl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",14),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().f2Date=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.f2Date)}}let Yl=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.user=n,this.excelService=o,this.csvService=a,this.accountService=i,this.http=r,this.modalService=l,this.headingName="",this.branchname="",this.branchData=[],this.branchType={name:"",id:0},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.refresh=this.refresh.bind(this),this.common.currentPage="Tally Export",this.headingName=this.user._customer.name,this.branchname=this.accountService.selected.branch.name,setTimeout(()=>{this.branchData=this.accountService.branches,console.log("branchesw",this.branchData),this.setFoucus("startDate")},3e3)}ngOnInit(){}refresh(){this.branchname=this.accountService.selected.branch.name,console.log("financial year 122 :",this.accountService.selected.financialYear.name.split("-")[1])}onSelected(e,t,n){console.log("selected data",e),this.branchType.name=e[n],this.branchType.id=e.id,this.setFoucus("startDate")}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;if(console.log("Active event1111",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.f2Date,this.lastActiveId,n),this.handleVoucherDateOnEnter(n),void this.setFoucus(this.lastActiveId);"enter"!=t&&this.showDateModal&&(n.includes("startdate")||n.includes("enddate"))||"enter"==t&&(n.includes("branchType")?this.setFoucus("startDate"):n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")&&this.setFoucus("master"))}handleVoucherDateOnEnter(e){let t=[],n="-",o=this.f2Date;if(o.includes("-"))t=o.split("-");else{if(!o.includes("/"))return void this.common.showError("Invalid Date Format!");t=o.split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=i<"04"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1];console.log("financial year",r,i);let l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,console.log("Date: ",a+n+i+n+l),"startDate"==this.activedateid?this.startDate=a+n+i+n+l:this.endDate=a+n+i+n+l}getTallyData(e,t){return this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate,new Promise((n,o)=>{const a={tallyType:e,branchid:this.branchType.id,startDate:this.startDate,endDate:this.endDate};this.common.loading++,this.api.post("Voucher/getTallyData",a).subscribe(e=>{console.log(e),this.common.loading--,this.excelService.saveAsXMLFile("",t,e.data[0].tally_export)},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](Bl.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](Nl.b),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["tallyexport"]],decls:25,vars:3,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-3"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","master",1,"btn","w-100",3,"click"],["id","voucher",1,"btn","w-100",3,"click"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"div",5),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"label",7),c["\u0275\u0275text"](8,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",8),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",5),c["\u0275\u0275elementStart"](11,"div",6),c["\u0275\u0275elementStart"](12,"label",7),c["\u0275\u0275text"](13,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",9),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",4),c["\u0275\u0275elementStart"](16,"div",5),c["\u0275\u0275elementStart"](17,"div",6),c["\u0275\u0275elementStart"](18,"button",10),c["\u0275\u0275listener"]("click",(function(){return t.getTallyData("false","Master")})),c["\u0275\u0275text"](19,"Master"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",5),c["\u0275\u0275elementStart"](21,"div",6),c["\u0275\u0275elementStart"](22,"button",11),c["\u0275\u0275listener"]("click",(function(){return t.getTallyData("true","DayBook")})),c["\u0275\u0275text"](23,"Vouchers"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](24,Gl,4,1,"div",12)),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,E.u],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}span[_ngcontent-%COMP%]{display:block;border:1px solid #000;padding:8px;min-height:54px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.branchName[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:54px!important}"]}),e})();var Hl=n("wD9S");function $l(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",17),c["\u0275\u0275text"](1," No Data Available On That Time Period ! "),c["\u0275\u0275elementEnd"]())}function ql(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",18),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}let Kl=(()=>{class e{constructor(e,t,n){this.api=e,this.common=t,this.accountService=n,this.tripExpense=[],this.selectedVehicle={id:0},this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),this.request=0,this.allowBackspace=!0,this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.currentPage="Trip Expense Tally"}ngOnInit(){}getVehicle(e){console.log("test fase",e),this.selectedVehicle=e,console.log("test fase",this.selectedVehicle.id)}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;if(console.log("Active event",e),"enter"==t)this.allowBackspace=!0,n.includes("startdate")?(this.startDate=this.common.handleDateOnEnterNew(this.startDate),this.setFoucus("enddate")):n.includes("enddate")&&(this.endDate=this.common.handleDateOnEnterNew(this.endDate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",n),"enddate"==n&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=n&&"enddate"!=n||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getTripExpenseTally(){if(this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate,this.tripExpense=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.startDate>this.endDate)return this.common.showError("Start Date should not be Greater than End Date");let e=null!=this.startDate?this.common.dateFormatter(this.startDate):null,t=null!=this.endDate?this.common.dateFormatter(this.endDate):null;return null==e?this.common.showError("Start Date is Missing"):null==t?this.common.showError("End Date is Missing"):void this.api.post("Voucher/getTripTally",{vehid:this.selectedVehicle.id,startdate:e,enddate:t,diffrentonly:this.request}).subscribe(e=>{this.tripExpense=e.data||[],console.log("result",e);let t=this.tripExpense[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns()})}getTableColumns(){let e=[];return console.log("Data=",this.tripExpense),this.tripExpense.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};e.push(this.valobj)}),e}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-expense-tally"]],decls:34,vars:6,consts:[[2,"border","0px","margin-top","15px !important"],[1,"row"],[1,"col-2","pl-0"],[1,"form-group"],[1,"tjr-label"],["url","Suggestion/getFoVehicleList","display","regno","placeholder","Search by vehicle number and regno ",3,"preSelected","onSelected"],["id","diffrenttype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["value","False"],["value","True"],[1,"col-3","pl-0"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0","mt-4"],["id","button",1,"btn","btn-primary",2,"border-radius","2px","padding","6px 17px",3,"click"],[1,"modal-footer"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],[3,"data","settings",4,"ngIf"],["role","alert",1,"no-data","alert","alert-danger"],[3,"data","settings"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"label",4),c["\u0275\u0275text"](6,"Vehicle"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"auto-suggestion",5),c["\u0275\u0275listener"]("onSelected",(function(e){return t.getVehicle(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"div",3),c["\u0275\u0275elementStart"](10,"label",4),c["\u0275\u0275text"](11,"Different Only"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"select",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.request=e})),c["\u0275\u0275elementStart"](13,"option",7),c["\u0275\u0275text"](14,"No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"option",8),c["\u0275\u0275text"](16,"Yes"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",9),c["\u0275\u0275elementStart"](18,"div",3),c["\u0275\u0275elementStart"](19,"label",4),c["\u0275\u0275text"](20,"Start Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"input",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",9),c["\u0275\u0275elementStart"](23,"div",3),c["\u0275\u0275elementStart"](24,"label",4),c["\u0275\u0275text"](25,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"input",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",12),c["\u0275\u0275elementStart"](28,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.getTripExpenseTally()})),c["\u0275\u0275text"](29,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",14),c["\u0275\u0275template"](31,$l,2,0,"div",15),c["\u0275\u0275elementStart"](32,"div"),c["\u0275\u0275template"](33,ql,1,2,"smart-table",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("preSelected",null),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.request),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",0==t.tripExpense.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.tripExpense.length>0))},directives:[h.s,h.r,Cn.a,k.D,k.r,k.u,k.w,k.G,k.d,k.m,E.u,Hl.a],styles:["nb-card-body[_ngcontent-%COMP%]{padding:16px!important}"]}),e})();var Ul=n("syiq");const Wl=function(e){return{highlight:e}},Ql=function(e){return{handHighLight:e}};function Jl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",32),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index,a=c["\u0275\u0275nextContext"]().index,i=c["\u0275\u0275nextContext"]();return n.stopPropagation(),i.selectedRow="a"+a+o})),c["\u0275\u0275elementStart"](1,"div",33),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",34),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"](2);return 0!=n.y_total_approved?o.opendaybookmodel(n.y_id,0):""})),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",34),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"](2);return 0!=n.y_total_pending?o.opendaybookmodel(n.y_id,1):""})),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==a.active.liabilities.mainGroup.indexOf("mainGroup"+o+0))("ngClass",c["\u0275\u0275pureFunction1"](7,Wl,a.selectedRow=="a"+o+n)),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](9,Ql,0!=e.y_total_approved)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_total_approved,""),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,Ql,0!=e.y_total_pending)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_total_pending,"")}}function Xl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",29),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().handleExpandation(n,o,"liabilities","mainGroup",0)})),c["\u0275\u0275elementStart"](1,"div",30),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",22),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",22),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](8,Jl,8,13,"div",31),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Vouchers"==e.name?n.approved1:n.approved2),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Vouchers"==e.name?n.pending1:n.pending2),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.balanceSheets)}}function Zl(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",32),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index,a=c["\u0275\u0275nextContext"]().index,i=c["\u0275\u0275nextContext"]();return n.stopPropagation(),i.selectedRow="b"+a+o})),c["\u0275\u0275elementStart"](1,"div",33),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",22),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",34),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=c["\u0275\u0275nextContext"](2);return 0!=n.y_total_pending?o.openPageModel(n.y_name):""})),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]().index,a=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("hidden",-1==a.active.asset.mainGroup.indexOf("mainGroup"+o+0))("ngClass",c["\u0275\u0275pureFunction1"](6,Wl,a.selectedRow=="b"+o+n)),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.y_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.y_total_approved),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](8,Ql,0!=e.y_total_pending)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.y_total_pending,"")}}function es(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",29),c["\u0275\u0275listener"]("click",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().handleExpandation(n,o,"asset","mainGroup",0)})),c["\u0275\u0275elementStart"](1,"div",30),c["\u0275\u0275elementStart"](2,"div",21),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",35),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",36),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](8,Zl,8,10,"div",31),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.assetApproved),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.assetPending),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.balanceSheets)}}function ts(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",37),c["\u0275\u0275elementStart"](1,"div",38),c["\u0275\u0275text"](2,"Total"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",39),c["\u0275\u0275elementStart"](4,"p",40),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",41),c["\u0275\u0275elementStart"](7,"p",40),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" ",e.liabilities[e.liabilities.length-1].pending,""),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",e.liabilities[e.liabilities.length-1].approve,"")}}function ns(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",37),c["\u0275\u0275elementStart"](1,"div",38),c["\u0275\u0275text"](2,"Total"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",39),c["\u0275\u0275elementStart"](4,"p",40),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",41),c["\u0275\u0275elementStart"](7,"p",40),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" ",e.assets[e.assets.length-1].pending,""),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",e.assets[e.assets.length-1].approve,"")}}function os(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",42),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",43),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",44),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.staticsData[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.staticsData[e.f2Date])}}let as=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.user=n,this.pdfService=o,this.csvService=a,this.modalService=i,this.accountService=r,this.selectedName="",this.staticsData={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-")},this.branchdata=[],this.staticsSheetData=[],this.activeId="",this.approved1=0,this.approved2=0,this.pending1=0,this.pending2=0,this.assetApproved=0,this.assetPending=0,this.liabilities=[],this.assets=[],this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.active={liabilities:{mainGroup:[],subGroup:[]},asset:{mainGroup:[],subGroup:[]}},this.viewType="sub",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.staticsData.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.staticsData.enddate,this.setFoucus("startdate"),this.common.currentPage="Accounts Statics",console.log("current month",(new Date).getFullYear()-1,(new Date).getMonth()+1>3)}ngOnInit(){}getStaticsSheet(){this.staticsData.startdate=this.accountService.fromdate,this.staticsData.enddate=this.accountService.todate;let e={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate};this.common.loading++,this.api.post("Voucher/getStaticsData",e).subscribe(e=>{this.common.loading--,console.log("Res statics data:",e.data),this.staticsSheetData=e.data,this.formattData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}formattData(){let e=Ut.groupBy(this.staticsSheetData,"y_groupid"),t=Ut.groupBy(e[0],"y_group_name"),n=Ut.groupBy(e[1],"y_group_name");console.log("A:",e),console.log("B:",t),console.log("C:",n),this.liabilities=[];let o=0,a=0;for(let p in t)t[p].map(e=>{e.y_total_approved&&(o+=parseFloat(e.y_total_approved)),e.y_total_pending&&(a+=parseFloat(e.y_total_pending))}),this.liabilities.push({name:p,approve:o,pending:a,balanceSheets:t[p].filter(e=>e.y_name)});this.assets=[];let i=0,r=0;for(let p in n)n[p].map(e=>{e.y_total_approved&&(i+=parseFloat(e.y_total_approved)),e.y_total_pending&&(r+=parseFloat(e.y_total_pending))}),this.assets.push({name:p,approve:i,pending:r,balanceSheets:n[p].filter(e=>e.y_name)});console.log("liabilities",this.liabilities,"asset data ",this.assets);const l=this.liabilities[0].balanceSheets.reduce((e,t)=>e+t.y_total_approved,0);this.approved1=l;const s=this.liabilities[1].balanceSheets.reduce((e,t)=>e+t.y_total_approved,0);this.approved2=s;const c=this.liabilities[0].balanceSheets.reduce((e,t)=>e+t.y_total_pending,0);this.pending1=c;const d=this.liabilities[1].balanceSheets.reduce((e,t)=>e+t.y_total_pending,0);this.pending2=d;const m=this.assets[0].balanceSheets.reduce((e,t)=>e+t.y_total_approved,0);this.assetApproved=m;const h=this.assets[0].balanceSheets.reduce((e,t)=>e+t.y_total_pending,0);this.assetPending=h,this.changeViewType()}filterData(e,t){return e.filter(e=>e.y_is_assets===t)}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startdate")&&!this.activeId.includes("enddate"))if("enter"==t)this.allowBackspace=!0,this.activeId.includes("startdate")?(this.staticsData.startdate=this.common.handleDateOnEnterNew(this.staticsData.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.staticsData.enddate=this.common.handleDateOnEnterNew(this.staticsData.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault()}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.staticsData[o].includes("-"))t=this.staticsData[o].split("-");else{if(!this.staticsData[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.staticsData[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.staticsData[o]=a+n+i+n+r}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}opendaybookmodel(e,t){this.common.params={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate,ledger:0,vouchertype:e,deleteId:t},this.modalService.open(Ul.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{this.common.currentPage="Accounts Statics"}),this.common.currentPage="Accounts Statics"}RowSelected(e){console.log("data of u",e),this.selectedName=e}getProfitLoss(){this.common.params={startdate:this.staticsData.startdate,enddate:this.staticsData.enddate},console.log("start date and date",this.common.params),this.modalService.open(er.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}handleExpandation(e,t,n,o,a){console.log(t,o,a,this.active[n][o],o+t+a,this.active[n][o].indexOf(o+t+a)),e.stopPropagation(),-1===this.active[n][o].indexOf(o+t+a)?this.active[n][o].push(o+t+a):this.active[n][o].splice(this.active[n][o].indexOf(o+t+a),1)}changeViewType(){this.active.liabilities.mainGroup=[],this.active.liabilities.subGroup=[],this.active.asset.mainGroup=[],this.active.asset.subGroup=[],"sub"==this.viewType?(this.liabilities.forEach((e,t)=>this.active.liabilities.mainGroup.push("mainGroup"+t+0)),this.assets.forEach((e,t)=>this.active.asset.mainGroup.push("mainGroup"+t+0))):"all"==this.viewType&&(this.liabilities.forEach((e,t)=>{this.active.liabilities.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.liabilities.subGroup.push("subGroup"+t+n))}),this.assets.forEach((e,t)=>{this.active.asset.mainGroup.push("mainGroup"+t+0),e.subGroups.forEach((e,n)=>this.active.asset.subGroup.push("subGroup"+t+n))}))}generateCsvData(){let e=[];e.push(Object.assign({liability:"Types",liabilityAmount:"Approved",pending:"Pending"})),this.liabilities.forEach(t=>{e.push({liability:t.name,liabilityAmount:"",pending:""}),t.balanceSheets.forEach(t=>{e.push({liability:t.y_name,liabilityAmount:t.y_total_approved,pending:t.y_total_pending})})});let t=[];t.push(Object.assign({asset:"Master Name",assetAmount:"System",assetPending:"User Defined"})),this.assets.forEach(e=>{t.push({asset:e.name,assetAmount:"",assetPending:""}),e.balanceSheets.forEach(e=>{t.push({asset:e.y_name,assetAmount:e.y_total_approved,assetPending:e.y_total_pending})})});let n=[];for(let o=0;o<e.length||o<t.length;o++)e[o]&&t[o]&&o<=e.length-1&&o<=t.length-1?n.push(Object.assign({},e[o],t[o])):e[o]&&o<=e.length-1?n.push(Object.assign({},e[o],{asset:"",assetAmount:"",assetPending:""})):t[o]&&o<=t.length-1&&n.push(Object.assign({},{liability:"",liabilityAmount:"",pending:""},t[o]));n.push(Object.assign({},{liability:"Total",liabilityAmount:this.liabilities[this.liabilities.length-1].approve,pending:this.liabilities[this.liabilities.length-1].pending},{asset:"Total",assetAmount:this.assets[this.assets.length-1].approve,assetPending:this.assets[this.assets.length-1].pending})),this.csvService.jsonToExcel(n),console.log("Merged:",n)}openPageModel(e){this.common.handleModalSize("class","modal-lg","1250","px",0),"Stock Items"==e?(this.common.params={pageName:"StockItem"},this.modalService.open(Ae,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then(e=>{})):"Stock Sub Type"==e?(this.common.params={pageName:"StockSubType"},this.modalService.open(De,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then(e=>{})):"Stock Type"==e?(this.common.params={pageName:"StockType"},this.modalService.open(Ee,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then(e=>{})):"Account Groups"==e?(this.common.params={pageName:"StockType"},this.modalService.open(Ge,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then(e=>{})):"Ledger"==e&&(this.common.params={pageName:"Ledger"},this.modalService.open(et,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"ledger-modal"}).result.then(e=>{})),this.common.currentPage="Accounts Statics"}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["statics"]],decls:56,vars:9,consts:[[2,"border","0px"],[3,"keydown"],[1,"expand-div"],["type","radio","name","view","value","main",3,"ngModel","ngModelChange","change"],["type","radio","name","view","value","sub",3,"ngModel","ngModelChange","change"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"row"],[1,"col","pl-0"],[1,"form-group"],[1,"tjr-label"],["type","text","autocomplete","off","placeholder","Select Date","name","account-date","id","startdate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","enddate","autocomplete","off","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col","pl-0","pr-0"],["type","button","outline","","id","submit",1,"btn","btn-primary","tjr-button",2,"cursor","pointer","margin-top","14px","padding","5px 10px !important",3,"click"],["id","balance-sheet"],[1,"row","balance-shit","m-0","p-0"],[1,"col-6","p-0"],[1,"row","heading","m-0","p-0"],[1,"col-6"],[1,"col-3","text-right"],[1,"middlebody"],[3,"click",4,"ngFor","ngForOf"],[1,"col-6","pr-0"],["class","tanding_total clearfix",4,"ngIf"],[1,"col-6","pl-0"],["class","date-modal",3,"keydown",4,"ngIf"],[3,"click"],[1,"th-mini","row","m-0","pl-0","pr-0"],["style","background: #dadfe6;",3,"hidden","ngClass","click",4,"ngFor","ngForOf"],[2,"background","#dadfe6",3,"hidden","ngClass","click"],[1,"tb-mini","row","m-0","pl-0","pr-0"],[1,"col-3","text-right",3,"ngClass","click"],[1,"col-3",2,"padding-left","100px"],[1,"col-3",2,"padding-left","105px"],[1,"tanding_total","clearfix"],[1,"total_name"],[1,"total_amount",2,"text-align","right","padding-right","5px"],[2,"margin","0px","width","100px","text-align","right"],[1,"total_amount",2,"text-align","right","padding-right","42px"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"input",3),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.viewType=e}))("change",(function(){return t.changeViewType()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"label"),c["\u0275\u0275text"](5," Expand Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"input",4),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.viewType=e}))("change",(function(){return t.changeViewType()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"label"),c["\u0275\u0275text"](8," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"span",5),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),c["\u0275\u0275element"](10,"i",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",7),c["\u0275\u0275listener"]("click",(function(){return t.generateCsvData()})),c["\u0275\u0275element"](12,"i",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",9),c["\u0275\u0275elementStart"](14,"div",10),c["\u0275\u0275elementStart"](15,"div",11),c["\u0275\u0275elementStart"](16,"label",12),c["\u0275\u0275text"](17,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",13),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",10),c["\u0275\u0275elementStart"](20,"div",11),c["\u0275\u0275elementStart"](21,"label",12),c["\u0275\u0275text"](22,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"input",14),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",15),c["\u0275\u0275elementStart"](25,"div",11),c["\u0275\u0275elementStart"](26,"button",16),c["\u0275\u0275listener"]("click",(function(){return t.getStaticsSheet()})),c["\u0275\u0275text"](27,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",17),c["\u0275\u0275elementStart"](29,"div",18),c["\u0275\u0275elementStart"](30,"div",19),c["\u0275\u0275elementStart"](31,"div",20),c["\u0275\u0275elementStart"](32,"div",21),c["\u0275\u0275text"](33,"Types"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",22),c["\u0275\u0275text"](35,"Approved"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",22),c["\u0275\u0275text"](37,"Pending"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",23),c["\u0275\u0275template"](39,Xl,9,4,"div",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](40,"div",19),c["\u0275\u0275elementStart"](41,"div",20),c["\u0275\u0275elementStart"](42,"div",21),c["\u0275\u0275text"](43,"Master Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",22),c["\u0275\u0275text"](45,"System"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](46,"div",22),c["\u0275\u0275text"](47,"User Defined"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](48,"div",23),c["\u0275\u0275template"](49,es,9,4,"div",24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](50,"div",9),c["\u0275\u0275elementStart"](51,"div",25),c["\u0275\u0275template"](52,ts,9,2,"div",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](53,"div",27),c["\u0275\u0275template"](54,ns,9,2,"div",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](55,os,4,1,"div",28)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.viewType),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.viewType),c["\u0275\u0275advance"](12),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](16),c["\u0275\u0275property"]("ngForOf",t.liabilities),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngForOf",t.assets),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.liabilities.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.assets.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.t,E.u,E.r],styles:["button[_ngcontent-%COMP%]{background-color:#73a1ff;border-radius:5px!important;text-transform:capitalize!important;padding:10px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#263238;color:#fff}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:350px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#eee;color:#4b4b4b}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:20px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{background-color:#d6d6d6;color:#fff;font-weight:700}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-left:10px}.balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .balance-shit[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #c7c7c7}.tanding_total[_ngcontent-%COMP%]{background-color:#324148;padding:10px;color:#fff;font-weight:700}.tanding_total[_ngcontent-%COMP%]   .total_name[_ngcontent-%COMP%]{float:left}.tanding_total[_ngcontent-%COMP%]   .total_amount[_ngcontent-%COMP%]{float:right}.balance-shit[_ngcontent-%COMP%]{background-color:#fff}.middlebody[_ngcontent-%COMP%]{height:calc(100vh - 265px);overflow:auto}.heading[_ngcontent-%COMP%]{background-color:#263238;color:#fff;padding:10px 0!important;border:1px solid #c7c7c7}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff;border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7;padding:9px}.th-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.tb-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;padding:9px}.tb-mini[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .tb-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.td-mini[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.handHighLight[_ngcontent-%COMP%]{cursor:pointer;color:#5600ff}"]}),e})();function is(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",17),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerData)}}function rs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",18),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"group","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.secondarygroup)}}function ls(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.is_constcenterallow)}}function ss(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275elementStart"](1,"input",22),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().$implicit.is_constcenterallow=t}))("change",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().updateLedgerCostCenter(t,n.id)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("value",e.is_constcenterallow)("ngModel",e.is_constcenterallow)}}const cs=function(e){return{highlight:e}};function ds(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",19),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,ls,2,1,"td",20),c["\u0275\u0275template"](10,ss,2,2,"td",20),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275elementStart"](15,"button",21),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().approveDeleteFunction(0,"true",n.id)})),c["\u0275\u0275text"](16,"Approve"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](11,cs,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.groupname),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.alias_name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",2!=o.deletedId),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",2==o.deletedId),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](13,8,e.entry_dt,"dd-MMM-yy"))}}let ms=(()=>{class e{constructor(e,t,n,o,a,i,r){this.activeModal=e,this.api=t,this.common=n,this.route=o,this.user=a,this.router=i,this.modalService=r,this.Ledgers=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.ledgerData=[],this.secondarygroup=[],this.group={name:"All",id:0},this.ledger={name:"All",id:0},this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startDate",this.lastActiveId="",this.selectedRow=-1,this.activeId="ledgerdaybook",this.common.refresh=this.refresh.bind(this),this.route.params.subscribe(e=>{console.log("Params1: ",e),e.id&&(this.deletedId=parseInt(e.id),this.GetLedger(4)),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(4),this.sizeledger=1),this.GetLedger(4),this.common.currentPage="Ledger Pending For Approval",this.getAllLedger(),this.getSecondaryGoup()}handleKeyboardEvent(e){this.keyHandler(e)}ngOnInit(){}refresh(){console.log("ledger approve test"),this.GetLedger(4)}getAllLedger(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}GetLedger(e){let t={foid:123,deleted:e,groupid:this.group.id,ledgerid:this.ledger.id};console.log("approve ledger",t),this.common.loading++,this.api.post("Accounts/GetLedgerdata",t).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.Ledgers=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}onSelected(e,t,n){"group"==t?(this.group.name=e[n],this.group.id=e.id):(this.ledger.name=e[n],this.ledger.id=e.id)}getSecondaryGoup(){this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.secondarygroup=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateLedgerCostCenter(e,t){let n={ledgerid:t,ladgervalue:e.target.checked};console.log("ledger data",e.target.checked,t),this.common.loading++,this.api.post("Accounts/SaveLedgerCostCenter",n).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.common.showToast(e.data[0].y_errormsg)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openModal(e){let t=[];if(console.log("ledger123",e),e){let n={id:e.id,foid:0};this.common.loading++,this.api.post("Accounts/EditLedgerdata",n).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),t=e.data,this.common.params={ledgerdata:e.data,deleted:this.deletedId,sizeledger:this.sizeledger},this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addLedger(e.ledger)})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}else this.common.params=null,this.modalService.open(f.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.addLedger(e.ledger)})}keyHandler(e){const t=e.key.toLowerCase();this.activeId=document.activeElement.id,console.log("Active event",e,this.activeId),"enter"==t?(this.allowBackspace=!0,this.activeId.includes("ledgerdaybook")?this.setFoucus("group"):this.activeId.includes("group")&&this.setFoucus("delreview")):"backspace"==t&&this.allowBackspace?(e.preventDefault(),console.log("active 1",this.activeId),"group"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype")):(t.includes("arrow")||"backspace"!=t)&&(this.allowBackspace=!1),(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.Ledgers.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.Ledgers.length-1&&this.selectedRow++)}addLedger(e){console.log("ledgerdata",e);const t={name:e.name,alias_name:e.aliasname,code:e.code,foid:e.user.id,per_rate:e.perrate,primarygroupid:e.undergroup.primarygroup_id,account_id:e.undergroup.id,accDetails:e.accDetails,branchname:e.branchname,branchcode:e.branchcode,accnumber:e.accnumber,creditdays:e.creditdays,openingbalance:e.openingbalance,isdr:e.openingisdr,approved:e.approved,deleteview:e.deleteview,delete:e.delete,x_id:e.id?e.id:0,bankname:e.bankname,costcenter:e.costcenter,taxtype:e.taxtype,taxsubtype:e.taxsubtype,isnon:e.isnon,hsnno:e.hsnno,hsndetail:e.hsndetail,gst:e.gst,cess:e.cess,igst:e.igst,taxability:e.taxability,calculationtype:e.calculationtype};console.log("params11: ",t),this.common.loading++,this.api.post("Accounts/InsertLedger",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.data[0].y_errormsg?e.data[0].y_errormsg:"Ledger Has been saved!")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}RowSelected(e){console.log("data of u",e),this.selectedName=e}modelCondition(){this.activeModal.close({}),event.preventDefault()}approveDeleteFunction(e,t,n){console.log("type",e,"typeans",t,"xid",n);let o={id:n,flagname:1==e?"deleted":"forapproved",flagvalue:t};this.common.loading++,this.api.post("Company/ledgerDeleteApprooved",o).subscribe(n=>{this.common.loading--,console.log("res: ",n),this.activeModal.close({response:!0}),1==e&&"true"==t?this.common.showToast(" This Value Has been Deleted!"):1==e&&"false"==t?this.common.showToast(" This Value Has been Restored!"):(this.common.showToast(" This Value Has been Approved!"),this.GetLedger(4))},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError("This Value has been used another entry!")})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](o.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](o.c),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledgerapprove"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,c["\u0275\u0275resolveDocument"])},decls:45,vars:5,consts:[[2,"border","0px"],[1,"row",2,"margin-top","20px"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-6","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","group","name","group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["id","pending",1,"btn","mb-4",3,"click"],["id","delreview",1,"btn","mb-4",3,"click"],[1,"col-3","pl-0","pr-0"],["class","form-group",4,"ngIf"],[1,"table-box"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["targetId","ledgerdaybook","display","name",3,"data","select"],["targetId","group","display","name",3,"data","select"],[3,"ngClass","click","dblclick"],[4,"ngIf"],["outline","","id","approve",1,"btn","btn-primary",2,"cursor","pointer",3,"click"],["type","checkbox",3,"value","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"div",4),c["\u0275\u0275elementStart"](6,"div",5),c["\u0275\u0275elementStart"](7,"label",6),c["\u0275\u0275text"](8,"Group "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.group.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",4),c["\u0275\u0275elementStart"](11,"div",5),c["\u0275\u0275elementStart"](12,"label",6),c["\u0275\u0275text"](13,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",8),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",3),c["\u0275\u0275elementStart"](16,"div",4),c["\u0275\u0275elementStart"](17,"button",9),c["\u0275\u0275listener"]("click",(function(){return t.GetLedger(4)})),c["\u0275\u0275text"](18,"Pending For Approval"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",4),c["\u0275\u0275elementStart"](20,"button",10),c["\u0275\u0275listener"]("click",(function(){return t.GetLedger(6)})),c["\u0275\u0275text"](21,"Deleted Review"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",11),c["\u0275\u0275template"](23,is,2,1,"div",12),c["\u0275\u0275template"](24,rs,2,1,"div",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"div",13),c["\u0275\u0275elementStart"](26,"table",14),c["\u0275\u0275elementStart"](27,"thead",15),c["\u0275\u0275elementStart"](28,"tr"),c["\u0275\u0275elementStart"](29,"th"),c["\u0275\u0275text"](30,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"th"),c["\u0275\u0275text"](32,"Under Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"th"),c["\u0275\u0275text"](34,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"th"),c["\u0275\u0275text"](36,"Alias Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"th"),c["\u0275\u0275text"](38,"Cost Center Allow"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"th"),c["\u0275\u0275text"](40,"Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"th"),c["\u0275\u0275text"](42,"Approve"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"tbody"),c["\u0275\u0275template"](44,ds,17,13,"tr",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.group.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.ledger.name),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("group")),c["\u0275\u0275advance"](20),c["\u0275\u0275property"]("ngForOf",t.Ledgers))},directives:[h.s,h.r,k.d,k.r,k.u,E.u,E.t,w.a,E.r,k.a],pipes:[E.f],styles:[".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.table-box[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 260px);overflow:hidden}.col-8[_ngcontent-%COMP%]{margin-left:32px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;word-break:keep-all;white-space:nowrap;width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:13%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;margin:0;color:#f5f5f5;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 172px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:3%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:15%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:13%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:10%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:7%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}"]}),e})();var hs=n("ZD20");function ps(e,t){if(1&e&&c["\u0275\u0275element"](0,"smart-table",20),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("data",e.table.data)("settings",e.table.settings)}}function gs(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275text"](1," No Data available ! "),c["\u0275\u0275elementEnd"]())}let us=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.datePipe=n,this.user=o,this.activeModal=a,this.accountService=i,this.modalService=r,this.startTime=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.endTime=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.requestType="Transfer",this.status=2,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startTime,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endTime,this.getRequests(),this.common.refresh=this.refresh.bind(this),this.common.currentPage="Account Entry Approval"}ngOnInit(){}refresh(){this.getRequests()}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;console.log("Active event1111",e),"enter"==t&&(n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")?this.setFoucus("requestType"):n.includes("requestType")?this.setFoucus("status"):n.includes("status")&&this.setFoucus("submit"))}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}getRequests(){if(this.startTime=this.accountService.fromdate,this.endTime=this.accountService.todate,!this.startTime||!this.endTime)return void this.common.showError("Dates cannot be blank.");let e={startTime:this.common.dateFormatter(this.startTime),endTime:this.common.dateFormatter(this.endTime),status:this.status,requestType:this.requestType};console.log("params",e),++this.common.loading,this.api.post("Accounts/getApprovalList",e).subscribe(e=>{if(--this.common.loading,this.data=[],this.table={data:{headings:{},columns:[]},settings:{hideHeader:!0}},this.headings=[],this.valobj={},!e.data)return;this.data=e.data;let t=this.data[0];for(var n in t)if("_"!=n.charAt(0)){this.headings.push(n);let e={title:this.formatTitle(n),placeholder:this.formatTitle(n)};this.table.data.headings[n]=e}this.table.data.columns=this.getTableColumns()},e=>{--this.common.loading,this.common.showError(e),console.log("Error: ",e)})}getTableColumns(){let e=[];return console.log("Data=",this.data),this.data.map(t=>{this.valobj={};for(let e=0;e<this.headings.length;e++)console.log("doc index value:",t[this.headings[e]]),this.valobj[this.headings[e]]={value:t[this.headings[e]],class:"black",action:""};this.valobj.Action={class:"",icons:this.actionIcon(t)},e.push(this.valobj)}),e}formatTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}actionIcon(e){let t=[];return"Approved"==e.Status?t.push({class:"fa fa-eye icon i-gray",action:this.viewTransfer.bind(this,e)},{class:"fa fa-undo icon  i-red-cross",action:this.takeAction.bind(this,e,0)}):t.push({class:"fa fa-eye icon i-gray",action:this.viewTransfer.bind(this,e)},{class:"fa fa-check icon i-green",action:this.takeAction.bind(this,e,1)},{class:"fa fa-times icon  i-red-cross",action:this.takeAction.bind(this,e,-1)}),t}openRemarkModal(e,t){this.common.params={title:"Remarks "},this.modalService.open(hs.a,{size:"sm",container:"nb-layout",backdrop:"static"}).result.then(n=>{console.log("dta",n),n.response&&this.requestApproval({requestId:e._id,requestType:e.Type,status:t,remarks:n.remark})})}viewTransfer(e){"Transfer"==e.Type?(this.common.params={refData:{transferId:e._id,readOnly:!0}},this.modalService.open(It.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)})):"Invoice"==e.Type?(this.common.params={previewData:{title:"Invoice",previewId:null,refId:e._id,refType:"FRINV"}},this.modalService.open(Dt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr-manifest print-lr"}).result.then(e=>{console.log("Date:",e)})):"MVS"==e.Type&&(this.common.params={invoice:{id:e._id}},this.modalService.open(Vt.a,{size:"lg",container:"nb-layout",backdrop:"static",windowClass:"print-lr"}).result.then(e=>{console.log("Date:",e)}))}takeAction(e,t){console.log("row:",e);let n={requestId:e._id,requestType:e.Type,status:t};e._id&&(0==t?(this.common.params={title:"Revert Request",description:"<b>&nbsp;Are Sure To Revert This Approval ?<b>"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.requestApproval(n)})):this.openRemarkModal(e,t))}requestApproval(e){console.log("params",e),this.common.loading++,this.api.post("Accounts/approveAccountRequest",e).subscribe(e=>{this.common.loading--,e.data[0].y_id>0?(this.common.showToast("successfully updated"),this.getRequests()):this.common.showError(e.data[0].y_msg)},e=>{this.common.loading--,console.log("Error: ",e)})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](E.f),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.b),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["account-entry-approval"]],decls:39,vars:6,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-4","mb-2"],[1,"col-md-2","pl-0"],[1,"tjr-label"],["type","text","id","startDate","autocomplete","off","maxlength","10","name","account-startDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","id","endDate","autocomplete","off","maxlength","10","name","account-endDate",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["id","requestType",1,"form-control","tjr-input",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","Transfer"],["value","Invoice"],["value","MVS"],["id","status",1,"form-control","tjr-input",2,"border","2px solid darkcyan","font-size","13px",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","2"],[1,"col-md-2","pl-0","pt-4"],["type","submit","id","submit",1,"btn","btn-primary","m-0","tjr-button",3,"click"],["id","freightwithLocation",3,"data","settings",4,"ngIf"],["class","no-data alert alert-danger","role","alert",4,"ngIf"],["id","freightwithLocation",3,"data","settings"],["role","alert",1,"no-data","alert","alert-danger"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"label",4),c["\u0275\u0275text"](5,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",3),c["\u0275\u0275elementStart"](8,"label",4),c["\u0275\u0275text"](9,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",3),c["\u0275\u0275elementStart"](12,"label",4),c["\u0275\u0275text"](13,"Requests"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"select",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.requestType=e})),c["\u0275\u0275elementStart"](15,"option",8),c["\u0275\u0275text"](16,"Transfer"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"option",9),c["\u0275\u0275text"](18,"Invoice"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"option",10),c["\u0275\u0275text"](20,"MVS"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",3),c["\u0275\u0275elementStart"](22,"label",4),c["\u0275\u0275text"](23,"Status"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"select",11),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),c["\u0275\u0275elementStart"](25,"option",12),c["\u0275\u0275text"](26,"Pending"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"option",13),c["\u0275\u0275text"](28,"Accepted"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"option",14),c["\u0275\u0275text"](30,"Rejected"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"option",15),c["\u0275\u0275text"](32,"All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",16),c["\u0275\u0275elementStart"](34,"button",17),c["\u0275\u0275listener"]("click",(function(){return t.getRequests()})),c["\u0275\u0275text"](35,"Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div"),c["\u0275\u0275template"](37,ps,1,2,"smart-table",18),c["\u0275\u0275template"](38,gs,2,0,"div",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.requestType),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngModel",t.status),c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngIf",t.data&&t.data.length),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.data.length))},directives:[h.s,h.r,k.d,k.m,k.r,k.u,k.D,k.w,k.G,E.u,Hl.a],styles:["[_nghost-%COMP%]     .i-red-cross{color:red;margin-left:10px}[_nghost-%COMP%]     .i-gray{color:grey}[_nghost-%COMP%]     .i-green{margin-left:10px;color:green}[_nghost-%COMP%]     .icon{padding:5px;font-size:18px!important;border:1px solid grey;border-radius:50%}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),e})();var bs=n("abs5");const vs=function(e){return{highlight:e}};function xs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](4,vs,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.country_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.country_code)}}let fs=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"name"},this.getstatedata={state:{name:"Rajasthan",id:29}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.common.currentPage="Country",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}ngOnInit(){}refresh(){console.log("Refresh"),this.getpageData()}getpageData(){this.common.loading++,this.api.post("Accounts/GetCountry",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,console.log("after api data:",this.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openModal(e){e?(console.log("city",e),this.common.params=e,this.modalService.open(bs.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.getpageData()})):(this.common.params=null,this.modalService.open(bs.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&this.getpageData()}))}deleteCity(e){console.log("city data",e);const t={id:e.id};console.log("params: ",t),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Accounts/DeleteCity",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getpageData(),this.common.showToast(" Delete Record")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()}))}))}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["country"]],decls:16,vars:1,consts:[[2,"margin","0px","border","0px"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"button",1),c["\u0275\u0275listener"]("click",(function(){return t.openModal()})),c["\u0275\u0275element"](3,"i",2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",3),c["\u0275\u0275elementStart"](5,"table",4),c["\u0275\u0275elementStart"](6,"thead",5),c["\u0275\u0275elementStart"](7,"tr"),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"City"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"tbody"),c["\u0275\u0275template"](15,xs,7,6,"tr",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("ngForOf",t.data))},directives:[h.s,h.r,E.t,E.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:350px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 163px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),e})();var ys=n("XDGq");const Cs=function(e){return{highlight:e}};function _s(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",17),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n}))("dblclick",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().openModal(n)})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](6,Cs,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.country_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.province_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.province_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.gst_state_code)}}let Ss=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.data=[],this.statedata=[],this.showConfirm=!1,this.autoSuggestion={data:[],targetId:"state",display:"country_name"},this.getstatedata={state:{name:"India",id:1}},this.activeId="state",this.suggestionIndex=-1,this.getpageData(),this.getCountry(),this.common.currentPage="State",this.common.refresh=this.refresh.bind(this),this.setFoucus("submit")}ngOnInit(){}refresh(){console.log("Refresh"),this.getpageData()}getCountry(){this.common.loading++,this.api.post("Accounts/GetCountry",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.autoSuggestion.data=e.data,this.statedata=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getpageData(){let e={counntryid:this.getstatedata.state.id};this.common.loading++,this.api.post("Accounts/getState",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.data=e.data,console.log("after api data:",this.data)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}openModal(e){e?(console.log("city",e),this.common.params=e,this.modalService.open(ys.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})):(this.common.params=null,this.modalService.open(ys.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{}))}addCity(e){console.log("city",e);const t={cityname:e.city,stateid:e.state.id,pincode:e.pincode};console.log("params: ",t),this.common.loading++,this.api.post("Accounts/InsertCity",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.common.showToast(e.msg),this.getpageData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}updateCity(e,t){console.log("updated data",e);const n={cityname:e.city,stateid:e.state.id,pincode:e.pincode,id:t};console.log("params: ",n),this.common.loading++,this.api.post("Accounts/InsertCity",n).subscribe(e=>{this.common.loading--,console.log("res: ",e),e.msg&&this.common.showToast("Update SuccessFull"),this.getpageData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}deleteCity(e){console.log("city data",e);const t={id:e.id};console.log("params: ",t),e&&(console.log("city",e),this.common.params={title:"Delete City ",description:"Are Sure to Delete <b>&nbsp;"+e.city_name+"<b> City"},this.modalService.open(ue.a,{size:"sm",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{e.response&&(console.log("data",e),this.common.loading++,this.api.post("Accounts/DeleteCity",t).subscribe(e=>{this.common.loading--,console.log("res: ",e),this.getpageData(),this.common.showToast(" Delete Record")},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()}))}))}selectSuggestion(e,t){console.log("Suggestion on select: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}onSelect(e,t){console.log("Suggestion: ",e),this.getstatedata.state.name=e.name,this.getstatedata.state.id=e.id}onSelected(e,t,n){this.getstatedata.state.name=e[n],this.getstatedata.state.id=e.id,console.log("order User: ",this.getstatedata),this.setFoucus("submit")}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["state"]],decls:36,vars:3,consts:[[2,"margin","0px","border","0px"],[1,"row"],[1,"col-9"],[1,"col-6"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","state","name","state",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],[1,"col-3"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"auto-sugg"],["targetId","state","display","country_name",3,"data","select"],[1,"btn","mb-4","add-button",3,"click"],[1,"fa","fa-plus"],[1,"main"],[1,"table","table-bordered"],[2,"background-color","#263238","color","#fff","white-space","nowrap"],[3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],[3,"ngClass","click","dblclick"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"div",1),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"label",5),c["\u0275\u0275text"](8,"Country"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.getstatedata.state.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",7),c["\u0275\u0275elementStart"](11,"div",4),c["\u0275\u0275elementStart"](12,"button",8),c["\u0275\u0275listener"]("click",(function(){return t.getpageData()})),c["\u0275\u0275text"](13,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",7),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275elementStart"](16,"div",4),c["\u0275\u0275elementStart"](17,"auto-suggetion-in-side",10),c["\u0275\u0275listener"]("select",(function(e){return t.onSelected(e,"state","country_name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"button",11),c["\u0275\u0275listener"]("click",(function(){return t.openModal()})),c["\u0275\u0275element"](19,"i",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",13),c["\u0275\u0275elementStart"](21,"table",14),c["\u0275\u0275elementStart"](22,"thead",15),c["\u0275\u0275elementStart"](23,"tr"),c["\u0275\u0275elementStart"](24,"th"),c["\u0275\u0275text"](25,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"th"),c["\u0275\u0275text"](27,"Country Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"th"),c["\u0275\u0275text"](29,"State"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"th"),c["\u0275\u0275text"](31,"Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"th"),c["\u0275\u0275text"](33,"Gst Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"tbody"),c["\u0275\u0275template"](35,_s,11,8,"tr",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.getstatedata.state.name),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("data",t.statedata),c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.data))},directives:[h.s,h.r,k.d,k.r,k.u,w.a,E.t,E.r],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.main[_ngcontent-%COMP%]{display:block;overflow:auto;margin-top:30px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:250px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;overflow:auto;max-height:calc(100vh - 283px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:35px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.delete[_ngcontent-%COMP%]{color:#d61414!important;padding:2%;margin:40%}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:150px;border-radius:100%!important;padding:0 0 2px!important;font-size:20px;-webkit-box-shadow:3px 2px 10px #989898;box-shadow:3px 2px 10px #989898;cursor:pointer!important;width:40px;height:40px;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important;cursor:pointer}svg[_ngcontent-%COMP%]{font-size:14px;-ms-flex-line-pack:center;align-content:center}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}"]}),e})();function Ms(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function Es(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function ws(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function ks(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Ps(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Os(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.debit,"1.2-2")," ")}}function Is(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.credit,"1.2-2")," ")}}function Ds(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"](3);return n.activeIndex=n.activeIndex!==t?t:-1})),c["\u0275\u0275template"](1,Ms,2,2,"div",6),c["\u0275\u0275template"](2,Es,2,0,"div",6),c["\u0275\u0275template"](3,ws,2,0,"div",6),c["\u0275\u0275template"](4,ks,2,0,"div",6),c["\u0275\u0275template"](5,Ps,2,0,"div",6),c["\u0275\u0275template"](6,Os,3,4,"div",7),c["\u0275\u0275template"](7,Is,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function Vs(e,t){if(1&e&&c["\u0275\u0275element"](0,"ledger-register-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}const Fs=function(e){return{highlight:e}};function Ts(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit,n=c["\u0275\u0275nextContext"](3);return t.y_voucher_type_name.toLowerCase().includes("voucher")?t.y_voucher_type_name.toLowerCase().includes("trip")?n.action(t,"",t.y_voucher_type_name,t):n.action(t.y_voucherid,t.y_code,t.y_voucher_type_name,t):n.action(t.y_voucherid,"",t.y_voucher_type_name,t)}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).selectedRow=t})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",8),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",8),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",8),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](16,Fs,o.selectedRow==t)),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.y_voucher_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,7,n.y_voucher_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](n.y_voucher_type_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,10,n.y_dramunt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,13,n.y_cramunt,"1.2-2"))}}function Bs(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Ds,8,9,"div",2),c["\u0275\u0275template"](2,Vs,1,6,"ledger-register-tree",3),c["\u0275\u0275template"](3,Ts,18,18,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function As(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Bs,4,3,"div",1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.data)}}function Ls(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate2"]("\xa0\xa0",t.labels," ",e.name," ")}}function Rs(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function js(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function zs(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Ns(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275text"](1,"\xa0"),c["\u0275\u0275elementEnd"]())}function Gs(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.debit,"1.2-2")," ")}}function Ys(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",9),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](2,1,e.credit,"1.2-2")," ")}}function Hs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index,n=c["\u0275\u0275nextContext"](3);return n.activeIndex=n.activeIndex!==t?t:-1})),c["\u0275\u0275template"](1,Ls,2,2,"div",6),c["\u0275\u0275template"](2,Rs,2,0,"div",6),c["\u0275\u0275template"](3,js,2,0,"div",6),c["\u0275\u0275template"](4,zs,2,0,"div",6),c["\u0275\u0275template"](5,Ns,2,0,"div",6),c["\u0275\u0275template"](6,Gs,3,4,"div",7),c["\u0275\u0275template"](7,Ys,3,4,"div",7),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](3);c["\u0275\u0275styleProp"]("background",t.colors[t.color]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name)}}function $s(e,t){if(1&e&&c["\u0275\u0275element"](0,"ledger-register-tree",10),2&e){const e=c["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("color",o.color+1)("action",o.action)("data",t.data)("isExpandAll",o.isExpandAll)("active",!(o.activeIndex!==n&&!o.isExpandAll))("labels",o.labels)}}function qs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",11),c["\u0275\u0275listener"]("dblclick",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit,n=c["\u0275\u0275nextContext"](3);return t.y_voucher_type_name.toLowerCase().includes("voucher")?t.y_voucher_type_name.toLowerCase().includes("trip")?n.action(t,"",t.y_voucher_type_name,t):n.action(t.y_voucherid,t.y_code,t.y_voucher_type_name,t):n.action(t.y_voucherid,"",t.y_voucher_type_name,t)}))("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](3).selectedRow=t})),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275text"](2,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",8),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",8),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",8),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",9),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,o=c["\u0275\u0275nextContext"](3);c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](16,Fs,o.selectedRow==t)),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.y_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n.y_voucher_cust_code),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](9,7,n.y_voucher_date,"dd-MMM-yy")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](n.y_voucher_type_name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,10,n.y_dramunt,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,13,n.y_cramunt,"1.2-2"))}}function Ks(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,Hs,8,9,"div",2),c["\u0275\u0275template"](2,$s,1,6,"ledger-register-tree",3),c["\u0275\u0275template"](3,qs,18,18,"div",4),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.name)}}function Us(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"input",12),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).search=t}))("click",(function(t){return c["\u0275\u0275restoreView"](e),t.stopPropagation()}))("ngModelChange",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).searchValues()})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,Ks,4,3,"div",1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",e.search),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.searchedData)}}function Ws(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275template"](1,As,2,1,"div",0),c["\u0275\u0275template"](2,Us,4,2,"div",0),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length<=50),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.data.length>50)}}function Qs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",34),c["\u0275\u0275elementStart"](1,"a",35),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2," Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Js(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",34),c["\u0275\u0275elementStart"](1,"a",36),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addvance()})),c["\u0275\u0275text"](2," Advanced Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function Xs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",37),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"vouchertype","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.vouchertypedata)}}function Zs(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",38),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"ledger","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.ledgerData)}}function ec(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",13),c["\u0275\u0275elementStart"](1,"auto-suggetion-in-side",39),c["\u0275\u0275listener"]("select",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelected(t,"group","name")})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("data",e.secondarygroup)}}function tc(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",40),c["\u0275\u0275elementStart"](1,"div",41),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index,o=c["\u0275\u0275nextContext"]();return o.activeTree=o.activeTree!==n?n:-1})),c["\u0275\u0275elementStart"](2,"div",29),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",29),c["\u0275\u0275text"](5,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",29),c["\u0275\u0275text"](7,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",29),c["\u0275\u0275text"](9,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",29),c["\u0275\u0275text"](11,"\xa0"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",42),c["\u0275\u0275text"](13),c["\u0275\u0275pipe"](14,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",42),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"number"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](18,"ledger-register-tree",43),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](10),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](14,8,e.debit,"1.2-2")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](17,11,e.credit,"1.2-2")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("action",o.openinvoicemodel.bind(o))("getaction",o.getDetail.bind(o))("data",e.data)("isExpandAll","sub"==o.isExpand)("active",o.activeTree==n||"sub"==o.isExpand)}}function nc(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",44),c["\u0275\u0275elementStart"](1,"div",11),c["\u0275\u0275elementStart"](2,"div",45),c["\u0275\u0275elementStart"](3,"button",46),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modelCondition()})),c["\u0275\u0275text"](4,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function oc(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",47),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",48),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",49),c["\u0275\u0275listener"]("ngModelChange",(function(t){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275nextContext"]();return n.ledgerRegister[n.f2Date]=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.ledgerRegister[e.f2Date])}}const ac=".nb-theme-corporate[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{min-height:450px}button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}nb-card-body[_ngcontent-%COMP%]{padding:16px!important}.main[_ngcontent-%COMP%]{display:block;margin-top:20px}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001;margin-left:32px}.exel-icon[_ngcontent-%COMP%]{color:#217346}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:150px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:150px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 172px)}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.modal-header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#263238}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}nb-card-body[_ngcontent-%COMP%]{padding:0}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left;height:23px}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.balance-shit[_ngcontent-%COMP%]{background-color:#dadfe6}.x-col[_ngcontent-%COMP%]{width:12.5%;max-width:12.5%;text-align:center;text-overflow:ellipsis;word-break:break-word;border-right:1px solid #f2f2f2;padding:6px 4px}.x-heading[_ngcontent-%COMP%]{width:100%;margin:0;background-color:#263238;color:#fff;padding:0!important;font-size:14px;z-index:2}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]{border-right:1px solid #263238;padding:6px 4px}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:24.8%}.x-heading[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border:none}.x-data[_ngcontent-%COMP%]{width:100%;background:#dadfe6;overflow:scroll;overflow:auto;z-index:1}.x-data[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]{background:#184154;color:#fff;font-size:12px}.x-data[_ngcontent-%COMP%]   .x-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.7%}.x-sub-stocktype[_ngcontent-%COMP%]{background-color:#6f8a96;color:#fff;font-size:12px;margin-left:3px}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-stockitem[_ngcontent-%COMP%]{background:#6f8a96;color:#fff;font-size:14px}.x-stockitem[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-branch[_ngcontent-%COMP%]{background:#8daab8;color:#fff;font-size:14px}.x-branch[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:26%}.x-warehouse[_ngcontent-%COMP%]{background:#c8c8c8;color:#000;font-size:12px;margin-left:3px}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{width:24.5%}.th-mini[_ngcontent-%COMP%]{background:#184154;color:#fff}.tb-mini[_ngcontent-%COMP%], .th-mini[_ngcontent-%COMP%]{border-bottom:1px solid #c7c7c7;border-left:1px solid #c7c7c7;border-right:1px solid #c7c7c7}.selected[_ngcontent-%COMP%]{background-color:#576c77}.highlight[_ngcontent-%COMP%]{background-color:#e2ca1f!important;color:#000!important}.expand-div[_ngcontent-%COMP%]{position:absolute;right:20px}.expand-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-right:10px;margin-left:5px;vertical-align:middle}.x-sub-stocktype[_ngcontent-%COMP%], .x-warehouse[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #fff}.x-sub-stocktype[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:first-child{max-width:25.5%}.x-warehouse[_ngcontent-%COMP%]   .x-col[_ngcontent-%COMP%]:last-child{border-right:none;text-align:right}.jrx-dtbody[_ngcontent-%COMP%]{height:calc(100vh - 280px);overflow:auto;width:100%}.addvance[_ngcontent-%COMP%]{margin-top:22px}.advncolor[_ngcontent-%COMP%]{color:#00f}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:200px;margin:15% auto auto}";let ic=(()=>{class e{constructor(e,t,n,o,a){this.common=e,this.modalService=t,this.user=n,this.cdr=o,this.accountService=a,this.color=0,this.activeIndex=!1,this.selectedRow=-1,this.colors=["#5d6e75","#6f8a96","#8DAAB8","#a4bbca","bfcfd9"],this.deletedId=0,this.search="",this.searchedData=[]}ngOnChanges(e){e.data&&(this.data=e.data.currentValue,this.searchedData=this.data)}searchValues(){this.searchedData=this.data.filter(e=>e.name?e.name.toLowerCase().includes(this.search.toLowerCase()):!!e.ledgerName&&e.ledgerName.toLowerCase().includes(this.search.toLowerCase())),this.cdr.detectChanges()}keyHandler(e){const t=e.key.toLowerCase();if(console.log("ctrl + d pressed",this.data[this.selectedRow]),(t.includes("arrowup")||t.includes("arrowdown"))&&this.data.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.data.length-1&&"arrowdown"===t&&this.selectedRow++),e.ctrlKey&&"d"===t&&this.data.length&&-1!=this.selectedRow)return this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("voucher")?!this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("trip")&&this.openVoucherEdit(this.data[this.selectedRow].y_voucherid,6,this.data[this.selectedRow].y_vouchertype_id):this.data[this.selectedRow].y_voucher_type_name.toLowerCase().includes("invoice")&&this.openinvoicemodeledit(this.data[this.selectedRow].y_voucherid,this.data[this.selectedRow].y_vouchertype_id,1),void e.preventDefault()}openVoucherEdit(e,t,n){console.log("ledger123",n),e&&(this.common.params={voucherId:e,delete:this.deletedId,addvoucherid:t,voucherTypeId:n},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e),e.delete&&this.getaction()}))}openinvoicemodeledit(e,t,n=0){this.common.params={invoiceid:e,delete:0,newid:n,ordertype:t,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e),e.msg&&this.getaction()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](d.r),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledger-register-tree"]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)}),!1,c["\u0275\u0275resolveDocument"])},inputs:{data:"data",active:"active",labels:"labels",action:"action",isExpandAll:"isExpandAll",color:"color",getaction:"getaction"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","cursor:pointer","class","row x-sub-stocktype",3,"background","click",4,"ngIf"],["style","cursor:pointer",3,"color","action","data","isExpandAll","active","labels",4,"ngIf"],["class","row x-warehouse",3,"ngClass","dblclick","click",4,"ngIf"],[1,"row","x-sub-stocktype",2,"cursor","pointer",3,"click"],["class","col x-col",4,"ngIf"],["class","col x-col","style","text-align:right;",4,"ngIf"],[1,"col","x-col"],[1,"col","x-col",2,"text-align","right"],[2,"cursor","pointer",3,"color","action","data","isExpandAll","active","labels"],[1,"row","x-warehouse",3,"ngClass","dblclick","click"],["type","text","name","search","placeholder","Search ledger...",1,"form-control",3,"ngModel","ngModelChange","click"]],template:function(e,t){1&e&&c["\u0275\u0275template"](0,Ws,3,2,"div",0),2&e&&c["\u0275\u0275property"]("ngIf",t.active)},directives:[E.u,E.t,e,E.r,k.d,k.r,k.u],pipes:[E.g,E.f],styles:[ac]}),e})(),rc=(()=>{class e{constructor(e,t,n,o,a,i,r){this.api=e,this.common=t,this.user=n,this.csvService=o,this.pdfService=a,this.accountService=i,this.modalService=r,this.activeTree=-1,this.fuelFilings=[],this.Ledgerregister=[],this.selectedName="",this.deletedId=0,this.pageName="",this.sizeledger=0,this.voucherEntries=[],this.flag=0,this.ledgerRegister={enddate:this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),startdate:(new Date).getMonth()+1>3?this.common.dateFormatternew((new Date).getFullYear()+"-04-01","ddMMYYYY",!1,"-"):this.common.dateFormatternew((new Date).getFullYear()-1+"-04-01","ddMMYYYY",!1,"-"),ledger:{name:"All",id:0},group:{name:"All",id:0},vouchertype:{name:"All",id:0},isamount:0,remarks:"",vouchercustcode:"",vouchercode:"",frmamount:0,toamount:0},this.TripEditData=[],this.VoucherEditTime=[],this.pendingDataEditTme=[],this.tripExpDriver=[],this.tripExpenseVoucherTrips=[],this.activeId="vouchertype",this.activedateid="",this.vouchertypedata=[],this.ledgerData=[],this.secondarygroup=[],this.allowBackspace=!0,this.showDateModal=!1,this.f2Date="startdate",this.lastActiveId="",this.selectedRow=-1,this.isExpandMainGroup=!1,this.isExpandAll=!1,this.isExpand="",this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.ledgerRegister.startdate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.ledgerRegister.enddate,this.common.refresh=this.refresh.bind(this),this.common.params&&this.common.params.pageName&&(this.pageName=this.common.params.pageName,this.deletedId=0,this.GetLedger(),this.sizeledger=1),this.common.currentPage="Ledger Register",this.common.handleModalSize("class","modal-lg","1250","px",0),this.getVoucherTypeList(),this.getAllLedger(),this.getSecondaryGoup()}ngOnInit(){}refresh(){this.GetLedger()}getAllLedger(){this.common.loading++,this.api.post("Suggestion/GetAllLedger",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.ledgerData=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getVoucherTypeList(){this.common.loading++,this.api.post("Suggestion/GetVouchertypeList",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res======:",e.data),this.vouchertypedata=e.data,this.vouchertypedata.push({id:-1001,name:"Stock Received"},{id:-1002,name:"Stock Transfer"},{id:-1003,name:"Stock Issue"},{id:-1004,name:"Stock Transfer Received"}),console.log("res type list",this.vouchertypedata)},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getSecondaryGoup(){this.common.loading++,this.api.post("Accounts/getSecondaryGoup",{foid:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.secondarygroup=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}GetLedger(){let e={foid:123,deleted:this.deletedId};console.log("deleted ledger and simple",e),this.common.loading++,this.api.post("Accounts/GetLedgerdata",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.Ledgerregister=e.data},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}getDetail(){this.ledgerRegister.startdate=this.accountService.fromdate,this.ledgerRegister.enddate=this.accountService.todate;let e={ledgerid:this.ledgerRegister.ledger.id,vouchertyid:this.ledgerRegister.vouchertype.id,groupid:this.ledgerRegister.group.id,startDate:this.ledgerRegister.startdate,endDate:this.ledgerRegister.enddate,isamount:this.ledgerRegister.isamount,remarks:this.ledgerRegister.remarks,vouchercustcode:this.ledgerRegister.vouchercustcode,vouchercode:this.ledgerRegister.vouchercode,frmamount:this.ledgerRegister.frmamount,toamount:this.ledgerRegister.toamount};this.common.loading++,this.api.post("Accounts/getLedgerRegister",e).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.Ledgerregister=e.data,this.generalizeData()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}generalizeData(){this.voucherEntries=[];for(let e=0;e<this.Ledgerregister.length;e++){let t=this.Ledgerregister[e],n=t.y_path.split("--\x3e");t.labels=n.splice(1,n.length);let o=this.voucherEntries.findIndex(e=>e.name===n[0]);-1===o?this.voucherEntries.push({name:n[0],data:[t],debit:parseFloat(t.y_dramunt),credit:parseFloat(t.y_cramunt)}):(this.voucherEntries[o].debit+=parseFloat(t.y_dramunt),this.voucherEntries[o].credit+=parseFloat(t.y_cramunt),this.voucherEntries[o].data.push(t))}this.voucherEntries.map(e=>e.data=this.findChilds(e.data)),console.log("voucherEntries",this.voucherEntries)}findChilds(e){let t=[];for(let n=0;n<e.length;n++)if(e[n].labels.length){let o=e[n],a=o.labels;o.labels=a.splice(1,a.length);let i=t.findIndex(e=>e.name===a[0]);-1===i?t.push({name:a[0],data:[o],debit:o.y_ledger_name?parseFloat(o.y_dramunt):0,credit:o.y_ledger_name?parseFloat(o.y_cramunt):0}):(t[i].debit+=o.y_ledger_name?parseFloat(o.y_dramunt):0,t[i].credit+=o.y_ledger_name?parseFloat(o.y_cramunt):0,o.y_ledger_name&&t[i].data.push(o))}if(t.length)return t.map(e=>({name:e.name,data:this.findChilds(e.data),debit:e.debit,credit:e.credit}));{let t=[],n=Ut.groupBy(e,"y_ledger_name");for(let e in n)if(n[e].length>1){let o={name:e,ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dramunt),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cramunt),0)};t.push(o)}else{let o={name:e,ledgerName:e,data:n[e].map(e=>(e.y_ledger_name="",e)),debit:n[e].reduce((e,t)=>e+parseFloat(t.y_dramunt),0),credit:n[e].reduce((e,t)=>e+parseFloat(t.y_cramunt),0)};t.push(o)}return t}}keyHandler(e){const t=e.key.toLowerCase();if(this.activeId=document.activeElement.id,console.log("Active event",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.lastActiveId),this.handleVoucherDateOnEnter(this.activeId),void this.setFoucus(this.lastActiveId);if("enter"==t||!this.showDateModal||!this.activeId.includes("startDate")&&!this.activeId.includes("endDate")){if("enter"==t)this.allowBackspace=!0,this.activeId.includes("vouchertype")?this.setFoucus("group"):this.activeId.includes("ledgerdaybook")?this.setFoucus("startdate"):this.activeId.includes("group")?this.setFoucus("ledgerdaybook"):this.activeId.includes("frmamount")?this.setFoucus("toamount"):this.activeId.includes("toamount")?this.setFoucus("vouchercode"):this.activeId.includes("vouchercode")?this.setFoucus("vouchercustcode"):this.activeId.includes("vouchercustcode")?this.setFoucus("remarks"):this.activeId.includes("remarks")?this.setFoucus("trantype"):this.activeId.includes("trantype")?this.setFoucus("frmamount"):this.activeId.includes("startdate")?(this.ledgerRegister.startdate=this.common.handleDateOnEnterNew(this.ledgerRegister.startdate),this.setFoucus("enddate")):this.activeId.includes("enddate")&&(this.ledgerRegister.enddate=this.common.handleDateOnEnterNew(this.ledgerRegister.enddate),this.setFoucus("submit"));else if("backspace"==t&&this.allowBackspace)e.preventDefault(),console.log("active 1",this.activeId),"enddate"==this.activeId&&this.setFoucus("startdate"),"startdate"==this.activeId&&this.setFoucus("ledgerdaybook"),"trantype"==this.activeId&&this.setFoucus("group"),"remarks"==this.activeId&&this.setFoucus("vouchercustcode"),"vouchercustcode"==this.activeId&&this.setFoucus("vouchercode"),"vouchercode"==this.activeId&&this.setFoucus("toamount"),"toamount"==this.activeId&&this.setFoucus("frmamount"),"frmamount"==this.activeId&&this.setFoucus("trantype"),"group"==this.activeId&&this.setFoucus("ledgerdaybook"),"ledgerdaybook"==this.activeId&&this.setFoucus("vouchertype");else if(t.includes("arrow"))this.allowBackspace=!1;else if("startdate"!=this.activeId&&"enddate"!=this.activeId||"backspace"===t)"backspace"!=t&&(this.allowBackspace=!1);else if(!/[0-9]|[-]/g.test(t))return void e.preventDefault();(t.includes("arrowup")||t.includes("arrowdown"))&&!this.activeId&&this.Ledgerregister.length&&("arrowup"==t&&0!=this.selectedRow?this.selectedRow--:this.selectedRow!=this.Ledgerregister.length-1&&this.selectedRow++)}}RowSelected(e){console.log("data of u",e),this.selectedName=e}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}handleVoucherDateOnEnter(e){let t=[],n="-",o="startdate"==this.activedateid?"startdate":"enddate";if(this.ledgerRegister[o].includes("-"))t=this.ledgerRegister[o].split("-");else{if(!this.ledgerRegister[o].includes("/"))return void this.common.showError("Invalid Date Format!");t=this.ledgerRegister[o].split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=t[2];r=1==r.length?"200"+r:2==r.length?"20"+r:r,console.log("Date: ",a+n+i+n+r),this.ledgerRegister[o]=a+n+i+n+r}onSelected(e,t,n){this.ledgerRegister[t].name=e[n],this.ledgerRegister[t].id=e.id}openVoucherDetail(e,t){console.log("vouher id",e),this.common.params={vchid:e,vchcode:t},this.modalService.open(_t.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1,windowClass:"accountModalClass"}).result.then(e=>{})}openinvoicemodel(e,t,n,o){n.toLowerCase().includes("purchase")||n.toLowerCase().includes("sales")||n.toLowerCase().includes("debit")||n.toLowerCase().includes("credit")?(console.log("invoice edit"),this.common.params={invoiceid:e,delete:0,newid:0,ordertype:o.y_vouchertype_id,isModal:!0},this.modalService.open(Tt.a,{size:"lg",container:"nb-layout",windowClass:"page-as-modal"}).result.then(e=>{console.log("Data: invoice ",e)})):n.toLowerCase().includes("fuel")?this.openFuelEdit(o):n.toLowerCase().includes("trip")?this.openConsignmentVoucherEdit(o):(this.common.params={voucherId:e,delete:0,addvoucherid:0,voucherTypeId:o.y_vouchertype_id},this.modalService.open(Mt.a,{size:"lg",container:"nb-layout",backdrop:"static",keyboard:!1}).result.then(e=>{console.log("Data: ",e)})),this.common.currentPage="Ledger Register"}openFuelEdit(e){console.log("vch data new ##",e);let t=[];console.log("testing issue solved"),t.push(this.getVocherEditTime(e.y_voucherid)),t.push(this.getDataFuelFillingsEdit(e.y_vehicle_id,e.y_refid,e.y_voucherid)),Promise.all(t).then(t=>{this.common.params={vehId:e.y_vehicle_id,lastFilling:this.ledgerRegister.startdate,currentFilling:this.ledgerRegister.enddate,fuelstationid:e.y_refid,fuelData:this.fuelFilings,voucherId:e.y_voucherid,voucherData:this.VoucherEditTime},this.modalService.open(Ot.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data return: ",e)})}).catch(e=>{console.log(e),this.common.showError("There is some technical error occured. Please Try Again!")})}getDataFuelFillingsEdit(e,t,n){return new Promise((o,a)=>{const i={vehId:e,lastFilling:this.ledgerRegister.startdate,currentFilling:this.ledgerRegister.enddate,fuelstationid:t,voucherId:n};this.common.loading++,this.api.post("Fuel/getFeulfillings",i).subscribe(e=>{this.common.loading--,e.data.length?(this.fuelFilings=e.data,o()):this.common.showError("please Select Correct date")},e=>{console.log(e),this.common.loading--,this.common.showError(),a()})})}openConsignmentVoucherEdit(e){const t={vehId:0,voucherid:e.y_voucherid,isdate:0};this.common.loading++,this.api.post("VehicleTrips/getTripExpenceVouher",t).subscribe(t=>{console.log("trip expence",t),this.common.loading--,this.getVoucherSummary(t.data[0],e)},e=>{console.log(e),this.common.loading--,this.common.showError()})}getVoucherSummary(e,t){let n=[];n.push(this.getPendingOnEditTrips(e.y_vehicle_id)),n.push(this.getVocherEditTime(e.y_voucher_id)),n.push(this.getPendingTripsEditTime(e.y_id,e.y_vehicle_id)),-151==t.y_vouchertype_id&&n.push(this.getTripsExpDriver(e.y_id)),n.push(this.getTripExpenseVoucherTripsData(e)),Promise.all(n).then(n=>{this.showVoucherSummary(this.tripExpenseVoucherTrips,e,t)}).catch(e=>{console.log("Error:",e),this.common.showError("There is some technical error occured. Please Try Again!")})}getTripExpenseVoucherTripsData(e){return new Promise((t,n)=>{const o={voucherId:e.y_voucher_id,voucherDetail:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripExpenseVoucherTripsData",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpenseVoucherTrips=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getPendingOnEditTrips(e){return new Promise((t,n)=>{const o={vehId:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTrips",o).subscribe(e=>{console.log(e),this.common.loading--,this.TripEditData=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n()})})}getVocherEditTime(e){return new Promise((t,n)=>{const o={vchId:e};this.common.loading++,this.api.post("Voucher/getVoucherDetail",o).subscribe(e=>{console.log(e),this.common.loading--,this.VoucherEditTime=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}getPendingTripsEditTime(e,t){return new Promise((n,o)=>{const a={vehId:t,vchrid:e};this.common.loading++,this.api.post("VehicleTrips/getPendingVehicleTripsEdit",a).subscribe(e=>{console.log(e),this.common.loading--,this.pendingDataEditTme=e.data,n()},e=>{console.log(e),this.common.loading--,this.common.showError(),o()})})}getTripsExpDriver(e){return new Promise((t,n)=>{const o={tripVchrId:e};this.common.loading++,this.api.post("TripExpenseVoucher/getTripsExpDriver",o).subscribe(e=>{console.log(e),this.common.loading--,this.tripExpDriver=e.data,t()},e=>{console.log(e),this.common.loading--,this.common.showError(),n(e)})})}addvance(){this.common.params={isamount:this.ledgerRegister.isamount,remarks:this.ledgerRegister.remarks,vouchercustcode:this.ledgerRegister.vouchercustcode,vouchercode:this.ledgerRegister.vouchercode,frmamount:this.ledgerRegister.frmamount,toamount:this.ledgerRegister.toamount},this.modalService.open(Ft.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{console.log("Data: ",e),e.response&&(this.ledgerRegister.isamount=e.ledger.isamount,this.ledgerRegister.remarks=e.ledger.remarks,this.ledgerRegister.vouchercustcode=e.ledger.vouchercustcode,this.ledgerRegister.vouchercode=e.ledger.vouchercode,this.ledgerRegister.frmamount=e.ledger.frmamount,this.ledgerRegister.toamount=e.ledger.toamount,this.flag=0!=e.ledger.toamount||0!=e.ledger.frmamount||""!=e.ledger.vouchercode||""!=e.ledger.vouchercustcode||""!=e.ledger.remarks||0!=e.ledger.isamount?1:0)})}showVoucherSummary(e,t,n){let o=this.pendingDataEditTme;this.common.params={vehId:t.y_vehicle_id,tripDetails:e,tripVoucher:t,tripEditData:this.TripEditData,tripPendingDataSelected:o,VoucherData:this.VoucherEditTime,tripExpDriver:this.tripExpDriver,typeFlag:1,permanentDelete:0},console.log("tripPendingDataSelected",o,"this.common.params",this.common.params),this.modalService.open(Pn.a,{size:"lg",container:"nb-layout",backdrop:"static"}).result.then(e=>{})}csvFunction(){let e=[];e.push(Object.assign({particular:"Particular",ledgerName:"Ledger Name",voucherCode:"Voucher Code",voucherCustCode:"Voucher Cust Code",voucherDate:"Voucher Date",voucherType:"Voucher Type",drAmount:"Dr Amount",crAmount:"Cr Amount"})),this.voucherEntries.forEach(t=>{e.push({particular:t.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:t.debit,crAmount:t.credit}),e.push(...this.generateCSVData(t.data,"  "))}),this.csvService.jsonToExcel(e)}generateCSVData(e,t){let n=[];for(let o=0;o<e.length;o++){let a=e[o];a.name?(n.push({particular:t+a.name,ledgerName:"",voucherCode:"",voucherCustCode:"",voucherDate:"",voucherType:"",drAmount:a.debit,crAmount:a.credit}),n.push(...this.generateCSVData(a.data,t+"  "))):n.push({particular:"",ledgerName:a.y_ledger_name,voucherCode:a.y_code,voucherCustCode:a.y_voucher_cust_code,voucherDate:a.y_voucher_date,voucherType:a.y_voucher_type_name,drAmount:a.y_dramunt,crAmount:a.y_cramunt})}return n}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](mt.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ledgerregidter"]],decls:75,vars:15,consts:[[2,"margin","0px","border","0px"],[3,"keydown"],["title","PDF Export",1,"pdf-icon",2,"cursor","pointer",3,"click"],[1,"fa","fa-file-pdf"],["title","CSV Export",1,"exel-icon",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"fas","fa-file-excel"],[1,"",2,"float","right","margin-right","20px"],["type","radio","name","view-type","value","main",3,"ngModel","ngModelChange"],["type","radio","name","view-type","value","sub",3,"ngModel","ngModelChange"],[1,"row",2,"margin-left","0px"],[1,"col-9","pl-0","pr-0"],[1,"row"],[1,"col-4","pl-0"],[1,"form-group"],[1,"tjr-label"],["autocomplete","off","type","text","id","vouchertype","name","vouchertype",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","group","name","group",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["autocomplete","off","type","text","id","ledgerdaybook","name","ledger",1,"form-control","tjr-input",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","startdate","placeholder","Select Date","name","account-date","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],["type","text","autocomplete","off","id","enddate","placeholder","Select Date","name","account-enddate","maxlength","10",1,"form-control","tjr-input",2,"cursor","pointer",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["class","form-group addvance",4,"ngIf"],["type","button","outline","","id","submit",1,"btn","btn-primary","btn-block","tjr-button",2,"cursor","pointer","margin-top","18px",3,"click"],[1,"col-3","pl-0","pr-0"],[1,"auto-sugg"],["class","form-group",4,"ngIf"],["id","balance-sheet"],[1,"row",2,"margin","0px 0px 0px 0px","width","100%"],[1,"row","x-heading"],[1,"col","x-col"],[1,"jrx-dtbody"],["class","x-data",4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"form-group","addvance"],["href","javascript:void(0)","outline","","id","submit",3,"click"],["href","javascript:void(0)","outline","","id","submit",1,"advncolor",3,"click"],["targetId","vouchertype","display","name",3,"data","select"],["targetId","ledgerdaybook","display","name",3,"data","select"],["targetId","group","display","name",3,"data","select"],[1,"x-data"],[1,"row","x-stocktype",2,"cursor","pointer",3,"click"],[1,"col","x-col",2,"text-align","right"],["labels","",3,"action","getaction","data","isExpandAll","active"],[1,"modal-footer"],[1,"col"],["type","button","outline","","id","cancel",1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275listener"]("click",(function(){return t.pdfService.htmlToPdf("balance-sheet")})),c["\u0275\u0275element"](3,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",4),c["\u0275\u0275listener"]("click",(function(){return t.csvFunction()})),c["\u0275\u0275element"](5,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"span"),c["\u0275\u0275elementStart"](8,"input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](9," Expand Main Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"span"),c["\u0275\u0275elementStart"](11,"input",8),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isExpand=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](12," Expand All"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"div",9),c["\u0275\u0275elementStart"](14,"div",10),c["\u0275\u0275elementStart"](15,"div",11),c["\u0275\u0275elementStart"](16,"div",12),c["\u0275\u0275elementStart"](17,"div",13),c["\u0275\u0275elementStart"](18,"label",14),c["\u0275\u0275text"](19,"Voucher"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"input",15),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.vouchertype.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",12),c["\u0275\u0275elementStart"](22,"div",13),c["\u0275\u0275elementStart"](23,"label",14),c["\u0275\u0275text"](24,"Group "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"input",16),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.group.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",12),c["\u0275\u0275elementStart"](27,"div",13),c["\u0275\u0275elementStart"](28,"label",14),c["\u0275\u0275text"](29,"Ledger"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ledgerRegister.ledger.name=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](31,"div",11),c["\u0275\u0275elementStart"](32,"div",12),c["\u0275\u0275elementStart"](33,"div",13),c["\u0275\u0275elementStart"](34,"label",14),c["\u0275\u0275text"](35,"Starting Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"input",18),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.fromdate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div",12),c["\u0275\u0275elementStart"](38,"div",13),c["\u0275\u0275elementStart"](39,"label",14),c["\u0275\u0275text"](40,"End Date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"input",19),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.accountService.todate=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](42,"div",20),c["\u0275\u0275template"](43,Qs,3,0,"div",21),c["\u0275\u0275template"](44,Js,3,0,"div",21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",20),c["\u0275\u0275elementStart"](46,"div",13),c["\u0275\u0275elementStart"](47,"button",22),c["\u0275\u0275listener"]("click",(function(){return t.getDetail()})),c["\u0275\u0275text"](48,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"div",23),c["\u0275\u0275elementStart"](50,"div",24),c["\u0275\u0275template"](51,Xs,2,1,"div",25),c["\u0275\u0275template"](52,Zs,2,1,"div",25),c["\u0275\u0275template"](53,ec,2,1,"div",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](54,"div",26),c["\u0275\u0275elementStart"](55,"div",27),c["\u0275\u0275elementStart"](56,"div",28),c["\u0275\u0275elementStart"](57,"div",29),c["\u0275\u0275text"](58,"Particular "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](59,"div",29),c["\u0275\u0275text"](60,"Voucher Code"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](61,"div",29),c["\u0275\u0275text"](62,"Ref No "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](63,"div",29),c["\u0275\u0275text"](64,"Voucher Date "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](65,"div",29),c["\u0275\u0275text"](66,"Voucher Type "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](67,"div",29),c["\u0275\u0275text"](68,"Dr Amount "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](69,"div",29),c["\u0275\u0275text"](70,"Cr Amount "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](71,"div",30),c["\u0275\u0275template"](72,tc,19,14,"div",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](73,nc,5,0,"div",32),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](74,oc,4,1,"div",33)),2&e&&(c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",t.isExpand),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.ledgerRegister.vouchertype.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.ledgerRegister.group.name),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.ledgerRegister.ledger.name),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.accountService.fromdate),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.accountService.todate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0==t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.flag),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.activeId.includes("vouchertype")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("ledgerdaybook")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeId.includes("group")),c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",t.voucherEntries),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.pageName),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.z,k.d,k.r,k.u,k.m,E.u,E.t,w.a,ic],pipes:[E.g],styles:[ac]}),e})();const lc=function(e){return{highlight:e}};function sc(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr",4),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().selectedRow=n})),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275elementStart"](8,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().orderno[o]=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275elementStart"](10,"input",5),c["\u0275\u0275listener"]("ngModelChange",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().trailordr[o]=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275elementStart"](12,"input",6),c["\u0275\u0275listener"]("ngModelChange",(function(n){c["\u0275\u0275restoreView"](e);const o=t.index;return c["\u0275\u0275nextContext"]().isset[o]=n})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"button",7),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,o=t.index,a=c["\u0275\u0275nextContext"]();return a.changevalue(n.id,a.orderno[o],a.isset[o],a.trailordr[o])})),c["\u0275\u0275text"](14,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](10,lc,o.selectedRow==n)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](n+1),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.parent_groupname),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.groupname),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("name",o.order+"-"+n)("ngModel",o.orderno[n]),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("name",o.trial+"-"+n)("ngModel",o.trailordr[n]),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("name",o.isasset+"-"+n)("ngModel",o.isset[n])}}let cc=(()=>{class e{constructor(e,t,n,o){this.api=e,this.common=t,this.user=n,this.modalService=o,this.reportList=[],this.orderno=[],this.isset=[],this.trailordr=[],this.common.refresh=this.refresh.bind(this),this.getRportList(),this.common.currentPage="Report Configure"}ngOnInit(){}refresh(){this.getRportList()}getRportList(){this.common.loading++,this.api.post("Accounts/GetReportConfig",{search:123}).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.reportList=e.data,this.reportList.map((e,t)=>{this.orderno[t]=e.balsht_ord,this.trailordr[t]=e.trialbal_ord,this.isset[t]=e.balsht_isasset})},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}changevalue(e,t,n,o){console.log("set data",e,t,n);let a={id:e,orno:t,isset:n,trial:o};this.common.loading++,this.api.post("Accounts/updateReportConfig",a).subscribe(e=>{this.common.loading--,console.log("Res:",e.data),this.common.showToast("Updated Successfully"),this.getRportList()},e=>{this.common.loading--,console.log("Error: ",e),this.common.showError()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](b.a),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["reportconfig"]],decls:19,vars:1,consts:[[2,"border","0px"],["id","table",1,"table","table-bordered","ml-0","mr-0","mt-4"],[2,"background-color","#263238","color","#fff"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],["type","number",1,"form-control","inn","ref-input",3,"name","ngModel","ngModelChange"],["type","checkbox",1,"form-control","inn",3,"name","ngModel","ngModelChange"],[1,"form-control","inn","cngval",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body"),c["\u0275\u0275elementStart"](2,"table",1),c["\u0275\u0275elementStart"](3,"thead",2),c["\u0275\u0275elementStart"](4,"tr"),c["\u0275\u0275elementStart"](5,"th"),c["\u0275\u0275text"](6,"S.No"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"th"),c["\u0275\u0275text"](8,"Parent Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"th"),c["\u0275\u0275text"](10,"Group"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12,"Balance Sheet Order"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14,"Tial Balance Order"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16,"Is Asset For Balance Sheet"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"tbody"),c["\u0275\u0275template"](18,sc,15,12,"tr",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](18),c["\u0275\u0275property"]("ngForOf",t.reportList))},directives:[h.s,h.r,E.t,E.r,k.x,k.d,k.r,k.u,k.a],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none;background-color:#000!important;color:#fff!important}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow-x:auto;max-height:calc(100vh - 155px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:160px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.inn[_ngcontent-%COMP%]{min-width:60px;max-width:70px}.cngval[_ngcontent-%COMP%]{margin-left:135px!important;margin-top:-15px!important}"]}),e})();function dc(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",15),c["\u0275\u0275listener"]("keydown",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyHandler(t)})),c["\u0275\u0275elementStart"](1,"div",16),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"input",17),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().f2Date=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.f2Date)}}let mc=(()=>{class e{constructor(e,t,n,o,a,i,r,l){this.api=e,this.common=t,this.user=n,this.excelService=o,this.csvService=a,this.accountService=i,this.http=r,this.modalService=l,this.headingName="",this.branchname="",this.branchData=[],this.branchType={name:"",id:0},this.endDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.startDate=this.common.dateFormatternew(new Date,"ddMMYYYY",!1,"-"),this.allowBackspace=!0,this.f2Date="startdate",this.lastActiveId="",this.showDateModal=!1,this.activedateid="",this.type="",this.activeGroup=[],this.accountService.fromdate=this.accountService.fromdate?this.accountService.fromdate:this.startDate,this.accountService.todate=this.accountService.todate?this.accountService.todate:this.endDate,this.common.currentPage="Tally Import",this.headingName=this.user._customer.name,this.branchname=this.accountService.selected.branch.name}ngOnInit(){}refresh(){this.branchname=this.accountService.selected.branch.name,console.log("financial year 122 :",this.accountService.selected.financialYear.name.split("-")[1])}onSelected(e,t,n){console.log("selected data",e),this.branchType.name=e[n],this.branchType.id=e.id,this.setFoucus("startDate")}handleFileSelection(e,t){if(e.target.files[0].size/1048576>50)return this.common.showError("File Should less than 50 mb"),!1;this.common.loading++,this.common.getBase64(e.target.files[0]).then(t=>{let n=e.target.files[0];if(console.log("file with extension",n),"text/xml"!=n.type)return this.common.showError("valid Format Are : xml"),!1;this.common.showToast("SuccessFull File Selected"),this.document=t,this.common.loading--},e=>{this.common.loading--,console.error("Base Err: ",e)})}keyHandler(e){const t=e.key.toLowerCase();let n=document.activeElement.id;if(console.log("Active event1111",e),"enter"==t&&this.showDateModal)return this.showDateModal=!1,console.log("Last Ac: ",this.f2Date,this.lastActiveId,n),this.handleVoucherDateOnEnter(n),void this.setFoucus(this.lastActiveId);"enter"!=t&&this.showDateModal&&(n.includes("startdate")||n.includes("enddate"))||"enter"==t&&(n.includes("branchType")?this.setFoucus("startDate"):n.includes("startDate")?this.setFoucus("endDate"):n.includes("endDate")&&this.setFoucus("master"))}handleVoucherDateOnEnter(e){let t=[],n="-",o=this.f2Date;if(o.includes("-"))t=o.split("-");else{if(!o.includes("/"))return void this.common.showError("Invalid Date Format!");t=o.split("/"),n="/"}let a=t[0];a=1==a.length?"0"+a:a;let i=t[1];i=1==i.length?"0"+i:i;let r=i<"04"?this.accountService.selected.financialYear.name.split("-")[0]:this.accountService.selected.financialYear.name.split("-")[1];console.log("financial year",r,i);let l=t[2];l=l?1==l.length?"200"+l:2==l.length?"20"+l:l:r,console.log("Date: ",a+n+i+n+l),"startDate"==this.activedateid?this.startDate=a+n+i+n+l:this.endDate=a+n+i+n+l}getTallyData(e){this.startDate=this.accountService.fromdate,this.endDate=this.accountService.todate;const t={tallyType:this.type,file:this.document};this.common.loading++,this.api.post("Voucher/importTallyData",t).subscribe(e=>{console.log("set invoice",e.success),e.success&&this.common.showToast(e.data),this.common.loading--},e=>{console.log(e),this.common.loading--,this.common.showError()})}setFoucus(e,t=!0){setTimeout(()=>{let t=document.getElementById(e);console.log("Element: ",t),t.focus()},100)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](Bl.a),c["\u0275\u0275directiveInject"](kn.a),c["\u0275\u0275directiveInject"](r.a),c["\u0275\u0275directiveInject"](Nl.b),c["\u0275\u0275directiveInject"](d.r))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["tallyimport"]],decls:29,vars:2,consts:[[2,"border","0px"],[3,"keydown"],[1,"row","mt-3","pl-6"],[1,"col-9"],[1,"row"],[1,"col-4"],[1,"form-group"],[1,"tjr-label"],["name","type",3,"ngModel","ngModelChange"],["value","master"],["value","voucher"],["type","file","name","myfile1","id","filePicker1",3,"change"],[1,"lessthan"],["id","master",1,"btn","w-100",3,"click"],["class","date-modal",3,"keydown",4,"ngIf"],[1,"date-modal",3,"keydown"],[1,"date-modal-body"],["type","text","name","voucher-date-f2","id","voucher-date-f2","maxlength","10",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-body",1),c["\u0275\u0275listener"]("keydown",(function(e){return t.keyHandler(e)})),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"div",5),c["\u0275\u0275elementStart"](6,"div",6),c["\u0275\u0275elementStart"](7,"label",7),c["\u0275\u0275text"](8,"Select Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"select",8),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.type=e})),c["\u0275\u0275elementStart"](10,"option",9),c["\u0275\u0275text"](11,"Ledger And Groups Xml(Master)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"option",10),c["\u0275\u0275text"](13,"Vouchers Xml"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",5),c["\u0275\u0275elementStart"](15,"div",6),c["\u0275\u0275elementStart"](16,"label",7),c["\u0275\u0275text"](17,"Xml File"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"input",11),c["\u0275\u0275listener"]("change",(function(e){return t.handleFileSelection(e,1)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"div",5),c["\u0275\u0275elementStart"](20,"div",6),c["\u0275\u0275elementStart"](21,"span",12),c["\u0275\u0275text"](22,"*File Should be less than 50 Mb "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div",4),c["\u0275\u0275elementStart"](24,"div",5),c["\u0275\u0275elementStart"](25,"div",6),c["\u0275\u0275elementStart"](26,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.getTallyData("true")})),c["\u0275\u0275text"](27,"submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](28,dc,4,1,"div",14)),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngModel",t.type),c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngIf",t.showDateModal))},directives:[h.s,h.r,k.D,k.r,k.u,k.w,k.G,E.u,k.d,k.m],styles:["button[_ngcontent-%COMP%]{padding:7px 10px!important;background-color:#263238;border-radius:5px!important;text-transform:capitalize!important;cursor:pointer;outline:none;-webkit-box-shadow:none;box-shadow:none}nb-card-header[_ngcontent-%COMP%]{padding:15px 20px;border:1px solid #efefef;margin-bottom:10px}.selected[_ngcontent-%COMP%]{background-color:#576c77}table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background-color:#ffee75!important;color:#000!important}span[_ngcontent-%COMP%]{display:block;border:1px solid #000;padding:8px;min-height:54px}.tjr-button[_ngcontent-%COMP%]{cursor:pointer;margin-top:18px;background:#263238!important;height:auto;border-radius:3px!important;padding:3px 8px!important}.auto-sugg[_ngcontent-%COMP%]{max-height:128px;min-height:128px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 10px;font-weight:400;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px!important;font-size:12px;width:165px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0!important;font-size:11px;border-radius:0!important;margin:0;background-color:transparent;color:#263238;outline:none;-webkit-box-shadow:none;box-shadow:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-right:40px;white-space:nowrap}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   .tbody-section[_ngcontent-%COMP%]{overflow-y:auto;display:block;width:100%;table-layout:fixed;overflow:auto;max-height:calc(100vh - 312px)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:auto}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4e4e4}.heading_second[_ngcontent-%COMP%]{background-color:#184154!important;color:#fff}input[type=radio][_ngcontent-%COMP%]{width:auto;display:inline-block;vertical-align:middle;margin:0 0 0 5px;border:0!important;height:auto}.debit_box[_ngcontent-%COMP%]{border:1px solid #000;padding:3px;text-align:left}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{display:inline-block}.credit[_ngcontent-%COMP%]{margin-left:30px}.date-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999999;top:0;left:0}.date-modal-body[_ngcontent-%COMP%]{background:#fff;width:152px;margin:15% auto auto}.pdf-icon[_ngcontent-%COMP%]{color:#9f0001}.exel-icon[_ngcontent-%COMP%]{color:#217346}.branchName[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:54px!important}.lessthan[_ngcontent-%COMP%]{border:0;color:red;margin-left:-114px}"]}),e})();const hc=[{path:"",component:p,children:[{path:"dashboard",component:g},{path:"orders",component:pe},{path:"orders/:id/:name",component:pe},{path:"stock-types",component:Ee},{path:"stock-subtypes",component:De},{path:"stockitem",component:Ae},{path:"account",component:Ge},{path:"ledgers",component:et},{path:"ledgers/:id",component:et},{path:"company-branches",component:st},{path:"vouchers",component:Ct},{path:"vouchers/:id/:name",component:Ct},{path:"daybooks",component:Kt},{path:"daybooks/:id",component:Kt},{path:"ledgerview",component:ln},{path:"ledgermapping",component:hn},{path:"trip-expense-tally",component:Kl},{path:"invoiceregister",component:yn},{path:"trip-voucher-expense",component:wn},{path:"trip-voucher-expense/:id",component:wn},{path:"outstanding",component:Qn},{path:"balancesheet",component:ei},{path:"profitloss",component:ka},{path:"stockavailable",component:ai},{path:"ware-house",component:li},{path:"cashbook",component:fi},{path:"bank-books",component:Di},{path:"city",component:Bi},{path:"storerequisitions",component:Wi},{path:"trading",component:Jo},{path:"openingstock",component:Zi},{path:"storerequisitions/:id",component:Wi},{path:"trialbalance",component:Dr},{path:"costcenter",component:Br},{path:"cost-center-report",component:nl},{path:"voucheredited",component:ll},{path:"fuelfillings",component:ml},{path:"vehicle-cost-center-list",component:pl},{path:"mapped-fuel-voucher",component:yl},{path:"vehicle-ledgers",component:Sl},{path:"daybookpending",component:Tl},{path:"gstreport",component:zl},{path:"tallyexport",component:Yl},{path:"statics",component:as},{path:"ledgerapprove",component:ms},{path:"account-entry-approval",component:us},{path:"stoclsummary",component:So},{path:"country",component:fs},{path:"state",component:Ss},{path:"ledgerregidter",component:rc},{path:"service/:id/:name",component:Tt.a},{path:"reportconfig",component:cc},{path:"tallyimport",component:mc}]}];let pc=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(hc)],o.g]}),e})();var gc=n("vTDv");let uc=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[gc.a]]}),e})();var bc=n("FUS3"),vc=n("uPX2"),xc=n("x/J1"),fc=n("FJ+T"),yc=n("biR6"),Cc=n("KWzY"),_c=n("SXPc"),Sc=n("KCPn"),Mc=n("KuNN"),Ec=n("mgFL"),wc=n("7acK"),kc=n("BiDX"),Pc=n("csNM"),Oc=n("7tAi"),Ic=n("ec4X"),Dc=n("9gLZ"),Vc=n("s8ed"),Fc=n("9MgD"),Tc=n("9OK8"),Bc=n("s3aq"),Ac=n("ubjK");let Lc=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[pc,gc.a,uc,bc.a,Mo.g]]}),e})();c["\u0275\u0275setComponentScope"](wa,[o.h,o.d,o.f,o.e,o.i,E.r,E.s,E.t,E.u,E.B,E.x,E.y,E.z,E.A,E.v,E.w,k.H,k.w,k.G,k.d,k.x,k.A,k.a,k.D,k.E,k.z,k.r,k.s,k.C,k.n,k.m,k.y,k.b,k.e,k.u,k.v,k.t,k.h,k.j,k.i,k.k,k.f,h.s,h.r,h.t,h.v,h.kb,h.D,h.u,h.q,h.L,h.K,h.O,h.P,h.Hb,h.Gb,h.lb,h.W,h.X,h.Pb,h.f,h.g,h.nb,h.ob,h.tb,h.ub,h.vb,h.x,h.db,h.z,d.a,d.G,d.J,d.H,d.I,d.K,d.c,d.d,d.f,d.O,d.N,d.e,d.Q,d.g,d.h,d.i,d.q,d.j,d.k,d.l,d.o,d.n,d.m,d.y,d.u,d.t,d.v,d.w,d.x,d.z,d.A,d.B,d.C,d.D,d.E,d.F,d.L,d.M,d.P,d.V,d.W,d.X,d.Y,d.Z,d.p,d.U,d.R,d.S,d.T,h.fb,h.m,h.o,h.Cb,h.Bb,h.Eb,h.Fb,h.k,h.R,h.S,h.U,h.H,h.I,h.a,h.c,h.d,h.b,h.i,h.yb,h.zb,h.hb,h.ib,h.qb,h.rb,h.cb,h.ab,h.bb,h.Nb,vc.a,xc.a,fc.a,yc.a,Cc.a,_c.a,Sc.a,Mc.a,Ec.a,m.a,wc.a,kc.a,Cn.a,Hl.a,w.a,Pc.a,Oc.a,ht.a,Ic.a,Dc.b,Mo.b,Mo.a,Mo.d,Mo.e,p,pe,Ee,De,Ae,Ge,et,st,Ct,Kt,ln,hn,yn,wn,Qn,ei,ka,ai,li,fi,Di,Bi,Wi,Jo,Zi,Dr,Br,nl,ll,ml,pl,yl,Sl,Tl,zl,Yl,Kl,as,ms,us,So,fs,Ss,rc,ic,Wn,Tt.a,cc,Za,Qo,wa,Ir,mc],[E.b,E.I,E.q,E.l,E.F,E.g,E.D,E.G,E.d,E.f,E.j,E.k,E.m,Vc.a,Fc.a,Tc.a,Bc.a,Ac.a])}}]);