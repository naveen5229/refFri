<nb-card>
    <nb-card-header class="pt-0">
      <div class="row">
          <h4 class="head">Trip Shared</h4>
      </div>
    </nb-card-header>
    <nb-card-body> 
        <div class="row mb-3">
            <div class="col-6">
                <auto-suggestion (onSelected)="searchVehicle($event)" url="suggestion/getFoVehicleList"
                display="regno" placeholder="Search Vehicle" [preSelected]="null"></auto-suggestion>
            </div>
            <div class="col-6 preference">
                <label class="w-30"> <h6>Preferences</h6> </label>
                <div class="d-flex text-right">
                <div>
                    <label>Gps</label>
                    <input type="radio" [(ngModel)]="preference" value="GPS" (click)="changevalue()">
                </div>
                <div>
                    <label>SIM</label>
                    <input type="radio" [(ngModel)]="preference" value="SIM" (click)="changevalue()">
                </div>
                <div>
                    <label>API</label>
                    <input type="radio" [(ngModel)]="preference" value="API" disabled>
                </div>
                <div>
                    <label>Driver App</label>
                    <input type="radio" [(ngModel)]="preference" value="DriverApp" disabled>
                </div>
            </div>
        </div>
        </div>
        <div class="row mb-2">
           
            <label class="col-3">Driver Name</label>
            <div class="col-3"> <input class="form-control" type="text" [(ngModel)]="divername">  </div>
      
       
            <label class="col-3">Driver Mobile</label>
            <div class="col-3"><input class="form-control" type="text" [(ngModel)]="divermobile"> </div>
       
        </div>
        <!-- <div class="row mb-2">
           
                <label class="col-3">Initiated Status</label>
                <div class="col-3">  <input class="form-control" type="text" [(ngModel)]="initiated"> </div>
           
           
                <label class="col-3">Active Status</label>
                <div class="col-3">  <input class="form-control" type="text" [(ngModel)]="activestatus">   </div>
         
        </div> -->
        <div class="row mb-2">
            <div class="col-3 pl-1 pr-1">
              <div class="box-outer"   [ngClass]="{'green' : (data && data['gps_icon_color'] == 'GREEN') , 'red' :(data && data['gps_icon_color'] == 'RED'),'box-others' : (!data),'selectedtab' : (preference == 'GPS')}">
                        <h6>GPS</h6>
                        <div class="box">
                    <div>
                        <label>Initial Status : </label>
                        <label *ngIf="data">{{data['gps']}}</label>
                    </div>
                    <div>
                        <label>Active Status : </label>
                        <label *ngIf="data">{{data['gps_status']}}</label>
                    </div>
                    <div>
                        <label>Last Data : </label>
                        <label *ngIf="data">{{data['gps_dttime'] | date:'dd-MMM-yyyy HH:mm'}}</label>
                    </div>
                    <!-- <div>
                        <label>Icon Color : </label>
                        <label *ngIf="data">{{data['gps_icon_color']}}</label>
                    </div> -->
                </div>
           </div>
        </div>
            <div class="col-3 pl-1 pr-1">
              <div class="box-outer"  [ngClass]="{'red' : (data && data['sim_icon_color'] == 'RED'),'green' : (data && data['sim_icon_color'] == 'GREEN'),'box-others' : (!data),'selectedtab' : (preference == 'SIM')}">
                <h6>SIM</h6>
                <div class="box">
            <div>
                <label>Initial Status : </label>
                <label *ngIf="data">{{data['sim']}}</label>
            </div>
            <div>
                <label>Active Status : </label>
                <label *ngIf="data">{{data['sim_status']}}</label>
            </div>
            <div>
                <label>Last Data : </label>
                <label *ngIf="data">{{data['sim_dttime']}}</label>
            </div>
            <div>
                <label>Status : </label>
                <label *ngIf="data">{{data['sim_user_status']}}</label>
            </div>
            <div>
                <label>Request Time : </label>
                <label *ngIf="data">{{data['sim_req_time']}}</label>
            </div>
            <div>
                <label>Responced Time : </label>
                <label *ngIf="data">{{data['sim_req_allowtime']}}</label>
            </div>
            <div>
                <label>Reminding Days : </label>
                <label *ngIf="data">{{data['remaining_days']}}</label>
            </div>
            <!-- <div>
                <label>Icon Color : </label>
                <label *ngIf="data">{{data['sim_icon_color']}}</label>
            </div> -->
        </div>
    </div>
            </div>
            <div class="col-3 pl-1 pr-1">
              <div class="box-outer box-others" [ngClass]="{'selectedtab' : (preference == 'API')}">
                <h6>API</h6>
                <div class="box">
            <div>
                <label>Initial Status</label>
                <label>_</label>
            </div>
            <div>
                <label>Active Status</label>
                <label>_</label>
            </div>
            <div>
                <label>Last Data</label>
                <label>_</label>

            </div>
            <!-- <div>
                <label>Icon Color</label>
                <label>_</label>
            </div> -->
            </div>
            </div>
        </div>
            <div class="col-3 pl-1 pr-1">
              <div class="box-outer box-others" [ngClass]="{'selectedtab' : (preference == 'DriverApp')}">
                <h6>Driver App</h6>
                <div class="box">
            <div>
                <label>Initial Status</label>
                <label>_</label>

            </div>
            <div>
                <label>Active Status</label>
                <label>_</label>

            </div>
            <div>
                <label>Last Data</label>
                <label>_</label>

            </div>
            <!-- <div>
                <label>Icon Color</label>
                <label>_</label>
            </div> -->
            </div>
            </div>
        </div>
        </div>
        <div class="row mb-2">
            <label class="col-3">Remarks</label>
           <div class="col-3"> <textarea class="form-control" type="text" [(ngModel)]="remark"  rows="4" cols="50"> </textarea></div>
          <div *ngIf="data" class="col-6">
            <div class="row">
            <label class="col-6">Final Status</label>
           <div class="col-6"> <input class="form-control" type="text"  [(ngModel)]="finalstatus" ></div>
        </div>
        </div>
       
        </div>
            <div class="text-right mb-2">
                <button class="btn btn-primary mr-5" (click)="((finalstatus == 'GREEN')? allowed=true : optionflag =true); allowedoption = true ; ">Allowed</button>
           
                <button class="btn btn-danger" (click)="((finalstatus == 'RED')? allowed = true : optionflag =true);allowedoption = false ; ">Disallowed</button>
            </div>
            <div class="row">
                <!-- <smart-table *ngIf="stampingdata" 
                    [data]="table.data" [settings]="table.settings" id="verifyState">
                  </smart-table> -->
                  <smart-table *ngIf="stampingdata && stampingdata.length" id="stampingdata" [data]="table.data" [settings]="table.settings">
                </smart-table>
            </div>
      
<div class="date-modal" *ngIf="allowed">
    <div class="date-modal-body data_model_save">
        <div>
        <!-- <h5><b>Invoice detail</b></h5> -->
        <p>Are You sure you want to preceed ?</p>
        <button (click)="callsave()" class="model-ex-button">Yes</button> <span>&nbsp;&nbsp;&nbsp;</span> 
        <button (click)="allowed=false" class="model-ex-button">Cancel</button>
        </div>
    </div>
</div>
<div class="date-modal" *ngIf="optionflag">
    <div class="date-modal-body data_model_save">
      <div class="row mb-5">
            <div class="option row">
            <label class="col-5 text-right">Type</label>
            <select *ngIf="allowedoption"  class="form-control col-5" [(ngModel)]="optionselect">
                <option>Please Select Option</option>
                <option>Allowed On Technical/Network issue</option>
                <option>Allowed -GPS Device Is Working</option>
                <option>Allowed On PLH Request</option>
                <option>Allowed -App/Sim Traking</option>
                <option>Allowed -App Installed</option>
                <option>Allowed -Constant Intiated</option>
            </select>
            <select *ngIf="!allowedoption"  class="form-control" [(ngModel)]="optionselect">
                <option>Please Select Option</option>
                <option>Not Allowed - Handed over to the Technician</option>
                <option>More option I will share </option>
            </select>
            </div>
            <div class="row">&nbsp;&nbsp;</div>
            <div class="row">
                <label class="col-5 text-right">Spatial Remarks</label>
                <div class="col-7">
                    <input class="form-control" type="text" [(ngModel)]="spatialremarks"> </div>
            </div>
        </div>
      <div class="text-right mb-5"> 
           <button class="btn btn-primary mr-5 model-ex-button" (click)="callsave()">Proceed</button>
          <button class="btn btn-danger mr-5 model-ex-button" (click)="optionflag=false">Cancel</button>
        </div>
      
    </div>
</div>
    </nb-card-body>
</nb-card>
