<nb-card style="border:0px;">
    <nb-card-header>
        <div class="row">
            <div class="col-4">
                <h5>Business Dashboard</h5>
            </div>
            <div class="col-2 text-right">
                <label> Tab Name </label>
            </div>
            <div class="col-3 text-right">
              <input type="text" [(ngModel)]=tabname class="form-control" placeholder="Enter Tab Name" [readonly]="backtabname">
            </div>
            <div class="col-3 text-right">
                <button class="btn btn-primary" (click)="saveReport()">Save</button>
            </div>
        </div>

    </nb-card-header>

    <nb-card-body class="p-0">

        <div class="row" style="margin-top: 5px;">
           
            <div class="col-2 topholdreport pr-2 pl-2">
               
                <p class="head">Dynamic Reports</p>
                <div class="holdContainer" style="border:none;">
                    <div title="drag it" class="dataelements" *ngFor="let report of reports;let i = index" [hidden]="report.isUsed"
                        draggable="true" [id]="'option-' + report._id" (dragstart)="selectDraggable(report)">
                        <span>{{report.name}}</span>
                    </div>
                </div>
                <p class="head">Global Reports</p>
                <div class="holdContainer" *ngIf="challanReports.length">
                    <div class="collas-head" (click)="collOne = !collOne"><p>Challan Reports</p> <span><i class="fas fa-sort-down" style="cursor: pointer"></i></span></div>
                    <div *ngIf= "collOne" class="collapseitem">
                    <div title="drag it"  class="dataelements" *ngFor="let challanReport of challanReports; let i = index" [hidden]="challanReport.isUsed"
                        draggable="true" [id]="'challan-option-' + challanReport.id"
                        (dragstart)="selectDraggable(challanReport, 'challan')">
                        <span>{{challanReport.rpt_title}}</span>
                    </div>
                </div>
                </div>
                <div class="holdContainer" *ngIf="tripReports.length">
                    <div class="collas-head" (click)="collTwo = !collTwo"><p>Trip Reports</p> <span><i class="fas fa-sort-down" style="cursor: pointer"></i></span></div>
                    <div *ngIf= "collTwo" class="collapseitem">
                    <div title="drag it"  class="dataelements" *ngFor="let challanReport of tripReports; let i = index" [hidden]="challanReport.isUsed"
                        draggable="true" [id]="'trip-option-' + challanReport.id"
                        (dragstart)="selectDraggable(challanReport, 'trip')">
                        <span>{{challanReport.rpt_title}}</span>
                    </div>
                </div>
                </div>
                <div class="holdContainer" *ngIf="trafficReports.length">
                    <div class="collas-head" (click)="collThree = !collThree"><p>Traffic Reports</p> <span><i class="fas fa-sort-down" style="cursor: pointer"></i></span></div>
                    <div *ngIf= "collThree" class="collapseitem">
                    <div title="drag it"  class="dataelements" *ngFor="let challanReport of trafficReports; let i = index" [hidden]="challanReport.isUsed"
                        draggable="true" [id]="'trip-option-' + challanReport.id"
                        (dragstart)="selectDraggable(challanReport, 'traffic')">
                        <span>{{challanReport.rpt_title}}</span>
                    </div>
                </div>
                </div>
            </div>

            <div class="col-10 reports-container" (drop)="handleDropped($event)" (dragover)="handleDragOver($event)">
                <div class="report draggable" *ngFor="let report of reports;let i = index" [hidden]="!report.isUsed" [style.width]="report.rpt_width + 'px'"
                [style.height]="report.rpt_height + 'px'"
                [style.top]="report.y_pos + 'px'" [style.left]="report.x_pos + 'px'" 
                    [id]="'report-' + report._id">
                    <div class="report-container">
                        <dynamic-report [savedReportSelect]="report"></dynamic-report>
                        <i class="fa fa-window-close report-close" (click)="deleteReport(report)"></i>
                    </div>
                </div>
                <div class="report draggable" *ngFor="let challanReport of challanReports; let i = index"
                    [hidden]="!challanReport.isUsed" [id]="'challan-report-' + challanReport.id"  [style.width]="challanReport.rpt_width + 'px'"
                    [style.height]="challanReport.rpt_height + 'px'"
                    [style.top]="challanReport.y_pos + 'px'" [style.left]="challanReport.x_pos + 'px'" >
                    <div class="report-container">
                        <challan-trends *ngIf="challanReport.id == 1"></challan-trends>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                        <state-wise *ngIf="challanReport.id == 2"></state-wise>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                        <worst-drivers *ngIf="challanReport.id == 3"></worst-drivers>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                        <most-aged *ngIf="challanReport.id == 4"></most-aged>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                        <latest *ngIf="challanReport.id == 5"></latest>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                        <worst-drivers-years *ngIf="challanReport.id == 6"></worst-drivers-years>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(challanReport)"></i>
                    </div>
                </div>
                <div class="report draggable" *ngFor="let trreport of tripReports;let i = index" [hidden]="!trreport.isUsed" [style.width]="trreport.rpt_width + 'px'"
                [style.height]="trreport.rpt_height + 'px'"
                [style.top]="trreport.y_pos + 'px'" [style.left]="trreport.x_pos + 'px'" 
                    [id]="'trip-report-' + trreport._id">
                    <div class="trreport-container">
                        <dynamic-report [savedReportSelect]="trreport"></dynamic-report>
                        <i class="fa fa-window-close report-close" (click)="deleteReport(trreport)"></i>
                    </div>
                </div>
                <div class="report draggable" *ngFor="let singletripReport of tripReports; let i = index"
                [hidden]="!singletripReport.isUsed" [id]="'trip-report-' + singletripReport.id"  [style.width]="singletripReport.rpt_width + 'px'"
                [style.height]="singletripReport.rpt_height + 'px'"
                [style.top]="singletripReport.y_pos + 'px'" [style.left]="singletripReport.x_pos + 'px'" >
                    <div class="report-container">
                        <trip-onward-kmpd *ngIf="singletripReport.id == 1"></trip-onward-kmpd>
                        <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                        <avg-loading *ngIf="singletripReport.id == 2"></avg-loading>
                            <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                            <avg-unloading *ngIf="singletripReport.id == 3"></avg-unloading>
                                <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                <worst-vehicles *ngIf="singletripReport.id == 4"></worst-vehicles>
                                    <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                    <longest-loading *ngIf="singletripReport.id == 5"></longest-loading>
                                    <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                    <longest-unloading *ngIf="singletripReport.id == 6"></longest-unloading>
                                        <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                        <slowest-onward *ngIf="singletripReport.id == 7"></slowest-onward>
                                        <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                        <longest-unloading-sites *ngIf="singletripReport.id == 8"></longest-unloading-sites>
                                        <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                                        <gps-performance *ngIf="singletripReport.id == 9"></gps-performance>
                                            <i class="fa fa-window-close report-close" (click)="deleteTripReport(singletripReport)"></i>
                    </div>
                </div>
                <div class="report draggable" *ngFor="let trafficreport of trafficReports;let i = index" [hidden]="!trafficreport.isUsed" [style.width]="trafficreport.rpt_width + 'px'"
                [style.height]="trafficreport.rpt_height + 'px'"
                [style.top]="trafficreport.y_pos + 'px'" [style.left]="trafficreport.x_pos + 'px'" 
                    [id]="'traffic-report-' + trafficreport._id">
                    <div class="trreport-container">
                        <dynamic-report [savedReportSelect]="trafficreport"></dynamic-report>
                        <i class="fa fa-window-close report-close" (click)="deleteReport(trafficreport)"></i>
                    </div>
                </div>
                <div class="report draggable" *ngFor="let singletrafficReport of trafficReports; let i = index"
                [hidden]="!singletrafficReport.isUsed" [id]="'traffic-report-' + singletrafficReport.id"  [style.width]="singletrafficReport.rpt_width + 'px'"
                [style.height]="singletrafficReport.rpt_height + 'px'"
                [style.top]="singletrafficReport.y_pos + 'px'" [style.left]="singletrafficReport.x_pos + 'px'" >
                    <div class="report-container">
                        <live-traffic-status *ngIf="singletrafficReport.id == 1"></live-traffic-status>
                        <i class="fa fa-window-close report-close" (click)="deleteTrafficReport(singletrafficReport)"></i>
                        <longest-driver-unavailable *ngIf="singletrafficReport.id == 2"></longest-driver-unavailable>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                        <longest-gps-offline *ngIf="singletrafficReport.id == 3"></longest-gps-offline>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                        <top-vehicle-rto *ngIf="singletrafficReport.id == 4"></top-vehicle-rto>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                        <longest-loading-sites *ngIf="singletrafficReport.id == 5"></longest-loading-sites>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                         <longest-unloading-offline *ngIf="singletrafficReport.id == 6"></longest-unloading-offline>
                         <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                        <slowest-onward-veicles *ngIf="singletrafficReport.id == 7"></slowest-onward-veicles>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i>
                         <longest-empty-vehicle *ngIf="singletrafficReport.id == 8"></longest-empty-vehicle>
                        <i class="fa fa-window-close report-close" (click)="deleteChallanReport(singletrafficReport)"></i> 
                    </div>
                </div>
            </div>
        </div>
    </nb-card-body>
</nb-card>