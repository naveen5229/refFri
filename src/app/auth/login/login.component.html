<h1 id="title" class="title">Login</h1>
<p class="sub-title">Hello! Log in with your mobile number.</p>

<div *ngIf="!listenOTP">
  <form #mobileForm="ngForm" (submit)="mobileForm.valid && sendOTP()">
    <div class="form-group">
      <input type="tel" minlength="10" maxlength="10" [(ngModel)]="userDetails.mobile" #mobile="ngModel" name="mobile"
        id="input-mobile" placeholder="Mobile number" class="form-control" pattern="[0-9]+" required>
      <div *ngIf="mobile.errors && formSubmit">
        <div class="error" [hidden]="!mobile.errors.required">Mobile number is required</div>
        <div class="error" [hidden]="!mobile.errors.minlength">Mobile number must be 10 digit long</div>
        <div class="error" [hidden]="!mobile.errors.pattern">Invalid mobile number</div>
      </div>
    </div>

    <button type="submit" (click)="formSubmit = true" class="btn btn-primary btn-block" (click)="sendOTP">
      Send OTP
    </button>
  </form>

</div>

<div *ngIf="listenOTP">
  <form #otpForm="ngForm" (submit)="otpForm.valid && login()">

    <div class="form-group">
      <input [(ngModel)]="userDetails.otp" #otp="ngModel" name="otp" id="input-otp" placeholder="OTP number" class="form-control"
        pattern="[0-9]+" minlength="4" maxlength="4" required>
      <div *ngIf="otp.errors && formSubmit">
        <div class="error" [hidden]="!otp.errors.required">OTP is required</div>
        <div class="error" [hidden]="!otp.errors.minlength">OTP must be 04 digit long</div>
        <div class="error" [hidden]="!otp.errors.pattern">Invalid OTP number</div>
      </div>
    </div>

    <p *ngIf="otpCount && listenOTP">Resend OTP in {{otpCount}} seconds..</p>

    <button type="submit" (click)="formSubmit = true" class="btn btn-primary btn-block">
      Login
    </button>
  </form>

</div>